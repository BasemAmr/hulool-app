function w9(e,n){for(var t=0;t<n.length;t++){const s=n[t];if(typeof s!="string"&&!Array.isArray(s)){for(const l in s)if(l!=="default"&&!(l in e)){const i=Object.getOwnPropertyDescriptor(s,l);i&&Object.defineProperty(e,l,i.get?i:{enumerable:!0,get:()=>s[l]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerPolicy&&(i.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?i.credentials="include":l.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(l){if(l.ep)return;l.ep=!0;const i=t(l);fetch(l.href,i)}})();var mr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function _9(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var n=e.default;if(typeof n=="function"){var t=function s(){var l=!1;try{l=this instanceof s}catch{}return l?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};t.prototype=n.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var l=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(t,s,l.get?l:{enumerable:!0,get:function(){return e[s]}})}),t}var gg={exports:{}},_d={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cw;function j9(){if(cw)return _d;cw=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function t(s,l,i){var o=null;if(i!==void 0&&(o=""+i),l.key!==void 0&&(o=""+l.key),"key"in l){i={};for(var d in l)d!=="key"&&(i[d]=l[d])}else i=l;return l=i.ref,{$$typeof:e,type:s,key:o,ref:l!==void 0?l:null,props:i}}return _d.Fragment=n,_d.jsx=t,_d.jsxs=t,_d}var dw;function N9(){return dw||(dw=1,gg.exports=j9()),gg.exports}var r=N9(),bg={exports:{}},fr={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uw;function C9(){if(uw)return fr;uw=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),a=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),h=Symbol.iterator;function f(O){return O===null||typeof O!="object"?null:(O=h&&O[h]||O["@@iterator"],typeof O=="function"?O:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,y={};function g(O,L,z){this.props=O,this.context=L,this.refs=y,this.updater=z||m}g.prototype.isReactComponent={},g.prototype.setState=function(O,L){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,L,"setState")},g.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function w(){}w.prototype=g.prototype;function x(O,L,z){this.props=O,this.context=L,this.refs=y,this.updater=z||m}var _=x.prototype=new w;_.constructor=x,b(_,g.prototype),_.isPureReactComponent=!0;var j=Array.isArray,R={H:null,A:null,T:null,S:null,V:null},M=Object.prototype.hasOwnProperty;function I(O,L,z,G,Z,ee){return z=ee.ref,{$$typeof:e,type:O,key:L,ref:z!==void 0?z:null,props:ee}}function F(O,L){return I(O.type,L,void 0,void 0,void 0,O.props)}function B(O){return typeof O=="object"&&O!==null&&O.$$typeof===e}function U(O){var L={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(z){return L[z]})}var Q=/\/+/g;function K(O,L){return typeof O=="object"&&O!==null&&O.key!=null?U(""+O.key):L.toString(36)}function T(){}function P(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(T,T):(O.status="pending",O.then(function(L){O.status==="pending"&&(O.status="fulfilled",O.value=L)},function(L){O.status==="pending"&&(O.status="rejected",O.reason=L)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function A(O,L,z,G,Z){var ee=typeof O;(ee==="undefined"||ee==="boolean")&&(O=null);var W=!1;if(O===null)W=!0;else switch(ee){case"bigint":case"string":case"number":W=!0;break;case"object":switch(O.$$typeof){case e:case n:W=!0;break;case u:return W=O._init,A(W(O._payload),L,z,G,Z)}}if(W)return Z=Z(O),W=G===""?"."+K(O,0):G,j(Z)?(z="",W!=null&&(z=W.replace(Q,"$&/")+"/"),A(Z,L,z,"",function(q){return q})):Z!=null&&(B(Z)&&(Z=F(Z,z+(Z.key==null||O&&O.key===Z.key?"":(""+Z.key).replace(Q,"$&/")+"/")+W)),L.push(Z)),1;W=0;var J=G===""?".":G+":";if(j(O))for(var $=0;$<O.length;$++)G=O[$],ee=J+K(G,$),W+=A(G,L,z,ee,Z);else if($=f(O),typeof $=="function")for(O=$.call(O),$=0;!(G=O.next()).done;)G=G.value,ee=J+K(G,$++),W+=A(G,L,z,ee,Z);else if(ee==="object"){if(typeof O.then=="function")return A(P(O),L,z,G,Z);throw L=String(O),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.")}return W}function N(O,L,z){if(O==null)return O;var G=[],Z=0;return A(O,G,"","",function(ee){return L.call(z,ee,Z++)}),G}function k(O){if(O._status===-1){var L=O._result;L=L(),L.then(function(z){(O._status===0||O._status===-1)&&(O._status=1,O._result=z)},function(z){(O._status===0||O._status===-1)&&(O._status=2,O._result=z)}),O._status===-1&&(O._status=0,O._result=L)}if(O._status===1)return O._result.default;throw O._result}var S=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var L=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(L))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)};function E(){}return fr.Children={map:N,forEach:function(O,L,z){N(O,function(){L.apply(this,arguments)},z)},count:function(O){var L=0;return N(O,function(){L++}),L},toArray:function(O){return N(O,function(L){return L})||[]},only:function(O){if(!B(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},fr.Component=g,fr.Fragment=t,fr.Profiler=l,fr.PureComponent=x,fr.StrictMode=s,fr.Suspense=c,fr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,fr.__COMPILER_RUNTIME={__proto__:null,c:function(O){return R.H.useMemoCache(O)}},fr.cache=function(O){return function(){return O.apply(null,arguments)}},fr.cloneElement=function(O,L,z){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var G=b({},O.props),Z=O.key,ee=void 0;if(L!=null)for(W in L.ref!==void 0&&(ee=void 0),L.key!==void 0&&(Z=""+L.key),L)!M.call(L,W)||W==="key"||W==="__self"||W==="__source"||W==="ref"&&L.ref===void 0||(G[W]=L[W]);var W=arguments.length-2;if(W===1)G.children=z;else if(1<W){for(var J=Array(W),$=0;$<W;$++)J[$]=arguments[$+2];G.children=J}return I(O.type,Z,void 0,void 0,ee,G)},fr.createContext=function(O){return O={$$typeof:o,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:i,_context:O},O},fr.createElement=function(O,L,z){var G,Z={},ee=null;if(L!=null)for(G in L.key!==void 0&&(ee=""+L.key),L)M.call(L,G)&&G!=="key"&&G!=="__self"&&G!=="__source"&&(Z[G]=L[G]);var W=arguments.length-2;if(W===1)Z.children=z;else if(1<W){for(var J=Array(W),$=0;$<W;$++)J[$]=arguments[$+2];Z.children=J}if(O&&O.defaultProps)for(G in W=O.defaultProps,W)Z[G]===void 0&&(Z[G]=W[G]);return I(O,ee,void 0,void 0,null,Z)},fr.createRef=function(){return{current:null}},fr.forwardRef=function(O){return{$$typeof:d,render:O}},fr.isValidElement=B,fr.lazy=function(O){return{$$typeof:u,_payload:{_status:-1,_result:O},_init:k}},fr.memo=function(O,L){return{$$typeof:a,type:O,compare:L===void 0?null:L}},fr.startTransition=function(O){var L=R.T,z={};R.T=z;try{var G=O(),Z=R.S;Z!==null&&Z(z,G),typeof G=="object"&&G!==null&&typeof G.then=="function"&&G.then(E,S)}catch(ee){S(ee)}finally{R.T=L}},fr.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},fr.use=function(O){return R.H.use(O)},fr.useActionState=function(O,L,z){return R.H.useActionState(O,L,z)},fr.useCallback=function(O,L){return R.H.useCallback(O,L)},fr.useContext=function(O){return R.H.useContext(O)},fr.useDebugValue=function(){},fr.useDeferredValue=function(O,L){return R.H.useDeferredValue(O,L)},fr.useEffect=function(O,L,z){var G=R.H;if(typeof z=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return G.useEffect(O,L)},fr.useId=function(){return R.H.useId()},fr.useImperativeHandle=function(O,L,z){return R.H.useImperativeHandle(O,L,z)},fr.useInsertionEffect=function(O,L){return R.H.useInsertionEffect(O,L)},fr.useLayoutEffect=function(O,L){return R.H.useLayoutEffect(O,L)},fr.useMemo=function(O,L){return R.H.useMemo(O,L)},fr.useOptimistic=function(O,L){return R.H.useOptimistic(O,L)},fr.useReducer=function(O,L,z){return R.H.useReducer(O,L,z)},fr.useRef=function(O){return R.H.useRef(O)},fr.useState=function(O){return R.H.useState(O)},fr.useSyncExternalStore=function(O,L,z){return R.H.useSyncExternalStore(O,L,z)},fr.useTransition=function(){return R.H.useTransition()},fr.version="19.1.1",fr}var fw;function Br(){return fw||(fw=1,bg.exports=C9()),bg.exports}var H=Br();const De=cm(H),F4=w9({__proto__:null,default:De},[H]);var yg={exports:{}},jd={},xg={exports:{}},vg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hw;function S9(){return hw||(hw=1,function(e){function n(N,k){var S=N.length;N.push(k);e:for(;0<S;){var E=S-1>>>1,O=N[E];if(0<l(O,k))N[E]=k,N[S]=O,S=E;else break e}}function t(N){return N.length===0?null:N[0]}function s(N){if(N.length===0)return null;var k=N[0],S=N.pop();if(S!==k){N[0]=S;e:for(var E=0,O=N.length,L=O>>>1;E<L;){var z=2*(E+1)-1,G=N[z],Z=z+1,ee=N[Z];if(0>l(G,S))Z<O&&0>l(ee,G)?(N[E]=ee,N[Z]=S,E=Z):(N[E]=G,N[z]=S,E=z);else if(Z<O&&0>l(ee,S))N[E]=ee,N[Z]=S,E=Z;else break e}}return k}function l(N,k){var S=N.sortIndex-k.sortIndex;return S!==0?S:N.id-k.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,d=o.now();e.unstable_now=function(){return o.now()-d}}var c=[],a=[],u=1,h=null,f=3,m=!1,b=!1,y=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function j(N){for(var k=t(a);k!==null;){if(k.callback===null)s(a);else if(k.startTime<=N)s(a),k.sortIndex=k.expirationTime,n(c,k);else break;k=t(a)}}function R(N){if(y=!1,j(N),!b)if(t(c)!==null)b=!0,M||(M=!0,K());else{var k=t(a);k!==null&&A(R,k.startTime-N)}}var M=!1,I=-1,F=5,B=-1;function U(){return g?!0:!(e.unstable_now()-B<F)}function Q(){if(g=!1,M){var N=e.unstable_now();B=N;var k=!0;try{e:{b=!1,y&&(y=!1,x(I),I=-1),m=!0;var S=f;try{t:{for(j(N),h=t(c);h!==null&&!(h.expirationTime>N&&U());){var E=h.callback;if(typeof E=="function"){h.callback=null,f=h.priorityLevel;var O=E(h.expirationTime<=N);if(N=e.unstable_now(),typeof O=="function"){h.callback=O,j(N),k=!0;break t}h===t(c)&&s(c),j(N)}else s(c);h=t(c)}if(h!==null)k=!0;else{var L=t(a);L!==null&&A(R,L.startTime-N),k=!1}}break e}finally{h=null,f=S,m=!1}k=void 0}}finally{k?K():M=!1}}}var K;if(typeof _=="function")K=function(){_(Q)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,P=T.port2;T.port1.onmessage=Q,K=function(){P.postMessage(null)}}else K=function(){w(Q,0)};function A(N,k){I=w(function(){N(e.unstable_now())},k)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(N){N.callback=null},e.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<N?Math.floor(1e3/N):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_next=function(N){switch(f){case 1:case 2:case 3:var k=3;break;default:k=f}var S=f;f=k;try{return N()}finally{f=S}},e.unstable_requestPaint=function(){g=!0},e.unstable_runWithPriority=function(N,k){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var S=f;f=N;try{return k()}finally{f=S}},e.unstable_scheduleCallback=function(N,k,S){var E=e.unstable_now();switch(typeof S=="object"&&S!==null?(S=S.delay,S=typeof S=="number"&&0<S?E+S:E):S=E,N){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=S+O,N={id:u++,callback:k,priorityLevel:N,startTime:S,expirationTime:O,sortIndex:-1},S>E?(N.sortIndex=S,n(a,N),t(c)===null&&N===t(a)&&(y?(x(I),I=-1):y=!0,A(R,S-E))):(N.sortIndex=O,n(c,N),b||m||(b=!0,M||(M=!0,K()))),N},e.unstable_shouldYield=U,e.unstable_wrapCallback=function(N){var k=f;return function(){var S=f;f=k;try{return N.apply(this,arguments)}finally{f=S}}}}(vg)),vg}var mw;function k9(){return mw||(mw=1,xg.exports=S9()),xg.exports}var wg={exports:{}},Un={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pw;function E9(){if(pw)return Un;pw=1;var e=Br();function n(c){var a="https://react.dev/errors/"+c;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+c+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(n(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},l=Symbol.for("react.portal");function i(c,a,u){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:h==null?null:""+h,children:c,containerInfo:a,implementation:u}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(c,a){if(c==="font")return"";if(typeof a=="string")return a==="use-credentials"?a:""}return Un.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Un.createPortal=function(c,a){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)throw Error(n(299));return i(c,a,null,u)},Un.flushSync=function(c){var a=o.T,u=s.p;try{if(o.T=null,s.p=2,c)return c()}finally{o.T=a,s.p=u,s.d.f()}},Un.preconnect=function(c,a){typeof c=="string"&&(a?(a=a.crossOrigin,a=typeof a=="string"?a==="use-credentials"?a:"":void 0):a=null,s.d.C(c,a))},Un.prefetchDNS=function(c){typeof c=="string"&&s.d.D(c)},Un.preinit=function(c,a){if(typeof c=="string"&&a&&typeof a.as=="string"){var u=a.as,h=d(u,a.crossOrigin),f=typeof a.integrity=="string"?a.integrity:void 0,m=typeof a.fetchPriority=="string"?a.fetchPriority:void 0;u==="style"?s.d.S(c,typeof a.precedence=="string"?a.precedence:void 0,{crossOrigin:h,integrity:f,fetchPriority:m}):u==="script"&&s.d.X(c,{crossOrigin:h,integrity:f,fetchPriority:m,nonce:typeof a.nonce=="string"?a.nonce:void 0})}},Un.preinitModule=function(c,a){if(typeof c=="string")if(typeof a=="object"&&a!==null){if(a.as==null||a.as==="script"){var u=d(a.as,a.crossOrigin);s.d.M(c,{crossOrigin:u,integrity:typeof a.integrity=="string"?a.integrity:void 0,nonce:typeof a.nonce=="string"?a.nonce:void 0})}}else a==null&&s.d.M(c)},Un.preload=function(c,a){if(typeof c=="string"&&typeof a=="object"&&a!==null&&typeof a.as=="string"){var u=a.as,h=d(u,a.crossOrigin);s.d.L(c,u,{crossOrigin:h,integrity:typeof a.integrity=="string"?a.integrity:void 0,nonce:typeof a.nonce=="string"?a.nonce:void 0,type:typeof a.type=="string"?a.type:void 0,fetchPriority:typeof a.fetchPriority=="string"?a.fetchPriority:void 0,referrerPolicy:typeof a.referrerPolicy=="string"?a.referrerPolicy:void 0,imageSrcSet:typeof a.imageSrcSet=="string"?a.imageSrcSet:void 0,imageSizes:typeof a.imageSizes=="string"?a.imageSizes:void 0,media:typeof a.media=="string"?a.media:void 0})}},Un.preloadModule=function(c,a){if(typeof c=="string")if(a){var u=d(a.as,a.crossOrigin);s.d.m(c,{as:typeof a.as=="string"&&a.as!=="script"?a.as:void 0,crossOrigin:u,integrity:typeof a.integrity=="string"?a.integrity:void 0})}else s.d.m(c)},Un.requestFormReset=function(c){s.d.r(c)},Un.unstable_batchedUpdates=function(c,a){return c(a)},Un.useFormState=function(c,a,u){return o.H.useFormState(c,a,u)},Un.useFormStatus=function(){return o.H.useHostTransitionStatus()},Un.version="19.1.1",Un}var gw;function dy(){if(gw)return wg.exports;gw=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),wg.exports=E9(),wg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bw;function R9(){if(bw)return jd;bw=1;var e=k9(),n=Br(),t=dy();function s(p){var v="https://react.dev/errors/"+p;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var C=2;C<arguments.length;C++)v+="&args[]="+encodeURIComponent(arguments[C])}return"Minified React error #"+p+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(p){return!(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)}function i(p){var v=p,C=p;if(p.alternate)for(;v.return;)v=v.return;else{p=v;do v=p,(v.flags&4098)!==0&&(C=v.return),p=v.return;while(p)}return v.tag===3?C:null}function o(p){if(p.tag===13){var v=p.memoizedState;if(v===null&&(p=p.alternate,p!==null&&(v=p.memoizedState)),v!==null)return v.dehydrated}return null}function d(p){if(i(p)!==p)throw Error(s(188))}function c(p){var v=p.alternate;if(!v){if(v=i(p),v===null)throw Error(s(188));return v!==p?null:p}for(var C=p,D=v;;){var V=C.return;if(V===null)break;var X=V.alternate;if(X===null){if(D=V.return,D!==null){C=D;continue}break}if(V.child===X.child){for(X=V.child;X;){if(X===C)return d(V),p;if(X===D)return d(V),v;X=X.sibling}throw Error(s(188))}if(C.return!==D.return)C=V,D=X;else{for(var ne=!1,de=V.child;de;){if(de===C){ne=!0,C=V,D=X;break}if(de===D){ne=!0,D=V,C=X;break}de=de.sibling}if(!ne){for(de=X.child;de;){if(de===C){ne=!0,C=X,D=V;break}if(de===D){ne=!0,D=X,C=V;break}de=de.sibling}if(!ne)throw Error(s(189))}}if(C.alternate!==D)throw Error(s(190))}if(C.tag!==3)throw Error(s(188));return C.stateNode.current===C?p:v}function a(p){var v=p.tag;if(v===5||v===26||v===27||v===6)return p;for(p=p.child;p!==null;){if(v=a(p),v!==null)return v;p=p.sibling}return null}var u=Object.assign,h=Symbol.for("react.element"),f=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),x=Symbol.for("react.consumer"),_=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function K(p){return p===null||typeof p!="object"?null:(p=Q&&p[Q]||p["@@iterator"],typeof p=="function"?p:null)}var T=Symbol.for("react.client.reference");function P(p){if(p==null)return null;if(typeof p=="function")return p.$$typeof===T?null:p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case b:return"Fragment";case g:return"Profiler";case y:return"StrictMode";case R:return"Suspense";case M:return"SuspenseList";case B:return"Activity"}if(typeof p=="object")switch(p.$$typeof){case m:return"Portal";case _:return(p.displayName||"Context")+".Provider";case x:return(p._context.displayName||"Context")+".Consumer";case j:var v=p.render;return p=p.displayName,p||(p=v.displayName||v.name||"",p=p!==""?"ForwardRef("+p+")":"ForwardRef"),p;case I:return v=p.displayName||null,v!==null?v:P(p.type)||"Memo";case F:v=p._payload,p=p._init;try{return P(p(v))}catch{}}return null}var A=Array.isArray,N=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,k=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,S={pending:!1,data:null,method:null,action:null},E=[],O=-1;function L(p){return{current:p}}function z(p){0>O||(p.current=E[O],E[O]=null,O--)}function G(p,v){O++,E[O]=p.current,p.current=v}var Z=L(null),ee=L(null),W=L(null),J=L(null);function $(p,v){switch(G(W,v),G(ee,p),G(Z,null),v.nodeType){case 9:case 11:p=(p=v.documentElement)&&(p=p.namespaceURI)?F2(p):0;break;default:if(p=v.tagName,v=v.namespaceURI)v=F2(v),p=L2(v,p);else switch(p){case"svg":p=1;break;case"math":p=2;break;default:p=0}}z(Z),G(Z,p)}function q(){z(Z),z(ee),z(W)}function Y(p){p.memoizedState!==null&&G(J,p);var v=Z.current,C=L2(v,p.type);v!==C&&(G(ee,p),G(Z,C))}function se(p){ee.current===p&&(z(Z),z(ee)),J.current===p&&(z(J),bd._currentValue=S)}var oe=Object.prototype.hasOwnProperty,ae=e.unstable_scheduleCallback,ce=e.unstable_cancelCallback,we=e.unstable_shouldYield,fe=e.unstable_requestPaint,re=e.unstable_now,ge=e.unstable_getCurrentPriorityLevel,le=e.unstable_ImmediatePriority,te=e.unstable_UserBlockingPriority,ie=e.unstable_NormalPriority,ue=e.unstable_LowPriority,_e=e.unstable_IdlePriority,je=e.log,ke=e.unstable_setDisableYieldValue,Le=null,Ue=null;function Qe(p){if(typeof je=="function"&&ke(p),Ue&&typeof Ue.setStrictMode=="function")try{Ue.setStrictMode(Le,p)}catch{}}var Be=Math.clz32?Math.clz32:_t,ct=Math.log,ft=Math.LN2;function _t(p){return p>>>=0,p===0?32:31-(ct(p)/ft|0)|0}var ut=256,lt=4194304;function ht(p){var v=p&42;if(v!==0)return v;switch(p&-p){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return p&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return p}}function jt(p,v,C){var D=p.pendingLanes;if(D===0)return 0;var V=0,X=p.suspendedLanes,ne=p.pingedLanes;p=p.warmLanes;var de=D&134217727;return de!==0?(D=de&~X,D!==0?V=ht(D):(ne&=de,ne!==0?V=ht(ne):C||(C=de&~p,C!==0&&(V=ht(C))))):(de=D&~X,de!==0?V=ht(de):ne!==0?V=ht(ne):C||(C=D&~p,C!==0&&(V=ht(C)))),V===0?0:v!==0&&v!==V&&(v&X)===0&&(X=V&-V,C=v&-v,X>=C||X===32&&(C&4194048)!==0)?v:V}function pt(p,v){return(p.pendingLanes&~(p.suspendedLanes&~p.pingedLanes)&v)===0}function Qt(p,v){switch(p){case 1:case 2:case 4:case 8:case 64:return v+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return v+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sr(){var p=ut;return ut<<=1,(ut&4194048)===0&&(ut=256),p}function Ot(){var p=lt;return lt<<=1,(lt&62914560)===0&&(lt=4194304),p}function Xt(p){for(var v=[],C=0;31>C;C++)v.push(p);return v}function kt(p,v){p.pendingLanes|=v,v!==268435456&&(p.suspendedLanes=0,p.pingedLanes=0,p.warmLanes=0)}function Rt(p,v,C,D,V,X){var ne=p.pendingLanes;p.pendingLanes=C,p.suspendedLanes=0,p.pingedLanes=0,p.warmLanes=0,p.expiredLanes&=C,p.entangledLanes&=C,p.errorRecoveryDisabledLanes&=C,p.shellSuspendCounter=0;var de=p.entanglements,ve=p.expirationTimes,Ie=p.hiddenUpdates;for(C=ne&~C;0<C;){var Ye=31-Be(C),st=1<<Ye;de[Ye]=0,ve[Ye]=-1;var ze=Ie[Ye];if(ze!==null)for(Ie[Ye]=null,Ye=0;Ye<ze.length;Ye++){var $e=ze[Ye];$e!==null&&($e.lane&=-536870913)}C&=~st}D!==0&&$t(p,D,0),X!==0&&V===0&&p.tag!==0&&(p.suspendedLanes|=X&~(ne&~v))}function $t(p,v,C){p.pendingLanes|=v,p.suspendedLanes&=~v;var D=31-Be(v);p.entangledLanes|=v,p.entanglements[D]=p.entanglements[D]|1073741824|C&4194090}function Ht(p,v){var C=p.entangledLanes|=v;for(p=p.entanglements;C;){var D=31-Be(C),V=1<<D;V&v|p[D]&v&&(p[D]|=v),C&=~V}}function xt(p){switch(p){case 2:p=1;break;case 8:p=4;break;case 32:p=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:p=128;break;case 268435456:p=134217728;break;default:p=0}return p}function Mt(p){return p&=-p,2<p?8<p?(p&134217727)!==0?32:268435456:8:2}function be(){var p=k.p;return p!==0?p:(p=window.event,p===void 0?32:nw(p.type))}function xe(p,v){var C=k.p;try{return k.p=p,v()}finally{k.p=C}}var Ee=Math.random().toString(36).slice(2),qe="__reactFiber$"+Ee,Oe="__reactProps$"+Ee,he="__reactContainer$"+Ee,ye="__reactEvents$"+Ee,Te="__reactListeners$"+Ee,Fe="__reactHandles$"+Ee,nt="__reactResources$"+Ee,me="__reactMarker$"+Ee;function He(p){delete p[qe],delete p[Oe],delete p[ye],delete p[Te],delete p[Fe]}function at(p){var v=p[qe];if(v)return v;for(var C=p.parentNode;C;){if(v=C[he]||C[qe]){if(C=v.alternate,v.child!==null||C!==null&&C.child!==null)for(p=$2(p);p!==null;){if(C=p[qe])return C;p=$2(p)}return v}p=C,C=p.parentNode}return null}function Ze(p){if(p=p[qe]||p[he]){var v=p.tag;if(v===5||v===6||v===13||v===26||v===27||v===3)return p}return null}function Ce(p){var v=p.tag;if(v===5||v===26||v===27||v===6)return p.stateNode;throw Error(s(33))}function vt(p){var v=p[nt];return v||(v=p[nt]={hoistableStyles:new Map,hoistableScripts:new Map}),v}function mt(p){p[me]=!0}var Ut=new Set,dr={};function jr(p,v){ar(p,v),ar(p+"Capture",v)}function ar(p,v){for(dr[p]=v,p=0;p<v.length;p++)Ut.add(v[p])}var ur=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),pe={},Ae={};function Ge(p){return oe.call(Ae,p)?!0:oe.call(pe,p)?!1:ur.test(p)?Ae[p]=!0:(pe[p]=!0,!1)}function Je(p,v,C){if(Ge(v))if(C===null)p.removeAttribute(v);else{switch(typeof C){case"undefined":case"function":case"symbol":p.removeAttribute(v);return;case"boolean":var D=v.toLowerCase().slice(0,5);if(D!=="data-"&&D!=="aria-"){p.removeAttribute(v);return}}p.setAttribute(v,""+C)}}function Ct(p,v,C){if(C===null)p.removeAttribute(v);else{switch(typeof C){case"undefined":case"function":case"symbol":case"boolean":p.removeAttribute(v);return}p.setAttribute(v,""+C)}}function We(p,v,C,D){if(D===null)p.removeAttribute(C);else{switch(typeof D){case"undefined":case"function":case"symbol":case"boolean":p.removeAttribute(C);return}p.setAttributeNS(v,C,""+D)}}var ot,Jt;function Ft(p){if(ot===void 0)try{throw Error()}catch(C){var v=C.stack.trim().match(/\n( *(at )?)/);ot=v&&v[1]||"",Jt=-1<C.stack.indexOf(`
    at`)?" (<anonymous>)":-1<C.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ot+p+Jt}var Tt=!1;function At(p,v){if(!p||Tt)return"";Tt=!0;var C=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var D={DetermineComponentFrameRoot:function(){try{if(v){var st=function(){throw Error()};if(Object.defineProperty(st.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(st,[])}catch($e){var ze=$e}Reflect.construct(p,[],st)}else{try{st.call()}catch($e){ze=$e}p.call(st.prototype)}}else{try{throw Error()}catch($e){ze=$e}(st=p())&&typeof st.catch=="function"&&st.catch(function(){})}}catch($e){if($e&&ze&&typeof $e.stack=="string")return[$e.stack,ze.stack]}return[null,null]}};D.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var V=Object.getOwnPropertyDescriptor(D.DetermineComponentFrameRoot,"name");V&&V.configurable&&Object.defineProperty(D.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var X=D.DetermineComponentFrameRoot(),ne=X[0],de=X[1];if(ne&&de){var ve=ne.split(`
`),Ie=de.split(`
`);for(V=D=0;D<ve.length&&!ve[D].includes("DetermineComponentFrameRoot");)D++;for(;V<Ie.length&&!Ie[V].includes("DetermineComponentFrameRoot");)V++;if(D===ve.length||V===Ie.length)for(D=ve.length-1,V=Ie.length-1;1<=D&&0<=V&&ve[D]!==Ie[V];)V--;for(;1<=D&&0<=V;D--,V--)if(ve[D]!==Ie[V]){if(D!==1||V!==1)do if(D--,V--,0>V||ve[D]!==Ie[V]){var Ye=`
`+ve[D].replace(" at new "," at ");return p.displayName&&Ye.includes("<anonymous>")&&(Ye=Ye.replace("<anonymous>",p.displayName)),Ye}while(1<=D&&0<=V);break}}}finally{Tt=!1,Error.prepareStackTrace=C}return(C=p?p.displayName||p.name:"")?Ft(C):""}function xr(p){switch(p.tag){case 26:case 27:case 5:return Ft(p.type);case 16:return Ft("Lazy");case 13:return Ft("Suspense");case 19:return Ft("SuspenseList");case 0:case 15:return At(p.type,!1);case 11:return At(p.type.render,!1);case 1:return At(p.type,!0);case 31:return Ft("Activity");default:return""}}function vr(p){try{var v="";do v+=xr(p),p=p.return;while(p);return v}catch(C){return`
Error generating stack: `+C.message+`
`+C.stack}}function rr(p){switch(typeof p){case"bigint":case"boolean":case"number":case"string":case"undefined":return p;case"object":return p;default:return""}}function Dr(p){var v=p.type;return(p=p.nodeName)&&p.toLowerCase()==="input"&&(v==="checkbox"||v==="radio")}function Jr(p){var v=Dr(p)?"checked":"value",C=Object.getOwnPropertyDescriptor(p.constructor.prototype,v),D=""+p[v];if(!p.hasOwnProperty(v)&&typeof C<"u"&&typeof C.get=="function"&&typeof C.set=="function"){var V=C.get,X=C.set;return Object.defineProperty(p,v,{configurable:!0,get:function(){return V.call(this)},set:function(ne){D=""+ne,X.call(this,ne)}}),Object.defineProperty(p,v,{enumerable:C.enumerable}),{getValue:function(){return D},setValue:function(ne){D=""+ne},stopTracking:function(){p._valueTracker=null,delete p[v]}}}}function en(p){p._valueTracker||(p._valueTracker=Jr(p))}function Pn(p){if(!p)return!1;var v=p._valueTracker;if(!v)return!0;var C=v.getValue(),D="";return p&&(D=Dr(p)?p.checked?"true":"false":p.value),p=D,p!==C?(v.setValue(p),!0):!1}function ns(p){if(p=p||(typeof document<"u"?document:void 0),typeof p>"u")return null;try{return p.activeElement||p.body}catch{return p.body}}var In=/[\n"\\]/g;function Se(p){return p.replace(In,function(v){return"\\"+v.charCodeAt(0).toString(16)+" "})}function dt(p,v,C,D,V,X,ne,de){p.name="",ne!=null&&typeof ne!="function"&&typeof ne!="symbol"&&typeof ne!="boolean"?p.type=ne:p.removeAttribute("type"),v!=null?ne==="number"?(v===0&&p.value===""||p.value!=v)&&(p.value=""+rr(v)):p.value!==""+rr(v)&&(p.value=""+rr(v)):ne!=="submit"&&ne!=="reset"||p.removeAttribute("value"),v!=null?Ke(p,ne,rr(v)):C!=null?Ke(p,ne,rr(C)):D!=null&&p.removeAttribute("value"),V==null&&X!=null&&(p.defaultChecked=!!X),V!=null&&(p.checked=V&&typeof V!="function"&&typeof V!="symbol"),de!=null&&typeof de!="function"&&typeof de!="symbol"&&typeof de!="boolean"?p.name=""+rr(de):p.removeAttribute("name")}function rt(p,v,C,D,V,X,ne,de){if(X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"&&(p.type=X),v!=null||C!=null){if(!(X!=="submit"&&X!=="reset"||v!=null))return;C=C!=null?""+rr(C):"",v=v!=null?""+rr(v):C,de||v===p.value||(p.value=v),p.defaultValue=v}D=D??V,D=typeof D!="function"&&typeof D!="symbol"&&!!D,p.checked=de?p.checked:!!D,p.defaultChecked=!!D,ne!=null&&typeof ne!="function"&&typeof ne!="symbol"&&typeof ne!="boolean"&&(p.name=ne)}function Ke(p,v,C){v==="number"&&ns(p.ownerDocument)===p||p.defaultValue===""+C||(p.defaultValue=""+C)}function Dt(p,v,C,D){if(p=p.options,v){v={};for(var V=0;V<C.length;V++)v["$"+C[V]]=!0;for(C=0;C<p.length;C++)V=v.hasOwnProperty("$"+p[C].value),p[C].selected!==V&&(p[C].selected=V),V&&D&&(p[C].defaultSelected=!0)}else{for(C=""+rr(C),v=null,V=0;V<p.length;V++){if(p[V].value===C){p[V].selected=!0,D&&(p[V].defaultSelected=!0);return}v!==null||p[V].disabled||(v=p[V])}v!==null&&(v.selected=!0)}}function nr(p,v,C){if(v!=null&&(v=""+rr(v),v!==p.value&&(p.value=v),C==null)){p.defaultValue!==v&&(p.defaultValue=v);return}p.defaultValue=C!=null?""+rr(C):""}function bt(p,v,C,D){if(v==null){if(D!=null){if(C!=null)throw Error(s(92));if(A(D)){if(1<D.length)throw Error(s(93));D=D[0]}C=D}C==null&&(C=""),v=C}C=rr(v),p.defaultValue=C,D=p.textContent,D===C&&D!==""&&D!==null&&(p.value=D)}function It(p,v){if(v){var C=p.firstChild;if(C&&C===p.lastChild&&C.nodeType===3){C.nodeValue=v;return}}p.textContent=v}var lr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function zt(p,v,C){var D=v.indexOf("--")===0;C==null||typeof C=="boolean"||C===""?D?p.setProperty(v,""):v==="float"?p.cssFloat="":p[v]="":D?p.setProperty(v,C):typeof C!="number"||C===0||lr.has(v)?v==="float"?p.cssFloat=C:p[v]=(""+C).trim():p[v]=C+"px"}function Nr(p,v,C){if(v!=null&&typeof v!="object")throw Error(s(62));if(p=p.style,C!=null){for(var D in C)!C.hasOwnProperty(D)||v!=null&&v.hasOwnProperty(D)||(D.indexOf("--")===0?p.setProperty(D,""):D==="float"?p.cssFloat="":p[D]="");for(var V in v)D=v[V],v.hasOwnProperty(V)&&C[V]!==D&&zt(p,V,D)}else for(var X in v)v.hasOwnProperty(X)&&zt(p,X,v[X])}function Sr(p){if(p.indexOf("-")===-1)return!1;switch(p){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tn=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Hr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function cn(p){return Hr.test(""+p)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":p}var Xr=null;function gn(p){return p=p.target||p.srcElement||window,p.correspondingUseElement&&(p=p.correspondingUseElement),p.nodeType===3?p.parentNode:p}var Qr=null,ys=null;function Rc(p){var v=Ze(p);if(v&&(p=v.stateNode)){var C=p[Oe]||null;e:switch(p=v.stateNode,v.type){case"input":if(dt(p,C.value,C.defaultValue,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name),v=C.name,C.type==="radio"&&v!=null){for(C=p;C.parentNode;)C=C.parentNode;for(C=C.querySelectorAll('input[name="'+Se(""+v)+'"][type="radio"]'),v=0;v<C.length;v++){var D=C[v];if(D!==p&&D.form===p.form){var V=D[Oe]||null;if(!V)throw Error(s(90));dt(D,V.value,V.defaultValue,V.defaultValue,V.checked,V.defaultChecked,V.type,V.name)}}for(v=0;v<C.length;v++)D=C[v],D.form===p.form&&Pn(D)}break e;case"textarea":nr(p,C.value,C.defaultValue);break e;case"select":v=C.value,v!=null&&Dt(p,!!C.multiple,v,!1)}}}var vi=!1;function ho(p,v,C){if(vi)return p(v,C);vi=!0;try{var D=p(v);return D}finally{if(vi=!1,(Qr!==null||ys!==null)&&(Mf(),Qr&&(v=Qr,p=ys,ys=Qr=null,Rc(v),p)))for(v=0;v<p.length;v++)Rc(p[v])}}function Tc(p,v){var C=p.stateNode;if(C===null)return null;var D=C[Oe]||null;if(D===null)return null;C=D[v];e:switch(v){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(D=!D.disabled)||(p=p.type,D=!(p==="button"||p==="input"||p==="select"||p==="textarea")),p=!D;break e;default:p=!1}if(p)return null;if(C&&typeof C!="function")throw Error(s(231,v,typeof C));return C}var Ba=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xp=!1;if(Ba)try{var Ac={};Object.defineProperty(Ac,"passive",{get:function(){xp=!0}}),window.addEventListener("test",Ac,Ac),window.removeEventListener("test",Ac,Ac)}catch{xp=!1}var wi=null,vp=null,Wu=null;function qx(){if(Wu)return Wu;var p,v=vp,C=v.length,D,V="value"in wi?wi.value:wi.textContent,X=V.length;for(p=0;p<C&&v[p]===V[p];p++);var ne=C-p;for(D=1;D<=ne&&v[C-D]===V[X-D];D++);return Wu=V.slice(p,1<D?1-D:void 0)}function Qu(p){var v=p.keyCode;return"charCode"in p?(p=p.charCode,p===0&&v===13&&(p=13)):p=v,p===10&&(p=13),32<=p||p===13?p:0}function Gu(){return!0}function $x(){return!1}function ss(p){function v(C,D,V,X,ne){this._reactName=C,this._targetInst=V,this.type=D,this.nativeEvent=X,this.target=ne,this.currentTarget=null;for(var de in p)p.hasOwnProperty(de)&&(C=p[de],this[de]=C?C(X):X[de]);return this.isDefaultPrevented=(X.defaultPrevented!=null?X.defaultPrevented:X.returnValue===!1)?Gu:$x,this.isPropagationStopped=$x,this}return u(v.prototype,{preventDefault:function(){this.defaultPrevented=!0;var C=this.nativeEvent;C&&(C.preventDefault?C.preventDefault():typeof C.returnValue!="unknown"&&(C.returnValue=!1),this.isDefaultPrevented=Gu)},stopPropagation:function(){var C=this.nativeEvent;C&&(C.stopPropagation?C.stopPropagation():typeof C.cancelBubble!="unknown"&&(C.cancelBubble=!0),this.isPropagationStopped=Gu)},persist:function(){},isPersistent:Gu}),v}var mo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(p){return p.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xu=ss(mo),Mc=u({},mo,{view:0,detail:0}),wk=ss(Mc),wp,_p,Oc,Yu=u({},Mc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Np,button:0,buttons:0,relatedTarget:function(p){return p.relatedTarget===void 0?p.fromElement===p.srcElement?p.toElement:p.fromElement:p.relatedTarget},movementX:function(p){return"movementX"in p?p.movementX:(p!==Oc&&(Oc&&p.type==="mousemove"?(wp=p.screenX-Oc.screenX,_p=p.screenY-Oc.screenY):_p=wp=0,Oc=p),wp)},movementY:function(p){return"movementY"in p?p.movementY:_p}}),Ux=ss(Yu),_k=u({},Yu,{dataTransfer:0}),jk=ss(_k),Nk=u({},Mc,{relatedTarget:0}),jp=ss(Nk),Ck=u({},mo,{animationName:0,elapsedTime:0,pseudoElement:0}),Sk=ss(Ck),kk=u({},mo,{clipboardData:function(p){return"clipboardData"in p?p.clipboardData:window.clipboardData}}),Ek=ss(kk),Rk=u({},mo,{data:0}),Hx=ss(Rk),Tk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ak={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ok(p){var v=this.nativeEvent;return v.getModifierState?v.getModifierState(p):(p=Mk[p])?!!v[p]:!1}function Np(){return Ok}var Dk=u({},Mc,{key:function(p){if(p.key){var v=Tk[p.key]||p.key;if(v!=="Unidentified")return v}return p.type==="keypress"?(p=Qu(p),p===13?"Enter":String.fromCharCode(p)):p.type==="keydown"||p.type==="keyup"?Ak[p.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Np,charCode:function(p){return p.type==="keypress"?Qu(p):0},keyCode:function(p){return p.type==="keydown"||p.type==="keyup"?p.keyCode:0},which:function(p){return p.type==="keypress"?Qu(p):p.type==="keydown"||p.type==="keyup"?p.keyCode:0}}),Pk=ss(Dk),Ik=u({},Yu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vx=ss(Ik),Fk=u({},Mc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Np}),Lk=ss(Fk),zk=u({},mo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bk=ss(zk),qk=u({},Yu,{deltaX:function(p){return"deltaX"in p?p.deltaX:"wheelDeltaX"in p?-p.wheelDeltaX:0},deltaY:function(p){return"deltaY"in p?p.deltaY:"wheelDeltaY"in p?-p.wheelDeltaY:"wheelDelta"in p?-p.wheelDelta:0},deltaZ:0,deltaMode:0}),$k=ss(qk),Uk=u({},mo,{newState:0,oldState:0}),Hk=ss(Uk),Vk=[9,13,27,32],Cp=Ba&&"CompositionEvent"in window,Dc=null;Ba&&"documentMode"in document&&(Dc=document.documentMode);var Kk=Ba&&"TextEvent"in window&&!Dc,Kx=Ba&&(!Cp||Dc&&8<Dc&&11>=Dc),Wx=" ",Qx=!1;function Gx(p,v){switch(p){case"keyup":return Vk.indexOf(v.keyCode)!==-1;case"keydown":return v.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xx(p){return p=p.detail,typeof p=="object"&&"data"in p?p.data:null}var cl=!1;function Wk(p,v){switch(p){case"compositionend":return Xx(v);case"keypress":return v.which!==32?null:(Qx=!0,Wx);case"textInput":return p=v.data,p===Wx&&Qx?null:p;default:return null}}function Qk(p,v){if(cl)return p==="compositionend"||!Cp&&Gx(p,v)?(p=qx(),Wu=vp=wi=null,cl=!1,p):null;switch(p){case"paste":return null;case"keypress":if(!(v.ctrlKey||v.altKey||v.metaKey)||v.ctrlKey&&v.altKey){if(v.char&&1<v.char.length)return v.char;if(v.which)return String.fromCharCode(v.which)}return null;case"compositionend":return Kx&&v.locale!=="ko"?null:v.data;default:return null}}var Gk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yx(p){var v=p&&p.nodeName&&p.nodeName.toLowerCase();return v==="input"?!!Gk[p.type]:v==="textarea"}function Zx(p,v,C,D){Qr?ys?ys.push(D):ys=[D]:Qr=D,v=Lf(v,"onChange"),0<v.length&&(C=new Xu("onChange","change",null,C,D),p.push({event:C,listeners:v}))}var Pc=null,Ic=null;function Xk(p){M2(p,0)}function Zu(p){var v=Ce(p);if(Pn(v))return p}function Jx(p,v){if(p==="change")return v}var ev=!1;if(Ba){var Sp;if(Ba){var kp="oninput"in document;if(!kp){var tv=document.createElement("div");tv.setAttribute("oninput","return;"),kp=typeof tv.oninput=="function"}Sp=kp}else Sp=!1;ev=Sp&&(!document.documentMode||9<document.documentMode)}function rv(){Pc&&(Pc.detachEvent("onpropertychange",nv),Ic=Pc=null)}function nv(p){if(p.propertyName==="value"&&Zu(Ic)){var v=[];Zx(v,Ic,p,gn(p)),ho(Xk,v)}}function Yk(p,v,C){p==="focusin"?(rv(),Pc=v,Ic=C,Pc.attachEvent("onpropertychange",nv)):p==="focusout"&&rv()}function Zk(p){if(p==="selectionchange"||p==="keyup"||p==="keydown")return Zu(Ic)}function Jk(p,v){if(p==="click")return Zu(v)}function e7(p,v){if(p==="input"||p==="change")return Zu(v)}function t7(p,v){return p===v&&(p!==0||1/p===1/v)||p!==p&&v!==v}var xs=typeof Object.is=="function"?Object.is:t7;function Fc(p,v){if(xs(p,v))return!0;if(typeof p!="object"||p===null||typeof v!="object"||v===null)return!1;var C=Object.keys(p),D=Object.keys(v);if(C.length!==D.length)return!1;for(D=0;D<C.length;D++){var V=C[D];if(!oe.call(v,V)||!xs(p[V],v[V]))return!1}return!0}function sv(p){for(;p&&p.firstChild;)p=p.firstChild;return p}function av(p,v){var C=sv(p);p=0;for(var D;C;){if(C.nodeType===3){if(D=p+C.textContent.length,p<=v&&D>=v)return{node:C,offset:v-p};p=D}e:{for(;C;){if(C.nextSibling){C=C.nextSibling;break e}C=C.parentNode}C=void 0}C=sv(C)}}function iv(p,v){return p&&v?p===v?!0:p&&p.nodeType===3?!1:v&&v.nodeType===3?iv(p,v.parentNode):"contains"in p?p.contains(v):p.compareDocumentPosition?!!(p.compareDocumentPosition(v)&16):!1:!1}function ov(p){p=p!=null&&p.ownerDocument!=null&&p.ownerDocument.defaultView!=null?p.ownerDocument.defaultView:window;for(var v=ns(p.document);v instanceof p.HTMLIFrameElement;){try{var C=typeof v.contentWindow.location.href=="string"}catch{C=!1}if(C)p=v.contentWindow;else break;v=ns(p.document)}return v}function Ep(p){var v=p&&p.nodeName&&p.nodeName.toLowerCase();return v&&(v==="input"&&(p.type==="text"||p.type==="search"||p.type==="tel"||p.type==="url"||p.type==="password")||v==="textarea"||p.contentEditable==="true")}var r7=Ba&&"documentMode"in document&&11>=document.documentMode,dl=null,Rp=null,Lc=null,Tp=!1;function lv(p,v,C){var D=C.window===C?C.document:C.nodeType===9?C:C.ownerDocument;Tp||dl==null||dl!==ns(D)||(D=dl,"selectionStart"in D&&Ep(D)?D={start:D.selectionStart,end:D.selectionEnd}:(D=(D.ownerDocument&&D.ownerDocument.defaultView||window).getSelection(),D={anchorNode:D.anchorNode,anchorOffset:D.anchorOffset,focusNode:D.focusNode,focusOffset:D.focusOffset}),Lc&&Fc(Lc,D)||(Lc=D,D=Lf(Rp,"onSelect"),0<D.length&&(v=new Xu("onSelect","select",null,v,C),p.push({event:v,listeners:D}),v.target=dl)))}function po(p,v){var C={};return C[p.toLowerCase()]=v.toLowerCase(),C["Webkit"+p]="webkit"+v,C["Moz"+p]="moz"+v,C}var ul={animationend:po("Animation","AnimationEnd"),animationiteration:po("Animation","AnimationIteration"),animationstart:po("Animation","AnimationStart"),transitionrun:po("Transition","TransitionRun"),transitionstart:po("Transition","TransitionStart"),transitioncancel:po("Transition","TransitionCancel"),transitionend:po("Transition","TransitionEnd")},Ap={},cv={};Ba&&(cv=document.createElement("div").style,"AnimationEvent"in window||(delete ul.animationend.animation,delete ul.animationiteration.animation,delete ul.animationstart.animation),"TransitionEvent"in window||delete ul.transitionend.transition);function go(p){if(Ap[p])return Ap[p];if(!ul[p])return p;var v=ul[p],C;for(C in v)if(v.hasOwnProperty(C)&&C in cv)return Ap[p]=v[C];return p}var dv=go("animationend"),uv=go("animationiteration"),fv=go("animationstart"),n7=go("transitionrun"),s7=go("transitionstart"),a7=go("transitioncancel"),hv=go("transitionend"),mv=new Map,Mp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Mp.push("scrollEnd");function na(p,v){mv.set(p,v),jr(v,[p])}var pv=new WeakMap;function Ls(p,v){if(typeof p=="object"&&p!==null){var C=pv.get(p);return C!==void 0?C:(v={value:p,source:v,stack:vr(v)},pv.set(p,v),v)}return{value:p,source:v,stack:vr(v)}}var zs=[],fl=0,Op=0;function Ju(){for(var p=fl,v=Op=fl=0;v<p;){var C=zs[v];zs[v++]=null;var D=zs[v];zs[v++]=null;var V=zs[v];zs[v++]=null;var X=zs[v];if(zs[v++]=null,D!==null&&V!==null){var ne=D.pending;ne===null?V.next=V:(V.next=ne.next,ne.next=V),D.pending=V}X!==0&&gv(C,V,X)}}function ef(p,v,C,D){zs[fl++]=p,zs[fl++]=v,zs[fl++]=C,zs[fl++]=D,Op|=D,p.lanes|=D,p=p.alternate,p!==null&&(p.lanes|=D)}function Dp(p,v,C,D){return ef(p,v,C,D),tf(p)}function hl(p,v){return ef(p,null,null,v),tf(p)}function gv(p,v,C){p.lanes|=C;var D=p.alternate;D!==null&&(D.lanes|=C);for(var V=!1,X=p.return;X!==null;)X.childLanes|=C,D=X.alternate,D!==null&&(D.childLanes|=C),X.tag===22&&(p=X.stateNode,p===null||p._visibility&1||(V=!0)),p=X,X=X.return;return p.tag===3?(X=p.stateNode,V&&v!==null&&(V=31-Be(C),p=X.hiddenUpdates,D=p[V],D===null?p[V]=[v]:D.push(v),v.lane=C|536870912),X):null}function tf(p){if(50<cd)throw cd=0,B0=null,Error(s(185));for(var v=p.return;v!==null;)p=v,v=p.return;return p.tag===3?p.stateNode:null}var ml={};function i7(p,v,C,D){this.tag=p,this.key=C,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=v,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=D,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vs(p,v,C,D){return new i7(p,v,C,D)}function Pp(p){return p=p.prototype,!(!p||!p.isReactComponent)}function qa(p,v){var C=p.alternate;return C===null?(C=vs(p.tag,v,p.key,p.mode),C.elementType=p.elementType,C.type=p.type,C.stateNode=p.stateNode,C.alternate=p,p.alternate=C):(C.pendingProps=v,C.type=p.type,C.flags=0,C.subtreeFlags=0,C.deletions=null),C.flags=p.flags&65011712,C.childLanes=p.childLanes,C.lanes=p.lanes,C.child=p.child,C.memoizedProps=p.memoizedProps,C.memoizedState=p.memoizedState,C.updateQueue=p.updateQueue,v=p.dependencies,C.dependencies=v===null?null:{lanes:v.lanes,firstContext:v.firstContext},C.sibling=p.sibling,C.index=p.index,C.ref=p.ref,C.refCleanup=p.refCleanup,C}function bv(p,v){p.flags&=65011714;var C=p.alternate;return C===null?(p.childLanes=0,p.lanes=v,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=C.childLanes,p.lanes=C.lanes,p.child=C.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=C.memoizedProps,p.memoizedState=C.memoizedState,p.updateQueue=C.updateQueue,p.type=C.type,v=C.dependencies,p.dependencies=v===null?null:{lanes:v.lanes,firstContext:v.firstContext}),p}function rf(p,v,C,D,V,X){var ne=0;if(D=p,typeof p=="function")Pp(p)&&(ne=1);else if(typeof p=="string")ne=l9(p,C,Z.current)?26:p==="html"||p==="head"||p==="body"?27:5;else e:switch(p){case B:return p=vs(31,C,v,V),p.elementType=B,p.lanes=X,p;case b:return bo(C.children,V,X,v);case y:ne=8,V|=24;break;case g:return p=vs(12,C,v,V|2),p.elementType=g,p.lanes=X,p;case R:return p=vs(13,C,v,V),p.elementType=R,p.lanes=X,p;case M:return p=vs(19,C,v,V),p.elementType=M,p.lanes=X,p;default:if(typeof p=="object"&&p!==null)switch(p.$$typeof){case w:case _:ne=10;break e;case x:ne=9;break e;case j:ne=11;break e;case I:ne=14;break e;case F:ne=16,D=null;break e}ne=29,C=Error(s(130,p===null?"null":typeof p,"")),D=null}return v=vs(ne,C,v,V),v.elementType=p,v.type=D,v.lanes=X,v}function bo(p,v,C,D){return p=vs(7,p,D,v),p.lanes=C,p}function Ip(p,v,C){return p=vs(6,p,null,v),p.lanes=C,p}function Fp(p,v,C){return v=vs(4,p.children!==null?p.children:[],p.key,v),v.lanes=C,v.stateNode={containerInfo:p.containerInfo,pendingChildren:null,implementation:p.implementation},v}var pl=[],gl=0,nf=null,sf=0,Bs=[],qs=0,yo=null,$a=1,Ua="";function xo(p,v){pl[gl++]=sf,pl[gl++]=nf,nf=p,sf=v}function yv(p,v,C){Bs[qs++]=$a,Bs[qs++]=Ua,Bs[qs++]=yo,yo=p;var D=$a;p=Ua;var V=32-Be(D)-1;D&=~(1<<V),C+=1;var X=32-Be(v)+V;if(30<X){var ne=V-V%5;X=(D&(1<<ne)-1).toString(32),D>>=ne,V-=ne,$a=1<<32-Be(v)+V|C<<V|D,Ua=X+p}else $a=1<<X|C<<V|D,Ua=p}function Lp(p){p.return!==null&&(xo(p,1),yv(p,1,0))}function zp(p){for(;p===nf;)nf=pl[--gl],pl[gl]=null,sf=pl[--gl],pl[gl]=null;for(;p===yo;)yo=Bs[--qs],Bs[qs]=null,Ua=Bs[--qs],Bs[qs]=null,$a=Bs[--qs],Bs[qs]=null}var Gn=null,rn=null,Ar=!1,vo=null,Na=!1,Bp=Error(s(519));function wo(p){var v=Error(s(418,""));throw qc(Ls(v,p)),Bp}function xv(p){var v=p.stateNode,C=p.type,D=p.memoizedProps;switch(v[qe]=p,v[Oe]=D,C){case"dialog":_r("cancel",v),_r("close",v);break;case"iframe":case"object":case"embed":_r("load",v);break;case"video":case"audio":for(C=0;C<ud.length;C++)_r(ud[C],v);break;case"source":_r("error",v);break;case"img":case"image":case"link":_r("error",v),_r("load",v);break;case"details":_r("toggle",v);break;case"input":_r("invalid",v),rt(v,D.value,D.defaultValue,D.checked,D.defaultChecked,D.type,D.name,!0),en(v);break;case"select":_r("invalid",v);break;case"textarea":_r("invalid",v),bt(v,D.value,D.defaultValue,D.children),en(v)}C=D.children,typeof C!="string"&&typeof C!="number"&&typeof C!="bigint"||v.textContent===""+C||D.suppressHydrationWarning===!0||I2(v.textContent,C)?(D.popover!=null&&(_r("beforetoggle",v),_r("toggle",v)),D.onScroll!=null&&_r("scroll",v),D.onScrollEnd!=null&&_r("scrollend",v),D.onClick!=null&&(v.onclick=zf),v=!0):v=!1,v||wo(p)}function vv(p){for(Gn=p.return;Gn;)switch(Gn.tag){case 5:case 13:Na=!1;return;case 27:case 3:Na=!0;return;default:Gn=Gn.return}}function zc(p){if(p!==Gn)return!1;if(!Ar)return vv(p),Ar=!0,!1;var v=p.tag,C;if((C=v!==3&&v!==27)&&((C=v===5)&&(C=p.type,C=!(C!=="form"&&C!=="button")||rg(p.type,p.memoizedProps)),C=!C),C&&rn&&wo(p),vv(p),v===13){if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(s(317));e:{for(p=p.nextSibling,v=0;p;){if(p.nodeType===8)if(C=p.data,C==="/$"){if(v===0){rn=aa(p.nextSibling);break e}v--}else C!=="$"&&C!=="$!"&&C!=="$?"||v++;p=p.nextSibling}rn=null}}else v===27?(v=rn,Fi(p.type)?(p=ig,ig=null,rn=p):rn=v):rn=Gn?aa(p.stateNode.nextSibling):null;return!0}function Bc(){rn=Gn=null,Ar=!1}function wv(){var p=vo;return p!==null&&(os===null?os=p:os.push.apply(os,p),vo=null),p}function qc(p){vo===null?vo=[p]:vo.push(p)}var qp=L(null),_o=null,Ha=null;function _i(p,v,C){G(qp,v._currentValue),v._currentValue=C}function Va(p){p._currentValue=qp.current,z(qp)}function $p(p,v,C){for(;p!==null;){var D=p.alternate;if((p.childLanes&v)!==v?(p.childLanes|=v,D!==null&&(D.childLanes|=v)):D!==null&&(D.childLanes&v)!==v&&(D.childLanes|=v),p===C)break;p=p.return}}function Up(p,v,C,D){var V=p.child;for(V!==null&&(V.return=p);V!==null;){var X=V.dependencies;if(X!==null){var ne=V.child;X=X.firstContext;e:for(;X!==null;){var de=X;X=V;for(var ve=0;ve<v.length;ve++)if(de.context===v[ve]){X.lanes|=C,de=X.alternate,de!==null&&(de.lanes|=C),$p(X.return,C,p),D||(ne=null);break e}X=de.next}}else if(V.tag===18){if(ne=V.return,ne===null)throw Error(s(341));ne.lanes|=C,X=ne.alternate,X!==null&&(X.lanes|=C),$p(ne,C,p),ne=null}else ne=V.child;if(ne!==null)ne.return=V;else for(ne=V;ne!==null;){if(ne===p){ne=null;break}if(V=ne.sibling,V!==null){V.return=ne.return,ne=V;break}ne=ne.return}V=ne}}function $c(p,v,C,D){p=null;for(var V=v,X=!1;V!==null;){if(!X){if((V.flags&524288)!==0)X=!0;else if((V.flags&262144)!==0)break}if(V.tag===10){var ne=V.alternate;if(ne===null)throw Error(s(387));if(ne=ne.memoizedProps,ne!==null){var de=V.type;xs(V.pendingProps.value,ne.value)||(p!==null?p.push(de):p=[de])}}else if(V===J.current){if(ne=V.alternate,ne===null)throw Error(s(387));ne.memoizedState.memoizedState!==V.memoizedState.memoizedState&&(p!==null?p.push(bd):p=[bd])}V=V.return}p!==null&&Up(v,p,C,D),v.flags|=262144}function af(p){for(p=p.firstContext;p!==null;){if(!xs(p.context._currentValue,p.memoizedValue))return!0;p=p.next}return!1}function jo(p){_o=p,Ha=null,p=p.dependencies,p!==null&&(p.firstContext=null)}function $n(p){return _v(_o,p)}function of(p,v){return _o===null&&jo(p),_v(p,v)}function _v(p,v){var C=v._currentValue;if(v={context:v,memoizedValue:C,next:null},Ha===null){if(p===null)throw Error(s(308));Ha=v,p.dependencies={lanes:0,firstContext:v},p.flags|=524288}else Ha=Ha.next=v;return C}var o7=typeof AbortController<"u"?AbortController:function(){var p=[],v=this.signal={aborted:!1,addEventListener:function(C,D){p.push(D)}};this.abort=function(){v.aborted=!0,p.forEach(function(C){return C()})}},l7=e.unstable_scheduleCallback,c7=e.unstable_NormalPriority,vn={$$typeof:_,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Hp(){return{controller:new o7,data:new Map,refCount:0}}function Uc(p){p.refCount--,p.refCount===0&&l7(c7,function(){p.controller.abort()})}var Hc=null,Vp=0,bl=0,yl=null;function d7(p,v){if(Hc===null){var C=Hc=[];Vp=0,bl=W0(),yl={status:"pending",value:void 0,then:function(D){C.push(D)}}}return Vp++,v.then(jv,jv),v}function jv(){if(--Vp===0&&Hc!==null){yl!==null&&(yl.status="fulfilled");var p=Hc;Hc=null,bl=0,yl=null;for(var v=0;v<p.length;v++)(0,p[v])()}}function u7(p,v){var C=[],D={status:"pending",value:null,reason:null,then:function(V){C.push(V)}};return p.then(function(){D.status="fulfilled",D.value=v;for(var V=0;V<C.length;V++)(0,C[V])(v)},function(V){for(D.status="rejected",D.reason=V,V=0;V<C.length;V++)(0,C[V])(void 0)}),D}var Nv=N.S;N.S=function(p,v){typeof v=="object"&&v!==null&&typeof v.then=="function"&&d7(p,v),Nv!==null&&Nv(p,v)};var No=L(null);function Kp(){var p=No.current;return p!==null?p:Ur.pooledCache}function lf(p,v){v===null?G(No,No.current):G(No,v.pool)}function Cv(){var p=Kp();return p===null?null:{parent:vn._currentValue,pool:p}}var Vc=Error(s(460)),Sv=Error(s(474)),cf=Error(s(542)),Wp={then:function(){}};function kv(p){return p=p.status,p==="fulfilled"||p==="rejected"}function df(){}function Ev(p,v,C){switch(C=p[C],C===void 0?p.push(v):C!==v&&(v.then(df,df),v=C),v.status){case"fulfilled":return v.value;case"rejected":throw p=v.reason,Tv(p),p;default:if(typeof v.status=="string")v.then(df,df);else{if(p=Ur,p!==null&&100<p.shellSuspendCounter)throw Error(s(482));p=v,p.status="pending",p.then(function(D){if(v.status==="pending"){var V=v;V.status="fulfilled",V.value=D}},function(D){if(v.status==="pending"){var V=v;V.status="rejected",V.reason=D}})}switch(v.status){case"fulfilled":return v.value;case"rejected":throw p=v.reason,Tv(p),p}throw Kc=v,Vc}}var Kc=null;function Rv(){if(Kc===null)throw Error(s(459));var p=Kc;return Kc=null,p}function Tv(p){if(p===Vc||p===cf)throw Error(s(483))}var ji=!1;function Qp(p){p.updateQueue={baseState:p.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Gp(p,v){p=p.updateQueue,v.updateQueue===p&&(v.updateQueue={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,callbacks:null})}function Ni(p){return{lane:p,tag:0,payload:null,callback:null,next:null}}function Ci(p,v,C){var D=p.updateQueue;if(D===null)return null;if(D=D.shared,(Mr&2)!==0){var V=D.pending;return V===null?v.next=v:(v.next=V.next,V.next=v),D.pending=v,v=tf(p),gv(p,null,C),v}return ef(p,D,v,C),tf(p)}function Wc(p,v,C){if(v=v.updateQueue,v!==null&&(v=v.shared,(C&4194048)!==0)){var D=v.lanes;D&=p.pendingLanes,C|=D,v.lanes=C,Ht(p,C)}}function Xp(p,v){var C=p.updateQueue,D=p.alternate;if(D!==null&&(D=D.updateQueue,C===D)){var V=null,X=null;if(C=C.firstBaseUpdate,C!==null){do{var ne={lane:C.lane,tag:C.tag,payload:C.payload,callback:null,next:null};X===null?V=X=ne:X=X.next=ne,C=C.next}while(C!==null);X===null?V=X=v:X=X.next=v}else V=X=v;C={baseState:D.baseState,firstBaseUpdate:V,lastBaseUpdate:X,shared:D.shared,callbacks:D.callbacks},p.updateQueue=C;return}p=C.lastBaseUpdate,p===null?C.firstBaseUpdate=v:p.next=v,C.lastBaseUpdate=v}var Yp=!1;function Qc(){if(Yp){var p=yl;if(p!==null)throw p}}function Gc(p,v,C,D){Yp=!1;var V=p.updateQueue;ji=!1;var X=V.firstBaseUpdate,ne=V.lastBaseUpdate,de=V.shared.pending;if(de!==null){V.shared.pending=null;var ve=de,Ie=ve.next;ve.next=null,ne===null?X=Ie:ne.next=Ie,ne=ve;var Ye=p.alternate;Ye!==null&&(Ye=Ye.updateQueue,de=Ye.lastBaseUpdate,de!==ne&&(de===null?Ye.firstBaseUpdate=Ie:de.next=Ie,Ye.lastBaseUpdate=ve))}if(X!==null){var st=V.baseState;ne=0,Ye=Ie=ve=null,de=X;do{var ze=de.lane&-536870913,$e=ze!==de.lane;if($e?(kr&ze)===ze:(D&ze)===ze){ze!==0&&ze===bl&&(Yp=!0),Ye!==null&&(Ye=Ye.next={lane:0,tag:de.tag,payload:de.payload,callback:null,next:null});e:{var er=p,Wt=de;ze=v;var Fr=C;switch(Wt.tag){case 1:if(er=Wt.payload,typeof er=="function"){st=er.call(Fr,st,ze);break e}st=er;break e;case 3:er.flags=er.flags&-65537|128;case 0:if(er=Wt.payload,ze=typeof er=="function"?er.call(Fr,st,ze):er,ze==null)break e;st=u({},st,ze);break e;case 2:ji=!0}}ze=de.callback,ze!==null&&(p.flags|=64,$e&&(p.flags|=8192),$e=V.callbacks,$e===null?V.callbacks=[ze]:$e.push(ze))}else $e={lane:ze,tag:de.tag,payload:de.payload,callback:de.callback,next:null},Ye===null?(Ie=Ye=$e,ve=st):Ye=Ye.next=$e,ne|=ze;if(de=de.next,de===null){if(de=V.shared.pending,de===null)break;$e=de,de=$e.next,$e.next=null,V.lastBaseUpdate=$e,V.shared.pending=null}}while(!0);Ye===null&&(ve=st),V.baseState=ve,V.firstBaseUpdate=Ie,V.lastBaseUpdate=Ye,X===null&&(V.shared.lanes=0),Oi|=ne,p.lanes=ne,p.memoizedState=st}}function Av(p,v){if(typeof p!="function")throw Error(s(191,p));p.call(v)}function Mv(p,v){var C=p.callbacks;if(C!==null)for(p.callbacks=null,p=0;p<C.length;p++)Av(C[p],v)}var xl=L(null),uf=L(0);function Ov(p,v){p=Za,G(uf,p),G(xl,v),Za=p|v.baseLanes}function Zp(){G(uf,Za),G(xl,xl.current)}function Jp(){Za=uf.current,z(xl),z(uf)}var Si=0,pr=null,Pr=null,bn=null,ff=!1,vl=!1,Co=!1,hf=0,Xc=0,wl=null,f7=0;function dn(){throw Error(s(321))}function e0(p,v){if(v===null)return!1;for(var C=0;C<v.length&&C<p.length;C++)if(!xs(p[C],v[C]))return!1;return!0}function t0(p,v,C,D,V,X){return Si=X,pr=v,v.memoizedState=null,v.updateQueue=null,v.lanes=0,N.H=p===null||p.memoizedState===null?g1:b1,Co=!1,X=C(D,V),Co=!1,vl&&(X=Pv(v,C,D,V)),Dv(p),X}function Dv(p){N.H=xf;var v=Pr!==null&&Pr.next!==null;if(Si=0,bn=Pr=pr=null,ff=!1,Xc=0,wl=null,v)throw Error(s(300));p===null||En||(p=p.dependencies,p!==null&&af(p)&&(En=!0))}function Pv(p,v,C,D){pr=p;var V=0;do{if(vl&&(wl=null),Xc=0,vl=!1,25<=V)throw Error(s(301));if(V+=1,bn=Pr=null,p.updateQueue!=null){var X=p.updateQueue;X.lastEffect=null,X.events=null,X.stores=null,X.memoCache!=null&&(X.memoCache.index=0)}N.H=x7,X=v(C,D)}while(vl);return X}function h7(){var p=N.H,v=p.useState()[0];return v=typeof v.then=="function"?Yc(v):v,p=p.useState()[0],(Pr!==null?Pr.memoizedState:null)!==p&&(pr.flags|=1024),v}function r0(){var p=hf!==0;return hf=0,p}function n0(p,v,C){v.updateQueue=p.updateQueue,v.flags&=-2053,p.lanes&=~C}function s0(p){if(ff){for(p=p.memoizedState;p!==null;){var v=p.queue;v!==null&&(v.pending=null),p=p.next}ff=!1}Si=0,bn=Pr=pr=null,vl=!1,Xc=hf=0,wl=null}function as(){var p={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bn===null?pr.memoizedState=bn=p:bn=bn.next=p,bn}function yn(){if(Pr===null){var p=pr.alternate;p=p!==null?p.memoizedState:null}else p=Pr.next;var v=bn===null?pr.memoizedState:bn.next;if(v!==null)bn=v,Pr=p;else{if(p===null)throw pr.alternate===null?Error(s(467)):Error(s(310));Pr=p,p={memoizedState:Pr.memoizedState,baseState:Pr.baseState,baseQueue:Pr.baseQueue,queue:Pr.queue,next:null},bn===null?pr.memoizedState=bn=p:bn=bn.next=p}return bn}function a0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Yc(p){var v=Xc;return Xc+=1,wl===null&&(wl=[]),p=Ev(wl,p,v),v=pr,(bn===null?v.memoizedState:bn.next)===null&&(v=v.alternate,N.H=v===null||v.memoizedState===null?g1:b1),p}function mf(p){if(p!==null&&typeof p=="object"){if(typeof p.then=="function")return Yc(p);if(p.$$typeof===_)return $n(p)}throw Error(s(438,String(p)))}function i0(p){var v=null,C=pr.updateQueue;if(C!==null&&(v=C.memoCache),v==null){var D=pr.alternate;D!==null&&(D=D.updateQueue,D!==null&&(D=D.memoCache,D!=null&&(v={data:D.data.map(function(V){return V.slice()}),index:0})))}if(v==null&&(v={data:[],index:0}),C===null&&(C=a0(),pr.updateQueue=C),C.memoCache=v,C=v.data[v.index],C===void 0)for(C=v.data[v.index]=Array(p),D=0;D<p;D++)C[D]=U;return v.index++,C}function Ka(p,v){return typeof v=="function"?v(p):v}function pf(p){var v=yn();return o0(v,Pr,p)}function o0(p,v,C){var D=p.queue;if(D===null)throw Error(s(311));D.lastRenderedReducer=C;var V=p.baseQueue,X=D.pending;if(X!==null){if(V!==null){var ne=V.next;V.next=X.next,X.next=ne}v.baseQueue=V=X,D.pending=null}if(X=p.baseState,V===null)p.memoizedState=X;else{v=V.next;var de=ne=null,ve=null,Ie=v,Ye=!1;do{var st=Ie.lane&-536870913;if(st!==Ie.lane?(kr&st)===st:(Si&st)===st){var ze=Ie.revertLane;if(ze===0)ve!==null&&(ve=ve.next={lane:0,revertLane:0,action:Ie.action,hasEagerState:Ie.hasEagerState,eagerState:Ie.eagerState,next:null}),st===bl&&(Ye=!0);else if((Si&ze)===ze){Ie=Ie.next,ze===bl&&(Ye=!0);continue}else st={lane:0,revertLane:Ie.revertLane,action:Ie.action,hasEagerState:Ie.hasEagerState,eagerState:Ie.eagerState,next:null},ve===null?(de=ve=st,ne=X):ve=ve.next=st,pr.lanes|=ze,Oi|=ze;st=Ie.action,Co&&C(X,st),X=Ie.hasEagerState?Ie.eagerState:C(X,st)}else ze={lane:st,revertLane:Ie.revertLane,action:Ie.action,hasEagerState:Ie.hasEagerState,eagerState:Ie.eagerState,next:null},ve===null?(de=ve=ze,ne=X):ve=ve.next=ze,pr.lanes|=st,Oi|=st;Ie=Ie.next}while(Ie!==null&&Ie!==v);if(ve===null?ne=X:ve.next=de,!xs(X,p.memoizedState)&&(En=!0,Ye&&(C=yl,C!==null)))throw C;p.memoizedState=X,p.baseState=ne,p.baseQueue=ve,D.lastRenderedState=X}return V===null&&(D.lanes=0),[p.memoizedState,D.dispatch]}function l0(p){var v=yn(),C=v.queue;if(C===null)throw Error(s(311));C.lastRenderedReducer=p;var D=C.dispatch,V=C.pending,X=v.memoizedState;if(V!==null){C.pending=null;var ne=V=V.next;do X=p(X,ne.action),ne=ne.next;while(ne!==V);xs(X,v.memoizedState)||(En=!0),v.memoizedState=X,v.baseQueue===null&&(v.baseState=X),C.lastRenderedState=X}return[X,D]}function Iv(p,v,C){var D=pr,V=yn(),X=Ar;if(X){if(C===void 0)throw Error(s(407));C=C()}else C=v();var ne=!xs((Pr||V).memoizedState,C);ne&&(V.memoizedState=C,En=!0),V=V.queue;var de=zv.bind(null,D,V,p);if(Zc(2048,8,de,[p]),V.getSnapshot!==v||ne||bn!==null&&bn.memoizedState.tag&1){if(D.flags|=2048,_l(9,gf(),Lv.bind(null,D,V,C,v),null),Ur===null)throw Error(s(349));X||(Si&124)!==0||Fv(D,v,C)}return C}function Fv(p,v,C){p.flags|=16384,p={getSnapshot:v,value:C},v=pr.updateQueue,v===null?(v=a0(),pr.updateQueue=v,v.stores=[p]):(C=v.stores,C===null?v.stores=[p]:C.push(p))}function Lv(p,v,C,D){v.value=C,v.getSnapshot=D,Bv(v)&&qv(p)}function zv(p,v,C){return C(function(){Bv(v)&&qv(p)})}function Bv(p){var v=p.getSnapshot;p=p.value;try{var C=v();return!xs(p,C)}catch{return!0}}function qv(p){var v=hl(p,2);v!==null&&Cs(v,p,2)}function c0(p){var v=as();if(typeof p=="function"){var C=p;if(p=C(),Co){Qe(!0);try{C()}finally{Qe(!1)}}}return v.memoizedState=v.baseState=p,v.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ka,lastRenderedState:p},v}function $v(p,v,C,D){return p.baseState=C,o0(p,Pr,typeof D=="function"?D:Ka)}function m7(p,v,C,D,V){if(yf(p))throw Error(s(485));if(p=v.action,p!==null){var X={payload:V,action:p,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ne){X.listeners.push(ne)}};N.T!==null?C(!0):X.isTransition=!1,D(X),C=v.pending,C===null?(X.next=v.pending=X,Uv(v,X)):(X.next=C.next,v.pending=C.next=X)}}function Uv(p,v){var C=v.action,D=v.payload,V=p.state;if(v.isTransition){var X=N.T,ne={};N.T=ne;try{var de=C(V,D),ve=N.S;ve!==null&&ve(ne,de),Hv(p,v,de)}catch(Ie){d0(p,v,Ie)}finally{N.T=X}}else try{X=C(V,D),Hv(p,v,X)}catch(Ie){d0(p,v,Ie)}}function Hv(p,v,C){C!==null&&typeof C=="object"&&typeof C.then=="function"?C.then(function(D){Vv(p,v,D)},function(D){return d0(p,v,D)}):Vv(p,v,C)}function Vv(p,v,C){v.status="fulfilled",v.value=C,Kv(v),p.state=C,v=p.pending,v!==null&&(C=v.next,C===v?p.pending=null:(C=C.next,v.next=C,Uv(p,C)))}function d0(p,v,C){var D=p.pending;if(p.pending=null,D!==null){D=D.next;do v.status="rejected",v.reason=C,Kv(v),v=v.next;while(v!==D)}p.action=null}function Kv(p){p=p.listeners;for(var v=0;v<p.length;v++)(0,p[v])()}function Wv(p,v){return v}function Qv(p,v){if(Ar){var C=Ur.formState;if(C!==null){e:{var D=pr;if(Ar){if(rn){t:{for(var V=rn,X=Na;V.nodeType!==8;){if(!X){V=null;break t}if(V=aa(V.nextSibling),V===null){V=null;break t}}X=V.data,V=X==="F!"||X==="F"?V:null}if(V){rn=aa(V.nextSibling),D=V.data==="F!";break e}}wo(D)}D=!1}D&&(v=C[0])}}return C=as(),C.memoizedState=C.baseState=v,D={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wv,lastRenderedState:v},C.queue=D,C=h1.bind(null,pr,D),D.dispatch=C,D=c0(!1),X=p0.bind(null,pr,!1,D.queue),D=as(),V={state:v,dispatch:null,action:p,pending:null},D.queue=V,C=m7.bind(null,pr,V,X,C),V.dispatch=C,D.memoizedState=p,[v,C,!1]}function Gv(p){var v=yn();return Xv(v,Pr,p)}function Xv(p,v,C){if(v=o0(p,v,Wv)[0],p=pf(Ka)[0],typeof v=="object"&&v!==null&&typeof v.then=="function")try{var D=Yc(v)}catch(ne){throw ne===Vc?cf:ne}else D=v;v=yn();var V=v.queue,X=V.dispatch;return C!==v.memoizedState&&(pr.flags|=2048,_l(9,gf(),p7.bind(null,V,C),null)),[D,X,p]}function p7(p,v){p.action=v}function Yv(p){var v=yn(),C=Pr;if(C!==null)return Xv(v,C,p);yn(),v=v.memoizedState,C=yn();var D=C.queue.dispatch;return C.memoizedState=p,[v,D,!1]}function _l(p,v,C,D){return p={tag:p,create:C,deps:D,inst:v,next:null},v=pr.updateQueue,v===null&&(v=a0(),pr.updateQueue=v),C=v.lastEffect,C===null?v.lastEffect=p.next=p:(D=C.next,C.next=p,p.next=D,v.lastEffect=p),p}function gf(){return{destroy:void 0,resource:void 0}}function Zv(){return yn().memoizedState}function bf(p,v,C,D){var V=as();D=D===void 0?null:D,pr.flags|=p,V.memoizedState=_l(1|v,gf(),C,D)}function Zc(p,v,C,D){var V=yn();D=D===void 0?null:D;var X=V.memoizedState.inst;Pr!==null&&D!==null&&e0(D,Pr.memoizedState.deps)?V.memoizedState=_l(v,X,C,D):(pr.flags|=p,V.memoizedState=_l(1|v,X,C,D))}function Jv(p,v){bf(8390656,8,p,v)}function e1(p,v){Zc(2048,8,p,v)}function t1(p,v){return Zc(4,2,p,v)}function r1(p,v){return Zc(4,4,p,v)}function n1(p,v){if(typeof v=="function"){p=p();var C=v(p);return function(){typeof C=="function"?C():v(null)}}if(v!=null)return p=p(),v.current=p,function(){v.current=null}}function s1(p,v,C){C=C!=null?C.concat([p]):null,Zc(4,4,n1.bind(null,v,p),C)}function u0(){}function a1(p,v){var C=yn();v=v===void 0?null:v;var D=C.memoizedState;return v!==null&&e0(v,D[1])?D[0]:(C.memoizedState=[p,v],p)}function i1(p,v){var C=yn();v=v===void 0?null:v;var D=C.memoizedState;if(v!==null&&e0(v,D[1]))return D[0];if(D=p(),Co){Qe(!0);try{p()}finally{Qe(!1)}}return C.memoizedState=[D,v],D}function f0(p,v,C){return C===void 0||(Si&1073741824)!==0?p.memoizedState=v:(p.memoizedState=C,p=c2(),pr.lanes|=p,Oi|=p,C)}function o1(p,v,C,D){return xs(C,v)?C:xl.current!==null?(p=f0(p,C,D),xs(p,v)||(En=!0),p):(Si&42)===0?(En=!0,p.memoizedState=C):(p=c2(),pr.lanes|=p,Oi|=p,v)}function l1(p,v,C,D,V){var X=k.p;k.p=X!==0&&8>X?X:8;var ne=N.T,de={};N.T=de,p0(p,!1,v,C);try{var ve=V(),Ie=N.S;if(Ie!==null&&Ie(de,ve),ve!==null&&typeof ve=="object"&&typeof ve.then=="function"){var Ye=u7(ve,D);Jc(p,v,Ye,Ns(p))}else Jc(p,v,D,Ns(p))}catch(st){Jc(p,v,{then:function(){},status:"rejected",reason:st},Ns())}finally{k.p=X,N.T=ne}}function g7(){}function h0(p,v,C,D){if(p.tag!==5)throw Error(s(476));var V=c1(p).queue;l1(p,V,v,S,C===null?g7:function(){return d1(p),C(D)})}function c1(p){var v=p.memoizedState;if(v!==null)return v;v={memoizedState:S,baseState:S,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ka,lastRenderedState:S},next:null};var C={};return v.next={memoizedState:C,baseState:C,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ka,lastRenderedState:C},next:null},p.memoizedState=v,p=p.alternate,p!==null&&(p.memoizedState=v),v}function d1(p){var v=c1(p).next.queue;Jc(p,v,{},Ns())}function m0(){return $n(bd)}function u1(){return yn().memoizedState}function f1(){return yn().memoizedState}function b7(p){for(var v=p.return;v!==null;){switch(v.tag){case 24:case 3:var C=Ns();p=Ni(C);var D=Ci(v,p,C);D!==null&&(Cs(D,v,C),Wc(D,v,C)),v={cache:Hp()},p.payload=v;return}v=v.return}}function y7(p,v,C){var D=Ns();C={lane:D,revertLane:0,action:C,hasEagerState:!1,eagerState:null,next:null},yf(p)?m1(v,C):(C=Dp(p,v,C,D),C!==null&&(Cs(C,p,D),p1(C,v,D)))}function h1(p,v,C){var D=Ns();Jc(p,v,C,D)}function Jc(p,v,C,D){var V={lane:D,revertLane:0,action:C,hasEagerState:!1,eagerState:null,next:null};if(yf(p))m1(v,V);else{var X=p.alternate;if(p.lanes===0&&(X===null||X.lanes===0)&&(X=v.lastRenderedReducer,X!==null))try{var ne=v.lastRenderedState,de=X(ne,C);if(V.hasEagerState=!0,V.eagerState=de,xs(de,ne))return ef(p,v,V,0),Ur===null&&Ju(),!1}catch{}finally{}if(C=Dp(p,v,V,D),C!==null)return Cs(C,p,D),p1(C,v,D),!0}return!1}function p0(p,v,C,D){if(D={lane:2,revertLane:W0(),action:D,hasEagerState:!1,eagerState:null,next:null},yf(p)){if(v)throw Error(s(479))}else v=Dp(p,C,D,2),v!==null&&Cs(v,p,2)}function yf(p){var v=p.alternate;return p===pr||v!==null&&v===pr}function m1(p,v){vl=ff=!0;var C=p.pending;C===null?v.next=v:(v.next=C.next,C.next=v),p.pending=v}function p1(p,v,C){if((C&4194048)!==0){var D=v.lanes;D&=p.pendingLanes,C|=D,v.lanes=C,Ht(p,C)}}var xf={readContext:$n,use:mf,useCallback:dn,useContext:dn,useEffect:dn,useImperativeHandle:dn,useLayoutEffect:dn,useInsertionEffect:dn,useMemo:dn,useReducer:dn,useRef:dn,useState:dn,useDebugValue:dn,useDeferredValue:dn,useTransition:dn,useSyncExternalStore:dn,useId:dn,useHostTransitionStatus:dn,useFormState:dn,useActionState:dn,useOptimistic:dn,useMemoCache:dn,useCacheRefresh:dn},g1={readContext:$n,use:mf,useCallback:function(p,v){return as().memoizedState=[p,v===void 0?null:v],p},useContext:$n,useEffect:Jv,useImperativeHandle:function(p,v,C){C=C!=null?C.concat([p]):null,bf(4194308,4,n1.bind(null,v,p),C)},useLayoutEffect:function(p,v){return bf(4194308,4,p,v)},useInsertionEffect:function(p,v){bf(4,2,p,v)},useMemo:function(p,v){var C=as();v=v===void 0?null:v;var D=p();if(Co){Qe(!0);try{p()}finally{Qe(!1)}}return C.memoizedState=[D,v],D},useReducer:function(p,v,C){var D=as();if(C!==void 0){var V=C(v);if(Co){Qe(!0);try{C(v)}finally{Qe(!1)}}}else V=v;return D.memoizedState=D.baseState=V,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:V},D.queue=p,p=p.dispatch=y7.bind(null,pr,p),[D.memoizedState,p]},useRef:function(p){var v=as();return p={current:p},v.memoizedState=p},useState:function(p){p=c0(p);var v=p.queue,C=h1.bind(null,pr,v);return v.dispatch=C,[p.memoizedState,C]},useDebugValue:u0,useDeferredValue:function(p,v){var C=as();return f0(C,p,v)},useTransition:function(){var p=c0(!1);return p=l1.bind(null,pr,p.queue,!0,!1),as().memoizedState=p,[!1,p]},useSyncExternalStore:function(p,v,C){var D=pr,V=as();if(Ar){if(C===void 0)throw Error(s(407));C=C()}else{if(C=v(),Ur===null)throw Error(s(349));(kr&124)!==0||Fv(D,v,C)}V.memoizedState=C;var X={value:C,getSnapshot:v};return V.queue=X,Jv(zv.bind(null,D,X,p),[p]),D.flags|=2048,_l(9,gf(),Lv.bind(null,D,X,C,v),null),C},useId:function(){var p=as(),v=Ur.identifierPrefix;if(Ar){var C=Ua,D=$a;C=(D&~(1<<32-Be(D)-1)).toString(32)+C,v=""+v+"R"+C,C=hf++,0<C&&(v+="H"+C.toString(32)),v+=""}else C=f7++,v=""+v+"r"+C.toString(32)+"";return p.memoizedState=v},useHostTransitionStatus:m0,useFormState:Qv,useActionState:Qv,useOptimistic:function(p){var v=as();v.memoizedState=v.baseState=p;var C={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return v.queue=C,v=p0.bind(null,pr,!0,C),C.dispatch=v,[p,v]},useMemoCache:i0,useCacheRefresh:function(){return as().memoizedState=b7.bind(null,pr)}},b1={readContext:$n,use:mf,useCallback:a1,useContext:$n,useEffect:e1,useImperativeHandle:s1,useInsertionEffect:t1,useLayoutEffect:r1,useMemo:i1,useReducer:pf,useRef:Zv,useState:function(){return pf(Ka)},useDebugValue:u0,useDeferredValue:function(p,v){var C=yn();return o1(C,Pr.memoizedState,p,v)},useTransition:function(){var p=pf(Ka)[0],v=yn().memoizedState;return[typeof p=="boolean"?p:Yc(p),v]},useSyncExternalStore:Iv,useId:u1,useHostTransitionStatus:m0,useFormState:Gv,useActionState:Gv,useOptimistic:function(p,v){var C=yn();return $v(C,Pr,p,v)},useMemoCache:i0,useCacheRefresh:f1},x7={readContext:$n,use:mf,useCallback:a1,useContext:$n,useEffect:e1,useImperativeHandle:s1,useInsertionEffect:t1,useLayoutEffect:r1,useMemo:i1,useReducer:l0,useRef:Zv,useState:function(){return l0(Ka)},useDebugValue:u0,useDeferredValue:function(p,v){var C=yn();return Pr===null?f0(C,p,v):o1(C,Pr.memoizedState,p,v)},useTransition:function(){var p=l0(Ka)[0],v=yn().memoizedState;return[typeof p=="boolean"?p:Yc(p),v]},useSyncExternalStore:Iv,useId:u1,useHostTransitionStatus:m0,useFormState:Yv,useActionState:Yv,useOptimistic:function(p,v){var C=yn();return Pr!==null?$v(C,Pr,p,v):(C.baseState=p,[p,C.queue.dispatch])},useMemoCache:i0,useCacheRefresh:f1},jl=null,ed=0;function vf(p){var v=ed;return ed+=1,jl===null&&(jl=[]),Ev(jl,p,v)}function td(p,v){v=v.props.ref,p.ref=v!==void 0?v:null}function wf(p,v){throw v.$$typeof===h?Error(s(525)):(p=Object.prototype.toString.call(v),Error(s(31,p==="[object Object]"?"object with keys {"+Object.keys(v).join(", ")+"}":p)))}function y1(p){var v=p._init;return v(p._payload)}function x1(p){function v(Me,Re){if(p){var Pe=Me.deletions;Pe===null?(Me.deletions=[Re],Me.flags|=16):Pe.push(Re)}}function C(Me,Re){if(!p)return null;for(;Re!==null;)v(Me,Re),Re=Re.sibling;return null}function D(Me){for(var Re=new Map;Me!==null;)Me.key!==null?Re.set(Me.key,Me):Re.set(Me.index,Me),Me=Me.sibling;return Re}function V(Me,Re){return Me=qa(Me,Re),Me.index=0,Me.sibling=null,Me}function X(Me,Re,Pe){return Me.index=Pe,p?(Pe=Me.alternate,Pe!==null?(Pe=Pe.index,Pe<Re?(Me.flags|=67108866,Re):Pe):(Me.flags|=67108866,Re)):(Me.flags|=1048576,Re)}function ne(Me){return p&&Me.alternate===null&&(Me.flags|=67108866),Me}function de(Me,Re,Pe,tt){return Re===null||Re.tag!==6?(Re=Ip(Pe,Me.mode,tt),Re.return=Me,Re):(Re=V(Re,Pe),Re.return=Me,Re)}function ve(Me,Re,Pe,tt){var Pt=Pe.type;return Pt===b?Ye(Me,Re,Pe.props.children,tt,Pe.key):Re!==null&&(Re.elementType===Pt||typeof Pt=="object"&&Pt!==null&&Pt.$$typeof===F&&y1(Pt)===Re.type)?(Re=V(Re,Pe.props),td(Re,Pe),Re.return=Me,Re):(Re=rf(Pe.type,Pe.key,Pe.props,null,Me.mode,tt),td(Re,Pe),Re.return=Me,Re)}function Ie(Me,Re,Pe,tt){return Re===null||Re.tag!==4||Re.stateNode.containerInfo!==Pe.containerInfo||Re.stateNode.implementation!==Pe.implementation?(Re=Fp(Pe,Me.mode,tt),Re.return=Me,Re):(Re=V(Re,Pe.children||[]),Re.return=Me,Re)}function Ye(Me,Re,Pe,tt,Pt){return Re===null||Re.tag!==7?(Re=bo(Pe,Me.mode,tt,Pt),Re.return=Me,Re):(Re=V(Re,Pe),Re.return=Me,Re)}function st(Me,Re,Pe){if(typeof Re=="string"&&Re!==""||typeof Re=="number"||typeof Re=="bigint")return Re=Ip(""+Re,Me.mode,Pe),Re.return=Me,Re;if(typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case f:return Pe=rf(Re.type,Re.key,Re.props,null,Me.mode,Pe),td(Pe,Re),Pe.return=Me,Pe;case m:return Re=Fp(Re,Me.mode,Pe),Re.return=Me,Re;case F:var tt=Re._init;return Re=tt(Re._payload),st(Me,Re,Pe)}if(A(Re)||K(Re))return Re=bo(Re,Me.mode,Pe,null),Re.return=Me,Re;if(typeof Re.then=="function")return st(Me,vf(Re),Pe);if(Re.$$typeof===_)return st(Me,of(Me,Re),Pe);wf(Me,Re)}return null}function ze(Me,Re,Pe,tt){var Pt=Re!==null?Re.key:null;if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number"||typeof Pe=="bigint")return Pt!==null?null:de(Me,Re,""+Pe,tt);if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case f:return Pe.key===Pt?ve(Me,Re,Pe,tt):null;case m:return Pe.key===Pt?Ie(Me,Re,Pe,tt):null;case F:return Pt=Pe._init,Pe=Pt(Pe._payload),ze(Me,Re,Pe,tt)}if(A(Pe)||K(Pe))return Pt!==null?null:Ye(Me,Re,Pe,tt,null);if(typeof Pe.then=="function")return ze(Me,Re,vf(Pe),tt);if(Pe.$$typeof===_)return ze(Me,Re,of(Me,Pe),tt);wf(Me,Pe)}return null}function $e(Me,Re,Pe,tt,Pt){if(typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint")return Me=Me.get(Pe)||null,de(Re,Me,""+tt,Pt);if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case f:return Me=Me.get(tt.key===null?Pe:tt.key)||null,ve(Re,Me,tt,Pt);case m:return Me=Me.get(tt.key===null?Pe:tt.key)||null,Ie(Re,Me,tt,Pt);case F:var br=tt._init;return tt=br(tt._payload),$e(Me,Re,Pe,tt,Pt)}if(A(tt)||K(tt))return Me=Me.get(Pe)||null,Ye(Re,Me,tt,Pt,null);if(typeof tt.then=="function")return $e(Me,Re,Pe,vf(tt),Pt);if(tt.$$typeof===_)return $e(Me,Re,Pe,of(Re,tt),Pt);wf(Re,tt)}return null}function er(Me,Re,Pe,tt){for(var Pt=null,br=null,Bt=Re,Gt=Re=0,Tn=null;Bt!==null&&Gt<Pe.length;Gt++){Bt.index>Gt?(Tn=Bt,Bt=null):Tn=Bt.sibling;var Rr=ze(Me,Bt,Pe[Gt],tt);if(Rr===null){Bt===null&&(Bt=Tn);break}p&&Bt&&Rr.alternate===null&&v(Me,Bt),Re=X(Rr,Re,Gt),br===null?Pt=Rr:br.sibling=Rr,br=Rr,Bt=Tn}if(Gt===Pe.length)return C(Me,Bt),Ar&&xo(Me,Gt),Pt;if(Bt===null){for(;Gt<Pe.length;Gt++)Bt=st(Me,Pe[Gt],tt),Bt!==null&&(Re=X(Bt,Re,Gt),br===null?Pt=Bt:br.sibling=Bt,br=Bt);return Ar&&xo(Me,Gt),Pt}for(Bt=D(Bt);Gt<Pe.length;Gt++)Tn=$e(Bt,Me,Gt,Pe[Gt],tt),Tn!==null&&(p&&Tn.alternate!==null&&Bt.delete(Tn.key===null?Gt:Tn.key),Re=X(Tn,Re,Gt),br===null?Pt=Tn:br.sibling=Tn,br=Tn);return p&&Bt.forEach(function($i){return v(Me,$i)}),Ar&&xo(Me,Gt),Pt}function Wt(Me,Re,Pe,tt){if(Pe==null)throw Error(s(151));for(var Pt=null,br=null,Bt=Re,Gt=Re=0,Tn=null,Rr=Pe.next();Bt!==null&&!Rr.done;Gt++,Rr=Pe.next()){Bt.index>Gt?(Tn=Bt,Bt=null):Tn=Bt.sibling;var $i=ze(Me,Bt,Rr.value,tt);if($i===null){Bt===null&&(Bt=Tn);break}p&&Bt&&$i.alternate===null&&v(Me,Bt),Re=X($i,Re,Gt),br===null?Pt=$i:br.sibling=$i,br=$i,Bt=Tn}if(Rr.done)return C(Me,Bt),Ar&&xo(Me,Gt),Pt;if(Bt===null){for(;!Rr.done;Gt++,Rr=Pe.next())Rr=st(Me,Rr.value,tt),Rr!==null&&(Re=X(Rr,Re,Gt),br===null?Pt=Rr:br.sibling=Rr,br=Rr);return Ar&&xo(Me,Gt),Pt}for(Bt=D(Bt);!Rr.done;Gt++,Rr=Pe.next())Rr=$e(Bt,Me,Gt,Rr.value,tt),Rr!==null&&(p&&Rr.alternate!==null&&Bt.delete(Rr.key===null?Gt:Rr.key),Re=X(Rr,Re,Gt),br===null?Pt=Rr:br.sibling=Rr,br=Rr);return p&&Bt.forEach(function(v9){return v(Me,v9)}),Ar&&xo(Me,Gt),Pt}function Fr(Me,Re,Pe,tt){if(typeof Pe=="object"&&Pe!==null&&Pe.type===b&&Pe.key===null&&(Pe=Pe.props.children),typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case f:e:{for(var Pt=Pe.key;Re!==null;){if(Re.key===Pt){if(Pt=Pe.type,Pt===b){if(Re.tag===7){C(Me,Re.sibling),tt=V(Re,Pe.props.children),tt.return=Me,Me=tt;break e}}else if(Re.elementType===Pt||typeof Pt=="object"&&Pt!==null&&Pt.$$typeof===F&&y1(Pt)===Re.type){C(Me,Re.sibling),tt=V(Re,Pe.props),td(tt,Pe),tt.return=Me,Me=tt;break e}C(Me,Re);break}else v(Me,Re);Re=Re.sibling}Pe.type===b?(tt=bo(Pe.props.children,Me.mode,tt,Pe.key),tt.return=Me,Me=tt):(tt=rf(Pe.type,Pe.key,Pe.props,null,Me.mode,tt),td(tt,Pe),tt.return=Me,Me=tt)}return ne(Me);case m:e:{for(Pt=Pe.key;Re!==null;){if(Re.key===Pt)if(Re.tag===4&&Re.stateNode.containerInfo===Pe.containerInfo&&Re.stateNode.implementation===Pe.implementation){C(Me,Re.sibling),tt=V(Re,Pe.children||[]),tt.return=Me,Me=tt;break e}else{C(Me,Re);break}else v(Me,Re);Re=Re.sibling}tt=Fp(Pe,Me.mode,tt),tt.return=Me,Me=tt}return ne(Me);case F:return Pt=Pe._init,Pe=Pt(Pe._payload),Fr(Me,Re,Pe,tt)}if(A(Pe))return er(Me,Re,Pe,tt);if(K(Pe)){if(Pt=K(Pe),typeof Pt!="function")throw Error(s(150));return Pe=Pt.call(Pe),Wt(Me,Re,Pe,tt)}if(typeof Pe.then=="function")return Fr(Me,Re,vf(Pe),tt);if(Pe.$$typeof===_)return Fr(Me,Re,of(Me,Pe),tt);wf(Me,Pe)}return typeof Pe=="string"&&Pe!==""||typeof Pe=="number"||typeof Pe=="bigint"?(Pe=""+Pe,Re!==null&&Re.tag===6?(C(Me,Re.sibling),tt=V(Re,Pe),tt.return=Me,Me=tt):(C(Me,Re),tt=Ip(Pe,Me.mode,tt),tt.return=Me,Me=tt),ne(Me)):C(Me,Re)}return function(Me,Re,Pe,tt){try{ed=0;var Pt=Fr(Me,Re,Pe,tt);return jl=null,Pt}catch(Bt){if(Bt===Vc||Bt===cf)throw Bt;var br=vs(29,Bt,null,Me.mode);return br.lanes=tt,br.return=Me,br}finally{}}}var Nl=x1(!0),v1=x1(!1),$s=L(null),Ca=null;function ki(p){var v=p.alternate;G(wn,wn.current&1),G($s,p),Ca===null&&(v===null||xl.current!==null||v.memoizedState!==null)&&(Ca=p)}function w1(p){if(p.tag===22){if(G(wn,wn.current),G($s,p),Ca===null){var v=p.alternate;v!==null&&v.memoizedState!==null&&(Ca=p)}}else Ei()}function Ei(){G(wn,wn.current),G($s,$s.current)}function Wa(p){z($s),Ca===p&&(Ca=null),z(wn)}var wn=L(0);function _f(p){for(var v=p;v!==null;){if(v.tag===13){var C=v.memoizedState;if(C!==null&&(C=C.dehydrated,C===null||C.data==="$?"||ag(C)))return v}else if(v.tag===19&&v.memoizedProps.revealOrder!==void 0){if((v.flags&128)!==0)return v}else if(v.child!==null){v.child.return=v,v=v.child;continue}if(v===p)break;for(;v.sibling===null;){if(v.return===null||v.return===p)return null;v=v.return}v.sibling.return=v.return,v=v.sibling}return null}function g0(p,v,C,D){v=p.memoizedState,C=C(D,v),C=C==null?v:u({},v,C),p.memoizedState=C,p.lanes===0&&(p.updateQueue.baseState=C)}var b0={enqueueSetState:function(p,v,C){p=p._reactInternals;var D=Ns(),V=Ni(D);V.payload=v,C!=null&&(V.callback=C),v=Ci(p,V,D),v!==null&&(Cs(v,p,D),Wc(v,p,D))},enqueueReplaceState:function(p,v,C){p=p._reactInternals;var D=Ns(),V=Ni(D);V.tag=1,V.payload=v,C!=null&&(V.callback=C),v=Ci(p,V,D),v!==null&&(Cs(v,p,D),Wc(v,p,D))},enqueueForceUpdate:function(p,v){p=p._reactInternals;var C=Ns(),D=Ni(C);D.tag=2,v!=null&&(D.callback=v),v=Ci(p,D,C),v!==null&&(Cs(v,p,C),Wc(v,p,C))}};function _1(p,v,C,D,V,X,ne){return p=p.stateNode,typeof p.shouldComponentUpdate=="function"?p.shouldComponentUpdate(D,X,ne):v.prototype&&v.prototype.isPureReactComponent?!Fc(C,D)||!Fc(V,X):!0}function j1(p,v,C,D){p=v.state,typeof v.componentWillReceiveProps=="function"&&v.componentWillReceiveProps(C,D),typeof v.UNSAFE_componentWillReceiveProps=="function"&&v.UNSAFE_componentWillReceiveProps(C,D),v.state!==p&&b0.enqueueReplaceState(v,v.state,null)}function So(p,v){var C=v;if("ref"in v){C={};for(var D in v)D!=="ref"&&(C[D]=v[D])}if(p=p.defaultProps){C===v&&(C=u({},C));for(var V in p)C[V]===void 0&&(C[V]=p[V])}return C}var jf=typeof reportError=="function"?reportError:function(p){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var v=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof p=="object"&&p!==null&&typeof p.message=="string"?String(p.message):String(p),error:p});if(!window.dispatchEvent(v))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",p);return}console.error(p)};function N1(p){jf(p)}function C1(p){console.error(p)}function S1(p){jf(p)}function Nf(p,v){try{var C=p.onUncaughtError;C(v.value,{componentStack:v.stack})}catch(D){setTimeout(function(){throw D})}}function k1(p,v,C){try{var D=p.onCaughtError;D(C.value,{componentStack:C.stack,errorBoundary:v.tag===1?v.stateNode:null})}catch(V){setTimeout(function(){throw V})}}function y0(p,v,C){return C=Ni(C),C.tag=3,C.payload={element:null},C.callback=function(){Nf(p,v)},C}function E1(p){return p=Ni(p),p.tag=3,p}function R1(p,v,C,D){var V=C.type.getDerivedStateFromError;if(typeof V=="function"){var X=D.value;p.payload=function(){return V(X)},p.callback=function(){k1(v,C,D)}}var ne=C.stateNode;ne!==null&&typeof ne.componentDidCatch=="function"&&(p.callback=function(){k1(v,C,D),typeof V!="function"&&(Di===null?Di=new Set([this]):Di.add(this));var de=D.stack;this.componentDidCatch(D.value,{componentStack:de!==null?de:""})})}function v7(p,v,C,D,V){if(C.flags|=32768,D!==null&&typeof D=="object"&&typeof D.then=="function"){if(v=C.alternate,v!==null&&$c(v,C,V,!0),C=$s.current,C!==null){switch(C.tag){case 13:return Ca===null?$0():C.alternate===null&&nn===0&&(nn=3),C.flags&=-257,C.flags|=65536,C.lanes=V,D===Wp?C.flags|=16384:(v=C.updateQueue,v===null?C.updateQueue=new Set([D]):v.add(D),H0(p,D,V)),!1;case 22:return C.flags|=65536,D===Wp?C.flags|=16384:(v=C.updateQueue,v===null?(v={transitions:null,markerInstances:null,retryQueue:new Set([D])},C.updateQueue=v):(C=v.retryQueue,C===null?v.retryQueue=new Set([D]):C.add(D)),H0(p,D,V)),!1}throw Error(s(435,C.tag))}return H0(p,D,V),$0(),!1}if(Ar)return v=$s.current,v!==null?((v.flags&65536)===0&&(v.flags|=256),v.flags|=65536,v.lanes=V,D!==Bp&&(p=Error(s(422),{cause:D}),qc(Ls(p,C)))):(D!==Bp&&(v=Error(s(423),{cause:D}),qc(Ls(v,C))),p=p.current.alternate,p.flags|=65536,V&=-V,p.lanes|=V,D=Ls(D,C),V=y0(p.stateNode,D,V),Xp(p,V),nn!==4&&(nn=2)),!1;var X=Error(s(520),{cause:D});if(X=Ls(X,C),ld===null?ld=[X]:ld.push(X),nn!==4&&(nn=2),v===null)return!0;D=Ls(D,C),C=v;do{switch(C.tag){case 3:return C.flags|=65536,p=V&-V,C.lanes|=p,p=y0(C.stateNode,D,p),Xp(C,p),!1;case 1:if(v=C.type,X=C.stateNode,(C.flags&128)===0&&(typeof v.getDerivedStateFromError=="function"||X!==null&&typeof X.componentDidCatch=="function"&&(Di===null||!Di.has(X))))return C.flags|=65536,V&=-V,C.lanes|=V,V=E1(V),R1(V,p,C,D),Xp(C,V),!1}C=C.return}while(C!==null);return!1}var T1=Error(s(461)),En=!1;function Fn(p,v,C,D){v.child=p===null?v1(v,null,C,D):Nl(v,p.child,C,D)}function A1(p,v,C,D,V){C=C.render;var X=v.ref;if("ref"in D){var ne={};for(var de in D)de!=="ref"&&(ne[de]=D[de])}else ne=D;return jo(v),D=t0(p,v,C,ne,X,V),de=r0(),p!==null&&!En?(n0(p,v,V),Qa(p,v,V)):(Ar&&de&&Lp(v),v.flags|=1,Fn(p,v,D,V),v.child)}function M1(p,v,C,D,V){if(p===null){var X=C.type;return typeof X=="function"&&!Pp(X)&&X.defaultProps===void 0&&C.compare===null?(v.tag=15,v.type=X,O1(p,v,X,D,V)):(p=rf(C.type,null,D,v,v.mode,V),p.ref=v.ref,p.return=v,v.child=p)}if(X=p.child,!S0(p,V)){var ne=X.memoizedProps;if(C=C.compare,C=C!==null?C:Fc,C(ne,D)&&p.ref===v.ref)return Qa(p,v,V)}return v.flags|=1,p=qa(X,D),p.ref=v.ref,p.return=v,v.child=p}function O1(p,v,C,D,V){if(p!==null){var X=p.memoizedProps;if(Fc(X,D)&&p.ref===v.ref)if(En=!1,v.pendingProps=D=X,S0(p,V))(p.flags&131072)!==0&&(En=!0);else return v.lanes=p.lanes,Qa(p,v,V)}return x0(p,v,C,D,V)}function D1(p,v,C){var D=v.pendingProps,V=D.children,X=p!==null?p.memoizedState:null;if(D.mode==="hidden"){if((v.flags&128)!==0){if(D=X!==null?X.baseLanes|C:C,p!==null){for(V=v.child=p.child,X=0;V!==null;)X=X|V.lanes|V.childLanes,V=V.sibling;v.childLanes=X&~D}else v.childLanes=0,v.child=null;return P1(p,v,D,C)}if((C&536870912)!==0)v.memoizedState={baseLanes:0,cachePool:null},p!==null&&lf(v,X!==null?X.cachePool:null),X!==null?Ov(v,X):Zp(),w1(v);else return v.lanes=v.childLanes=536870912,P1(p,v,X!==null?X.baseLanes|C:C,C)}else X!==null?(lf(v,X.cachePool),Ov(v,X),Ei(),v.memoizedState=null):(p!==null&&lf(v,null),Zp(),Ei());return Fn(p,v,V,C),v.child}function P1(p,v,C,D){var V=Kp();return V=V===null?null:{parent:vn._currentValue,pool:V},v.memoizedState={baseLanes:C,cachePool:V},p!==null&&lf(v,null),Zp(),w1(v),p!==null&&$c(p,v,D,!0),null}function Cf(p,v){var C=v.ref;if(C===null)p!==null&&p.ref!==null&&(v.flags|=4194816);else{if(typeof C!="function"&&typeof C!="object")throw Error(s(284));(p===null||p.ref!==C)&&(v.flags|=4194816)}}function x0(p,v,C,D,V){return jo(v),C=t0(p,v,C,D,void 0,V),D=r0(),p!==null&&!En?(n0(p,v,V),Qa(p,v,V)):(Ar&&D&&Lp(v),v.flags|=1,Fn(p,v,C,V),v.child)}function I1(p,v,C,D,V,X){return jo(v),v.updateQueue=null,C=Pv(v,D,C,V),Dv(p),D=r0(),p!==null&&!En?(n0(p,v,X),Qa(p,v,X)):(Ar&&D&&Lp(v),v.flags|=1,Fn(p,v,C,X),v.child)}function F1(p,v,C,D,V){if(jo(v),v.stateNode===null){var X=ml,ne=C.contextType;typeof ne=="object"&&ne!==null&&(X=$n(ne)),X=new C(D,X),v.memoizedState=X.state!==null&&X.state!==void 0?X.state:null,X.updater=b0,v.stateNode=X,X._reactInternals=v,X=v.stateNode,X.props=D,X.state=v.memoizedState,X.refs={},Qp(v),ne=C.contextType,X.context=typeof ne=="object"&&ne!==null?$n(ne):ml,X.state=v.memoizedState,ne=C.getDerivedStateFromProps,typeof ne=="function"&&(g0(v,C,ne,D),X.state=v.memoizedState),typeof C.getDerivedStateFromProps=="function"||typeof X.getSnapshotBeforeUpdate=="function"||typeof X.UNSAFE_componentWillMount!="function"&&typeof X.componentWillMount!="function"||(ne=X.state,typeof X.componentWillMount=="function"&&X.componentWillMount(),typeof X.UNSAFE_componentWillMount=="function"&&X.UNSAFE_componentWillMount(),ne!==X.state&&b0.enqueueReplaceState(X,X.state,null),Gc(v,D,X,V),Qc(),X.state=v.memoizedState),typeof X.componentDidMount=="function"&&(v.flags|=4194308),D=!0}else if(p===null){X=v.stateNode;var de=v.memoizedProps,ve=So(C,de);X.props=ve;var Ie=X.context,Ye=C.contextType;ne=ml,typeof Ye=="object"&&Ye!==null&&(ne=$n(Ye));var st=C.getDerivedStateFromProps;Ye=typeof st=="function"||typeof X.getSnapshotBeforeUpdate=="function",de=v.pendingProps!==de,Ye||typeof X.UNSAFE_componentWillReceiveProps!="function"&&typeof X.componentWillReceiveProps!="function"||(de||Ie!==ne)&&j1(v,X,D,ne),ji=!1;var ze=v.memoizedState;X.state=ze,Gc(v,D,X,V),Qc(),Ie=v.memoizedState,de||ze!==Ie||ji?(typeof st=="function"&&(g0(v,C,st,D),Ie=v.memoizedState),(ve=ji||_1(v,C,ve,D,ze,Ie,ne))?(Ye||typeof X.UNSAFE_componentWillMount!="function"&&typeof X.componentWillMount!="function"||(typeof X.componentWillMount=="function"&&X.componentWillMount(),typeof X.UNSAFE_componentWillMount=="function"&&X.UNSAFE_componentWillMount()),typeof X.componentDidMount=="function"&&(v.flags|=4194308)):(typeof X.componentDidMount=="function"&&(v.flags|=4194308),v.memoizedProps=D,v.memoizedState=Ie),X.props=D,X.state=Ie,X.context=ne,D=ve):(typeof X.componentDidMount=="function"&&(v.flags|=4194308),D=!1)}else{X=v.stateNode,Gp(p,v),ne=v.memoizedProps,Ye=So(C,ne),X.props=Ye,st=v.pendingProps,ze=X.context,Ie=C.contextType,ve=ml,typeof Ie=="object"&&Ie!==null&&(ve=$n(Ie)),de=C.getDerivedStateFromProps,(Ie=typeof de=="function"||typeof X.getSnapshotBeforeUpdate=="function")||typeof X.UNSAFE_componentWillReceiveProps!="function"&&typeof X.componentWillReceiveProps!="function"||(ne!==st||ze!==ve)&&j1(v,X,D,ve),ji=!1,ze=v.memoizedState,X.state=ze,Gc(v,D,X,V),Qc();var $e=v.memoizedState;ne!==st||ze!==$e||ji||p!==null&&p.dependencies!==null&&af(p.dependencies)?(typeof de=="function"&&(g0(v,C,de,D),$e=v.memoizedState),(Ye=ji||_1(v,C,Ye,D,ze,$e,ve)||p!==null&&p.dependencies!==null&&af(p.dependencies))?(Ie||typeof X.UNSAFE_componentWillUpdate!="function"&&typeof X.componentWillUpdate!="function"||(typeof X.componentWillUpdate=="function"&&X.componentWillUpdate(D,$e,ve),typeof X.UNSAFE_componentWillUpdate=="function"&&X.UNSAFE_componentWillUpdate(D,$e,ve)),typeof X.componentDidUpdate=="function"&&(v.flags|=4),typeof X.getSnapshotBeforeUpdate=="function"&&(v.flags|=1024)):(typeof X.componentDidUpdate!="function"||ne===p.memoizedProps&&ze===p.memoizedState||(v.flags|=4),typeof X.getSnapshotBeforeUpdate!="function"||ne===p.memoizedProps&&ze===p.memoizedState||(v.flags|=1024),v.memoizedProps=D,v.memoizedState=$e),X.props=D,X.state=$e,X.context=ve,D=Ye):(typeof X.componentDidUpdate!="function"||ne===p.memoizedProps&&ze===p.memoizedState||(v.flags|=4),typeof X.getSnapshotBeforeUpdate!="function"||ne===p.memoizedProps&&ze===p.memoizedState||(v.flags|=1024),D=!1)}return X=D,Cf(p,v),D=(v.flags&128)!==0,X||D?(X=v.stateNode,C=D&&typeof C.getDerivedStateFromError!="function"?null:X.render(),v.flags|=1,p!==null&&D?(v.child=Nl(v,p.child,null,V),v.child=Nl(v,null,C,V)):Fn(p,v,C,V),v.memoizedState=X.state,p=v.child):p=Qa(p,v,V),p}function L1(p,v,C,D){return Bc(),v.flags|=256,Fn(p,v,C,D),v.child}var v0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function w0(p){return{baseLanes:p,cachePool:Cv()}}function _0(p,v,C){return p=p!==null?p.childLanes&~C:0,v&&(p|=Us),p}function z1(p,v,C){var D=v.pendingProps,V=!1,X=(v.flags&128)!==0,ne;if((ne=X)||(ne=p!==null&&p.memoizedState===null?!1:(wn.current&2)!==0),ne&&(V=!0,v.flags&=-129),ne=(v.flags&32)!==0,v.flags&=-33,p===null){if(Ar){if(V?ki(v):Ei(),Ar){var de=rn,ve;if(ve=de){e:{for(ve=de,de=Na;ve.nodeType!==8;){if(!de){de=null;break e}if(ve=aa(ve.nextSibling),ve===null){de=null;break e}}de=ve}de!==null?(v.memoizedState={dehydrated:de,treeContext:yo!==null?{id:$a,overflow:Ua}:null,retryLane:536870912,hydrationErrors:null},ve=vs(18,null,null,0),ve.stateNode=de,ve.return=v,v.child=ve,Gn=v,rn=null,ve=!0):ve=!1}ve||wo(v)}if(de=v.memoizedState,de!==null&&(de=de.dehydrated,de!==null))return ag(de)?v.lanes=32:v.lanes=536870912,null;Wa(v)}return de=D.children,D=D.fallback,V?(Ei(),V=v.mode,de=Sf({mode:"hidden",children:de},V),D=bo(D,V,C,null),de.return=v,D.return=v,de.sibling=D,v.child=de,V=v.child,V.memoizedState=w0(C),V.childLanes=_0(p,ne,C),v.memoizedState=v0,D):(ki(v),j0(v,de))}if(ve=p.memoizedState,ve!==null&&(de=ve.dehydrated,de!==null)){if(X)v.flags&256?(ki(v),v.flags&=-257,v=N0(p,v,C)):v.memoizedState!==null?(Ei(),v.child=p.child,v.flags|=128,v=null):(Ei(),V=D.fallback,de=v.mode,D=Sf({mode:"visible",children:D.children},de),V=bo(V,de,C,null),V.flags|=2,D.return=v,V.return=v,D.sibling=V,v.child=D,Nl(v,p.child,null,C),D=v.child,D.memoizedState=w0(C),D.childLanes=_0(p,ne,C),v.memoizedState=v0,v=V);else if(ki(v),ag(de)){if(ne=de.nextSibling&&de.nextSibling.dataset,ne)var Ie=ne.dgst;ne=Ie,D=Error(s(419)),D.stack="",D.digest=ne,qc({value:D,source:null,stack:null}),v=N0(p,v,C)}else if(En||$c(p,v,C,!1),ne=(C&p.childLanes)!==0,En||ne){if(ne=Ur,ne!==null&&(D=C&-C,D=(D&42)!==0?1:xt(D),D=(D&(ne.suspendedLanes|C))!==0?0:D,D!==0&&D!==ve.retryLane))throw ve.retryLane=D,hl(p,D),Cs(ne,p,D),T1;de.data==="$?"||$0(),v=N0(p,v,C)}else de.data==="$?"?(v.flags|=192,v.child=p.child,v=null):(p=ve.treeContext,rn=aa(de.nextSibling),Gn=v,Ar=!0,vo=null,Na=!1,p!==null&&(Bs[qs++]=$a,Bs[qs++]=Ua,Bs[qs++]=yo,$a=p.id,Ua=p.overflow,yo=v),v=j0(v,D.children),v.flags|=4096);return v}return V?(Ei(),V=D.fallback,de=v.mode,ve=p.child,Ie=ve.sibling,D=qa(ve,{mode:"hidden",children:D.children}),D.subtreeFlags=ve.subtreeFlags&65011712,Ie!==null?V=qa(Ie,V):(V=bo(V,de,C,null),V.flags|=2),V.return=v,D.return=v,D.sibling=V,v.child=D,D=V,V=v.child,de=p.child.memoizedState,de===null?de=w0(C):(ve=de.cachePool,ve!==null?(Ie=vn._currentValue,ve=ve.parent!==Ie?{parent:Ie,pool:Ie}:ve):ve=Cv(),de={baseLanes:de.baseLanes|C,cachePool:ve}),V.memoizedState=de,V.childLanes=_0(p,ne,C),v.memoizedState=v0,D):(ki(v),C=p.child,p=C.sibling,C=qa(C,{mode:"visible",children:D.children}),C.return=v,C.sibling=null,p!==null&&(ne=v.deletions,ne===null?(v.deletions=[p],v.flags|=16):ne.push(p)),v.child=C,v.memoizedState=null,C)}function j0(p,v){return v=Sf({mode:"visible",children:v},p.mode),v.return=p,p.child=v}function Sf(p,v){return p=vs(22,p,null,v),p.lanes=0,p.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},p}function N0(p,v,C){return Nl(v,p.child,null,C),p=j0(v,v.pendingProps.children),p.flags|=2,v.memoizedState=null,p}function B1(p,v,C){p.lanes|=v;var D=p.alternate;D!==null&&(D.lanes|=v),$p(p.return,v,C)}function C0(p,v,C,D,V){var X=p.memoizedState;X===null?p.memoizedState={isBackwards:v,rendering:null,renderingStartTime:0,last:D,tail:C,tailMode:V}:(X.isBackwards=v,X.rendering=null,X.renderingStartTime=0,X.last=D,X.tail=C,X.tailMode=V)}function q1(p,v,C){var D=v.pendingProps,V=D.revealOrder,X=D.tail;if(Fn(p,v,D.children,C),D=wn.current,(D&2)!==0)D=D&1|2,v.flags|=128;else{if(p!==null&&(p.flags&128)!==0)e:for(p=v.child;p!==null;){if(p.tag===13)p.memoizedState!==null&&B1(p,C,v);else if(p.tag===19)B1(p,C,v);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===v)break e;for(;p.sibling===null;){if(p.return===null||p.return===v)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}D&=1}switch(G(wn,D),V){case"forwards":for(C=v.child,V=null;C!==null;)p=C.alternate,p!==null&&_f(p)===null&&(V=C),C=C.sibling;C=V,C===null?(V=v.child,v.child=null):(V=C.sibling,C.sibling=null),C0(v,!1,V,C,X);break;case"backwards":for(C=null,V=v.child,v.child=null;V!==null;){if(p=V.alternate,p!==null&&_f(p)===null){v.child=V;break}p=V.sibling,V.sibling=C,C=V,V=p}C0(v,!0,C,null,X);break;case"together":C0(v,!1,null,null,void 0);break;default:v.memoizedState=null}return v.child}function Qa(p,v,C){if(p!==null&&(v.dependencies=p.dependencies),Oi|=v.lanes,(C&v.childLanes)===0)if(p!==null){if($c(p,v,C,!1),(C&v.childLanes)===0)return null}else return null;if(p!==null&&v.child!==p.child)throw Error(s(153));if(v.child!==null){for(p=v.child,C=qa(p,p.pendingProps),v.child=C,C.return=v;p.sibling!==null;)p=p.sibling,C=C.sibling=qa(p,p.pendingProps),C.return=v;C.sibling=null}return v.child}function S0(p,v){return(p.lanes&v)!==0?!0:(p=p.dependencies,!!(p!==null&&af(p)))}function w7(p,v,C){switch(v.tag){case 3:$(v,v.stateNode.containerInfo),_i(v,vn,p.memoizedState.cache),Bc();break;case 27:case 5:Y(v);break;case 4:$(v,v.stateNode.containerInfo);break;case 10:_i(v,v.type,v.memoizedProps.value);break;case 13:var D=v.memoizedState;if(D!==null)return D.dehydrated!==null?(ki(v),v.flags|=128,null):(C&v.child.childLanes)!==0?z1(p,v,C):(ki(v),p=Qa(p,v,C),p!==null?p.sibling:null);ki(v);break;case 19:var V=(p.flags&128)!==0;if(D=(C&v.childLanes)!==0,D||($c(p,v,C,!1),D=(C&v.childLanes)!==0),V){if(D)return q1(p,v,C);v.flags|=128}if(V=v.memoizedState,V!==null&&(V.rendering=null,V.tail=null,V.lastEffect=null),G(wn,wn.current),D)break;return null;case 22:case 23:return v.lanes=0,D1(p,v,C);case 24:_i(v,vn,p.memoizedState.cache)}return Qa(p,v,C)}function $1(p,v,C){if(p!==null)if(p.memoizedProps!==v.pendingProps)En=!0;else{if(!S0(p,C)&&(v.flags&128)===0)return En=!1,w7(p,v,C);En=(p.flags&131072)!==0}else En=!1,Ar&&(v.flags&1048576)!==0&&yv(v,sf,v.index);switch(v.lanes=0,v.tag){case 16:e:{p=v.pendingProps;var D=v.elementType,V=D._init;if(D=V(D._payload),v.type=D,typeof D=="function")Pp(D)?(p=So(D,p),v.tag=1,v=F1(null,v,D,p,C)):(v.tag=0,v=x0(null,v,D,p,C));else{if(D!=null){if(V=D.$$typeof,V===j){v.tag=11,v=A1(null,v,D,p,C);break e}else if(V===I){v.tag=14,v=M1(null,v,D,p,C);break e}}throw v=P(D)||D,Error(s(306,v,""))}}return v;case 0:return x0(p,v,v.type,v.pendingProps,C);case 1:return D=v.type,V=So(D,v.pendingProps),F1(p,v,D,V,C);case 3:e:{if($(v,v.stateNode.containerInfo),p===null)throw Error(s(387));D=v.pendingProps;var X=v.memoizedState;V=X.element,Gp(p,v),Gc(v,D,null,C);var ne=v.memoizedState;if(D=ne.cache,_i(v,vn,D),D!==X.cache&&Up(v,[vn],C,!0),Qc(),D=ne.element,X.isDehydrated)if(X={element:D,isDehydrated:!1,cache:ne.cache},v.updateQueue.baseState=X,v.memoizedState=X,v.flags&256){v=L1(p,v,D,C);break e}else if(D!==V){V=Ls(Error(s(424)),v),qc(V),v=L1(p,v,D,C);break e}else{switch(p=v.stateNode.containerInfo,p.nodeType){case 9:p=p.body;break;default:p=p.nodeName==="HTML"?p.ownerDocument.body:p}for(rn=aa(p.firstChild),Gn=v,Ar=!0,vo=null,Na=!0,C=v1(v,null,D,C),v.child=C;C;)C.flags=C.flags&-3|4096,C=C.sibling}else{if(Bc(),D===V){v=Qa(p,v,C);break e}Fn(p,v,D,C)}v=v.child}return v;case 26:return Cf(p,v),p===null?(C=K2(v.type,null,v.pendingProps,null))?v.memoizedState=C:Ar||(C=v.type,p=v.pendingProps,D=Bf(W.current).createElement(C),D[qe]=v,D[Oe]=p,zn(D,C,p),mt(D),v.stateNode=D):v.memoizedState=K2(v.type,p.memoizedProps,v.pendingProps,p.memoizedState),null;case 27:return Y(v),p===null&&Ar&&(D=v.stateNode=U2(v.type,v.pendingProps,W.current),Gn=v,Na=!0,V=rn,Fi(v.type)?(ig=V,rn=aa(D.firstChild)):rn=V),Fn(p,v,v.pendingProps.children,C),Cf(p,v),p===null&&(v.flags|=4194304),v.child;case 5:return p===null&&Ar&&((V=D=rn)&&(D=G7(D,v.type,v.pendingProps,Na),D!==null?(v.stateNode=D,Gn=v,rn=aa(D.firstChild),Na=!1,V=!0):V=!1),V||wo(v)),Y(v),V=v.type,X=v.pendingProps,ne=p!==null?p.memoizedProps:null,D=X.children,rg(V,X)?D=null:ne!==null&&rg(V,ne)&&(v.flags|=32),v.memoizedState!==null&&(V=t0(p,v,h7,null,null,C),bd._currentValue=V),Cf(p,v),Fn(p,v,D,C),v.child;case 6:return p===null&&Ar&&((p=C=rn)&&(C=X7(C,v.pendingProps,Na),C!==null?(v.stateNode=C,Gn=v,rn=null,p=!0):p=!1),p||wo(v)),null;case 13:return z1(p,v,C);case 4:return $(v,v.stateNode.containerInfo),D=v.pendingProps,p===null?v.child=Nl(v,null,D,C):Fn(p,v,D,C),v.child;case 11:return A1(p,v,v.type,v.pendingProps,C);case 7:return Fn(p,v,v.pendingProps,C),v.child;case 8:return Fn(p,v,v.pendingProps.children,C),v.child;case 12:return Fn(p,v,v.pendingProps.children,C),v.child;case 10:return D=v.pendingProps,_i(v,v.type,D.value),Fn(p,v,D.children,C),v.child;case 9:return V=v.type._context,D=v.pendingProps.children,jo(v),V=$n(V),D=D(V),v.flags|=1,Fn(p,v,D,C),v.child;case 14:return M1(p,v,v.type,v.pendingProps,C);case 15:return O1(p,v,v.type,v.pendingProps,C);case 19:return q1(p,v,C);case 31:return D=v.pendingProps,C=v.mode,D={mode:D.mode,children:D.children},p===null?(C=Sf(D,C),C.ref=v.ref,v.child=C,C.return=v,v=C):(C=qa(p.child,D),C.ref=v.ref,v.child=C,C.return=v,v=C),v;case 22:return D1(p,v,C);case 24:return jo(v),D=$n(vn),p===null?(V=Kp(),V===null&&(V=Ur,X=Hp(),V.pooledCache=X,X.refCount++,X!==null&&(V.pooledCacheLanes|=C),V=X),v.memoizedState={parent:D,cache:V},Qp(v),_i(v,vn,V)):((p.lanes&C)!==0&&(Gp(p,v),Gc(v,null,null,C),Qc()),V=p.memoizedState,X=v.memoizedState,V.parent!==D?(V={parent:D,cache:D},v.memoizedState=V,v.lanes===0&&(v.memoizedState=v.updateQueue.baseState=V),_i(v,vn,D)):(D=X.cache,_i(v,vn,D),D!==V.cache&&Up(v,[vn],C,!0))),Fn(p,v,v.pendingProps.children,C),v.child;case 29:throw v.pendingProps}throw Error(s(156,v.tag))}function Ga(p){p.flags|=4}function U1(p,v){if(v.type!=="stylesheet"||(v.state.loading&4)!==0)p.flags&=-16777217;else if(p.flags|=16777216,!Y2(v)){if(v=$s.current,v!==null&&((kr&4194048)===kr?Ca!==null:(kr&62914560)!==kr&&(kr&536870912)===0||v!==Ca))throw Kc=Wp,Sv;p.flags|=8192}}function kf(p,v){v!==null&&(p.flags|=4),p.flags&16384&&(v=p.tag!==22?Ot():536870912,p.lanes|=v,El|=v)}function rd(p,v){if(!Ar)switch(p.tailMode){case"hidden":v=p.tail;for(var C=null;v!==null;)v.alternate!==null&&(C=v),v=v.sibling;C===null?p.tail=null:C.sibling=null;break;case"collapsed":C=p.tail;for(var D=null;C!==null;)C.alternate!==null&&(D=C),C=C.sibling;D===null?v||p.tail===null?p.tail=null:p.tail.sibling=null:D.sibling=null}}function Yr(p){var v=p.alternate!==null&&p.alternate.child===p.child,C=0,D=0;if(v)for(var V=p.child;V!==null;)C|=V.lanes|V.childLanes,D|=V.subtreeFlags&65011712,D|=V.flags&65011712,V.return=p,V=V.sibling;else for(V=p.child;V!==null;)C|=V.lanes|V.childLanes,D|=V.subtreeFlags,D|=V.flags,V.return=p,V=V.sibling;return p.subtreeFlags|=D,p.childLanes=C,v}function _7(p,v,C){var D=v.pendingProps;switch(zp(v),v.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yr(v),null;case 1:return Yr(v),null;case 3:return C=v.stateNode,D=null,p!==null&&(D=p.memoizedState.cache),v.memoizedState.cache!==D&&(v.flags|=2048),Va(vn),q(),C.pendingContext&&(C.context=C.pendingContext,C.pendingContext=null),(p===null||p.child===null)&&(zc(v)?Ga(v):p===null||p.memoizedState.isDehydrated&&(v.flags&256)===0||(v.flags|=1024,wv())),Yr(v),null;case 26:return C=v.memoizedState,p===null?(Ga(v),C!==null?(Yr(v),U1(v,C)):(Yr(v),v.flags&=-16777217)):C?C!==p.memoizedState?(Ga(v),Yr(v),U1(v,C)):(Yr(v),v.flags&=-16777217):(p.memoizedProps!==D&&Ga(v),Yr(v),v.flags&=-16777217),null;case 27:se(v),C=W.current;var V=v.type;if(p!==null&&v.stateNode!=null)p.memoizedProps!==D&&Ga(v);else{if(!D){if(v.stateNode===null)throw Error(s(166));return Yr(v),null}p=Z.current,zc(v)?xv(v):(p=U2(V,D,C),v.stateNode=p,Ga(v))}return Yr(v),null;case 5:if(se(v),C=v.type,p!==null&&v.stateNode!=null)p.memoizedProps!==D&&Ga(v);else{if(!D){if(v.stateNode===null)throw Error(s(166));return Yr(v),null}if(p=Z.current,zc(v))xv(v);else{switch(V=Bf(W.current),p){case 1:p=V.createElementNS("http://www.w3.org/2000/svg",C);break;case 2:p=V.createElementNS("http://www.w3.org/1998/Math/MathML",C);break;default:switch(C){case"svg":p=V.createElementNS("http://www.w3.org/2000/svg",C);break;case"math":p=V.createElementNS("http://www.w3.org/1998/Math/MathML",C);break;case"script":p=V.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof D.is=="string"?V.createElement("select",{is:D.is}):V.createElement("select"),D.multiple?p.multiple=!0:D.size&&(p.size=D.size);break;default:p=typeof D.is=="string"?V.createElement(C,{is:D.is}):V.createElement(C)}}p[qe]=v,p[Oe]=D;e:for(V=v.child;V!==null;){if(V.tag===5||V.tag===6)p.appendChild(V.stateNode);else if(V.tag!==4&&V.tag!==27&&V.child!==null){V.child.return=V,V=V.child;continue}if(V===v)break e;for(;V.sibling===null;){if(V.return===null||V.return===v)break e;V=V.return}V.sibling.return=V.return,V=V.sibling}v.stateNode=p;e:switch(zn(p,C,D),C){case"button":case"input":case"select":case"textarea":p=!!D.autoFocus;break e;case"img":p=!0;break e;default:p=!1}p&&Ga(v)}}return Yr(v),v.flags&=-16777217,null;case 6:if(p&&v.stateNode!=null)p.memoizedProps!==D&&Ga(v);else{if(typeof D!="string"&&v.stateNode===null)throw Error(s(166));if(p=W.current,zc(v)){if(p=v.stateNode,C=v.memoizedProps,D=null,V=Gn,V!==null)switch(V.tag){case 27:case 5:D=V.memoizedProps}p[qe]=v,p=!!(p.nodeValue===C||D!==null&&D.suppressHydrationWarning===!0||I2(p.nodeValue,C)),p||wo(v)}else p=Bf(p).createTextNode(D),p[qe]=v,v.stateNode=p}return Yr(v),null;case 13:if(D=v.memoizedState,p===null||p.memoizedState!==null&&p.memoizedState.dehydrated!==null){if(V=zc(v),D!==null&&D.dehydrated!==null){if(p===null){if(!V)throw Error(s(318));if(V=v.memoizedState,V=V!==null?V.dehydrated:null,!V)throw Error(s(317));V[qe]=v}else Bc(),(v.flags&128)===0&&(v.memoizedState=null),v.flags|=4;Yr(v),V=!1}else V=wv(),p!==null&&p.memoizedState!==null&&(p.memoizedState.hydrationErrors=V),V=!0;if(!V)return v.flags&256?(Wa(v),v):(Wa(v),null)}if(Wa(v),(v.flags&128)!==0)return v.lanes=C,v;if(C=D!==null,p=p!==null&&p.memoizedState!==null,C){D=v.child,V=null,D.alternate!==null&&D.alternate.memoizedState!==null&&D.alternate.memoizedState.cachePool!==null&&(V=D.alternate.memoizedState.cachePool.pool);var X=null;D.memoizedState!==null&&D.memoizedState.cachePool!==null&&(X=D.memoizedState.cachePool.pool),X!==V&&(D.flags|=2048)}return C!==p&&C&&(v.child.flags|=8192),kf(v,v.updateQueue),Yr(v),null;case 4:return q(),p===null&&Y0(v.stateNode.containerInfo),Yr(v),null;case 10:return Va(v.type),Yr(v),null;case 19:if(z(wn),V=v.memoizedState,V===null)return Yr(v),null;if(D=(v.flags&128)!==0,X=V.rendering,X===null)if(D)rd(V,!1);else{if(nn!==0||p!==null&&(p.flags&128)!==0)for(p=v.child;p!==null;){if(X=_f(p),X!==null){for(v.flags|=128,rd(V,!1),p=X.updateQueue,v.updateQueue=p,kf(v,p),v.subtreeFlags=0,p=C,C=v.child;C!==null;)bv(C,p),C=C.sibling;return G(wn,wn.current&1|2),v.child}p=p.sibling}V.tail!==null&&re()>Tf&&(v.flags|=128,D=!0,rd(V,!1),v.lanes=4194304)}else{if(!D)if(p=_f(X),p!==null){if(v.flags|=128,D=!0,p=p.updateQueue,v.updateQueue=p,kf(v,p),rd(V,!0),V.tail===null&&V.tailMode==="hidden"&&!X.alternate&&!Ar)return Yr(v),null}else 2*re()-V.renderingStartTime>Tf&&C!==536870912&&(v.flags|=128,D=!0,rd(V,!1),v.lanes=4194304);V.isBackwards?(X.sibling=v.child,v.child=X):(p=V.last,p!==null?p.sibling=X:v.child=X,V.last=X)}return V.tail!==null?(v=V.tail,V.rendering=v,V.tail=v.sibling,V.renderingStartTime=re(),v.sibling=null,p=wn.current,G(wn,D?p&1|2:p&1),v):(Yr(v),null);case 22:case 23:return Wa(v),Jp(),D=v.memoizedState!==null,p!==null?p.memoizedState!==null!==D&&(v.flags|=8192):D&&(v.flags|=8192),D?(C&536870912)!==0&&(v.flags&128)===0&&(Yr(v),v.subtreeFlags&6&&(v.flags|=8192)):Yr(v),C=v.updateQueue,C!==null&&kf(v,C.retryQueue),C=null,p!==null&&p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(C=p.memoizedState.cachePool.pool),D=null,v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(D=v.memoizedState.cachePool.pool),D!==C&&(v.flags|=2048),p!==null&&z(No),null;case 24:return C=null,p!==null&&(C=p.memoizedState.cache),v.memoizedState.cache!==C&&(v.flags|=2048),Va(vn),Yr(v),null;case 25:return null;case 30:return null}throw Error(s(156,v.tag))}function j7(p,v){switch(zp(v),v.tag){case 1:return p=v.flags,p&65536?(v.flags=p&-65537|128,v):null;case 3:return Va(vn),q(),p=v.flags,(p&65536)!==0&&(p&128)===0?(v.flags=p&-65537|128,v):null;case 26:case 27:case 5:return se(v),null;case 13:if(Wa(v),p=v.memoizedState,p!==null&&p.dehydrated!==null){if(v.alternate===null)throw Error(s(340));Bc()}return p=v.flags,p&65536?(v.flags=p&-65537|128,v):null;case 19:return z(wn),null;case 4:return q(),null;case 10:return Va(v.type),null;case 22:case 23:return Wa(v),Jp(),p!==null&&z(No),p=v.flags,p&65536?(v.flags=p&-65537|128,v):null;case 24:return Va(vn),null;case 25:return null;default:return null}}function H1(p,v){switch(zp(v),v.tag){case 3:Va(vn),q();break;case 26:case 27:case 5:se(v);break;case 4:q();break;case 13:Wa(v);break;case 19:z(wn);break;case 10:Va(v.type);break;case 22:case 23:Wa(v),Jp(),p!==null&&z(No);break;case 24:Va(vn)}}function nd(p,v){try{var C=v.updateQueue,D=C!==null?C.lastEffect:null;if(D!==null){var V=D.next;C=V;do{if((C.tag&p)===p){D=void 0;var X=C.create,ne=C.inst;D=X(),ne.destroy=D}C=C.next}while(C!==V)}}catch(de){qr(v,v.return,de)}}function Ri(p,v,C){try{var D=v.updateQueue,V=D!==null?D.lastEffect:null;if(V!==null){var X=V.next;D=X;do{if((D.tag&p)===p){var ne=D.inst,de=ne.destroy;if(de!==void 0){ne.destroy=void 0,V=v;var ve=C,Ie=de;try{Ie()}catch(Ye){qr(V,ve,Ye)}}}D=D.next}while(D!==X)}}catch(Ye){qr(v,v.return,Ye)}}function V1(p){var v=p.updateQueue;if(v!==null){var C=p.stateNode;try{Mv(v,C)}catch(D){qr(p,p.return,D)}}}function K1(p,v,C){C.props=So(p.type,p.memoizedProps),C.state=p.memoizedState;try{C.componentWillUnmount()}catch(D){qr(p,v,D)}}function sd(p,v){try{var C=p.ref;if(C!==null){switch(p.tag){case 26:case 27:case 5:var D=p.stateNode;break;case 30:D=p.stateNode;break;default:D=p.stateNode}typeof C=="function"?p.refCleanup=C(D):C.current=D}}catch(V){qr(p,v,V)}}function Sa(p,v){var C=p.ref,D=p.refCleanup;if(C!==null)if(typeof D=="function")try{D()}catch(V){qr(p,v,V)}finally{p.refCleanup=null,p=p.alternate,p!=null&&(p.refCleanup=null)}else if(typeof C=="function")try{C(null)}catch(V){qr(p,v,V)}else C.current=null}function W1(p){var v=p.type,C=p.memoizedProps,D=p.stateNode;try{e:switch(v){case"button":case"input":case"select":case"textarea":C.autoFocus&&D.focus();break e;case"img":C.src?D.src=C.src:C.srcSet&&(D.srcset=C.srcSet)}}catch(V){qr(p,p.return,V)}}function k0(p,v,C){try{var D=p.stateNode;H7(D,p.type,C,v),D[Oe]=v}catch(V){qr(p,p.return,V)}}function Q1(p){return p.tag===5||p.tag===3||p.tag===26||p.tag===27&&Fi(p.type)||p.tag===4}function E0(p){e:for(;;){for(;p.sibling===null;){if(p.return===null||Q1(p.return))return null;p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&p.tag!==18;){if(p.tag===27&&Fi(p.type)||p.flags&2||p.child===null||p.tag===4)continue e;p.child.return=p,p=p.child}if(!(p.flags&2))return p.stateNode}}function R0(p,v,C){var D=p.tag;if(D===5||D===6)p=p.stateNode,v?(C.nodeType===9?C.body:C.nodeName==="HTML"?C.ownerDocument.body:C).insertBefore(p,v):(v=C.nodeType===9?C.body:C.nodeName==="HTML"?C.ownerDocument.body:C,v.appendChild(p),C=C._reactRootContainer,C!=null||v.onclick!==null||(v.onclick=zf));else if(D!==4&&(D===27&&Fi(p.type)&&(C=p.stateNode,v=null),p=p.child,p!==null))for(R0(p,v,C),p=p.sibling;p!==null;)R0(p,v,C),p=p.sibling}function Ef(p,v,C){var D=p.tag;if(D===5||D===6)p=p.stateNode,v?C.insertBefore(p,v):C.appendChild(p);else if(D!==4&&(D===27&&Fi(p.type)&&(C=p.stateNode),p=p.child,p!==null))for(Ef(p,v,C),p=p.sibling;p!==null;)Ef(p,v,C),p=p.sibling}function G1(p){var v=p.stateNode,C=p.memoizedProps;try{for(var D=p.type,V=v.attributes;V.length;)v.removeAttributeNode(V[0]);zn(v,D,C),v[qe]=p,v[Oe]=C}catch(X){qr(p,p.return,X)}}var Xa=!1,un=!1,T0=!1,X1=typeof WeakSet=="function"?WeakSet:Set,Rn=null;function N7(p,v){if(p=p.containerInfo,eg=Kf,p=ov(p),Ep(p)){if("selectionStart"in p)var C={start:p.selectionStart,end:p.selectionEnd};else e:{C=(C=p.ownerDocument)&&C.defaultView||window;var D=C.getSelection&&C.getSelection();if(D&&D.rangeCount!==0){C=D.anchorNode;var V=D.anchorOffset,X=D.focusNode;D=D.focusOffset;try{C.nodeType,X.nodeType}catch{C=null;break e}var ne=0,de=-1,ve=-1,Ie=0,Ye=0,st=p,ze=null;t:for(;;){for(var $e;st!==C||V!==0&&st.nodeType!==3||(de=ne+V),st!==X||D!==0&&st.nodeType!==3||(ve=ne+D),st.nodeType===3&&(ne+=st.nodeValue.length),($e=st.firstChild)!==null;)ze=st,st=$e;for(;;){if(st===p)break t;if(ze===C&&++Ie===V&&(de=ne),ze===X&&++Ye===D&&(ve=ne),($e=st.nextSibling)!==null)break;st=ze,ze=st.parentNode}st=$e}C=de===-1||ve===-1?null:{start:de,end:ve}}else C=null}C=C||{start:0,end:0}}else C=null;for(tg={focusedElem:p,selectionRange:C},Kf=!1,Rn=v;Rn!==null;)if(v=Rn,p=v.child,(v.subtreeFlags&1024)!==0&&p!==null)p.return=v,Rn=p;else for(;Rn!==null;){switch(v=Rn,X=v.alternate,p=v.flags,v.tag){case 0:break;case 11:case 15:break;case 1:if((p&1024)!==0&&X!==null){p=void 0,C=v,V=X.memoizedProps,X=X.memoizedState,D=C.stateNode;try{var er=So(C.type,V,C.elementType===C.type);p=D.getSnapshotBeforeUpdate(er,X),D.__reactInternalSnapshotBeforeUpdate=p}catch(Wt){qr(C,C.return,Wt)}}break;case 3:if((p&1024)!==0){if(p=v.stateNode.containerInfo,C=p.nodeType,C===9)sg(p);else if(C===1)switch(p.nodeName){case"HEAD":case"HTML":case"BODY":sg(p);break;default:p.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((p&1024)!==0)throw Error(s(163))}if(p=v.sibling,p!==null){p.return=v.return,Rn=p;break}Rn=v.return}}function Y1(p,v,C){var D=C.flags;switch(C.tag){case 0:case 11:case 15:Ti(p,C),D&4&&nd(5,C);break;case 1:if(Ti(p,C),D&4)if(p=C.stateNode,v===null)try{p.componentDidMount()}catch(ne){qr(C,C.return,ne)}else{var V=So(C.type,v.memoizedProps);v=v.memoizedState;try{p.componentDidUpdate(V,v,p.__reactInternalSnapshotBeforeUpdate)}catch(ne){qr(C,C.return,ne)}}D&64&&V1(C),D&512&&sd(C,C.return);break;case 3:if(Ti(p,C),D&64&&(p=C.updateQueue,p!==null)){if(v=null,C.child!==null)switch(C.child.tag){case 27:case 5:v=C.child.stateNode;break;case 1:v=C.child.stateNode}try{Mv(p,v)}catch(ne){qr(C,C.return,ne)}}break;case 27:v===null&&D&4&&G1(C);case 26:case 5:Ti(p,C),v===null&&D&4&&W1(C),D&512&&sd(C,C.return);break;case 12:Ti(p,C);break;case 13:Ti(p,C),D&4&&e2(p,C),D&64&&(p=C.memoizedState,p!==null&&(p=p.dehydrated,p!==null&&(C=O7.bind(null,C),Y7(p,C))));break;case 22:if(D=C.memoizedState!==null||Xa,!D){v=v!==null&&v.memoizedState!==null||un,V=Xa;var X=un;Xa=D,(un=v)&&!X?Ai(p,C,(C.subtreeFlags&8772)!==0):Ti(p,C),Xa=V,un=X}break;case 30:break;default:Ti(p,C)}}function Z1(p){var v=p.alternate;v!==null&&(p.alternate=null,Z1(v)),p.child=null,p.deletions=null,p.sibling=null,p.tag===5&&(v=p.stateNode,v!==null&&He(v)),p.stateNode=null,p.return=null,p.dependencies=null,p.memoizedProps=null,p.memoizedState=null,p.pendingProps=null,p.stateNode=null,p.updateQueue=null}var Gr=null,is=!1;function Ya(p,v,C){for(C=C.child;C!==null;)J1(p,v,C),C=C.sibling}function J1(p,v,C){if(Ue&&typeof Ue.onCommitFiberUnmount=="function")try{Ue.onCommitFiberUnmount(Le,C)}catch{}switch(C.tag){case 26:un||Sa(C,v),Ya(p,v,C),C.memoizedState?C.memoizedState.count--:C.stateNode&&(C=C.stateNode,C.parentNode.removeChild(C));break;case 27:un||Sa(C,v);var D=Gr,V=is;Fi(C.type)&&(Gr=C.stateNode,is=!1),Ya(p,v,C),hd(C.stateNode),Gr=D,is=V;break;case 5:un||Sa(C,v);case 6:if(D=Gr,V=is,Gr=null,Ya(p,v,C),Gr=D,is=V,Gr!==null)if(is)try{(Gr.nodeType===9?Gr.body:Gr.nodeName==="HTML"?Gr.ownerDocument.body:Gr).removeChild(C.stateNode)}catch(X){qr(C,v,X)}else try{Gr.removeChild(C.stateNode)}catch(X){qr(C,v,X)}break;case 18:Gr!==null&&(is?(p=Gr,q2(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,C.stateNode),wd(p)):q2(Gr,C.stateNode));break;case 4:D=Gr,V=is,Gr=C.stateNode.containerInfo,is=!0,Ya(p,v,C),Gr=D,is=V;break;case 0:case 11:case 14:case 15:un||Ri(2,C,v),un||Ri(4,C,v),Ya(p,v,C);break;case 1:un||(Sa(C,v),D=C.stateNode,typeof D.componentWillUnmount=="function"&&K1(C,v,D)),Ya(p,v,C);break;case 21:Ya(p,v,C);break;case 22:un=(D=un)||C.memoizedState!==null,Ya(p,v,C),un=D;break;default:Ya(p,v,C)}}function e2(p,v){if(v.memoizedState===null&&(p=v.alternate,p!==null&&(p=p.memoizedState,p!==null&&(p=p.dehydrated,p!==null))))try{wd(p)}catch(C){qr(v,v.return,C)}}function C7(p){switch(p.tag){case 13:case 19:var v=p.stateNode;return v===null&&(v=p.stateNode=new X1),v;case 22:return p=p.stateNode,v=p._retryCache,v===null&&(v=p._retryCache=new X1),v;default:throw Error(s(435,p.tag))}}function A0(p,v){var C=C7(p);v.forEach(function(D){var V=D7.bind(null,p,D);C.has(D)||(C.add(D),D.then(V,V))})}function ws(p,v){var C=v.deletions;if(C!==null)for(var D=0;D<C.length;D++){var V=C[D],X=p,ne=v,de=ne;e:for(;de!==null;){switch(de.tag){case 27:if(Fi(de.type)){Gr=de.stateNode,is=!1;break e}break;case 5:Gr=de.stateNode,is=!1;break e;case 3:case 4:Gr=de.stateNode.containerInfo,is=!0;break e}de=de.return}if(Gr===null)throw Error(s(160));J1(X,ne,V),Gr=null,is=!1,X=V.alternate,X!==null&&(X.return=null),V.return=null}if(v.subtreeFlags&13878)for(v=v.child;v!==null;)t2(v,p),v=v.sibling}var sa=null;function t2(p,v){var C=p.alternate,D=p.flags;switch(p.tag){case 0:case 11:case 14:case 15:ws(v,p),_s(p),D&4&&(Ri(3,p,p.return),nd(3,p),Ri(5,p,p.return));break;case 1:ws(v,p),_s(p),D&512&&(un||C===null||Sa(C,C.return)),D&64&&Xa&&(p=p.updateQueue,p!==null&&(D=p.callbacks,D!==null&&(C=p.shared.hiddenCallbacks,p.shared.hiddenCallbacks=C===null?D:C.concat(D))));break;case 26:var V=sa;if(ws(v,p),_s(p),D&512&&(un||C===null||Sa(C,C.return)),D&4){var X=C!==null?C.memoizedState:null;if(D=p.memoizedState,C===null)if(D===null)if(p.stateNode===null){e:{D=p.type,C=p.memoizedProps,V=V.ownerDocument||V;t:switch(D){case"title":X=V.getElementsByTagName("title")[0],(!X||X[me]||X[qe]||X.namespaceURI==="http://www.w3.org/2000/svg"||X.hasAttribute("itemprop"))&&(X=V.createElement(D),V.head.insertBefore(X,V.querySelector("head > title"))),zn(X,D,C),X[qe]=p,mt(X),D=X;break e;case"link":var ne=G2("link","href",V).get(D+(C.href||""));if(ne){for(var de=0;de<ne.length;de++)if(X=ne[de],X.getAttribute("href")===(C.href==null||C.href===""?null:C.href)&&X.getAttribute("rel")===(C.rel==null?null:C.rel)&&X.getAttribute("title")===(C.title==null?null:C.title)&&X.getAttribute("crossorigin")===(C.crossOrigin==null?null:C.crossOrigin)){ne.splice(de,1);break t}}X=V.createElement(D),zn(X,D,C),V.head.appendChild(X);break;case"meta":if(ne=G2("meta","content",V).get(D+(C.content||""))){for(de=0;de<ne.length;de++)if(X=ne[de],X.getAttribute("content")===(C.content==null?null:""+C.content)&&X.getAttribute("name")===(C.name==null?null:C.name)&&X.getAttribute("property")===(C.property==null?null:C.property)&&X.getAttribute("http-equiv")===(C.httpEquiv==null?null:C.httpEquiv)&&X.getAttribute("charset")===(C.charSet==null?null:C.charSet)){ne.splice(de,1);break t}}X=V.createElement(D),zn(X,D,C),V.head.appendChild(X);break;default:throw Error(s(468,D))}X[qe]=p,mt(X),D=X}p.stateNode=D}else X2(V,p.type,p.stateNode);else p.stateNode=Q2(V,D,p.memoizedProps);else X!==D?(X===null?C.stateNode!==null&&(C=C.stateNode,C.parentNode.removeChild(C)):X.count--,D===null?X2(V,p.type,p.stateNode):Q2(V,D,p.memoizedProps)):D===null&&p.stateNode!==null&&k0(p,p.memoizedProps,C.memoizedProps)}break;case 27:ws(v,p),_s(p),D&512&&(un||C===null||Sa(C,C.return)),C!==null&&D&4&&k0(p,p.memoizedProps,C.memoizedProps);break;case 5:if(ws(v,p),_s(p),D&512&&(un||C===null||Sa(C,C.return)),p.flags&32){V=p.stateNode;try{It(V,"")}catch($e){qr(p,p.return,$e)}}D&4&&p.stateNode!=null&&(V=p.memoizedProps,k0(p,V,C!==null?C.memoizedProps:V)),D&1024&&(T0=!0);break;case 6:if(ws(v,p),_s(p),D&4){if(p.stateNode===null)throw Error(s(162));D=p.memoizedProps,C=p.stateNode;try{C.nodeValue=D}catch($e){qr(p,p.return,$e)}}break;case 3:if(Uf=null,V=sa,sa=qf(v.containerInfo),ws(v,p),sa=V,_s(p),D&4&&C!==null&&C.memoizedState.isDehydrated)try{wd(v.containerInfo)}catch($e){qr(p,p.return,$e)}T0&&(T0=!1,r2(p));break;case 4:D=sa,sa=qf(p.stateNode.containerInfo),ws(v,p),_s(p),sa=D;break;case 12:ws(v,p),_s(p);break;case 13:ws(v,p),_s(p),p.child.flags&8192&&p.memoizedState!==null!=(C!==null&&C.memoizedState!==null)&&(F0=re()),D&4&&(D=p.updateQueue,D!==null&&(p.updateQueue=null,A0(p,D)));break;case 22:V=p.memoizedState!==null;var ve=C!==null&&C.memoizedState!==null,Ie=Xa,Ye=un;if(Xa=Ie||V,un=Ye||ve,ws(v,p),un=Ye,Xa=Ie,_s(p),D&8192)e:for(v=p.stateNode,v._visibility=V?v._visibility&-2:v._visibility|1,V&&(C===null||ve||Xa||un||ko(p)),C=null,v=p;;){if(v.tag===5||v.tag===26){if(C===null){ve=C=v;try{if(X=ve.stateNode,V)ne=X.style,typeof ne.setProperty=="function"?ne.setProperty("display","none","important"):ne.display="none";else{de=ve.stateNode;var st=ve.memoizedProps.style,ze=st!=null&&st.hasOwnProperty("display")?st.display:null;de.style.display=ze==null||typeof ze=="boolean"?"":(""+ze).trim()}}catch($e){qr(ve,ve.return,$e)}}}else if(v.tag===6){if(C===null){ve=v;try{ve.stateNode.nodeValue=V?"":ve.memoizedProps}catch($e){qr(ve,ve.return,$e)}}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===p)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===p)break e;for(;v.sibling===null;){if(v.return===null||v.return===p)break e;C===v&&(C=null),v=v.return}C===v&&(C=null),v.sibling.return=v.return,v=v.sibling}D&4&&(D=p.updateQueue,D!==null&&(C=D.retryQueue,C!==null&&(D.retryQueue=null,A0(p,C))));break;case 19:ws(v,p),_s(p),D&4&&(D=p.updateQueue,D!==null&&(p.updateQueue=null,A0(p,D)));break;case 30:break;case 21:break;default:ws(v,p),_s(p)}}function _s(p){var v=p.flags;if(v&2){try{for(var C,D=p.return;D!==null;){if(Q1(D)){C=D;break}D=D.return}if(C==null)throw Error(s(160));switch(C.tag){case 27:var V=C.stateNode,X=E0(p);Ef(p,X,V);break;case 5:var ne=C.stateNode;C.flags&32&&(It(ne,""),C.flags&=-33);var de=E0(p);Ef(p,de,ne);break;case 3:case 4:var ve=C.stateNode.containerInfo,Ie=E0(p);R0(p,Ie,ve);break;default:throw Error(s(161))}}catch(Ye){qr(p,p.return,Ye)}p.flags&=-3}v&4096&&(p.flags&=-4097)}function r2(p){if(p.subtreeFlags&1024)for(p=p.child;p!==null;){var v=p;r2(v),v.tag===5&&v.flags&1024&&v.stateNode.reset(),p=p.sibling}}function Ti(p,v){if(v.subtreeFlags&8772)for(v=v.child;v!==null;)Y1(p,v.alternate,v),v=v.sibling}function ko(p){for(p=p.child;p!==null;){var v=p;switch(v.tag){case 0:case 11:case 14:case 15:Ri(4,v,v.return),ko(v);break;case 1:Sa(v,v.return);var C=v.stateNode;typeof C.componentWillUnmount=="function"&&K1(v,v.return,C),ko(v);break;case 27:hd(v.stateNode);case 26:case 5:Sa(v,v.return),ko(v);break;case 22:v.memoizedState===null&&ko(v);break;case 30:ko(v);break;default:ko(v)}p=p.sibling}}function Ai(p,v,C){for(C=C&&(v.subtreeFlags&8772)!==0,v=v.child;v!==null;){var D=v.alternate,V=p,X=v,ne=X.flags;switch(X.tag){case 0:case 11:case 15:Ai(V,X,C),nd(4,X);break;case 1:if(Ai(V,X,C),D=X,V=D.stateNode,typeof V.componentDidMount=="function")try{V.componentDidMount()}catch(Ie){qr(D,D.return,Ie)}if(D=X,V=D.updateQueue,V!==null){var de=D.stateNode;try{var ve=V.shared.hiddenCallbacks;if(ve!==null)for(V.shared.hiddenCallbacks=null,V=0;V<ve.length;V++)Av(ve[V],de)}catch(Ie){qr(D,D.return,Ie)}}C&&ne&64&&V1(X),sd(X,X.return);break;case 27:G1(X);case 26:case 5:Ai(V,X,C),C&&D===null&&ne&4&&W1(X),sd(X,X.return);break;case 12:Ai(V,X,C);break;case 13:Ai(V,X,C),C&&ne&4&&e2(V,X);break;case 22:X.memoizedState===null&&Ai(V,X,C),sd(X,X.return);break;case 30:break;default:Ai(V,X,C)}v=v.sibling}}function M0(p,v){var C=null;p!==null&&p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(C=p.memoizedState.cachePool.pool),p=null,v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(p=v.memoizedState.cachePool.pool),p!==C&&(p!=null&&p.refCount++,C!=null&&Uc(C))}function O0(p,v){p=null,v.alternate!==null&&(p=v.alternate.memoizedState.cache),v=v.memoizedState.cache,v!==p&&(v.refCount++,p!=null&&Uc(p))}function ka(p,v,C,D){if(v.subtreeFlags&10256)for(v=v.child;v!==null;)n2(p,v,C,D),v=v.sibling}function n2(p,v,C,D){var V=v.flags;switch(v.tag){case 0:case 11:case 15:ka(p,v,C,D),V&2048&&nd(9,v);break;case 1:ka(p,v,C,D);break;case 3:ka(p,v,C,D),V&2048&&(p=null,v.alternate!==null&&(p=v.alternate.memoizedState.cache),v=v.memoizedState.cache,v!==p&&(v.refCount++,p!=null&&Uc(p)));break;case 12:if(V&2048){ka(p,v,C,D),p=v.stateNode;try{var X=v.memoizedProps,ne=X.id,de=X.onPostCommit;typeof de=="function"&&de(ne,v.alternate===null?"mount":"update",p.passiveEffectDuration,-0)}catch(ve){qr(v,v.return,ve)}}else ka(p,v,C,D);break;case 13:ka(p,v,C,D);break;case 23:break;case 22:X=v.stateNode,ne=v.alternate,v.memoizedState!==null?X._visibility&2?ka(p,v,C,D):ad(p,v):X._visibility&2?ka(p,v,C,D):(X._visibility|=2,Cl(p,v,C,D,(v.subtreeFlags&10256)!==0)),V&2048&&M0(ne,v);break;case 24:ka(p,v,C,D),V&2048&&O0(v.alternate,v);break;default:ka(p,v,C,D)}}function Cl(p,v,C,D,V){for(V=V&&(v.subtreeFlags&10256)!==0,v=v.child;v!==null;){var X=p,ne=v,de=C,ve=D,Ie=ne.flags;switch(ne.tag){case 0:case 11:case 15:Cl(X,ne,de,ve,V),nd(8,ne);break;case 23:break;case 22:var Ye=ne.stateNode;ne.memoizedState!==null?Ye._visibility&2?Cl(X,ne,de,ve,V):ad(X,ne):(Ye._visibility|=2,Cl(X,ne,de,ve,V)),V&&Ie&2048&&M0(ne.alternate,ne);break;case 24:Cl(X,ne,de,ve,V),V&&Ie&2048&&O0(ne.alternate,ne);break;default:Cl(X,ne,de,ve,V)}v=v.sibling}}function ad(p,v){if(v.subtreeFlags&10256)for(v=v.child;v!==null;){var C=p,D=v,V=D.flags;switch(D.tag){case 22:ad(C,D),V&2048&&M0(D.alternate,D);break;case 24:ad(C,D),V&2048&&O0(D.alternate,D);break;default:ad(C,D)}v=v.sibling}}var id=8192;function Sl(p){if(p.subtreeFlags&id)for(p=p.child;p!==null;)s2(p),p=p.sibling}function s2(p){switch(p.tag){case 26:Sl(p),p.flags&id&&p.memoizedState!==null&&d9(sa,p.memoizedState,p.memoizedProps);break;case 5:Sl(p);break;case 3:case 4:var v=sa;sa=qf(p.stateNode.containerInfo),Sl(p),sa=v;break;case 22:p.memoizedState===null&&(v=p.alternate,v!==null&&v.memoizedState!==null?(v=id,id=16777216,Sl(p),id=v):Sl(p));break;default:Sl(p)}}function a2(p){var v=p.alternate;if(v!==null&&(p=v.child,p!==null)){v.child=null;do v=p.sibling,p.sibling=null,p=v;while(p!==null)}}function od(p){var v=p.deletions;if((p.flags&16)!==0){if(v!==null)for(var C=0;C<v.length;C++){var D=v[C];Rn=D,o2(D,p)}a2(p)}if(p.subtreeFlags&10256)for(p=p.child;p!==null;)i2(p),p=p.sibling}function i2(p){switch(p.tag){case 0:case 11:case 15:od(p),p.flags&2048&&Ri(9,p,p.return);break;case 3:od(p);break;case 12:od(p);break;case 22:var v=p.stateNode;p.memoizedState!==null&&v._visibility&2&&(p.return===null||p.return.tag!==13)?(v._visibility&=-3,Rf(p)):od(p);break;default:od(p)}}function Rf(p){var v=p.deletions;if((p.flags&16)!==0){if(v!==null)for(var C=0;C<v.length;C++){var D=v[C];Rn=D,o2(D,p)}a2(p)}for(p=p.child;p!==null;){switch(v=p,v.tag){case 0:case 11:case 15:Ri(8,v,v.return),Rf(v);break;case 22:C=v.stateNode,C._visibility&2&&(C._visibility&=-3,Rf(v));break;default:Rf(v)}p=p.sibling}}function o2(p,v){for(;Rn!==null;){var C=Rn;switch(C.tag){case 0:case 11:case 15:Ri(8,C,v);break;case 23:case 22:if(C.memoizedState!==null&&C.memoizedState.cachePool!==null){var D=C.memoizedState.cachePool.pool;D!=null&&D.refCount++}break;case 24:Uc(C.memoizedState.cache)}if(D=C.child,D!==null)D.return=C,Rn=D;else e:for(C=p;Rn!==null;){D=Rn;var V=D.sibling,X=D.return;if(Z1(D),D===C){Rn=null;break e}if(V!==null){V.return=X,Rn=V;break e}Rn=X}}}var S7={getCacheForType:function(p){var v=$n(vn),C=v.data.get(p);return C===void 0&&(C=p(),v.data.set(p,C)),C}},k7=typeof WeakMap=="function"?WeakMap:Map,Mr=0,Ur=null,wr=null,kr=0,Or=0,js=null,Mi=!1,kl=!1,D0=!1,Za=0,nn=0,Oi=0,Eo=0,P0=0,Us=0,El=0,ld=null,os=null,I0=!1,F0=0,Tf=1/0,Af=null,Di=null,Ln=0,Pi=null,Rl=null,Tl=0,L0=0,z0=null,l2=null,cd=0,B0=null;function Ns(){if((Mr&2)!==0&&kr!==0)return kr&-kr;if(N.T!==null){var p=bl;return p!==0?p:W0()}return be()}function c2(){Us===0&&(Us=(kr&536870912)===0||Ar?sr():536870912);var p=$s.current;return p!==null&&(p.flags|=32),Us}function Cs(p,v,C){(p===Ur&&(Or===2||Or===9)||p.cancelPendingCommit!==null)&&(Al(p,0),Ii(p,kr,Us,!1)),kt(p,C),((Mr&2)===0||p!==Ur)&&(p===Ur&&((Mr&2)===0&&(Eo|=C),nn===4&&Ii(p,kr,Us,!1)),Ea(p))}function d2(p,v,C){if((Mr&6)!==0)throw Error(s(327));var D=!C&&(v&124)===0&&(v&p.expiredLanes)===0||pt(p,v),V=D?T7(p,v):U0(p,v,!0),X=D;do{if(V===0){kl&&!D&&Ii(p,v,0,!1);break}else{if(C=p.current.alternate,X&&!E7(C)){V=U0(p,v,!1),X=!1;continue}if(V===2){if(X=v,p.errorRecoveryDisabledLanes&X)var ne=0;else ne=p.pendingLanes&-536870913,ne=ne!==0?ne:ne&536870912?536870912:0;if(ne!==0){v=ne;e:{var de=p;V=ld;var ve=de.current.memoizedState.isDehydrated;if(ve&&(Al(de,ne).flags|=256),ne=U0(de,ne,!1),ne!==2){if(D0&&!ve){de.errorRecoveryDisabledLanes|=X,Eo|=X,V=4;break e}X=os,os=V,X!==null&&(os===null?os=X:os.push.apply(os,X))}V=ne}if(X=!1,V!==2)continue}}if(V===1){Al(p,0),Ii(p,v,0,!0);break}e:{switch(D=p,X=V,X){case 0:case 1:throw Error(s(345));case 4:if((v&4194048)!==v)break;case 6:Ii(D,v,Us,!Mi);break e;case 2:os=null;break;case 3:case 5:break;default:throw Error(s(329))}if((v&62914560)===v&&(V=F0+300-re(),10<V)){if(Ii(D,v,Us,!Mi),jt(D,0,!0)!==0)break e;D.timeoutHandle=z2(u2.bind(null,D,C,os,Af,I0,v,Us,Eo,El,Mi,X,2,-0,0),V);break e}u2(D,C,os,Af,I0,v,Us,Eo,El,Mi,X,0,-0,0)}}break}while(!0);Ea(p)}function u2(p,v,C,D,V,X,ne,de,ve,Ie,Ye,st,ze,$e){if(p.timeoutHandle=-1,st=v.subtreeFlags,(st&8192||(st&16785408)===16785408)&&(gd={stylesheets:null,count:0,unsuspend:c9},s2(v),st=u9(),st!==null)){p.cancelPendingCommit=st(y2.bind(null,p,v,X,C,D,V,ne,de,ve,Ye,1,ze,$e)),Ii(p,X,ne,!Ie);return}y2(p,v,X,C,D,V,ne,de,ve)}function E7(p){for(var v=p;;){var C=v.tag;if((C===0||C===11||C===15)&&v.flags&16384&&(C=v.updateQueue,C!==null&&(C=C.stores,C!==null)))for(var D=0;D<C.length;D++){var V=C[D],X=V.getSnapshot;V=V.value;try{if(!xs(X(),V))return!1}catch{return!1}}if(C=v.child,v.subtreeFlags&16384&&C!==null)C.return=v,v=C;else{if(v===p)break;for(;v.sibling===null;){if(v.return===null||v.return===p)return!0;v=v.return}v.sibling.return=v.return,v=v.sibling}}return!0}function Ii(p,v,C,D){v&=~P0,v&=~Eo,p.suspendedLanes|=v,p.pingedLanes&=~v,D&&(p.warmLanes|=v),D=p.expirationTimes;for(var V=v;0<V;){var X=31-Be(V),ne=1<<X;D[X]=-1,V&=~ne}C!==0&&$t(p,C,v)}function Mf(){return(Mr&6)===0?(dd(0),!1):!0}function q0(){if(wr!==null){if(Or===0)var p=wr.return;else p=wr,Ha=_o=null,s0(p),jl=null,ed=0,p=wr;for(;p!==null;)H1(p.alternate,p),p=p.return;wr=null}}function Al(p,v){var C=p.timeoutHandle;C!==-1&&(p.timeoutHandle=-1,K7(C)),C=p.cancelPendingCommit,C!==null&&(p.cancelPendingCommit=null,C()),q0(),Ur=p,wr=C=qa(p.current,null),kr=v,Or=0,js=null,Mi=!1,kl=pt(p,v),D0=!1,El=Us=P0=Eo=Oi=nn=0,os=ld=null,I0=!1,(v&8)!==0&&(v|=v&32);var D=p.entangledLanes;if(D!==0)for(p=p.entanglements,D&=v;0<D;){var V=31-Be(D),X=1<<V;v|=p[V],D&=~X}return Za=v,Ju(),C}function f2(p,v){pr=null,N.H=xf,v===Vc||v===cf?(v=Rv(),Or=3):v===Sv?(v=Rv(),Or=4):Or=v===T1?8:v!==null&&typeof v=="object"&&typeof v.then=="function"?6:1,js=v,wr===null&&(nn=1,Nf(p,Ls(v,p.current)))}function h2(){var p=N.H;return N.H=xf,p===null?xf:p}function m2(){var p=N.A;return N.A=S7,p}function $0(){nn=4,Mi||(kr&4194048)!==kr&&$s.current!==null||(kl=!0),(Oi&134217727)===0&&(Eo&134217727)===0||Ur===null||Ii(Ur,kr,Us,!1)}function U0(p,v,C){var D=Mr;Mr|=2;var V=h2(),X=m2();(Ur!==p||kr!==v)&&(Af=null,Al(p,v)),v=!1;var ne=nn;e:do try{if(Or!==0&&wr!==null){var de=wr,ve=js;switch(Or){case 8:q0(),ne=6;break e;case 3:case 2:case 9:case 6:$s.current===null&&(v=!0);var Ie=Or;if(Or=0,js=null,Ml(p,de,ve,Ie),C&&kl){ne=0;break e}break;default:Ie=Or,Or=0,js=null,Ml(p,de,ve,Ie)}}R7(),ne=nn;break}catch(Ye){f2(p,Ye)}while(!0);return v&&p.shellSuspendCounter++,Ha=_o=null,Mr=D,N.H=V,N.A=X,wr===null&&(Ur=null,kr=0,Ju()),ne}function R7(){for(;wr!==null;)p2(wr)}function T7(p,v){var C=Mr;Mr|=2;var D=h2(),V=m2();Ur!==p||kr!==v?(Af=null,Tf=re()+500,Al(p,v)):kl=pt(p,v);e:do try{if(Or!==0&&wr!==null){v=wr;var X=js;t:switch(Or){case 1:Or=0,js=null,Ml(p,v,X,1);break;case 2:case 9:if(kv(X)){Or=0,js=null,g2(v);break}v=function(){Or!==2&&Or!==9||Ur!==p||(Or=7),Ea(p)},X.then(v,v);break e;case 3:Or=7;break e;case 4:Or=5;break e;case 7:kv(X)?(Or=0,js=null,g2(v)):(Or=0,js=null,Ml(p,v,X,7));break;case 5:var ne=null;switch(wr.tag){case 26:ne=wr.memoizedState;case 5:case 27:var de=wr;if(!ne||Y2(ne)){Or=0,js=null;var ve=de.sibling;if(ve!==null)wr=ve;else{var Ie=de.return;Ie!==null?(wr=Ie,Of(Ie)):wr=null}break t}}Or=0,js=null,Ml(p,v,X,5);break;case 6:Or=0,js=null,Ml(p,v,X,6);break;case 8:q0(),nn=6;break e;default:throw Error(s(462))}}A7();break}catch(Ye){f2(p,Ye)}while(!0);return Ha=_o=null,N.H=D,N.A=V,Mr=C,wr!==null?0:(Ur=null,kr=0,Ju(),nn)}function A7(){for(;wr!==null&&!we();)p2(wr)}function p2(p){var v=$1(p.alternate,p,Za);p.memoizedProps=p.pendingProps,v===null?Of(p):wr=v}function g2(p){var v=p,C=v.alternate;switch(v.tag){case 15:case 0:v=I1(C,v,v.pendingProps,v.type,void 0,kr);break;case 11:v=I1(C,v,v.pendingProps,v.type.render,v.ref,kr);break;case 5:s0(v);default:H1(C,v),v=wr=bv(v,Za),v=$1(C,v,Za)}p.memoizedProps=p.pendingProps,v===null?Of(p):wr=v}function Ml(p,v,C,D){Ha=_o=null,s0(v),jl=null,ed=0;var V=v.return;try{if(v7(p,V,v,C,kr)){nn=1,Nf(p,Ls(C,p.current)),wr=null;return}}catch(X){if(V!==null)throw wr=V,X;nn=1,Nf(p,Ls(C,p.current)),wr=null;return}v.flags&32768?(Ar||D===1?p=!0:kl||(kr&536870912)!==0?p=!1:(Mi=p=!0,(D===2||D===9||D===3||D===6)&&(D=$s.current,D!==null&&D.tag===13&&(D.flags|=16384))),b2(v,p)):Of(v)}function Of(p){var v=p;do{if((v.flags&32768)!==0){b2(v,Mi);return}p=v.return;var C=_7(v.alternate,v,Za);if(C!==null){wr=C;return}if(v=v.sibling,v!==null){wr=v;return}wr=v=p}while(v!==null);nn===0&&(nn=5)}function b2(p,v){do{var C=j7(p.alternate,p);if(C!==null){C.flags&=32767,wr=C;return}if(C=p.return,C!==null&&(C.flags|=32768,C.subtreeFlags=0,C.deletions=null),!v&&(p=p.sibling,p!==null)){wr=p;return}wr=p=C}while(p!==null);nn=6,wr=null}function y2(p,v,C,D,V,X,ne,de,ve){p.cancelPendingCommit=null;do Df();while(Ln!==0);if((Mr&6)!==0)throw Error(s(327));if(v!==null){if(v===p.current)throw Error(s(177));if(X=v.lanes|v.childLanes,X|=Op,Rt(p,C,X,ne,de,ve),p===Ur&&(wr=Ur=null,kr=0),Rl=v,Pi=p,Tl=C,L0=X,z0=V,l2=D,(v.subtreeFlags&10256)!==0||(v.flags&10256)!==0?(p.callbackNode=null,p.callbackPriority=0,P7(ie,function(){return j2(),null})):(p.callbackNode=null,p.callbackPriority=0),D=(v.flags&13878)!==0,(v.subtreeFlags&13878)!==0||D){D=N.T,N.T=null,V=k.p,k.p=2,ne=Mr,Mr|=4;try{N7(p,v,C)}finally{Mr=ne,k.p=V,N.T=D}}Ln=1,x2(),v2(),w2()}}function x2(){if(Ln===1){Ln=0;var p=Pi,v=Rl,C=(v.flags&13878)!==0;if((v.subtreeFlags&13878)!==0||C){C=N.T,N.T=null;var D=k.p;k.p=2;var V=Mr;Mr|=4;try{t2(v,p);var X=tg,ne=ov(p.containerInfo),de=X.focusedElem,ve=X.selectionRange;if(ne!==de&&de&&de.ownerDocument&&iv(de.ownerDocument.documentElement,de)){if(ve!==null&&Ep(de)){var Ie=ve.start,Ye=ve.end;if(Ye===void 0&&(Ye=Ie),"selectionStart"in de)de.selectionStart=Ie,de.selectionEnd=Math.min(Ye,de.value.length);else{var st=de.ownerDocument||document,ze=st&&st.defaultView||window;if(ze.getSelection){var $e=ze.getSelection(),er=de.textContent.length,Wt=Math.min(ve.start,er),Fr=ve.end===void 0?Wt:Math.min(ve.end,er);!$e.extend&&Wt>Fr&&(ne=Fr,Fr=Wt,Wt=ne);var Me=av(de,Wt),Re=av(de,Fr);if(Me&&Re&&($e.rangeCount!==1||$e.anchorNode!==Me.node||$e.anchorOffset!==Me.offset||$e.focusNode!==Re.node||$e.focusOffset!==Re.offset)){var Pe=st.createRange();Pe.setStart(Me.node,Me.offset),$e.removeAllRanges(),Wt>Fr?($e.addRange(Pe),$e.extend(Re.node,Re.offset)):(Pe.setEnd(Re.node,Re.offset),$e.addRange(Pe))}}}}for(st=[],$e=de;$e=$e.parentNode;)$e.nodeType===1&&st.push({element:$e,left:$e.scrollLeft,top:$e.scrollTop});for(typeof de.focus=="function"&&de.focus(),de=0;de<st.length;de++){var tt=st[de];tt.element.scrollLeft=tt.left,tt.element.scrollTop=tt.top}}Kf=!!eg,tg=eg=null}finally{Mr=V,k.p=D,N.T=C}}p.current=v,Ln=2}}function v2(){if(Ln===2){Ln=0;var p=Pi,v=Rl,C=(v.flags&8772)!==0;if((v.subtreeFlags&8772)!==0||C){C=N.T,N.T=null;var D=k.p;k.p=2;var V=Mr;Mr|=4;try{Y1(p,v.alternate,v)}finally{Mr=V,k.p=D,N.T=C}}Ln=3}}function w2(){if(Ln===4||Ln===3){Ln=0,fe();var p=Pi,v=Rl,C=Tl,D=l2;(v.subtreeFlags&10256)!==0||(v.flags&10256)!==0?Ln=5:(Ln=0,Rl=Pi=null,_2(p,p.pendingLanes));var V=p.pendingLanes;if(V===0&&(Di=null),Mt(C),v=v.stateNode,Ue&&typeof Ue.onCommitFiberRoot=="function")try{Ue.onCommitFiberRoot(Le,v,void 0,(v.current.flags&128)===128)}catch{}if(D!==null){v=N.T,V=k.p,k.p=2,N.T=null;try{for(var X=p.onRecoverableError,ne=0;ne<D.length;ne++){var de=D[ne];X(de.value,{componentStack:de.stack})}}finally{N.T=v,k.p=V}}(Tl&3)!==0&&Df(),Ea(p),V=p.pendingLanes,(C&4194090)!==0&&(V&42)!==0?p===B0?cd++:(cd=0,B0=p):cd=0,dd(0)}}function _2(p,v){(p.pooledCacheLanes&=v)===0&&(v=p.pooledCache,v!=null&&(p.pooledCache=null,Uc(v)))}function Df(p){return x2(),v2(),w2(),j2()}function j2(){if(Ln!==5)return!1;var p=Pi,v=L0;L0=0;var C=Mt(Tl),D=N.T,V=k.p;try{k.p=32>C?32:C,N.T=null,C=z0,z0=null;var X=Pi,ne=Tl;if(Ln=0,Rl=Pi=null,Tl=0,(Mr&6)!==0)throw Error(s(331));var de=Mr;if(Mr|=4,i2(X.current),n2(X,X.current,ne,C),Mr=de,dd(0,!1),Ue&&typeof Ue.onPostCommitFiberRoot=="function")try{Ue.onPostCommitFiberRoot(Le,X)}catch{}return!0}finally{k.p=V,N.T=D,_2(p,v)}}function N2(p,v,C){v=Ls(C,v),v=y0(p.stateNode,v,2),p=Ci(p,v,2),p!==null&&(kt(p,2),Ea(p))}function qr(p,v,C){if(p.tag===3)N2(p,p,C);else for(;v!==null;){if(v.tag===3){N2(v,p,C);break}else if(v.tag===1){var D=v.stateNode;if(typeof v.type.getDerivedStateFromError=="function"||typeof D.componentDidCatch=="function"&&(Di===null||!Di.has(D))){p=Ls(C,p),C=E1(2),D=Ci(v,C,2),D!==null&&(R1(C,D,v,p),kt(D,2),Ea(D));break}}v=v.return}}function H0(p,v,C){var D=p.pingCache;if(D===null){D=p.pingCache=new k7;var V=new Set;D.set(v,V)}else V=D.get(v),V===void 0&&(V=new Set,D.set(v,V));V.has(C)||(D0=!0,V.add(C),p=M7.bind(null,p,v,C),v.then(p,p))}function M7(p,v,C){var D=p.pingCache;D!==null&&D.delete(v),p.pingedLanes|=p.suspendedLanes&C,p.warmLanes&=~C,Ur===p&&(kr&C)===C&&(nn===4||nn===3&&(kr&62914560)===kr&&300>re()-F0?(Mr&2)===0&&Al(p,0):P0|=C,El===kr&&(El=0)),Ea(p)}function C2(p,v){v===0&&(v=Ot()),p=hl(p,v),p!==null&&(kt(p,v),Ea(p))}function O7(p){var v=p.memoizedState,C=0;v!==null&&(C=v.retryLane),C2(p,C)}function D7(p,v){var C=0;switch(p.tag){case 13:var D=p.stateNode,V=p.memoizedState;V!==null&&(C=V.retryLane);break;case 19:D=p.stateNode;break;case 22:D=p.stateNode._retryCache;break;default:throw Error(s(314))}D!==null&&D.delete(v),C2(p,C)}function P7(p,v){return ae(p,v)}var Pf=null,Ol=null,V0=!1,If=!1,K0=!1,Ro=0;function Ea(p){p!==Ol&&p.next===null&&(Ol===null?Pf=Ol=p:Ol=Ol.next=p),If=!0,V0||(V0=!0,F7())}function dd(p,v){if(!K0&&If){K0=!0;do for(var C=!1,D=Pf;D!==null;){if(p!==0){var V=D.pendingLanes;if(V===0)var X=0;else{var ne=D.suspendedLanes,de=D.pingedLanes;X=(1<<31-Be(42|p)+1)-1,X&=V&~(ne&~de),X=X&201326741?X&201326741|1:X?X|2:0}X!==0&&(C=!0,R2(D,X))}else X=kr,X=jt(D,D===Ur?X:0,D.cancelPendingCommit!==null||D.timeoutHandle!==-1),(X&3)===0||pt(D,X)||(C=!0,R2(D,X));D=D.next}while(C);K0=!1}}function I7(){S2()}function S2(){If=V0=!1;var p=0;Ro!==0&&(V7()&&(p=Ro),Ro=0);for(var v=re(),C=null,D=Pf;D!==null;){var V=D.next,X=k2(D,v);X===0?(D.next=null,C===null?Pf=V:C.next=V,V===null&&(Ol=C)):(C=D,(p!==0||(X&3)!==0)&&(If=!0)),D=V}dd(p)}function k2(p,v){for(var C=p.suspendedLanes,D=p.pingedLanes,V=p.expirationTimes,X=p.pendingLanes&-62914561;0<X;){var ne=31-Be(X),de=1<<ne,ve=V[ne];ve===-1?((de&C)===0||(de&D)!==0)&&(V[ne]=Qt(de,v)):ve<=v&&(p.expiredLanes|=de),X&=~de}if(v=Ur,C=kr,C=jt(p,p===v?C:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),D=p.callbackNode,C===0||p===v&&(Or===2||Or===9)||p.cancelPendingCommit!==null)return D!==null&&D!==null&&ce(D),p.callbackNode=null,p.callbackPriority=0;if((C&3)===0||pt(p,C)){if(v=C&-C,v===p.callbackPriority)return v;switch(D!==null&&ce(D),Mt(C)){case 2:case 8:C=te;break;case 32:C=ie;break;case 268435456:C=_e;break;default:C=ie}return D=E2.bind(null,p),C=ae(C,D),p.callbackPriority=v,p.callbackNode=C,v}return D!==null&&D!==null&&ce(D),p.callbackPriority=2,p.callbackNode=null,2}function E2(p,v){if(Ln!==0&&Ln!==5)return p.callbackNode=null,p.callbackPriority=0,null;var C=p.callbackNode;if(Df()&&p.callbackNode!==C)return null;var D=kr;return D=jt(p,p===Ur?D:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),D===0?null:(d2(p,D,v),k2(p,re()),p.callbackNode!=null&&p.callbackNode===C?E2.bind(null,p):null)}function R2(p,v){if(Df())return null;d2(p,v,!0)}function F7(){W7(function(){(Mr&6)!==0?ae(le,I7):S2()})}function W0(){return Ro===0&&(Ro=sr()),Ro}function T2(p){return p==null||typeof p=="symbol"||typeof p=="boolean"?null:typeof p=="function"?p:cn(""+p)}function A2(p,v){var C=v.ownerDocument.createElement("input");return C.name=v.name,C.value=v.value,p.id&&C.setAttribute("form",p.id),v.parentNode.insertBefore(C,v),p=new FormData(p),C.parentNode.removeChild(C),p}function L7(p,v,C,D,V){if(v==="submit"&&C&&C.stateNode===V){var X=T2((V[Oe]||null).action),ne=D.submitter;ne&&(v=(v=ne[Oe]||null)?T2(v.formAction):ne.getAttribute("formAction"),v!==null&&(X=v,ne=null));var de=new Xu("action","action",null,D,V);p.push({event:de,listeners:[{instance:null,listener:function(){if(D.defaultPrevented){if(Ro!==0){var ve=ne?A2(V,ne):new FormData(V);h0(C,{pending:!0,data:ve,method:V.method,action:X},null,ve)}}else typeof X=="function"&&(de.preventDefault(),ve=ne?A2(V,ne):new FormData(V),h0(C,{pending:!0,data:ve,method:V.method,action:X},X,ve))},currentTarget:V}]})}}for(var Q0=0;Q0<Mp.length;Q0++){var G0=Mp[Q0],z7=G0.toLowerCase(),B7=G0[0].toUpperCase()+G0.slice(1);na(z7,"on"+B7)}na(dv,"onAnimationEnd"),na(uv,"onAnimationIteration"),na(fv,"onAnimationStart"),na("dblclick","onDoubleClick"),na("focusin","onFocus"),na("focusout","onBlur"),na(n7,"onTransitionRun"),na(s7,"onTransitionStart"),na(a7,"onTransitionCancel"),na(hv,"onTransitionEnd"),ar("onMouseEnter",["mouseout","mouseover"]),ar("onMouseLeave",["mouseout","mouseover"]),ar("onPointerEnter",["pointerout","pointerover"]),ar("onPointerLeave",["pointerout","pointerover"]),jr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),jr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),jr("onBeforeInput",["compositionend","keypress","textInput","paste"]),jr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),jr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),jr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ud="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),q7=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ud));function M2(p,v){v=(v&4)!==0;for(var C=0;C<p.length;C++){var D=p[C],V=D.event;D=D.listeners;e:{var X=void 0;if(v)for(var ne=D.length-1;0<=ne;ne--){var de=D[ne],ve=de.instance,Ie=de.currentTarget;if(de=de.listener,ve!==X&&V.isPropagationStopped())break e;X=de,V.currentTarget=Ie;try{X(V)}catch(Ye){jf(Ye)}V.currentTarget=null,X=ve}else for(ne=0;ne<D.length;ne++){if(de=D[ne],ve=de.instance,Ie=de.currentTarget,de=de.listener,ve!==X&&V.isPropagationStopped())break e;X=de,V.currentTarget=Ie;try{X(V)}catch(Ye){jf(Ye)}V.currentTarget=null,X=ve}}}}function _r(p,v){var C=v[ye];C===void 0&&(C=v[ye]=new Set);var D=p+"__bubble";C.has(D)||(O2(v,p,2,!1),C.add(D))}function X0(p,v,C){var D=0;v&&(D|=4),O2(C,p,D,v)}var Ff="_reactListening"+Math.random().toString(36).slice(2);function Y0(p){if(!p[Ff]){p[Ff]=!0,Ut.forEach(function(C){C!=="selectionchange"&&(q7.has(C)||X0(C,!1,p),X0(C,!0,p))});var v=p.nodeType===9?p:p.ownerDocument;v===null||v[Ff]||(v[Ff]=!0,X0("selectionchange",!1,v))}}function O2(p,v,C,D){switch(nw(v)){case 2:var V=m9;break;case 8:V=p9;break;default:V=ug}C=V.bind(null,v,C,p),V=void 0,!xp||v!=="touchstart"&&v!=="touchmove"&&v!=="wheel"||(V=!0),D?V!==void 0?p.addEventListener(v,C,{capture:!0,passive:V}):p.addEventListener(v,C,!0):V!==void 0?p.addEventListener(v,C,{passive:V}):p.addEventListener(v,C,!1)}function Z0(p,v,C,D,V){var X=D;if((v&1)===0&&(v&2)===0&&D!==null)e:for(;;){if(D===null)return;var ne=D.tag;if(ne===3||ne===4){var de=D.stateNode.containerInfo;if(de===V)break;if(ne===4)for(ne=D.return;ne!==null;){var ve=ne.tag;if((ve===3||ve===4)&&ne.stateNode.containerInfo===V)return;ne=ne.return}for(;de!==null;){if(ne=at(de),ne===null)return;if(ve=ne.tag,ve===5||ve===6||ve===26||ve===27){D=X=ne;continue e}de=de.parentNode}}D=D.return}ho(function(){var Ie=X,Ye=gn(C),st=[];e:{var ze=mv.get(p);if(ze!==void 0){var $e=Xu,er=p;switch(p){case"keypress":if(Qu(C)===0)break e;case"keydown":case"keyup":$e=Pk;break;case"focusin":er="focus",$e=jp;break;case"focusout":er="blur",$e=jp;break;case"beforeblur":case"afterblur":$e=jp;break;case"click":if(C.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$e=Ux;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$e=jk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$e=Lk;break;case dv:case uv:case fv:$e=Sk;break;case hv:$e=Bk;break;case"scroll":case"scrollend":$e=wk;break;case"wheel":$e=$k;break;case"copy":case"cut":case"paste":$e=Ek;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$e=Vx;break;case"toggle":case"beforetoggle":$e=Hk}var Wt=(v&4)!==0,Fr=!Wt&&(p==="scroll"||p==="scrollend"),Me=Wt?ze!==null?ze+"Capture":null:ze;Wt=[];for(var Re=Ie,Pe;Re!==null;){var tt=Re;if(Pe=tt.stateNode,tt=tt.tag,tt!==5&&tt!==26&&tt!==27||Pe===null||Me===null||(tt=Tc(Re,Me),tt!=null&&Wt.push(fd(Re,tt,Pe))),Fr)break;Re=Re.return}0<Wt.length&&(ze=new $e(ze,er,null,C,Ye),st.push({event:ze,listeners:Wt}))}}if((v&7)===0){e:{if(ze=p==="mouseover"||p==="pointerover",$e=p==="mouseout"||p==="pointerout",ze&&C!==Xr&&(er=C.relatedTarget||C.fromElement)&&(at(er)||er[he]))break e;if(($e||ze)&&(ze=Ye.window===Ye?Ye:(ze=Ye.ownerDocument)?ze.defaultView||ze.parentWindow:window,$e?(er=C.relatedTarget||C.toElement,$e=Ie,er=er?at(er):null,er!==null&&(Fr=i(er),Wt=er.tag,er!==Fr||Wt!==5&&Wt!==27&&Wt!==6)&&(er=null)):($e=null,er=Ie),$e!==er)){if(Wt=Ux,tt="onMouseLeave",Me="onMouseEnter",Re="mouse",(p==="pointerout"||p==="pointerover")&&(Wt=Vx,tt="onPointerLeave",Me="onPointerEnter",Re="pointer"),Fr=$e==null?ze:Ce($e),Pe=er==null?ze:Ce(er),ze=new Wt(tt,Re+"leave",$e,C,Ye),ze.target=Fr,ze.relatedTarget=Pe,tt=null,at(Ye)===Ie&&(Wt=new Wt(Me,Re+"enter",er,C,Ye),Wt.target=Pe,Wt.relatedTarget=Fr,tt=Wt),Fr=tt,$e&&er)t:{for(Wt=$e,Me=er,Re=0,Pe=Wt;Pe;Pe=Dl(Pe))Re++;for(Pe=0,tt=Me;tt;tt=Dl(tt))Pe++;for(;0<Re-Pe;)Wt=Dl(Wt),Re--;for(;0<Pe-Re;)Me=Dl(Me),Pe--;for(;Re--;){if(Wt===Me||Me!==null&&Wt===Me.alternate)break t;Wt=Dl(Wt),Me=Dl(Me)}Wt=null}else Wt=null;$e!==null&&D2(st,ze,$e,Wt,!1),er!==null&&Fr!==null&&D2(st,Fr,er,Wt,!0)}}e:{if(ze=Ie?Ce(Ie):window,$e=ze.nodeName&&ze.nodeName.toLowerCase(),$e==="select"||$e==="input"&&ze.type==="file")var Pt=Jx;else if(Yx(ze))if(ev)Pt=e7;else{Pt=Zk;var br=Yk}else $e=ze.nodeName,!$e||$e.toLowerCase()!=="input"||ze.type!=="checkbox"&&ze.type!=="radio"?Ie&&Sr(Ie.elementType)&&(Pt=Jx):Pt=Jk;if(Pt&&(Pt=Pt(p,Ie))){Zx(st,Pt,C,Ye);break e}br&&br(p,ze,Ie),p==="focusout"&&Ie&&ze.type==="number"&&Ie.memoizedProps.value!=null&&Ke(ze,"number",ze.value)}switch(br=Ie?Ce(Ie):window,p){case"focusin":(Yx(br)||br.contentEditable==="true")&&(dl=br,Rp=Ie,Lc=null);break;case"focusout":Lc=Rp=dl=null;break;case"mousedown":Tp=!0;break;case"contextmenu":case"mouseup":case"dragend":Tp=!1,lv(st,C,Ye);break;case"selectionchange":if(r7)break;case"keydown":case"keyup":lv(st,C,Ye)}var Bt;if(Cp)e:{switch(p){case"compositionstart":var Gt="onCompositionStart";break e;case"compositionend":Gt="onCompositionEnd";break e;case"compositionupdate":Gt="onCompositionUpdate";break e}Gt=void 0}else cl?Gx(p,C)&&(Gt="onCompositionEnd"):p==="keydown"&&C.keyCode===229&&(Gt="onCompositionStart");Gt&&(Kx&&C.locale!=="ko"&&(cl||Gt!=="onCompositionStart"?Gt==="onCompositionEnd"&&cl&&(Bt=qx()):(wi=Ye,vp="value"in wi?wi.value:wi.textContent,cl=!0)),br=Lf(Ie,Gt),0<br.length&&(Gt=new Hx(Gt,p,null,C,Ye),st.push({event:Gt,listeners:br}),Bt?Gt.data=Bt:(Bt=Xx(C),Bt!==null&&(Gt.data=Bt)))),(Bt=Kk?Wk(p,C):Qk(p,C))&&(Gt=Lf(Ie,"onBeforeInput"),0<Gt.length&&(br=new Hx("onBeforeInput","beforeinput",null,C,Ye),st.push({event:br,listeners:Gt}),br.data=Bt)),L7(st,p,Ie,C,Ye)}M2(st,v)})}function fd(p,v,C){return{instance:p,listener:v,currentTarget:C}}function Lf(p,v){for(var C=v+"Capture",D=[];p!==null;){var V=p,X=V.stateNode;if(V=V.tag,V!==5&&V!==26&&V!==27||X===null||(V=Tc(p,C),V!=null&&D.unshift(fd(p,V,X)),V=Tc(p,v),V!=null&&D.push(fd(p,V,X))),p.tag===3)return D;p=p.return}return[]}function Dl(p){if(p===null)return null;do p=p.return;while(p&&p.tag!==5&&p.tag!==27);return p||null}function D2(p,v,C,D,V){for(var X=v._reactName,ne=[];C!==null&&C!==D;){var de=C,ve=de.alternate,Ie=de.stateNode;if(de=de.tag,ve!==null&&ve===D)break;de!==5&&de!==26&&de!==27||Ie===null||(ve=Ie,V?(Ie=Tc(C,X),Ie!=null&&ne.unshift(fd(C,Ie,ve))):V||(Ie=Tc(C,X),Ie!=null&&ne.push(fd(C,Ie,ve)))),C=C.return}ne.length!==0&&p.push({event:v,listeners:ne})}var $7=/\r\n?/g,U7=/\u0000|\uFFFD/g;function P2(p){return(typeof p=="string"?p:""+p).replace($7,`
`).replace(U7,"")}function I2(p,v){return v=P2(v),P2(p)===v}function zf(){}function Ir(p,v,C,D,V,X){switch(C){case"children":typeof D=="string"?v==="body"||v==="textarea"&&D===""||It(p,D):(typeof D=="number"||typeof D=="bigint")&&v!=="body"&&It(p,""+D);break;case"className":Ct(p,"class",D);break;case"tabIndex":Ct(p,"tabindex",D);break;case"dir":case"role":case"viewBox":case"width":case"height":Ct(p,C,D);break;case"style":Nr(p,D,X);break;case"data":if(v!=="object"){Ct(p,"data",D);break}case"src":case"href":if(D===""&&(v!=="a"||C!=="href")){p.removeAttribute(C);break}if(D==null||typeof D=="function"||typeof D=="symbol"||typeof D=="boolean"){p.removeAttribute(C);break}D=cn(""+D),p.setAttribute(C,D);break;case"action":case"formAction":if(typeof D=="function"){p.setAttribute(C,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof X=="function"&&(C==="formAction"?(v!=="input"&&Ir(p,v,"name",V.name,V,null),Ir(p,v,"formEncType",V.formEncType,V,null),Ir(p,v,"formMethod",V.formMethod,V,null),Ir(p,v,"formTarget",V.formTarget,V,null)):(Ir(p,v,"encType",V.encType,V,null),Ir(p,v,"method",V.method,V,null),Ir(p,v,"target",V.target,V,null)));if(D==null||typeof D=="symbol"||typeof D=="boolean"){p.removeAttribute(C);break}D=cn(""+D),p.setAttribute(C,D);break;case"onClick":D!=null&&(p.onclick=zf);break;case"onScroll":D!=null&&_r("scroll",p);break;case"onScrollEnd":D!=null&&_r("scrollend",p);break;case"dangerouslySetInnerHTML":if(D!=null){if(typeof D!="object"||!("__html"in D))throw Error(s(61));if(C=D.__html,C!=null){if(V.children!=null)throw Error(s(60));p.innerHTML=C}}break;case"multiple":p.multiple=D&&typeof D!="function"&&typeof D!="symbol";break;case"muted":p.muted=D&&typeof D!="function"&&typeof D!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(D==null||typeof D=="function"||typeof D=="boolean"||typeof D=="symbol"){p.removeAttribute("xlink:href");break}C=cn(""+D),p.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",C);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":D!=null&&typeof D!="function"&&typeof D!="symbol"?p.setAttribute(C,""+D):p.removeAttribute(C);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":D&&typeof D!="function"&&typeof D!="symbol"?p.setAttribute(C,""):p.removeAttribute(C);break;case"capture":case"download":D===!0?p.setAttribute(C,""):D!==!1&&D!=null&&typeof D!="function"&&typeof D!="symbol"?p.setAttribute(C,D):p.removeAttribute(C);break;case"cols":case"rows":case"size":case"span":D!=null&&typeof D!="function"&&typeof D!="symbol"&&!isNaN(D)&&1<=D?p.setAttribute(C,D):p.removeAttribute(C);break;case"rowSpan":case"start":D==null||typeof D=="function"||typeof D=="symbol"||isNaN(D)?p.removeAttribute(C):p.setAttribute(C,D);break;case"popover":_r("beforetoggle",p),_r("toggle",p),Je(p,"popover",D);break;case"xlinkActuate":We(p,"http://www.w3.org/1999/xlink","xlink:actuate",D);break;case"xlinkArcrole":We(p,"http://www.w3.org/1999/xlink","xlink:arcrole",D);break;case"xlinkRole":We(p,"http://www.w3.org/1999/xlink","xlink:role",D);break;case"xlinkShow":We(p,"http://www.w3.org/1999/xlink","xlink:show",D);break;case"xlinkTitle":We(p,"http://www.w3.org/1999/xlink","xlink:title",D);break;case"xlinkType":We(p,"http://www.w3.org/1999/xlink","xlink:type",D);break;case"xmlBase":We(p,"http://www.w3.org/XML/1998/namespace","xml:base",D);break;case"xmlLang":We(p,"http://www.w3.org/XML/1998/namespace","xml:lang",D);break;case"xmlSpace":We(p,"http://www.w3.org/XML/1998/namespace","xml:space",D);break;case"is":Je(p,"is",D);break;case"innerText":case"textContent":break;default:(!(2<C.length)||C[0]!=="o"&&C[0]!=="O"||C[1]!=="n"&&C[1]!=="N")&&(C=tn.get(C)||C,Je(p,C,D))}}function J0(p,v,C,D,V,X){switch(C){case"style":Nr(p,D,X);break;case"dangerouslySetInnerHTML":if(D!=null){if(typeof D!="object"||!("__html"in D))throw Error(s(61));if(C=D.__html,C!=null){if(V.children!=null)throw Error(s(60));p.innerHTML=C}}break;case"children":typeof D=="string"?It(p,D):(typeof D=="number"||typeof D=="bigint")&&It(p,""+D);break;case"onScroll":D!=null&&_r("scroll",p);break;case"onScrollEnd":D!=null&&_r("scrollend",p);break;case"onClick":D!=null&&(p.onclick=zf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!dr.hasOwnProperty(C))e:{if(C[0]==="o"&&C[1]==="n"&&(V=C.endsWith("Capture"),v=C.slice(2,V?C.length-7:void 0),X=p[Oe]||null,X=X!=null?X[C]:null,typeof X=="function"&&p.removeEventListener(v,X,V),typeof D=="function")){typeof X!="function"&&X!==null&&(C in p?p[C]=null:p.hasAttribute(C)&&p.removeAttribute(C)),p.addEventListener(v,D,V);break e}C in p?p[C]=D:D===!0?p.setAttribute(C,""):Je(p,C,D)}}}function zn(p,v,C){switch(v){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_r("error",p),_r("load",p);var D=!1,V=!1,X;for(X in C)if(C.hasOwnProperty(X)){var ne=C[X];if(ne!=null)switch(X){case"src":D=!0;break;case"srcSet":V=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,v));default:Ir(p,v,X,ne,C,null)}}V&&Ir(p,v,"srcSet",C.srcSet,C,null),D&&Ir(p,v,"src",C.src,C,null);return;case"input":_r("invalid",p);var de=X=ne=V=null,ve=null,Ie=null;for(D in C)if(C.hasOwnProperty(D)){var Ye=C[D];if(Ye!=null)switch(D){case"name":V=Ye;break;case"type":ne=Ye;break;case"checked":ve=Ye;break;case"defaultChecked":Ie=Ye;break;case"value":X=Ye;break;case"defaultValue":de=Ye;break;case"children":case"dangerouslySetInnerHTML":if(Ye!=null)throw Error(s(137,v));break;default:Ir(p,v,D,Ye,C,null)}}rt(p,X,de,ve,Ie,ne,V,!1),en(p);return;case"select":_r("invalid",p),D=ne=X=null;for(V in C)if(C.hasOwnProperty(V)&&(de=C[V],de!=null))switch(V){case"value":X=de;break;case"defaultValue":ne=de;break;case"multiple":D=de;default:Ir(p,v,V,de,C,null)}v=X,C=ne,p.multiple=!!D,v!=null?Dt(p,!!D,v,!1):C!=null&&Dt(p,!!D,C,!0);return;case"textarea":_r("invalid",p),X=V=D=null;for(ne in C)if(C.hasOwnProperty(ne)&&(de=C[ne],de!=null))switch(ne){case"value":D=de;break;case"defaultValue":V=de;break;case"children":X=de;break;case"dangerouslySetInnerHTML":if(de!=null)throw Error(s(91));break;default:Ir(p,v,ne,de,C,null)}bt(p,D,V,X),en(p);return;case"option":for(ve in C)if(C.hasOwnProperty(ve)&&(D=C[ve],D!=null))switch(ve){case"selected":p.selected=D&&typeof D!="function"&&typeof D!="symbol";break;default:Ir(p,v,ve,D,C,null)}return;case"dialog":_r("beforetoggle",p),_r("toggle",p),_r("cancel",p),_r("close",p);break;case"iframe":case"object":_r("load",p);break;case"video":case"audio":for(D=0;D<ud.length;D++)_r(ud[D],p);break;case"image":_r("error",p),_r("load",p);break;case"details":_r("toggle",p);break;case"embed":case"source":case"link":_r("error",p),_r("load",p);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ie in C)if(C.hasOwnProperty(Ie)&&(D=C[Ie],D!=null))switch(Ie){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,v));default:Ir(p,v,Ie,D,C,null)}return;default:if(Sr(v)){for(Ye in C)C.hasOwnProperty(Ye)&&(D=C[Ye],D!==void 0&&J0(p,v,Ye,D,C,void 0));return}}for(de in C)C.hasOwnProperty(de)&&(D=C[de],D!=null&&Ir(p,v,de,D,C,null))}function H7(p,v,C,D){switch(v){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var V=null,X=null,ne=null,de=null,ve=null,Ie=null,Ye=null;for($e in C){var st=C[$e];if(C.hasOwnProperty($e)&&st!=null)switch($e){case"checked":break;case"value":break;case"defaultValue":ve=st;default:D.hasOwnProperty($e)||Ir(p,v,$e,null,D,st)}}for(var ze in D){var $e=D[ze];if(st=C[ze],D.hasOwnProperty(ze)&&($e!=null||st!=null))switch(ze){case"type":X=$e;break;case"name":V=$e;break;case"checked":Ie=$e;break;case"defaultChecked":Ye=$e;break;case"value":ne=$e;break;case"defaultValue":de=$e;break;case"children":case"dangerouslySetInnerHTML":if($e!=null)throw Error(s(137,v));break;default:$e!==st&&Ir(p,v,ze,$e,D,st)}}dt(p,ne,de,ve,Ie,Ye,X,V);return;case"select":$e=ne=de=ze=null;for(X in C)if(ve=C[X],C.hasOwnProperty(X)&&ve!=null)switch(X){case"value":break;case"multiple":$e=ve;default:D.hasOwnProperty(X)||Ir(p,v,X,null,D,ve)}for(V in D)if(X=D[V],ve=C[V],D.hasOwnProperty(V)&&(X!=null||ve!=null))switch(V){case"value":ze=X;break;case"defaultValue":de=X;break;case"multiple":ne=X;default:X!==ve&&Ir(p,v,V,X,D,ve)}v=de,C=ne,D=$e,ze!=null?Dt(p,!!C,ze,!1):!!D!=!!C&&(v!=null?Dt(p,!!C,v,!0):Dt(p,!!C,C?[]:"",!1));return;case"textarea":$e=ze=null;for(de in C)if(V=C[de],C.hasOwnProperty(de)&&V!=null&&!D.hasOwnProperty(de))switch(de){case"value":break;case"children":break;default:Ir(p,v,de,null,D,V)}for(ne in D)if(V=D[ne],X=C[ne],D.hasOwnProperty(ne)&&(V!=null||X!=null))switch(ne){case"value":ze=V;break;case"defaultValue":$e=V;break;case"children":break;case"dangerouslySetInnerHTML":if(V!=null)throw Error(s(91));break;default:V!==X&&Ir(p,v,ne,V,D,X)}nr(p,ze,$e);return;case"option":for(var er in C)if(ze=C[er],C.hasOwnProperty(er)&&ze!=null&&!D.hasOwnProperty(er))switch(er){case"selected":p.selected=!1;break;default:Ir(p,v,er,null,D,ze)}for(ve in D)if(ze=D[ve],$e=C[ve],D.hasOwnProperty(ve)&&ze!==$e&&(ze!=null||$e!=null))switch(ve){case"selected":p.selected=ze&&typeof ze!="function"&&typeof ze!="symbol";break;default:Ir(p,v,ve,ze,D,$e)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Wt in C)ze=C[Wt],C.hasOwnProperty(Wt)&&ze!=null&&!D.hasOwnProperty(Wt)&&Ir(p,v,Wt,null,D,ze);for(Ie in D)if(ze=D[Ie],$e=C[Ie],D.hasOwnProperty(Ie)&&ze!==$e&&(ze!=null||$e!=null))switch(Ie){case"children":case"dangerouslySetInnerHTML":if(ze!=null)throw Error(s(137,v));break;default:Ir(p,v,Ie,ze,D,$e)}return;default:if(Sr(v)){for(var Fr in C)ze=C[Fr],C.hasOwnProperty(Fr)&&ze!==void 0&&!D.hasOwnProperty(Fr)&&J0(p,v,Fr,void 0,D,ze);for(Ye in D)ze=D[Ye],$e=C[Ye],!D.hasOwnProperty(Ye)||ze===$e||ze===void 0&&$e===void 0||J0(p,v,Ye,ze,D,$e);return}}for(var Me in C)ze=C[Me],C.hasOwnProperty(Me)&&ze!=null&&!D.hasOwnProperty(Me)&&Ir(p,v,Me,null,D,ze);for(st in D)ze=D[st],$e=C[st],!D.hasOwnProperty(st)||ze===$e||ze==null&&$e==null||Ir(p,v,st,ze,D,$e)}var eg=null,tg=null;function Bf(p){return p.nodeType===9?p:p.ownerDocument}function F2(p){switch(p){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function L2(p,v){if(p===0)switch(v){case"svg":return 1;case"math":return 2;default:return 0}return p===1&&v==="foreignObject"?0:p}function rg(p,v){return p==="textarea"||p==="noscript"||typeof v.children=="string"||typeof v.children=="number"||typeof v.children=="bigint"||typeof v.dangerouslySetInnerHTML=="object"&&v.dangerouslySetInnerHTML!==null&&v.dangerouslySetInnerHTML.__html!=null}var ng=null;function V7(){var p=window.event;return p&&p.type==="popstate"?p===ng?!1:(ng=p,!0):(ng=null,!1)}var z2=typeof setTimeout=="function"?setTimeout:void 0,K7=typeof clearTimeout=="function"?clearTimeout:void 0,B2=typeof Promise=="function"?Promise:void 0,W7=typeof queueMicrotask=="function"?queueMicrotask:typeof B2<"u"?function(p){return B2.resolve(null).then(p).catch(Q7)}:z2;function Q7(p){setTimeout(function(){throw p})}function Fi(p){return p==="head"}function q2(p,v){var C=v,D=0,V=0;do{var X=C.nextSibling;if(p.removeChild(C),X&&X.nodeType===8)if(C=X.data,C==="/$"){if(0<D&&8>D){C=D;var ne=p.ownerDocument;if(C&1&&hd(ne.documentElement),C&2&&hd(ne.body),C&4)for(C=ne.head,hd(C),ne=C.firstChild;ne;){var de=ne.nextSibling,ve=ne.nodeName;ne[me]||ve==="SCRIPT"||ve==="STYLE"||ve==="LINK"&&ne.rel.toLowerCase()==="stylesheet"||C.removeChild(ne),ne=de}}if(V===0){p.removeChild(X),wd(v);return}V--}else C==="$"||C==="$?"||C==="$!"?V++:D=C.charCodeAt(0)-48;else D=0;C=X}while(C);wd(v)}function sg(p){var v=p.firstChild;for(v&&v.nodeType===10&&(v=v.nextSibling);v;){var C=v;switch(v=v.nextSibling,C.nodeName){case"HTML":case"HEAD":case"BODY":sg(C),He(C);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(C.rel.toLowerCase()==="stylesheet")continue}p.removeChild(C)}}function G7(p,v,C,D){for(;p.nodeType===1;){var V=C;if(p.nodeName.toLowerCase()!==v.toLowerCase()){if(!D&&(p.nodeName!=="INPUT"||p.type!=="hidden"))break}else if(D){if(!p[me])switch(v){case"meta":if(!p.hasAttribute("itemprop"))break;return p;case"link":if(X=p.getAttribute("rel"),X==="stylesheet"&&p.hasAttribute("data-precedence"))break;if(X!==V.rel||p.getAttribute("href")!==(V.href==null||V.href===""?null:V.href)||p.getAttribute("crossorigin")!==(V.crossOrigin==null?null:V.crossOrigin)||p.getAttribute("title")!==(V.title==null?null:V.title))break;return p;case"style":if(p.hasAttribute("data-precedence"))break;return p;case"script":if(X=p.getAttribute("src"),(X!==(V.src==null?null:V.src)||p.getAttribute("type")!==(V.type==null?null:V.type)||p.getAttribute("crossorigin")!==(V.crossOrigin==null?null:V.crossOrigin))&&X&&p.hasAttribute("async")&&!p.hasAttribute("itemprop"))break;return p;default:return p}}else if(v==="input"&&p.type==="hidden"){var X=V.name==null?null:""+V.name;if(V.type==="hidden"&&p.getAttribute("name")===X)return p}else return p;if(p=aa(p.nextSibling),p===null)break}return null}function X7(p,v,C){if(v==="")return null;for(;p.nodeType!==3;)if((p.nodeType!==1||p.nodeName!=="INPUT"||p.type!=="hidden")&&!C||(p=aa(p.nextSibling),p===null))return null;return p}function ag(p){return p.data==="$!"||p.data==="$?"&&p.ownerDocument.readyState==="complete"}function Y7(p,v){var C=p.ownerDocument;if(p.data!=="$?"||C.readyState==="complete")v();else{var D=function(){v(),C.removeEventListener("DOMContentLoaded",D)};C.addEventListener("DOMContentLoaded",D),p._reactRetry=D}}function aa(p){for(;p!=null;p=p.nextSibling){var v=p.nodeType;if(v===1||v===3)break;if(v===8){if(v=p.data,v==="$"||v==="$!"||v==="$?"||v==="F!"||v==="F")break;if(v==="/$")return null}}return p}var ig=null;function $2(p){p=p.previousSibling;for(var v=0;p;){if(p.nodeType===8){var C=p.data;if(C==="$"||C==="$!"||C==="$?"){if(v===0)return p;v--}else C==="/$"&&v++}p=p.previousSibling}return null}function U2(p,v,C){switch(v=Bf(C),p){case"html":if(p=v.documentElement,!p)throw Error(s(452));return p;case"head":if(p=v.head,!p)throw Error(s(453));return p;case"body":if(p=v.body,!p)throw Error(s(454));return p;default:throw Error(s(451))}}function hd(p){for(var v=p.attributes;v.length;)p.removeAttributeNode(v[0]);He(p)}var Hs=new Map,H2=new Set;function qf(p){return typeof p.getRootNode=="function"?p.getRootNode():p.nodeType===9?p:p.ownerDocument}var Ja=k.d;k.d={f:Z7,r:J7,D:e9,C:t9,L:r9,m:n9,X:a9,S:s9,M:i9};function Z7(){var p=Ja.f(),v=Mf();return p||v}function J7(p){var v=Ze(p);v!==null&&v.tag===5&&v.type==="form"?d1(v):Ja.r(p)}var Pl=typeof document>"u"?null:document;function V2(p,v,C){var D=Pl;if(D&&typeof v=="string"&&v){var V=Se(v);V='link[rel="'+p+'"][href="'+V+'"]',typeof C=="string"&&(V+='[crossorigin="'+C+'"]'),H2.has(V)||(H2.add(V),p={rel:p,crossOrigin:C,href:v},D.querySelector(V)===null&&(v=D.createElement("link"),zn(v,"link",p),mt(v),D.head.appendChild(v)))}}function e9(p){Ja.D(p),V2("dns-prefetch",p,null)}function t9(p,v){Ja.C(p,v),V2("preconnect",p,v)}function r9(p,v,C){Ja.L(p,v,C);var D=Pl;if(D&&p&&v){var V='link[rel="preload"][as="'+Se(v)+'"]';v==="image"&&C&&C.imageSrcSet?(V+='[imagesrcset="'+Se(C.imageSrcSet)+'"]',typeof C.imageSizes=="string"&&(V+='[imagesizes="'+Se(C.imageSizes)+'"]')):V+='[href="'+Se(p)+'"]';var X=V;switch(v){case"style":X=Il(p);break;case"script":X=Fl(p)}Hs.has(X)||(p=u({rel:"preload",href:v==="image"&&C&&C.imageSrcSet?void 0:p,as:v},C),Hs.set(X,p),D.querySelector(V)!==null||v==="style"&&D.querySelector(md(X))||v==="script"&&D.querySelector(pd(X))||(v=D.createElement("link"),zn(v,"link",p),mt(v),D.head.appendChild(v)))}}function n9(p,v){Ja.m(p,v);var C=Pl;if(C&&p){var D=v&&typeof v.as=="string"?v.as:"script",V='link[rel="modulepreload"][as="'+Se(D)+'"][href="'+Se(p)+'"]',X=V;switch(D){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":X=Fl(p)}if(!Hs.has(X)&&(p=u({rel:"modulepreload",href:p},v),Hs.set(X,p),C.querySelector(V)===null)){switch(D){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(C.querySelector(pd(X)))return}D=C.createElement("link"),zn(D,"link",p),mt(D),C.head.appendChild(D)}}}function s9(p,v,C){Ja.S(p,v,C);var D=Pl;if(D&&p){var V=vt(D).hoistableStyles,X=Il(p);v=v||"default";var ne=V.get(X);if(!ne){var de={loading:0,preload:null};if(ne=D.querySelector(md(X)))de.loading=5;else{p=u({rel:"stylesheet",href:p,"data-precedence":v},C),(C=Hs.get(X))&&og(p,C);var ve=ne=D.createElement("link");mt(ve),zn(ve,"link",p),ve._p=new Promise(function(Ie,Ye){ve.onload=Ie,ve.onerror=Ye}),ve.addEventListener("load",function(){de.loading|=1}),ve.addEventListener("error",function(){de.loading|=2}),de.loading|=4,$f(ne,v,D)}ne={type:"stylesheet",instance:ne,count:1,state:de},V.set(X,ne)}}}function a9(p,v){Ja.X(p,v);var C=Pl;if(C&&p){var D=vt(C).hoistableScripts,V=Fl(p),X=D.get(V);X||(X=C.querySelector(pd(V)),X||(p=u({src:p,async:!0},v),(v=Hs.get(V))&&lg(p,v),X=C.createElement("script"),mt(X),zn(X,"link",p),C.head.appendChild(X)),X={type:"script",instance:X,count:1,state:null},D.set(V,X))}}function i9(p,v){Ja.M(p,v);var C=Pl;if(C&&p){var D=vt(C).hoistableScripts,V=Fl(p),X=D.get(V);X||(X=C.querySelector(pd(V)),X||(p=u({src:p,async:!0,type:"module"},v),(v=Hs.get(V))&&lg(p,v),X=C.createElement("script"),mt(X),zn(X,"link",p),C.head.appendChild(X)),X={type:"script",instance:X,count:1,state:null},D.set(V,X))}}function K2(p,v,C,D){var V=(V=W.current)?qf(V):null;if(!V)throw Error(s(446));switch(p){case"meta":case"title":return null;case"style":return typeof C.precedence=="string"&&typeof C.href=="string"?(v=Il(C.href),C=vt(V).hoistableStyles,D=C.get(v),D||(D={type:"style",instance:null,count:0,state:null},C.set(v,D)),D):{type:"void",instance:null,count:0,state:null};case"link":if(C.rel==="stylesheet"&&typeof C.href=="string"&&typeof C.precedence=="string"){p=Il(C.href);var X=vt(V).hoistableStyles,ne=X.get(p);if(ne||(V=V.ownerDocument||V,ne={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},X.set(p,ne),(X=V.querySelector(md(p)))&&!X._p&&(ne.instance=X,ne.state.loading=5),Hs.has(p)||(C={rel:"preload",as:"style",href:C.href,crossOrigin:C.crossOrigin,integrity:C.integrity,media:C.media,hrefLang:C.hrefLang,referrerPolicy:C.referrerPolicy},Hs.set(p,C),X||o9(V,p,C,ne.state))),v&&D===null)throw Error(s(528,""));return ne}if(v&&D!==null)throw Error(s(529,""));return null;case"script":return v=C.async,C=C.src,typeof C=="string"&&v&&typeof v!="function"&&typeof v!="symbol"?(v=Fl(C),C=vt(V).hoistableScripts,D=C.get(v),D||(D={type:"script",instance:null,count:0,state:null},C.set(v,D)),D):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,p))}}function Il(p){return'href="'+Se(p)+'"'}function md(p){return'link[rel="stylesheet"]['+p+"]"}function W2(p){return u({},p,{"data-precedence":p.precedence,precedence:null})}function o9(p,v,C,D){p.querySelector('link[rel="preload"][as="style"]['+v+"]")?D.loading=1:(v=p.createElement("link"),D.preload=v,v.addEventListener("load",function(){return D.loading|=1}),v.addEventListener("error",function(){return D.loading|=2}),zn(v,"link",C),mt(v),p.head.appendChild(v))}function Fl(p){return'[src="'+Se(p)+'"]'}function pd(p){return"script[async]"+p}function Q2(p,v,C){if(v.count++,v.instance===null)switch(v.type){case"style":var D=p.querySelector('style[data-href~="'+Se(C.href)+'"]');if(D)return v.instance=D,mt(D),D;var V=u({},C,{"data-href":C.href,"data-precedence":C.precedence,href:null,precedence:null});return D=(p.ownerDocument||p).createElement("style"),mt(D),zn(D,"style",V),$f(D,C.precedence,p),v.instance=D;case"stylesheet":V=Il(C.href);var X=p.querySelector(md(V));if(X)return v.state.loading|=4,v.instance=X,mt(X),X;D=W2(C),(V=Hs.get(V))&&og(D,V),X=(p.ownerDocument||p).createElement("link"),mt(X);var ne=X;return ne._p=new Promise(function(de,ve){ne.onload=de,ne.onerror=ve}),zn(X,"link",D),v.state.loading|=4,$f(X,C.precedence,p),v.instance=X;case"script":return X=Fl(C.src),(V=p.querySelector(pd(X)))?(v.instance=V,mt(V),V):(D=C,(V=Hs.get(X))&&(D=u({},C),lg(D,V)),p=p.ownerDocument||p,V=p.createElement("script"),mt(V),zn(V,"link",D),p.head.appendChild(V),v.instance=V);case"void":return null;default:throw Error(s(443,v.type))}else v.type==="stylesheet"&&(v.state.loading&4)===0&&(D=v.instance,v.state.loading|=4,$f(D,C.precedence,p));return v.instance}function $f(p,v,C){for(var D=C.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),V=D.length?D[D.length-1]:null,X=V,ne=0;ne<D.length;ne++){var de=D[ne];if(de.dataset.precedence===v)X=de;else if(X!==V)break}X?X.parentNode.insertBefore(p,X.nextSibling):(v=C.nodeType===9?C.head:C,v.insertBefore(p,v.firstChild))}function og(p,v){p.crossOrigin==null&&(p.crossOrigin=v.crossOrigin),p.referrerPolicy==null&&(p.referrerPolicy=v.referrerPolicy),p.title==null&&(p.title=v.title)}function lg(p,v){p.crossOrigin==null&&(p.crossOrigin=v.crossOrigin),p.referrerPolicy==null&&(p.referrerPolicy=v.referrerPolicy),p.integrity==null&&(p.integrity=v.integrity)}var Uf=null;function G2(p,v,C){if(Uf===null){var D=new Map,V=Uf=new Map;V.set(C,D)}else V=Uf,D=V.get(C),D||(D=new Map,V.set(C,D));if(D.has(p))return D;for(D.set(p,null),C=C.getElementsByTagName(p),V=0;V<C.length;V++){var X=C[V];if(!(X[me]||X[qe]||p==="link"&&X.getAttribute("rel")==="stylesheet")&&X.namespaceURI!=="http://www.w3.org/2000/svg"){var ne=X.getAttribute(v)||"";ne=p+ne;var de=D.get(ne);de?de.push(X):D.set(ne,[X])}}return D}function X2(p,v,C){p=p.ownerDocument||p,p.head.insertBefore(C,v==="title"?p.querySelector("head > title"):null)}function l9(p,v,C){if(C===1||v.itemProp!=null)return!1;switch(p){case"meta":case"title":return!0;case"style":if(typeof v.precedence!="string"||typeof v.href!="string"||v.href==="")break;return!0;case"link":if(typeof v.rel!="string"||typeof v.href!="string"||v.href===""||v.onLoad||v.onError)break;switch(v.rel){case"stylesheet":return p=v.disabled,typeof v.precedence=="string"&&p==null;default:return!0}case"script":if(v.async&&typeof v.async!="function"&&typeof v.async!="symbol"&&!v.onLoad&&!v.onError&&v.src&&typeof v.src=="string")return!0}return!1}function Y2(p){return!(p.type==="stylesheet"&&(p.state.loading&3)===0)}var gd=null;function c9(){}function d9(p,v,C){if(gd===null)throw Error(s(475));var D=gd;if(v.type==="stylesheet"&&(typeof C.media!="string"||matchMedia(C.media).matches!==!1)&&(v.state.loading&4)===0){if(v.instance===null){var V=Il(C.href),X=p.querySelector(md(V));if(X){p=X._p,p!==null&&typeof p=="object"&&typeof p.then=="function"&&(D.count++,D=Hf.bind(D),p.then(D,D)),v.state.loading|=4,v.instance=X,mt(X);return}X=p.ownerDocument||p,C=W2(C),(V=Hs.get(V))&&og(C,V),X=X.createElement("link"),mt(X);var ne=X;ne._p=new Promise(function(de,ve){ne.onload=de,ne.onerror=ve}),zn(X,"link",C),v.instance=X}D.stylesheets===null&&(D.stylesheets=new Map),D.stylesheets.set(v,p),(p=v.state.preload)&&(v.state.loading&3)===0&&(D.count++,v=Hf.bind(D),p.addEventListener("load",v),p.addEventListener("error",v))}}function u9(){if(gd===null)throw Error(s(475));var p=gd;return p.stylesheets&&p.count===0&&cg(p,p.stylesheets),0<p.count?function(v){var C=setTimeout(function(){if(p.stylesheets&&cg(p,p.stylesheets),p.unsuspend){var D=p.unsuspend;p.unsuspend=null,D()}},6e4);return p.unsuspend=v,function(){p.unsuspend=null,clearTimeout(C)}}:null}function Hf(){if(this.count--,this.count===0){if(this.stylesheets)cg(this,this.stylesheets);else if(this.unsuspend){var p=this.unsuspend;this.unsuspend=null,p()}}}var Vf=null;function cg(p,v){p.stylesheets=null,p.unsuspend!==null&&(p.count++,Vf=new Map,v.forEach(f9,p),Vf=null,Hf.call(p))}function f9(p,v){if(!(v.state.loading&4)){var C=Vf.get(p);if(C)var D=C.get(null);else{C=new Map,Vf.set(p,C);for(var V=p.querySelectorAll("link[data-precedence],style[data-precedence]"),X=0;X<V.length;X++){var ne=V[X];(ne.nodeName==="LINK"||ne.getAttribute("media")!=="not all")&&(C.set(ne.dataset.precedence,ne),D=ne)}D&&C.set(null,D)}V=v.instance,ne=V.getAttribute("data-precedence"),X=C.get(ne)||D,X===D&&C.set(null,V),C.set(ne,V),this.count++,D=Hf.bind(this),V.addEventListener("load",D),V.addEventListener("error",D),X?X.parentNode.insertBefore(V,X.nextSibling):(p=p.nodeType===9?p.head:p,p.insertBefore(V,p.firstChild)),v.state.loading|=4}}var bd={$$typeof:_,Provider:null,Consumer:null,_currentValue:S,_currentValue2:S,_threadCount:0};function h9(p,v,C,D,V,X,ne,de){this.tag=1,this.containerInfo=p,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Xt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xt(0),this.hiddenUpdates=Xt(null),this.identifierPrefix=D,this.onUncaughtError=V,this.onCaughtError=X,this.onRecoverableError=ne,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=de,this.incompleteTransitions=new Map}function Z2(p,v,C,D,V,X,ne,de,ve,Ie,Ye,st){return p=new h9(p,v,C,ne,de,ve,Ie,st),v=1,X===!0&&(v|=24),X=vs(3,null,null,v),p.current=X,X.stateNode=p,v=Hp(),v.refCount++,p.pooledCache=v,v.refCount++,X.memoizedState={element:D,isDehydrated:C,cache:v},Qp(X),p}function J2(p){return p?(p=ml,p):ml}function ew(p,v,C,D,V,X){V=J2(V),D.context===null?D.context=V:D.pendingContext=V,D=Ni(v),D.payload={element:C},X=X===void 0?null:X,X!==null&&(D.callback=X),C=Ci(p,D,v),C!==null&&(Cs(C,p,v),Wc(C,p,v))}function tw(p,v){if(p=p.memoizedState,p!==null&&p.dehydrated!==null){var C=p.retryLane;p.retryLane=C!==0&&C<v?C:v}}function dg(p,v){tw(p,v),(p=p.alternate)&&tw(p,v)}function rw(p){if(p.tag===13){var v=hl(p,67108864);v!==null&&Cs(v,p,67108864),dg(p,67108864)}}var Kf=!0;function m9(p,v,C,D){var V=N.T;N.T=null;var X=k.p;try{k.p=2,ug(p,v,C,D)}finally{k.p=X,N.T=V}}function p9(p,v,C,D){var V=N.T;N.T=null;var X=k.p;try{k.p=8,ug(p,v,C,D)}finally{k.p=X,N.T=V}}function ug(p,v,C,D){if(Kf){var V=fg(D);if(V===null)Z0(p,v,D,Wf,C),sw(p,D);else if(b9(V,p,v,C,D))D.stopPropagation();else if(sw(p,D),v&4&&-1<g9.indexOf(p)){for(;V!==null;){var X=Ze(V);if(X!==null)switch(X.tag){case 3:if(X=X.stateNode,X.current.memoizedState.isDehydrated){var ne=ht(X.pendingLanes);if(ne!==0){var de=X;for(de.pendingLanes|=2,de.entangledLanes|=2;ne;){var ve=1<<31-Be(ne);de.entanglements[1]|=ve,ne&=~ve}Ea(X),(Mr&6)===0&&(Tf=re()+500,dd(0))}}break;case 13:de=hl(X,2),de!==null&&Cs(de,X,2),Mf(),dg(X,2)}if(X=fg(D),X===null&&Z0(p,v,D,Wf,C),X===V)break;V=X}V!==null&&D.stopPropagation()}else Z0(p,v,D,null,C)}}function fg(p){return p=gn(p),hg(p)}var Wf=null;function hg(p){if(Wf=null,p=at(p),p!==null){var v=i(p);if(v===null)p=null;else{var C=v.tag;if(C===13){if(p=o(v),p!==null)return p;p=null}else if(C===3){if(v.stateNode.current.memoizedState.isDehydrated)return v.tag===3?v.stateNode.containerInfo:null;p=null}else v!==p&&(p=null)}}return Wf=p,null}function nw(p){switch(p){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ge()){case le:return 2;case te:return 8;case ie:case ue:return 32;case _e:return 268435456;default:return 32}default:return 32}}var mg=!1,Li=null,zi=null,Bi=null,yd=new Map,xd=new Map,qi=[],g9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function sw(p,v){switch(p){case"focusin":case"focusout":Li=null;break;case"dragenter":case"dragleave":zi=null;break;case"mouseover":case"mouseout":Bi=null;break;case"pointerover":case"pointerout":yd.delete(v.pointerId);break;case"gotpointercapture":case"lostpointercapture":xd.delete(v.pointerId)}}function vd(p,v,C,D,V,X){return p===null||p.nativeEvent!==X?(p={blockedOn:v,domEventName:C,eventSystemFlags:D,nativeEvent:X,targetContainers:[V]},v!==null&&(v=Ze(v),v!==null&&rw(v)),p):(p.eventSystemFlags|=D,v=p.targetContainers,V!==null&&v.indexOf(V)===-1&&v.push(V),p)}function b9(p,v,C,D,V){switch(v){case"focusin":return Li=vd(Li,p,v,C,D,V),!0;case"dragenter":return zi=vd(zi,p,v,C,D,V),!0;case"mouseover":return Bi=vd(Bi,p,v,C,D,V),!0;case"pointerover":var X=V.pointerId;return yd.set(X,vd(yd.get(X)||null,p,v,C,D,V)),!0;case"gotpointercapture":return X=V.pointerId,xd.set(X,vd(xd.get(X)||null,p,v,C,D,V)),!0}return!1}function aw(p){var v=at(p.target);if(v!==null){var C=i(v);if(C!==null){if(v=C.tag,v===13){if(v=o(C),v!==null){p.blockedOn=v,xe(p.priority,function(){if(C.tag===13){var D=Ns();D=xt(D);var V=hl(C,D);V!==null&&Cs(V,C,D),dg(C,D)}});return}}else if(v===3&&C.stateNode.current.memoizedState.isDehydrated){p.blockedOn=C.tag===3?C.stateNode.containerInfo:null;return}}}p.blockedOn=null}function Qf(p){if(p.blockedOn!==null)return!1;for(var v=p.targetContainers;0<v.length;){var C=fg(p.nativeEvent);if(C===null){C=p.nativeEvent;var D=new C.constructor(C.type,C);Xr=D,C.target.dispatchEvent(D),Xr=null}else return v=Ze(C),v!==null&&rw(v),p.blockedOn=C,!1;v.shift()}return!0}function iw(p,v,C){Qf(p)&&C.delete(v)}function y9(){mg=!1,Li!==null&&Qf(Li)&&(Li=null),zi!==null&&Qf(zi)&&(zi=null),Bi!==null&&Qf(Bi)&&(Bi=null),yd.forEach(iw),xd.forEach(iw)}function Gf(p,v){p.blockedOn===v&&(p.blockedOn=null,mg||(mg=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,y9)))}var Xf=null;function ow(p){Xf!==p&&(Xf=p,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Xf===p&&(Xf=null);for(var v=0;v<p.length;v+=3){var C=p[v],D=p[v+1],V=p[v+2];if(typeof D!="function"){if(hg(D||C)===null)continue;break}var X=Ze(C);X!==null&&(p.splice(v,3),v-=3,h0(X,{pending:!0,data:V,method:C.method,action:D},D,V))}}))}function wd(p){function v(ve){return Gf(ve,p)}Li!==null&&Gf(Li,p),zi!==null&&Gf(zi,p),Bi!==null&&Gf(Bi,p),yd.forEach(v),xd.forEach(v);for(var C=0;C<qi.length;C++){var D=qi[C];D.blockedOn===p&&(D.blockedOn=null)}for(;0<qi.length&&(C=qi[0],C.blockedOn===null);)aw(C),C.blockedOn===null&&qi.shift();if(C=(p.ownerDocument||p).$$reactFormReplay,C!=null)for(D=0;D<C.length;D+=3){var V=C[D],X=C[D+1],ne=V[Oe]||null;if(typeof X=="function")ne||ow(C);else if(ne){var de=null;if(X&&X.hasAttribute("formAction")){if(V=X,ne=X[Oe]||null)de=ne.formAction;else if(hg(V)!==null)continue}else de=ne.action;typeof de=="function"?C[D+1]=de:(C.splice(D,3),D-=3),ow(C)}}}function pg(p){this._internalRoot=p}Yf.prototype.render=pg.prototype.render=function(p){var v=this._internalRoot;if(v===null)throw Error(s(409));var C=v.current,D=Ns();ew(C,D,p,v,null,null)},Yf.prototype.unmount=pg.prototype.unmount=function(){var p=this._internalRoot;if(p!==null){this._internalRoot=null;var v=p.containerInfo;ew(p.current,2,null,p,null,null),Mf(),v[he]=null}};function Yf(p){this._internalRoot=p}Yf.prototype.unstable_scheduleHydration=function(p){if(p){var v=be();p={blockedOn:null,target:p,priority:v};for(var C=0;C<qi.length&&v!==0&&v<qi[C].priority;C++);qi.splice(C,0,p),C===0&&aw(p)}};var lw=n.version;if(lw!=="19.1.1")throw Error(s(527,lw,"19.1.1"));k.findDOMNode=function(p){var v=p._reactInternals;if(v===void 0)throw typeof p.render=="function"?Error(s(188)):(p=Object.keys(p).join(","),Error(s(268,p)));return p=c(v),p=p!==null?a(p):null,p=p===null?null:p.stateNode,p};var x9={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:N,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zf.isDisabled&&Zf.supportsFiber)try{Le=Zf.inject(x9),Ue=Zf}catch{}}return jd.createRoot=function(p,v){if(!l(p))throw Error(s(299));var C=!1,D="",V=N1,X=C1,ne=S1,de=null;return v!=null&&(v.unstable_strictMode===!0&&(C=!0),v.identifierPrefix!==void 0&&(D=v.identifierPrefix),v.onUncaughtError!==void 0&&(V=v.onUncaughtError),v.onCaughtError!==void 0&&(X=v.onCaughtError),v.onRecoverableError!==void 0&&(ne=v.onRecoverableError),v.unstable_transitionCallbacks!==void 0&&(de=v.unstable_transitionCallbacks)),v=Z2(p,1,!1,null,null,C,D,V,X,ne,de,null),p[he]=v.current,Y0(p),new pg(v)},jd.hydrateRoot=function(p,v,C){if(!l(p))throw Error(s(299));var D=!1,V="",X=N1,ne=C1,de=S1,ve=null,Ie=null;return C!=null&&(C.unstable_strictMode===!0&&(D=!0),C.identifierPrefix!==void 0&&(V=C.identifierPrefix),C.onUncaughtError!==void 0&&(X=C.onUncaughtError),C.onCaughtError!==void 0&&(ne=C.onCaughtError),C.onRecoverableError!==void 0&&(de=C.onRecoverableError),C.unstable_transitionCallbacks!==void 0&&(ve=C.unstable_transitionCallbacks),C.formState!==void 0&&(Ie=C.formState)),v=Z2(p,1,!0,v,C??null,D,V,X,ne,de,ve,Ie),v.context=J2(null),C=v.current,D=Ns(),D=xt(D),V=Ni(D),V.callback=null,Ci(C,V,D),C=D,v.current.lanes=C,kt(v,C),Ea(v),p[he]=v.current,Y0(p),new Yf(v)},jd.version="19.1.1",jd}var yw;function T9(){if(yw)return yg.exports;yw=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),yg.exports=R9(),yg.exports}var A9=T9();const M9=cm(A9);var dc=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Qo=typeof window>"u"||"Deno"in globalThis;function Zn(){}function O9(e,n){return typeof e=="function"?e(n):e}function xb(e){return typeof e=="number"&&e>=0&&e!==1/0}function L4(e,n){return Math.max(e+(n||0)-Date.now(),0)}function Zi(e,n){return typeof e=="function"?e(n):e}function Ks(e,n){return typeof e=="function"?e(n):e}function xw(e,n){const{type:t="all",exact:s,fetchStatus:l,predicate:i,queryKey:o,stale:d}=e;if(o){if(s){if(n.queryHash!==uy(o,n.options))return!1}else if(!ru(n.queryKey,o))return!1}if(t!=="all"){const c=n.isActive();if(t==="active"&&!c||t==="inactive"&&c)return!1}return!(typeof d=="boolean"&&n.isStale()!==d||l&&l!==n.state.fetchStatus||i&&!i(n))}function vw(e,n){const{exact:t,status:s,predicate:l,mutationKey:i}=e;if(i){if(!n.options.mutationKey)return!1;if(t){if(Go(n.options.mutationKey)!==Go(i))return!1}else if(!ru(n.options.mutationKey,i))return!1}return!(s&&n.state.status!==s||l&&!l(n))}function uy(e,n){return(n?.queryKeyHashFn||Go)(e)}function Go(e){return JSON.stringify(e,(n,t)=>vb(t)?Object.keys(t).sort().reduce((s,l)=>(s[l]=t[l],s),{}):t)}function ru(e,n){return e===n?!0:typeof e!=typeof n?!1:e&&n&&typeof e=="object"&&typeof n=="object"?Object.keys(n).every(t=>ru(e[t],n[t])):!1}function z4(e,n){if(e===n)return e;const t=ww(e)&&ww(n);if(t||vb(e)&&vb(n)){const s=t?e:Object.keys(e),l=s.length,i=t?n:Object.keys(n),o=i.length,d=t?[]:{},c=new Set(s);let a=0;for(let u=0;u<o;u++){const h=t?u:i[u];(!t&&c.has(h)||t)&&e[h]===void 0&&n[h]===void 0?(d[h]=void 0,a++):(d[h]=z4(e[h],n[h]),d[h]===e[h]&&e[h]!==void 0&&a++)}return l===o&&a===l?e:d}return n}function kh(e,n){if(!n||Object.keys(e).length!==Object.keys(n).length)return!1;for(const t in e)if(e[t]!==n[t])return!1;return!0}function ww(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function vb(e){if(!_w(e))return!1;const n=e.constructor;if(n===void 0)return!0;const t=n.prototype;return!(!_w(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function _w(e){return Object.prototype.toString.call(e)==="[object Object]"}function D9(e){return new Promise(n=>{setTimeout(n,e)})}function wb(e,n,t){return typeof t.structuralSharing=="function"?t.structuralSharing(e,n):t.structuralSharing!==!1?z4(e,n):n}function P9(e,n,t=0){const s=[...e,n];return t&&s.length>t?s.slice(1):s}function I9(e,n,t=0){const s=[n,...e];return t&&s.length>t?s.slice(0,-1):s}var fy=Symbol();function B4(e,n){return!e.queryFn&&n?.initialPromise?()=>n.initialPromise:!e.queryFn||e.queryFn===fy?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function q4(e,n){return typeof e=="function"?e(...n):!!e}var F9=class extends dc{#t;#e;#r;constructor(){super(),this.#r=e=>{if(!Qo&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}}}onSubscribe(){this.#e||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(e){this.#r=e,this.#e?.(),this.#e=e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()})}setFocused(e){this.#t!==e&&(this.#t=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){return typeof this.#t=="boolean"?this.#t:globalThis.document?.visibilityState!=="hidden"}},hy=new F9,L9=class extends dc{#t=!0;#e;#r;constructor(){super(),this.#r=e=>{if(!Qo&&window.addEventListener){const n=()=>e(!0),t=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",t,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",t)}}}}onSubscribe(){this.#e||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(e){this.#r=e,this.#e?.(),this.#e=e(this.setOnline.bind(this))}setOnline(e){this.#t!==e&&(this.#t=e,this.listeners.forEach(t=>{t(e)}))}isOnline(){return this.#t}},Eh=new L9;function _b(){let e,n;const t=new Promise((l,i)=>{e=l,n=i});t.status="pending",t.catch(()=>{});function s(l){Object.assign(t,l),delete t.resolve,delete t.reject}return t.resolve=l=>{s({status:"fulfilled",value:l}),e(l)},t.reject=l=>{s({status:"rejected",reason:l}),n(l)},t}function z9(e){return Math.min(1e3*2**e,3e4)}function $4(e){return(e??"online")==="online"?Eh.isOnline():!0}var U4=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function _g(e){return e instanceof U4}function H4(e){let n=!1,t=0,s=!1,l;const i=_b(),o=y=>{s||(f(new U4(y)),e.abort?.())},d=()=>{n=!0},c=()=>{n=!1},a=()=>hy.isFocused()&&(e.networkMode==="always"||Eh.isOnline())&&e.canRun(),u=()=>$4(e.networkMode)&&e.canRun(),h=y=>{s||(s=!0,e.onSuccess?.(y),l?.(),i.resolve(y))},f=y=>{s||(s=!0,e.onError?.(y),l?.(),i.reject(y))},m=()=>new Promise(y=>{l=g=>{(s||a())&&y(g)},e.onPause?.()}).then(()=>{l=void 0,s||e.onContinue?.()}),b=()=>{if(s)return;let y;const g=t===0?e.initialPromise:void 0;try{y=g??e.fn()}catch(w){y=Promise.reject(w)}Promise.resolve(y).then(h).catch(w=>{if(s)return;const x=e.retry??(Qo?0:3),_=e.retryDelay??z9,j=typeof _=="function"?_(t,w):_,R=x===!0||typeof x=="number"&&t<x||typeof x=="function"&&x(t,w);if(n||!R){f(w);return}t++,e.onFail?.(t,w),D9(j).then(()=>a()?void 0:m()).then(()=>{n?f(w):b()})})};return{promise:i,cancel:o,continue:()=>(l?.(),i),cancelRetry:d,continueRetry:c,canStart:u,start:()=>(u()?b():m().then(b),i)}}var B9=e=>setTimeout(e,0);function q9(){let e=[],n=0,t=d=>{d()},s=d=>{d()},l=B9;const i=d=>{n?e.push(d):l(()=>{t(d)})},o=()=>{const d=e;e=[],d.length&&l(()=>{s(()=>{d.forEach(c=>{t(c)})})})};return{batch:d=>{let c;n++;try{c=d()}finally{n--,n||o()}return c},batchCalls:d=>(...c)=>{i(()=>{d(...c)})},schedule:i,setNotifyFunction:d=>{t=d},setBatchNotifyFunction:d=>{s=d},setScheduler:d=>{l=d}}}var jn=q9(),V4=class{#t;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),xb(this.gcTime)&&(this.#t=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Qo?1/0:300*1e3))}clearGcTimeout(){this.#t&&(clearTimeout(this.#t),this.#t=void 0)}},$9=class extends V4{#t;#e;#r;#n;#s;#i;#o;constructor(e){super(),this.#o=!1,this.#i=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#n=e.client,this.#r=this.#n.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#t=U9(this.options),this.state=e.state??this.#t,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#s?.promise}setOptions(e){this.options={...this.#i,...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(e,n){const t=wb(this.state.data,e,this.options);return this.#a({data:t,type:"success",dataUpdatedAt:n?.updatedAt,manual:n?.manual}),t}setState(e,n){this.#a({type:"setState",state:e,setStateOptions:n})}cancel(e){const n=this.#s?.promise;return this.#s?.cancel(e),n?n.then(Zn).catch(Zn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#t)}isActive(){return this.observers.some(e=>Ks(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===fy||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Zi(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!L4(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(n=>n.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#s?.continue()}onOnline(){this.observers.find(n=>n.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#s?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(this.#s&&(this.#o?this.#s.cancel({revert:!0}):this.#s.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}fetch(e,n){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&n?.cancelRefetch)this.cancel({silent:!0});else if(this.#s)return this.#s.continueRetry(),this.#s.promise}if(e&&this.setOptions(e),!this.options.queryFn){const c=this.observers.find(a=>a.options.queryFn);c&&this.setOptions(c.options)}const t=new AbortController,s=c=>{Object.defineProperty(c,"signal",{enumerable:!0,get:()=>(this.#o=!0,t.signal)})},l=()=>{const c=B4(this.options,n),u=(()=>{const h={client:this.#n,queryKey:this.queryKey,meta:this.meta};return s(h),h})();return this.#o=!1,this.options.persister?this.options.persister(c,u,this):c(u)},o=(()=>{const c={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:this.#n,state:this.state,fetchFn:l};return s(c),c})();this.options.behavior?.onFetch(o,this),this.#e=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==o.fetchOptions?.meta)&&this.#a({type:"fetch",meta:o.fetchOptions?.meta});const d=c=>{_g(c)&&c.silent||this.#a({type:"error",error:c}),_g(c)||(this.#r.config.onError?.(c,this),this.#r.config.onSettled?.(this.state.data,c,this)),this.scheduleGc()};return this.#s=H4({initialPromise:n?.initialPromise,fn:o.fetchFn,abort:t.abort.bind(t),onSuccess:c=>{if(c===void 0){d(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(c)}catch(a){d(a);return}this.#r.config.onSuccess?.(c,this),this.#r.config.onSettled?.(c,this.state.error,this),this.scheduleGc()},onError:d,onFail:(c,a)=>{this.#a({type:"failed",failureCount:c,error:a})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0}),this.#s.start()}#a(e){const n=t=>{switch(e.type){case"failed":return{...t,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,...K4(t.data,this.options),fetchMeta:e.meta??null};case"success":return this.#e=void 0,{...t,data:e.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return _g(s)&&s.revert&&this.#e?{...this.#e,fetchStatus:"idle"}:{...t,error:s,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...e.state}}};this.state=n(this.state),jn.batch(()=>{this.observers.forEach(t=>{t.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:e})})}};function K4(e,n){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:$4(n.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function U9(e){const n=typeof e.initialData=="function"?e.initialData():e.initialData,t=n!==void 0,s=t?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:n,dataUpdateCount:0,dataUpdatedAt:t?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var H9=class extends dc{constructor(e={}){super(),this.config=e,this.#t=new Map}#t;build(e,n,t){const s=n.queryKey,l=n.queryHash??uy(s,n);let i=this.get(l);return i||(i=new $9({client:e,queryKey:s,queryHash:l,options:e.defaultQueryOptions(n),state:t,defaultOptions:e.getQueryDefaults(s)}),this.add(i)),i}add(e){this.#t.has(e.queryHash)||(this.#t.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=this.#t.get(e.queryHash);n&&(e.destroy(),n===e&&this.#t.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){jn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#t.get(e)}getAll(){return[...this.#t.values()]}find(e){const n={exact:!0,...e};return this.getAll().find(t=>xw(n,t))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(t=>xw(e,t)):n}notify(e){jn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){jn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){jn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},V9=class extends V4{#t;#e;#r;constructor(e){super(),this.mutationId=e.mutationId,this.#e=e.mutationCache,this.#t=[],this.state=e.state||W4(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#e.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(n=>n!==e),this.scheduleGc(),this.#e.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#e.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(e){const n=()=>{this.#n({type:"continue"})};this.#r=H4({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(l,i)=>{this.#n({type:"failed",failureCount:l,error:i})},onPause:()=>{this.#n({type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#e.canRun(this)});const t=this.state.status==="pending",s=!this.#r.canStart();try{if(t)n();else{this.#n({type:"pending",variables:e,isPaused:s}),await this.#e.config.onMutate?.(e,this);const i=await this.options.onMutate?.(e);i!==this.state.context&&this.#n({type:"pending",context:i,variables:e,isPaused:s})}const l=await this.#r.start();return await this.#e.config.onSuccess?.(l,e,this.state.context,this),await this.options.onSuccess?.(l,e,this.state.context),await this.#e.config.onSettled?.(l,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(l,null,e,this.state.context),this.#n({type:"success",data:l}),l}catch(l){try{throw await this.#e.config.onError?.(l,e,this.state.context,this),await this.options.onError?.(l,e,this.state.context),await this.#e.config.onSettled?.(void 0,l,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,l,e,this.state.context),l}finally{this.#n({type:"error",error:l})}}finally{this.#e.runNext(this)}}#n(e){const n=t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),jn.batch(()=>{this.#t.forEach(t=>{t.onMutationUpdate(e)}),this.#e.notify({mutation:this,type:"updated",action:e})})}};function W4(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var K9=class extends dc{constructor(e={}){super(),this.config=e,this.#t=new Set,this.#e=new Map,this.#r=0}#t;#e;#r;build(e,n,t){const s=new V9({mutationCache:this,mutationId:++this.#r,options:e.defaultMutationOptions(n),state:t});return this.add(s),s}add(e){this.#t.add(e);const n=Jf(e);if(typeof n=="string"){const t=this.#e.get(n);t?t.push(e):this.#e.set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#t.delete(e)){const n=Jf(e);if(typeof n=="string"){const t=this.#e.get(n);if(t)if(t.length>1){const s=t.indexOf(e);s!==-1&&t.splice(s,1)}else t[0]===e&&this.#e.delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Jf(e);if(typeof n=="string"){const s=this.#e.get(n)?.find(l=>l.state.status==="pending");return!s||s===e}else return!0}runNext(e){const n=Jf(e);return typeof n=="string"?this.#e.get(n)?.find(s=>s!==e&&s.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){jn.batch(()=>{this.#t.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#t.clear(),this.#e.clear()})}getAll(){return Array.from(this.#t)}find(e){const n={exact:!0,...e};return this.getAll().find(t=>vw(n,t))}findAll(e={}){return this.getAll().filter(n=>vw(e,n))}notify(e){jn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return jn.batch(()=>Promise.all(e.map(n=>n.continue().catch(Zn))))}};function Jf(e){return e.options.scope?.id}function Rh(e){return{onFetch:(n,t)=>{const s=n.options,l=n.fetchOptions?.meta?.fetchMore?.direction,i=n.state.data?.pages||[],o=n.state.data?.pageParams||[];let d={pages:[],pageParams:[]},c=0;const a=async()=>{let u=!1;const h=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(n.signal.aborted?u=!0:n.signal.addEventListener("abort",()=>{u=!0}),n.signal)})},f=B4(n.options,n.fetchOptions),m=async(b,y,g)=>{if(u)return Promise.reject();if(y==null&&b.pages.length)return Promise.resolve(b);const x=(()=>{const M={client:n.client,queryKey:n.queryKey,pageParam:y,direction:g?"backward":"forward",meta:n.options.meta};return h(M),M})(),_=await f(x),{maxPages:j}=n.options,R=g?I9:P9;return{pages:R(b.pages,_,j),pageParams:R(b.pageParams,y,j)}};if(l&&i.length){const b=l==="backward",y=b?Q4:jb,g={pages:i,pageParams:o},w=y(s,g);d=await m(g,w,b)}else{const b=e??i.length;do{const y=c===0?o[0]??s.initialPageParam:jb(s,d);if(c>0&&y==null)break;d=await m(d,y),c++}while(c<b)}return d};n.options.persister?n.fetchFn=()=>n.options.persister?.(a,{client:n.client,queryKey:n.queryKey,meta:n.options.meta,signal:n.signal},t):n.fetchFn=a}}}function jb(e,{pages:n,pageParams:t}){const s=n.length-1;return n.length>0?e.getNextPageParam(n[s],n,t[s],t):void 0}function Q4(e,{pages:n,pageParams:t}){return n.length>0?e.getPreviousPageParam?.(n[0],n,t[0],t):void 0}function W9(e,n){return n?jb(e,n)!=null:!1}function Q9(e,n){return!n||!e.getPreviousPageParam?!1:Q4(e,n)!=null}var G9=class{#t;#e;#r;#n;#s;#i;#o;#a;constructor(e={}){this.#t=e.queryCache||new H9,this.#e=e.mutationCache||new K9,this.#r=e.defaultOptions||{},this.#n=new Map,this.#s=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#o=hy.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#t.onFocus())}),this.#a=Eh.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#t.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#o?.(),this.#o=void 0,this.#a?.(),this.#a=void 0)}isFetching(e){return this.#t.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#e.findAll({...e,status:"pending"}).length}getQueryData(e){const n=this.defaultQueryOptions({queryKey:e});return this.#t.get(n.queryHash)?.state.data}ensureQueryData(e){const n=this.defaultQueryOptions(e),t=this.#t.build(this,n),s=t.state.data;return s===void 0?this.fetchQuery(e):(e.revalidateIfStale&&t.isStaleByTime(Zi(n.staleTime,t))&&this.prefetchQuery(n),Promise.resolve(s))}getQueriesData(e){return this.#t.findAll(e).map(({queryKey:n,state:t})=>{const s=t.data;return[n,s]})}setQueryData(e,n,t){const s=this.defaultQueryOptions({queryKey:e}),i=this.#t.get(s.queryHash)?.state.data,o=O9(n,i);if(o!==void 0)return this.#t.build(this,s).setData(o,{...t,manual:!0})}setQueriesData(e,n,t){return jn.batch(()=>this.#t.findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,n,t)]))}getQueryState(e){const n=this.defaultQueryOptions({queryKey:e});return this.#t.get(n.queryHash)?.state}removeQueries(e){const n=this.#t;jn.batch(()=>{n.findAll(e).forEach(t=>{n.remove(t)})})}resetQueries(e,n){const t=this.#t;return jn.batch(()=>(t.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...e},n)))}cancelQueries(e,n={}){const t={revert:!0,...n},s=jn.batch(()=>this.#t.findAll(e).map(l=>l.cancel(t)));return Promise.all(s).then(Zn).catch(Zn)}invalidateQueries(e,n={}){return jn.batch(()=>(this.#t.findAll(e).forEach(t=>{t.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},n)))}refetchQueries(e,n={}){const t={...n,cancelRefetch:n.cancelRefetch??!0},s=jn.batch(()=>this.#t.findAll(e).filter(l=>!l.isDisabled()&&!l.isStatic()).map(l=>{let i=l.fetch(void 0,t);return t.throwOnError||(i=i.catch(Zn)),l.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(s).then(Zn)}fetchQuery(e){const n=this.defaultQueryOptions(e);n.retry===void 0&&(n.retry=!1);const t=this.#t.build(this,n);return t.isStaleByTime(Zi(n.staleTime,t))?t.fetch(n):Promise.resolve(t.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Zn).catch(Zn)}fetchInfiniteQuery(e){return e.behavior=Rh(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Zn).catch(Zn)}ensureInfiniteQueryData(e){return e.behavior=Rh(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Eh.isOnline()?this.#e.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#t}getMutationCache(){return this.#e}getDefaultOptions(){return this.#r}setDefaultOptions(e){this.#r=e}setQueryDefaults(e,n){this.#n.set(Go(e),{queryKey:e,defaultOptions:n})}getQueryDefaults(e){const n=[...this.#n.values()],t={};return n.forEach(s=>{ru(e,s.queryKey)&&Object.assign(t,s.defaultOptions)}),t}setMutationDefaults(e,n){this.#s.set(Go(e),{mutationKey:e,defaultOptions:n})}getMutationDefaults(e){const n=[...this.#s.values()],t={};return n.forEach(s=>{ru(e,s.mutationKey)&&Object.assign(t,s.defaultOptions)}),t}defaultQueryOptions(e){if(e._defaulted)return e;const n={...this.#r.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return n.queryHash||(n.queryHash=uy(n.queryKey,n)),n.refetchOnReconnect===void 0&&(n.refetchOnReconnect=n.networkMode!=="always"),n.throwOnError===void 0&&(n.throwOnError=!!n.suspense),!n.networkMode&&n.persister&&(n.networkMode="offlineFirst"),n.queryFn===fy&&(n.enabled=!1),n}defaultMutationOptions(e){return e?._defaulted?e:{...this.#r.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#t.clear(),this.#e.clear()}},G4=class extends dc{constructor(e,n){super(),this.options=n,this.#t=e,this.#a=null,this.#o=_b(),this.options.experimental_prefetchInRender||this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}#t;#e=void 0;#r=void 0;#n=void 0;#s;#i;#o;#a;#p;#f;#h;#c;#d;#l;#m=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#e.addObserver(this),jw(this.#e,this.options)?this.#u():this.updateResult(),this.#x())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Nb(this.#e,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Nb(this.#e,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#v(),this.#w(),this.#e.removeObserver(this)}setOptions(e){const n=this.options,t=this.#e;if(this.options=this.#t.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ks(this.options.enabled,this.#e)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#_(),this.#e.setOptions(this.options),n._defaulted&&!kh(this.options,n)&&this.#t.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#e,observer:this});const s=this.hasListeners();s&&Nw(this.#e,t,this.options,n)&&this.#u(),this.updateResult(),s&&(this.#e!==t||Ks(this.options.enabled,this.#e)!==Ks(n.enabled,this.#e)||Zi(this.options.staleTime,this.#e)!==Zi(n.staleTime,this.#e))&&this.#g();const l=this.#b();s&&(this.#e!==t||Ks(this.options.enabled,this.#e)!==Ks(n.enabled,this.#e)||l!==this.#l)&&this.#y(l)}getOptimisticResult(e){const n=this.#t.getQueryCache().build(this.#t,e),t=this.createResult(n,e);return Y9(this,t)&&(this.#n=t,this.#i=this.options,this.#s=this.#e.state),t}getCurrentResult(){return this.#n}trackResult(e,n){return new Proxy(e,{get:(t,s)=>(this.trackProp(s),n?.(s),Reflect.get(t,s))})}trackProp(e){this.#m.add(e)}getCurrentQuery(){return this.#e}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=this.#t.defaultQueryOptions(e),t=this.#t.getQueryCache().build(this.#t,n);return t.fetch().then(()=>this.createResult(t,n))}fetch(e){return this.#u({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#n))}#u(e){this.#_();let n=this.#e.fetch(this.options,e);return e?.throwOnError||(n=n.catch(Zn)),n}#g(){this.#v();const e=Zi(this.options.staleTime,this.#e);if(Qo||this.#n.isStale||!xb(e))return;const t=L4(this.#n.dataUpdatedAt,e)+1;this.#c=setTimeout(()=>{this.#n.isStale||this.updateResult()},t)}#b(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#e):this.options.refetchInterval)??!1}#y(e){this.#w(),this.#l=e,!(Qo||Ks(this.options.enabled,this.#e)===!1||!xb(this.#l)||this.#l===0)&&(this.#d=setInterval(()=>{(this.options.refetchIntervalInBackground||hy.isFocused())&&this.#u()},this.#l))}#x(){this.#g(),this.#y(this.#b())}#v(){this.#c&&(clearTimeout(this.#c),this.#c=void 0)}#w(){this.#d&&(clearInterval(this.#d),this.#d=void 0)}createResult(e,n){const t=this.#e,s=this.options,l=this.#n,i=this.#s,o=this.#i,c=e!==t?e.state:this.#r,{state:a}=e;let u={...a},h=!1,f;if(n._optimisticResults){const F=this.hasListeners(),B=!F&&jw(e,n),U=F&&Nw(e,t,n,s);(B||U)&&(u={...u,...K4(a.data,e.options)}),n._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:m,errorUpdatedAt:b,status:y}=u;f=u.data;let g=!1;if(n.placeholderData!==void 0&&f===void 0&&y==="pending"){let F;l?.isPlaceholderData&&n.placeholderData===o?.placeholderData?(F=l.data,g=!0):F=typeof n.placeholderData=="function"?n.placeholderData(this.#h?.state.data,this.#h):n.placeholderData,F!==void 0&&(y="success",f=wb(l?.data,F,n),h=!0)}if(n.select&&f!==void 0&&!g)if(l&&f===i?.data&&n.select===this.#p)f=this.#f;else try{this.#p=n.select,f=n.select(f),f=wb(l?.data,f,n),this.#f=f,this.#a=null}catch(F){this.#a=F}this.#a&&(m=this.#a,f=this.#f,b=Date.now(),y="error");const w=u.fetchStatus==="fetching",x=y==="pending",_=y==="error",j=x&&w,R=f!==void 0,I={status:y,fetchStatus:u.fetchStatus,isPending:x,isSuccess:y==="success",isError:_,isInitialLoading:j,isLoading:j,data:f,dataUpdatedAt:u.dataUpdatedAt,error:m,errorUpdatedAt:b,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>c.dataUpdateCount||u.errorUpdateCount>c.errorUpdateCount,isFetching:w,isRefetching:w&&!x,isLoadingError:_&&!R,isPaused:u.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:_&&R,isStale:my(e,n),refetch:this.refetch,promise:this.#o,isEnabled:Ks(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const F=Q=>{I.status==="error"?Q.reject(I.error):I.data!==void 0&&Q.resolve(I.data)},B=()=>{const Q=this.#o=I.promise=_b();F(Q)},U=this.#o;switch(U.status){case"pending":e.queryHash===t.queryHash&&F(U);break;case"fulfilled":(I.status==="error"||I.data!==U.value)&&B();break;case"rejected":(I.status!=="error"||I.error!==U.reason)&&B();break}}return I}updateResult(){const e=this.#n,n=this.createResult(this.#e,this.options);if(this.#s=this.#e.state,this.#i=this.options,this.#s.data!==void 0&&(this.#h=this.#e),kh(n,e))return;this.#n=n;const t=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,l=typeof s=="function"?s():s;if(l==="all"||!l&&!this.#m.size)return!0;const i=new Set(l??this.#m);return this.options.throwOnError&&i.add("error"),Object.keys(this.#n).some(o=>{const d=o;return this.#n[d]!==e[d]&&i.has(d)})};this.#j({listeners:t()})}#_(){const e=this.#t.getQueryCache().build(this.#t,this.options);if(e===this.#e)return;const n=this.#e;this.#e=e,this.#r=e.state,this.hasListeners()&&(n?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#x()}#j(e){jn.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(this.#n)}),this.#t.getQueryCache().notify({query:this.#e,type:"observerResultsUpdated"})})}};function X9(e,n){return Ks(n.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&n.retryOnMount===!1)}function jw(e,n){return X9(e,n)||e.state.data!==void 0&&Nb(e,n,n.refetchOnMount)}function Nb(e,n,t){if(Ks(n.enabled,e)!==!1&&Zi(n.staleTime,e)!=="static"){const s=typeof t=="function"?t(e):t;return s==="always"||s!==!1&&my(e,n)}return!1}function Nw(e,n,t,s){return(e!==n||Ks(s.enabled,e)===!1)&&(!t.suspense||e.state.status!=="error")&&my(e,t)}function my(e,n){return Ks(n.enabled,e)!==!1&&e.isStaleByTime(Zi(n.staleTime,e))}function Y9(e,n){return!kh(e.getCurrentResult(),n)}var Z9=class extends G4{constructor(e,n){super(e,n)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e){super.setOptions({...e,behavior:Rh()})}getOptimisticResult(e){return e.behavior=Rh(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,n){const{state:t}=e,s=super.createResult(e,n),{isFetching:l,isRefetching:i,isError:o,isRefetchError:d}=s,c=t.fetchMeta?.fetchMore?.direction,a=o&&c==="forward",u=l&&c==="forward",h=o&&c==="backward",f=l&&c==="backward";return{...s,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:W9(n,t.data),hasPreviousPage:Q9(n,t.data),isFetchNextPageError:a,isFetchingNextPage:u,isFetchPreviousPageError:h,isFetchingPreviousPage:f,isRefetchError:d&&!a&&!h,isRefetching:i&&!u&&!f}}},J9=class extends dc{#t;#e=void 0;#r;#n;constructor(n,t){super(),this.#t=n,this.setOptions(t),this.bindMethods(),this.#s()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){const t=this.options;this.options=this.#t.defaultMutationOptions(n),kh(this.options,t)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),t?.mutationKey&&this.options.mutationKey&&Go(t.mutationKey)!==Go(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(n){this.#s(),this.#i(n)}getCurrentResult(){return this.#e}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#s(),this.#i()}mutate(n,t){return this.#n=t,this.#r?.removeObserver(this),this.#r=this.#t.getMutationCache().build(this.#t,this.options),this.#r.addObserver(this),this.#r.execute(n)}#s(){const n=this.#r?.state??W4();this.#e={...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset}}#i(n){jn.batch(()=>{if(this.#n&&this.hasListeners()){const t=this.#e.variables,s=this.#e.context;n?.type==="success"?(this.#n.onSuccess?.(n.data,t,s),this.#n.onSettled?.(n.data,null,t,s)):n?.type==="error"&&(this.#n.onError?.(n.error,t,s),this.#n.onSettled?.(void 0,n.error,t,s))}this.listeners.forEach(t=>{t(this.#e)})})}},X4=H.createContext(void 0),Nt=e=>{const n=H.useContext(X4);if(!n)throw new Error("No QueryClient set, use QueryClientProvider to set one");return n},eE=({client:e,children:n})=>(H.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),r.jsx(X4.Provider,{value:e,children:n})),Y4=H.createContext(!1),tE=()=>H.useContext(Y4);Y4.Provider;function rE(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var nE=H.createContext(rE()),sE=()=>H.useContext(nE),aE=(e,n)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(n.isReset()||(e.retryOnMount=!1))},iE=e=>{H.useEffect(()=>{e.clearReset()},[e])},oE=({result:e,errorResetBoundary:n,throwOnError:t,query:s,suspense:l})=>e.isError&&!n.isReset()&&!e.isFetching&&s&&(l&&e.data===void 0||q4(t,[e.error,s])),lE=e=>{if(e.suspense){const n=s=>s==="static"?s:Math.max(s??1e3,1e3),t=e.staleTime;e.staleTime=typeof t=="function"?(...s)=>n(t(...s)):n(t),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},cE=(e,n)=>e.isLoading&&e.isFetching&&!n,dE=(e,n)=>e?.suspense&&n.isPending,Cw=(e,n,t)=>n.fetchOptimistic(e).catch(()=>{t.clearReset()});function Z4(e,n,t){const s=tE(),l=sE(),i=Nt(),o=i.defaultQueryOptions(e);i.getDefaultOptions().queries?._experimental_beforeQuery?.(o),o._optimisticResults=s?"isRestoring":"optimistic",lE(o),aE(o,l),iE(l);const d=!i.getQueryCache().get(o.queryHash),[c]=H.useState(()=>new n(i,o)),a=c.getOptimisticResult(o),u=!s&&e.subscribed!==!1;if(H.useSyncExternalStore(H.useCallback(h=>{const f=u?c.subscribe(jn.batchCalls(h)):Zn;return c.updateResult(),f},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),H.useEffect(()=>{c.setOptions(o)},[o,c]),dE(o,a))throw Cw(o,c,l);if(oE({result:a,errorResetBoundary:l,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw a.error;return i.getDefaultOptions().queries?._experimental_afterQuery?.(o,a),o.experimental_prefetchInRender&&!Qo&&cE(a,s)&&(d?Cw(o,c,l):i.getQueryCache().get(o.queryHash)?.promise)?.catch(Zn).finally(()=>{c.updateResult()}),o.notifyOnChangeProps?a:c.trackResult(a)}function or(e,n){return Z4(e,G4)}function Et(e,n){const t=Nt(),[s]=H.useState(()=>new J9(t,e));H.useEffect(()=>{s.setOptions(e)},[s,e]);const l=H.useSyncExternalStore(H.useCallback(o=>s.subscribe(jn.batchCalls(o)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),i=H.useCallback((o,d)=>{s.mutate(o,d).catch(Zn)},[s]);if(l.error&&q4(s.options.throwOnError,[l.error]))throw l.error;return{...l,mutate:i,mutateAsync:l.mutate}}function xa(e,n){return Z4(e,Z9)}/**
 * react-router v7.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var J4=e=>{throw TypeError(e)},uE=(e,n,t)=>n.has(e)||J4("Cannot "+t),jg=(e,n,t)=>(uE(e,n,"read from private field"),t?t.call(e):n.get(e)),fE=(e,n,t)=>n.has(e)?J4("Cannot add the same private member more than once"):n instanceof WeakSet?n.add(e):n.set(e,t),Sw="popstate";function hE(e={}){function n(s,l){let{pathname:i,search:o,hash:d}=s.location;return nu("",{pathname:i,search:o,hash:d},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(s,l){return typeof l=="string"?l:to(l)}return pE(n,t,null,e)}function yr(e,n){if(e===!1||e===null||typeof e>"u")throw new Error(n)}function sn(e,n){if(!e){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function mE(){return Math.random().toString(36).substring(2,10)}function kw(e,n){return{usr:e.state,key:e.key,idx:n}}function nu(e,n,t=null,s){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof n=="string"?oo(n):n,state:t,key:n&&n.key||s||mE()}}function to({pathname:e="/",search:n="",hash:t=""}){return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),t&&t!=="#"&&(e+=t.charAt(0)==="#"?t:"#"+t),e}function oo(e){let n={};if(e){let t=e.indexOf("#");t>=0&&(n.hash=e.substring(t),e=e.substring(0,t));let s=e.indexOf("?");s>=0&&(n.search=e.substring(s),e=e.substring(0,s)),e&&(n.pathname=e)}return n}function pE(e,n,t,s={}){let{window:l=document.defaultView,v5Compat:i=!1}=s,o=l.history,d="POP",c=null,a=u();a==null&&(a=0,o.replaceState({...o.state,idx:a},""));function u(){return(o.state||{idx:null}).idx}function h(){d="POP";let g=u(),w=g==null?null:g-a;a=g,c&&c({action:d,location:y.location,delta:w})}function f(g,w){d="PUSH";let x=nu(y.location,g,w);a=u()+1;let _=kw(x,a),j=y.createHref(x);try{o.pushState(_,"",j)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;l.location.assign(j)}i&&c&&c({action:d,location:y.location,delta:1})}function m(g,w){d="REPLACE";let x=nu(y.location,g,w);a=u();let _=kw(x,a),j=y.createHref(x);o.replaceState(_,"",j),i&&c&&c({action:d,location:y.location,delta:0})}function b(g){return ej(g)}let y={get action(){return d},get location(){return e(l,o)},listen(g){if(c)throw new Error("A history only accepts one active listener");return l.addEventListener(Sw,h),c=g,()=>{l.removeEventListener(Sw,h),c=null}},createHref(g){return n(l,g)},createURL:b,encodeLocation(g){let w=b(g);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:f,replace:m,go(g){return o.go(g)}};return y}function ej(e,n=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),yr(t,"No window.location.(origin|href) available to create URL");let s=typeof e=="string"?e:to(e);return s=s.replace(/ $/,"%20"),!n&&s.startsWith("//")&&(s=t+s),new URL(s,t)}var Gd,Ew=class{constructor(e){if(fE(this,Gd,new Map),e)for(let[n,t]of e)this.set(n,t)}get(e){if(jg(this,Gd).has(e))return jg(this,Gd).get(e);if(e.defaultValue!==void 0)return e.defaultValue;throw new Error("No value found for context")}set(e,n){jg(this,Gd).set(e,n)}};Gd=new WeakMap;var gE=new Set(["lazy","caseSensitive","path","id","index","children"]);function bE(e){return gE.has(e)}var yE=new Set(["lazy","caseSensitive","path","id","index","unstable_middleware","children"]);function xE(e){return yE.has(e)}function vE(e){return e.index===!0}function su(e,n,t=[],s={},l=!1){return e.map((i,o)=>{let d=[...t,String(o)],c=typeof i.id=="string"?i.id:d.join("-");if(yr(i.index!==!0||!i.children,"Cannot specify children on an index route"),yr(l||!s[c],`Found a route id collision on id "${c}".  Route id's must be globally unique within Data Router usages`),vE(i)){let a={...i,...n(i),id:c};return s[c]=a,a}else{let a={...i,...n(i),id:c,children:void 0};return s[c]=a,i.children&&(a.children=su(i.children,n,d,s,l)),a}})}function Gi(e,n,t="/"){return mh(e,n,t,!1)}function mh(e,n,t,s){let l=typeof n=="string"?oo(n):n,i=Ys(l.pathname||"/",t);if(i==null)return null;let o=tj(e);_E(o);let d=null;for(let c=0;d==null&&c<o.length;++c){let a=OE(i);d=AE(o[c],a,s)}return d}function wE(e,n){let{route:t,pathname:s,params:l}=e;return{id:t.id,pathname:s,params:l,data:n[t.id],handle:t.handle}}function tj(e,n=[],t=[],s=""){let l=(i,o,d)=>{let c={relativePath:d===void 0?i.path||"":d,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(yr(c.relativePath.startsWith(s),`Absolute route path "${c.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(s.length));let a=Da([s,c.relativePath]),u=t.concat(c);i.children&&i.children.length>0&&(yr(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${a}".`),tj(i.children,n,u,a)),!(i.path==null&&!i.index)&&n.push({path:a,score:RE(a,i.index),routesMeta:u})};return e.forEach((i,o)=>{if(i.path===""||!i.path?.includes("?"))l(i,o);else for(let d of rj(i.path))l(i,o,d)}),n}function rj(e){let n=e.split("/");if(n.length===0)return[];let[t,...s]=n,l=t.endsWith("?"),i=t.replace(/\?$/,"");if(s.length===0)return l?[i,""]:[i];let o=rj(s.join("/")),d=[];return d.push(...o.map(c=>c===""?i:[i,c].join("/"))),l&&d.push(...o),d.map(c=>e.startsWith("/")&&c===""?"/":c)}function _E(e){e.sort((n,t)=>n.score!==t.score?t.score-n.score:TE(n.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var jE=/^:[\w-]+$/,NE=3,CE=2,SE=1,kE=10,EE=-2,Rw=e=>e==="*";function RE(e,n){let t=e.split("/"),s=t.length;return t.some(Rw)&&(s+=EE),n&&(s+=CE),t.filter(l=>!Rw(l)).reduce((l,i)=>l+(jE.test(i)?NE:i===""?SE:kE),s)}function TE(e,n){return e.length===n.length&&e.slice(0,-1).every((s,l)=>s===n[l])?e[e.length-1]-n[n.length-1]:0}function AE(e,n,t=!1){let{routesMeta:s}=e,l={},i="/",o=[];for(let d=0;d<s.length;++d){let c=s[d],a=d===s.length-1,u=i==="/"?n:n.slice(i.length)||"/",h=Th({path:c.relativePath,caseSensitive:c.caseSensitive,end:a},u),f=c.route;if(!h&&a&&t&&!s[s.length-1].route.index&&(h=Th({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!h)return null;Object.assign(l,h.params),o.push({params:l,pathname:Da([i,h.pathname]),pathnameBase:FE(Da([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Da([i,h.pathnameBase]))}return o}function Th(e,n){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[t,s]=ME(e.path,e.caseSensitive,e.end),l=n.match(t);if(!l)return null;let i=l[0],o=i.replace(/(.)\/+$/,"$1"),d=l.slice(1);return{params:s.reduce((a,{paramName:u,isOptional:h},f)=>{if(u==="*"){let b=d[f]||"";o=i.slice(0,i.length-b.length).replace(/(.)\/+$/,"$1")}const m=d[f];return h&&!m?a[u]=void 0:a[u]=(m||"").replace(/%2F/g,"/"),a},{}),pathname:i,pathnameBase:o,pattern:e}}function ME(e,n=!1,t=!0){sn(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let s=[],l="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,d,c)=>(s.push({paramName:d,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),l+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?l+="\\/*$":e!==""&&e!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,n?void 0:"i"),s]}function OE(e){try{return e.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return sn(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${n}).`),e}}function Ys(e,n){if(n==="/")return e;if(!e.toLowerCase().startsWith(n.toLowerCase()))return null;let t=n.endsWith("/")?n.length-1:n.length,s=e.charAt(t);return s&&s!=="/"?null:e.slice(t)||"/"}function DE({basename:e,pathname:n}){return n==="/"?e:Da([e,n])}function PE(e,n="/"){let{pathname:t,search:s="",hash:l=""}=typeof e=="string"?oo(e):e;return{pathname:t?t.startsWith("/")?t:IE(t,n):n,search:LE(s),hash:zE(l)}}function IE(e,n){let t=n.replace(/\/+$/,"").split("/");return e.split("/").forEach(l=>{l===".."?t.length>1&&t.pop():l!=="."&&t.push(l)}),t.length>1?t.join("/"):"/"}function Ng(e,n,t,s){return`Cannot include a '${e}' character in a manually specified \`to.${n}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function nj(e){return e.filter((n,t)=>t===0||n.route.path&&n.route.path.length>0)}function dm(e){let n=nj(e);return n.map((t,s)=>s===n.length-1?t.pathname:t.pathnameBase)}function um(e,n,t,s=!1){let l;typeof e=="string"?l=oo(e):(l={...e},yr(!l.pathname||!l.pathname.includes("?"),Ng("?","pathname","search",l)),yr(!l.pathname||!l.pathname.includes("#"),Ng("#","pathname","hash",l)),yr(!l.search||!l.search.includes("#"),Ng("#","search","hash",l)));let i=e===""||l.pathname==="",o=i?"/":l.pathname,d;if(o==null)d=t;else{let h=n.length-1;if(!s&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;l.pathname=f.join("/")}d=h>=0?n[h]:"/"}let c=PE(l,d),a=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(a||u)&&(c.pathname+="/"),c}var Da=e=>e.join("/").replace(/\/\/+/g,"/"),FE=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),LE=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,zE=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,Ah=class{constructor(e,n,t,s=!1){this.status=e,this.statusText=n||"",this.internal=s,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function au(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var sj=["POST","PUT","PATCH","DELETE"],BE=new Set(sj),qE=["GET",...sj],$E=new Set(qE),UE=new Set([301,302,303,307,308]),HE=new Set([307,308]),Cg={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},VE={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Nd={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},KE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,py=e=>KE.test(e),WE=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),aj="remix-router-transitions",ij=Symbol("ResetLoaderData");function QE(e){const n=e.window?e.window:typeof window<"u"?window:void 0,t=typeof n<"u"&&typeof n.document<"u"&&typeof n.document.createElement<"u";yr(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let s=e.hydrationRouteProperties||[],l=e.mapRouteProperties||WE,i={},o=su(e.routes,l,void 0,i),d,c=e.basename||"/",a=e.dataStrategy||JE,u={unstable_middleware:!1,...e.future},h=null,f=new Set,m=null,b=null,y=null,g=e.hydrationData!=null,w=Gi(o,e.history.location,c),x=!1,_=null,j;if(w==null&&!e.patchRoutesOnNavigation){let be=Vs(404,{pathname:e.history.location.pathname}),{matches:xe,route:Ee}=qw(o);j=!0,w=xe,_={[Ee.id]:be}}else if(w&&!e.hydrationData&&$t(w,o,e.history.location.pathname).active&&(w=null),w)if(w.some(be=>be.route.lazy))j=!1;else if(!w.some(be=>be.route.loader))j=!0;else{let be=e.hydrationData?e.hydrationData.loaderData:null,xe=e.hydrationData?e.hydrationData.errors:null;if(xe){let Ee=w.findIndex(qe=>xe[qe.route.id]!==void 0);j=w.slice(0,Ee+1).every(qe=>!Sb(qe.route,be,xe))}else j=w.every(Ee=>!Sb(Ee.route,be,xe))}else{j=!1,w=[];let be=$t(null,o,e.history.location.pathname);be.active&&be.matches&&(x=!0,w=be.matches)}let R,M={historyAction:e.history.action,location:e.history.location,matches:w,initialized:j,navigation:Cg,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||_,fetchers:new Map,blockers:new Map},I="POP",F=!1,B,U=!1,Q=new Map,K=null,T=!1,P=!1,A=new Set,N=new Map,k=0,S=-1,E=new Map,O=new Set,L=new Map,z=new Map,G=new Set,Z=new Map,ee,W=null;function J(){if(h=e.history.listen(({action:be,location:xe,delta:Ee})=>{if(ee){ee(),ee=void 0;return}sn(Z.size===0||Ee!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let qe=Qt({currentLocation:M.location,nextLocation:xe,historyAction:be});if(qe&&Ee!=null){let Oe=new Promise(he=>{ee=he});e.history.go(Ee*-1),pt(qe,{state:"blocked",location:xe,proceed(){pt(qe,{state:"proceeding",proceed:void 0,reset:void 0,location:xe}),Oe.then(()=>e.history.go(Ee))},reset(){let he=new Map(M.blockers);he.set(qe,Nd),Y({blockers:he})}});return}return ce(be,xe)}),t){dR(n,Q);let be=()=>uR(n,Q);n.addEventListener("pagehide",be),K=()=>n.removeEventListener("pagehide",be)}return M.initialized||ce("POP",M.location,{initialHydration:!0}),R}function $(){h&&h(),K&&K(),f.clear(),B&&B.abort(),M.fetchers.forEach((be,xe)=>Be(xe)),M.blockers.forEach((be,xe)=>jt(xe))}function q(be){return f.add(be),()=>f.delete(be)}function Y(be,xe={}){be.matches&&(be.matches=be.matches.map(Oe=>{let he=i[Oe.route.id],ye=Oe.route;return ye.element!==he.element||ye.errorElement!==he.errorElement||ye.hydrateFallbackElement!==he.hydrateFallbackElement?{...Oe,route:he}:Oe})),M={...M,...be};let Ee=[],qe=[];M.fetchers.forEach((Oe,he)=>{Oe.state==="idle"&&(G.has(he)?Ee.push(he):qe.push(he))}),G.forEach(Oe=>{!M.fetchers.has(Oe)&&!N.has(Oe)&&Ee.push(Oe)}),[...f].forEach(Oe=>Oe(M,{deletedFetchers:Ee,viewTransitionOpts:xe.viewTransitionOpts,flushSync:xe.flushSync===!0})),Ee.forEach(Oe=>Be(Oe)),qe.forEach(Oe=>M.fetchers.delete(Oe))}function se(be,xe,{flushSync:Ee}={}){let qe=M.actionData!=null&&M.navigation.formMethod!=null&&ls(M.navigation.formMethod)&&M.navigation.state==="loading"&&be.state?._isRedirect!==!0,Oe;xe.actionData?Object.keys(xe.actionData).length>0?Oe=xe.actionData:Oe=null:qe?Oe=M.actionData:Oe=null;let he=xe.loaderData?zw(M.loaderData,xe.loaderData,xe.matches||[],xe.errors):M.loaderData,ye=M.blockers;ye.size>0&&(ye=new Map(ye),ye.forEach((me,He)=>ye.set(He,Nd)));let Te=T?!1:Rt(be,xe.matches||M.matches),Fe=F===!0||M.navigation.formMethod!=null&&ls(M.navigation.formMethod)&&be.state?._isRedirect!==!0;d&&(o=d,d=void 0),T||I==="POP"||(I==="PUSH"?e.history.push(be,be.state):I==="REPLACE"&&e.history.replace(be,be.state));let nt;if(I==="POP"){let me=Q.get(M.location.pathname);me&&me.has(be.pathname)?nt={currentLocation:M.location,nextLocation:be}:Q.has(be.pathname)&&(nt={currentLocation:be,nextLocation:M.location})}else if(U){let me=Q.get(M.location.pathname);me?me.add(be.pathname):(me=new Set([be.pathname]),Q.set(M.location.pathname,me)),nt={currentLocation:M.location,nextLocation:be}}Y({...xe,actionData:Oe,loaderData:he,historyAction:I,location:be,initialized:!0,navigation:Cg,revalidation:"idle",restoreScrollPosition:Te,preventScrollReset:Fe,blockers:ye},{viewTransitionOpts:nt,flushSync:Ee===!0}),I="POP",F=!1,U=!1,T=!1,P=!1,W?.resolve(),W=null}async function oe(be,xe){if(typeof be=="number"){e.history.go(be);return}let Ee=Cb(M.location,M.matches,c,be,xe?.fromRouteId,xe?.relative),{path:qe,submission:Oe,error:he}=Tw(!1,Ee,xe),ye=M.location,Te=nu(M.location,qe,xe&&xe.state);Te={...Te,...e.history.encodeLocation(Te)};let Fe=xe&&xe.replace!=null?xe.replace:void 0,nt="PUSH";Fe===!0?nt="REPLACE":Fe===!1||Oe!=null&&ls(Oe.formMethod)&&Oe.formAction===M.location.pathname+M.location.search&&(nt="REPLACE");let me=xe&&"preventScrollReset"in xe?xe.preventScrollReset===!0:void 0,He=(xe&&xe.flushSync)===!0,at=Qt({currentLocation:ye,nextLocation:Te,historyAction:nt});if(at){pt(at,{state:"blocked",location:Te,proceed(){pt(at,{state:"proceeding",proceed:void 0,reset:void 0,location:Te}),oe(be,xe)},reset(){let Ze=new Map(M.blockers);Ze.set(at,Nd),Y({blockers:Ze})}});return}await ce(nt,Te,{submission:Oe,pendingError:he,preventScrollReset:me,replace:xe&&xe.replace,enableViewTransition:xe&&xe.viewTransition,flushSync:He})}function ae(){W||(W=fR()),ke(),Y({revalidation:"loading"});let be=W.promise;return M.navigation.state==="submitting"?be:M.navigation.state==="idle"?(ce(M.historyAction,M.location,{startUninterruptedRevalidation:!0}),be):(ce(I||M.historyAction,M.navigation.location,{overrideNavigation:M.navigation,enableViewTransition:U===!0}),be)}async function ce(be,xe,Ee){B&&B.abort(),B=null,I=be,T=(Ee&&Ee.startUninterruptedRevalidation)===!0,kt(M.location,M.matches),F=(Ee&&Ee.preventScrollReset)===!0,U=(Ee&&Ee.enableViewTransition)===!0;let qe=d||o,Oe=Ee&&Ee.overrideNavigation,he=Ee?.initialHydration&&M.matches&&M.matches.length>0&&!x?M.matches:Gi(qe,xe,c),ye=(Ee&&Ee.flushSync)===!0;if(he&&M.initialized&&!P&&aR(M.location,xe)&&!(Ee&&Ee.submission&&ls(Ee.submission.formMethod))){se(xe,{matches:he},{flushSync:ye});return}let Te=$t(he,qe,xe.pathname);if(Te.active&&Te.matches&&(he=Te.matches),!he){let{error:vt,notFoundMatches:mt,route:Ut}=sr(xe.pathname);se(xe,{matches:mt,loaderData:{},errors:{[Ut.id]:vt}},{flushSync:ye});return}B=new AbortController;let Fe=Ul(e.history,xe,B.signal,Ee&&Ee.submission),nt=new Ew(e.unstable_getContext?await e.unstable_getContext():void 0),me;if(Ee&&Ee.pendingError)me=[Io(he).route.id,{type:"error",error:Ee.pendingError}];else if(Ee&&Ee.submission&&ls(Ee.submission.formMethod)){let vt=await we(Fe,xe,Ee.submission,he,nt,Te.active,Ee&&Ee.initialHydration===!0,{replace:Ee.replace,flushSync:ye});if(vt.shortCircuited)return;if(vt.pendingActionResult){let[mt,Ut]=vt.pendingActionResult;if(As(Ut)&&au(Ut.error)&&Ut.error.status===404){B=null,se(xe,{matches:vt.matches,loaderData:{},errors:{[mt]:Ut.error}});return}}he=vt.matches||he,me=vt.pendingActionResult,Oe=Sg(xe,Ee.submission),ye=!1,Te.active=!1,Fe=Ul(e.history,Fe.url,Fe.signal)}let{shortCircuited:He,matches:at,loaderData:Ze,errors:Ce}=await fe(Fe,xe,he,nt,Te.active,Oe,Ee&&Ee.submission,Ee&&Ee.fetcherSubmission,Ee&&Ee.replace,Ee&&Ee.initialHydration===!0,ye,me);He||(B=null,se(xe,{matches:at||he,...Bw(me),loaderData:Ze,errors:Ce}))}async function we(be,xe,Ee,qe,Oe,he,ye,Te={}){ke();let Fe=lR(xe,Ee);if(Y({navigation:Fe},{flushSync:Te.flushSync===!0}),he){let He=await Ht(qe,xe.pathname,be.signal);if(He.type==="aborted")return{shortCircuited:!0};if(He.type==="error"){let at=Io(He.partialMatches).route.id;return{matches:He.partialMatches,pendingActionResult:[at,{type:"error",error:He.error}]}}else if(He.matches)qe=He.matches;else{let{notFoundMatches:at,error:Ze,route:Ce}=sr(xe.pathname);return{matches:at,pendingActionResult:[Ce.id,{type:"error",error:Ze}]}}}let nt,me=ph(qe,xe);if(!me.route.action&&!me.route.lazy)nt={type:"error",error:Vs(405,{method:be.method,pathname:xe.pathname,routeId:me.route.id})};else{let He=Ql(l,i,be,qe,me,ye?[]:s,Oe),at=await _e(be,He,Oe,null);if(nt=at[me.route.id],!nt){for(let Ze of qe)if(at[Ze.route.id]){nt=at[Ze.route.id];break}}if(be.signal.aborted)return{shortCircuited:!0}}if(Fo(nt)){let He;return Te&&Te.replace!=null?He=Te.replace:He=Iw(nt.response.headers.get("Location"),new URL(be.url),c)===M.location.pathname+M.location.search,await ue(be,nt,!0,{submission:Ee,replace:He}),{shortCircuited:!0}}if(As(nt)){let He=Io(qe,me.route.id);return(Te&&Te.replace)!==!0&&(I="PUSH"),{matches:qe,pendingActionResult:[He.route.id,nt,me.route.id]}}return{matches:qe,pendingActionResult:[me.route.id,nt]}}async function fe(be,xe,Ee,qe,Oe,he,ye,Te,Fe,nt,me,He){let at=he||Sg(xe,ye),Ze=ye||Te||Uw(at),Ce=!T&&!nt;if(Oe){if(Ce){let ot=re(He);Y({navigation:at,...ot!==void 0?{actionData:ot}:{}},{flushSync:me})}let We=await Ht(Ee,xe.pathname,be.signal);if(We.type==="aborted")return{shortCircuited:!0};if(We.type==="error"){let ot=Io(We.partialMatches).route.id;return{matches:We.partialMatches,loaderData:{},errors:{[ot]:We.error}}}else if(We.matches)Ee=We.matches;else{let{error:ot,notFoundMatches:Jt,route:Ft}=sr(xe.pathname);return{matches:Jt,loaderData:{},errors:{[Ft.id]:ot}}}}let vt=d||o,{dsMatches:mt,revalidatingFetchers:Ut}=Aw(be,qe,l,i,e.history,M,Ee,Ze,xe,nt?[]:s,nt===!0,P,A,G,L,O,vt,c,e.patchRoutesOnNavigation!=null,He);if(S=++k,!e.dataStrategy&&!mt.some(We=>We.shouldLoad)&&Ut.length===0){let We=ut();return se(xe,{matches:Ee,loaderData:{},errors:He&&As(He[1])?{[He[0]]:He[1].error}:null,...Bw(He),...We?{fetchers:new Map(M.fetchers)}:{}},{flushSync:me}),{shortCircuited:!0}}if(Ce){let We={};if(!Oe){We.navigation=at;let ot=re(He);ot!==void 0&&(We.actionData=ot)}Ut.length>0&&(We.fetchers=ge(Ut)),Y(We,{flushSync:me})}Ut.forEach(We=>{ft(We.key),We.controller&&N.set(We.key,We.controller)});let dr=()=>Ut.forEach(We=>ft(We.key));B&&B.signal.addEventListener("abort",dr);let{loaderResults:jr,fetcherResults:ar}=await je(mt,Ut,be,qe);if(be.signal.aborted)return{shortCircuited:!0};B&&B.signal.removeEventListener("abort",dr),Ut.forEach(We=>N.delete(We.key));let ur=eh(jr);if(ur)return await ue(be,ur.result,!0,{replace:Fe}),{shortCircuited:!0};if(ur=eh(ar),ur)return O.add(ur.key),await ue(be,ur.result,!0,{replace:Fe}),{shortCircuited:!0};let{loaderData:pe,errors:Ae}=Lw(M,Ee,jr,He,Ut,ar);nt&&M.errors&&(Ae={...M.errors,...Ae});let Ge=ut(),Je=lt(S),Ct=Ge||Je||Ut.length>0;return{matches:Ee,loaderData:pe,errors:Ae,...Ct?{fetchers:new Map(M.fetchers)}:{}}}function re(be){if(be&&!As(be[1]))return{[be[0]]:be[1].data};if(M.actionData)return Object.keys(M.actionData).length===0?null:M.actionData}function ge(be){return be.forEach(xe=>{let Ee=M.fetchers.get(xe.key),qe=Cd(void 0,Ee?Ee.data:void 0);M.fetchers.set(xe.key,qe)}),new Map(M.fetchers)}async function le(be,xe,Ee,qe){ft(be);let Oe=(qe&&qe.flushSync)===!0,he=d||o,ye=Cb(M.location,M.matches,c,Ee,xe,qe?.relative),Te=Gi(he,ye,c),Fe=$t(Te,he,ye);if(Fe.active&&Fe.matches&&(Te=Fe.matches),!Te){Ue(be,xe,Vs(404,{pathname:ye}),{flushSync:Oe});return}let{path:nt,submission:me,error:He}=Tw(!0,ye,qe);if(He){Ue(be,xe,He,{flushSync:Oe});return}let at=new Ew(e.unstable_getContext?await e.unstable_getContext():void 0),Ze=(qe&&qe.preventScrollReset)===!0;if(me&&ls(me.formMethod)){await te(be,xe,nt,Te,at,Fe.active,Oe,Ze,me);return}L.set(be,{routeId:xe,path:nt}),await ie(be,xe,nt,Te,at,Fe.active,Oe,Ze,me)}async function te(be,xe,Ee,qe,Oe,he,ye,Te,Fe){ke(),L.delete(be);let nt=M.fetchers.get(be);Le(be,cR(Fe,nt),{flushSync:ye});let me=new AbortController,He=Ul(e.history,Ee,me.signal,Fe);if(he){let Tt=await Ht(qe,new URL(He.url).pathname,He.signal,be);if(Tt.type==="aborted")return;if(Tt.type==="error"){Ue(be,xe,Tt.error,{flushSync:ye});return}else if(Tt.matches)qe=Tt.matches;else{Ue(be,xe,Vs(404,{pathname:Ee}),{flushSync:ye});return}}let at=ph(qe,Ee);if(!at.route.action&&!at.route.lazy){let Tt=Vs(405,{method:Fe.formMethod,pathname:Ee,routeId:xe});Ue(be,xe,Tt,{flushSync:ye});return}N.set(be,me);let Ze=k,Ce=Ql(l,i,He,qe,at,s,Oe),mt=(await _e(He,Ce,Oe,be))[at.route.id];if(He.signal.aborted){N.get(be)===me&&N.delete(be);return}if(G.has(be)){if(Fo(mt)||As(mt)){Le(be,Ki(void 0));return}}else{if(Fo(mt))if(N.delete(be),S>Ze){Le(be,Ki(void 0));return}else return O.add(be),Le(be,Cd(Fe)),ue(He,mt,!1,{fetcherSubmission:Fe,preventScrollReset:Te});if(As(mt)){Ue(be,xe,mt.error);return}}let Ut=M.navigation.location||M.location,dr=Ul(e.history,Ut,me.signal),jr=d||o,ar=M.navigation.state!=="idle"?Gi(jr,M.navigation.location,c):M.matches;yr(ar,"Didn't find any matches after fetcher action");let ur=++k;E.set(be,ur);let pe=Cd(Fe,mt.data);M.fetchers.set(be,pe);let{dsMatches:Ae,revalidatingFetchers:Ge}=Aw(dr,Oe,l,i,e.history,M,ar,Fe,Ut,s,!1,P,A,G,L,O,jr,c,e.patchRoutesOnNavigation!=null,[at.route.id,mt]);Ge.filter(Tt=>Tt.key!==be).forEach(Tt=>{let At=Tt.key,xr=M.fetchers.get(At),vr=Cd(void 0,xr?xr.data:void 0);M.fetchers.set(At,vr),ft(At),Tt.controller&&N.set(At,Tt.controller)}),Y({fetchers:new Map(M.fetchers)});let Je=()=>Ge.forEach(Tt=>ft(Tt.key));me.signal.addEventListener("abort",Je);let{loaderResults:Ct,fetcherResults:We}=await je(Ae,Ge,dr,Oe);if(me.signal.aborted)return;if(me.signal.removeEventListener("abort",Je),E.delete(be),N.delete(be),Ge.forEach(Tt=>N.delete(Tt.key)),M.fetchers.has(be)){let Tt=Ki(mt.data);M.fetchers.set(be,Tt)}let ot=eh(Ct);if(ot)return ue(dr,ot.result,!1,{preventScrollReset:Te});if(ot=eh(We),ot)return O.add(ot.key),ue(dr,ot.result,!1,{preventScrollReset:Te});let{loaderData:Jt,errors:Ft}=Lw(M,ar,Ct,void 0,Ge,We);lt(ur),M.navigation.state==="loading"&&ur>S?(yr(I,"Expected pending action"),B&&B.abort(),se(M.navigation.location,{matches:ar,loaderData:Jt,errors:Ft,fetchers:new Map(M.fetchers)})):(Y({errors:Ft,loaderData:zw(M.loaderData,Jt,ar,Ft),fetchers:new Map(M.fetchers)}),P=!1)}async function ie(be,xe,Ee,qe,Oe,he,ye,Te,Fe){let nt=M.fetchers.get(be);Le(be,Cd(Fe,nt?nt.data:void 0),{flushSync:ye});let me=new AbortController,He=Ul(e.history,Ee,me.signal);if(he){let Ut=await Ht(qe,new URL(He.url).pathname,He.signal,be);if(Ut.type==="aborted")return;if(Ut.type==="error"){Ue(be,xe,Ut.error,{flushSync:ye});return}else if(Ut.matches)qe=Ut.matches;else{Ue(be,xe,Vs(404,{pathname:Ee}),{flushSync:ye});return}}let at=ph(qe,Ee);N.set(be,me);let Ze=k,Ce=Ql(l,i,He,qe,at,s,Oe),mt=(await _e(He,Ce,Oe,be))[at.route.id];if(N.get(be)===me&&N.delete(be),!He.signal.aborted){if(G.has(be)){Le(be,Ki(void 0));return}if(Fo(mt))if(S>Ze){Le(be,Ki(void 0));return}else{O.add(be),await ue(He,mt,!1,{preventScrollReset:Te});return}if(As(mt)){Ue(be,xe,mt.error);return}Le(be,Ki(mt.data))}}async function ue(be,xe,Ee,{submission:qe,fetcherSubmission:Oe,preventScrollReset:he,replace:ye}={}){xe.response.headers.has("X-Remix-Revalidate")&&(P=!0);let Te=xe.response.headers.get("Location");yr(Te,"Expected a Location header on the redirect Response"),Te=Iw(Te,new URL(be.url),c);let Fe=nu(M.location,Te,{_isRedirect:!0});if(t){let Ce=!1;if(xe.response.headers.has("X-Remix-Reload-Document"))Ce=!0;else if(py(Te)){const vt=ej(Te,!0);Ce=vt.origin!==n.location.origin||Ys(vt.pathname,c)==null}if(Ce){ye?n.location.replace(Te):n.location.assign(Te);return}}B=null;let nt=ye===!0||xe.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:me,formAction:He,formEncType:at}=M.navigation;!qe&&!Oe&&me&&He&&at&&(qe=Uw(M.navigation));let Ze=qe||Oe;if(HE.has(xe.response.status)&&Ze&&ls(Ze.formMethod))await ce(nt,Fe,{submission:{...Ze,formAction:Te},preventScrollReset:he||F,enableViewTransition:Ee?U:void 0});else{let Ce=Sg(Fe,qe);await ce(nt,Fe,{overrideNavigation:Ce,fetcherSubmission:Oe,preventScrollReset:he||F,enableViewTransition:Ee?U:void 0})}}async function _e(be,xe,Ee,qe){let Oe,he={};try{Oe=await eR(a,be,xe,qe,Ee,!1)}catch(ye){return xe.filter(Te=>Te.shouldLoad).forEach(Te=>{he[Te.route.id]={type:"error",error:ye}}),he}if(be.signal.aborted)return he;for(let[ye,Te]of Object.entries(Oe))if(iR(Te)){let Fe=Te.result;he[ye]={type:"redirect",response:nR(Fe,be,ye,xe,c)}}else he[ye]=await rR(Te);return he}async function je(be,xe,Ee,qe){let Oe=_e(Ee,be,qe,null),he=Promise.all(xe.map(async Fe=>{if(Fe.matches&&Fe.match&&Fe.request&&Fe.controller){let me=(await _e(Fe.request,Fe.matches,qe,Fe.key))[Fe.match.route.id];return{[Fe.key]:me}}else return Promise.resolve({[Fe.key]:{type:"error",error:Vs(404,{pathname:Fe.path})}})})),ye=await Oe,Te=(await he).reduce((Fe,nt)=>Object.assign(Fe,nt),{});return{loaderResults:ye,fetcherResults:Te}}function ke(){P=!0,L.forEach((be,xe)=>{N.has(xe)&&A.add(xe),ft(xe)})}function Le(be,xe,Ee={}){M.fetchers.set(be,xe),Y({fetchers:new Map(M.fetchers)},{flushSync:(Ee&&Ee.flushSync)===!0})}function Ue(be,xe,Ee,qe={}){let Oe=Io(M.matches,xe);Be(be),Y({errors:{[Oe.route.id]:Ee},fetchers:new Map(M.fetchers)},{flushSync:(qe&&qe.flushSync)===!0})}function Qe(be){return z.set(be,(z.get(be)||0)+1),G.has(be)&&G.delete(be),M.fetchers.get(be)||VE}function Be(be){let xe=M.fetchers.get(be);N.has(be)&&!(xe&&xe.state==="loading"&&E.has(be))&&ft(be),L.delete(be),E.delete(be),O.delete(be),G.delete(be),A.delete(be),M.fetchers.delete(be)}function ct(be){let xe=(z.get(be)||0)-1;xe<=0?(z.delete(be),G.add(be)):z.set(be,xe),Y({fetchers:new Map(M.fetchers)})}function ft(be){let xe=N.get(be);xe&&(xe.abort(),N.delete(be))}function _t(be){for(let xe of be){let Ee=Qe(xe),qe=Ki(Ee.data);M.fetchers.set(xe,qe)}}function ut(){let be=[],xe=!1;for(let Ee of O){let qe=M.fetchers.get(Ee);yr(qe,`Expected fetcher: ${Ee}`),qe.state==="loading"&&(O.delete(Ee),be.push(Ee),xe=!0)}return _t(be),xe}function lt(be){let xe=[];for(let[Ee,qe]of E)if(qe<be){let Oe=M.fetchers.get(Ee);yr(Oe,`Expected fetcher: ${Ee}`),Oe.state==="loading"&&(ft(Ee),E.delete(Ee),xe.push(Ee))}return _t(xe),xe.length>0}function ht(be,xe){let Ee=M.blockers.get(be)||Nd;return Z.get(be)!==xe&&Z.set(be,xe),Ee}function jt(be){M.blockers.delete(be),Z.delete(be)}function pt(be,xe){let Ee=M.blockers.get(be)||Nd;yr(Ee.state==="unblocked"&&xe.state==="blocked"||Ee.state==="blocked"&&xe.state==="blocked"||Ee.state==="blocked"&&xe.state==="proceeding"||Ee.state==="blocked"&&xe.state==="unblocked"||Ee.state==="proceeding"&&xe.state==="unblocked",`Invalid blocker state transition: ${Ee.state} -> ${xe.state}`);let qe=new Map(M.blockers);qe.set(be,xe),Y({blockers:qe})}function Qt({currentLocation:be,nextLocation:xe,historyAction:Ee}){if(Z.size===0)return;Z.size>1&&sn(!1,"A router only supports one blocker at a time");let qe=Array.from(Z.entries()),[Oe,he]=qe[qe.length-1],ye=M.blockers.get(Oe);if(!(ye&&ye.state==="proceeding")&&he({currentLocation:be,nextLocation:xe,historyAction:Ee}))return Oe}function sr(be){let xe=Vs(404,{pathname:be}),Ee=d||o,{matches:qe,route:Oe}=qw(Ee);return{notFoundMatches:qe,route:Oe,error:xe}}function Ot(be,xe,Ee){if(m=be,y=xe,b=Ee||null,!g&&M.navigation===Cg){g=!0;let qe=Rt(M.location,M.matches);qe!=null&&Y({restoreScrollPosition:qe})}return()=>{m=null,y=null,b=null}}function Xt(be,xe){return b&&b(be,xe.map(qe=>wE(qe,M.loaderData)))||be.key}function kt(be,xe){if(m&&y){let Ee=Xt(be,xe);m[Ee]=y()}}function Rt(be,xe){if(m){let Ee=Xt(be,xe),qe=m[Ee];if(typeof qe=="number")return qe}return null}function $t(be,xe,Ee){if(e.patchRoutesOnNavigation)if(be){if(Object.keys(be[0].params).length>0)return{active:!0,matches:mh(xe,Ee,c,!0)}}else return{active:!0,matches:mh(xe,Ee,c,!0)||[]};return{active:!1,matches:null}}async function Ht(be,xe,Ee,qe){if(!e.patchRoutesOnNavigation)return{type:"success",matches:be};let Oe=be;for(;;){let he=d==null,ye=d||o,Te=i;try{await e.patchRoutesOnNavigation({signal:Ee,path:xe,matches:Oe,fetcherKey:qe,patch:(me,He)=>{Ee.aborted||Mw(me,He,ye,Te,l,!1)}})}catch(me){return{type:"error",error:me,partialMatches:Oe}}finally{he&&!Ee.aborted&&(o=[...o])}if(Ee.aborted)return{type:"aborted"};let Fe=Gi(ye,xe,c);if(Fe)return{type:"success",matches:Fe};let nt=mh(ye,xe,c,!0);if(!nt||Oe.length===nt.length&&Oe.every((me,He)=>me.route.id===nt[He].route.id))return{type:"success",matches:null};Oe=nt}}function xt(be){i={},d=su(be,l,void 0,i)}function Mt(be,xe,Ee=!1){let qe=d==null;Mw(be,xe,d||o,i,l,Ee),qe&&(o=[...o],Y({}))}return R={get basename(){return c},get future(){return u},get state(){return M},get routes(){return o},get window(){return n},initialize:J,subscribe:q,enableScrollRestoration:Ot,navigate:oe,fetch:le,revalidate:ae,createHref:be=>e.history.createHref(be),encodeLocation:be=>e.history.encodeLocation(be),getFetcher:Qe,deleteFetcher:ct,dispose:$,getBlocker:ht,deleteBlocker:jt,patchRoutes:Mt,_internalFetchControllers:N,_internalSetRoutes:xt,_internalSetStateDoNotUseOrYouWillBreakYourApp(be){Y(be)}},R}function GE(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function Cb(e,n,t,s,l,i){let o,d;if(l){o=[];for(let a of n)if(o.push(a),a.route.id===l){d=a;break}}else o=n,d=n[n.length-1];let c=um(s||".",dm(o),Ys(e.pathname,t)||e.pathname,i==="path");if(s==null&&(c.search=e.search,c.hash=e.hash),(s==null||s===""||s===".")&&d){let a=gy(c.search);if(d.route.index&&!a)c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index";else if(!d.route.index&&a){let u=new URLSearchParams(c.search),h=u.getAll("index");u.delete("index"),h.filter(m=>m).forEach(m=>u.append("index",m));let f=u.toString();c.search=f?`?${f}`:""}}return t!=="/"&&(c.pathname=DE({basename:t,pathname:c.pathname})),to(c)}function Tw(e,n,t){if(!t||!GE(t))return{path:n};if(t.formMethod&&!oR(t.formMethod))return{path:n,error:Vs(405,{method:t.formMethod})};let s=()=>({path:n,error:Vs(400,{type:"invalid-body"})}),i=(t.formMethod||"get").toUpperCase(),o=fj(n);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!ls(i))return s();let h=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((f,[m,b])=>`${f}${m}=${b}
`,""):String(t.body);return{path:n,submission:{formMethod:i,formAction:o,formEncType:t.formEncType,formData:void 0,json:void 0,text:h}}}else if(t.formEncType==="application/json"){if(!ls(i))return s();try{let h=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:n,submission:{formMethod:i,formAction:o,formEncType:t.formEncType,formData:void 0,json:h,text:void 0}}}catch{return s()}}}yr(typeof FormData=="function","FormData is not available in this environment");let d,c;if(t.formData)d=Eb(t.formData),c=t.formData;else if(t.body instanceof FormData)d=Eb(t.body),c=t.body;else if(t.body instanceof URLSearchParams)d=t.body,c=Fw(d);else if(t.body==null)d=new URLSearchParams,c=new FormData;else try{d=new URLSearchParams(t.body),c=Fw(d)}catch{return s()}let a={formMethod:i,formAction:o,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(ls(a.formMethod))return{path:n,submission:a};let u=oo(n);return e&&u.search&&gy(u.search)&&d.append("index",""),u.search=`?${d}`,{path:to(u),submission:a}}function Aw(e,n,t,s,l,i,o,d,c,a,u,h,f,m,b,y,g,w,x,_){let j=_?As(_[1])?_[1].error:_[1].data:void 0,R=l.createURL(i.location),M=l.createURL(c),I;if(u&&i.errors){let T=Object.keys(i.errors)[0];I=o.findIndex(P=>P.route.id===T)}else if(_&&As(_[1])){let T=_[0];I=o.findIndex(P=>P.route.id===T)-1}let F=_?_[1].statusCode:void 0,B=F&&F>=400,U={currentUrl:R,currentParams:i.matches[0]?.params||{},nextUrl:M,nextParams:o[0].params,...d,actionResult:j,actionStatus:F},Q=o.map((T,P)=>{let{route:A}=T,N=null;if(I!=null&&P>I?N=!1:A.lazy?N=!0:A.loader==null?N=!1:u?N=Sb(A,i.loaderData,i.errors):XE(i.loaderData,i.matches[P],T)&&(N=!0),N!==null)return kb(t,s,e,T,a,n,N);let k=B?!1:h||R.pathname+R.search===M.pathname+M.search||R.search!==M.search||YE(i.matches[P],T),S={...U,defaultShouldRevalidate:k},E=Mh(T,S);return kb(t,s,e,T,a,n,E,S)}),K=[];return b.forEach((T,P)=>{if(u||!o.some(z=>z.route.id===T.routeId)||m.has(P))return;let A=i.fetchers.get(P),N=A&&A.state!=="idle"&&A.data===void 0,k=Gi(g,T.path,w);if(!k){if(x&&N)return;K.push({key:P,routeId:T.routeId,path:T.path,matches:null,match:null,request:null,controller:null});return}if(y.has(P))return;let S=ph(k,T.path),E=new AbortController,O=Ul(l,T.path,E.signal),L=null;if(f.has(P))f.delete(P),L=Ql(t,s,O,k,S,a,n);else if(N)h&&(L=Ql(t,s,O,k,S,a,n));else{let z={...U,defaultShouldRevalidate:B?!1:h};Mh(S,z)&&(L=Ql(t,s,O,k,S,a,n,z))}L&&K.push({key:P,routeId:T.routeId,path:T.path,matches:L,match:S,request:O,controller:E})}),{dsMatches:Q,revalidatingFetchers:K}}function Sb(e,n,t){if(e.lazy)return!0;if(!e.loader)return!1;let s=n!=null&&e.id in n,l=t!=null&&t[e.id]!==void 0;return!s&&l?!1:typeof e.loader=="function"&&e.loader.hydrate===!0?!0:!s&&!l}function XE(e,n,t){let s=!n||t.route.id!==n.route.id,l=!e.hasOwnProperty(t.route.id);return s||l}function YE(e,n){let t=e.route.path;return e.pathname!==n.pathname||t!=null&&t.endsWith("*")&&e.params["*"]!==n.params["*"]}function Mh(e,n){if(e.route.shouldRevalidate){let t=e.route.shouldRevalidate(n);if(typeof t=="boolean")return t}return n.defaultShouldRevalidate}function Mw(e,n,t,s,l,i){let o;if(e){let a=s[e];yr(a,`No route found to patch children into: routeId = ${e}`),a.children||(a.children=[]),o=a.children}else o=t;let d=[],c=[];if(n.forEach(a=>{let u=o.find(h=>oj(a,h));u?c.push({existingRoute:u,newRoute:a}):d.push(a)}),d.length>0){let a=su(d,l,[e||"_","patch",String(o?.length||"0")],s);o.push(...a)}if(i&&c.length>0)for(let a=0;a<c.length;a++){let{existingRoute:u,newRoute:h}=c[a],f=u,[m]=su([h],l,[],{},!0);Object.assign(f,{element:m.element?m.element:f.element,errorElement:m.errorElement?m.errorElement:f.errorElement,hydrateFallbackElement:m.hydrateFallbackElement?m.hydrateFallbackElement:f.hydrateFallbackElement})}}function oj(e,n){return"id"in e&&"id"in n&&e.id===n.id?!0:e.index===n.index&&e.path===n.path&&e.caseSensitive===n.caseSensitive?(!e.children||e.children.length===0)&&(!n.children||n.children.length===0)?!0:e.children.every((t,s)=>n.children?.some(l=>oj(t,l))):!1}var Ow=new WeakMap,lj=({key:e,route:n,manifest:t,mapRouteProperties:s})=>{let l=t[n.id];if(yr(l,"No route found in manifest"),!l.lazy||typeof l.lazy!="object")return;let i=l.lazy[e];if(!i)return;let o=Ow.get(l);o||(o={},Ow.set(l,o));let d=o[e];if(d)return d;let c=(async()=>{let a=bE(e),h=l[e]!==void 0&&e!=="hasErrorBoundary";if(a)sn(!a,"Route property "+e+" is not a supported lazy route property. This property will be ignored."),o[e]=Promise.resolve();else if(h)sn(!1,`Route "${l.id}" has a static property "${e}" defined. The lazy property will be ignored.`);else{let f=await i();f!=null&&(Object.assign(l,{[e]:f}),Object.assign(l,s(l)))}typeof l.lazy=="object"&&(l.lazy[e]=void 0,Object.values(l.lazy).every(f=>f===void 0)&&(l.lazy=void 0))})();return o[e]=c,c},Dw=new WeakMap;function ZE(e,n,t,s,l){let i=t[e.id];if(yr(i,"No route found in manifest"),!e.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof e.lazy=="function"){let u=Dw.get(i);if(u)return{lazyRoutePromise:u,lazyHandlerPromise:u};let h=(async()=>{yr(typeof e.lazy=="function","No lazy route function found");let f=await e.lazy(),m={};for(let b in f){let y=f[b];if(y===void 0)continue;let g=xE(b),x=i[b]!==void 0&&b!=="hasErrorBoundary";g?sn(!g,"Route property "+b+" is not a supported property to be returned from a lazy route function. This property will be ignored."):x?sn(!x,`Route "${i.id}" has a static property "${b}" defined but its lazy function is also returning a value for this property. The lazy route property "${b}" will be ignored.`):m[b]=y}Object.assign(i,m),Object.assign(i,{...s(i),lazy:void 0})})();return Dw.set(i,h),h.catch(()=>{}),{lazyRoutePromise:h,lazyHandlerPromise:h}}let o=Object.keys(e.lazy),d=[],c;for(let u of o){if(l&&l.includes(u))continue;let h=lj({key:u,route:e,manifest:t,mapRouteProperties:s});h&&(d.push(h),u===n&&(c=h))}let a=d.length>0?Promise.all(d).then(()=>{}):void 0;return a?.catch(()=>{}),c?.catch(()=>{}),{lazyRoutePromise:a,lazyHandlerPromise:c}}async function Pw(e){let n=e.matches.filter(l=>l.shouldLoad),t={};return(await Promise.all(n.map(l=>l.resolve()))).forEach((l,i)=>{t[n[i].route.id]=l}),t}async function JE(e){return e.matches.some(n=>n.route.unstable_middleware)?cj(e,!1,()=>Pw(e),(n,t)=>({[t]:{type:"error",result:n}})):Pw(e)}async function cj(e,n,t,s){let{matches:l,request:i,params:o,context:d}=e,c={handlerResult:void 0};try{let a=l.flatMap(h=>h.route.unstable_middleware?h.route.unstable_middleware.map(f=>[h.route.id,f]):[]),u=await dj({request:i,params:o,context:d},a,n,c,t);return n?u:c.handlerResult}catch(a){if(!c.middlewareError)throw a;let u=await s(c.middlewareError.error,c.middlewareError.routeId);return c.handlerResult?Object.assign(c.handlerResult,u):u}}async function dj(e,n,t,s,l,i=0){let{request:o}=e;if(o.signal.aborted)throw o.signal.reason?o.signal.reason:new Error(`Request aborted without an \`AbortSignal.reason\`: ${o.method} ${o.url}`);let d=n[i];if(!d)return s.handlerResult=await l(),s.handlerResult;let[c,a]=d,u=!1,h,f=async()=>{if(u)throw new Error("You may only call `next()` once per middleware");u=!0,await dj(e,n,t,s,l,i+1)};try{let m=await a({request:e.request,params:e.params,context:e.context},f);return u?m===void 0?h:m:f()}catch(m){throw s.middlewareError?s.middlewareError.error!==m&&(s.middlewareError={routeId:c,error:m}):s.middlewareError={routeId:c,error:m},m}}function uj(e,n,t,s,l){let i=lj({key:"unstable_middleware",route:s.route,manifest:n,mapRouteProperties:e}),o=ZE(s.route,ls(t.method)?"action":"loader",n,e,l);return{middleware:i,route:o.lazyRoutePromise,handler:o.lazyHandlerPromise}}function kb(e,n,t,s,l,i,o,d=null){let c=!1,a=uj(e,n,t,s,l);return{...s,_lazyPromises:a,shouldLoad:o,unstable_shouldRevalidateArgs:d,unstable_shouldCallHandler(u){return c=!0,d?typeof u=="boolean"?Mh(s,{...d,defaultShouldRevalidate:u}):Mh(s,d):o},resolve(u){return c||o||u&&!ls(t.method)&&(s.route.lazy||s.route.loader)?tR({request:t,match:s,lazyHandlerPromise:a?.handler,lazyRoutePromise:a?.route,handlerOverride:u,scopedContext:i}):Promise.resolve({type:"data",result:void 0})}}}function Ql(e,n,t,s,l,i,o,d=null){return s.map(c=>c.route.id!==l.route.id?{...c,shouldLoad:!1,unstable_shouldRevalidateArgs:d,unstable_shouldCallHandler:()=>!1,_lazyPromises:uj(e,n,t,c,i),resolve:()=>Promise.resolve({type:"data",result:void 0})}:kb(e,n,t,c,i,o,!0,d))}async function eR(e,n,t,s,l,i){t.some(a=>a._lazyPromises?.middleware)&&await Promise.all(t.map(a=>a._lazyPromises?.middleware));let o={request:n,params:t[0].params,context:l,matches:t},c=await e({...o,fetcherKey:s,unstable_runClientMiddleware:a=>{let u=o;return cj(u,!1,()=>a({...u,fetcherKey:s,unstable_runClientMiddleware:()=>{throw new Error("Cannot call `unstable_runClientMiddleware()` from within an `unstable_runClientMiddleware` handler")}}),(h,f)=>({[f]:{type:"error",result:h}}))}});try{await Promise.all(t.flatMap(a=>[a._lazyPromises?.handler,a._lazyPromises?.route]))}catch{}return c}async function tR({request:e,match:n,lazyHandlerPromise:t,lazyRoutePromise:s,handlerOverride:l,scopedContext:i}){let o,d,c=ls(e.method),a=c?"action":"loader",u=h=>{let f,m=new Promise((g,w)=>f=w);d=()=>f(),e.signal.addEventListener("abort",d);let b=g=>typeof h!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${a}" [routeId: ${n.route.id}]`)):h({request:e,params:n.params,context:i},...g!==void 0?[g]:[]),y=(async()=>{try{return{type:"data",result:await(l?l(w=>b(w)):b())}}catch(g){return{type:"error",result:g}}})();return Promise.race([y,m])};try{let h=c?n.route.action:n.route.loader;if(t||s)if(h){let f,[m]=await Promise.all([u(h).catch(b=>{f=b}),t,s]);if(f!==void 0)throw f;o=m}else{await t;let f=c?n.route.action:n.route.loader;if(f)[o]=await Promise.all([u(f),s]);else if(a==="action"){let m=new URL(e.url),b=m.pathname+m.search;throw Vs(405,{method:e.method,pathname:b,routeId:n.route.id})}else return{type:"data",result:void 0}}else if(h)o=await u(h);else{let f=new URL(e.url),m=f.pathname+f.search;throw Vs(404,{pathname:m})}}catch(h){return{type:"error",result:h}}finally{d&&e.signal.removeEventListener("abort",d)}return o}async function rR(e){let{result:n,type:t}=e;if(hj(n)){let s;try{let l=n.headers.get("Content-Type");l&&/\bapplication\/json\b/.test(l)?n.body==null?s=null:s=await n.json():s=await n.text()}catch(l){return{type:"error",error:l}}return t==="error"?{type:"error",error:new Ah(n.status,n.statusText,s),statusCode:n.status,headers:n.headers}:{type:"data",data:s,statusCode:n.status,headers:n.headers}}return t==="error"?$w(n)?n.data instanceof Error?{type:"error",error:n.data,statusCode:n.init?.status,headers:n.init?.headers?new Headers(n.init.headers):void 0}:{type:"error",error:new Ah(n.init?.status||500,void 0,n.data),statusCode:au(n)?n.status:void 0,headers:n.init?.headers?new Headers(n.init.headers):void 0}:{type:"error",error:n,statusCode:au(n)?n.status:void 0}:$w(n)?{type:"data",data:n.data,statusCode:n.init?.status,headers:n.init?.headers?new Headers(n.init.headers):void 0}:{type:"data",data:n}}function nR(e,n,t,s,l){let i=e.headers.get("Location");if(yr(i,"Redirects returned/thrown from loaders/actions must have a Location header"),!py(i)){let o=s.slice(0,s.findIndex(d=>d.route.id===t)+1);i=Cb(new URL(n.url),o,l,i),e.headers.set("Location",i)}return e}function Iw(e,n,t){if(py(e)){let s=e,l=s.startsWith("//")?new URL(n.protocol+s):new URL(s),i=Ys(l.pathname,t)!=null;if(l.origin===n.origin&&i)return l.pathname+l.search+l.hash}return e}function Ul(e,n,t,s){let l=e.createURL(fj(n)).toString(),i={signal:t};if(s&&ls(s.formMethod)){let{formMethod:o,formEncType:d}=s;i.method=o.toUpperCase(),d==="application/json"?(i.headers=new Headers({"Content-Type":d}),i.body=JSON.stringify(s.json)):d==="text/plain"?i.body=s.text:d==="application/x-www-form-urlencoded"&&s.formData?i.body=Eb(s.formData):i.body=s.formData}return new Request(l,i)}function Eb(e){let n=new URLSearchParams;for(let[t,s]of e.entries())n.append(t,typeof s=="string"?s:s.name);return n}function Fw(e){let n=new FormData;for(let[t,s]of e.entries())n.append(t,s);return n}function sR(e,n,t,s=!1,l=!1){let i={},o=null,d,c=!1,a={},u=t&&As(t[1])?t[1].error:void 0;return e.forEach(h=>{if(!(h.route.id in n))return;let f=h.route.id,m=n[f];if(yr(!Fo(m),"Cannot handle redirect results in processLoaderData"),As(m)){let b=m.error;if(u!==void 0&&(b=u,u=void 0),o=o||{},l)o[f]=b;else{let y=Io(e,f);o[y.route.id]==null&&(o[y.route.id]=b)}s||(i[f]=ij),c||(c=!0,d=au(m.error)?m.error.status:500),m.headers&&(a[f]=m.headers)}else i[f]=m.data,m.statusCode&&m.statusCode!==200&&!c&&(d=m.statusCode),m.headers&&(a[f]=m.headers)}),u!==void 0&&t&&(o={[t[0]]:u},t[2]&&(i[t[2]]=void 0)),{loaderData:i,errors:o,statusCode:d||200,loaderHeaders:a}}function Lw(e,n,t,s,l,i){let{loaderData:o,errors:d}=sR(n,t,s);return l.filter(c=>!c.matches||c.matches.some(a=>a.shouldLoad)).forEach(c=>{let{key:a,match:u,controller:h}=c,f=i[a];if(yr(f,"Did not find corresponding fetcher result"),!(h&&h.signal.aborted))if(As(f)){let m=Io(e.matches,u?.route.id);d&&d[m.route.id]||(d={...d,[m.route.id]:f.error}),e.fetchers.delete(a)}else if(Fo(f))yr(!1,"Unhandled fetcher revalidation redirect");else{let m=Ki(f.data);e.fetchers.set(a,m)}}),{loaderData:o,errors:d}}function zw(e,n,t,s){let l=Object.entries(n).filter(([,i])=>i!==ij).reduce((i,[o,d])=>(i[o]=d,i),{});for(let i of t){let o=i.route.id;if(!n.hasOwnProperty(o)&&e.hasOwnProperty(o)&&i.route.loader&&(l[o]=e[o]),s&&s.hasOwnProperty(o))break}return l}function Bw(e){return e?As(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function Io(e,n){return(n?e.slice(0,e.findIndex(s=>s.route.id===n)+1):[...e]).reverse().find(s=>s.route.hasErrorBoundary===!0)||e[0]}function qw(e){let n=e.length===1?e[0]:e.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:n}],route:n}}function Vs(e,{pathname:n,routeId:t,method:s,type:l,message:i}={}){let o="Unknown Server Error",d="Unknown @remix-run/router error";return e===400?(o="Bad Request",s&&n&&t?d=`You made a ${s} request to "${n}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:l==="invalid-body"&&(d="Unable to encode submission body")):e===403?(o="Forbidden",d=`Route "${t}" does not match URL "${n}"`):e===404?(o="Not Found",d=`No route matches URL "${n}"`):e===405&&(o="Method Not Allowed",s&&n&&t?d=`You made a ${s.toUpperCase()} request to "${n}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:s&&(d=`Invalid request method "${s.toUpperCase()}"`)),new Ah(e||500,o,new Error(d),!0)}function eh(e){let n=Object.entries(e);for(let t=n.length-1;t>=0;t--){let[s,l]=n[t];if(Fo(l))return{key:s,result:l}}}function fj(e){let n=typeof e=="string"?oo(e):e;return to({...n,hash:""})}function aR(e,n){return e.pathname!==n.pathname||e.search!==n.search?!1:e.hash===""?n.hash!=="":e.hash===n.hash?!0:n.hash!==""}function iR(e){return hj(e.result)&&UE.has(e.result.status)}function As(e){return e.type==="error"}function Fo(e){return(e&&e.type)==="redirect"}function $w(e){return typeof e=="object"&&e!=null&&"type"in e&&"data"in e&&"init"in e&&e.type==="DataWithResponseInit"}function hj(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function oR(e){return $E.has(e.toUpperCase())}function ls(e){return BE.has(e.toUpperCase())}function gy(e){return new URLSearchParams(e).getAll("index").some(n=>n==="")}function ph(e,n){let t=typeof n=="string"?oo(n).search:n.search;if(e[e.length-1].route.index&&gy(t||""))return e[e.length-1];let s=nj(e);return s[s.length-1]}function Uw(e){let{formMethod:n,formAction:t,formEncType:s,text:l,formData:i,json:o}=e;if(!(!n||!t||!s)){if(l!=null)return{formMethod:n,formAction:t,formEncType:s,formData:void 0,json:void 0,text:l};if(i!=null)return{formMethod:n,formAction:t,formEncType:s,formData:i,json:void 0,text:void 0};if(o!==void 0)return{formMethod:n,formAction:t,formEncType:s,formData:void 0,json:o,text:void 0}}}function Sg(e,n){return n?{state:"loading",location:e,formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function lR(e,n){return{state:"submitting",location:e,formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text}}function Cd(e,n){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:n}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function cR(e,n){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:n?n.data:void 0}}function Ki(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function dR(e,n){try{let t=e.sessionStorage.getItem(aj);if(t){let s=JSON.parse(t);for(let[l,i]of Object.entries(s||{}))i&&Array.isArray(i)&&n.set(l,new Set(i||[]))}}catch{}}function uR(e,n){if(n.size>0){let t={};for(let[s,l]of n)t[s]=[...l];try{e.sessionStorage.setItem(aj,JSON.stringify(t))}catch(s){sn(!1,`Failed to save applied view transitions in sessionStorage (${s}).`)}}}function fR(){let e,n,t=new Promise((s,l)=>{e=async i=>{s(i);try{await t}catch{}},n=async i=>{l(i);try{await t}catch{}}});return{promise:t,resolve:e,reject:n}}var tl=H.createContext(null);tl.displayName="DataRouter";var bu=H.createContext(null);bu.displayName="DataRouterState";H.createContext(!1);var by=H.createContext({isTransitioning:!1});by.displayName="ViewTransition";var mj=H.createContext(new Map);mj.displayName="Fetchers";var hR=H.createContext(null);hR.displayName="Await";var va=H.createContext(null);va.displayName="Navigation";var fm=H.createContext(null);fm.displayName="Location";var ea=H.createContext({outlet:null,matches:[],isDataRoute:!1});ea.displayName="Route";var yy=H.createContext(null);yy.displayName="RouteError";function mR(e,{relative:n}={}){yr(uc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=H.useContext(va),{hash:l,pathname:i,search:o}=yu(e,{relative:n}),d=i;return t!=="/"&&(d=i==="/"?t:Da([t,i])),s.createHref({pathname:d,search:o,hash:l})}function uc(){return H.useContext(fm)!=null}function ta(){return yr(uc(),"useLocation() may be used only in the context of a <Router> component."),H.useContext(fm).location}var pj="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function gj(e){H.useContext(va).static||H.useLayoutEffect(e)}function kn(){let{isDataRoute:e}=H.useContext(ea);return e?RR():pR()}function pR(){yr(uc(),"useNavigate() may be used only in the context of a <Router> component.");let e=H.useContext(tl),{basename:n,navigator:t}=H.useContext(va),{matches:s}=H.useContext(ea),{pathname:l}=ta(),i=JSON.stringify(dm(s)),o=H.useRef(!1);return gj(()=>{o.current=!0}),H.useCallback((c,a={})=>{if(sn(o.current,pj),!o.current)return;if(typeof c=="number"){t.go(c);return}let u=um(c,JSON.parse(i),l,a.relative==="path");e==null&&n!=="/"&&(u.pathname=u.pathname==="/"?n:Da([n,u.pathname])),(a.replace?t.replace:t.push)(u,a.state,a)},[n,t,i,l,e])}var gR=H.createContext(null);function bR(e){let n=H.useContext(ea).outlet;return n&&H.createElement(gR.Provider,{value:e},n)}function xy(){let{matches:e}=H.useContext(ea),n=e[e.length-1];return n?n.params:{}}function yu(e,{relative:n}={}){let{matches:t}=H.useContext(ea),{pathname:s}=ta(),l=JSON.stringify(dm(t));return H.useMemo(()=>um(e,JSON.parse(l),s,n==="path"),[e,l,s,n])}function yR(e,n,t,s){yr(uc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=H.useContext(va),{matches:i}=H.useContext(ea),o=i[i.length-1],d=o?o.params:{},c=o?o.pathname:"/",a=o?o.pathnameBase:"/",u=o&&o.route;{let w=u&&u.path||"";bj(c,!u||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let h=ta(),f;f=h;let m=f.pathname||"/",b=m;if(a!=="/"){let w=a.replace(/^\//,"").split("/");b="/"+m.replace(/^\//,"").split("/").slice(w.length).join("/")}let y=Gi(e,{pathname:b});return sn(u||y!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),sn(y==null||y[y.length-1].route.element!==void 0||y[y.length-1].route.Component!==void 0||y[y.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),jR(y&&y.map(w=>Object.assign({},w,{params:Object.assign({},d,w.params),pathname:Da([a,l.encodeLocation?l.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?a:Da([a,l.encodeLocation?l.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,t,s)}function xR(){let e=ER(),n=au(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),t=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:s},i={padding:"2px 4px",backgroundColor:s},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=H.createElement(H.Fragment,null,H.createElement("p",null," Hey developer "),H.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",H.createElement("code",{style:i},"ErrorBoundary")," or"," ",H.createElement("code",{style:i},"errorElement")," prop on your route.")),H.createElement(H.Fragment,null,H.createElement("h2",null,"Unexpected Application Error!"),H.createElement("h3",{style:{fontStyle:"italic"}},n),t?H.createElement("pre",{style:l},t):null,o)}var vR=H.createElement(xR,null),wR=class extends H.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?H.createElement(ea.Provider,{value:this.props.routeContext},H.createElement(yy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function _R({routeContext:e,match:n,children:t}){let s=H.useContext(tl);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),H.createElement(ea.Provider,{value:e},t)}function jR(e,n=[],t=null,s=null){if(e==null){if(!t)return null;if(t.errors)e=t.matches;else if(n.length===0&&!t.initialized&&t.matches.length>0)e=t.matches;else return null}let l=e,i=t?.errors;if(i!=null){let c=l.findIndex(a=>a.route.id&&i?.[a.route.id]!==void 0);yr(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),l=l.slice(0,Math.min(l.length,c+1))}let o=!1,d=-1;if(t)for(let c=0;c<l.length;c++){let a=l[c];if((a.route.HydrateFallback||a.route.hydrateFallbackElement)&&(d=c),a.route.id){let{loaderData:u,errors:h}=t,f=a.route.loader&&!u.hasOwnProperty(a.route.id)&&(!h||h[a.route.id]===void 0);if(a.route.lazy||f){o=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}return l.reduceRight((c,a,u)=>{let h,f=!1,m=null,b=null;t&&(h=i&&a.route.id?i[a.route.id]:void 0,m=a.route.errorElement||vR,o&&(d<0&&u===0?(bj("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,b=null):d===u&&(f=!0,b=a.route.hydrateFallbackElement||null)));let y=n.concat(l.slice(0,u+1)),g=()=>{let w;return h?w=m:f?w=b:a.route.Component?w=H.createElement(a.route.Component,null):a.route.element?w=a.route.element:w=c,H.createElement(_R,{match:a,routeContext:{outlet:c,matches:y,isDataRoute:t!=null},children:w})};return t&&(a.route.ErrorBoundary||a.route.errorElement||u===0)?H.createElement(wR,{location:t.location,revalidation:t.revalidation,component:m,error:h,children:g(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):g()},null)}function vy(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function NR(e){let n=H.useContext(tl);return yr(n,vy(e)),n}function CR(e){let n=H.useContext(bu);return yr(n,vy(e)),n}function SR(e){let n=H.useContext(ea);return yr(n,vy(e)),n}function wy(e){let n=SR(e),t=n.matches[n.matches.length-1];return yr(t.route.id,`${e} can only be used on routes that contain a unique "id"`),t.route.id}function kR(){return wy("useRouteId")}function ER(){let e=H.useContext(yy),n=CR("useRouteError"),t=wy("useRouteError");return e!==void 0?e:n.errors?.[t]}function RR(){let{router:e}=NR("useNavigate"),n=wy("useNavigate"),t=H.useRef(!1);return gj(()=>{t.current=!0}),H.useCallback(async(l,i={})=>{sn(t.current,pj),t.current&&(typeof l=="number"?e.navigate(l):await e.navigate(l,{fromRouteId:n,...i}))},[e,n])}var Hw={};function bj(e,n,t){!n&&!Hw[e]&&(Hw[e]=!0,sn(!1,t))}var Vw={};function Kw(e,n){!e&&!Vw[n]&&(Vw[n]=!0,console.warn(n))}function TR(e){let n={hasErrorBoundary:e.hasErrorBoundary||e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&(e.element&&sn(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(n,{element:H.createElement(e.Component),Component:void 0})),e.HydrateFallback&&(e.hydrateFallbackElement&&sn(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(n,{hydrateFallbackElement:H.createElement(e.HydrateFallback),HydrateFallback:void 0})),e.ErrorBoundary&&(e.errorElement&&sn(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(n,{errorElement:H.createElement(e.ErrorBoundary),ErrorBoundary:void 0})),n}var AR=["HydrateFallback","hydrateFallbackElement"],MR=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=t=>{this.status==="pending"&&(this.status="resolved",e(t))},this.reject=t=>{this.status==="pending"&&(this.status="rejected",n(t))}})}};function OR({router:e,flushSync:n}){let[t,s]=H.useState(e.state),[l,i]=H.useState(),[o,d]=H.useState({isTransitioning:!1}),[c,a]=H.useState(),[u,h]=H.useState(),[f,m]=H.useState(),b=H.useRef(new Map),y=H.useCallback((_,{deletedFetchers:j,flushSync:R,viewTransitionOpts:M})=>{_.fetchers.forEach((F,B)=>{F.data!==void 0&&b.current.set(B,F.data)}),j.forEach(F=>b.current.delete(F)),Kw(R===!1||n!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let I=e.window!=null&&e.window.document!=null&&typeof e.window.document.startViewTransition=="function";if(Kw(M==null||I,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!M||!I){n&&R?n(()=>s(_)):H.startTransition(()=>s(_));return}if(n&&R){n(()=>{u&&(c&&c.resolve(),u.skipTransition()),d({isTransitioning:!0,flushSync:!0,currentLocation:M.currentLocation,nextLocation:M.nextLocation})});let F=e.window.document.startViewTransition(()=>{n(()=>s(_))});F.finished.finally(()=>{n(()=>{a(void 0),h(void 0),i(void 0),d({isTransitioning:!1})})}),n(()=>h(F));return}u?(c&&c.resolve(),u.skipTransition(),m({state:_,currentLocation:M.currentLocation,nextLocation:M.nextLocation})):(i(_),d({isTransitioning:!0,flushSync:!1,currentLocation:M.currentLocation,nextLocation:M.nextLocation}))},[e.window,n,u,c]);H.useLayoutEffect(()=>e.subscribe(y),[e,y]),H.useEffect(()=>{o.isTransitioning&&!o.flushSync&&a(new MR)},[o]),H.useEffect(()=>{if(c&&l&&e.window){let _=l,j=c.promise,R=e.window.document.startViewTransition(async()=>{H.startTransition(()=>s(_)),await j});R.finished.finally(()=>{a(void 0),h(void 0),i(void 0),d({isTransitioning:!1})}),h(R)}},[l,c,e.window]),H.useEffect(()=>{c&&l&&t.location.key===l.location.key&&c.resolve()},[c,u,t.location,l]),H.useEffect(()=>{!o.isTransitioning&&f&&(i(f.state),d({isTransitioning:!0,flushSync:!1,currentLocation:f.currentLocation,nextLocation:f.nextLocation}),m(void 0))},[o.isTransitioning,f]);let g=H.useMemo(()=>({createHref:e.createHref,encodeLocation:e.encodeLocation,go:_=>e.navigate(_),push:(_,j,R)=>e.navigate(_,{state:j,preventScrollReset:R?.preventScrollReset}),replace:(_,j,R)=>e.navigate(_,{replace:!0,state:j,preventScrollReset:R?.preventScrollReset})}),[e]),w=e.basename||"/",x=H.useMemo(()=>({router:e,navigator:g,static:!1,basename:w}),[e,g,w]);return H.createElement(H.Fragment,null,H.createElement(tl.Provider,{value:x},H.createElement(bu.Provider,{value:t},H.createElement(mj.Provider,{value:b.current},H.createElement(by.Provider,{value:o},H.createElement(IR,{basename:w,location:t.location,navigationType:t.historyAction,navigator:g},H.createElement(DR,{routes:e.routes,future:e.future,state:t})))))),null)}var DR=H.memo(PR);function PR({routes:e,future:n,state:t}){return yR(e,void 0,t,n)}function di({to:e,replace:n,state:t,relative:s}){yr(uc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=H.useContext(va);sn(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=H.useContext(ea),{pathname:o}=ta(),d=kn(),c=um(e,dm(i),o,s==="path"),a=JSON.stringify(c);return H.useEffect(()=>{d(JSON.parse(a),{replace:n,state:t,relative:s})},[d,a,s,n,t]),null}function xu(e){return bR(e.context)}function IR({basename:e="/",children:n=null,location:t,navigationType:s="POP",navigator:l,static:i=!1}){yr(!uc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),d=H.useMemo(()=>({basename:o,navigator:l,static:i,future:{}}),[o,l,i]);typeof t=="string"&&(t=oo(t));let{pathname:c="/",search:a="",hash:u="",state:h=null,key:f="default"}=t,m=H.useMemo(()=>{let b=Ys(c,o);return b==null?null:{location:{pathname:b,search:a,hash:u,state:h,key:f},navigationType:s}},[o,c,a,u,h,f,s]);return sn(m!=null,`<Router basename="${o}"> is not able to match the URL "${c}${a}${u}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:H.createElement(va.Provider,{value:d},H.createElement(fm.Provider,{children:n,value:m}))}var gh="get",bh="application/x-www-form-urlencoded";function hm(e){return e!=null&&typeof e.tagName=="string"}function FR(e){return hm(e)&&e.tagName.toLowerCase()==="button"}function LR(e){return hm(e)&&e.tagName.toLowerCase()==="form"}function zR(e){return hm(e)&&e.tagName.toLowerCase()==="input"}function BR(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function qR(e,n){return e.button===0&&(!n||n==="_self")&&!BR(e)}function Rb(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((n,t)=>{let s=e[t];return n.concat(Array.isArray(s)?s.map(l=>[t,l]):[[t,s]])},[]))}function $R(e,n){let t=Rb(e);return n&&n.forEach((s,l)=>{t.has(l)||n.getAll(l).forEach(i=>{t.append(l,i)})}),t}var th=null;function UR(){if(th===null)try{new FormData(document.createElement("form"),0),th=!1}catch{th=!0}return th}var HR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function kg(e){return e!=null&&!HR.has(e)?(sn(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${bh}"`),null):e}function VR(e,n){let t,s,l,i,o;if(LR(e)){let d=e.getAttribute("action");s=d?Ys(d,n):null,t=e.getAttribute("method")||gh,l=kg(e.getAttribute("enctype"))||bh,i=new FormData(e)}else if(FR(e)||zR(e)&&(e.type==="submit"||e.type==="image")){let d=e.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||d.getAttribute("action");if(s=c?Ys(c,n):null,t=e.getAttribute("formmethod")||d.getAttribute("method")||gh,l=kg(e.getAttribute("formenctype"))||kg(d.getAttribute("enctype"))||bh,i=new FormData(d,e),!UR()){let{name:a,type:u,value:h}=e;if(u==="image"){let f=a?`${a}.`:"";i.append(`${f}x`,"0"),i.append(`${f}y`,"0")}else a&&i.append(a,h)}}else{if(hm(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=gh,s=null,l=bh,o=e}return i&&l==="text/plain"&&(o=i,i=void 0),{action:s,method:t.toLowerCase(),encType:l,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function _y(e,n){if(e===!1||e===null||typeof e>"u")throw new Error(n)}function KR(e,n,t){let s=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return s.pathname==="/"?s.pathname=`_root.${t}`:n&&Ys(s.pathname,n)==="/"?s.pathname=`${n.replace(/\/$/,"")}/_root.${t}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${t}`,s}async function WR(e,n){if(e.id in n)return n[e.id];try{let t=await import(e.module);return n[e.id]=t,t}catch(t){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function QR(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function GR(e,n,t){let s=await Promise.all(e.map(async l=>{let i=n.routes[l.route.id];if(i){let o=await WR(i,t);return o.links?o.links():[]}return[]}));return JR(s.flat(1).filter(QR).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function Ww(e,n,t,s,l,i){let o=(c,a)=>t[a]?c.route.id!==t[a].route.id:!0,d=(c,a)=>t[a].pathname!==c.pathname||t[a].route.path?.endsWith("*")&&t[a].params["*"]!==c.params["*"];return i==="assets"?n.filter((c,a)=>o(c,a)||d(c,a)):i==="data"?n.filter((c,a)=>{let u=s.routes[c.route.id];if(!u||!u.hasLoader)return!1;if(o(c,a)||d(c,a))return!0;if(c.route.shouldRevalidate){let h=c.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function XR(e,n,{includeHydrateFallback:t}={}){return YR(e.map(s=>{let l=n.routes[s.route.id];if(!l)return[];let i=[l.module];return l.clientActionModule&&(i=i.concat(l.clientActionModule)),l.clientLoaderModule&&(i=i.concat(l.clientLoaderModule)),t&&l.hydrateFallbackModule&&(i=i.concat(l.hydrateFallbackModule)),l.imports&&(i=i.concat(l.imports)),i}).flat(1))}function YR(e){return[...new Set(e)]}function ZR(e){let n={},t=Object.keys(e).sort();for(let s of t)n[s]=e[s];return n}function JR(e,n){let t=new Set;return new Set(n),e.reduce((s,l)=>{let i=JSON.stringify(ZR(l));return t.has(i)||(t.add(i),s.push({key:i,link:l})),s},[])}function yj(){let e=H.useContext(tl);return _y(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function eT(){let e=H.useContext(bu);return _y(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var jy=H.createContext(void 0);jy.displayName="FrameworkContext";function xj(){let e=H.useContext(jy);return _y(e,"You must render this element inside a <HydratedRouter> element"),e}function tT(e,n){let t=H.useContext(jy),[s,l]=H.useState(!1),[i,o]=H.useState(!1),{onFocus:d,onBlur:c,onMouseEnter:a,onMouseLeave:u,onTouchStart:h}=n,f=H.useRef(null);H.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let y=w=>{w.forEach(x=>{o(x.isIntersecting)})},g=new IntersectionObserver(y,{threshold:.5});return f.current&&g.observe(f.current),()=>{g.disconnect()}}},[e]),H.useEffect(()=>{if(s){let y=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(y)}}},[s]);let m=()=>{l(!0)},b=()=>{l(!1),o(!1)};return t?e!=="intent"?[i,f,{}]:[i,f,{onFocus:Sd(d,m),onBlur:Sd(c,b),onMouseEnter:Sd(a,m),onMouseLeave:Sd(u,b),onTouchStart:Sd(h,m)}]:[!1,f,{}]}function Sd(e,n){return t=>{e&&e(t),t.defaultPrevented||n(t)}}function rT({page:e,...n}){let{router:t}=yj(),s=H.useMemo(()=>Gi(t.routes,e,t.basename),[t.routes,e,t.basename]);return s?H.createElement(sT,{page:e,matches:s,...n}):null}function nT(e){let{manifest:n,routeModules:t}=xj(),[s,l]=H.useState([]);return H.useEffect(()=>{let i=!1;return GR(e,n,t).then(o=>{i||l(o)}),()=>{i=!0}},[e,n,t]),s}function sT({page:e,matches:n,...t}){let s=ta(),{manifest:l,routeModules:i}=xj(),{basename:o}=yj(),{loaderData:d,matches:c}=eT(),a=H.useMemo(()=>Ww(e,n,c,l,s,"data"),[e,n,c,l,s]),u=H.useMemo(()=>Ww(e,n,c,l,s,"assets"),[e,n,c,l,s]),h=H.useMemo(()=>{if(e===s.pathname+s.search+s.hash)return[];let b=new Set,y=!1;if(n.forEach(w=>{let x=l.routes[w.route.id];!x||!x.hasLoader||(!a.some(_=>_.route.id===w.route.id)&&w.route.id in d&&i[w.route.id]?.shouldRevalidate||x.hasClientLoader?y=!0:b.add(w.route.id))}),b.size===0)return[];let g=KR(e,o,"data");return y&&b.size>0&&g.searchParams.set("_routes",n.filter(w=>b.has(w.route.id)).map(w=>w.route.id).join(",")),[g.pathname+g.search]},[o,d,s,l,a,n,e,i]),f=H.useMemo(()=>XR(u,l),[u,l]),m=nT(u);return H.createElement(H.Fragment,null,h.map(b=>H.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...t})),f.map(b=>H.createElement("link",{key:b,rel:"modulepreload",href:b,...t})),m.map(({key:b,link:y})=>H.createElement("link",{key:b,...y})))}function aT(...e){return n=>{e.forEach(t=>{typeof t=="function"?t(n):t!=null&&(t.current=n)})}}var vj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{vj&&(window.__reactRouterVersion="7.7.1")}catch{}function iT(e,n){return QE({basename:n?.basename,unstable_getContext:n?.unstable_getContext,future:n?.future,history:hE({window:n?.window}),hydrationData:oT(),routes:e,mapRouteProperties:TR,hydrationRouteProperties:AR,dataStrategy:n?.dataStrategy,patchRoutesOnNavigation:n?.patchRoutesOnNavigation,window:n?.window}).initialize()}function oT(){let e=window?.__staticRouterHydrationData;return e&&e.errors&&(e={...e,errors:lT(e.errors)}),e}function lT(e){if(!e)return null;let n=Object.entries(e),t={};for(let[s,l]of n)if(l&&l.__type==="RouteErrorResponse")t[s]=new Ah(l.status,l.statusText,l.data,l.internal===!0);else if(l&&l.__type==="Error"){if(l.__subType){let i=window[l.__subType];if(typeof i=="function")try{let o=new i(l.message);o.stack="",t[s]=o}catch{}}if(t[s]==null){let i=new Error(l.message);i.stack="",t[s]=i}}else t[s]=l;return t}var wj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xn=H.forwardRef(function({onClick:n,discover:t="render",prefetch:s="none",relative:l,reloadDocument:i,replace:o,state:d,target:c,to:a,preventScrollReset:u,viewTransition:h,...f},m){let{basename:b}=H.useContext(va),y=typeof a=="string"&&wj.test(a),g,w=!1;if(typeof a=="string"&&y&&(g=a,vj))try{let B=new URL(window.location.href),U=a.startsWith("//")?new URL(B.protocol+a):new URL(a),Q=Ys(U.pathname,b);U.origin===B.origin&&Q!=null?a=Q+U.search+U.hash:w=!0}catch{sn(!1,`<Link to="${a}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let x=mR(a,{relative:l}),[_,j,R]=tT(s,f),M=uT(a,{replace:o,state:d,target:c,preventScrollReset:u,relative:l,viewTransition:h});function I(B){n&&n(B),B.defaultPrevented||M(B)}let F=H.createElement("a",{...f,...R,href:g||x,onClick:w||i?n:I,ref:aT(m,j),target:c,"data-discover":!y&&t==="render"?"true":void 0});return _&&!y?H.createElement(H.Fragment,null,F,H.createElement(rT,{page:x})):F});xn.displayName="Link";var Yd=H.forwardRef(function({"aria-current":n="page",caseSensitive:t=!1,className:s="",end:l=!1,style:i,to:o,viewTransition:d,children:c,...a},u){let h=yu(o,{relative:a.relative}),f=ta(),m=H.useContext(bu),{navigator:b,basename:y}=H.useContext(va),g=m!=null&&gT(h)&&d===!0,w=b.encodeLocation?b.encodeLocation(h).pathname:h.pathname,x=f.pathname,_=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;t||(x=x.toLowerCase(),_=_?_.toLowerCase():null,w=w.toLowerCase()),_&&y&&(_=Ys(_,y)||_);const j=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let R=x===w||!l&&x.startsWith(w)&&x.charAt(j)==="/",M=_!=null&&(_===w||!l&&_.startsWith(w)&&_.charAt(w.length)==="/"),I={isActive:R,isPending:M,isTransitioning:g},F=R?n:void 0,B;typeof s=="function"?B=s(I):B=[s,R?"active":null,M?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let U=typeof i=="function"?i(I):i;return H.createElement(xn,{...a,"aria-current":F,className:B,ref:u,style:U,to:o,viewTransition:d},typeof c=="function"?c(I):c)});Yd.displayName="NavLink";var cT=H.forwardRef(({discover:e="render",fetcherKey:n,navigate:t,reloadDocument:s,replace:l,state:i,method:o=gh,action:d,onSubmit:c,relative:a,preventScrollReset:u,viewTransition:h,...f},m)=>{let b=mT(),y=pT(d,{relative:a}),g=o.toLowerCase()==="get"?"get":"post",w=typeof d=="string"&&wj.test(d),x=_=>{if(c&&c(_),_.defaultPrevented)return;_.preventDefault();let j=_.nativeEvent.submitter,R=j?.getAttribute("formmethod")||o;b(j||_.currentTarget,{fetcherKey:n,method:R,navigate:t,replace:l,state:i,relative:a,preventScrollReset:u,viewTransition:h})};return H.createElement("form",{ref:m,method:g,action:y,onSubmit:s?c:x,...f,"data-discover":!w&&e==="render"?"true":void 0})});cT.displayName="Form";function dT(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _j(e){let n=H.useContext(tl);return yr(n,dT(e)),n}function uT(e,{target:n,replace:t,state:s,preventScrollReset:l,relative:i,viewTransition:o}={}){let d=kn(),c=ta(),a=yu(e,{relative:i});return H.useCallback(u=>{if(qR(u,n)){u.preventDefault();let h=t!==void 0?t:to(c)===to(a);d(e,{replace:h,state:s,preventScrollReset:l,relative:i,viewTransition:o})}},[c,d,a,t,s,n,e,l,i,o])}function vu(e){sn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let n=H.useRef(Rb(e)),t=H.useRef(!1),s=ta(),l=H.useMemo(()=>$R(s.search,t.current?null:n.current),[s.search]),i=kn(),o=H.useCallback((d,c)=>{const a=Rb(typeof d=="function"?d(new URLSearchParams(l)):d);t.current=!0,i("?"+a,c)},[i,l]);return[l,o]}var fT=0,hT=()=>`__${String(++fT)}__`;function mT(){let{router:e}=_j("useSubmit"),{basename:n}=H.useContext(va),t=kR();return H.useCallback(async(s,l={})=>{let{action:i,method:o,encType:d,formData:c,body:a}=VR(s,n);if(l.navigate===!1){let u=l.fetcherKey||hT();await e.fetch(u,t,l.action||i,{preventScrollReset:l.preventScrollReset,formData:c,body:a,formMethod:l.method||o,formEncType:l.encType||d,flushSync:l.flushSync})}else await e.navigate(l.action||i,{preventScrollReset:l.preventScrollReset,formData:c,body:a,formMethod:l.method||o,formEncType:l.encType||d,replace:l.replace,state:l.state,fromRouteId:t,flushSync:l.flushSync,viewTransition:l.viewTransition})},[e,n,t])}function pT(e,{relative:n}={}){let{basename:t}=H.useContext(va),s=H.useContext(ea);yr(s,"useFormAction must be used inside a RouteContext");let[l]=s.matches.slice(-1),i={...yu(e||".",{relative:n})},o=ta();if(e==null){i.search=o.search;let d=new URLSearchParams(i.search),c=d.getAll("index");if(c.some(u=>u==="")){d.delete("index"),c.filter(h=>h).forEach(h=>d.append("index",h));let u=d.toString();i.search=u?`?${u}`:""}}return(!e||e===".")&&l.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(i.pathname=i.pathname==="/"?t:Da([t,i.pathname])),to(i)}function gT(e,{relative:n}={}){let t=H.useContext(by);yr(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=_j("useViewTransitionState"),l=yu(e,{relative:n});if(!t.isTransitioning)return!1;let i=Ys(t.currentLocation.pathname,s)||t.currentLocation.pathname,o=Ys(t.nextLocation.pathname,s)||t.nextLocation.pathname;return Th(l.pathname,o)!=null||Th(l.pathname,i)!=null}var cs=dy();const bT=cm(cs);function yT(e){return H.createElement(OR,{flushSync:cs.flushSync,...e})}const xT=(e,n,t,s)=>{const l=[t,{code:n,...s||{}}];if(e?.services?.logger?.forward)return e.services.logger.forward(l,"warn","react-i18next::",!0);Uo(l[0])&&(l[0]=`react-i18next:: ${l[0]}`),e?.services?.logger?.warn?e.services.logger.warn(...l):console?.warn&&console.warn(...l)},Qw={},Tb=(e,n,t,s)=>{Uo(t)&&Qw[t]||(Uo(t)&&(Qw[t]=new Date),xT(e,n,t,s))},jj=(e,n)=>()=>{if(e.isInitialized)n();else{const t=()=>{setTimeout(()=>{e.off("initialized",t)},0),n()};e.on("initialized",t)}},Ab=(e,n,t)=>{e.loadNamespaces(n,jj(e,t))},Gw=(e,n,t,s)=>{if(Uo(t)&&(t=[t]),e.options.preload&&e.options.preload.indexOf(n)>-1)return Ab(e,t,s);t.forEach(l=>{e.options.ns.indexOf(l)<0&&e.options.ns.push(l)}),e.loadLanguages(n,jj(e,s))},vT=(e,n,t={})=>!n.languages||!n.languages.length?(Tb(n,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:n.languages}),!0):n.hasLoadedNamespace(e,{lng:t.lng,precheck:(s,l)=>{if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&s.services.backendConnector.backend&&s.isLanguageChangingTo&&!l(s.isLanguageChangingTo,e))return!1}}),Uo=e=>typeof e=="string",wT=e=>typeof e=="object"&&e!==null,_T=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,jT={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},NT=e=>jT[e],CT=e=>e.replace(_T,NT);let Mb={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:CT};const ST=(e={})=>{Mb={...Mb,...e}},kT=()=>Mb;let Nj;const ET=e=>{Nj=e},RT=()=>Nj,TT={type:"3rdParty",init(e){ST(e.options.react),ET(e)}},AT=H.createContext();class MT{constructor(){this.usedNamespaces={}}addUsedNamespaces(n){n.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const OT=(e,n)=>{const t=H.useRef();return H.useEffect(()=>{t.current=e},[e,n]),t.current},Cj=(e,n,t,s)=>e.getFixedT(n,t,s),DT=(e,n,t,s)=>H.useCallback(Cj(e,n,t,s),[e,n,t,s]),qt=(e,n={})=>{const{i18n:t}=n,{i18n:s,defaultNS:l}=H.useContext(AT)||{},i=t||s||RT();if(i&&!i.reportNamespaces&&(i.reportNamespaces=new MT),!i){Tb(i,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const j=(M,I)=>Uo(I)?I:wT(I)&&Uo(I.defaultValue)?I.defaultValue:Array.isArray(M)?M[M.length-1]:M,R=[j,{},!1];return R.t=j,R.i18n={},R.ready=!1,R}i.options.react?.wait&&Tb(i,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const o={...kT(),...i.options.react,...n},{useSuspense:d,keyPrefix:c}=o;let a=l||i.options?.defaultNS;a=Uo(a)?[a]:a||["translation"],i.reportNamespaces.addUsedNamespaces?.(a);const u=(i.isInitialized||i.initializedStoreOnce)&&a.every(j=>vT(j,i,o)),h=DT(i,n.lng||null,o.nsMode==="fallback"?a:a[0],c),f=()=>h,m=()=>Cj(i,n.lng||null,o.nsMode==="fallback"?a:a[0],c),[b,y]=H.useState(f);let g=a.join();n.lng&&(g=`${n.lng}${g}`);const w=OT(g),x=H.useRef(!0);H.useEffect(()=>{const{bindI18n:j,bindI18nStore:R}=o;x.current=!0,!u&&!d&&(n.lng?Gw(i,n.lng,a,()=>{x.current&&y(m)}):Ab(i,a,()=>{x.current&&y(m)})),u&&w&&w!==g&&x.current&&y(m);const M=()=>{x.current&&y(m)};return j&&i?.on(j,M),R&&i?.store.on(R,M),()=>{x.current=!1,i&&j&&j?.split(" ").forEach(I=>i.off(I,M)),R&&i&&R.split(" ").forEach(I=>i.store.off(I,M))}},[i,g]),H.useEffect(()=>{x.current&&u&&y(f)},[i,c,u]);const _=[b,i,u];if(_.t=b,_.i18n=i,_.ready=u,u||!u&&!d)return _;throw new Promise(j=>{n.lng?Gw(i,n.lng,a,()=>j()):Ab(i,a,()=>j())})},Xw=e=>{let n;const t=new Set,s=(a,u)=>{const h=typeof a=="function"?a(n):a;if(!Object.is(h,n)){const f=n;n=u??(typeof h!="object"||h===null)?h:Object.assign({},n,h),t.forEach(m=>m(n,f))}},l=()=>n,d={setState:s,getState:l,getInitialState:()=>c,subscribe:a=>(t.add(a),()=>t.delete(a))},c=n=e(s,l,d);return d},PT=e=>e?Xw(e):Xw,IT=e=>e;function FT(e,n=IT){const t=De.useSyncExternalStore(e.subscribe,De.useCallback(()=>n(e.getState()),[e,n]),De.useCallback(()=>n(e.getInitialState()),[e,n]));return De.useDebugValue(t),t}const Yw=e=>{const n=PT(e),t=s=>FT(n,s);return Object.assign(t,n),t},mm=e=>e?Yw(e):Yw;function LT(e,n){let t;try{t=e()}catch{return}return{getItem:l=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),d=(i=t.getItem(l))!=null?i:null;return d instanceof Promise?d.then(o):o(d)},setItem:(l,i)=>t.setItem(l,JSON.stringify(i,void 0)),removeItem:l=>t.removeItem(l)}}const Ob=e=>n=>{try{const t=e(n);return t instanceof Promise?t:{then(s){return Ob(s)(t)},catch(s){return this}}}catch(t){return{then(s){return this},catch(s){return Ob(s)(t)}}}},zT=(e,n)=>(t,s,l)=>{let i={storage:LT(()=>localStorage),partialize:y=>y,version:0,merge:(y,g)=>({...g,...y}),...n},o=!1;const d=new Set,c=new Set;let a=i.storage;if(!a)return e((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),t(...y)},s,l);const u=()=>{const y=i.partialize({...s()});return a.setItem(i.name,{state:y,version:i.version})},h=l.setState;l.setState=(y,g)=>{h(y,g),u()};const f=e((...y)=>{t(...y),u()},s,l);l.getInitialState=()=>f;let m;const b=()=>{var y,g;if(!a)return;o=!1,d.forEach(x=>{var _;return x((_=s())!=null?_:f)});const w=((g=i.onRehydrateStorage)==null?void 0:g.call(i,(y=s())!=null?y:f))||void 0;return Ob(a.getItem.bind(a))(i.name).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==i.version){if(i.migrate){const _=i.migrate(x.state,x.version);return _ instanceof Promise?_.then(j=>[!0,j]):[!0,_]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,x.state];return[!1,void 0]}).then(x=>{var _;const[j,R]=x;if(m=i.merge(R,(_=s())!=null?_:f),t(m,!0),j)return u()}).then(()=>{w?.(m,void 0),m=s(),o=!0,c.forEach(x=>x(m))}).catch(x=>{w?.(void 0,x)})};return l.persist={setOptions:y=>{i={...i,...y},y.storage&&(a=y.storage)},clearStorage:()=>{a?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>b(),hasHydrated:()=>o,onHydrate:y=>(d.add(y),()=>{d.delete(y)}),onFinishHydration:y=>(c.add(y),()=>{c.delete(y)})},i.skipHydration||b(),m||f},BT=zT,Eg=e=>{if(!e)return null;const n=e.capabilities?.manage_options||!1,t=e.employee_id!=null;return n&&t?"both":n?"admin":t?"employee":null},Zw={status:"idle",user:null,token:null,nonce:null,lastNonceRefresh:null,userRole:null},Dn=mm()(BT((e,n)=>({...Zw,login:(t,s,l)=>{const i=Eg(l),o=btoa(`${t}:${s}`);e({status:"authenticated",user:l,token:o,nonce:null,lastNonceRefresh:null,userRole:i})},logout:()=>{e({...Zw,status:"unauthenticated"})},setNonce:t=>{e({nonce:t,lastNonceRefresh:Date.now()})},isEmployee:()=>{const{user:t}=n();return t?.employee_id!=null},isAdmin:()=>{const{user:t}=n();return t?.capabilities?.manage_options||!1},getUserRole:()=>{const{user:t}=n();return t?Eg(t):null}}),{name:"hulool-auth-storage",partialize:e=>({token:e.token,user:e.user,nonce:e.nonce,lastNonceRefresh:e.lastNonceRefresh}),onRehydrateStorage:()=>e=>{e&&(e.token&&e.user?(e.status="authenticated",e.userRole=Eg(e.user)):(e.status="unauthenticated",e.userRole=null))}}));function Sj(e,n){return function(){return e.apply(n,arguments)}}const{toString:qT}=Object.prototype,{getPrototypeOf:Ny}=Object,{iterator:pm,toStringTag:kj}=Symbol,gm=(e=>n=>{const t=qT.call(n);return e[t]||(e[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),wa=e=>(e=e.toLowerCase(),n=>gm(n)===e),bm=e=>n=>typeof n===e,{isArray:fc}=Array,iu=bm("undefined");function wu(e){return e!==null&&!iu(e)&&e.constructor!==null&&!iu(e.constructor)&&fs(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Ej=wa("ArrayBuffer");function $T(e){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(e):n=e&&e.buffer&&Ej(e.buffer),n}const UT=bm("string"),fs=bm("function"),Rj=bm("number"),_u=e=>e!==null&&typeof e=="object",HT=e=>e===!0||e===!1,yh=e=>{if(gm(e)!=="object")return!1;const n=Ny(e);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(kj in e)&&!(pm in e)},VT=e=>{if(!_u(e)||wu(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},KT=wa("Date"),WT=wa("File"),QT=wa("Blob"),GT=wa("FileList"),XT=e=>_u(e)&&fs(e.pipe),YT=e=>{let n;return e&&(typeof FormData=="function"&&e instanceof FormData||fs(e.append)&&((n=gm(e))==="formdata"||n==="object"&&fs(e.toString)&&e.toString()==="[object FormData]"))},ZT=wa("URLSearchParams"),[JT,eA,tA,rA]=["ReadableStream","Request","Response","Headers"].map(wa),nA=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ju(e,n,{allOwnKeys:t=!1}={}){if(e===null||typeof e>"u")return;let s,l;if(typeof e!="object"&&(e=[e]),fc(e))for(s=0,l=e.length;s<l;s++)n.call(null,e[s],s,e);else{if(wu(e))return;const i=t?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let d;for(s=0;s<o;s++)d=i[s],n.call(null,e[d],d,e)}}function Tj(e,n){if(wu(e))return null;n=n.toLowerCase();const t=Object.keys(e);let s=t.length,l;for(;s-- >0;)if(l=t[s],n===l.toLowerCase())return l;return null}const Lo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Aj=e=>!iu(e)&&e!==Lo;function Db(){const{caseless:e}=Aj(this)&&this||{},n={},t=(s,l)=>{const i=e&&Tj(n,l)||l;yh(n[i])&&yh(s)?n[i]=Db(n[i],s):yh(s)?n[i]=Db({},s):fc(s)?n[i]=s.slice():n[i]=s};for(let s=0,l=arguments.length;s<l;s++)arguments[s]&&ju(arguments[s],t);return n}const sA=(e,n,t,{allOwnKeys:s}={})=>(ju(n,(l,i)=>{t&&fs(l)?e[i]=Sj(l,t):e[i]=l},{allOwnKeys:s}),e),aA=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),iA=(e,n,t,s)=>{e.prototype=Object.create(n.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:n.prototype}),t&&Object.assign(e.prototype,t)},oA=(e,n,t,s)=>{let l,i,o;const d={};if(n=n||{},e==null)return n;do{for(l=Object.getOwnPropertyNames(e),i=l.length;i-- >0;)o=l[i],(!s||s(o,e,n))&&!d[o]&&(n[o]=e[o],d[o]=!0);e=t!==!1&&Ny(e)}while(e&&(!t||t(e,n))&&e!==Object.prototype);return n},lA=(e,n,t)=>{e=String(e),(t===void 0||t>e.length)&&(t=e.length),t-=n.length;const s=e.indexOf(n,t);return s!==-1&&s===t},cA=e=>{if(!e)return null;if(fc(e))return e;let n=e.length;if(!Rj(n))return null;const t=new Array(n);for(;n-- >0;)t[n]=e[n];return t},dA=(e=>n=>e&&n instanceof e)(typeof Uint8Array<"u"&&Ny(Uint8Array)),uA=(e,n)=>{const s=(e&&e[pm]).call(e);let l;for(;(l=s.next())&&!l.done;){const i=l.value;n.call(e,i[0],i[1])}},fA=(e,n)=>{let t;const s=[];for(;(t=e.exec(n))!==null;)s.push(t);return s},hA=wa("HTMLFormElement"),mA=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,s,l){return s.toUpperCase()+l}),Jw=(({hasOwnProperty:e})=>(n,t)=>e.call(n,t))(Object.prototype),pA=wa("RegExp"),Mj=(e,n)=>{const t=Object.getOwnPropertyDescriptors(e),s={};ju(t,(l,i)=>{let o;(o=n(l,i,e))!==!1&&(s[i]=o||l)}),Object.defineProperties(e,s)},gA=e=>{Mj(e,(n,t)=>{if(fs(e)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const s=e[t];if(fs(s)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},bA=(e,n)=>{const t={},s=l=>{l.forEach(i=>{t[i]=!0})};return fc(e)?s(e):s(String(e).split(n)),t},yA=()=>{},xA=(e,n)=>e!=null&&Number.isFinite(e=+e)?e:n;function vA(e){return!!(e&&fs(e.append)&&e[kj]==="FormData"&&e[pm])}const wA=e=>{const n=new Array(10),t=(s,l)=>{if(_u(s)){if(n.indexOf(s)>=0)return;if(wu(s))return s;if(!("toJSON"in s)){n[l]=s;const i=fc(s)?[]:{};return ju(s,(o,d)=>{const c=t(o,l+1);!iu(c)&&(i[d]=c)}),n[l]=void 0,i}}return s};return t(e,0)},_A=wa("AsyncFunction"),jA=e=>e&&(_u(e)||fs(e))&&fs(e.then)&&fs(e.catch),Oj=((e,n)=>e?setImmediate:n?((t,s)=>(Lo.addEventListener("message",({source:l,data:i})=>{l===Lo&&i===t&&s.length&&s.shift()()},!1),l=>{s.push(l),Lo.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",fs(Lo.postMessage)),NA=typeof queueMicrotask<"u"?queueMicrotask.bind(Lo):typeof process<"u"&&process.nextTick||Oj,CA=e=>e!=null&&fs(e[pm]),Ve={isArray:fc,isArrayBuffer:Ej,isBuffer:wu,isFormData:YT,isArrayBufferView:$T,isString:UT,isNumber:Rj,isBoolean:HT,isObject:_u,isPlainObject:yh,isEmptyObject:VT,isReadableStream:JT,isRequest:eA,isResponse:tA,isHeaders:rA,isUndefined:iu,isDate:KT,isFile:WT,isBlob:QT,isRegExp:pA,isFunction:fs,isStream:XT,isURLSearchParams:ZT,isTypedArray:dA,isFileList:GT,forEach:ju,merge:Db,extend:sA,trim:nA,stripBOM:aA,inherits:iA,toFlatObject:oA,kindOf:gm,kindOfTest:wa,endsWith:lA,toArray:cA,forEachEntry:uA,matchAll:fA,isHTMLForm:hA,hasOwnProperty:Jw,hasOwnProp:Jw,reduceDescriptors:Mj,freezeMethods:gA,toObjectSet:bA,toCamelCase:mA,noop:yA,toFiniteNumber:xA,findKey:Tj,global:Lo,isContextDefined:Aj,isSpecCompliantForm:vA,toJSONObject:wA,isAsyncFn:_A,isThenable:jA,setImmediate:Oj,asap:NA,isIterable:CA};function cr(e,n,t,s,l){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",n&&(this.code=n),t&&(this.config=t),s&&(this.request=s),l&&(this.response=l,this.status=l.status?l.status:null)}Ve.inherits(cr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ve.toJSONObject(this.config),code:this.code,status:this.status}}});const Dj=cr.prototype,Pj={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Pj[e]={value:e}});Object.defineProperties(cr,Pj);Object.defineProperty(Dj,"isAxiosError",{value:!0});cr.from=(e,n,t,s,l,i)=>{const o=Object.create(Dj);return Ve.toFlatObject(e,o,function(c){return c!==Error.prototype},d=>d!=="isAxiosError"),cr.call(o,e.message,n,t,s,l),o.cause=e,o.name=e.name,i&&Object.assign(o,i),o};const SA=null;function Pb(e){return Ve.isPlainObject(e)||Ve.isArray(e)}function Ij(e){return Ve.endsWith(e,"[]")?e.slice(0,-2):e}function e_(e,n,t){return e?e.concat(n).map(function(l,i){return l=Ij(l),!t&&i?"["+l+"]":l}).join(t?".":""):n}function kA(e){return Ve.isArray(e)&&!e.some(Pb)}const EA=Ve.toFlatObject(Ve,{},null,function(n){return/^is[A-Z]/.test(n)});function ym(e,n,t){if(!Ve.isObject(e))throw new TypeError("target must be an object");n=n||new FormData,t=Ve.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,g){return!Ve.isUndefined(g[y])});const s=t.metaTokens,l=t.visitor||u,i=t.dots,o=t.indexes,c=(t.Blob||typeof Blob<"u"&&Blob)&&Ve.isSpecCompliantForm(n);if(!Ve.isFunction(l))throw new TypeError("visitor must be a function");function a(b){if(b===null)return"";if(Ve.isDate(b))return b.toISOString();if(Ve.isBoolean(b))return b.toString();if(!c&&Ve.isBlob(b))throw new cr("Blob is not supported. Use a Buffer instead.");return Ve.isArrayBuffer(b)||Ve.isTypedArray(b)?c&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function u(b,y,g){let w=b;if(b&&!g&&typeof b=="object"){if(Ve.endsWith(y,"{}"))y=s?y:y.slice(0,-2),b=JSON.stringify(b);else if(Ve.isArray(b)&&kA(b)||(Ve.isFileList(b)||Ve.endsWith(y,"[]"))&&(w=Ve.toArray(b)))return y=Ij(y),w.forEach(function(_,j){!(Ve.isUndefined(_)||_===null)&&n.append(o===!0?e_([y],j,i):o===null?y:y+"[]",a(_))}),!1}return Pb(b)?!0:(n.append(e_(g,y,i),a(b)),!1)}const h=[],f=Object.assign(EA,{defaultVisitor:u,convertValue:a,isVisitable:Pb});function m(b,y){if(!Ve.isUndefined(b)){if(h.indexOf(b)!==-1)throw Error("Circular reference detected in "+y.join("."));h.push(b),Ve.forEach(b,function(w,x){(!(Ve.isUndefined(w)||w===null)&&l.call(n,w,Ve.isString(x)?x.trim():x,y,f))===!0&&m(w,y?y.concat(x):[x])}),h.pop()}}if(!Ve.isObject(e))throw new TypeError("data must be an object");return m(e),n}function t_(e){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return n[s]})}function Cy(e,n){this._pairs=[],e&&ym(e,this,n)}const Fj=Cy.prototype;Fj.append=function(n,t){this._pairs.push([n,t])};Fj.toString=function(n){const t=n?function(s){return n.call(this,s,t_)}:t_;return this._pairs.map(function(l){return t(l[0])+"="+t(l[1])},"").join("&")};function RA(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Lj(e,n,t){if(!n)return e;const s=t&&t.encode||RA;Ve.isFunction(t)&&(t={serialize:t});const l=t&&t.serialize;let i;if(l?i=l(n,t):i=Ve.isURLSearchParams(n)?n.toString():new Cy(n,t).toString(s),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class r_{constructor(){this.handlers=[]}use(n,t,s){return this.handlers.push({fulfilled:n,rejected:t,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){Ve.forEach(this.handlers,function(s){s!==null&&n(s)})}}const zj={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},TA=typeof URLSearchParams<"u"?URLSearchParams:Cy,AA=typeof FormData<"u"?FormData:null,MA=typeof Blob<"u"?Blob:null,OA={isBrowser:!0,classes:{URLSearchParams:TA,FormData:AA,Blob:MA},protocols:["http","https","file","blob","url","data"]},Sy=typeof window<"u"&&typeof document<"u",Ib=typeof navigator=="object"&&navigator||void 0,DA=Sy&&(!Ib||["ReactNative","NativeScript","NS"].indexOf(Ib.product)<0),PA=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",IA=Sy&&window.location.href||"http://localhost",FA=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Sy,hasStandardBrowserEnv:DA,hasStandardBrowserWebWorkerEnv:PA,navigator:Ib,origin:IA},Symbol.toStringTag,{value:"Module"})),Hn={...FA,...OA};function LA(e,n){return ym(e,new Hn.classes.URLSearchParams,{visitor:function(t,s,l,i){return Hn.isNode&&Ve.isBuffer(t)?(this.append(s,t.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...n})}function zA(e){return Ve.matchAll(/\w+|\[(\w*)]/g,e).map(n=>n[0]==="[]"?"":n[1]||n[0])}function BA(e){const n={},t=Object.keys(e);let s;const l=t.length;let i;for(s=0;s<l;s++)i=t[s],n[i]=e[i];return n}function Bj(e){function n(t,s,l,i){let o=t[i++];if(o==="__proto__")return!0;const d=Number.isFinite(+o),c=i>=t.length;return o=!o&&Ve.isArray(l)?l.length:o,c?(Ve.hasOwnProp(l,o)?l[o]=[l[o],s]:l[o]=s,!d):((!l[o]||!Ve.isObject(l[o]))&&(l[o]=[]),n(t,s,l[o],i)&&Ve.isArray(l[o])&&(l[o]=BA(l[o])),!d)}if(Ve.isFormData(e)&&Ve.isFunction(e.entries)){const t={};return Ve.forEachEntry(e,(s,l)=>{n(zA(s),l,t,0)}),t}return null}function qA(e,n,t){if(Ve.isString(e))try{return(n||JSON.parse)(e),Ve.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(t||JSON.stringify)(e)}const Nu={transitional:zj,adapter:["xhr","http","fetch"],transformRequest:[function(n,t){const s=t.getContentType()||"",l=s.indexOf("application/json")>-1,i=Ve.isObject(n);if(i&&Ve.isHTMLForm(n)&&(n=new FormData(n)),Ve.isFormData(n))return l?JSON.stringify(Bj(n)):n;if(Ve.isArrayBuffer(n)||Ve.isBuffer(n)||Ve.isStream(n)||Ve.isFile(n)||Ve.isBlob(n)||Ve.isReadableStream(n))return n;if(Ve.isArrayBufferView(n))return n.buffer;if(Ve.isURLSearchParams(n))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let d;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return LA(n,this.formSerializer).toString();if((d=Ve.isFileList(n))||s.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return ym(d?{"files[]":n}:n,c&&new c,this.formSerializer)}}return i||l?(t.setContentType("application/json",!1),qA(n)):n}],transformResponse:[function(n){const t=this.transitional||Nu.transitional,s=t&&t.forcedJSONParsing,l=this.responseType==="json";if(Ve.isResponse(n)||Ve.isReadableStream(n))return n;if(n&&Ve.isString(n)&&(s&&!this.responseType||l)){const o=!(t&&t.silentJSONParsing)&&l;try{return JSON.parse(n)}catch(d){if(o)throw d.name==="SyntaxError"?cr.from(d,cr.ERR_BAD_RESPONSE,this,null,this.response):d}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Hn.classes.FormData,Blob:Hn.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ve.forEach(["delete","get","head","post","put","patch"],e=>{Nu.headers[e]={}});const $A=Ve.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),UA=e=>{const n={};let t,s,l;return e&&e.split(`
`).forEach(function(o){l=o.indexOf(":"),t=o.substring(0,l).trim().toLowerCase(),s=o.substring(l+1).trim(),!(!t||n[t]&&$A[t])&&(t==="set-cookie"?n[t]?n[t].push(s):n[t]=[s]:n[t]=n[t]?n[t]+", "+s:s)}),n},n_=Symbol("internals");function kd(e){return e&&String(e).trim().toLowerCase()}function xh(e){return e===!1||e==null?e:Ve.isArray(e)?e.map(xh):String(e)}function HA(e){const n=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=t.exec(e);)n[s[1]]=s[2];return n}const VA=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Rg(e,n,t,s,l){if(Ve.isFunction(s))return s.call(this,n,t);if(l&&(n=t),!!Ve.isString(n)){if(Ve.isString(s))return n.indexOf(s)!==-1;if(Ve.isRegExp(s))return s.test(n)}}function KA(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,t,s)=>t.toUpperCase()+s)}function WA(e,n){const t=Ve.toCamelCase(" "+n);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+t,{value:function(l,i,o){return this[s].call(this,n,l,i,o)},configurable:!0})})}let hs=class{constructor(n){n&&this.set(n)}set(n,t,s){const l=this;function i(d,c,a){const u=kd(c);if(!u)throw new Error("header name must be a non-empty string");const h=Ve.findKey(l,u);(!h||l[h]===void 0||a===!0||a===void 0&&l[h]!==!1)&&(l[h||c]=xh(d))}const o=(d,c)=>Ve.forEach(d,(a,u)=>i(a,u,c));if(Ve.isPlainObject(n)||n instanceof this.constructor)o(n,t);else if(Ve.isString(n)&&(n=n.trim())&&!VA(n))o(UA(n),t);else if(Ve.isObject(n)&&Ve.isIterable(n)){let d={},c,a;for(const u of n){if(!Ve.isArray(u))throw TypeError("Object iterator must return a key-value pair");d[a=u[0]]=(c=d[a])?Ve.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}o(d,t)}else n!=null&&i(t,n,s);return this}get(n,t){if(n=kd(n),n){const s=Ve.findKey(this,n);if(s){const l=this[s];if(!t)return l;if(t===!0)return HA(l);if(Ve.isFunction(t))return t.call(this,l,s);if(Ve.isRegExp(t))return t.exec(l);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,t){if(n=kd(n),n){const s=Ve.findKey(this,n);return!!(s&&this[s]!==void 0&&(!t||Rg(this,this[s],s,t)))}return!1}delete(n,t){const s=this;let l=!1;function i(o){if(o=kd(o),o){const d=Ve.findKey(s,o);d&&(!t||Rg(s,s[d],d,t))&&(delete s[d],l=!0)}}return Ve.isArray(n)?n.forEach(i):i(n),l}clear(n){const t=Object.keys(this);let s=t.length,l=!1;for(;s--;){const i=t[s];(!n||Rg(this,this[i],i,n,!0))&&(delete this[i],l=!0)}return l}normalize(n){const t=this,s={};return Ve.forEach(this,(l,i)=>{const o=Ve.findKey(s,i);if(o){t[o]=xh(l),delete t[i];return}const d=n?KA(i):String(i).trim();d!==i&&delete t[i],t[d]=xh(l),s[d]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const t=Object.create(null);return Ve.forEach(this,(s,l)=>{s!=null&&s!==!1&&(t[l]=n&&Ve.isArray(s)?s.join(", "):s)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,t])=>n+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...t){const s=new this(n);return t.forEach(l=>s.set(l)),s}static accessor(n){const s=(this[n_]=this[n_]={accessors:{}}).accessors,l=this.prototype;function i(o){const d=kd(o);s[d]||(WA(l,o),s[d]=!0)}return Ve.isArray(n)?n.forEach(i):i(n),this}};hs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ve.reduceDescriptors(hs.prototype,({value:e},n)=>{let t=n[0].toUpperCase()+n.slice(1);return{get:()=>e,set(s){this[t]=s}}});Ve.freezeMethods(hs);function Tg(e,n){const t=this||Nu,s=n||t,l=hs.from(s.headers);let i=s.data;return Ve.forEach(e,function(d){i=d.call(t,i,l.normalize(),n?n.status:void 0)}),l.normalize(),i}function qj(e){return!!(e&&e.__CANCEL__)}function hc(e,n,t){cr.call(this,e??"canceled",cr.ERR_CANCELED,n,t),this.name="CanceledError"}Ve.inherits(hc,cr,{__CANCEL__:!0});function $j(e,n,t){const s=t.config.validateStatus;!t.status||!s||s(t.status)?e(t):n(new cr("Request failed with status code "+t.status,[cr.ERR_BAD_REQUEST,cr.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function QA(e){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return n&&n[1]||""}function GA(e,n){e=e||10;const t=new Array(e),s=new Array(e);let l=0,i=0,o;return n=n!==void 0?n:1e3,function(c){const a=Date.now(),u=s[i];o||(o=a),t[l]=c,s[l]=a;let h=i,f=0;for(;h!==l;)f+=t[h++],h=h%e;if(l=(l+1)%e,l===i&&(i=(i+1)%e),a-o<n)return;const m=u&&a-u;return m?Math.round(f*1e3/m):void 0}}function XA(e,n){let t=0,s=1e3/n,l,i;const o=(a,u=Date.now())=>{t=u,l=null,i&&(clearTimeout(i),i=null),e(...a)};return[(...a)=>{const u=Date.now(),h=u-t;h>=s?o(a,u):(l=a,i||(i=setTimeout(()=>{i=null,o(l)},s-h)))},()=>l&&o(l)]}const Oh=(e,n,t=3)=>{let s=0;const l=GA(50,250);return XA(i=>{const o=i.loaded,d=i.lengthComputable?i.total:void 0,c=o-s,a=l(c),u=o<=d;s=o;const h={loaded:o,total:d,progress:d?o/d:void 0,bytes:c,rate:a||void 0,estimated:a&&d&&u?(d-o)/a:void 0,event:i,lengthComputable:d!=null,[n?"download":"upload"]:!0};e(h)},t)},s_=(e,n)=>{const t=e!=null;return[s=>n[0]({lengthComputable:t,total:e,loaded:s}),n[1]]},a_=e=>(...n)=>Ve.asap(()=>e(...n)),YA=Hn.hasStandardBrowserEnv?((e,n)=>t=>(t=new URL(t,Hn.origin),e.protocol===t.protocol&&e.host===t.host&&(n||e.port===t.port)))(new URL(Hn.origin),Hn.navigator&&/(msie|trident)/i.test(Hn.navigator.userAgent)):()=>!0,ZA=Hn.hasStandardBrowserEnv?{write(e,n,t,s,l,i){const o=[e+"="+encodeURIComponent(n)];Ve.isNumber(t)&&o.push("expires="+new Date(t).toGMTString()),Ve.isString(s)&&o.push("path="+s),Ve.isString(l)&&o.push("domain="+l),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const n=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function JA(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function eM(e,n){return n?e.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):e}function Uj(e,n,t){let s=!JA(n);return e&&(s||t==!1)?eM(e,n):n}const i_=e=>e instanceof hs?{...e}:e;function Xo(e,n){n=n||{};const t={};function s(a,u,h,f){return Ve.isPlainObject(a)&&Ve.isPlainObject(u)?Ve.merge.call({caseless:f},a,u):Ve.isPlainObject(u)?Ve.merge({},u):Ve.isArray(u)?u.slice():u}function l(a,u,h,f){if(Ve.isUndefined(u)){if(!Ve.isUndefined(a))return s(void 0,a,h,f)}else return s(a,u,h,f)}function i(a,u){if(!Ve.isUndefined(u))return s(void 0,u)}function o(a,u){if(Ve.isUndefined(u)){if(!Ve.isUndefined(a))return s(void 0,a)}else return s(void 0,u)}function d(a,u,h){if(h in n)return s(a,u);if(h in e)return s(void 0,a)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:d,headers:(a,u,h)=>l(i_(a),i_(u),h,!0)};return Ve.forEach(Object.keys({...e,...n}),function(u){const h=c[u]||l,f=h(e[u],n[u],u);Ve.isUndefined(f)&&h!==d||(t[u]=f)}),t}const Hj=e=>{const n=Xo({},e);let{data:t,withXSRFToken:s,xsrfHeaderName:l,xsrfCookieName:i,headers:o,auth:d}=n;n.headers=o=hs.from(o),n.url=Lj(Uj(n.baseURL,n.url,n.allowAbsoluteUrls),e.params,e.paramsSerializer),d&&o.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):"")));let c;if(Ve.isFormData(t)){if(Hn.hasStandardBrowserEnv||Hn.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[a,...u]=c?c.split(";").map(h=>h.trim()).filter(Boolean):[];o.setContentType([a||"multipart/form-data",...u].join("; "))}}if(Hn.hasStandardBrowserEnv&&(s&&Ve.isFunction(s)&&(s=s(n)),s||s!==!1&&YA(n.url))){const a=l&&i&&ZA.read(i);a&&o.set(l,a)}return n},tM=typeof XMLHttpRequest<"u",rM=tM&&function(e){return new Promise(function(t,s){const l=Hj(e);let i=l.data;const o=hs.from(l.headers).normalize();let{responseType:d,onUploadProgress:c,onDownloadProgress:a}=l,u,h,f,m,b;function y(){m&&m(),b&&b(),l.cancelToken&&l.cancelToken.unsubscribe(u),l.signal&&l.signal.removeEventListener("abort",u)}let g=new XMLHttpRequest;g.open(l.method.toUpperCase(),l.url,!0),g.timeout=l.timeout;function w(){if(!g)return;const _=hs.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),R={data:!d||d==="text"||d==="json"?g.responseText:g.response,status:g.status,statusText:g.statusText,headers:_,config:e,request:g};$j(function(I){t(I),y()},function(I){s(I),y()},R),g=null}"onloadend"in g?g.onloadend=w:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(w)},g.onabort=function(){g&&(s(new cr("Request aborted",cr.ECONNABORTED,e,g)),g=null)},g.onerror=function(){s(new cr("Network Error",cr.ERR_NETWORK,e,g)),g=null},g.ontimeout=function(){let j=l.timeout?"timeout of "+l.timeout+"ms exceeded":"timeout exceeded";const R=l.transitional||zj;l.timeoutErrorMessage&&(j=l.timeoutErrorMessage),s(new cr(j,R.clarifyTimeoutError?cr.ETIMEDOUT:cr.ECONNABORTED,e,g)),g=null},i===void 0&&o.setContentType(null),"setRequestHeader"in g&&Ve.forEach(o.toJSON(),function(j,R){g.setRequestHeader(R,j)}),Ve.isUndefined(l.withCredentials)||(g.withCredentials=!!l.withCredentials),d&&d!=="json"&&(g.responseType=l.responseType),a&&([f,b]=Oh(a,!0),g.addEventListener("progress",f)),c&&g.upload&&([h,m]=Oh(c),g.upload.addEventListener("progress",h),g.upload.addEventListener("loadend",m)),(l.cancelToken||l.signal)&&(u=_=>{g&&(s(!_||_.type?new hc(null,e,g):_),g.abort(),g=null)},l.cancelToken&&l.cancelToken.subscribe(u),l.signal&&(l.signal.aborted?u():l.signal.addEventListener("abort",u)));const x=QA(l.url);if(x&&Hn.protocols.indexOf(x)===-1){s(new cr("Unsupported protocol "+x+":",cr.ERR_BAD_REQUEST,e));return}g.send(i||null)})},nM=(e,n)=>{const{length:t}=e=e?e.filter(Boolean):[];if(n||t){let s=new AbortController,l;const i=function(a){if(!l){l=!0,d();const u=a instanceof Error?a:this.reason;s.abort(u instanceof cr?u:new hc(u instanceof Error?u.message:u))}};let o=n&&setTimeout(()=>{o=null,i(new cr(`timeout ${n} of ms exceeded`,cr.ETIMEDOUT))},n);const d=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(a=>{a.unsubscribe?a.unsubscribe(i):a.removeEventListener("abort",i)}),e=null)};e.forEach(a=>a.addEventListener("abort",i));const{signal:c}=s;return c.unsubscribe=()=>Ve.asap(d),c}},sM=function*(e,n){let t=e.byteLength;if(t<n){yield e;return}let s=0,l;for(;s<t;)l=s+n,yield e.slice(s,l),s=l},aM=async function*(e,n){for await(const t of iM(e))yield*sM(t,n)},iM=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const n=e.getReader();try{for(;;){const{done:t,value:s}=await n.read();if(t)break;yield s}}finally{await n.cancel()}},o_=(e,n,t,s)=>{const l=aM(e,n);let i=0,o,d=c=>{o||(o=!0,s&&s(c))};return new ReadableStream({async pull(c){try{const{done:a,value:u}=await l.next();if(a){d(),c.close();return}let h=u.byteLength;if(t){let f=i+=h;t(f)}c.enqueue(new Uint8Array(u))}catch(a){throw d(a),a}},cancel(c){return d(c),l.return()}},{highWaterMark:2})},xm=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Vj=xm&&typeof ReadableStream=="function",oM=xm&&(typeof TextEncoder=="function"?(e=>n=>e.encode(n))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),Kj=(e,...n)=>{try{return!!e(...n)}catch{return!1}},lM=Vj&&Kj(()=>{let e=!1;const n=new Request(Hn.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!n}),l_=64*1024,Fb=Vj&&Kj(()=>Ve.isReadableStream(new Response("").body)),Dh={stream:Fb&&(e=>e.body)};xm&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(n=>{!Dh[n]&&(Dh[n]=Ve.isFunction(e[n])?t=>t[n]():(t,s)=>{throw new cr(`Response type '${n}' is not supported`,cr.ERR_NOT_SUPPORT,s)})})})(new Response);const cM=async e=>{if(e==null)return 0;if(Ve.isBlob(e))return e.size;if(Ve.isSpecCompliantForm(e))return(await new Request(Hn.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(Ve.isArrayBufferView(e)||Ve.isArrayBuffer(e))return e.byteLength;if(Ve.isURLSearchParams(e)&&(e=e+""),Ve.isString(e))return(await oM(e)).byteLength},dM=async(e,n)=>{const t=Ve.toFiniteNumber(e.getContentLength());return t??cM(n)},uM=xm&&(async e=>{let{url:n,method:t,data:s,signal:l,cancelToken:i,timeout:o,onDownloadProgress:d,onUploadProgress:c,responseType:a,headers:u,withCredentials:h="same-origin",fetchOptions:f}=Hj(e);a=a?(a+"").toLowerCase():"text";let m=nM([l,i&&i.toAbortSignal()],o),b;const y=m&&m.unsubscribe&&(()=>{m.unsubscribe()});let g;try{if(c&&lM&&t!=="get"&&t!=="head"&&(g=await dM(u,s))!==0){let R=new Request(n,{method:"POST",body:s,duplex:"half"}),M;if(Ve.isFormData(s)&&(M=R.headers.get("content-type"))&&u.setContentType(M),R.body){const[I,F]=s_(g,Oh(a_(c)));s=o_(R.body,l_,I,F)}}Ve.isString(h)||(h=h?"include":"omit");const w="credentials"in Request.prototype;b=new Request(n,{...f,signal:m,method:t.toUpperCase(),headers:u.normalize().toJSON(),body:s,duplex:"half",credentials:w?h:void 0});let x=await fetch(b,f);const _=Fb&&(a==="stream"||a==="response");if(Fb&&(d||_&&y)){const R={};["status","statusText","headers"].forEach(B=>{R[B]=x[B]});const M=Ve.toFiniteNumber(x.headers.get("content-length")),[I,F]=d&&s_(M,Oh(a_(d),!0))||[];x=new Response(o_(x.body,l_,I,()=>{F&&F(),y&&y()}),R)}a=a||"text";let j=await Dh[Ve.findKey(Dh,a)||"text"](x,e);return!_&&y&&y(),await new Promise((R,M)=>{$j(R,M,{data:j,headers:hs.from(x.headers),status:x.status,statusText:x.statusText,config:e,request:b})})}catch(w){throw y&&y(),w&&w.name==="TypeError"&&/Load failed|fetch/i.test(w.message)?Object.assign(new cr("Network Error",cr.ERR_NETWORK,e,b),{cause:w.cause||w}):cr.from(w,w&&w.code,e,b)}}),Lb={http:SA,xhr:rM,fetch:uM};Ve.forEach(Lb,(e,n)=>{if(e){try{Object.defineProperty(e,"name",{value:n})}catch{}Object.defineProperty(e,"adapterName",{value:n})}});const c_=e=>`- ${e}`,fM=e=>Ve.isFunction(e)||e===null||e===!1,Wj={getAdapter:e=>{e=Ve.isArray(e)?e:[e];const{length:n}=e;let t,s;const l={};for(let i=0;i<n;i++){t=e[i];let o;if(s=t,!fM(t)&&(s=Lb[(o=String(t)).toLowerCase()],s===void 0))throw new cr(`Unknown adapter '${o}'`);if(s)break;l[o||"#"+i]=s}if(!s){const i=Object.entries(l).map(([d,c])=>`adapter ${d} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=n?i.length>1?`since :
`+i.map(c_).join(`
`):" "+c_(i[0]):"as no adapter specified";throw new cr("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return s},adapters:Lb};function Ag(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new hc(null,e)}function d_(e){return Ag(e),e.headers=hs.from(e.headers),e.data=Tg.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Wj.getAdapter(e.adapter||Nu.adapter)(e).then(function(s){return Ag(e),s.data=Tg.call(e,e.transformResponse,s),s.headers=hs.from(s.headers),s},function(s){return qj(s)||(Ag(e),s&&s.response&&(s.response.data=Tg.call(e,e.transformResponse,s.response),s.response.headers=hs.from(s.response.headers))),Promise.reject(s)})}const Qj="1.11.0",vm={};["object","boolean","number","function","string","symbol"].forEach((e,n)=>{vm[e]=function(s){return typeof s===e||"a"+(n<1?"n ":" ")+e}});const u_={};vm.transitional=function(n,t,s){function l(i,o){return"[Axios v"+Qj+"] Transitional option '"+i+"'"+o+(s?". "+s:"")}return(i,o,d)=>{if(n===!1)throw new cr(l(o," has been removed"+(t?" in "+t:"")),cr.ERR_DEPRECATED);return t&&!u_[o]&&(u_[o]=!0,console.warn(l(o," has been deprecated since v"+t+" and will be removed in the near future"))),n?n(i,o,d):!0}};vm.spelling=function(n){return(t,s)=>(console.warn(`${s} is likely a misspelling of ${n}`),!0)};function hM(e,n,t){if(typeof e!="object")throw new cr("options must be an object",cr.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let l=s.length;for(;l-- >0;){const i=s[l],o=n[i];if(o){const d=e[i],c=d===void 0||o(d,i,e);if(c!==!0)throw new cr("option "+i+" must be "+c,cr.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new cr("Unknown option "+i,cr.ERR_BAD_OPTION)}}const vh={assertOptions:hM,validators:vm},Ra=vh.validators;let Ho=class{constructor(n){this.defaults=n||{},this.interceptors={request:new r_,response:new r_}}async request(n,t){try{return await this._request(n,t)}catch(s){if(s instanceof Error){let l={};Error.captureStackTrace?Error.captureStackTrace(l):l=new Error;const i=l.stack?l.stack.replace(/^.+\n/,""):"";try{s.stack?i&&!String(s.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+i):s.stack=i}catch{}}throw s}}_request(n,t){typeof n=="string"?(t=t||{},t.url=n):t=n||{},t=Xo(this.defaults,t);const{transitional:s,paramsSerializer:l,headers:i}=t;s!==void 0&&vh.assertOptions(s,{silentJSONParsing:Ra.transitional(Ra.boolean),forcedJSONParsing:Ra.transitional(Ra.boolean),clarifyTimeoutError:Ra.transitional(Ra.boolean)},!1),l!=null&&(Ve.isFunction(l)?t.paramsSerializer={serialize:l}:vh.assertOptions(l,{encode:Ra.function,serialize:Ra.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),vh.assertOptions(t,{baseUrl:Ra.spelling("baseURL"),withXsrfToken:Ra.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=i&&Ve.merge(i.common,i[t.method]);i&&Ve.forEach(["delete","get","head","post","put","patch","common"],b=>{delete i[b]}),t.headers=hs.concat(o,i);const d=[];let c=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(t)===!1||(c=c&&y.synchronous,d.unshift(y.fulfilled,y.rejected))});const a=[];this.interceptors.response.forEach(function(y){a.push(y.fulfilled,y.rejected)});let u,h=0,f;if(!c){const b=[d_.bind(this),void 0];for(b.unshift(...d),b.push(...a),f=b.length,u=Promise.resolve(t);h<f;)u=u.then(b[h++],b[h++]);return u}f=d.length;let m=t;for(h=0;h<f;){const b=d[h++],y=d[h++];try{m=b(m)}catch(g){y.call(this,g);break}}try{u=d_.call(this,m)}catch(b){return Promise.reject(b)}for(h=0,f=a.length;h<f;)u=u.then(a[h++],a[h++]);return u}getUri(n){n=Xo(this.defaults,n);const t=Uj(n.baseURL,n.url,n.allowAbsoluteUrls);return Lj(t,n.params,n.paramsSerializer)}};Ve.forEach(["delete","get","head","options"],function(n){Ho.prototype[n]=function(t,s){return this.request(Xo(s||{},{method:n,url:t,data:(s||{}).data}))}});Ve.forEach(["post","put","patch"],function(n){function t(s){return function(i,o,d){return this.request(Xo(d||{},{method:n,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}Ho.prototype[n]=t(),Ho.prototype[n+"Form"]=t(!0)});let mM=class Gj{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(i){t=i});const s=this;this.promise.then(l=>{if(!s._listeners)return;let i=s._listeners.length;for(;i-- >0;)s._listeners[i](l);s._listeners=null}),this.promise.then=l=>{let i;const o=new Promise(d=>{s.subscribe(d),i=d}).then(l);return o.cancel=function(){s.unsubscribe(i)},o},n(function(i,o,d){s.reason||(s.reason=new hc(i,o,d),t(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const t=this._listeners.indexOf(n);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const n=new AbortController,t=s=>{n.abort(s)};return this.subscribe(t),n.signal.unsubscribe=()=>this.unsubscribe(t),n.signal}static source(){let n;return{token:new Gj(function(l){n=l}),cancel:n}}};function pM(e){return function(t){return e.apply(null,t)}}function gM(e){return Ve.isObject(e)&&e.isAxiosError===!0}const zb={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(zb).forEach(([e,n])=>{zb[n]=e});function Xj(e){const n=new Ho(e),t=Sj(Ho.prototype.request,n);return Ve.extend(t,Ho.prototype,n,{allOwnKeys:!0}),Ve.extend(t,n,null,{allOwnKeys:!0}),t.create=function(l){return Xj(Xo(e,l))},t}const on=Xj(Nu);on.Axios=Ho;on.CanceledError=hc;on.CancelToken=mM;on.isCancel=qj;on.VERSION=Qj;on.toFormData=ym;on.AxiosError=cr;on.Cancel=on.CanceledError;on.all=function(n){return Promise.all(n)};on.spread=pM;on.isAxiosError=gM;on.mergeConfig=Xo;on.AxiosHeaders=hs;on.formToJSON=e=>Bj(Ve.isHTMLForm(e)?new FormData(e):e);on.getAdapter=Wj.getAdapter;on.HttpStatusCode=zb;on.default=on;const{Axios:mZ,AxiosError:pZ,CanceledError:gZ,isCancel:bZ,CancelToken:yZ,VERSION:xZ,all:vZ,Cancel:wZ,isAxiosError:_Z,spread:jZ,toFormData:NZ,AxiosHeaders:CZ,HttpStatusCode:SZ,formToJSON:kZ,getAdapter:EZ,mergeConfig:RZ}=on,Yj="http://localhost:80/wordpress/wp-json/tm/v1",Xe=on.create({baseURL:Yj});let Mg=!1,Bb=[];const f_=(e=null)=>{Bb.forEach(n=>{e?n.reject(e):n.resolve()}),Bb=[]};Xe.interceptors.request.use(e=>{const{token:n,nonce:t}=Dn.getState();return n&&(e.headers.Authorization=`Basic ${n}`),t&&(e.headers["X-WP-Nonce"]=t,console.log("Added nonce from useAuthStore:",t)),e},e=>(console.error("Request error:",e),Promise.reject(e)));Xe.interceptors.response.use(e=>e,async e=>{const n=e.config;if(e.response?.status===403&&!n._retry&&(e.response?.data?.code==="rest_cookie_invalid_nonce"||e.response?.data?.message?.toLowerCase().includes("nonce")||e.response?.data?.data?.status===403)){if(n._retry=!0,Mg)return new Promise((s,l)=>{Bb.push({resolve:s,reject:l})}).then(()=>Xe(n)).catch(s=>Promise.reject(s));Mg=!0;try{const{token:s}=Dn.getState();if(!s)throw new Error("No authentication token available");const{data:l}=await on.post(`${Yj}/auth/nonce`,{},{headers:{Authorization:`Basic ${s}`}});if(l.success&&l.data.nonce)return Dn.getState().setNonce(l.data.nonce),f_(),Xe(n)}catch(s){return f_(s),Promise.reject(s)}finally{Mg=!1}}return Promise.reject(e)});const bM=async(e,n)=>{const{data:t}=await Xe.post("/auth/token",{username:e,password:n});if(!t.success)throw new Error(t.message||"Login failed.");return t.data},yM=async e=>{const{data:n}=await Xe.post("/auth/nonce",{},{headers:{Authorization:`Basic ${e}`}});if(!n.success)throw new Error(n.message||"Failed to fetch nonce.");return n.data},Zj=()=>or({queryKey:["users"],queryFn:async()=>(await Xe.get("/users")).data.data,staleTime:300*1e3}),xM=()=>{const e=Nt();return Et({mutationFn:async n=>(await Xe.post("/users",n)).data,onSuccess:()=>{e.invalidateQueries({queryKey:["users"]}),e.invalidateQueries({queryKey:["employee"]}),e.invalidateQueries({queryKey:["employees"]})}})},vM=()=>{const e=Nt();return Et({mutationFn:async n=>{const{userId:t,capabilities:s}=n;return(await Xe.put(`/users/${t}/capabilities`,{capabilities:s})).data.data},onSuccess:()=>{e.invalidateQueries({queryKey:["users"]}),e.invalidateQueries({queryKey:["current-user-capabilities"]}),e.invalidateQueries({queryKey:["employee"]}),e.invalidateQueries({queryKey:["employees"]})}})},wm=()=>or({queryKey:["current-user-capabilities"],queryFn:async()=>(await Xe.get("/users/current/capabilities")).data.data,staleTime:1/0,refetchOnWindowFocus:!1,refetchOnMount:!1}),wM=async({new_password:e})=>{const{data:n}=await Xe.post("/users/me/set-password",{new_password:e});return n},_M=async({username:e,new_password:n})=>{const{data:t}=await Xe.post("/auth/reset-password",{username:e,new_password:n});return t},jM=()=>Et({mutationFn:wM}),NM=()=>Et({mutationFn:_M}),CM=()=>{const[e,n]=H.useState(""),[t,s]=H.useState(""),[l,i]=H.useState(null),[o,d]=H.useState(!1),[c,a]=H.useState(!1),[u,h]=H.useState(""),[f,m]=H.useState(""),[b,y]=H.useState(null),[g,w]=H.useState(!1),x=kn(),{t:_}=qt(),j=Dn(B=>B.login),R=Dn(B=>B.status),M=NM();H.useEffect(()=>{R==="authenticated"&&x("/dashboard",{replace:!0})},[R,x]);const I=async B=>{B.preventDefault(),d(!0),i(null);try{const{app_password:U,user:Q}=await bM(e,t);j(e,U,Q),x("/dashboard")}catch(U){U.response?.data?.code==="invalid_credentials"?i("Invalid username/email or password."):i(_("login.errorInvalid")),console.error(U)}finally{d(!1)}},F=async B=>{if(B.preventDefault(),y(null),w(!1),u.length<4){y("Password must be at least 4 characters.");return}if(u!==f){y("Passwords do not match.");return}if(!e){y("Please enter your username.");return}try{await M.mutateAsync({username:e,new_password:u}),w(!0),h(""),m(""),setTimeout(()=>{a(!1),w(!1)},3e3)}catch(U){y(U.response?.data?.message||"Failed to reset password. Please verify your username.")}};return r.jsx("div",{className:"flex items-center justify-center min-h-screen bg-secondary",children:r.jsx("div",{className:"w-11/12 sm:w-2/3 md:w-1/2 lg:w-1/3",children:r.jsx("div",{className:"bg-card rounded-xl shadow-2xl",children:r.jsxs("div",{className:"p-6 lg:p-10",children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("h2",{className:"text-primary text-3xl font-bold tracking-wide",children:"HULOOL"}),r.jsx("h5",{className:"font-normal text-muted-foreground mt-2",children:_("login.title")})]}),r.jsxs("form",{onSubmit:I,children:[l&&r.jsx("div",{className:"rounded-lg border border-destructive bg-destructive/10 p-2 mb-4 text-center text-sm text-destructive",children:l}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{htmlFor:"username",className:"block text-sm font-semibold text-foreground mb-1.5",children:_("login.usernameLabel")}),r.jsx("input",{type:"text",id:"username",className:"base-input",value:e,onChange:B=>n(B.target.value),required:!0,disabled:o,autoComplete:"username",placeholder:"Username or email"})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-semibold text-foreground mb-1.5",children:_("login.passwordLabel")}),r.jsx("input",{type:"password",id:"password",className:"base-input",value:t,onChange:B=>s(B.target.value),required:!0,disabled:o,autoComplete:"current-password",placeholder:"Enter your password"}),r.jsx("small",{className:"text-muted-foreground text-xs mt-1 block",children:"Use your short password OR WordPress password"})]}),r.jsx("div",{className:"grid",children:r.jsx("button",{type:"submit",className:"px-6 py-3 bg-primary text-primary-foreground rounded-lg font-semibold text-base hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:o,children:_(o?"login.authenticatingText":"login.buttonText")})})]}),r.jsxs("div",{className:"mt-4",children:[r.jsx("button",{type:"button",className:"text-primary hover:text-primary/80 text-sm no-underline w-full p-0 bg-transparent border-0 cursor-pointer",onClick:()=>a(!c),children:c?"Cancel Password Reset":"Change Password?"}),c&&r.jsxs("div",{className:"mt-4 p-4 border border-border rounded-lg bg-secondary/50",children:[r.jsx("h6",{className:"mb-2 text-sm font-semibold",children:"Reset Your Password"}),r.jsx("p",{className:"text-muted-foreground text-xs mb-3",children:"Enter your username or email above, then set a new password below."}),g&&r.jsx("div",{className:"rounded-lg border border-green-600 bg-green-50 p-2 mb-2 text-xs text-green-700",children:"Password updated successfully!"}),b&&r.jsx("div",{className:"rounded-lg border border-destructive bg-destructive/10 p-2 mb-2 text-xs text-destructive",children:b}),r.jsxs("form",{onSubmit:F,children:[r.jsx("div",{className:"mb-2",children:r.jsx("input",{type:"password",className:"base-input text-sm py-1.5",placeholder:"New Password (min 4 chars)",value:u,onChange:B=>h(B.target.value),disabled:M.isPending})}),r.jsx("div",{className:"mb-2",children:r.jsx("input",{type:"password",className:"base-input text-sm py-1.5",placeholder:"Confirm New Password",value:f,onChange:B=>m(B.target.value),disabled:M.isPending})}),r.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg text-sm font-semibold w-full hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:M.isPending,children:M.isPending?"Updating...":"Update Password"})]})]})]})]})})})})},SM=()=>{const e=Dn(n=>n.status);return e==="idle"?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-2"}),r.jsx("p",{className:"text-sm text-gray-600",children:" ..."})]})}):e==="authenticated"?r.jsx(xu,{}):r.jsx(di,{to:"/login",replace:!0})},ei=()=>{const e=Dn(t=>t.status),n=Dn(t=>t.userRole);return e==="idle"?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-2"}),r.jsx("p",{className:"text-sm text-gray-600",children:" ..."})]})}):e==="unauthenticated"?r.jsx(di,{to:"/login",replace:!0}):n==="employee"?r.jsx(di,{to:"/employee/dashboard",replace:!0}):r.jsx(xu,{})},kM=()=>{const e=Dn(t=>t.status),n=Dn(t=>t.userRole);return e==="idle"?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-2"}),r.jsx("p",{className:"text-sm text-gray-600",children:" ..."})]})}):e==="unauthenticated"?r.jsx(di,{to:"/login",replace:!0}):n==="admin"?r.jsx(di,{to:"/dashboard",replace:!0}):r.jsx(xu,{})},EM=()=>{switch(Dn(n=>n.userRole)){case"employee":return r.jsx(di,{to:"/employee/dashboard",replace:!0});case"admin":case"both":default:return r.jsx(di,{to:"/dashboard",replace:!0})}},_m=mm(e=>({isCollapsed:!1,toggleCollapsed:()=>e(n=>({isCollapsed:!n.isCollapsed})),setCollapsed:n=>e({isCollapsed:n})})),Jj=({className:e,compact:n=!1,...t})=>r.jsxs("div",{className:`flex items-center gap-1.5 ${e||""}`,...t,children:[r.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-lg bg-primary text-primary-foreground font-bold text-lg shadow-sm",children:""}),!n&&r.jsx("span",{className:"text-lg font-bold text-primary tracking-tight",children:""})]});/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RM=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),TM=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,t,s)=>s?s.toUpperCase():t.toLowerCase()),h_=e=>{const n=TM(e);return n.charAt(0).toUpperCase()+n.slice(1)},e6=(...e)=>e.filter((n,t,s)=>!!n&&n.trim()!==""&&s.indexOf(n)===t).join(" ").trim(),AM=e=>{for(const n in e)if(n.startsWith("aria-")||n==="role"||n==="title")return!0};/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var MM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=H.forwardRef(({color:e="currentColor",size:n=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:l="",children:i,iconNode:o,...d},c)=>H.createElement("svg",{ref:c,...MM,width:n,height:n,stroke:e,strokeWidth:s?Number(t)*24/Number(n):t,className:e6("lucide",l),...!i&&!AM(d)&&{"aria-hidden":"true"},...d},[...o.map(([a,u])=>H.createElement(a,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=(e,n)=>{const t=H.forwardRef(({className:s,...l},i)=>H.createElement(OM,{ref:i,iconNode:n,className:e6(`lucide-${RM(h_(e))}`,`lucide-${e}`,s),...l}));return t.displayName=h_(e),t};/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DM=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],PM=gt("activity",DM);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IM=[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]],FM=gt("arrow-down-left",IM);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LM=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],zM=gt("arrow-right",LM);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BM=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],qM=gt("arrow-up-right",BM);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $M=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],UM=gt("banknote",$M);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HM=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}]],VM=gt("bell-ring",HM);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KM=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],rc=gt("bell",KM);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WM=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],QM=gt("book-open",WM);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],XM=gt("bot",GM);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YM=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],ro=gt("briefcase",YM);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZM=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],Cu=gt("building",ZM);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JM=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],eO=gt("calculator",JM);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tO=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Ph=gt("calendar",tO);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rO=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],t6=gt("check-check",rO);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nO=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ha=gt("check",nO);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sO=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],mc=gt("chevron-down",sO);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aO=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Gs=gt("chevron-right",aO);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iO=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],oO=gt("chevron-up",iO);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lO=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],cO=gt("chevrons-up-down",lO);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Mn=gt("circle-alert",dO);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uO=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],es=gt("circle-check-big",uO);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]],hO=gt("circle-pause",fO);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],rl=gt("circle-plus",mO);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],jm=gt("circle-x",pO);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],bO=gt("circle",gO);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yO=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],ky=gt("clipboard-check",yO);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xO=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],vO=gt("clipboard-list",xO);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wO=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ms=gt("clock",wO);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _O=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],m_=gt("copy",_O);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jO=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],gs=gt("credit-card",jO);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NO=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Kn=gt("dollar-sign",NO);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CO=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],SO=gt("download",CO);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kO=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],ou=gt("ellipsis-vertical",kO);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EO=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],Ey=gt("ellipsis",EO);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RO=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Ih=gt("external-link",RO);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TO=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Su=gt("eye",TO);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AO=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],Ry=gt("file-spreadsheet",AO);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MO=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Sn=gt("file-text",MO);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OO=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Ty=gt("funnel",OO);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DO=[["path",{d:"M11 15h2a2 2 0 1 0 0-4h-3c-.6 0-1.1.2-1.4.6L3 17",key:"geh8rc"}],["path",{d:"m7 21 1.6-1.4c.3-.4.8-.6 1.4-.6h4c1.1 0 2.1-.4 2.8-1.2l4.6-4.4a2 2 0 0 0-2.75-2.91l-4.2 3.9",key:"1fto5m"}],["path",{d:"m2 16 6 6",key:"1pfhp9"}],["circle",{cx:"16",cy:"9",r:"2.9",key:"1n0dlu"}],["circle",{cx:"6",cy:"5",r:"3",key:"151irh"}]],PO=gt("hand-coins",DO);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IO=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],r6=gt("history",IO);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FO=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],Ay=gt("house",FO);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LO=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],p_=gt("image",LO);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zO=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],BO=gt("inbox",zO);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],$O=gt("info",qO);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UO=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Nm=gt("layers",UO);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HO=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],VO=gt("layout-grid",HO);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KO=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],n6=gt("layout-dashboard",KO);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WO=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]],QO=gt("layout-list",WO);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GO=[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]],My=gt("list-checks",GO);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XO=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],no=gt("loader-circle",XO);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YO=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],s6=gt("log-out",YO);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZO=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],a6=gt("message-circle",ZO);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JO=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],Ps=gt("message-square",JO);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eD=[["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["path",{d:"M9.5 8h5",key:"11mslq"}],["path",{d:"M9.5 12H16",key:"ktog6x"}],["path",{d:"M9.5 16H14",key:"p1seyn"}]],tD=gt("notebook-text",eD);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rD=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],ku=gt("pause",rD);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nD=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],ui=gt("pen-line",nD);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sD=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],i6=gt("pen",sD);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aD=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],o6=gt("phone",aD);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iD=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Cm=gt("play",iD);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oD=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],hn=gt("plus",oD);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lD=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],cD=gt("printer",lD);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dD=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],Vo=gt("receipt",dD);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uD=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],l6=gt("refresh-cw",uD);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fD=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Eu=gt("rotate-ccw",fD);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hD=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],pc=gt("save",hD);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mD=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],ps=gt("search",mD);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pD=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],gD=gt("send",pD);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bD=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Fh=gt("settings",bD);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yD=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],xD=gt("shield",yD);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vD=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],wD=gt("square-check-big",vD);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _D=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Sm=gt("square-pen",_D);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jD=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],g_=gt("tag",jD);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ND=[["path",{d:"M13.172 2a2 2 0 0 1 1.414.586l6.71 6.71a2.4 2.4 0 0 1 0 3.408l-4.592 4.592a2.4 2.4 0 0 1-3.408 0l-6.71-6.71A2 2 0 0 1 6 9.172V3a1 1 0 0 1 1-1z",key:"16rjxf"}],["path",{d:"M2 7v6.172a2 2 0 0 0 .586 1.414l6.71 6.71a2.4 2.4 0 0 0 3.191.193",key:"178nd4"}],["circle",{cx:"10.5",cy:"6.5",r:".5",fill:"currentColor",key:"12ikhr"}]],CD=gt("tags",ND);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SD=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Is=gt("trash-2",SD);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kD=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],Lh=gt("trending-down",kD);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ED=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],zh=gt("trending-up",ED);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RD=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],On=gt("triangle-alert",RD);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TD=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],km=gt("upload",TD);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AD=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],MD=gt("user-check",AD);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OD=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],DD=gt("user-cog",OD);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PD=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],c6=gt("user-minus",PD);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ID=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],nc=gt("user-plus",ID);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FD=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],LD=gt("user-x",FD);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zD=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ma=gt("user",zD);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BD=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],fi=gt("users",BD);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qD=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],d6=gt("wallet",qD);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $D=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ln=gt("x",$D),UD=async()=>(await Xe.get("/notifications/grouped")).data.data,HD=async()=>(await Xe.get("/notifications/unread-count")).data.data,VD=async e=>(await Xe.post(`/notifications/${e}/mark-read`)).data.data,KD=async e=>(await Xe.post(`/notifications/group/${e}/mark-read`)).data.data,WD=async()=>(await Xe.post("/notifications/mark-all-read")).data.data,QD=()=>or({queryKey:["groupedNotifications"],queryFn:UD,staleTime:15e3,refetchInterval:3e4,refetchOnWindowFocus:!1}),GD=()=>or({queryKey:["notificationCount"],queryFn:HD,refetchInterval:e=>{if(e.state.error){const n=e.state.fetchFailureCount||0;return Math.min(2e4*Math.pow(2,n),6e4)}return 2e4},refetchOnWindowFocus:!1,refetchOnMount:!0,staleTime:15e3,retry:(e,n)=>{if(e>=3)return!1;const t=n;return!(t?.response?.status&&t.response.status>=400&&t.response.status<500)}}),XD=()=>{const e=Nt();return Et({mutationFn:VD,onSuccess:()=>{e.invalidateQueries({queryKey:["groupedNotifications"]}),e.invalidateQueries({queryKey:["notificationCount"]})}})},YD=()=>{const e=Nt();return Et({mutationFn:KD,onMutate:async n=>{await e.cancelQueries({queryKey:["groupedNotifications"]}),await e.cancelQueries({queryKey:["notificationCount"]});const t=e.getQueryData(["groupedNotifications"]),s=e.getQueryData(["notificationCount"]);if(t){const l=t.groups[n]?.unread_count||0;e.setQueryData(["groupedNotifications"],{...t,groups:{...t.groups,[n]:{...t.groups[n],notifications:t.groups[n].notifications.map(i=>({...i,is_read:!0,read_at:i.read_at||new Date().toISOString()})),unread_count:0}},total_unread:t.total_unread-l}),e.setQueryData(["notificationCount"],{count:Math.max(0,(s?.count||0)-l)})}return{previousData:t,previousCount:s}},onError:(n,t,s)=>{s?.previousData&&e.setQueryData(["groupedNotifications"],s.previousData),s?.previousCount&&e.setQueryData(["notificationCount"],s.previousCount)},onSettled:()=>{e.invalidateQueries({queryKey:["groupedNotifications"]}),e.invalidateQueries({queryKey:["notificationCount"]})}})},ZD=()=>{const e=Nt();return Et({mutationFn:WD,onMutate:async()=>{await e.cancelQueries({queryKey:["groupedNotifications"]}),await e.cancelQueries({queryKey:["notificationCount"]});const n=e.getQueryData(["groupedNotifications"]),t=e.getQueryData(["notificationCount"]);if(n){const s=Object.fromEntries(Object.entries(n.groups).map(([l,i])=>[l,{...i,notifications:i.notifications.map(o=>({...o,is_read:!0,read_at:o.read_at||new Date().toISOString()})),unread_count:0}]));e.setQueryData(["groupedNotifications"],{...n,groups:s,total_unread:0})}return e.setQueryData(["notificationCount"],{count:0}),{previousData:n,previousCount:t}},onError:(n,t,s)=>{s?.previousData&&e.setQueryData(["groupedNotifications"],s.previousData),s?.previousCount&&e.setQueryData(["notificationCount"],s.previousCount)},onSettled:()=>{e.invalidateQueries({queryKey:["groupedNotifications"]}),e.invalidateQueries({queryKey:["notificationCount"]})}})};class Kl{static instance;audioCache=new Map;constructor(){}static getInstance(){return Kl.instance||(Kl.instance=new Kl),Kl.instance}preloadSound(n,t){if(!this.audioCache.has(t)){const s=new Audio(n);s.preload="auto",this.audioCache.set(t,s)}}async playSound(n,t=n){try{let s=this.audioCache.get(t);s||(s=new Audio(n),this.audioCache.set(t,s)),s.currentTime=0,await s.play()}catch(s){console.warn("Failed to play sound:",s)}}setVolume(n){const t=Math.max(0,Math.min(1,n));this.audioCache.forEach(s=>{s.volume=t})}}const Oy=Kl.getInstance(),u6=()=>Oy.playSound("/sounds/notification.mp3","notification"),f6=()=>{Oy.preloadSound("/sounds/notification.mp3","notification")},JD=()=>{f6(),Oy.setVolume(.7)};function Yt(e,n,{checkForDefaultPrevented:t=!0}={}){return function(l){if(e?.(l),t===!1||!l.defaultPrevented)return n?.(l)}}function eP(e,n){const t=H.createContext(n),s=i=>{const{children:o,...d}=i,c=H.useMemo(()=>d,Object.values(d));return r.jsx(t.Provider,{value:c,children:o})};s.displayName=e+"Provider";function l(i){const o=H.useContext(t);if(o)return o;if(n!==void 0)return n;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[s,l]}function Fa(e,n=[]){let t=[];function s(i,o){const d=H.createContext(o),c=t.length;t=[...t,o];const a=h=>{const{scope:f,children:m,...b}=h,y=f?.[e]?.[c]||d,g=H.useMemo(()=>b,Object.values(b));return r.jsx(y.Provider,{value:g,children:m})};a.displayName=i+"Provider";function u(h,f){const m=f?.[e]?.[c]||d,b=H.useContext(m);if(b)return b;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[a,u]}const l=()=>{const i=t.map(o=>H.createContext(o));return function(d){const c=d?.[e]||i;return H.useMemo(()=>({[`__scope${e}`]:{...d,[e]:c}}),[d,c])}};return l.scopeName=e,[s,tP(l,...n)]}function tP(...e){const n=e[0];if(e.length===1)return n;const t=()=>{const s=e.map(l=>({useScope:l(),scopeName:l.scopeName}));return function(i){const o=s.reduce((d,{useScope:c,scopeName:a})=>{const h=c(i)[`__scope${a}`];return{...d,...h}},{});return H.useMemo(()=>({[`__scope${n.scopeName}`]:o}),[o])}};return t.scopeName=n.scopeName,t}function b_(e,n){if(typeof e=="function")return e(n);e!=null&&(e.current=n)}function hi(...e){return n=>{let t=!1;const s=e.map(l=>{const i=b_(l,n);return!t&&typeof i=="function"&&(t=!0),i});if(t)return()=>{for(let l=0;l<s.length;l++){const i=s[l];typeof i=="function"?i():b_(e[l],null)}}}}function pn(...e){return H.useCallback(hi(...e),e)}function sc(e){const n=rP(e),t=H.forwardRef((s,l)=>{const{children:i,...o}=s,d=H.Children.toArray(i),c=d.find(sP);if(c){const a=c.props.children,u=d.map(h=>h===c?H.Children.count(a)>1?H.Children.only(null):H.isValidElement(a)?a.props.children:null:h);return r.jsx(n,{...o,ref:l,children:H.isValidElement(a)?H.cloneElement(a,void 0,u):null})}return r.jsx(n,{...o,ref:l,children:i})});return t.displayName=`${e}.Slot`,t}function rP(e){const n=H.forwardRef((t,s)=>{const{children:l,...i}=t;if(H.isValidElement(l)){const o=iP(l),d=aP(i,l.props);return l.type!==H.Fragment&&(d.ref=s?hi(s,o):o),H.cloneElement(l,d)}return H.Children.count(l)>1?H.Children.only(null):null});return n.displayName=`${e}.SlotClone`,n}var nP=Symbol("radix.slottable");function sP(e){return H.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===nP}function aP(e,n){const t={...n};for(const s in n){const l=e[s],i=n[s];/^on[A-Z]/.test(s)?l&&i?t[s]=(...d)=>{const c=i(...d);return l(...d),c}:l&&(t[s]=l):s==="style"?t[s]={...l,...i}:s==="className"&&(t[s]=[l,i].filter(Boolean).join(" "))}return{...e,...t}}function iP(e){let n=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,t=n&&"isReactWarning"in n&&n.isReactWarning;return t?e.ref:(n=Object.getOwnPropertyDescriptor(e,"ref")?.get,t=n&&"isReactWarning"in n&&n.isReactWarning,t?e.props.ref:e.props.ref||e.ref)}function Dy(e){const n=e+"CollectionProvider",[t,s]=Fa(n),[l,i]=t(n,{collectionRef:{current:null},itemMap:new Map}),o=y=>{const{scope:g,children:w}=y,x=De.useRef(null),_=De.useRef(new Map).current;return r.jsx(l,{scope:g,itemMap:_,collectionRef:x,children:w})};o.displayName=n;const d=e+"CollectionSlot",c=sc(d),a=De.forwardRef((y,g)=>{const{scope:w,children:x}=y,_=i(d,w),j=pn(g,_.collectionRef);return r.jsx(c,{ref:j,children:x})});a.displayName=d;const u=e+"CollectionItemSlot",h="data-radix-collection-item",f=sc(u),m=De.forwardRef((y,g)=>{const{scope:w,children:x,..._}=y,j=De.useRef(null),R=pn(g,j),M=i(u,w);return De.useEffect(()=>(M.itemMap.set(j,{ref:j,..._}),()=>void M.itemMap.delete(j))),r.jsx(f,{[h]:"",ref:R,children:x})});m.displayName=u;function b(y){const g=i(e+"CollectionConsumer",y);return De.useCallback(()=>{const x=g.collectionRef.current;if(!x)return[];const _=Array.from(x.querySelectorAll(`[${h}]`));return Array.from(g.itemMap.values()).sort((M,I)=>_.indexOf(M.ref.current)-_.indexOf(I.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:o,Slot:a,ItemSlot:m},b,s]}var mi=globalThis?.document?H.useLayoutEffect:()=>{},oP=F4[" useId ".trim().toString()]||(()=>{}),lP=0;function Vn(e){const[n,t]=H.useState(oP());return mi(()=>{t(s=>s??String(lP++))},[e]),n?`radix-${n}`:""}var cP=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],gr=cP.reduce((e,n)=>{const t=sc(`Primitive.${n}`),s=H.forwardRef((l,i)=>{const{asChild:o,...d}=l,c=o?t:n;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(c,{...d,ref:i})});return s.displayName=`Primitive.${n}`,{...e,[n]:s}},{});function h6(e,n){e&&cs.flushSync(()=>e.dispatchEvent(n))}function pi(e){const n=H.useRef(e);return H.useEffect(()=>{n.current=e}),H.useMemo(()=>(...t)=>n.current?.(...t),[])}var dP=F4[" useInsertionEffect ".trim().toString()]||mi;function lo({prop:e,defaultProp:n,onChange:t=()=>{},caller:s}){const[l,i,o]=uP({defaultProp:n,onChange:t}),d=e!==void 0,c=d?e:l;{const u=H.useRef(e!==void 0);H.useEffect(()=>{const h=u.current;h!==d&&console.warn(`${s} is changing from ${h?"controlled":"uncontrolled"} to ${d?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=d},[d,s])}const a=H.useCallback(u=>{if(d){const h=fP(u)?u(e):u;h!==e&&o.current?.(h)}else i(u)},[d,e,i,o]);return[c,a]}function uP({defaultProp:e,onChange:n}){const[t,s]=H.useState(e),l=H.useRef(t),i=H.useRef(n);return dP(()=>{i.current=n},[n]),H.useEffect(()=>{l.current!==t&&(i.current?.(t),l.current=t)},[t,l]),[t,s,i]}function fP(e){return typeof e=="function"}var hP=H.createContext(void 0);function Em(e){const n=H.useContext(hP);return e||n||"ltr"}var Og="rovingFocusGroup.onEntryFocus",mP={bubbles:!1,cancelable:!0},Ru="RovingFocusGroup",[qb,m6,pP]=Dy(Ru),[gP,Rm]=Fa(Ru,[pP]),[bP,yP]=gP(Ru),p6=H.forwardRef((e,n)=>r.jsx(qb.Provider,{scope:e.__scopeRovingFocusGroup,children:r.jsx(qb.Slot,{scope:e.__scopeRovingFocusGroup,children:r.jsx(xP,{...e,ref:n})})}));p6.displayName=Ru;var xP=H.forwardRef((e,n)=>{const{__scopeRovingFocusGroup:t,orientation:s,loop:l=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:d,onCurrentTabStopIdChange:c,onEntryFocus:a,preventScrollOnEntryFocus:u=!1,...h}=e,f=H.useRef(null),m=pn(n,f),b=Em(i),[y,g]=lo({prop:o,defaultProp:d??null,onChange:c,caller:Ru}),[w,x]=H.useState(!1),_=pi(a),j=m6(t),R=H.useRef(!1),[M,I]=H.useState(0);return H.useEffect(()=>{const F=f.current;if(F)return F.addEventListener(Og,_),()=>F.removeEventListener(Og,_)},[_]),r.jsx(bP,{scope:t,orientation:s,dir:b,loop:l,currentTabStopId:y,onItemFocus:H.useCallback(F=>g(F),[g]),onItemShiftTab:H.useCallback(()=>x(!0),[]),onFocusableItemAdd:H.useCallback(()=>I(F=>F+1),[]),onFocusableItemRemove:H.useCallback(()=>I(F=>F-1),[]),children:r.jsx(gr.div,{tabIndex:w||M===0?-1:0,"data-orientation":s,...h,ref:m,style:{outline:"none",...e.style},onMouseDown:Yt(e.onMouseDown,()=>{R.current=!0}),onFocus:Yt(e.onFocus,F=>{const B=!R.current;if(F.target===F.currentTarget&&B&&!w){const U=new CustomEvent(Og,mP);if(F.currentTarget.dispatchEvent(U),!U.defaultPrevented){const Q=j().filter(N=>N.focusable),K=Q.find(N=>N.active),T=Q.find(N=>N.id===y),A=[K,T,...Q].filter(Boolean).map(N=>N.ref.current);y6(A,u)}}R.current=!1}),onBlur:Yt(e.onBlur,()=>x(!1))})})}),g6="RovingFocusGroupItem",b6=H.forwardRef((e,n)=>{const{__scopeRovingFocusGroup:t,focusable:s=!0,active:l=!1,tabStopId:i,children:o,...d}=e,c=Vn(),a=i||c,u=yP(g6,t),h=u.currentTabStopId===a,f=m6(t),{onFocusableItemAdd:m,onFocusableItemRemove:b,currentTabStopId:y}=u;return H.useEffect(()=>{if(s)return m(),()=>b()},[s,m,b]),r.jsx(qb.ItemSlot,{scope:t,id:a,focusable:s,active:l,children:r.jsx(gr.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...d,ref:n,onMouseDown:Yt(e.onMouseDown,g=>{s?u.onItemFocus(a):g.preventDefault()}),onFocus:Yt(e.onFocus,()=>u.onItemFocus(a)),onKeyDown:Yt(e.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){u.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const w=_P(g,u.orientation,u.dir);if(w!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let _=f().filter(j=>j.focusable).map(j=>j.ref.current);if(w==="last")_.reverse();else if(w==="prev"||w==="next"){w==="prev"&&_.reverse();const j=_.indexOf(g.currentTarget);_=u.loop?jP(_,j+1):_.slice(j+1)}setTimeout(()=>y6(_))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:y!=null}):o})})});b6.displayName=g6;var vP={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function wP(e,n){return n!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function _P(e,n,t){const s=wP(e.key,t);if(!(n==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(n==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return vP[s]}function y6(e,n=!1){const t=document.activeElement;for(const s of e)if(s===t||(s.focus({preventScroll:n}),document.activeElement!==t))return}function jP(e,n){return e.map((t,s)=>e[(n+s)%e.length])}var x6=p6,v6=b6;function NP(e,n){return H.useReducer((t,s)=>n[t][s]??t,e)}var ra=e=>{const{present:n,children:t}=e,s=CP(n),l=typeof t=="function"?t({present:s.isPresent}):H.Children.only(t),i=pn(s.ref,SP(l));return typeof t=="function"||s.isPresent?H.cloneElement(l,{ref:i}):null};ra.displayName="Presence";function CP(e){const[n,t]=H.useState(),s=H.useRef(null),l=H.useRef(e),i=H.useRef("none"),o=e?"mounted":"unmounted",[d,c]=NP(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return H.useEffect(()=>{const a=rh(s.current);i.current=d==="mounted"?a:"none"},[d]),mi(()=>{const a=s.current,u=l.current;if(u!==e){const f=i.current,m=rh(a);e?c("MOUNT"):m==="none"||a?.display==="none"?c("UNMOUNT"):c(u&&f!==m?"ANIMATION_OUT":"UNMOUNT"),l.current=e}},[e,c]),mi(()=>{if(n){let a;const u=n.ownerDocument.defaultView??window,h=m=>{const y=rh(s.current).includes(CSS.escape(m.animationName));if(m.target===n&&y&&(c("ANIMATION_END"),!l.current)){const g=n.style.animationFillMode;n.style.animationFillMode="forwards",a=u.setTimeout(()=>{n.style.animationFillMode==="forwards"&&(n.style.animationFillMode=g)})}},f=m=>{m.target===n&&(i.current=rh(s.current))};return n.addEventListener("animationstart",f),n.addEventListener("animationcancel",h),n.addEventListener("animationend",h),()=>{u.clearTimeout(a),n.removeEventListener("animationstart",f),n.removeEventListener("animationcancel",h),n.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[n,c]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:H.useCallback(a=>{s.current=a?getComputedStyle(a):null,t(a)},[])}}function rh(e){return e?.animationName||"none"}function SP(e){let n=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,t=n&&"isReactWarning"in n&&n.isReactWarning;return t?e.ref:(n=Object.getOwnPropertyDescriptor(e,"ref")?.get,t=n&&"isReactWarning"in n&&n.isReactWarning,t?e.props.ref:e.props.ref||e.ref)}var Tm="Tabs",[kP,TZ]=Fa(Tm,[Rm]),w6=Rm(),[EP,Py]=kP(Tm),_6=H.forwardRef((e,n)=>{const{__scopeTabs:t,value:s,onValueChange:l,defaultValue:i,orientation:o="horizontal",dir:d,activationMode:c="automatic",...a}=e,u=Em(d),[h,f]=lo({prop:s,onChange:l,defaultProp:i??"",caller:Tm});return r.jsx(EP,{scope:t,baseId:Vn(),value:h,onValueChange:f,orientation:o,dir:u,activationMode:c,children:r.jsx(gr.div,{dir:u,"data-orientation":o,...a,ref:n})})});_6.displayName=Tm;var j6="TabsList",N6=H.forwardRef((e,n)=>{const{__scopeTabs:t,loop:s=!0,...l}=e,i=Py(j6,t),o=w6(t);return r.jsx(x6,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:s,children:r.jsx(gr.div,{role:"tablist","aria-orientation":i.orientation,...l,ref:n})})});N6.displayName=j6;var C6="TabsTrigger",S6=H.forwardRef((e,n)=>{const{__scopeTabs:t,value:s,disabled:l=!1,...i}=e,o=Py(C6,t),d=w6(t),c=R6(o.baseId,s),a=T6(o.baseId,s),u=s===o.value;return r.jsx(v6,{asChild:!0,...d,focusable:!l,active:u,children:r.jsx(gr.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":a,"data-state":u?"active":"inactive","data-disabled":l?"":void 0,disabled:l,id:c,...i,ref:n,onMouseDown:Yt(e.onMouseDown,h=>{!l&&h.button===0&&h.ctrlKey===!1?o.onValueChange(s):h.preventDefault()}),onKeyDown:Yt(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(s)}),onFocus:Yt(e.onFocus,()=>{const h=o.activationMode!=="manual";!u&&!l&&h&&o.onValueChange(s)})})})});S6.displayName=C6;var k6="TabsContent",E6=H.forwardRef((e,n)=>{const{__scopeTabs:t,value:s,forceMount:l,children:i,...o}=e,d=Py(k6,t),c=R6(d.baseId,s),a=T6(d.baseId,s),u=s===d.value,h=H.useRef(u);return H.useEffect(()=>{const f=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(f)},[]),r.jsx(ra,{present:l||u,children:({present:f})=>r.jsx(gr.div,{"data-state":u?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":c,hidden:!f,id:a,tabIndex:0,...o,ref:n,style:{...e.style,animationDuration:h.current?"0s":void 0},children:f&&i})})});E6.displayName=k6;function R6(e,n){return`${e}-trigger-${n}`}function T6(e,n){return`${e}-content-${n}`}var RP=_6,A6=N6,M6=S6,O6=E6;function D6(e){var n,t,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var l=e.length;for(n=0;n<l;n++)e[n]&&(t=D6(e[n]))&&(s&&(s+=" "),s+=t)}else for(t in e)e[t]&&(s&&(s+=" "),s+=t);return s}function P6(){for(var e,n,t=0,s="",l=arguments.length;t<l;t++)(e=arguments[t])&&(n=D6(e))&&(s&&(s+=" "),s+=n);return s}const Iy="-",TP=e=>{const n=MP(e),{conflictingClassGroups:t,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:o=>{const d=o.split(Iy);return d[0]===""&&d.length!==1&&d.shift(),I6(d,n)||AP(o)},getConflictingClassGroupIds:(o,d)=>{const c=t[o]||[];return d&&s[o]?[...c,...s[o]]:c}}},I6=(e,n)=>{if(e.length===0)return n.classGroupId;const t=e[0],s=n.nextPart.get(t),l=s?I6(e.slice(1),s):void 0;if(l)return l;if(n.validators.length===0)return;const i=e.join(Iy);return n.validators.find(({validator:o})=>o(i))?.classGroupId},y_=/^\[(.+)\]$/,AP=e=>{if(y_.test(e)){const n=y_.exec(e)[1],t=n?.substring(0,n.indexOf(":"));if(t)return"arbitrary.."+t}},MP=e=>{const{theme:n,prefix:t}=e,s={nextPart:new Map,validators:[]};return DP(Object.entries(e.classGroups),t).forEach(([i,o])=>{$b(o,s,i,n)}),s},$b=(e,n,t,s)=>{e.forEach(l=>{if(typeof l=="string"){const i=l===""?n:x_(n,l);i.classGroupId=t;return}if(typeof l=="function"){if(OP(l)){$b(l(s),n,t,s);return}n.validators.push({validator:l,classGroupId:t});return}Object.entries(l).forEach(([i,o])=>{$b(o,x_(n,i),t,s)})})},x_=(e,n)=>{let t=e;return n.split(Iy).forEach(s=>{t.nextPart.has(s)||t.nextPart.set(s,{nextPart:new Map,validators:[]}),t=t.nextPart.get(s)}),t},OP=e=>e.isThemeGetter,DP=(e,n)=>n?e.map(([t,s])=>{const l=s.map(i=>typeof i=="string"?n+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,d])=>[n+o,d])):i);return[t,l]}):e,PP=e=>{if(e<1)return{get:()=>{},set:()=>{}};let n=0,t=new Map,s=new Map;const l=(i,o)=>{t.set(i,o),n++,n>e&&(n=0,s=t,t=new Map)};return{get(i){let o=t.get(i);if(o!==void 0)return o;if((o=s.get(i))!==void 0)return l(i,o),o},set(i,o){t.has(i)?t.set(i,o):l(i,o)}}},F6="!",IP=e=>{const{separator:n,experimentalParseClassName:t}=e,s=n.length===1,l=n[0],i=n.length,o=d=>{const c=[];let a=0,u=0,h;for(let g=0;g<d.length;g++){let w=d[g];if(a===0){if(w===l&&(s||d.slice(g,g+i)===n)){c.push(d.slice(u,g)),u=g+i;continue}if(w==="/"){h=g;continue}}w==="["?a++:w==="]"&&a--}const f=c.length===0?d:d.substring(u),m=f.startsWith(F6),b=m?f.substring(1):f,y=h&&h>u?h-u:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:b,maybePostfixModifierPosition:y}};return t?d=>t({className:d,parseClassName:o}):o},FP=e=>{if(e.length<=1)return e;const n=[];let t=[];return e.forEach(s=>{s[0]==="["?(n.push(...t.sort(),s),t=[]):t.push(s)}),n.push(...t.sort()),n},LP=e=>({cache:PP(e.cacheSize),parseClassName:IP(e),...TP(e)}),zP=/\s+/,BP=(e,n)=>{const{parseClassName:t,getClassGroupId:s,getConflictingClassGroupIds:l}=n,i=[],o=e.trim().split(zP);let d="";for(let c=o.length-1;c>=0;c-=1){const a=o[c],{modifiers:u,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:m}=t(a);let b=!!m,y=s(b?f.substring(0,m):f);if(!y){if(!b){d=a+(d.length>0?" "+d:d);continue}if(y=s(f),!y){d=a+(d.length>0?" "+d:d);continue}b=!1}const g=FP(u).join(":"),w=h?g+F6:g,x=w+y;if(i.includes(x))continue;i.push(x);const _=l(y,b);for(let j=0;j<_.length;++j){const R=_[j];i.push(w+R)}d=a+(d.length>0?" "+d:d)}return d};function qP(){let e=0,n,t,s="";for(;e<arguments.length;)(n=arguments[e++])&&(t=L6(n))&&(s&&(s+=" "),s+=t);return s}const L6=e=>{if(typeof e=="string")return e;let n,t="";for(let s=0;s<e.length;s++)e[s]&&(n=L6(e[s]))&&(t&&(t+=" "),t+=n);return t};function $P(e,...n){let t,s,l,i=o;function o(c){const a=n.reduce((u,h)=>h(u),e());return t=LP(a),s=t.cache.get,l=t.cache.set,i=d,d(c)}function d(c){const a=s(c);if(a)return a;const u=BP(c,t);return l(c,u),u}return function(){return i(qP.apply(null,arguments))}}const Vr=e=>{const n=t=>t[e]||[];return n.isThemeGetter=!0,n},z6=/^\[(?:([a-z-]+):)?(.+)\]$/i,UP=/^\d+\/\d+$/,HP=new Set(["px","full","screen"]),VP=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,KP=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,WP=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,QP=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,GP=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ti=e=>Gl(e)||HP.has(e)||UP.test(e),Ui=e=>gc(e,"length",nI),Gl=e=>!!e&&!Number.isNaN(Number(e)),Dg=e=>gc(e,"number",Gl),Ed=e=>!!e&&Number.isInteger(Number(e)),XP=e=>e.endsWith("%")&&Gl(e.slice(0,-1)),hr=e=>z6.test(e),Hi=e=>VP.test(e),YP=new Set(["length","size","percentage"]),ZP=e=>gc(e,YP,B6),JP=e=>gc(e,"position",B6),eI=new Set(["image","url"]),tI=e=>gc(e,eI,aI),rI=e=>gc(e,"",sI),Rd=()=>!0,gc=(e,n,t)=>{const s=z6.exec(e);return s?s[1]?typeof n=="string"?s[1]===n:n.has(s[1]):t(s[2]):!1},nI=e=>KP.test(e)&&!WP.test(e),B6=()=>!1,sI=e=>QP.test(e),aI=e=>GP.test(e),iI=()=>{const e=Vr("colors"),n=Vr("spacing"),t=Vr("blur"),s=Vr("brightness"),l=Vr("borderColor"),i=Vr("borderRadius"),o=Vr("borderSpacing"),d=Vr("borderWidth"),c=Vr("contrast"),a=Vr("grayscale"),u=Vr("hueRotate"),h=Vr("invert"),f=Vr("gap"),m=Vr("gradientColorStops"),b=Vr("gradientColorStopPositions"),y=Vr("inset"),g=Vr("margin"),w=Vr("opacity"),x=Vr("padding"),_=Vr("saturate"),j=Vr("scale"),R=Vr("sepia"),M=Vr("skew"),I=Vr("space"),F=Vr("translate"),B=()=>["auto","contain","none"],U=()=>["auto","hidden","clip","visible","scroll"],Q=()=>["auto",hr,n],K=()=>[hr,n],T=()=>["",ti,Ui],P=()=>["auto",Gl,hr],A=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],N=()=>["solid","dashed","dotted","double","none"],k=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],S=()=>["start","end","center","between","around","evenly","stretch"],E=()=>["","0",hr],O=()=>["auto","avoid","all","avoid-page","page","left","right","column"],L=()=>[Gl,hr];return{cacheSize:500,separator:":",theme:{colors:[Rd],spacing:[ti,Ui],blur:["none","",Hi,hr],brightness:L(),borderColor:[e],borderRadius:["none","","full",Hi,hr],borderSpacing:K(),borderWidth:T(),contrast:L(),grayscale:E(),hueRotate:L(),invert:E(),gap:K(),gradientColorStops:[e],gradientColorStopPositions:[XP,Ui],inset:Q(),margin:Q(),opacity:L(),padding:K(),saturate:L(),scale:L(),sepia:E(),skew:L(),space:K(),translate:K()},classGroups:{aspect:[{aspect:["auto","square","video",hr]}],container:["container"],columns:[{columns:[Hi]}],"break-after":[{"break-after":O()}],"break-before":[{"break-before":O()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...A(),hr]}],overflow:[{overflow:U()}],"overflow-x":[{"overflow-x":U()}],"overflow-y":[{"overflow-y":U()}],overscroll:[{overscroll:B()}],"overscroll-x":[{"overscroll-x":B()}],"overscroll-y":[{"overscroll-y":B()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ed,hr]}],basis:[{basis:Q()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",hr]}],grow:[{grow:E()}],shrink:[{shrink:E()}],order:[{order:["first","last","none",Ed,hr]}],"grid-cols":[{"grid-cols":[Rd]}],"col-start-end":[{col:["auto",{span:["full",Ed,hr]},hr]}],"col-start":[{"col-start":P()}],"col-end":[{"col-end":P()}],"grid-rows":[{"grid-rows":[Rd]}],"row-start-end":[{row:["auto",{span:[Ed,hr]},hr]}],"row-start":[{"row-start":P()}],"row-end":[{"row-end":P()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",hr]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",hr]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...S()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...S(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...S(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[I]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[I]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",hr,n]}],"min-w":[{"min-w":[hr,n,"min","max","fit"]}],"max-w":[{"max-w":[hr,n,"none","full","min","max","fit","prose",{screen:[Hi]},Hi]}],h:[{h:[hr,n,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[hr,n,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[hr,n,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[hr,n,"auto","min","max","fit"]}],"font-size":[{text:["base",Hi,Ui]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Dg]}],"font-family":[{font:[Rd]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",hr]}],"line-clamp":[{"line-clamp":["none",Gl,Dg]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ti,hr]}],"list-image":[{"list-image":["none",hr]}],"list-style-type":[{list:["none","disc","decimal",hr]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...N(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ti,Ui]}],"underline-offset":[{"underline-offset":["auto",ti,hr]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:K()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",hr]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",hr]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...A(),JP]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",ZP]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},tI]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[d]}],"border-w-x":[{"border-x":[d]}],"border-w-y":[{"border-y":[d]}],"border-w-s":[{"border-s":[d]}],"border-w-e":[{"border-e":[d]}],"border-w-t":[{"border-t":[d]}],"border-w-r":[{"border-r":[d]}],"border-w-b":[{"border-b":[d]}],"border-w-l":[{"border-l":[d]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...N(),"hidden"]}],"divide-x":[{"divide-x":[d]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[d]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:N()}],"border-color":[{border:[l]}],"border-color-x":[{"border-x":[l]}],"border-color-y":[{"border-y":[l]}],"border-color-s":[{"border-s":[l]}],"border-color-e":[{"border-e":[l]}],"border-color-t":[{"border-t":[l]}],"border-color-r":[{"border-r":[l]}],"border-color-b":[{"border-b":[l]}],"border-color-l":[{"border-l":[l]}],"divide-color":[{divide:[l]}],"outline-style":[{outline:["",...N()]}],"outline-offset":[{"outline-offset":[ti,hr]}],"outline-w":[{outline:[ti,Ui]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:T()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[ti,Ui]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Hi,rI]}],"shadow-color":[{shadow:[Rd]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...k(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":k()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[s]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Hi,hr]}],grayscale:[{grayscale:[a]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[_]}],sepia:[{sepia:[R]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[a]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[_]}],"backdrop-sepia":[{"backdrop-sepia":[R]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",hr]}],duration:[{duration:L()}],ease:[{ease:["linear","in","out","in-out",hr]}],delay:[{delay:L()}],animate:[{animate:["none","spin","ping","pulse","bounce",hr]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[Ed,hr]}],"translate-x":[{"translate-x":[F]}],"translate-y":[{"translate-y":[F]}],"skew-x":[{"skew-x":[M]}],"skew-y":[{"skew-y":[M]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",hr]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",hr]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":K()}],"scroll-mx":[{"scroll-mx":K()}],"scroll-my":[{"scroll-my":K()}],"scroll-ms":[{"scroll-ms":K()}],"scroll-me":[{"scroll-me":K()}],"scroll-mt":[{"scroll-mt":K()}],"scroll-mr":[{"scroll-mr":K()}],"scroll-mb":[{"scroll-mb":K()}],"scroll-ml":[{"scroll-ml":K()}],"scroll-p":[{"scroll-p":K()}],"scroll-px":[{"scroll-px":K()}],"scroll-py":[{"scroll-py":K()}],"scroll-ps":[{"scroll-ps":K()}],"scroll-pe":[{"scroll-pe":K()}],"scroll-pt":[{"scroll-pt":K()}],"scroll-pr":[{"scroll-pr":K()}],"scroll-pb":[{"scroll-pb":K()}],"scroll-pl":[{"scroll-pl":K()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",hr]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[ti,Ui,Dg]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},oI=$P(iI);function Lt(...e){return oI(P6(e))}const lI=RP,q6=H.forwardRef(({className:e,...n},t)=>r.jsx(A6,{ref:t,className:Lt("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",e),...n}));q6.displayName=A6.displayName;const $6=H.forwardRef(({className:e,...n},t)=>r.jsx(M6,{ref:t,className:Lt("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",e),...n}));$6.displayName=M6.displayName;const U6=H.forwardRef(({className:e,...n},t)=>r.jsx(O6,{ref:t,className:Lt("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...n}));U6.displayName=O6.displayName;const cI=({id:e,type:n,title:t,message:s,duration:l=5e3,onClose:i})=>{H.useEffect(()=>{if(l>0){const a=setTimeout(()=>i(e),l);return()=>clearTimeout(a)}},[e,l,i]);const d=(()=>{switch(n){case"success":return{icon:es,bgClass:"bg-white border-l-4 border-green-500 shadow-xl",iconClass:"text-green-500",titleClass:"text-green-900"};case"error":return{icon:Mn,bgClass:"bg-white border-l-4 border-red-500 shadow-xl",iconClass:"text-red-500",titleClass:"text-red-900"};case"warning":return{icon:On,bgClass:"bg-white border-l-4 border-yellow-500 shadow-xl",iconClass:"text-yellow-500",titleClass:"text-yellow-900"};case"info":default:return{icon:$O,bgClass:"bg-white border-l-4 border-primary shadow-xl",iconClass:"text-primary",titleClass:"text-primary"}}})(),c=d.icon;return r.jsx("div",{className:`${d.bgClass} rounded-r-lg p-4 mb-3 min-w-[350px] max-w-[450px] animate-in slide-in-from-right-full duration-300`,children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:`mt-0.5 ${d.iconClass}`,children:r.jsx(c,{size:20,strokeWidth:2.5})}),r.jsxs("div",{className:"flex-grow min-w-0",children:[r.jsx("h6",{className:`font-semibold ${d.titleClass} mb-0.5 text-sm`,children:t}),s&&r.jsx("p",{className:"text-xs text-gray-600 leading-relaxed",children:s})]}),r.jsx("button",{type:"button",className:"text-gray-400 hover:text-gray-600 transition-colors flex-shrink-0 rounded-md hover:bg-gray-100 p-1",onClick:()=>i(e),"aria-label":"Close",children:r.jsx(ln,{size:16,strokeWidth:2})})]})})},dI=({toasts:e,onRemove:n})=>{const t=document.getElementById("toast-root")||document.body;return cs.createPortal(r.jsx("div",{className:"fixed top-4 right-4 z-[9999] max-h-[calc(100vh-2rem)] overflow-y-auto flex flex-col gap-0 pointer-events-none",children:r.jsx("div",{className:"pointer-events-auto",children:e.map(s=>r.jsx(cI,{id:s.id,type:s.type,title:s.title,message:s.message,duration:s.duration,onClose:n},s.id))})}),t)},H6=H.createContext(void 0),uI=({children:e})=>{const[n,t]=H.useState([]),s=a=>{const u=`toast-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,h={...a,id:u,duration:a.duration??5e3};t(f=>[...f,h])},l=a=>{t(u=>u.filter(h=>h.id!==a))},i=(a,u)=>s({type:"success",title:a,message:u}),o=(a,u)=>s({type:"error",title:a,message:u}),d=(a,u)=>s({type:"warning",title:a,message:u}),c=(a,u)=>s({type:"info",title:a,message:u});return r.jsxs(H6.Provider,{value:{toasts:n,showToast:s,hideToast:l,success:i,error:o,warning:d,info:c},children:[e,r.jsx(dI,{toasts:n,onRemove:l})]})},ir=()=>{const e=H.useContext(H6);if(e===void 0)throw new Error("useToast must be used within a ToastProvider");return e},Pg=[{key:"task_submissions"},{key:"messages"},{key:"task_approvals"},{key:"task_rejections"},{key:"assignments"}],fI=e=>{const n=new Date,t=e.replace(" ","T")+"Z",s=new Date(t),l=Math.floor((n.getTime()-s.getTime())/(1e3*60));if(l<1)return"";if(l<60)return`${l} `;const i=Math.floor(l/60);return i<24?`${i} `:`${Math.floor(i/24)} `},hI=({notification:e,onNotificationClick:n,onMarkAsRead:t,isMarkingAsRead:s})=>{const l=()=>{e.is_read||t(e.id),n(e.related_entity_id,e.related_entity_type)},i=o=>{o.stopPropagation(),t(e.id)};return r.jsxs("div",{dir:"rtl",className:`relative flex items-start gap-3 px-3 py-2.5 border-b border-border/30 cursor-pointer transition-colors ${e.is_read?"bg-transparent hover:bg-muted/50":"bg-primary/5"}`,onClick:l,children:[!e.is_read&&r.jsx("span",{className:"absolute top-3 right-2 w-1.5 h-1.5 rounded-full bg-primary"}),r.jsxs("div",{className:"flex-1 min-w-0 pr-2",children:[r.jsx("p",{className:"text-sm text-foreground leading-relaxed line-clamp-2 text-right",children:e.message}),r.jsx("span",{className:"text-xs text-muted-foreground mt-1 block text-right",children:fI(e.created_at)})]}),!e.is_read&&r.jsx("button",{onClick:i,disabled:s,className:"shrink-0 p-1 rounded hover:bg-muted transition-colors",title:"  ",children:s?r.jsx("div",{className:"w-3 h-3 border-2 border-primary border-t-transparent rounded-full animate-spin"}):r.jsx(ha,{size:12,className:"text-muted-foreground"})})]})},mI=({onNotificationClick:e})=>{const{error:n}=ir(),{data:t,isLoading:s,error:l}=QD(),i=XD(),o=YD(),d=ZD(),c=y=>{i.mutate(y)},a=y=>{o.mutate(y)},u=()=>{d.mutate()};if(De.useEffect(()=>{(i.isError||o.isError||d.isError)&&n("    ")},[i.isError,o.isError,d.isError,n]),s)return r.jsx("div",{className:"flex items-center justify-center py-8",children:r.jsx("div",{className:"w-5 h-5 border-2 border-primary border-t-transparent rounded-full animate-spin"})});if(l)return r.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-destructive gap-2",children:[r.jsx(ln,{size:20}),r.jsx("span",{className:"text-sm",children:"   "})]});if(!t)return null;const{groups:h,total_unread:f,group_labels:m}=t,b=Pg.find(y=>h[y.key]?.total_count>0)?.key||"task_submissions";return r.jsxs("div",{dir:"rtl",className:"flex flex-col w-full",children:[r.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b border-border/50",children:[r.jsx("h3",{className:"text-sm font-semibold text-foreground",children:""}),f>0&&r.jsxs("button",{onClick:u,disabled:d.isPending,className:"flex items-center gap-1 text-xs text-primary hover:text-primary/80 transition-colors disabled:opacity-50",children:[d.isPending?r.jsx("div",{className:"w-3 h-3 border-2 border-primary border-t-transparent rounded-full animate-spin"}):r.jsx(t6,{size:14}),r.jsx("span",{children:" "})]})]}),r.jsxs(lI,{defaultValue:b,className:"w-full",children:[r.jsx(q6,{className:"w-full h-auto p-1 bg-muted/50 rounded-none border-b border-border/30 flex justify-start gap-0.5 overflow-x-auto",children:Pg.map(({key:y})=>{const w=h[y]?.unread_count||0,x=m[y];return r.jsxs($6,{value:y,className:"relative text-xs px-2 py-1.5 rounded-md data-[state=active]:bg-background data-[state=active]:shadow-sm whitespace-nowrap",children:[x,w>0&&r.jsx("span",{className:"mr-1 px-1 py-0.5 text-[10px] font-medium bg-primary text-primary-foreground rounded-full min-w-[16px] text-center",children:w})]},y)})}),Pg.map(({key:y})=>{const g=h[y],w=g?.notifications||[],x=g?.unread_count||0;return r.jsxs(U6,{value:y,className:"mt-0",children:[x>0&&r.jsx("div",{className:"px-3 py-1.5 border-b border-border/30 bg-muted/30",children:r.jsxs("button",{onClick:()=>a(y),disabled:o.isPending,className:"text-xs text-muted-foreground hover:text-foreground transition-colors disabled:opacity-50 flex items-center gap-1",children:[r.jsx(ha,{size:12}),r.jsx("span",{children:"    "})]})}),r.jsx("div",{className:"max-h-[280px] overflow-y-auto",children:w.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-muted-foreground gap-2",children:[r.jsx(BO,{size:24}),r.jsx("span",{className:"text-sm",children:"  "})]}):w.map(_=>r.jsx(hI,{notification:_,onNotificationClick:e,onMarkAsRead:c,isMarkingAsRead:i.isPending},_.id))})]},y)})]})]})},V6=({className:e=""})=>{const[n,t]=H.useState(!1),[s,l]=H.useState({top:0,left:0}),i=H.useRef(null),o=H.useRef(null),d=H.useRef(0),c=H.useRef(!1),a=kn(),{data:u,isLoading:h,error:f}=GD(),m=u?.count||0;H.useEffect(()=>{const g=w=>{i.current&&!i.current.contains(w.target)&&o.current&&!o.current.contains(w.target)&&t(!1)};if(n)return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[n]),H.useEffect(()=>{const g=w=>{w.key==="Escape"&&t(!1)};if(n)return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[n]),H.useEffect(()=>{f6()},[]),H.useEffect(()=>{if(!c.current||h||f){!h&&!f&&m>=0&&(c.current=!0,d.current=m);return}m>d.current&&m>0&&u6().catch(g=>{console.warn("Failed to play notification sound:",g)}),d.current=m},[m,h,f]);const b=()=>{if(!n&&o.current){const g=o.current.getBoundingClientRect();l({top:g.bottom+8,left:Math.max(10,g.left-380+g.width+10)})}t(g=>!g)},y=(g,w)=>{let x="/tasks";w==="task"?x=`/tasks?taskId=${g}`:w==="message"?x=`/tasks?highlightMessage=${g}`:w==="invoice"?x=`/invoices?invoiceId=${g}`:x=`/tasks?taskId=${g}`,console.log("Navigating to:",x),a(x),t(!1)};return r.jsxs("div",{className:`relative ${e}`,children:[r.jsxs("button",{ref:o,onClick:b,className:`relative p-2 rounded-lg border-0 transition-all duration-200 ${n?"bg-gray-300 scale-95":"bg-gray-100 hover:bg-gray-200"} ${f?"text-red-500":"text-gray-600"}`,"aria-label":`${m>0?` (${m}  )`:""}`,disabled:h,children:[r.jsx(rc,{size:20,fill:m>0?"currentColor":"none"}),m>0&&r.jsx("span",{className:"absolute -top-0.5 -right-0.5 bg-red-500 text-white rounded-full flex items-center justify-center text-[10px] min-w-[18px] h-[18px] animate-pulse",children:m>99?"99+":m}),h&&r.jsx("span",{className:"absolute -top-0.5 -right-0.5",children:r.jsx("div",{className:"w-3 h-3 border-2 border-blue-500 border-t-transparent rounded-full animate-spin",role:"status",children:r.jsx("span",{className:"sr-only",children:"Loading..."})})}),f&&r.jsx("span",{className:"absolute -top-0.5 -right-0.5 bg-red-500 rounded-full w-3 h-3",title:"   "})]}),n&&cs.createPortal(r.jsx("div",{ref:i,className:"fixed shadow-2xl border-0 bg-white rounded-xl overflow-hidden transition-all duration-300",style:{position:"fixed",top:s.top,left:s.left,width:"380px",maxHeight:"500px",zIndex:1055,transition:"all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1)",opacity:1,visibility:"visible",transform:"scale(1)",transformOrigin:"top right"},children:r.jsx(mI,{onNotificationClick:y,onClose:()=>t(!1)})}),document.body)]})},et=mm(e=>({isOpen:!1,modalType:null,props:{},openModal:(n,t)=>e({isOpen:!0,modalType:n,props:t}),closeModal:()=>e({isOpen:!1,modalType:null,props:{}})})),pI=()=>{const e=Dn(x=>x.user),n=Dn(x=>x.logout),{isCollapsed:t,toggleCollapsed:s}=_m(),{t:l}=qt(),i=kn(),o=ta(),[d,c]=H.useState(!0),a=et(x=>x.openModal),u=()=>{a("clientSearch",{})},h=()=>a("taskForm",{}),f=()=>a("invoiceForm",{}),m=()=>{n(),i("/login",{replace:!0})},b=[{path:"/dashboard",icon:n6,label:l("dashboard.title")||" "},{path:"/clients",icon:fi,label:l("clients.title")||""},{path:"/employees",icon:DD,label:" "},{path:"/receivables",icon:UM,label:l("receivables.title")||""},{path:"/tags",icon:CD,label:" "},{path:"/settings",icon:Fh,label:l("settings.title")||""}],y=[{path:"/financial-center/accounts",icon:d6,label:"   "},{path:"/financial-center/pending",icon:wD,label:" "},{path:"/financial-center/invoices",icon:Sn,label:" "}],g=[{path:"/tasks",icon:tD,label:l("tasks.title")||"",isMainTasks:!0},{path:"/tasks?type=Government",icon:Cu,label:" "},{path:"/tasks?type=Accounting",icon:eO,label:" "},{path:"/tasks?type=RealEstate",icon:Ay,label:" "},{path:"/tasks?type=Other",icon:ro,label:" "}],w=x=>{if(x==="/tasks")return o.pathname==="/tasks"&&!o.search;const j=new URLSearchParams(o.search).get("type"),R=x.split("type=")[1];return o.pathname==="/tasks"&&j===R};return r.jsxs(r.Fragment,{children:[r.jsxs("aside",{className:`
          fixed top-0 right-0 h-screen flex flex-col bg-card border-l border-border z-40 
          transition-all duration-300 ease-in-out overflow-hidden
          ${t?"w-0 border-l-0":"w-40"}
        `,style:{direction:"rtl"},children:[!t&&r.jsx("button",{className:"absolute top-1/2 -left-3 -translate-y-1/2 w-6 h-6 bg-muted hover:bg-muted/80 border border-border rounded-full flex items-center justify-center cursor-pointer z-10 transition-all duration-200 text-black hover:scale-110",onClick:s,title:t?"  ":"  ",children:r.jsx(Gs,{size:16})}),r.jsx("div",{className:"px-3 py-3 border-b border-border bg-muted/30 flex items-center gap-2 min-h-[60px]",children:r.jsxs("div",{className:"flex items-center justify-between w-full",children:[r.jsx(Jj,{}),!t&&r.jsx(V6,{className:"ml-2"})]})}),r.jsxs("nav",{className:"flex-1 py-2 overflow-y-auto scrollbar-thin scrollbar-thumb-muted-foreground scrollbar-track-transparent hover:scrollbar-thumb-primary",children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("div",{className:"text-xs text-black font-bold uppercase tracking-wider px-2 mb-1 text-right",children:" "}),b.map(x=>r.jsxs(Yd,{to:x.path,className:({isActive:_})=>`flex items-center gap-2 px-2 py-1.5 mx-1 text-foreground text-xs font-normal no-underline rounded-lg transition-all duration-200 relative overflow-hidden hover:bg-accent hover:text-accent-foreground hover:-translate-x-1 hover:font-bold ${_?'bg-primary text-primary-foreground font-bold shadow-md before:content-[""] before:absolute before:top-0 before:right-0 before:w-1 before:h-full before:bg-primary-foreground before:rounded-l-sm':""}`,children:[r.jsx("span",{className:"w-4 h-4 flex items-center justify-center text-sm transition-all duration-200 flex-shrink-0",children:r.jsx(x.icon,{size:16})}),r.jsx("span",{className:"flex-1 text-right whitespace-nowrap",children:x.label}),r.jsx("span",{className:`w-1.5 h-1.5 rounded-full flex-shrink-0 bg-primary-foreground transition-opacity duration-200 ${o.pathname===x.path?"opacity-100":"opacity-0"}`})]},x.path))]}),r.jsxs("div",{className:"mb-4",children:[r.jsxs("div",{className:"text-xs text-black font-bold uppercase tracking-wider px-2 mb-1 text-right cursor-pointer flex items-center justify-between",onClick:()=>c(!d),children:["",d?r.jsx(mc,{size:16}):r.jsx(Gs,{size:16})]}),d&&r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:h,className:"w-full border-none bg-transparent text-right flex items-center gap-2 px-2 py-1.5 mx-1 text-foreground text-xs font-normal rounded-lg transition-all duration-200 hover:bg-accent hover:text-accent-foreground hover:-translate-x-1 focus:outline-none focus:bg-accent",children:[r.jsx("span",{className:"w-4 h-4 flex items-center justify-center text-sm transition-all duration-200 flex-shrink-0",children:r.jsx(hn,{size:16})}),r.jsx("span",{className:"flex-1 text-right whitespace-nowrap",children:" "})]}),r.jsxs("button",{onClick:f,className:"w-full border-none bg-transparent text-right flex items-center gap-2 px-2 py-1.5 mx-1 text-foreground text-xs font-normal rounded-lg transition-all duration-200 hover:bg-accent hover:text-accent-foreground hover:-translate-x-1 focus:outline-none focus:bg-accent",children:[r.jsx("span",{className:"w-4 h-4 flex items-center justify-center text-sm transition-all duration-200 flex-shrink-0",children:r.jsx(Vo,{size:16})}),r.jsx("span",{className:"flex-1 text-right whitespace-nowrap",children:" "})]}),r.jsxs("button",{onClick:()=>a("recordCreditModal",{}),className:"w-full border-none bg-transparent text-right flex items-center gap-2 px-2 py-1.5 mx-1 text-foreground text-xs font-normal rounded-lg transition-all duration-200 hover:bg-accent hover:text-accent-foreground hover:-translate-x-1 focus:outline-none focus:bg-accent",children:[r.jsx("span",{className:"w-4 h-4 flex items-center justify-center text-sm transition-all duration-200 flex-shrink-0",children:r.jsx(gs,{size:16})}),r.jsx("span",{className:"flex-1 text-right whitespace-nowrap",children:"  "})]}),r.jsxs("button",{onClick:()=>a("urgentAlert",{}),className:"w-full border-none bg-transparent text-right flex items-center gap-2 px-2 py-1.5 mx-1 text-foreground text-xs font-normal rounded-lg transition-all duration-200 hover:bg-accent hover:text-accent-foreground hover:-translate-x-1 focus:outline-none focus:bg-accent",children:[r.jsx("span",{className:"w-4 h-4 flex items-center justify-center text-sm transition-all duration-200 flex-shrink-0",children:r.jsx(On,{size:16})}),r.jsx("span",{className:"flex-1 text-right whitespace-nowrap",children:"  "})]})]})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("div",{className:"text-xs text-black font-bold uppercase tracking-wider px-2 mb-1 text-right",children:" "}),y.map(x=>r.jsxs(Yd,{to:x.path,className:({isActive:_})=>`flex items-center gap-2 px-2 py-1.5 mx-1 text-foreground text-xs font-normal no-underline rounded-lg transition-all duration-200 relative overflow-hidden hover:bg-accent hover:text-accent-foreground hover:-translate-x-1 hover:font-bold ${_?'bg-primary text-primary-foreground font-bold shadow-md before:content-[""] before:absolute before:top-0 before:right-0 before:w-1 before:h-full before:bg-primary-foreground before:rounded-l-sm':""}`,children:[r.jsx("span",{className:"w-4 h-4 flex items-center justify-center text-sm transition-all duration-200 flex-shrink-0",children:r.jsx(x.icon,{size:16})}),r.jsx("span",{className:"flex-1 text-right whitespace-nowrap",children:x.label}),r.jsx("span",{className:`w-1.5 h-1.5 rounded-full flex-shrink-0 bg-primary-foreground transition-opacity duration-200 ${o.pathname===x.path?"opacity-100":"opacity-0"}`})]},x.path))]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("div",{className:"text-xs text-black font-bold uppercase tracking-wider px-2 mb-1 text-right",children:" "}),g.map(x=>r.jsxs(Yd,{to:x.path,className:()=>`flex items-center gap-2 px-2 py-1.5 mx-1 text-foreground text-xs font-normal no-underline rounded-lg transition-all duration-200 relative overflow-hidden hover:bg-accent hover:text-accent-foreground hover:-translate-x-1 hover:font-bold ${w(x.path)?'bg-primary text-primary-foreground font-bold shadow-md before:content-[""] before:absolute before:top-0 before:right-0 before:w-1 before:h-full before:bg-primary-foreground before:rounded-l-sm':""}`,children:[r.jsx("span",{className:"w-4 h-4 flex items-center justify-center text-sm transition-all duration-200 flex-shrink-0",children:r.jsx(x.icon,{size:16})}),r.jsx("span",{className:"flex-1 text-right whitespace-nowrap",children:x.label}),r.jsx("span",{className:`w-1.5 h-1.5 rounded-full flex-shrink-0 bg-primary-foreground transition-opacity duration-200 ${w(x.path)?"opacity-100":"opacity-0"}`})]},x.path))]}),r.jsxs("div",{className:"mx-2 mb-2 relative",children:[r.jsx("input",{type:"text",placeholder:l("globalSearch.placeholder")||" ...",className:"w-full px-2 pr-8 py-1.5 bg-muted/30 border border-border rounded-lg text-xs font-normal outline-none transition-all duration-200 cursor-pointer placeholder:text-right text-foreground hover:bg-muted/50 hover:border-primary/30 focus:bg-muted focus:border-primary focus:ring-2 focus:ring-primary/20",onFocus:u,readOnly:!0}),r.jsx(ps,{size:16,className:"absolute right-2 top-1/2 -translate-y-1/2 text-black transition-all duration-200 pointer-events-none"})]})]}),r.jsx("div",{className:"p-2 border-t border-border bg-muted/30",children:r.jsxs("div",{className:"flex items-center gap-2 p-1.5 bg-muted/50 rounded-lg transition-all duration-200 hover:bg-muted/70",children:[r.jsx("div",{className:"w-9 h-9 rounded-full bg-primary text-primary-foreground flex items-center justify-center font-semibold text-base flex-shrink-0 shadow-sm border-2 border-primary/20",children:r.jsx("span",{children:e?.display_name?.charAt(0).toUpperCase()||""})}),r.jsxs("div",{className:"flex-1 text-right overflow-hidden",children:[r.jsx("div",{className:"text-foreground text-sm font-medium whitespace-nowrap overflow-hidden text-ellipsis mb-0.5",children:e?.display_name||""}),r.jsx("div",{className:"text-black text-xs font-normal",children:""})]}),r.jsx("button",{onClick:m,className:"bg-transparent border-none text-black text-base cursor-pointer p-1.5 rounded transition-all duration-200 flex-shrink-0 hover:text-destructive hover:bg-destructive/10 hover:scale-105 active:scale-95",title:l("common.logout")||" ",children:r.jsx(s6,{size:18})})]})})]}),t&&cs.createPortal(r.jsx("button",{className:"fixed top-1/2 -right-5 -translate-y-1/2 w-10 h-10 bg-primary hover:bg-primary/90 text-primary-foreground border-2 border-primary rounded-l-full flex items-center justify-center cursor-pointer z-[9999] shadow-lg transition-all duration-300 ease-in-out hover:-right-2.5 hover:shadow-xl",onClick:s,title:"  ",children:r.jsx(Gs,{className:"rotate-180",size:18})}),document.body)]})},Zt=({isOpen:e,onClose:n,title:t,children:s,className:l,allowOutsideClick:i=!1})=>{if(H.useEffect(()=>{const d=c=>{c.key==="Escape"&&n()};if(e)return document.addEventListener("keydown",d),()=>document.removeEventListener("keydown",d)},[e,n]),!e)return null;const o=i?n:void 0;return r.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4 overflow-y-auto",onClick:o,children:r.jsxs("div",{className:`bg-card rounded-xl shadow-2xl max-w-2xl w-full my-8 flex flex-col max-h-[calc(100vh-4rem)] animate-in fade-in-0 zoom-in-95 duration-200 ${l||""}`,onClick:d=>d.stopPropagation(),children:[r.jsxs("header",{className:"flex items-center justify-between px-6 py-4 border-b border-primary/20 bg-primary text-primary-foreground flex-shrink-0",children:[r.jsx("h5",{className:"text-lg font-semibold tracking-tight",children:t}),r.jsx("button",{type:"button",className:"rounded-lg p-1.5 transition-colors text-primary-foreground/80 hover:text-primary-foreground hover:bg-white/10",onClick:n,children:r.jsx(ln,{className:"h-5 w-5"})})]}),r.jsx("div",{className:"p-6 bg-card overflow-y-auto flex-1",children:s})]})})};var Tu=e=>e.type==="checkbox",zo=e=>e instanceof Date,Jn=e=>e==null;const K6=e=>typeof e=="object";var mn=e=>!Jn(e)&&!Array.isArray(e)&&K6(e)&&!zo(e),W6=e=>mn(e)&&e.target?Tu(e.target)?e.target.checked:e.target.value:e,gI=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Q6=(e,n)=>e.has(gI(n)),bI=e=>{const n=e.constructor&&e.constructor.prototype;return mn(n)&&n.hasOwnProperty("isPrototypeOf")},Fy=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Kr(e){let n;const t=Array.isArray(e),s=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)n=new Date(e);else if(!(Fy&&(e instanceof Blob||s))&&(t||mn(e)))if(n=t?[]:{},!t&&!bI(e))n=e;else for(const l in e)e.hasOwnProperty(l)&&(n[l]=Kr(e[l]));else return e;return n}var Am=e=>/^\w*$/.test(e),Wr=e=>e===void 0,Mm=e=>Array.isArray(e)?e.filter(Boolean):[],Ly=e=>Mm(e.replace(/["|']|\]/g,"").split(/\.|\[/)),wt=(e,n,t)=>{if(!n||!mn(e))return t;const s=(Am(n)?[n]:Ly(n)).reduce((l,i)=>Jn(l)?l:l[i],e);return Wr(s)||s===e?Wr(e[n])?t:e[n]:s},Ms=e=>typeof e=="boolean",Lr=(e,n,t)=>{let s=-1;const l=Am(n)?[n]:Ly(n),i=l.length,o=i-1;for(;++s<i;){const d=l[s];let c=t;if(s!==o){const a=e[d];c=mn(a)||Array.isArray(a)?a:isNaN(+l[s+1])?{}:[]}if(d==="__proto__"||d==="constructor"||d==="prototype")return;e[d]=c,e=e[d]}};const Bh={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Qs={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ri={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},G6=De.createContext(null);G6.displayName="HookFormContext";const Om=()=>De.useContext(G6);var X6=(e,n,t,s=!0)=>{const l={defaultValues:n._defaultValues};for(const i in e)Object.defineProperty(l,i,{get:()=>{const o=i;return n._proxyFormState[o]!==Qs.all&&(n._proxyFormState[o]=!s||Qs.all),t&&(t[o]=!0),e[o]}});return l};const Dm=typeof window<"u"?De.useLayoutEffect:De.useEffect;function yI(e){const n=Om(),{control:t=n.control,disabled:s,name:l,exact:i}=e||{},[o,d]=De.useState(t._formState),c=De.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return Dm(()=>t._subscribe({name:l,formState:c.current,exact:i,callback:a=>{!s&&d({...t._formState,...a})}}),[l,s,i]),De.useEffect(()=>{c.current.isValid&&t._setValid(!0)},[t]),De.useMemo(()=>X6(o,t,c.current,!1),[o,t])}var Aa=e=>typeof e=="string",Y6=(e,n,t,s,l)=>Aa(e)?(s&&n.watch.add(e),wt(t,e,l)):Array.isArray(e)?e.map(i=>(s&&n.watch.add(i),wt(t,i))):(s&&(n.watchAll=!0),t),Ub=e=>Jn(e)||!K6(e);function ci(e,n,t=new WeakSet){if(Ub(e)||Ub(n))return e===n;if(zo(e)&&zo(n))return e.getTime()===n.getTime();const s=Object.keys(e),l=Object.keys(n);if(s.length!==l.length)return!1;if(t.has(e)||t.has(n))return!0;t.add(e),t.add(n);for(const i of s){const o=e[i];if(!l.includes(i))return!1;if(i!=="ref"){const d=n[i];if(zo(o)&&zo(d)||mn(o)&&mn(d)||Array.isArray(o)&&Array.isArray(d)?!ci(o,d,t):o!==d)return!1}}return!0}function Z6(e){const n=Om(),{control:t=n.control,name:s,defaultValue:l,disabled:i,exact:o,compute:d}=e||{},c=De.useRef(l),a=De.useRef(d),u=De.useRef(void 0);a.current=d;const h=De.useMemo(()=>t._getWatch(s,c.current),[t,s]),[f,m]=De.useState(a.current?a.current(h):h);return Dm(()=>t._subscribe({name:s,formState:{values:!0},exact:o,callback:b=>{if(!i){const y=Y6(s,t._names,b.values||t._formValues,!1,c.current);if(a.current){const g=a.current(y);ci(g,u.current)||(m(g),u.current=g)}else m(y)}}}),[t,i,s,o]),De.useEffect(()=>t._removeUnmounted()),f}function xI(e){const n=Om(),{name:t,disabled:s,control:l=n.control,shouldUnregister:i,defaultValue:o}=e,d=Q6(l._names.array,t),c=De.useMemo(()=>wt(l._formValues,t,wt(l._defaultValues,t,o)),[l,t,o]),a=Z6({control:l,name:t,defaultValue:c,exact:!0}),u=yI({control:l,name:t,exact:!0}),h=De.useRef(e),f=De.useRef(l.register(t,{...e.rules,value:a,...Ms(e.disabled)?{disabled:e.disabled}:{}}));h.current=e;const m=De.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!wt(u.errors,t)},isDirty:{enumerable:!0,get:()=>!!wt(u.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!wt(u.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!wt(u.validatingFields,t)},error:{enumerable:!0,get:()=>wt(u.errors,t)}}),[u,t]),b=De.useCallback(x=>f.current.onChange({target:{value:W6(x),name:t},type:Bh.CHANGE}),[t]),y=De.useCallback(()=>f.current.onBlur({target:{value:wt(l._formValues,t),name:t},type:Bh.BLUR}),[t,l._formValues]),g=De.useCallback(x=>{const _=wt(l._fields,t);_&&x&&(_._f.ref={focus:()=>x.focus&&x.focus(),select:()=>x.select&&x.select(),setCustomValidity:j=>x.setCustomValidity(j),reportValidity:()=>x.reportValidity()})},[l._fields,t]),w=De.useMemo(()=>({name:t,value:a,...Ms(s)||u.disabled?{disabled:u.disabled||s}:{},onChange:b,onBlur:y,ref:g}),[t,s,u.disabled,b,y,g,a]);return De.useEffect(()=>{const x=l._options.shouldUnregister||i;l.register(t,{...h.current.rules,...Ms(h.current.disabled)?{disabled:h.current.disabled}:{}});const _=(j,R)=>{const M=wt(l._fields,j);M&&M._f&&(M._f.mount=R)};if(_(t,!0),x){const j=Kr(wt(l._options.defaultValues,t));Lr(l._defaultValues,t,j),Wr(wt(l._formValues,t))&&Lr(l._formValues,t,j)}return!d&&l.register(t),()=>{(d?x&&!l._state.action:x)?l.unregister(t):_(t,!1)}},[t,l,d,i]),De.useEffect(()=>{l._setDisabledField({disabled:s,name:t})},[s,t,l]),De.useMemo(()=>({field:w,formState:u,fieldState:m}),[w,u,m])}const an=e=>e.render(xI(e));var vI=(e,n,t,s,l)=>n?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[s]:l||!0}}:{},ds=e=>Array.isArray(e)?e:[e],v_=()=>{let e=[];return{get observers(){return e},next:l=>{for(const i of e)i.next&&i.next(l)},subscribe:l=>(e.push(l),{unsubscribe:()=>{e=e.filter(i=>i!==l)}}),unsubscribe:()=>{e=[]}}},Yn=e=>mn(e)&&!Object.keys(e).length,zy=e=>e.type==="file",ua=e=>typeof e=="function",qh=e=>{if(!Fy)return!1;const n=e?e.ownerDocument:0;return e instanceof(n&&n.defaultView?n.defaultView.HTMLElement:HTMLElement)},J6=e=>e.type==="select-multiple",By=e=>e.type==="radio",wI=e=>By(e)||Tu(e),Ig=e=>qh(e)&&e.isConnected;function _I(e,n){const t=n.slice(0,-1).length;let s=0;for(;s<t;)e=Wr(e)?s++:e[n[s++]];return e}function jI(e){for(const n in e)if(e.hasOwnProperty(n)&&!Wr(e[n]))return!1;return!0}function fn(e,n){const t=Array.isArray(n)?n:Am(n)?[n]:Ly(n),s=t.length===1?e:_I(e,t),l=t.length-1,i=t[l];return s&&delete s[i],l!==0&&(mn(s)&&Yn(s)||Array.isArray(s)&&jI(s))&&fn(e,t.slice(0,-1)),e}var e5=e=>{for(const n in e)if(ua(e[n]))return!0;return!1};function $h(e,n={}){const t=Array.isArray(e);if(mn(e)||t)for(const s in e)Array.isArray(e[s])||mn(e[s])&&!e5(e[s])?(n[s]=Array.isArray(e[s])?[]:{},$h(e[s],n[s])):Jn(e[s])||(n[s]=!0);return n}function t5(e,n,t){const s=Array.isArray(e);if(mn(e)||s)for(const l in e)Array.isArray(e[l])||mn(e[l])&&!e5(e[l])?Wr(n)||Ub(t[l])?t[l]=Array.isArray(e[l])?$h(e[l],[]):{...$h(e[l])}:t5(e[l],Jn(n)?{}:n[l],t[l]):t[l]=!ci(e[l],n[l]);return t}var Td=(e,n)=>t5(e,n,$h(n));const w_={value:!1,isValid:!1},__={value:!0,isValid:!0};var r5=e=>{if(Array.isArray(e)){if(e.length>1){const n=e.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:n,isValid:!!n.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Wr(e[0].attributes.value)?Wr(e[0].value)||e[0].value===""?__:{value:e[0].value,isValid:!0}:__:w_}return w_},n5=(e,{valueAsNumber:n,valueAsDate:t,setValueAs:s})=>Wr(e)?e:n?e===""?NaN:e&&+e:t&&Aa(e)?new Date(e):s?s(e):e;const j_={isValid:!1,value:null};var s5=e=>Array.isArray(e)?e.reduce((n,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:n,j_):j_;function N_(e){const n=e.ref;return zy(n)?n.files:By(n)?s5(e.refs).value:J6(n)?[...n.selectedOptions].map(({value:t})=>t):Tu(n)?r5(e.refs).value:n5(Wr(n.value)?e.ref.value:n.value,e)}var NI=(e,n,t,s)=>{const l={};for(const i of e){const o=wt(n,i);o&&Lr(l,i,o._f)}return{criteriaMode:t,names:[...e],fields:l,shouldUseNativeValidation:s}},Uh=e=>e instanceof RegExp,Ad=e=>Wr(e)?e:Uh(e)?e.source:mn(e)?Uh(e.value)?e.value.source:e.value:e,Wl=e=>({isOnSubmit:!e||e===Qs.onSubmit,isOnBlur:e===Qs.onBlur,isOnChange:e===Qs.onChange,isOnAll:e===Qs.all,isOnTouch:e===Qs.onTouched});const C_="AsyncFunction";var CI=e=>!!e&&!!e.validate&&!!(ua(e.validate)&&e.validate.constructor.name===C_||mn(e.validate)&&Object.values(e.validate).find(n=>n.constructor.name===C_)),SI=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),Hb=(e,n,t)=>!t&&(n.watchAll||n.watch.has(e)||[...n.watch].some(s=>e.startsWith(s)&&/^\.\w+/.test(e.slice(s.length))));const Xl=(e,n,t,s)=>{for(const l of t||Object.keys(e)){const i=wt(e,l);if(i){const{_f:o,...d}=i;if(o){if(o.refs&&o.refs[0]&&n(o.refs[0],l)&&!s)return!0;if(o.ref&&n(o.ref,o.name)&&!s)return!0;if(Xl(d,n))break}else if(mn(d)&&Xl(d,n))break}}};function S_(e,n,t){const s=wt(e,t);if(s||Am(t))return{error:s,name:t};const l=t.split(".");for(;l.length;){const i=l.join("."),o=wt(n,i),d=wt(e,i);if(o&&!Array.isArray(o)&&t!==i)return{name:t};if(d&&d.type)return{name:i,error:d};if(d&&d.root&&d.root.type)return{name:`${i}.root`,error:d.root};l.pop()}return{name:t}}var kI=(e,n,t,s)=>{t(e);const{name:l,...i}=e;return Yn(i)||Object.keys(i).length>=Object.keys(n).length||Object.keys(i).find(o=>n[o]===(!s||Qs.all))},EI=(e,n,t)=>!e||!n||e===n||ds(e).some(s=>s&&(t?s===n:s.startsWith(n)||n.startsWith(s))),RI=(e,n,t,s,l)=>l.isOnAll?!1:!t&&l.isOnTouch?!(n||e):(t?s.isOnBlur:l.isOnBlur)?!e:(t?s.isOnChange:l.isOnChange)?e:!0,TI=(e,n)=>!Mm(wt(e,n)).length&&fn(e,n),a5=(e,n,t)=>{const s=ds(wt(e,t));return Lr(s,"root",n[t]),Lr(e,t,s),e},wh=e=>Aa(e);function k_(e,n,t="validate"){if(wh(e)||Array.isArray(e)&&e.every(wh)||Ms(e)&&!e)return{type:t,message:wh(e)?e:"",ref:n}}var Ll=e=>mn(e)&&!Uh(e)?e:{value:e,message:""},Vb=async(e,n,t,s,l,i)=>{const{ref:o,refs:d,required:c,maxLength:a,minLength:u,min:h,max:f,pattern:m,validate:b,name:y,valueAsNumber:g,mount:w}=e._f,x=wt(t,y);if(!w||n.has(y))return{};const _=d?d[0]:o,j=K=>{l&&_.reportValidity&&(_.setCustomValidity(Ms(K)?"":K||""),_.reportValidity())},R={},M=By(o),I=Tu(o),F=M||I,B=(g||zy(o))&&Wr(o.value)&&Wr(x)||qh(o)&&o.value===""||x===""||Array.isArray(x)&&!x.length,U=vI.bind(null,y,s,R),Q=(K,T,P,A=ri.maxLength,N=ri.minLength)=>{const k=K?T:P;R[y]={type:K?A:N,message:k,ref:o,...U(K?A:N,k)}};if(i?!Array.isArray(x)||!x.length:c&&(!F&&(B||Jn(x))||Ms(x)&&!x||I&&!r5(d).isValid||M&&!s5(d).isValid)){const{value:K,message:T}=wh(c)?{value:!!c,message:c}:Ll(c);if(K&&(R[y]={type:ri.required,message:T,ref:_,...U(ri.required,T)},!s))return j(T),R}if(!B&&(!Jn(h)||!Jn(f))){let K,T;const P=Ll(f),A=Ll(h);if(!Jn(x)&&!isNaN(x)){const N=o.valueAsNumber||x&&+x;Jn(P.value)||(K=N>P.value),Jn(A.value)||(T=N<A.value)}else{const N=o.valueAsDate||new Date(x),k=O=>new Date(new Date().toDateString()+" "+O),S=o.type=="time",E=o.type=="week";Aa(P.value)&&x&&(K=S?k(x)>k(P.value):E?x>P.value:N>new Date(P.value)),Aa(A.value)&&x&&(T=S?k(x)<k(A.value):E?x<A.value:N<new Date(A.value))}if((K||T)&&(Q(!!K,P.message,A.message,ri.max,ri.min),!s))return j(R[y].message),R}if((a||u)&&!B&&(Aa(x)||i&&Array.isArray(x))){const K=Ll(a),T=Ll(u),P=!Jn(K.value)&&x.length>+K.value,A=!Jn(T.value)&&x.length<+T.value;if((P||A)&&(Q(P,K.message,T.message),!s))return j(R[y].message),R}if(m&&!B&&Aa(x)){const{value:K,message:T}=Ll(m);if(Uh(K)&&!x.match(K)&&(R[y]={type:ri.pattern,message:T,ref:o,...U(ri.pattern,T)},!s))return j(T),R}if(b){if(ua(b)){const K=await b(x,t),T=k_(K,_);if(T&&(R[y]={...T,...U(ri.validate,T.message)},!s))return j(T.message),R}else if(mn(b)){let K={};for(const T in b){if(!Yn(K)&&!s)break;const P=k_(await b[T](x,t),_,T);P&&(K={...P,...U(T,P.message)},j(P.message),s&&(R[y]=K))}if(!Yn(K)&&(R[y]={ref:_,...K},!s))return R}}return j(!0),R};const AI={mode:Qs.onSubmit,reValidateMode:Qs.onChange,shouldFocusError:!0};function MI(e={}){let n={...AI,...e},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:ua(n.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:n.errors||{},disabled:n.disabled||!1},s={},l=mn(n.defaultValues)||mn(n.values)?Kr(n.defaultValues||n.values)||{}:{},i=n.shouldUnregister?{}:Kr(l),o={action:!1,mount:!1,watch:!1},d={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,a=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let h={...u};const f={array:v_(),state:v_()},m=n.criteriaMode===Qs.all,b=te=>ie=>{clearTimeout(a),a=setTimeout(te,ie)},y=async te=>{if(!n.disabled&&(u.isValid||h.isValid||te)){const ie=n.resolver?Yn((await I()).errors):await B(s,!0);ie!==t.isValid&&f.state.next({isValid:ie})}},g=(te,ie)=>{!n.disabled&&(u.isValidating||u.validatingFields||h.isValidating||h.validatingFields)&&((te||Array.from(d.mount)).forEach(ue=>{ue&&(ie?Lr(t.validatingFields,ue,ie):fn(t.validatingFields,ue))}),f.state.next({validatingFields:t.validatingFields,isValidating:!Yn(t.validatingFields)}))},w=(te,ie=[],ue,_e,je=!0,ke=!0)=>{if(_e&&ue&&!n.disabled){if(o.action=!0,ke&&Array.isArray(wt(s,te))){const Le=ue(wt(s,te),_e.argA,_e.argB);je&&Lr(s,te,Le)}if(ke&&Array.isArray(wt(t.errors,te))){const Le=ue(wt(t.errors,te),_e.argA,_e.argB);je&&Lr(t.errors,te,Le),TI(t.errors,te)}if((u.touchedFields||h.touchedFields)&&ke&&Array.isArray(wt(t.touchedFields,te))){const Le=ue(wt(t.touchedFields,te),_e.argA,_e.argB);je&&Lr(t.touchedFields,te,Le)}(u.dirtyFields||h.dirtyFields)&&(t.dirtyFields=Td(l,i)),f.state.next({name:te,isDirty:Q(te,ie),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else Lr(i,te,ie)},x=(te,ie)=>{Lr(t.errors,te,ie),f.state.next({errors:t.errors})},_=te=>{t.errors=te,f.state.next({errors:t.errors,isValid:!1})},j=(te,ie,ue,_e)=>{const je=wt(s,te);if(je){const ke=wt(i,te,Wr(ue)?wt(l,te):ue);Wr(ke)||_e&&_e.defaultChecked||ie?Lr(i,te,ie?ke:N_(je._f)):P(te,ke),o.mount&&y()}},R=(te,ie,ue,_e,je)=>{let ke=!1,Le=!1;const Ue={name:te};if(!n.disabled){if(!ue||_e){(u.isDirty||h.isDirty)&&(Le=t.isDirty,t.isDirty=Ue.isDirty=Q(),ke=Le!==Ue.isDirty);const Qe=ci(wt(l,te),ie);Le=!!wt(t.dirtyFields,te),Qe?fn(t.dirtyFields,te):Lr(t.dirtyFields,te,!0),Ue.dirtyFields=t.dirtyFields,ke=ke||(u.dirtyFields||h.dirtyFields)&&Le!==!Qe}if(ue){const Qe=wt(t.touchedFields,te);Qe||(Lr(t.touchedFields,te,ue),Ue.touchedFields=t.touchedFields,ke=ke||(u.touchedFields||h.touchedFields)&&Qe!==ue)}ke&&je&&f.state.next(Ue)}return ke?Ue:{}},M=(te,ie,ue,_e)=>{const je=wt(t.errors,te),ke=(u.isValid||h.isValid)&&Ms(ie)&&t.isValid!==ie;if(n.delayError&&ue?(c=b(()=>x(te,ue)),c(n.delayError)):(clearTimeout(a),c=null,ue?Lr(t.errors,te,ue):fn(t.errors,te)),(ue?!ci(je,ue):je)||!Yn(_e)||ke){const Le={..._e,...ke&&Ms(ie)?{isValid:ie}:{},errors:t.errors,name:te};t={...t,...Le},f.state.next(Le)}},I=async te=>{g(te,!0);const ie=await n.resolver(i,n.context,NI(te||d.mount,s,n.criteriaMode,n.shouldUseNativeValidation));return g(te),ie},F=async te=>{const{errors:ie}=await I(te);if(te)for(const ue of te){const _e=wt(ie,ue);_e?Lr(t.errors,ue,_e):fn(t.errors,ue)}else t.errors=ie;return ie},B=async(te,ie,ue={valid:!0})=>{for(const _e in te){const je=te[_e];if(je){const{_f:ke,...Le}=je;if(ke){const Ue=d.array.has(ke.name),Qe=je._f&&CI(je._f);Qe&&u.validatingFields&&g([_e],!0);const Be=await Vb(je,d.disabled,i,m,n.shouldUseNativeValidation&&!ie,Ue);if(Qe&&u.validatingFields&&g([_e]),Be[ke.name]&&(ue.valid=!1,ie))break;!ie&&(wt(Be,ke.name)?Ue?a5(t.errors,Be,ke.name):Lr(t.errors,ke.name,Be[ke.name]):fn(t.errors,ke.name))}!Yn(Le)&&await B(Le,ie,ue)}}return ue.valid},U=()=>{for(const te of d.unMount){const ie=wt(s,te);ie&&(ie._f.refs?ie._f.refs.every(ue=>!Ig(ue)):!Ig(ie._f.ref))&&J(te)}d.unMount=new Set},Q=(te,ie)=>!n.disabled&&(te&&ie&&Lr(i,te,ie),!ci(O(),l)),K=(te,ie,ue)=>Y6(te,d,{...o.mount?i:Wr(ie)?l:Aa(te)?{[te]:ie}:ie},ue,ie),T=te=>Mm(wt(o.mount?i:l,te,n.shouldUnregister?wt(l,te,[]):[])),P=(te,ie,ue={})=>{const _e=wt(s,te);let je=ie;if(_e){const ke=_e._f;ke&&(!ke.disabled&&Lr(i,te,n5(ie,ke)),je=qh(ke.ref)&&Jn(ie)?"":ie,J6(ke.ref)?[...ke.ref.options].forEach(Le=>Le.selected=je.includes(Le.value)):ke.refs?Tu(ke.ref)?ke.refs.forEach(Le=>{(!Le.defaultChecked||!Le.disabled)&&(Array.isArray(je)?Le.checked=!!je.find(Ue=>Ue===Le.value):Le.checked=je===Le.value||!!je)}):ke.refs.forEach(Le=>Le.checked=Le.value===je):zy(ke.ref)?ke.ref.value="":(ke.ref.value=je,ke.ref.type||f.state.next({name:te,values:Kr(i)})))}(ue.shouldDirty||ue.shouldTouch)&&R(te,je,ue.shouldTouch,ue.shouldDirty,!0),ue.shouldValidate&&E(te)},A=(te,ie,ue)=>{for(const _e in ie){if(!ie.hasOwnProperty(_e))return;const je=ie[_e],ke=te+"."+_e,Le=wt(s,ke);(d.array.has(te)||mn(je)||Le&&!Le._f)&&!zo(je)?A(ke,je,ue):P(ke,je,ue)}},N=(te,ie,ue={})=>{const _e=wt(s,te),je=d.array.has(te),ke=Kr(ie);Lr(i,te,ke),je?(f.array.next({name:te,values:Kr(i)}),(u.isDirty||u.dirtyFields||h.isDirty||h.dirtyFields)&&ue.shouldDirty&&f.state.next({name:te,dirtyFields:Td(l,i),isDirty:Q(te,ke)})):_e&&!_e._f&&!Jn(ke)?A(te,ke,ue):P(te,ke,ue),Hb(te,d)&&f.state.next({...t,name:te}),f.state.next({name:o.mount?te:void 0,values:Kr(i)})},k=async te=>{o.mount=!0;const ie=te.target;let ue=ie.name,_e=!0;const je=wt(s,ue),ke=Qe=>{_e=Number.isNaN(Qe)||zo(Qe)&&isNaN(Qe.getTime())||ci(Qe,wt(i,ue,Qe))},Le=Wl(n.mode),Ue=Wl(n.reValidateMode);if(je){let Qe,Be;const ct=ie.type?N_(je._f):W6(te),ft=te.type===Bh.BLUR||te.type===Bh.FOCUS_OUT,_t=!SI(je._f)&&!n.resolver&&!wt(t.errors,ue)&&!je._f.deps||RI(ft,wt(t.touchedFields,ue),t.isSubmitted,Ue,Le),ut=Hb(ue,d,ft);Lr(i,ue,ct),ft?(je._f.onBlur&&je._f.onBlur(te),c&&c(0)):je._f.onChange&&je._f.onChange(te);const lt=R(ue,ct,ft),ht=!Yn(lt)||ut;if(!ft&&f.state.next({name:ue,type:te.type,values:Kr(i)}),_t)return(u.isValid||h.isValid)&&(n.mode==="onBlur"?ft&&y():ft||y()),ht&&f.state.next({name:ue,...ut?{}:lt});if(!ft&&ut&&f.state.next({...t}),n.resolver){const{errors:jt}=await I([ue]);if(ke(ct),_e){const pt=S_(t.errors,s,ue),Qt=S_(jt,s,pt.name||ue);Qe=Qt.error,ue=Qt.name,Be=Yn(jt)}}else g([ue],!0),Qe=(await Vb(je,d.disabled,i,m,n.shouldUseNativeValidation))[ue],g([ue]),ke(ct),_e&&(Qe?Be=!1:(u.isValid||h.isValid)&&(Be=await B(s,!0)));_e&&(je._f.deps&&E(je._f.deps),M(ue,Be,Qe,lt))}},S=(te,ie)=>{if(wt(t.errors,ie)&&te.focus)return te.focus(),1},E=async(te,ie={})=>{let ue,_e;const je=ds(te);if(n.resolver){const ke=await F(Wr(te)?te:je);ue=Yn(ke),_e=te?!je.some(Le=>wt(ke,Le)):ue}else te?(_e=(await Promise.all(je.map(async ke=>{const Le=wt(s,ke);return await B(Le&&Le._f?{[ke]:Le}:Le)}))).every(Boolean),!(!_e&&!t.isValid)&&y()):_e=ue=await B(s);return f.state.next({...!Aa(te)||(u.isValid||h.isValid)&&ue!==t.isValid?{}:{name:te},...n.resolver||!te?{isValid:ue}:{},errors:t.errors}),ie.shouldFocus&&!_e&&Xl(s,S,te?je:d.mount),_e},O=te=>{const ie={...o.mount?i:l};return Wr(te)?ie:Aa(te)?wt(ie,te):te.map(ue=>wt(ie,ue))},L=(te,ie)=>({invalid:!!wt((ie||t).errors,te),isDirty:!!wt((ie||t).dirtyFields,te),error:wt((ie||t).errors,te),isValidating:!!wt(t.validatingFields,te),isTouched:!!wt((ie||t).touchedFields,te)}),z=te=>{te&&ds(te).forEach(ie=>fn(t.errors,ie)),f.state.next({errors:te?t.errors:{}})},G=(te,ie,ue)=>{const _e=(wt(s,te,{_f:{}})._f||{}).ref,je=wt(t.errors,te)||{},{ref:ke,message:Le,type:Ue,...Qe}=je;Lr(t.errors,te,{...Qe,...ie,ref:_e}),f.state.next({name:te,errors:t.errors,isValid:!1}),ue&&ue.shouldFocus&&_e&&_e.focus&&_e.focus()},Z=(te,ie)=>ua(te)?f.state.subscribe({next:ue=>"values"in ue&&te(K(void 0,ie),ue)}):K(te,ie,!0),ee=te=>f.state.subscribe({next:ie=>{EI(te.name,ie.name,te.exact)&&kI(ie,te.formState||u,re,te.reRenderRoot)&&te.callback({values:{...i},...t,...ie,defaultValues:l})}}).unsubscribe,W=te=>(o.mount=!0,h={...h,...te.formState},ee({...te,formState:h})),J=(te,ie={})=>{for(const ue of te?ds(te):d.mount)d.mount.delete(ue),d.array.delete(ue),ie.keepValue||(fn(s,ue),fn(i,ue)),!ie.keepError&&fn(t.errors,ue),!ie.keepDirty&&fn(t.dirtyFields,ue),!ie.keepTouched&&fn(t.touchedFields,ue),!ie.keepIsValidating&&fn(t.validatingFields,ue),!n.shouldUnregister&&!ie.keepDefaultValue&&fn(l,ue);f.state.next({values:Kr(i)}),f.state.next({...t,...ie.keepDirty?{isDirty:Q()}:{}}),!ie.keepIsValid&&y()},$=({disabled:te,name:ie})=>{(Ms(te)&&o.mount||te||d.disabled.has(ie))&&(te?d.disabled.add(ie):d.disabled.delete(ie))},q=(te,ie={})=>{let ue=wt(s,te);const _e=Ms(ie.disabled)||Ms(n.disabled);return Lr(s,te,{...ue||{},_f:{...ue&&ue._f?ue._f:{ref:{name:te}},name:te,mount:!0,...ie}}),d.mount.add(te),ue?$({disabled:Ms(ie.disabled)?ie.disabled:n.disabled,name:te}):j(te,!0,ie.value),{..._e?{disabled:ie.disabled||n.disabled}:{},...n.progressive?{required:!!ie.required,min:Ad(ie.min),max:Ad(ie.max),minLength:Ad(ie.minLength),maxLength:Ad(ie.maxLength),pattern:Ad(ie.pattern)}:{},name:te,onChange:k,onBlur:k,ref:je=>{if(je){q(te,ie),ue=wt(s,te);const ke=Wr(je.value)&&je.querySelectorAll&&je.querySelectorAll("input,select,textarea")[0]||je,Le=wI(ke),Ue=ue._f.refs||[];if(Le?Ue.find(Qe=>Qe===ke):ke===ue._f.ref)return;Lr(s,te,{_f:{...ue._f,...Le?{refs:[...Ue.filter(Ig),ke,...Array.isArray(wt(l,te))?[{}]:[]],ref:{type:ke.type,name:te}}:{ref:ke}}}),j(te,!1,void 0,ke)}else ue=wt(s,te,{}),ue._f&&(ue._f.mount=!1),(n.shouldUnregister||ie.shouldUnregister)&&!(Q6(d.array,te)&&o.action)&&d.unMount.add(te)}}},Y=()=>n.shouldFocusError&&Xl(s,S,d.mount),se=te=>{Ms(te)&&(f.state.next({disabled:te}),Xl(s,(ie,ue)=>{const _e=wt(s,ue);_e&&(ie.disabled=_e._f.disabled||te,Array.isArray(_e._f.refs)&&_e._f.refs.forEach(je=>{je.disabled=_e._f.disabled||te}))},0,!1))},oe=(te,ie)=>async ue=>{let _e;ue&&(ue.preventDefault&&ue.preventDefault(),ue.persist&&ue.persist());let je=Kr(i);if(f.state.next({isSubmitting:!0}),n.resolver){const{errors:ke,values:Le}=await I();t.errors=ke,je=Kr(Le)}else await B(s);if(d.disabled.size)for(const ke of d.disabled)fn(je,ke);if(fn(t.errors,"root"),Yn(t.errors)){f.state.next({errors:{}});try{await te(je,ue)}catch(ke){_e=ke}}else ie&&await ie({...t.errors},ue),Y(),setTimeout(Y);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Yn(t.errors)&&!_e,submitCount:t.submitCount+1,errors:t.errors}),_e)throw _e},ae=(te,ie={})=>{wt(s,te)&&(Wr(ie.defaultValue)?N(te,Kr(wt(l,te))):(N(te,ie.defaultValue),Lr(l,te,Kr(ie.defaultValue))),ie.keepTouched||fn(t.touchedFields,te),ie.keepDirty||(fn(t.dirtyFields,te),t.isDirty=ie.defaultValue?Q(te,Kr(wt(l,te))):Q()),ie.keepError||(fn(t.errors,te),u.isValid&&y()),f.state.next({...t}))},ce=(te,ie={})=>{const ue=te?Kr(te):l,_e=Kr(ue),je=Yn(te),ke=je?l:_e;if(ie.keepDefaultValues||(l=ue),!ie.keepValues){if(ie.keepDirtyValues){const Le=new Set([...d.mount,...Object.keys(Td(l,i))]);for(const Ue of Array.from(Le))wt(t.dirtyFields,Ue)?Lr(ke,Ue,wt(i,Ue)):N(Ue,wt(ke,Ue))}else{if(Fy&&Wr(te))for(const Le of d.mount){const Ue=wt(s,Le);if(Ue&&Ue._f){const Qe=Array.isArray(Ue._f.refs)?Ue._f.refs[0]:Ue._f.ref;if(qh(Qe)){const Be=Qe.closest("form");if(Be){Be.reset();break}}}}if(ie.keepFieldsRef)for(const Le of d.mount)N(Le,wt(ke,Le));else s={}}i=n.shouldUnregister?ie.keepDefaultValues?Kr(l):{}:Kr(ke),f.array.next({values:{...ke}}),f.state.next({values:{...ke}})}d={mount:ie.keepDirtyValues?d.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!u.isValid||!!ie.keepIsValid||!!ie.keepDirtyValues,o.watch=!!n.shouldUnregister,f.state.next({submitCount:ie.keepSubmitCount?t.submitCount:0,isDirty:je?!1:ie.keepDirty?t.isDirty:!!(ie.keepDefaultValues&&!ci(te,l)),isSubmitted:ie.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:je?{}:ie.keepDirtyValues?ie.keepDefaultValues&&i?Td(l,i):t.dirtyFields:ie.keepDefaultValues&&te?Td(l,te):ie.keepDirty?t.dirtyFields:{},touchedFields:ie.keepTouched?t.touchedFields:{},errors:ie.keepErrors?t.errors:{},isSubmitSuccessful:ie.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},we=(te,ie)=>ce(ua(te)?te(i):te,ie),fe=(te,ie={})=>{const ue=wt(s,te),_e=ue&&ue._f;if(_e){const je=_e.refs?_e.refs[0]:_e.ref;je.focus&&(je.focus(),ie.shouldSelect&&ua(je.select)&&je.select())}},re=te=>{t={...t,...te}},le={control:{register:q,unregister:J,getFieldState:L,handleSubmit:oe,setError:G,_subscribe:ee,_runSchema:I,_focusError:Y,_getWatch:K,_getDirty:Q,_setValid:y,_setFieldArray:w,_setDisabledField:$,_setErrors:_,_getFieldArray:T,_reset:ce,_resetDefaultValues:()=>ua(n.defaultValues)&&n.defaultValues().then(te=>{we(te,n.resetOptions),f.state.next({isLoading:!1})}),_removeUnmounted:U,_disableForm:se,_subjects:f,_proxyFormState:u,get _fields(){return s},get _formValues(){return i},get _state(){return o},set _state(te){o=te},get _defaultValues(){return l},get _names(){return d},set _names(te){d=te},get _formState(){return t},get _options(){return n},set _options(te){n={...n,...te}}},subscribe:W,trigger:E,register:q,handleSubmit:oe,watch:Z,setValue:N,getValues:O,reset:we,resetField:ae,clearErrors:z,unregister:J,setError:G,setFocus:fe,getFieldState:L};return{...le,formControl:le}}var Vi=()=>{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const e=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{const t=(Math.random()*16+e)%16|0;return(n=="x"?t:t&3|8).toString(16)})},Fg=(e,n,t={})=>t.shouldFocus||Wr(t.shouldFocus)?t.focusName||`${e}.${Wr(t.focusIndex)?n:t.focusIndex}.`:"",Lg=(e,n)=>[...e,...ds(n)],zg=e=>Array.isArray(e)?e.map(()=>{}):void 0;function Bg(e,n,t){return[...e.slice(0,n),...ds(t),...e.slice(n)]}var qg=(e,n,t)=>Array.isArray(e)?(Wr(e[t])&&(e[t]=void 0),e.splice(t,0,e.splice(n,1)[0]),e):[],$g=(e,n)=>[...ds(n),...ds(e)];function OI(e,n){let t=0;const s=[...e];for(const l of n)s.splice(l-t,1),t++;return Mm(s).length?s:[]}var Ug=(e,n)=>Wr(n)?[]:OI(e,ds(n).sort((t,s)=>t-s)),Hg=(e,n,t)=>{[e[n],e[t]]=[e[t],e[n]]},E_=(e,n,t)=>(e[n]=t,e);function DI(e){const n=Om(),{control:t=n.control,name:s,keyName:l="id",shouldUnregister:i,rules:o}=e,[d,c]=De.useState(t._getFieldArray(s)),a=De.useRef(t._getFieldArray(s).map(Vi)),u=De.useRef(d),h=De.useRef(!1);u.current=d,t._names.array.add(s),De.useMemo(()=>o&&t.register(s,o),[t,o,s]),Dm(()=>t._subjects.array.subscribe({next:({values:R,name:M})=>{if(M===s||!M){const I=wt(R,s);Array.isArray(I)&&(c(I),a.current=I.map(Vi))}}}).unsubscribe,[t,s]);const f=De.useCallback(R=>{h.current=!0,t._setFieldArray(s,R)},[t,s]),m=(R,M)=>{const I=ds(Kr(R)),F=Lg(t._getFieldArray(s),I);t._names.focus=Fg(s,F.length-1,M),a.current=Lg(a.current,I.map(Vi)),f(F),c(F),t._setFieldArray(s,F,Lg,{argA:zg(R)})},b=(R,M)=>{const I=ds(Kr(R)),F=$g(t._getFieldArray(s),I);t._names.focus=Fg(s,0,M),a.current=$g(a.current,I.map(Vi)),f(F),c(F),t._setFieldArray(s,F,$g,{argA:zg(R)})},y=R=>{const M=Ug(t._getFieldArray(s),R);a.current=Ug(a.current,R),f(M),c(M),!Array.isArray(wt(t._fields,s))&&Lr(t._fields,s,void 0),t._setFieldArray(s,M,Ug,{argA:R})},g=(R,M,I)=>{const F=ds(Kr(M)),B=Bg(t._getFieldArray(s),R,F);t._names.focus=Fg(s,R,I),a.current=Bg(a.current,R,F.map(Vi)),f(B),c(B),t._setFieldArray(s,B,Bg,{argA:R,argB:zg(M)})},w=(R,M)=>{const I=t._getFieldArray(s);Hg(I,R,M),Hg(a.current,R,M),f(I),c(I),t._setFieldArray(s,I,Hg,{argA:R,argB:M},!1)},x=(R,M)=>{const I=t._getFieldArray(s);qg(I,R,M),qg(a.current,R,M),f(I),c(I),t._setFieldArray(s,I,qg,{argA:R,argB:M},!1)},_=(R,M)=>{const I=Kr(M),F=E_(t._getFieldArray(s),R,I);a.current=[...F].map((B,U)=>!B||U===R?Vi():a.current[U]),f(F),c([...F]),t._setFieldArray(s,F,E_,{argA:R,argB:I},!0,!1)},j=R=>{const M=ds(Kr(R));a.current=M.map(Vi),f([...M]),c([...M]),t._setFieldArray(s,[...M],I=>I,{},!0,!1)};return De.useEffect(()=>{if(t._state.action=!1,Hb(s,t._names)&&t._subjects.state.next({...t._formState}),h.current&&(!Wl(t._options.mode).isOnSubmit||t._formState.isSubmitted)&&!Wl(t._options.reValidateMode).isOnSubmit)if(t._options.resolver)t._runSchema([s]).then(R=>{const M=wt(R.errors,s),I=wt(t._formState.errors,s);(I?!M&&I.type||M&&(I.type!==M.type||I.message!==M.message):M&&M.type)&&(M?Lr(t._formState.errors,s,M):fn(t._formState.errors,s),t._subjects.state.next({errors:t._formState.errors}))});else{const R=wt(t._fields,s);R&&R._f&&!(Wl(t._options.reValidateMode).isOnSubmit&&Wl(t._options.mode).isOnSubmit)&&Vb(R,t._names.disabled,t._formValues,t._options.criteriaMode===Qs.all,t._options.shouldUseNativeValidation,!0).then(M=>!Yn(M)&&t._subjects.state.next({errors:a5(t._formState.errors,M,s)}))}t._subjects.state.next({name:s,values:Kr(t._formValues)}),t._names.focus&&Xl(t._fields,(R,M)=>{if(t._names.focus&&M.startsWith(t._names.focus)&&R.focus)return R.focus(),1}),t._names.focus="",t._setValid(),h.current=!1},[d,s,t]),De.useEffect(()=>(!wt(t._formValues,s)&&t._setFieldArray(s),()=>{const R=(M,I)=>{const F=wt(t._fields,M);F&&F._f&&(F._f.mount=I)};t._options.shouldUnregister||i?t.unregister(s):R(s,!1)}),[s,t,l,i]),{swap:De.useCallback(w,[f,s,t]),move:De.useCallback(x,[f,s,t]),prepend:De.useCallback(b,[f,s,t]),append:De.useCallback(m,[f,s,t]),remove:De.useCallback(y,[f,s,t]),insert:De.useCallback(g,[f,s,t]),update:De.useCallback(_,[f,s,t]),replace:De.useCallback(j,[f,s,t]),fields:De.useMemo(()=>d.map((R,M)=>({...R,[l]:a.current[M]||Vi()})),[d,l])}}function Wn(e={}){const n=De.useRef(void 0),t=De.useRef(void 0),[s,l]=De.useState({isDirty:!1,isValidating:!1,isLoading:ua(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:ua(e.defaultValues)?void 0:e.defaultValues});if(!n.current)if(e.formControl)n.current={...e.formControl,formState:s},e.defaultValues&&!ua(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:o,...d}=MI(e);n.current={...d,formState:s}}const i=n.current.control;return i._options=e,Dm(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>l({...i._formState}),reRenderRoot:!0});return l(d=>({...d,isReady:!0})),i._formState.isReady=!0,o},[i]),De.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),De.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),De.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),De.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),De.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==s.isDirty&&i._subjects.state.next({isDirty:o})}},[i,s.isDirty]),De.useEffect(()=>{e.values&&!ci(e.values,t.current)?(i._reset(e.values,{keepFieldsRef:!0,...i._options.resetOptions}),t.current=e.values,l(o=>({...o}))):i._resetDefaultValues()},[i,e.values]),De.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),n.current.formState=X6(s,i),n.current}const To=20,PI=async({pageParam:e=1,queryKey:n})=>{const[t,s,l]=n;try{if(s&&s.trim().length>0){const{data:d}=await Xe.get("/clients/search",{params:{term:s,limit:1e3}});let c=d.data?.clients||[];l&&(c=c.filter(b=>b.region_id===l));const a=c.length,u=(e-1)*To,h=u+To,f=c.slice(u,h),m=Math.ceil(a/To);return{clients:f,pagination:{total:a,per_page:To,current_page:e,total_pages:m,has_next:e<m,has_prev:e>1}}}const i={page:e,per_page:To,include_stats:!0};l&&(i.region_id=l);const{data:o}=await Xe.get("/clients",{params:i});return!o.data||!o.data.pagination?{clients:o.data?.clients||[],pagination:{total:o.data?.clients?.length||0,per_page:To,current_page:e,total_pages:1,has_next:!1,has_prev:e>1}}:o.data}catch(i){return console.error("Error fetching paginated clients:",i),{clients:[],pagination:{total:0,per_page:To,current_page:e,total_pages:0,has_next:!1,has_prev:!1}}}},II=async e=>{const{data:n}=await Xe.post("/clients",e);return n.data},FI=async({id:e,clientData:n})=>{const{data:t}=await Xe.put(`/clients/${e}`,n);return t.data},LI=async e=>{const{data:n}=await Xe.get(`/clients/${e}`);if(!n.success)throw new Error(n.message||"Failed to fetch client.");return n.data},zI=async e=>{if(e.length<2)return[];const{data:n}=await Xe.get("/clients/search",{params:{term:e,limit:1e3}});return n.data.clients},BI=(e,n)=>xa({queryKey:["clients",e,n],queryFn:PI,initialPageParam:1,getNextPageParam:t=>{if(!(!t||!t.pagination)&&t.pagination.current_page<t.pagination.total_pages)return t.pagination.current_page+1},placeholderData:t=>t,staleTime:60*1e3}),i5=()=>{const e=Nt();return Et({mutationFn:II,onSuccess:n=>{e.invalidateQueries({queryKey:["clients"]}),e.invalidateQueries({queryKey:["dashboard"]}),e.invalidateQueries({queryKey:["clientCountsByType"]}),e.invalidateQueries({queryKey:["client",n.id]}),e.invalidateQueries({queryKey:["employee"]}),e.invalidateQueries({queryKey:["employees"]})}})},qI=()=>{const e=Nt();return Et({mutationFn:FI,onSuccess:n=>{e.invalidateQueries({queryKey:["clients"]}),e.invalidateQueries({queryKey:["client",n.id]}),e.invalidateQueries({queryKey:["clientCountsByType"]}),e.invalidateQueries({queryKey:["employee"]}),e.invalidateQueries({queryKey:["employees"]})}})},Pm=e=>or({queryKey:["client",e],queryFn:()=>LI(e),enabled:!!e,staleTime:30*1e3}),o5=e=>or({queryKey:["clientSearch",e],queryFn:()=>zI(e),enabled:e.length>=2,staleTime:0}),$I=async({taskType:e,clientIds:n})=>{const{data:t}=await Xe.post("/clients/sort-order",{task_type:e,client_ids:n});return t},UI=()=>{const e=Nt();return Et({mutationFn:$I,onSuccess:()=>{e.invalidateQueries({queryKey:["dashboard","clientsWithActiveTasks"]})}})},R_=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,T_=P6,qy=(e,n)=>t=>{var s;if(n?.variants==null)return T_(e,t?.class,t?.className);const{variants:l,defaultVariants:i}=n,o=Object.keys(l).map(a=>{const u=t?.[a],h=i?.[a];if(u===null)return null;const f=R_(u)||R_(h);return l[a][f]}),d=t&&Object.entries(t).reduce((a,u)=>{let[h,f]=u;return f===void 0||(a[h]=f),a},{}),c=n==null||(s=n.compoundVariants)===null||s===void 0?void 0:s.reduce((a,u)=>{let{class:h,className:f,...m}=u;return Object.entries(m).every(b=>{let[y,g]=b;return Array.isArray(g)?g.includes({...i,...d}[y]):{...i,...d}[y]===g})?[...a,h,f]:a},[]);return T_(e,o,c,t?.class,t?.className)},HI=qy("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-semibold transition-all focus-visible:outline-none focus-visible:ring-3 focus-visible:ring-primary/20 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{primary:"bg-gradient-to-r from-primary to-primary/90 text-primary-foreground shadow-md shadow-primary/20 hover:shadow-lg hover:shadow-primary/30 hover:scale-[1.02] active:scale-[0.98]",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80 border border-border",danger:"bg-gradient-to-r from-destructive to-destructive/90 text-destructive-foreground shadow-md shadow-destructive/20 hover:shadow-lg hover:shadow-destructive/30 hover:scale-[1.02] active:scale-[0.98]","outline-primary":"border-[1.5px] border-primary text-primary bg-white hover:bg-primary hover:text-primary-foreground hover:shadow-md hover:shadow-primary/20 transition-all","outline-success":"border-[1.5px] border-green-500 text-green-600 bg-white hover:bg-green-500 hover:text-white hover:shadow-md","outline-danger":"border-[1.5px] border-destructive text-destructive bg-white hover:bg-destructive hover:text-destructive-foreground hover:shadow-md","outline-info":"border-[1.5px] border-border text-foreground bg-white hover:bg-muted","outline-secondary":"border-[1.5px] border-secondary text-secondary-foreground bg-white hover:bg-secondary hover:shadow-sm"},size:{sm:"h-8 rounded-lg px-3 text-xs",lg:"h-11 rounded-lg px-8 text-base",default:"h-10 px-5 py-2"}},defaultVariants:{variant:"primary",size:"default"}}),Ne=H.forwardRef(({className:e,variant:n,size:t,isLoading:s=!1,...l},i)=>r.jsx("button",{className:Lt(HI({variant:n,size:t,className:e})),ref:i,disabled:s||l.disabled,...l,children:s?r.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):l.children}));Ne.displayName="Button";const Kt=({label:e,name:n,error:t,className:s,...l})=>r.jsxs("div",{className:"space-y-1.5",children:[e&&r.jsx("label",{htmlFor:n,className:"block text-sm font-semibold text-foreground tracking-tight",children:e}),r.jsx("input",{id:n,name:n,className:`base-input ${t?"!border-destructive focus:!ring-destructive/10":""} ${s||""}`,...l}),t&&r.jsxs("div",{className:"text-xs text-destructive font-medium mt-1 flex items-center gap-1",children:[r.jsx("svg",{className:"w-3.5 h-3.5",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),t]})]}),VI=async()=>{const{data:e}=await Xe.get("/regions");return e.data},KI=async e=>{const{data:n}=await Xe.post("/regions",e);return n.data},WI=()=>or({queryKey:["regions"],queryFn:VI,staleTime:300*1e3}),QI=()=>{const e=Nt();return Et({mutationFn:KI,onMutate:async n=>{await e.cancelQueries({queryKey:["regions"]});const t=e.getQueryData(["regions"]);if(t){const s={id:Date.now(),name:n.name,created_at:new Date().toISOString(),client_count:0};e.setQueryData(["regions"],[...t,s])}return{previousRegions:t}},onError:(n,t,s)=>{s?.previousRegions&&e.setQueryData(["regions"],s.previousRegions)},onSuccess:n=>{e.invalidateQueries({queryKey:["regions"]}),e.invalidateQueries({queryKey:["clients"]})}})},$y=({control:e,name:n,label:t,placeholder:s,value:l,onChange:i,error:o,required:d=!1,allowCreate:c=!0,className:a=""})=>{const{success:u,error:h}=ir(),[f,m]=H.useState(!1),[b,y]=H.useState(""),[g,w]=H.useState(!1),[x,_]=H.useState(""),j=H.useRef(null),R=H.useRef(null),M=H.useRef(null),{data:I=[],isLoading:F}=WI(),B=QI(),U=I.filter(E=>E.name.toLowerCase().includes(b.toLowerCase())),Q=I.find(E=>Number(E.id)===l);H.useEffect(()=>{const E=O=>{j.current&&!j.current.contains(O.target)&&(m(!1),w(!1),y(""),_(""))};return document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[]),H.useEffect(()=>{f&&R.current&&R.current.focus()},[f]),H.useEffect(()=>{g&&M.current&&M.current.focus()},[g]);const K=(E,O)=>{const L=Number(E.id);O&&O(L),i&&i(L),m(!1),y(""),w(!1)},T=E=>{E&&E(null),i&&i(null),m(!1),y("")},P=async E=>{if(x.trim())try{const O=await B.mutateAsync({name:x.trim()});E&&E(Number(O.id)),i&&i(Number(O.id)),u("   ",`   "${O.name}" `),m(!1),w(!1),y(""),_("")}catch(O){console.error("Error creating region:",O);const L=O?.response?.data?.message||"    ";h("   ",L)}},A=()=>{_(b),w(!0)},N=()=>{w(!1),_("")},k=(E,O)=>{E.key==="Escape"?(m(!1),w(!1),y(""),_("")):E.key==="Enter"&&!g&&U.length===1?(E.preventDefault(),K(U[0],O)):E.key==="Enter"&&g&&(E.preventDefault(),P(O))},S=(E,O)=>{const L=O!==void 0?O:l,z=I.find(G=>Number(G.id)===L);return r.jsxs("div",{className:"absolute top-full right-0 left-0 mt-1 bg-popover border border-border rounded-md shadow-lg z-50 animate-in fade-in duration-200",style:{maxHeight:"300px",overflowY:"auto"},children:[r.jsx("div",{className:"p-3 border-b border-border",children:r.jsx("input",{ref:R,type:"text",className:"base-input text-sm",placeholder:"  ...",value:b,onChange:G=>y(G.target.value),onKeyDown:G=>k(G,E)})}),!d&&r.jsxs("button",{type:"button",className:"w-full px-3 py-2 text-right text-black hover:bg-accent transition-colors duration-150 flex items-center gap-2",onClick:()=>T(E),children:[r.jsx("i",{className:"fas fa-times"})," "]}),F&&r.jsxs("div",{className:"px-3 py-2 text-center text-black",children:[r.jsx("i",{className:"fas fa-spinner fa-spin mr-2"})," ..."]}),!F&&U.map(G=>r.jsxs("button",{type:"button",className:`w-full px-3 py-2 text-right flex justify-between items-center transition-colors duration-150 ${z?.id===G.id?"bg-primary text-primary-foreground":"hover:bg-accent"}`,onClick:()=>K(G,E),children:[r.jsx("span",{children:G.name}),G.client_count!==void 0&&r.jsxs("small",{className:"text-sm opacity-75",children:["(",G.client_count," )"]})]},G.id)),!F&&b&&U.length===0&&r.jsx("div",{className:"px-3 py-2 text-center text-black",children:"    "}),c&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"border-t border-border"}),g?r.jsxs("div",{className:"p-3 bg-muted/50",children:[r.jsxs("div",{className:"mb-2",children:[r.jsx("label",{className:"block text-sm text-black mb-1",children:"  :"}),r.jsx("input",{ref:M,type:"text",className:"base-input text-sm",value:x,onChange:G=>_(G.target.value),onKeyDown:G=>k(G,E),placeholder:"  "})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"button",className:"flex-1 px-3 py-1.5 text-sm font-medium rounded-md text-primary-foreground transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",style:{background:"linear-gradient(135deg, hsl(var(--primary)) 0%, hsl(var(--primary) / 0.9) 100%)"},onClick:()=>P(E),disabled:!x.trim()||B.isPending,children:B.isPending?r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fas fa-spinner fa-spin ml-1"})," ..."]}):r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fas fa-check ml-1"}),""]})}),r.jsx("button",{type:"button",className:"px-3 py-1.5 text-sm font-medium rounded-md bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",onClick:N,disabled:B.isPending,children:""})]})]}):r.jsxs("button",{type:"button",className:"w-full px-3 py-2 text-right flex items-center gap-2 hover:bg-accent transition-colors duration-150",style:{color:"hsl(var(--primary))"},onClick:A,children:[r.jsx("i",{className:"fas fa-plus"}),b?`  : "${b}"`:"  "]})]})]})};return r.jsxs("div",{className:`${a}`,children:[t&&r.jsxs("label",{className:"block text-sm font-medium text-foreground mb-1.5",children:[t,d&&r.jsx("span",{className:"text-destructive mr-1",children:"*"})]}),e&&n?r.jsx(an,{control:e,name:n,rules:{required:d?"  ":!1},render:({field:{onChange:E,value:O}})=>{const L=I.find(z=>Number(z.id)===O);return r.jsxs("div",{className:"relative",ref:j,children:[r.jsxs("button",{type:"button",className:`base-input ${a.includes("form-control-sm")?"text-sm py-1.5":""} text-right flex justify-between items-center ${o?"border-destructive":""}`,onClick:()=>m(!f),style:{minHeight:a.includes("form-control-sm")?"31px":"38px"},children:[r.jsx("span",{className:L?"":"text-black",children:L?L.name:s||" "}),r.jsx("i",{className:`fas fa-chevron-${f?"up":"down"} text-black`})]}),f&&S(E,O)]})}}):r.jsxs("div",{className:"relative",ref:j,children:[r.jsxs("button",{type:"button",className:`base-input ${a.includes("form-control-sm")?"text-sm py-1.5":""} text-right flex justify-between items-center ${o?"border-destructive":""}`,onClick:()=>m(!f),style:{minHeight:a.includes("form-control-sm")?"31px":"38px"},children:[r.jsx("span",{className:Q?"":"text-black",children:Q?Q.name:s||" "}),r.jsx("i",{className:`fas fa-chevron-${f?"up":"down"} text-black`})]}),f&&S(void 0,l)]}),o&&r.jsx("div",{className:"text-destructive text-sm mt-1",children:o})]})},GI=({clientToEdit:e,onSuccess:n})=>{const{t}=qt(),{error:s}=ir(),l=!!e,{register:i,handleSubmit:o,control:d,reset:c,formState:{errors:a}}=Wn({defaultValues:{name:e?.name||"",phone:e?.phone||"",region_id:e?.region_id||null,google_drive_link:e?.google_drive_link||"",notes:e?.notes||""}});H.useEffect(()=>{e&&c({name:e.name,phone:e.phone,region_id:e.region_id||null,google_drive_link:e.google_drive_link||"",notes:e.notes||""})},[e,c]);const u=i5(),h=qI(),f=l?h:u,m=b=>{l?h.mutate({id:e.id,clientData:b},{onSuccess:n,onError:y=>{console.error("Client update error:",y);const g=y?.response?.data?.message;g&&(g.includes("phone number already exists")||g.includes("Another client with this phone number"))?s("  ","     .     ."):s("   ",g||"    ")}}):u.mutate(b,{onSuccess:n,onError:y=>{console.error("Client creation error:",y);const g=y?.response?.data?.message;g&&g.includes("phone number already exists")?s("  ","     .     ."):s("   ",g||"    ")}})};return r.jsxs("form",{onSubmit:o(m),children:[r.jsx(Kt,{label:t("clients.formNameLabel"),...i("name",{required:!0}),error:a.name?"This field is required":void 0}),r.jsx(Kt,{label:t("clients.formPhoneLabel"),...i("phone",{required:!0}),error:a.phone?"This field is required":void 0}),r.jsx($y,{control:d,name:"region_id",label:t("clients.formRegionLabel"),placeholder:t("clients.selectRegion"),error:a.region_id?t("common.required"):void 0,allowCreate:!0}),r.jsx(Kt,{label:t("clients.formDriveLabel"),...i("google_drive_link",{pattern:{value:/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/,message:"Please enter a valid URL"}}),error:a.google_drive_link?a.google_drive_link.message:void 0}),r.jsxs("div",{className:"mb-3",children:[r.jsx("label",{className:"form-label",children:t("clients.formNotesLabel")}),r.jsx("textarea",{className:"form-control",rows:3,...i("notes"),placeholder:t("clients.formNotesPlaceholder")})]}),r.jsx("footer",{className:"modal-footer",children:r.jsx(Ne,{type:"submit",isLoading:f.isPending,children:f.isPending?t("common.saving"):t("common.save")})})]})},Bn=[];for(let e=0;e<256;++e)Bn.push((e+256).toString(16).slice(1));function XI(e,n=0){return(Bn[e[n+0]]+Bn[e[n+1]]+Bn[e[n+2]]+Bn[e[n+3]]+"-"+Bn[e[n+4]]+Bn[e[n+5]]+"-"+Bn[e[n+6]]+Bn[e[n+7]]+"-"+Bn[e[n+8]]+Bn[e[n+9]]+"-"+Bn[e[n+10]]+Bn[e[n+11]]+Bn[e[n+12]]+Bn[e[n+13]]+Bn[e[n+14]]+Bn[e[n+15]]).toLowerCase()}let Vg;const YI=new Uint8Array(16);function ZI(){if(!Vg){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Vg=crypto.getRandomValues.bind(crypto)}return Vg(YI)}const JI=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),A_={randomUUID:JI};function Hh(e,n,t){if(A_.randomUUID&&!e)return A_.randomUUID();e=e||{};const s=e.random??e.rng?.()??ZI();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=s[6]&15|64,s[8]=s[8]&63|128,XI(s)}const eF=20,tF=async e=>{const{data:n}=await Xe.get("/tasks",{params:{...e,page:1,per_page:1e3}});return n.data},rF=async({pageParam:e=1,queryKey:n})=>{const[t,s]=n,{data:l}=await Xe.get("/tasks",{params:{...s,page:e,per_page:eF}});return l.data},nF=async e=>{const{data:n}=await Xe.get(`/tasks/${e}`);if(!n.success)throw new Error(n.message||"Failed to fetch task.");return n.data},sF=async e=>{const{data:n}=await Xe.post("/tasks",e);if(!n.success)throw new Error(n.message||"Failed to create task.");return n.data},aF=async({id:e,taskData:n})=>{const{data:t}=await Xe.put(`/tasks/${e}`,n);if(!t.success)throw new Error(t.message||"Failed to update task.");return t.data},iF=async e=>{const{data:n}=await Xe.put(`/tasks/${e.task_id}/requirements`,{requirements:e.requirements});if(!n.success)throw new Error(n.message||"Failed to update requirements.");return n.data},oF=async e=>{const{data:n}=await Xe.post(`/tasks/${e.task_id}/requirements`,{requirements:e.requirements});if(!n.success)throw new Error(n.message||"Failed to create requirements.");return n.data},lF=async({id:e,payload:n})=>{const{data:t}=await Xe.post(`/tasks/${e}/complete`,n);if(!t.success)throw new Error(t.message||"Failed to complete task");return t.data},cF=async({id:e})=>{const{data:n}=await Xe.put(`/tasks/${e}/status`,{status:"Deferred"});if(!n.success)throw new Error(n.message||"Failed to defer task");return n.data},dF=async({id:e})=>{const{data:n}=await Xe.put(`/tasks/${e}/status`,{status:"New"});if(!n.success)throw new Error(n.message||"Failed to resume task");return n.data},uF=async({id:e})=>{const{data:n}=await Xe.put(`/tasks/${e}/status`,{status:"New"});if(!n.success)throw new Error(n.message||"Failed to restore task");return n.data},fF=async({id:e,new_prepaid_amount:n,decisions:t})=>{const{data:s}=await Xe.post(`/tasks/${e}/resolve-prepaid-change`,{new_prepaid_amount:n,decisions:t});if(!s.success)throw new Error(s.message||"Failed to resolve prepaid change");return s.data},hF=async({id:e,new_task_amount:n,main_receivable_decisions:t})=>{const{data:s}=await Xe.post(`/tasks/${e}/resolve-amount-change`,{new_task_amount:n,main_receivable_decisions:t});if(!s.success)throw new Error(s.message||"Failed to resolve amount change");return s.data},mF=async({id:e,decisions:n})=>{try{const t=n||{},{data:s}=await Xe.post(`/tasks/${e}/cancel`,t);if(!s.success)throw new Error(s.message||"Failed to cancel task");return s.data}catch(t){if(t.response?.status===409&&t.response?.data?.code==="task_cancellation_conflict")return t.response.data;throw t}},pF=async({id:e,expense_amount:n,notes:t})=>{const{data:s}=await Xe.post(`/tasks/${e}/approve`,{expense_amount:n,notes:t});if(!s.success)throw new Error(s.message||"Failed to approve task");return s.data},gF=async({id:e,rejection_reason:n})=>{const{data:t}=await Xe.post(`/tasks/${e}/reject`,{rejection_reason:n});if(!t.success)throw new Error(t.message||"Failed to reject task");return t.data},bF=async({id:e,taskData:n})=>{try{const{data:t}=await Xe.put(`/tasks/${e}`,n);if(!t.success)throw new Error(t.message||"Failed to update task.");return t.data}catch(t){if(t.response?.status===409)return t.response.data;throw t}},Im=e=>or({queryKey:["tasks",e],queryFn:()=>tF(e),placeholderData:n=>n,staleTime:30*1e3,refetchInterval:20*1e3}),yF=e=>xa({queryKey:["tasks",e],queryFn:rF,initialPageParam:1,getNextPageParam:n=>{if(n.pagination.current_page<n.pagination.total_pages)return n.pagination.current_page+1},placeholderData:n=>n,staleTime:30*1e3,refetchInterval:20*1e3}),xF=e=>or({queryKey:["task",e],queryFn:()=>nF(e),enabled:!!e,staleTime:30*1e3}),vF=()=>{const e=Nt();return Et({mutationFn:sF,onSuccess:n=>{e.invalidateQueries({queryKey:["tasks"]}),e.invalidateQueries({queryKey:["clients"]}),e.invalidateQueries({queryKey:["dashboard"]}),e.invalidateQueries({queryKey:["tasks-by-tags"]}),e.invalidateQueries({queryKey:["client",n.client.id]}),e.invalidateQueries({queryKey:["receivables","client",n.client.id]}),e.invalidateQueries({queryKey:["invoices"]}),e.invalidateQueries({queryKey:["invoices","client",n.client.id]}),e.invalidateQueries({queryKey:["account","client",n.client.id]}),e.invalidateQueries({queryKey:["account","clients"]}),e.invalidateQueries({queryKey:["employee"]}),e.invalidateQueries({queryKey:["employees"]})}})},nl=()=>{const e=Nt();return Et({mutationFn:aF,onSuccess:n=>{e.invalidateQueries({queryKey:["tasks"]}),e.invalidateQueries({queryKey:["task",n.id]}),e.invalidateQueries({queryKey:["clients"]}),e.invalidateQueries({queryKey:["dashboard"]}),e.invalidateQueries({queryKey:["tasks-by-tags"]}),e.invalidateQueries({queryKey:["receivables","client",n.client.id]}),e.invalidateQueries({queryKey:["invoices"]}),e.invalidateQueries({queryKey:["invoices","client",n.client.id]}),e.invalidateQueries({queryKey:["account","client",n.client.id]}),e.invalidateQueries({queryKey:["account","clients"]}),e.invalidateQueries({queryKey:["employee"]}),e.invalidateQueries({queryKey:["employees"]})}})},wF=()=>{const e=Nt();return Et({mutationFn:iF,onSuccess:n=>{e.invalidateQueries({queryKey:["task",n.id]}),e.invalidateQueries({queryKey:["tasks"]}),e.invalidateQueries({queryKey:["dashboard"]})}})},_F=()=>{const e=Nt();return Et({mutationFn:oF,onSuccess:n=>{e.invalidateQueries({queryKey:["task",n.id]}),e.invalidateQueries({queryKey:["tasks"]}),e.invalidateQueries({queryKey:["dashboard"]})}})},Fm=()=>{const e=Nt();return Et({mutationFn:dF,onMutate:async({id:n})=>{await e.cancelQueries({queryKey:["tasks"]}),await e.cancelQueries({queryKey:["dashboard","clientsWithActiveTasks"]});const t=e.getQueryData(["tasks"]),s=e.getQueryData(["dashboard","clientsWithActiveTasks"]);return t&&(t.pages?e.setQueryData(["tasks"],l=>({...l,pages:l.pages.map(i=>({...i,tasks:i.tasks.map(o=>o.id===n?{...o,status:"New"}:o)}))})):e.setQueryData(["tasks"],l=>({...l,tasks:l.tasks.map(i=>i.id===n?{...i,status:"New"}:i)}))),s&&e.setQueryData(["dashboard","clientsWithActiveTasks"],l=>{const i={...l};for(const o in i)i.hasOwnProperty(o)&&(i[o]=i[o].map(d=>{const c=d.tasks.findIndex(a=>a.id===n);if(c>-1){const a=d.tasks.map((u,h)=>h===c?{...u,status:"New"}:u);return{...d,tasks:a}}return d}));return i}),{previousTasksData:t,previousDashboardData:s}},onError:(n,t,s)=>{s?.previousTasksData&&e.setQueryData(["tasks"],s.previousTasksData),s?.previousDashboardData&&e.setQueryData(["dashboard","clientsWithActiveTasks"],s.previousDashboardData)},onSettled:()=>{e.invalidateQueries({queryKey:["tasks"]}),e.invalidateQueries({queryKey:["dashboard","clientsWithActiveTasks"]}),e.invalidateQueries({queryKey:["dashboard","stats"]}),e.invalidateQueries({queryKey:["tasks-by-tags"]})},onSuccess:n=>{e.invalidateQueries({queryKey:["task",n.id]}),e.invalidateQueries({queryKey:["clients"]}),e.invalidateQueries({queryKey:["employee"]}),e.invalidateQueries({queryKey:["employees"]})}})},jF=()=>{const e=Nt();return Et({mutationFn:fF,onSuccess:n=>{e.invalidateQueries({queryKey:["tasks"]}),n.task?.id&&(e.invalidateQueries({queryKey:["task",n.task.id]}),e.invalidateQueries({queryKey:["receivables","client",n.task.client_id]}),e.invalidateQueries({queryKey:["invoices","client",n.task.client_id]}),e.invalidateQueries({queryKey:["account","client",n.task.client_id]})),e.invalidateQueries({queryKey:["clients"]}),e.invalidateQueries({queryKey:["dashboard"]}),e.invalidateQueries({queryKey:["receivables"]}),e.invalidateQueries({queryKey:["client-credits"]}),e.invalidateQueries({queryKey:["invoices"]}),e.invalidateQueries({queryKey:["account","clients"]}),e.invalidateQueries({queryKey:["employee"]}),e.invalidateQueries({queryKey:["employees"]})}})},NF=()=>{const e=Nt();return Et({mutationFn:bF,onSuccess:n=>{if("id"in n){const t=n;e.invalidateQueries({queryKey:["tasks"]}),e.invalidateQueries({queryKey:["task",t.id]}),e.invalidateQueries({queryKey:["clients"]}),e.invalidateQueries({queryKey:["dashboard"]}),e.invalidateQueries({queryKey:["receivables","client",t.client_id]})}}})},CF=()=>{const e=Nt();return Et({mutationFn:hF,onSuccess:n=>{e.invalidateQueries({queryKey:["tasks"]}),n.task?.id&&(e.invalidateQueries({queryKey:["task",n.task.id]}),e.invalidateQueries({queryKey:["receivables","client",n.task.client_id]}),e.invalidateQueries({queryKey:["invoices","client",n.task.client_id]}),e.invalidateQueries({queryKey:["account","client",n.task.client_id]})),e.invalidateQueries({queryKey:["clients"]}),e.invalidateQueries({queryKey:["dashboard"]}),e.invalidateQueries({queryKey:["receivables"]}),e.invalidateQueries({queryKey:["client-credits"]}),e.invalidateQueries({queryKey:["invoices"]}),e.invalidateQueries({queryKey:["account","clients"]}),e.invalidateQueries({queryKey:["employee"]}),e.invalidateQueries({queryKey:["employees"]})}})},bc=()=>{const e=Nt();return Et({mutationFn:mF,onSuccess:n=>{if("resolution_summary"in n){const t=n;e.invalidateQueries({queryKey:["tasks"]}),t.task?.id&&(e.invalidateQueries({queryKey:["task",t.task.id]}),e.invalidateQueries({queryKey:["receivables","client",t.task.client_id]}),e.invalidateQueries({queryKey:["invoices","client",t.task.client_id]}),e.invalidateQueries({queryKey:["account","client",t.task.client_id]})),e.invalidateQueries({queryKey:["clients"]}),e.invalidateQueries({queryKey:["dashboard"]}),e.invalidateQueries({queryKey:["receivables"]}),e.invalidateQueries({queryKey:["client-credits"]}),e.invalidateQueries({queryKey:["invoices"]}),e.invalidateQueries({queryKey:["account","clients"]}),e.invalidateQueries({queryKey:["employee"]}),e.invalidateQueries({queryKey:["employees"]})}}})},Au=()=>{const e=Nt();return Et({mutationFn:cF,onMutate:async({id:n})=>{await e.cancelQueries({queryKey:["tasks"]}),await e.cancelQueries({queryKey:["dashboard","clientsWithActiveTasks"]});const t=e.getQueryData(["tasks"]),s=e.getQueryData(["dashboard","clientsWithActiveTasks"]);return t&&(t.pages?e.setQueryData(["tasks"],l=>({...l,pages:l.pages.map(i=>({...i,tasks:i.tasks.map(o=>o.id===n?{...o,status:"Deferred"}:o)}))})):e.setQueryData(["tasks"],l=>({...l,tasks:l.tasks.map(i=>i.id===n?{...i,status:"Deferred"}:i)}))),s&&e.setQueryData(["dashboard","clientsWithActiveTasks"],l=>{const i={...l};for(const o in i)i.hasOwnProperty(o)&&(i[o]=i[o].map(d=>{const c=d.tasks.findIndex(a=>a.id===n);if(c>-1){const a=d.tasks.map((u,h)=>h===c?{...u,status:"Deferred"}:u);return{...d,tasks:a}}return d}));return i}),{previousTasksData:t,previousDashboardData:s}},onError:(n,t,s)=>{s?.previousTasksData&&e.setQueryData(["tasks"],s.previousTasksData),s?.previousDashboardData&&e.setQueryData(["dashboard","clientsWithActiveTasks"],s.previousDashboardData)},onSettled:()=>{e.invalidateQueries({queryKey:["tasks"]}),e.invalidateQueries({queryKey:["dashboard","clientsWithActiveTasks"]}),e.invalidateQueries({queryKey:["dashboard","stats"]})},onSuccess:n=>{e.invalidateQueries({queryKey:["task",n.id]}),e.invalidateQueries({queryKey:["clients"]}),e.invalidateQueries({queryKey:["receivables"]})}})},l5=()=>{const e=Nt();return Et({mutationFn:lF,onSuccess:n=>{e.invalidateQueries({queryKey:["tasks"]}),e.invalidateQueries({queryKey:["task",n.id]}),e.invalidateQueries({queryKey:["clients"]}),e.invalidateQueries({queryKey:["receivables"]}),e.invalidateQueries({queryKey:["dashboard"]}),e.invalidateQueries({queryKey:["tasks-by-tags"]}),n.task?.client_id&&(e.invalidateQueries({queryKey:["receivables","client",n.task.client_id]}),e.invalidateQueries({queryKey:["receivables","payable",n.task.client_id]}),e.invalidateQueries({queryKey:["invoices","client",n.task.client_id]}),e.invalidateQueries({queryKey:["account","client",n.task.client_id]})),e.invalidateQueries({queryKey:["invoices"]}),e.invalidateQueries({queryKey:["invoices","stats"]}),e.invalidateQueries({queryKey:["account","clients"]}),e.invalidateQueries({queryKey:["receivables","filtered","paid"]}),e.invalidateQueries({queryKey:["receivables","filtered","overdue"]}),e.invalidateQueries({queryKey:["employee"]}),e.invalidateQueries({queryKey:["employees"]})}})},SF=()=>{const e=Nt();return Et({mutationFn:pF,onSuccess:n=>{e.invalidateQueries({queryKey:["tasks"]}),e.invalidateQueries({queryKey:["task",n.id]}),e.invalidateQueries({queryKey:["clients"]}),e.invalidateQueries({queryKey:["dashboard"]}),e.invalidateQueries({queryKey:["tasks-by-tags"]}),e.invalidateQueries({queryKey:["receivables"]}),e.invalidateQueries({queryKey:["invoices"]}),e.invalidateQueries({queryKey:["invoices","stats"]}),e.invalidateQueries({queryKey:["account","clients"]}),n.client?.id&&(e.invalidateQueries({queryKey:["receivables","client",n.client.id]}),e.invalidateQueries({queryKey:["client",n.client.id]}),e.invalidateQueries({queryKey:["invoices","client",n.client.id]}),e.invalidateQueries({queryKey:["account","client",n.client.id]})),e.invalidateQueries({queryKey:["employee"]}),e.invalidateQueries({queryKey:["employees"]})}})},kF=()=>{const e=Nt();return Et({mutationFn:gF,onMutate:async({id:n})=>{await e.cancelQueries({queryKey:["tasks"]}),await e.cancelQueries({queryKey:["dashboard","clientsWithActiveTasks"]});const t=e.getQueryData(["tasks"]),s=e.getQueryData(["dashboard","clientsWithActiveTasks"]);return t&&(t.pages?e.setQueryData(["tasks"],l=>({...l,pages:l.pages.map(i=>({...i,tasks:i.tasks.map(o=>o.id===n?{...o,status:"New"}:o)}))})):e.setQueryData(["tasks"],l=>({...l,tasks:l.tasks.map(i=>i.id===n?{...i,status:"New"}:i)}))),s&&e.setQueryData(["dashboard","clientsWithActiveTasks"],l=>{const i={...l};for(const o in i)i.hasOwnProperty(o)&&(i[o]=i[o].map(d=>{const c=d.tasks.findIndex(a=>a.id===n);if(c>-1){const a=d.tasks.map((u,h)=>h===c?{...u,status:"New"}:u);return{...d,tasks:a}}return d}));return i}),{previousTasksData:t,previousDashboardData:s}},onError:(n,t,s)=>{s?.previousTasksData&&e.setQueryData(["tasks"],s.previousTasksData),s?.previousDashboardData&&e.setQueryData(["dashboard","clientsWithActiveTasks"],s.previousDashboardData)},onSettled:()=>{e.invalidateQueries({queryKey:["tasks"]}),e.invalidateQueries({queryKey:["dashboard","clientsWithActiveTasks"]}),e.invalidateQueries({queryKey:["dashboard","stats"]})},onSuccess:n=>{e.invalidateQueries({queryKey:["task",n.id]}),e.invalidateQueries({queryKey:["clients"]})}})},Lm=()=>{const e=Nt();return Et({mutationFn:uF,onMutate:async({id:n})=>{await e.cancelQueries({queryKey:["tasks"]}),await e.cancelQueries({queryKey:["dashboard","clientsWithActiveTasks"]});const t=e.getQueryData(["tasks"]),s=e.getQueryData(["dashboard","clientsWithActiveTasks"]);return t&&(t.pages?e.setQueryData(["tasks"],l=>({...l,pages:l.pages.map(i=>({...i,tasks:i.tasks.map(o=>o.id===n?{...o,status:"New"}:o)}))})):e.setQueryData(["tasks"],l=>({...l,tasks:l.tasks.map(i=>i.id===n?{...i,status:"New"}:i)}))),s&&e.setQueryData(["dashboard","clientsWithActiveTasks"],l=>{const i={...l};for(const o in i)i.hasOwnProperty(o)&&(i[o]=i[o].map(d=>{const c=d.tasks.findIndex(a=>a.id===n);if(c>-1){const a=d.tasks.map((u,h)=>h===c?{...u,status:"New"}:u);return{...d,tasks:a}}return d}));return i}),{previousTasksData:t,previousDashboardData:s}},onError:(n,t,s)=>{s?.previousTasksData&&e.setQueryData(["tasks"],s.previousTasksData),s?.previousDashboardData&&e.setQueryData(["dashboard","clientsWithActiveTasks"],s.previousDashboardData)},onSettled:()=>{e.invalidateQueries({queryKey:["tasks"]}),e.invalidateQueries({queryKey:["dashboard","clientsWithActiveTasks"]}),e.invalidateQueries({queryKey:["dashboard","stats"]}),e.invalidateQueries({queryKey:["tasks-by-tags"]})},onSuccess:n=>{e.invalidateQueries({queryKey:["task",n.id]}),e.invalidateQueries({queryKey:["clients"]}),e.invalidateQueries({queryKey:["receivables"]}),e.invalidateQueries({queryKey:["employee"]}),e.invalidateQueries({queryKey:["employees"]})}})},Uy=()=>or({queryKey:["employees","selection"],queryFn:async()=>(await Xe.get("/employees/selection")).data.data,staleTime:300*1e3}),c5=e=>or({queryKey:["employees",e],queryFn:async()=>(await Xe.get(`/employees/${e}`)).data.data,enabled:!!e}),d5=()=>{const e=Nt();return Et({mutationFn:async n=>(await Xe.post("/employees",n)).data.data,onSuccess:()=>{e.invalidateQueries({queryKey:["users"]}),e.invalidateQueries({queryKey:["employees"]}),e.invalidateQueries({queryKey:["employees","selection"]})}})},u5=()=>{const e=Nt();return Et({mutationFn:async n=>{await Xe.delete(`/employees/user/${n}`)},onSuccess:()=>{e.invalidateQueries({queryKey:["users"]}),e.invalidateQueries({queryKey:["employees"]}),e.invalidateQueries({queryKey:["employees","selection"]})}})},EF=()=>{const e=Nt();return Et({mutationFn:async({taskId:n,assignedToId:t})=>(await Xe.put(`/tasks/${n}/assign`,{assigned_to_id:t})).data,onSuccess:(n,{taskId:t})=>{e.invalidateQueries({queryKey:["tasks"]}),e.invalidateQueries({queryKey:["tasks",t]}),e.invalidateQueries({queryKey:["tasks","recent"]}),e.invalidateQueries({queryKey:["dashboard","clientsWithActiveTasks"]}),e.invalidateQueries({queryKey:["dashboard","employee","clientsWithActiveTasks"]})}})},RF=(e,n)=>or({queryKey:["employees",e,"transactions",n],queryFn:async()=>(await Xe.get(`/employees/${e}/payouts`,{params:n})).data,enabled:!!e,staleTime:30*1e3}),TF=()=>{const e=Nt();return Et({mutationFn:async({employeeUserId:n,transactionId:t})=>(await Xe.delete(`/employees/${n}/transactions/${t}`)).data,onSuccess:(n,{employeeTableId:t})=>{e.invalidateQueries({queryKey:["employees",t,"transactions"]})}})},AF=()=>{const e=Nt();return Et({mutationFn:async({employeeUserId:n,transactionId:t,data:s})=>(await Xe.put(`/employees/${n}/transactions/${t}`,s)).data,onSuccess:(n,{employeeTableId:t})=>{e.invalidateQueries({queryKey:["employees",t,"transactions"]})}})},MF=(e,n)=>or({queryKey:["employees",e,"tasks",n],queryFn:async()=>{const s=(await Xe.get(`/employees/${e}`)).data.data;return(await Xe.get(`/tasks/employee/${s.user_id}`,{params:n})).data},enabled:!!e,staleTime:60*1e3}),OF=(e,n)=>or({queryKey:["employees",e,"clients",n],queryFn:async()=>{const s=(await Xe.get(`/employees/${e}`)).data.data;return(await Xe.get(`/clients/admin/employee/${s.user_id}`,{params:n})).data},enabled:!!e,staleTime:120*1e3}),DF=(e,n)=>or({queryKey:["employees",e,"client-balances",n],queryFn:async()=>{const s=(await Xe.get(`/employees/${e}`)).data.data;return(await Xe.get("/accounts/clients/balances",{params:{employee_user_id:s.user_id,...n}})).data},enabled:!!e,staleTime:60*1e3}),PF=e=>or({queryKey:["employees",e,"client-balance-totals"],queryFn:async()=>{const t=(await Xe.get(`/employees/${e}`)).data.data;return(await Xe.get("/accounts/clients/totals",{params:{employee_user_id:t.user_id}})).data},enabled:!!e,staleTime:120*1e3}),IF=()=>{const e=Nt();return Et({mutationFn:async({employeeUserId:n,payoutData:t})=>(await Xe.post(`/employees/${n}/payouts`,t)).data,onSuccess:(n,{employeeUserId:t})=>{e.invalidateQueries({queryKey:["employees",t,"transactions"]})}})},FF=()=>{const e=Nt();return Et({mutationFn:async({employeeUserId:n,borrowData:t})=>(await Xe.post(`/employees/${n}/borrow`,t)).data,onSuccess:(n,{employeeUserId:t})=>{e.invalidateQueries({queryKey:["employees",t,"transactions"]})}})},LF=(e,n)=>or({queryKey:["employees",e,"ledger",n],queryFn:async()=>(await Xe.get(`/employees/${e}/payouts`,{params:n})).data,enabled:!!e,staleTime:30*1e3}),zF=({onViewTaskHistory:e,onViewPaymentHistory:n,disabled:t})=>{const{t:s}=qt();return t?null:r.jsxs("div",{className:"flex gap-2 items-center",children:[r.jsx("button",{type:"button",className:"border border-yellow-600 text-yellow-600 hover:bg-yellow-50 rounded-full p-2 transition-colors",onClick:e,title:s("tasks.taskHistory"),style:{width:"36px",height:"36px"},children:r.jsx(r6,{size:16})}),r.jsx("button",{type:"button",className:"border border-yellow-600 text-yellow-600 hover:bg-yellow-50 rounded-full p-2 transition-colors",onClick:n,title:s("tasks.paymentHistory"),style:{width:"36px",height:"36px"},children:r.jsx(gs,{size:16})})]})},BF=({isOpen:e,onClose:n,onViewAllTasks:t,onAddNewTask:s})=>(H.useEffect(()=>{const l=i=>{i.key==="Escape"&&n()};if(e)return document.addEventListener("keydown",l),()=>document.removeEventListener("keydown",l)},[e,n]),e?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"modal-backdrop fade show"}),r.jsx("div",{className:"modal fade show d-block",style:{zIndex:1060},children:r.jsx("div",{className:"modal-dialog modal-dialog-centered",children:r.jsxs("div",{className:"modal-content border-0 shadow-lg",style:{background:"linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%)",border:"2px solid #d4af37"},children:[r.jsx("div",{className:"modal-header border-0",style:{background:"linear-gradient(135deg, #d4af37 0%, #b8941f 100%)",color:"white"},children:r.jsx("h5",{className:"modal-title text-center w-100 fw-bold",children:"    !"})}),r.jsxs("div",{className:"modal-body text-center p-5",children:[r.jsx("div",{className:"success-animation mb-4",children:r.jsx(es,{size:80,style:{color:"#d4af37"}})}),r.jsxs("div",{className:"d-flex gap-2 justify-content-center flex-wrap",children:[r.jsx(Ne,{variant:"primary",onClick:t,className:"mx-1",style:{backgroundColor:"#d4af37",borderColor:"#d4af37",color:"white"},children:"  "}),r.jsx(Ne,{variant:"outline-primary",onClick:s,className:"mx-1",style:{borderColor:"#d4af37",color:"#d4af37"},children:"  "}),r.jsx(Ne,{variant:"secondary",onClick:n,className:"mx-1",style:{backgroundColor:"#6c757d",borderColor:"#6c757d",color:"white"},children:""})]})]})]})})}),r.jsx("style",{children:`
        .success-animation {
          animation: successBounce 0.6s ease-out;
        }
        @keyframes successBounce {
          0% { 
            opacity: 0; 
            transform: scale(0.3) translateY(-30px); 
          }
          50% { 
            opacity: 1; 
            transform: scale(1.1) translateY(-10px); 
          }
          100% { 
            opacity: 1; 
            transform: scale(1) translateY(0); 
          }
        }
        .modal-content {
          animation: modalSlideIn 0.4s ease-out;
        }
        @keyframes modalSlideIn {
          from { 
            opacity: 0; 
            transform: translateY(-50px) scale(0.9); 
          }
          to { 
            opacity: 1; 
            transform: translateY(0) scale(1); 
          }
        }
      `})]}):null),qF={year:"numeric",month:"2-digit",day:"2-digit"},Zr=(e,n=qF,t="en-US")=>{if(!e)return"";try{const s=typeof e=="string"?new Date(e):typeof e=="number"?new Date(e):e;return isNaN(s.getTime())?"":new Intl.DateTimeFormat(t,n).format(s)}catch(s){return console.warn("Date formatting error:",s),""}},M_=e=>{if(!e)return"";try{const n=typeof e=="string"?new Date(e):typeof e=="number"?new Date(e):e;return isNaN(n.getTime())?"":n.toISOString().split("T")[0]}catch(n){return console.warn("Date input formatting error:",n),""}},$F=({isOpen:e,onClose:n,clientName:t,clientId:s})=>{const[l,i]=H.useState("all");H.useEffect(()=>{const f=m=>{m.key==="Escape"&&n()};if(e)return document.addEventListener("keydown",f),()=>document.removeEventListener("keydown",f)},[e,n]);const{data:o,isLoading:d,error:c}=Im({client_id:s}),a=o?.tasks||[],u={new:a.filter(f=>f.status==="New").length,deferred:a.filter(f=>f.status==="Deferred").length,completed:a.filter(f=>f.status==="Completed").length,total:a.length},h=l==="all"?a:a.filter(f=>f.status.toLowerCase()===l);return e?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"modal-backdrop fade show"}),r.jsx("div",{className:"modal fade show d-block",style:{zIndex:1070},children:r.jsx("div",{className:"modal-dialog modal-lg modal-dialog-centered",children:r.jsxs("div",{className:"modal-content border-0 shadow-lg",children:[r.jsxs("div",{className:"modal-header",style:{background:"var(--gradient-gold)",color:"var(--color-white)"},children:[r.jsxs("div",{className:"d-flex align-items-center",children:[r.jsx(r6,{size:20,className:"me-2"}),r.jsxs("h5",{className:"modal-title mb-0 fw-bold",children:["  - ",t]})]}),r.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:n})]}),r.jsx("div",{className:"modal-body p-0",children:d?r.jsxs("div",{className:"text-center py-5",children:[r.jsx("div",{className:"spinner-border text-warning",role:"status",children:r.jsx("span",{className:"visually-hidden",children:" ..."})}),r.jsx("p",{className:"mt-2 text-muted",children:"   ..."})]}):c?r.jsxs("div",{className:"text-center py-5",children:[r.jsx("div",{className:"text-danger mb-3",children:r.jsx("i",{className:"fas fa-exclamation-triangle fa-2x"})}),r.jsx("p",{className:"text-danger",children:"    "}),r.jsx(Ne,{variant:"outline-primary",size:"sm",onClick:()=>window.location.reload(),children:" "})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"row g-2 p-3",style:{background:"var(--color-gray-50)"},children:[r.jsx("div",{className:"col-3",children:r.jsx("button",{className:`btn w-100 ${l==="all"?"btn-primary":"btn-outline-primary"}`,onClick:()=>i("all"),children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"fw-bold",children:u.total}),r.jsx("small",{children:""})]})})}),r.jsx("div",{className:"col-3",children:r.jsx("button",{className:`btn w-100 ${l==="new"?"btn-primary":"btn-outline-primary"}`,onClick:()=>i("new"),children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"fw-bold",children:u.new}),r.jsx("small",{children:""})]})})}),r.jsx("div",{className:"col-3",children:r.jsx("button",{className:`btn w-100 ${l==="deferred"?"btn-secondary":"btn-outline-secondary"}`,onClick:()=>i("deferred"),children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"fw-bold",children:u.deferred}),r.jsx("small",{children:""})]})})}),r.jsx("div",{className:"col-3",children:r.jsx("button",{className:`btn w-100 ${l==="completed"?"btn-success":"btn-outline-success"}`,onClick:()=>i("completed"),children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"fw-bold",children:u.completed}),r.jsx("small",{children:""})]})})})]}),r.jsx("div",{className:"table-responsive",children:r.jsxs("table",{className:"table table-hover mb-0",children:[r.jsx("thead",{className:"table-light",children:r.jsxs("tr",{children:[r.jsx("th",{children:" "}),r.jsx("th",{children:""}),r.jsx("th",{children:""}),r.jsx("th",{children:""}),r.jsx("th",{children:""})]})}),r.jsx("tbody",{children:h.map(f=>r.jsxs("tr",{children:[r.jsx("td",{className:"fw-semibold",children:f.task_name||"  "}),r.jsx("td",{children:r.jsx("span",{className:"badge bg-info",children:f.type})}),r.jsx("td",{children:Zr(f.start_date)}),r.jsx("td",{children:r.jsx("span",{className:`badge ${f.status==="Completed"?"bg-success":f.status==="Deferred"?"bg-secondary":"bg-primary"}`,children:f.status==="Completed"?"":f.status==="Deferred"?"":""})}),r.jsx("td",{className:"text-muted small",children:f.notes||"  "})]},f.id))})]})})]})}),r.jsx("div",{className:"modal-footer bg-light",children:r.jsx(Ne,{variant:"secondary",onClick:n,children:""})})]})})})]}):null},UF=20,HF=20,VF=async e=>{const{data:n}=await Xe.post("/receivables",e);if(!n.success)throw new Error(n.message||"Failed to create receivable");return n.data},KF=async({id:e,payload:n})=>{const{data:t}=await Xe.put(`/receivables/${e}`,n);if(!t.success)throw new Error(t.message||"Failed to update receivable");return t.data},WF=async e=>{const{data:n}=await Xe.delete(`/receivables/${e}`);if(!n.success)throw new Error(n.message||"Failed to delete receivable")},QF=async({id:e,resolution:n})=>{const{data:t}=await Xe.post(`/receivables/${e}/resolve-overpayment`,n);if(!t.success)throw new Error(t.message||"Failed to resolve overpayment");return t.data},GF=async({id:e,new_amount:n,resolution_type:t})=>{const{data:s}=await Xe.post(`/receivables/${e}/auto-resolve-overpayment`,{new_amount:n,resolution_type:t});if(!s.success)throw new Error(s.message||"Failed to auto-resolve overpayment");return s.data},XF=async({id:e,resolution:n})=>{const{data:t}=await Xe.post(`/receivables/${e}/delete-with-resolution`,n);if(!t.success)throw new Error(t.message||"Failed to delete receivable with resolution");return t.data},YF=async e=>{const{data:n}=await Xe.get(`/receivables/client/${e}`);if(!n.success)throw new Error(n.message||"Failed to fetch client statement.");const t=n.data;return{statementItems:(t.statementItems||[]).map(l=>({...l,remaining_amount:Number(l.remaining_amount??Number(l.debit)-Number(l.credit)),receivable_id:l.receivable_id,payments:l.payments||[],type:l.type||"Other",task_id:l.task_id||null,date:l.date||new Date().toISOString(),description:l.description||"N/A",debit:Number(l.debit||0),credit:Number(l.credit||0)})),totals:t.totals||{totalDebit:0,totalCredit:0,balance:0}}},ZF=async({pageParam:e=1,search:n=""})=>{const t={page:e,per_page:HF};n&&(t.search=n);const{data:s}=await Xe.get("/accounts/clients/balances",{params:t});return{clients:(s.clients||[]).map(i=>({client_id:Number(i.client_id||0),client_name:i.client_name||"",client_phone:i.client_phone||"",total_amount:Number(i.total_debit||i.total_receivables||0),paid_amount:Number(i.total_credit||i.total_paid||0),remaining_amount:Number(i.total_outstanding||0),receivables_count:Number(i.transaction_count||i.receivables_count||0)})),pagination:s.pagination}},JF=async()=>{const{data:e}=await Xe.get("/accounts/clients/totals");return{total_amount:Number(e.total_amount||0),total_paid:Number(e.total_paid||0),total_unpaid:Number(e.total_unpaid||0),clients_count:Number(e.clients_count||0),clients_with_debt:Number(e.clients_with_debt||0),clients_with_credit:Number(e.clients_with_credit||0),balanced_clients:Number(e.balanced_clients||0)}},eL=async e=>{const n=e?`/receivables/payable?client_id=${e}`:"/receivables/payable",{data:t}=await Xe.get(n);if(!t.success)throw new Error(t.message||"Failed to fetch payable receivables.");return t.data},tL=async({pageParam:e=1,queryKey:n})=>{const[t,s,l]=n,{data:i}=await Xe.get(`/receivables/filtered?filter=${l}&page=${e}&per_page=${UF}`);if(!i.success)throw new Error(i.message||`Failed to fetch ${l} receivables.`);return i.data},rL=()=>{const e=Nt();return Et({mutationFn:VF,onSuccess:n=>{e.invalidateQueries({queryKey:["receivables"]}),e.invalidateQueries({queryKey:["clients"]}),e.invalidateQueries({queryKey:["dashboard"]}),e.invalidateQueries({queryKey:["receivables","client",n.client_id]}),e.invalidateQueries({queryKey:["receivables","payable",n.client_id]}),e.invalidateQueries({queryKey:["receivables","filtered","paid"]}),e.invalidateQueries({queryKey:["receivables","filtered","overdue"]}),e.invalidateQueries({queryKey:["employee"]}),e.invalidateQueries({queryKey:["employees"]})}})},zm=(e,n=!0)=>or({queryKey:["receivables","client",e],queryFn:()=>YF(e),enabled:!!e&&n,staleTime:10*1e3}),nL=(e=!0,n="")=>xa({queryKey:["receivables","clients-summary",n],queryFn:({pageParam:t})=>ZF({pageParam:t,search:n}),initialPageParam:1,getNextPageParam:t=>{if(t.pagination.current_page<t.pagination.total_pages)return t.pagination.current_page+1},enabled:e,staleTime:30*1e3}),sL=(e=!0)=>or({queryKey:["receivables","clients-summary","totals"],queryFn:JF,enabled:e,staleTime:60*1e3}),aL=e=>or({queryKey:["receivables","payable",e],queryFn:()=>eL(e),enabled:e!==void 0,staleTime:0}),f5=(e,n=!0)=>xa({queryKey:["receivables","filtered",e],queryFn:tL,initialPageParam:1,getNextPageParam:t=>{if(t.pagination.current_page<t.pagination.total_pages)return t.pagination.current_page+1},enabled:n,staleTime:30*1e3}),iL=()=>{const e=Nt();return Et({mutationFn:KF,onSuccess:n=>{e.invalidateQueries({queryKey:["receivables"]}),e.invalidateQueries({queryKey:["clients"]}),e.invalidateQueries({queryKey:["dashboard"]}),e.invalidateQueries({queryKey:["receivables","client",n.client_id]}),e.invalidateQueries({queryKey:["receivables","payable",n.client_id]}),e.invalidateQueries({queryKey:["receivables","filtered","paid"]}),e.invalidateQueries({queryKey:["receivables","filtered","overdue"]}),e.invalidateQueries({queryKey:["employee"]}),e.invalidateQueries({queryKey:["employees"]})}})},oL=()=>{const e=Nt();return Et({mutationFn:WF,onSuccess:()=>{e.invalidateQueries({queryKey:["receivables"]}),e.invalidateQueries({queryKey:["clients"]}),e.invalidateQueries({queryKey:["dashboard"]}),e.invalidateQueries({queryKey:["employee"]}),e.invalidateQueries({queryKey:["employees"]})}})},lL=()=>{const e=Nt();return Et({mutationFn:QF,onSuccess:n=>{e.invalidateQueries({queryKey:["receivables"]}),e.invalidateQueries({queryKey:["clients"]}),e.invalidateQueries({queryKey:["dashboard"]}),e.invalidateQueries({queryKey:["receivables","client",n.client_id]}),e.invalidateQueries({queryKey:["receivables","payable",n.client_id]}),e.invalidateQueries({queryKey:["receivables","filtered","paid"]}),e.invalidateQueries({queryKey:["receivables","filtered","overdue"]}),e.invalidateQueries({queryKey:["employee"]}),e.invalidateQueries({queryKey:["employees"]})}})},cL=()=>{const e=Nt();return Et({mutationFn:GF,onSuccess:n=>{e.invalidateQueries({queryKey:["receivables"]}),e.invalidateQueries({queryKey:["clients"]}),e.invalidateQueries({queryKey:["dashboard"]}),e.invalidateQueries({queryKey:["receivables","client",n.client_id]}),e.invalidateQueries({queryKey:["receivables","payable",n.client_id]}),e.invalidateQueries({queryKey:["receivables","filtered","paid"]}),e.invalidateQueries({queryKey:["receivables","filtered","overdue"]}),e.invalidateQueries({queryKey:["employee"]}),e.invalidateQueries({queryKey:["employees"]})}})},dL=()=>{const e=Nt();return Et({mutationFn:XF,onSuccess:()=>{e.invalidateQueries({queryKey:["receivables"]}),e.invalidateQueries({queryKey:["clients"]}),e.invalidateQueries({queryKey:["dashboard"]}),e.invalidateQueries({queryKey:["employee"]}),e.invalidateQueries({queryKey:["employees"]})}})},uL=({isOpen:e,onClose:n,clientName:t,clientId:s})=>{const[l,i]=H.useState("receivables"),{t:o}=qt();H.useEffect(()=>{const m=b=>{b.key==="Escape"&&n()};if(e)return document.addEventListener("keydown",m),()=>document.removeEventListener("keydown",m)},[e,n]);const{data:d,isLoading:c,error:a}=zm(s),u=d?.statementItems||[],h={totalDue:u.reduce((m,b)=>m+b.debit,0),totalPaid:u.reduce((m,b)=>m+b.credit,0),totalRemaining:u.reduce((m,b)=>m+(b.remaining_amount||0),0),totalCount:u.length},f=u.flatMap(m=>m.payments?.map(b=>({...b,receivableDescription:m.description}))||[]);return e?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"modal-backdrop fade show"}),r.jsx("div",{className:"modal fade show d-block",style:{zIndex:1070},children:r.jsx("div",{className:"modal-dialog modal-xl modal-dialog-centered",children:r.jsxs("div",{className:"modal-content border-0 shadow-lg",children:[r.jsxs("div",{className:"modal-header",style:{background:"var(--gradient-gold)",color:"var(--color-white)"},children:[r.jsxs("div",{className:"d-flex align-items-center",children:[r.jsx(gs,{size:20,className:"me-2"}),r.jsx("h5",{className:"modal-title mb-0 fw-bold",children:o("receivables.paymentHistoryFor",{clientName:t})})]}),r.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:n})]}),r.jsx("div",{className:"modal-body p-0",children:c?r.jsxs("div",{className:"text-center py-5",children:[r.jsx("div",{className:"spinner-border text-warning",role:"status",children:r.jsx("span",{className:"visually-hidden",children:" ..."})}),r.jsx("p",{className:"mt-2 text-muted",children:"   ..."})]}):a?r.jsxs("div",{className:"text-center py-5",children:[r.jsx("div",{className:"text-danger mb-3",children:r.jsx("i",{className:"fas fa-exclamation-triangle fa-2x"})}),r.jsx("p",{className:"text-danger",children:"    "}),r.jsx(Ne,{variant:"outline-primary",size:"sm",onClick:()=>window.location.reload(),children:" "})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"row g-2 p-3 bg-light",children:[r.jsx("div",{className:"col-3",children:r.jsx("div",{className:"card text-center border-warning",children:r.jsxs("div",{className:"card-body py-2",children:[r.jsx("div",{className:"fw-bold text-warning",children:h.totalDue.toLocaleString()}),r.jsx("small",{children:" "})]})})}),r.jsx("div",{className:"col-3",children:r.jsx("div",{className:"card text-center border-success",children:r.jsxs("div",{className:"card-body py-2",children:[r.jsx("div",{className:"fw-bold text-success",children:h.totalPaid.toLocaleString()}),r.jsx("small",{children:" "})]})})}),r.jsx("div",{className:"col-3",children:r.jsx("div",{className:"card text-center border-danger",children:r.jsxs("div",{className:"card-body py-2",children:[r.jsx("div",{className:"fw-bold text-danger",children:h.totalRemaining.toLocaleString()}),r.jsx("small",{children:" "})]})})}),r.jsx("div",{className:"col-3",children:r.jsx("div",{className:"card text-center border-info",children:r.jsxs("div",{className:"card-body py-2",children:[r.jsx("div",{className:"fw-bold text-info",children:h.totalCount}),r.jsx("small",{children:" "})]})})})]}),r.jsx("div",{className:"p-3 border-bottom",children:r.jsxs("div",{className:"btn-group w-100",children:[r.jsx("button",{className:`btn ${l==="receivables"?"btn-warning":"btn-outline-warning"}`,onClick:()=>i("receivables"),children:""}),r.jsx("button",{className:`btn ${l==="payments"?"btn-warning":"btn-outline-warning"}`,onClick:()=>i("payments"),children:" "})]})}),r.jsx("div",{className:"table-responsive",children:l==="receivables"?r.jsxs("table",{className:"table table-hover mb-0",children:[r.jsx("thead",{className:"table-light",children:r.jsxs("tr",{children:[r.jsx("th",{children:""}),r.jsx("th",{children:" "}),r.jsx("th",{children:" "}),r.jsx("th",{children:" "}),r.jsx("th",{children:" "}),r.jsx("th",{children:" "})]})}),r.jsx("tbody",{children:u.map(m=>r.jsxs("tr",{children:[r.jsx("td",{className:"fw-semibold",children:m.description}),r.jsx("td",{className:"text-warning fw-bold",children:m.debit.toLocaleString()}),r.jsx("td",{className:"text-success fw-bold",children:m.credit.toLocaleString()}),r.jsx("td",{className:"text-danger fw-bold",children:(m.remaining_amount||0).toLocaleString()}),r.jsx("td",{children:Zr(m.date)}),r.jsx("td",{children:r.jsx("span",{className:"badge bg-info",children:(m.remaining_amount||0)===0?" ":""})})]},m.id))})]}):r.jsxs("table",{className:"table table-hover mb-0",children:[r.jsx("thead",{className:"table-light",children:r.jsxs("tr",{children:[r.jsx("th",{children:""}),r.jsx("th",{children:""}),r.jsx("th",{children:""}),r.jsx("th",{children:" "})]})}),r.jsx("tbody",{children:f.map(m=>r.jsxs("tr",{children:[r.jsx("td",{className:"fw-semibold",children:m.receivableDescription}),r.jsx("td",{className:"text-success fw-bold",children:m.amount.toLocaleString()}),r.jsx("td",{children:m.payment_date}),r.jsx("td",{children:r.jsx("span",{className:"badge bg-success",children:m.method})})]},m.id))})]})})]})}),r.jsx("div",{className:"modal-footer bg-light",children:r.jsx(Ne,{variant:"secondary",onClick:n,children:""})})]})})})]}):null};var Bm="Collapsible",[fL,h5]=Fa(Bm),[hL,Hy]=fL(Bm),m5=H.forwardRef((e,n)=>{const{__scopeCollapsible:t,open:s,defaultOpen:l,disabled:i,onOpenChange:o,...d}=e,[c,a]=lo({prop:s,defaultProp:l??!1,onChange:o,caller:Bm});return r.jsx(hL,{scope:t,disabled:i,contentId:Vn(),open:c,onOpenToggle:H.useCallback(()=>a(u=>!u),[a]),children:r.jsx(gr.div,{"data-state":Ky(c),"data-disabled":i?"":void 0,...d,ref:n})})});m5.displayName=Bm;var p5="CollapsibleTrigger",g5=H.forwardRef((e,n)=>{const{__scopeCollapsible:t,...s}=e,l=Hy(p5,t);return r.jsx(gr.button,{type:"button","aria-controls":l.contentId,"aria-expanded":l.open||!1,"data-state":Ky(l.open),"data-disabled":l.disabled?"":void 0,disabled:l.disabled,...s,ref:n,onClick:Yt(e.onClick,l.onOpenToggle)})});g5.displayName=p5;var Vy="CollapsibleContent",b5=H.forwardRef((e,n)=>{const{forceMount:t,...s}=e,l=Hy(Vy,e.__scopeCollapsible);return r.jsx(ra,{present:t||l.open,children:({present:i})=>r.jsx(mL,{...s,ref:n,present:i})})});b5.displayName=Vy;var mL=H.forwardRef((e,n)=>{const{__scopeCollapsible:t,present:s,children:l,...i}=e,o=Hy(Vy,t),[d,c]=H.useState(s),a=H.useRef(null),u=pn(n,a),h=H.useRef(0),f=h.current,m=H.useRef(0),b=m.current,y=o.open||d,g=H.useRef(y),w=H.useRef(void 0);return H.useEffect(()=>{const x=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(x)},[]),mi(()=>{const x=a.current;if(x){w.current=w.current||{transitionDuration:x.style.transitionDuration,animationName:x.style.animationName},x.style.transitionDuration="0s",x.style.animationName="none";const _=x.getBoundingClientRect();h.current=_.height,m.current=_.width,g.current||(x.style.transitionDuration=w.current.transitionDuration,x.style.animationName=w.current.animationName),c(s)}},[o.open,s]),r.jsx(gr.div,{"data-state":Ky(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!y,...i,ref:u,style:{"--radix-collapsible-content-height":f?`${f}px`:void 0,"--radix-collapsible-content-width":b?`${b}px`:void 0,...e.style},children:y&&l})});function Ky(e){return e?"open":"closed"}var pL=m5,gL=g5,bL=b5,_a="Accordion",yL=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[Wy,xL,vL]=Dy(_a),[qm,AZ]=Fa(_a,[vL,h5]),Qy=h5(),y5=De.forwardRef((e,n)=>{const{type:t,...s}=e,l=s,i=s;return r.jsx(Wy.Provider,{scope:e.__scopeAccordion,children:t==="multiple"?r.jsx(NL,{...i,ref:n}):r.jsx(jL,{...l,ref:n})})});y5.displayName=_a;var[x5,wL]=qm(_a),[v5,_L]=qm(_a,{collapsible:!1}),jL=De.forwardRef((e,n)=>{const{value:t,defaultValue:s,onValueChange:l=()=>{},collapsible:i=!1,...o}=e,[d,c]=lo({prop:t,defaultProp:s??"",onChange:l,caller:_a});return r.jsx(x5,{scope:e.__scopeAccordion,value:De.useMemo(()=>d?[d]:[],[d]),onItemOpen:c,onItemClose:De.useCallback(()=>i&&c(""),[i,c]),children:r.jsx(v5,{scope:e.__scopeAccordion,collapsible:i,children:r.jsx(w5,{...o,ref:n})})})}),NL=De.forwardRef((e,n)=>{const{value:t,defaultValue:s,onValueChange:l=()=>{},...i}=e,[o,d]=lo({prop:t,defaultProp:s??[],onChange:l,caller:_a}),c=De.useCallback(u=>d((h=[])=>[...h,u]),[d]),a=De.useCallback(u=>d((h=[])=>h.filter(f=>f!==u)),[d]);return r.jsx(x5,{scope:e.__scopeAccordion,value:o,onItemOpen:c,onItemClose:a,children:r.jsx(v5,{scope:e.__scopeAccordion,collapsible:!0,children:r.jsx(w5,{...i,ref:n})})})}),[CL,$m]=qm(_a),w5=De.forwardRef((e,n)=>{const{__scopeAccordion:t,disabled:s,dir:l,orientation:i="vertical",...o}=e,d=De.useRef(null),c=pn(d,n),a=xL(t),h=Em(l)==="ltr",f=Yt(e.onKeyDown,m=>{if(!yL.includes(m.key))return;const b=m.target,y=a().filter(F=>!F.ref.current?.disabled),g=y.findIndex(F=>F.ref.current===b),w=y.length;if(g===-1)return;m.preventDefault();let x=g;const _=0,j=w-1,R=()=>{x=g+1,x>j&&(x=_)},M=()=>{x=g-1,x<_&&(x=j)};switch(m.key){case"Home":x=_;break;case"End":x=j;break;case"ArrowRight":i==="horizontal"&&(h?R():M());break;case"ArrowDown":i==="vertical"&&R();break;case"ArrowLeft":i==="horizontal"&&(h?M():R());break;case"ArrowUp":i==="vertical"&&M();break}const I=x%w;y[I].ref.current?.focus()});return r.jsx(CL,{scope:t,disabled:s,direction:l,orientation:i,children:r.jsx(Wy.Slot,{scope:t,children:r.jsx(gr.div,{...o,"data-orientation":i,ref:c,onKeyDown:s?void 0:f})})})}),Vh="AccordionItem",[SL,Gy]=qm(Vh),_5=De.forwardRef((e,n)=>{const{__scopeAccordion:t,value:s,...l}=e,i=$m(Vh,t),o=wL(Vh,t),d=Qy(t),c=Vn(),a=s&&o.value.includes(s)||!1,u=i.disabled||e.disabled;return r.jsx(SL,{scope:t,open:a,disabled:u,triggerId:c,children:r.jsx(pL,{"data-orientation":i.orientation,"data-state":E5(a),...d,...l,ref:n,disabled:u,open:a,onOpenChange:h=>{h?o.onItemOpen(s):o.onItemClose(s)}})})});_5.displayName=Vh;var j5="AccordionHeader",N5=De.forwardRef((e,n)=>{const{__scopeAccordion:t,...s}=e,l=$m(_a,t),i=Gy(j5,t);return r.jsx(gr.h3,{"data-orientation":l.orientation,"data-state":E5(i.open),"data-disabled":i.disabled?"":void 0,...s,ref:n})});N5.displayName=j5;var Kb="AccordionTrigger",C5=De.forwardRef((e,n)=>{const{__scopeAccordion:t,...s}=e,l=$m(_a,t),i=Gy(Kb,t),o=_L(Kb,t),d=Qy(t);return r.jsx(Wy.ItemSlot,{scope:t,children:r.jsx(gL,{"aria-disabled":i.open&&!o.collapsible||void 0,"data-orientation":l.orientation,id:i.triggerId,...d,...s,ref:n})})});C5.displayName=Kb;var S5="AccordionContent",k5=De.forwardRef((e,n)=>{const{__scopeAccordion:t,...s}=e,l=$m(_a,t),i=Gy(S5,t),o=Qy(t);return r.jsx(bL,{role:"region","aria-labelledby":i.triggerId,"data-orientation":l.orientation,...o,...s,ref:n,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});k5.displayName=S5;function E5(e){return e?"open":"closed"}var kL=y5,EL=_5,RL=N5,R5=C5,T5=k5;const TL=kL,A5=H.forwardRef(({className:e,...n},t)=>r.jsx(EL,{ref:t,className:Lt("border-b",e),...n}));A5.displayName="AccordionItem";const M5=H.forwardRef(({className:e,children:n,...t},s)=>r.jsx(RL,{className:"flex",children:r.jsxs(R5,{ref:s,className:Lt("flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline text-left [&[data-state=open]>svg]:rotate-180",e),...t,children:[n,r.jsx(mc,{className:"h-4 w-4 shrink-0 text-black transition-transform duration-200"})]})}));M5.displayName=R5.displayName;const O5=H.forwardRef(({className:e,children:n,...t},s)=>r.jsx(T5,{ref:s,className:"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...t,children:r.jsx("div",{className:Lt("pb-4 pt-0",e),children:n})}));O5.displayName=T5.displayName;const AL=({control:e,errors:n,onTypeSelected:t})=>{const{t:s}=qt(),l=["Government","RealEstate","Accounting","Other"];return r.jsxs("div",{className:"task-type-step",children:[r.jsxs("div",{className:"text-center mb-4",children:[r.jsx("h5",{className:"mb-2",children:s("tasks.selectTaskType")}),r.jsx("p",{className:"text-muted small",children:s("tasks.selectTaskTypeDescription")})]}),r.jsx("div",{className:"type-selection-grid",children:r.jsx(an,{name:"type",control:e,rules:{required:!0},render:({field:i})=>r.jsx(r.Fragment,{children:l.map(o=>r.jsxs("div",{className:`type-card ${i.value===o?"selected":""}`,onClick:()=>{i.onChange(o),t(o)},children:[r.jsxs("div",{className:"type-icon",children:[o==="Government"&&r.jsx("i",{className:"fas fa-building"}),o==="RealEstate"&&r.jsx("i",{className:"fas fa-home"}),o==="Accounting"&&r.jsx("i",{className:"fas fa-calculator"}),o==="Other"&&r.jsx("i",{className:"fas fa-tasks"})]}),r.jsx("div",{className:"type-label",children:s(`type.${o}`)})]},o))})})}),n.type&&r.jsxs("div",{className:"text-center text-danger small mt-2",children:[s("tasks.formTypeLabel")," is required"]}),r.jsx("style",{children:`
        .task-type-step {
          padding: 1rem 0;
        }
        
        .type-selection-grid {
          display: grid;
          grid-template-columns: repeat(2, 1fr);
          gap: 1rem;
          margin-bottom: 1rem;
        }
        
        .type-card {
          padding: 1.5rem 1rem;
          border: 2px solid #e9ecef;
          border-radius: 0.5rem;
          text-align: center;
          cursor: pointer;
          transition: all 0.2s ease;
          background: white;
        }
        
        .type-card:hover {
          border-color: #007bff;
          box-shadow: 0 2px 8px rgba(0,123,255,0.15);
          transform: translateY(-2px);
        }
        
        .type-card.selected {
          border-color: #007bff;
          background-color: #e7f3ff;
          color: #007bff;
        }
        
        .type-icon {
          font-size: 2rem;
          margin-bottom: 0.5rem;
          color: #6c757d;
        }
        
        .type-card.selected .type-icon {
          color: #007bff;
        }
        
        .type-label {
          font-weight: 500;
          font-size: 0.9rem;
        }
        
        @media (max-width: 576px) {
          .type-selection-grid {
            grid-template-columns: 1fr;
          }
        }
      `})]})};function ML(e,n,t,s){var l=this,i=H.useRef(null),o=H.useRef(0),d=H.useRef(0),c=H.useRef(null),a=H.useRef([]),u=H.useRef(),h=H.useRef(),f=H.useRef(e),m=H.useRef(!0);f.current=e;var b=typeof window<"u",y=!n&&n!==0&&b;if(typeof e!="function")throw new TypeError("Expected a function");n=+n||0;var g=!!(t=t||{}).leading,w=!("trailing"in t)||!!t.trailing,x="maxWait"in t,_="debounceOnServer"in t&&!!t.debounceOnServer,j=x?Math.max(+t.maxWait||0,n):null;H.useEffect(function(){return m.current=!0,function(){m.current=!1}},[]);var R=H.useMemo(function(){var M=function(T){var P=a.current,A=u.current;return a.current=u.current=null,o.current=T,d.current=d.current||T,h.current=f.current.apply(A,P)},I=function(T,P){y&&cancelAnimationFrame(c.current),c.current=y?requestAnimationFrame(T):setTimeout(T,P)},F=function(T){if(!m.current)return!1;var P=T-i.current;return!i.current||P>=n||P<0||x&&T-o.current>=j},B=function(T){return c.current=null,w&&a.current?M(T):(a.current=u.current=null,h.current)},U=function T(){var P=Date.now();if(g&&d.current===o.current&&Q(),F(P))return B(P);if(m.current){var A=n-(P-i.current),N=x?Math.min(A,j-(P-o.current)):A;I(T,N)}},Q=function(){s&&s({})},K=function(){if(b||_){var T=Date.now(),P=F(T);if(a.current=[].slice.call(arguments),u.current=l,i.current=T,P){if(!c.current&&m.current)return o.current=i.current,I(U,n),g?M(i.current):h.current;if(x)return I(U,n),M(i.current)}return c.current||I(U,n),h.current}};return K.cancel=function(){c.current&&(y?cancelAnimationFrame(c.current):clearTimeout(c.current)),o.current=0,a.current=i.current=u.current=c.current=null},K.isPending=function(){return!!c.current},K.flush=function(){return c.current?B(Date.now()):h.current},K},[g,x,n,j,w,y,b,_,s]);return R}function OL(e,n){return e===n}function D5(e,n,t){var s=OL,l=H.useRef(e),i=H.useState({})[1],o=ML(H.useCallback(function(c){l.current=c,i({})},[i]),n,t,i),d=H.useRef(e);return s(d.current,e)||(o(e),d.current=e),[l.current,o]}const Um=({onSelect:e,onCreate:n,label:t,disabled:s})=>{const[l,i]=H.useState(""),[o]=D5(l,300),{data:d=[],isLoading:c}=o5(o),[a,u]=H.useState(!1),[h,f]=H.useState(""),[m,b]=H.useState(""),[y,g]=H.useState(null),[w,x]=H.useState(""),[_,j]=H.useState(""),R=i5(),{error:M}=ir();H.useEffect(()=>{u(!1)},[o]);const I=B=>{i(""),e(B)},F=()=>{!h||!m||R.mutate({name:h,phone:m,region_id:y,google_drive_link:w,notes:_},{onSuccess:B=>{u(!1),f(""),b(""),g(null),x(""),j(""),n?.(B),e(B)},onError:B=>{console.error("Client creation error:",B);const U=B?.response?.data?.message;U&&U.includes("phone number already exists")?M("  ","     .     ."):M("   ",U||"    ")}})};return r.jsxs("div",{className:"client-search-compact",children:[r.jsx(Kt,{label:t||"     ",value:l,onChange:B=>i(B.target.value),disabled:s,placeholder:"..."}),c&&r.jsx("div",{className:"text-center py-2",children:r.jsx(no,{className:"animate-spin",size:20})}),!c&&o&&d.length>0&&r.jsx("div",{className:"shadow-sm rounded-lg overflow-hidden mb-2 border border-gray-200",children:d.map(B=>r.jsxs("button",{type:"button",className:"w-full flex items-center px-4 py-3 border-b border-gray-100 last:border-b-0 bg-white hover:bg-muted transition-colors duration-150 text-right",onClick:()=>I(B),children:[r.jsx(ma,{size:18,className:"mr-2",style:{color:"hsl(var(--primary))"}}),r.jsx("span",{className:"text-gray-900",children:B.name}),r.jsx("span",{className:"mr-auto text-gray-500 text-sm",children:B.phone})]},B.id))}),!c&&o&&d.length===0&&r.jsx("div",{className:"mb-2",children:r.jsx("div",{className:"bg-blue-50 border border-blue-200 text-blue-800 py-2 px-3 rounded-lg mb-2 text-sm",children:"      ."})}),!c&&!a&&r.jsx("div",{className:"mb-2",children:r.jsxs(Ne,{type:"button",variant:"primary",size:"sm",onClick:()=>u(!0),children:[r.jsx(hn,{size:16,className:"me-1"}),"   "]})}),a&&r.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 mb-2 bg-gray-50",children:[r.jsx(Kt,{label:" ",value:h,onChange:B=>f(B.target.value),className:"mb-2"}),r.jsx(Kt,{label:" ",value:m,onChange:B=>b(B.target.value),className:"mb-2"}),r.jsx($y,{value:y,onChange:g,label:" ",placeholder:" ",allowCreate:!0,className:"mb-2"}),r.jsx(Kt,{label:"  ",value:w,onChange:B=>x(B.target.value),className:"mb-2"}),r.jsxs("div",{className:"mb-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 text-right",children:""}),r.jsx("textarea",{className:"base-input w-full resize-y",value:_,onChange:B=>j(B.target.value),rows:3,placeholder:"  ..."})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Ne,{type:"button",variant:"primary",size:"sm",isLoading:R.isPending,onClick:F,disabled:!h||!m,children:" "}),r.jsx(Ne,{type:"button",variant:"secondary",size:"sm",onClick:()=>u(!1),children:""})]})]})]})},DL=({control:e,errors:n,watch:t,client:s,onClientSelected:l})=>{const{t:i}=qt();return r.jsxs("div",{className:"client-selection-step",children:[r.jsx("div",{className:"selected-type-display mb-4",children:r.jsxs("div",{className:"d-flex align-items-center justify-content-center",children:[r.jsx("span",{className:"badge bg-primary me-2",children:""}),r.jsx("span",{className:"text-muted small",children:" :"}),r.jsx("span",{className:"fw-bold ms-2",children:t("type")?i(`type.${t("type")}`):""})]})}),r.jsxs("div",{className:"text-center mb-4",children:[r.jsx("h5",{className:"mb-2",children:i("tasks.selectClient")}),r.jsx("p",{className:"text-muted small",children:i("tasks.selectClientDescription")})]}),s?r.jsx("div",{className:"preselected-client",children:r.jsxs("div",{className:"client-card selected",children:[r.jsxs("div",{className:"client-info",children:[r.jsx("div",{className:"client-name",children:s.name}),r.jsx("div",{className:"client-phone",children:s.phone})]}),r.jsx("div",{className:"selected-indicator",children:r.jsx("i",{className:"fas fa-check-circle text-success"})})]})}):r.jsx("div",{className:"client-search-container",children:r.jsx(Um,{label:"",onSelect:l,disabled:!1})}),r.jsx(an,{name:"client_id",control:e,rules:{required:!0},render:({field:o})=>r.jsx("input",{type:"hidden",...o})}),n.client_id&&r.jsxs("div",{className:"text-center text-danger small mt-2",children:[i("tasks.formClientLabel")," is required"]}),r.jsx("style",{children:`
        .client-selection-step {
          padding: 1rem 0;
        }
        
        .selected-type-display {
          padding: 0.75rem;
          background-color: #f8f9fa;
          border-radius: 0.375rem;
          border: 1px solid #e9ecef;
        }
        
        .preselected-client {
          margin-bottom: 1rem;
        }
        
        .client-card {
          padding: 1rem;
          border: 2px solid #e9ecef;
          border-radius: 0.5rem;
          background: white;
          display: flex;
          justify-content: space-between;
          align-items: center;
        }
        
        .client-card.selected {
          border-color: #28a745;
          background-color: #f8fff9;
        }
        
        .client-info {
          flex: 1;
        }
        
        .client-name {
          font-weight: 600;
          font-size: 1rem;
          color: #495057;
        }
        
        .client-phone {
          font-size: 0.875rem;
          color: #6c757d;
          margin-top: 0.25rem;
        }
        
        .selected-indicator {
          font-size: 1.25rem;
        }
        
        .client-search-container {
          padding: 0 1rem;
        }
      `})]})},PL=({step:e,isEditMode:n,isLoading:t,onBack:s,onClose:l})=>{const{t:i}=qt();return r.jsxs("div",{className:"modal-footer-compact",children:[r.jsxs("div",{className:"footer-content",children:[r.jsx("div",{className:"footer-left",children:e>0&&!n&&r.jsxs(Ne,{type:"button",variant:"secondary",size:"sm",onClick:s,disabled:t,children:[r.jsx("i",{className:"fas fa-arrow-right me-1"}),i("common.back")]})}),r.jsxs("div",{className:"footer-right",children:[r.jsx(Ne,{type:"button",variant:"secondary",size:"sm",onClick:l,disabled:t,className:"me-2",children:i("common.cancel")}),(e===2||n)&&r.jsx(Ne,{type:"submit",variant:"primary",size:"sm",isLoading:t,children:t?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"}),i("common.saving")]}):r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fas fa-save me-1"}),i("common.save")]})})]})]}),r.jsx("style",{children:`
        .modal-footer-compact {
          border-top: 1px solid #e9ecef;
          padding: 0.75rem 1rem;
          background-color: #f8f9fa;
          border-radius: 0 0 0.375rem 0.375rem;
          margin: 0 -1rem -1rem -1rem;
        }
        
        .footer-content {
          display: flex;
          justify-content: space-between;
          align-items: center;
        }
        
        .footer-left,
        .footer-right {
          display: flex;
          align-items: center;
        }
        
        .spinner-border-sm {
          width: 1rem;
          height: 1rem;
        }
      `})]})},IL=()=>{const{t:e}=qt(),n=ir(),t=Nt(),s=kn(),{isAdmin:l}=Dn(),i=et(fe=>fe.closeModal),o=et(fe=>fe.openModal),d=et(fe=>fe.props),{taskToEdit:c,client:a}=d,u=!!c,[h,f]=H.useState(u?2:0),[m,b]=H.useState(a),[y,g]=H.useState(!1),[w,x]=H.useState(!1),[_,j]=H.useState(!1),[R,M]=H.useState([]),[I,F]=H.useState([]),{data:B=[]}=Uy(),{register:U,handleSubmit:Q,control:K,formState:{errors:T},setValue:P,watch:A}=Wn({defaultValues:{client_id:c?.client_id||a?.id,assigned_to_id:c?.assigned_to_id||void 0,task_name:c?.task_name||"",type:c?.type||void 0,amount:c?.amount||0,start_date:c?.start_date||new Date().toISOString().split("T")[0],end_date:c?.end_date||void 0,prepaid_amount:c?.prepaid_amount||0,notes:c?.notes||"",tags:[],amount_details:[],subtasks:[]}}),N=vF(),k=nl(),S=NF(),E=_F(),O=N.isPending||k.isPending||S.isPending||E.isPending;H.useEffect(()=>{if(c){M(c.requirements.map(re=>({...re,id:re.id,is_provided:typeof re.is_provided=="string"?re.is_provided==="1":!!re.is_provided,temp_id:re.id?String(re.id):Hh()}))),P("client_id",c.client_id),P("task_name",c.task_name||""),P("type",c.type),P("amount",c.amount),P("start_date",c.start_date),P("end_date",c.end_date||void 0),P("prepaid_amount",c.prepaid_amount||0),P("notes",c.notes||""),P("tags",c.tags?c.tags.map(re=>String(typeof re=="object"&&re.id||re)):[]),P("amount_details",c.amount_details||[]);const fe=c.subtasks&&c.subtasks.length>0?c.subtasks:[];if(fe.length>0)P("subtasks",fe),F(fe);else if(c.amount&&Number(c.amount)>0){const re=[{description:c.task_name||" ",amount:Number(c.amount),is_completed:!1}];P("subtasks",re),F(re)}else P("subtasks",[]),F([]);f(2),b(c.client)}else a?(P("client_id",a.id),P("tags",[]),M([]),F([{description:"",amount:0,is_completed:!1}]),f(0),b(a)):(P("tags",[]),F([{description:"",amount:0,is_completed:!1}]),f(0),b(void 0))},[c,a,P]),H.useEffect(()=>{!u&&a&&A("type")&&h===1&&f(2)},[A("type"),a,h,u]),H.useEffect(()=>{if(I.length>0&&I.filter(re=>re.description&&re.description.trim()&&re.amount>=0).length>0){const re=se();P("amount",re)}},[I,P]);const L=(fe,re)=>{const ge=fe.data;if("conflict_type"in ge){if(ge.conflict_type==="prepaid_amount_change_conflict"){const le=ge;o("prepaidConflict",{taskId:c.id,conflictData:le,newPrepaidAmount:re.prepaid_amount||0,onResolved:()=>{n.showToast({type:"success",title:e("tasks.conflictResolved")}),i()}})}else if(ge.conflict_type==="main_receivable_overpayment"){const le=ge;o("taskAmountConflict",{taskId:c.id,conflictData:le,newTaskAmount:re.amount||0,onResolved:()=>{n.showToast({type:"success",title:e("tasks.conflictResolved")}),i()}})}}else if("expected_updated_at"in ge){const le=ge;o("concurrentModification",{conflictData:le,onRetry:te=>{if(te){const ie=le.current_task_data;P("task_name",ie.task_name||""),P("amount",ie.amount),P("prepaid_amount",ie.prepaid_amount||0),P("notes",ie.notes||"");const ue={...re,expected_updated_at:le.current_updated_at};S.mutate({id:c.id,taskData:ue})}else{const ie={...re,expected_updated_at:le.current_updated_at};S.mutate({id:c.id,taskData:ie})}},onCancel:()=>{}})}},z=fe=>{fe.prepaid_amount>0&&fe.prepaid_invoice?(i(),o("recordPayment",{invoiceId:fe.prepaid_invoice.id,clientId:fe.client_id,clientName:fe.client?.name})):g(!0)},G=fe=>{const re=R.filter(te=>te.requirement_text&&String(te.requirement_text).trim()!=="").map(te=>({requirement_text:String(te.requirement_text||"").trim(),is_provided:!!te.is_provided})),ge=I.filter(te=>te.description&&te.description.trim()&&te.amount>=0),le=ge.length>0?se():Number(fe.amount);if(u&&c){const te={...fe,amount:le,end_date:fe.end_date||void 0,prepaid_amount:fe.prepaid_amount?Number(fe.prepaid_amount):void 0,tags:fe.tags||[],amount_details:[],subtasks:ge,assigned_to_id:l()?fe.assigned_to_id!==void 0?fe.assigned_to_id:c?.assigned_to_id:void 0,requirements:R.filter(ue=>ue.requirement_text&&String(ue.requirement_text).trim()!=="").map(ue=>({id:ue.id,requirement_text:String(ue.requirement_text||"").trim(),is_provided:!!ue.is_provided}))};console.log("Debug assignment logic:",{isAdmin:l(),updatePayload_assigned_to_id:te.assigned_to_id,taskToEdit_assigned_to_id:c?.assigned_to_id,areEqual:te.assigned_to_id===c?.assigned_to_id});const ie={...te,expected_updated_at:c.updated_at};console.log("Final update payload:",ie),S.mutate({id:c.id,taskData:ie},{onSuccess:ue=>{if("success"in ue&&ue.success===!1){L(ue,te);return}n.success("  ","   "),i()},onError:ue=>{console.error("Update error:",ue),n.error("  ",ue?.response?.data?.message||"    ")}})}else{const te={client_id:fe.client_id,task_name:fe.task_name,type:fe.type,amount:le,start_date:fe.start_date,end_date:fe.end_date||void 0,prepaid_amount:fe.prepaid_amount?Number(fe.prepaid_amount):void 0,notes:fe.notes,tags:fe.tags||[],amount_details:[],subtasks:ge,assigned_to_id:l()?fe.assigned_to_id:void 0};N.mutate(te,{onSuccess:ie=>{u6(),re.length>0?E.mutate({task_id:ie.id,requirements:re},{onSuccess:()=>{t.invalidateQueries({queryKey:["tasks"]}),t.invalidateQueries({queryKey:["dashboard"]}),z(ie)},onError:ue=>{console.error("Requirements creation error:",ue),n.error("   ",ue?.response?.data?.message||"       "),t.invalidateQueries({queryKey:["tasks"]}),t.invalidateQueries({queryKey:["dashboard"]}),z(ie)}}):(t.invalidateQueries({queryKey:["tasks"]}),t.invalidateQueries({queryKey:["dashboard"]}),z(ie))},onError:ie=>{console.error("Create error:",ie),n.error("  ",ie?.response?.data?.message||"    ")}})}},Z=()=>{M(fe=>[...fe,{temp_id:Hh(),requirement_text:"",is_provided:!1,id:void 0}])},ee=(fe,re)=>{fe!==void 0&&M(ge=>ge.map(le=>le.temp_id===fe||le.id===fe?{...le,requirement_text:re}:le))},W=fe=>{fe!==void 0&&M(re=>re.map(ge=>ge.temp_id===fe||ge.id===fe?{...ge,is_provided:!ge.is_provided}:ge))},J=fe=>{fe!==void 0&&M(re=>re.filter(ge=>ge.temp_id!==fe&&ge.id!==fe))},$=()=>{F([...I,{description:"",amount:0,is_completed:!1}])},q=fe=>{if(I.length>1){const re=I.filter((le,te)=>te!==fe);F(re);const ge=re.reduce((le,te)=>le+(te.amount||0),0);P("amount",ge)}},Y=(fe,re,ge)=>{const le=[...I];re==="amount"?le[fe]={...le[fe],[re]:Number(ge)}:le[fe]={...le[fe],[re]:ge},F(le);const te=le.reduce((ie,ue)=>ie+(ue.amount||0),0);P("amount",te)},se=()=>I.reduce((fe,re)=>fe+(re.amount||0),0),oe=()=>{const fe=I.filter(te=>te.description&&te.description.trim()&&te.amount>=0);if(fe.length===0)return{completed:0,total:0,percentage:0};const re=fe.filter(te=>te.is_completed).length,ge=fe.length,le=ge>0?Math.round(re/ge*100):0;return{completed:re,total:ge,percentage:le}},ae=()=>I&&I.length>0&&I.some(fe=>fe.description&&fe.description.trim()),ce=["Government","RealEstate","Accounting","Other"],we=m||a||c?.client;return r.jsxs(r.Fragment,{children:[r.jsxs(Zt,{isOpen:!0,onClose:i,title:e(u?"tasks.editTask":"tasks.addNew"),className:"task-modal-compact",children:[r.jsx("div",{className:"modal-content-wrapper",children:r.jsxs("form",{onSubmit:Q(G),className:"h-100",children:[h===0&&!u&&r.jsx("div",{className:"step-content",children:r.jsx(AL,{control:K,errors:T,onTypeSelected:()=>f(1)})}),h===1&&!u&&r.jsx("div",{className:"step-content",children:r.jsx(DL,{control:K,errors:T,watch:A,client:a,onClientSelected:fe=>{b(fe),P("client_id",fe.id),f(2)}})}),(h===2||u)&&r.jsxs("div",{className:"step-content main-form fade-in",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 mb-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"font-semibold text-black text-sm block mb-1",children:" "}),r.jsx(an,{name:"type",control:K,rules:{required:!0},render:({field:fe})=>r.jsxs("select",{...fe,className:`w-full px-3 py-1.5 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary ${T.type?"border-destructive bg-destructive/5":"border-border"}`,children:[r.jsx("option",{value:"",children:e("tasks.formTypeLabel")}),ce.map(re=>r.jsx("option",{value:re,children:e(`type.${re}`)},re))]})}),T.type&&r.jsx("div",{className:"text-destructive text-xs mt-1",children:""})]}),r.jsxs("div",{children:[r.jsx("label",{className:"font-semibold text-black text-sm block mb-1",children:" "}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{className:"flex-1 px-3 py-1.5 border border-border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary",value:we?.name||"",readOnly:u,disabled:u}),we&&r.jsx(zF,{onViewTaskHistory:()=>x(!0),onViewPaymentHistory:()=>j(!0)})]}),!u&&h===2&&r.jsx("small",{className:"text-muted-foreground text-xs",children:r.jsx("button",{type:"button",className:"text-primary hover:underline",onClick:()=>f(1),children:" "})}),r.jsx(an,{name:"client_id",control:K,rules:{required:!0},render:({field:fe})=>r.jsx("input",{type:"hidden",...fe})})]}),l()&&r.jsxs("div",{children:[r.jsx("label",{className:"font-semibold text-black text-sm block mb-1",children:" "}),r.jsx(an,{name:"assigned_to_id",control:K,render:({field:fe})=>r.jsxs("select",{...fe,className:"w-full px-3 py-1.5 border border-border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary",value:fe.value||"",onChange:re=>fe.onChange(re.target.value===""?null:Number(re.target.value)),children:[r.jsx("option",{value:"",children:" "}),B.map(re=>r.jsx("option",{value:re.user_id,children:re.display_name},re.user_id))]})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 mb-3",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsxs("label",{className:"font-semibold text-black text-sm block mb-1",children:["  ",r.jsx("span",{className:"text-destructive",children:"*"})]}),r.jsx("input",{className:`w-full px-3 py-1.5 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary ${T.task_name?"border-destructive bg-destructive/5":"border-border"}`,...U("task_name",{required:!0}),placeholder:"  ..."}),T.task_name&&r.jsx("div",{className:"text-destructive text-xs mt-1",children:"  "})]}),r.jsxs("div",{children:[r.jsx("label",{className:"font-semibold text-black text-sm block mb-1",children:" "}),r.jsx("input",{className:`w-full px-3 py-1.5 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary ${T.start_date?"border-destructive bg-destructive/5":"border-border"}`,type:"date",...U("start_date",{required:!0})}),T.start_date&&r.jsx("div",{className:"text-destructive text-xs mt-1",children:""})]})]}),ae()&&r.jsx("div",{className:"mb-3 p-3 rounded-lg bg-gradient-to-r from-gray-100 to-gray-200 border border-gray-300",children:r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"font-semibold mb-2 flex items-center gap-2",children:[r.jsx(Nm,{size:16,className:"text-blue-500"}),"   "]}),r.jsx("div",{className:"w-full h-2 bg-gray-300 rounded-full mb-2 overflow-hidden",children:r.jsx("div",{className:"h-full bg-green-600 transition-all duration-300",style:{width:`${oe().percentage}%`}})}),r.jsxs("small",{className:"text-muted-foreground text-xs",children:[oe().completed,"  ",oe().total,"  "]})]}),r.jsx("div",{className:"text-right",children:r.jsxs("div",{className:"flex flex-col items-end",children:[r.jsxs("div",{className:"text-2xl font-semibold mb-1",children:[oe().percentage,"%"]}),r.jsxs("small",{className:"text-green-600 font-semibold text-sm",children:[oe().completed,"/",oe().total]})]})})]})}),r.jsxs("div",{className:"mb-4",children:[r.jsx("div",{className:"flex justify-between items-center mb-2",children:r.jsx("label",{className:"font-semibold text-black text-sm mb-0",children:r.jsx("span",{className:"px-2 py-1 rounded bg-blue-600 text-white text-xs",children:"  "})})}),r.jsxs("div",{className:"grid grid-cols-12 py-2 font-semibold text-center text-white bg-blue-600 rounded-t",children:[r.jsx("div",{className:"col-span-6",children:""}),r.jsx("div",{className:"col-span-3",children:""}),r.jsx("div",{className:"col-span-3",children:""})]}),r.jsxs("div",{className:"border border-blue-600 border-t-0 rounded-b",children:[I.map((fe,re)=>r.jsxs("div",{className:`grid grid-cols-12 py-2 items-center ${re%2===0?"bg-gray-50":"bg-white"}`,style:{borderBottom:re===I.length-1?"none":"1px solid #e9ecef"},children:[r.jsx("div",{className:"col-span-6 px-2",children:r.jsx("input",{type:"text",className:"w-full px-3 py-1.5 border border-border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary",value:fe.description||"",onChange:ge=>Y(re,"description",ge.target.value),placeholder:"  ..."})}),r.jsx("div",{className:"col-span-3 px-2",children:r.jsx("input",{type:"number",className:"w-full px-3 py-1.5 border border-border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary",value:fe.amount||"",onChange:ge=>Y(re,"amount",Number(ge.target.value)),placeholder:"0.00"})}),r.jsx("div",{className:"col-span-3 text-center",children:r.jsxs("div",{className:"flex justify-center gap-1",children:[r.jsx("button",{type:"button",className:`px-2 py-1 rounded text-sm ${fe.is_completed?"bg-green-600 text-white":"border border-green-600 text-green-600"}`,onClick:()=>Y(re,"is_completed",!fe.is_completed),title:fe.is_completed?"":" ",children:r.jsx(es,{size:14})}),r.jsx("button",{type:"button",className:"px-2 py-1 rounded text-sm border border-destructive text-destructive",onClick:()=>q(re),title:"",children:r.jsx(Is,{size:14})})]})})]},re)),r.jsx("div",{className:"py-2 text-center bg-gray-50",style:{borderTop:I.length>0?"1px solid #e9ecef":"none"},children:r.jsxs("button",{type:"button",className:"px-3 py-1.5 rounded text-sm border border-primary text-primary hover:bg-primary/10",onClick:$,children:[r.jsx(hn,{size:14,className:"inline mr-1"}),"   "]})}),I.length>0&&r.jsxs("div",{className:"grid grid-cols-12 py-2 font-semibold text-center text-white bg-blue-600",children:[r.jsx("div",{className:"col-span-6",children:""}),r.jsx("div",{className:"col-span-3",children:se()}),r.jsx("div",{className:"col-span-3",children:"-"})]})]})]}),r.jsx(TL,{type:"single",collapsible:!0,className:"mb-3",children:r.jsxs(A5,{value:"item-1",children:[r.jsx(M5,{children:" "}),r.jsxs(O5,{children:[r.jsxs("div",{className:"mb-3",children:[r.jsx("label",{className:"font-semibold text-black text-sm block mb-1",children:" "}),r.jsx("input",{className:`w-full px-3 py-2 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary ${T.prepaid_amount?"border-destructive bg-destructive/5":"border-border"}`,type:"number",step:"1",placeholder:" ",...U("prepaid_amount",{validate:fe=>{const re=se()||0;return!fe||fe<=re||"       "}})}),T.prepaid_amount&&r.jsx("div",{className:"text-destructive text-xs mt-1",children:T.prepaid_amount.message})]}),r.jsxs("div",{className:"mb-3",children:[r.jsx("label",{className:"font-semibold text-black text-sm block mb-1",children:" "}),r.jsx("input",{className:"w-full px-3 py-2 border border-border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary",type:"date",...U("end_date")})]}),r.jsxs("div",{className:"mb-3",children:[r.jsx("label",{className:"font-semibold text-black text-sm block mb-1",children:""}),r.jsx("textarea",{className:"w-full px-3 py-2 border border-border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary resize-none",...U("notes"),rows:3,placeholder:"  ..."})]}),r.jsxs("div",{className:"requirements-section",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("label",{className:"font-semibold text-black text-sm mb-0",children:""}),r.jsxs(Ne,{type:"button",variant:"outline-primary",size:"sm",onClick:Z,className:"text-xs",children:[r.jsx(rl,{size:14,className:"mr-1"}),"  "]})]}),R.length===0?r.jsx("div",{className:"text-muted-foreground text-center py-3",children:r.jsx("p",{className:"mb-0 text-sm",children:"  "})}):r.jsx("div",{className:"requirements-list",children:R.map((fe,re)=>r.jsx("div",{className:"requirement-item mb-2",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{children:r.jsx("input",{type:"checkbox",className:"rounded",id:`req-${fe.temp_id||fe.id}`,checked:fe.is_provided,onChange:()=>W(fe.temp_id||fe.id)})}),r.jsx("div",{className:"flex-1",children:r.jsx("input",{type:"text",className:"w-full px-3 py-1.5 border border-border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary",value:fe.requirement_text,onChange:ge=>ee(fe.temp_id||fe.id,ge.target.value),placeholder:` ${re+1}`})}),r.jsx(Ne,{type:"button",variant:"danger",size:"sm",onClick:()=>J(fe.temp_id||fe.id),className:"text-xs",title:" ",children:r.jsx(jm,{size:14})})]})},fe.temp_id||String(fe.id)))})]})]})]})})]}),r.jsx(PL,{step:h,isEditMode:u,isLoading:O,onBack:()=>f(h-1),onClose:i})]})}),r.jsx("style",{children:`
          .task-modal-compact {
            width: 90vw;
            max-width: 900px;
            margin: auto;
          }
          
          .modal-content-wrapper {
            height: 100%;
            display: flex;
            flex-direction: column;
          }
          
          .step-content {
            flex: 1;
            overflow-y: auto;
            padding: 0.75rem 0;
          }
          
          .main-form {
            padding-bottom: 1rem;
          }
          
          .form-grid {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 1rem;
            margin-bottom: 1rem;
          }
          
          .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-bottom: 1rem;
          }
          
          .form-group-compact {
            margin-bottom: 0.75rem;
          }
          
          .form-group-half {
            min-width: 0;
          }
          
          .form-label-compact {
            font-size: 0.875rem;
            font-weight: 500;
            margin-bottom: 0.25rem;
            display: block;
            color: #495057;
          }
          
          .form-control-sm {
            font-size: 0.875rem;
            padding: 0.375rem 0.5rem;
          }
          
          .form-select-sm {
            font-size: 0.875rem;
            padding: 0.375rem 0.5rem;
          }
          
          .invalid-feedback-compact {
            font-size: 0.75rem;
            color: #dc3545;
            margin-top: 0.125rem;
          }
          
          .client-section {
            position: relative;
          }
          
          .client-input-wrapper {
            position: relative;
          }
          
          .client-icons {
            margin-bottom: 0.25rem;
          }
          
          .requirements-section {
            border: 1px solid #e9ecef;
            border-radius: 0.375rem;
            padding: 0.75rem;
            background-color: #f8f9fa;
          }
          
          .requirements-list-compact {
            max-height: 120px;
            overflow-y: auto;
          }
          
          .requirement-item-compact {
            padding: 0.5rem;
            margin-bottom: 0.5rem;
            background: white;
            border-radius: 0.25rem;
            border: 1px solid #e9ecef;
          }
          
          .requirement-item-compact:last-child {
            margin-bottom: 0;
          }
          
          .empty-requirements {
            text-align: center;
            padding: 1rem;
            color: #6c757d;
          }
          
          .btn-xs {
            padding: 0.25rem 0.5rem;
            font-size: 0.75rem;
            line-height: 1.2;
          }
          
          .form-check-sm {
            margin-bottom: 0;
          }
          
          .form-check-input-sm {
            width: 1rem;
            height: 1rem;
          }
          
          .fade-in {
            animation: fadeIn 0.3s ease-in-out;
          }
          
          @keyframes fadeIn {
            from { 
              opacity: 0; 
              transform: translateY(10px); 
            }
            to { 
              opacity: 1; 
              transform: translateY(0); 
            }
          }
          
          /* Responsive adjustments */
          @media (max-width: 768px) {
            .task-modal-compact {
              width: 95vw;
              height: 90vh;
            }
            
            .form-grid {
              grid-template-columns: 1fr;
              gap: 0.75rem;
            }
            
            .form-row {
              grid-template-columns: 1fr;
              gap: 0.75rem;
            }
          }
        `})]}),r.jsx(BF,{isOpen:y,onClose:()=>{g(!1),i()},onViewAllTasks:()=>{g(!1),i(),s(l()?"/tasks":"/employee/tasks")},onAddNewTask:()=>{g(!1),f(0),b(void 0),M([])}}),r.jsx($F,{isOpen:w,onClose:()=>x(!1),clientName:we?.name||"",clientId:we?.id||0}),r.jsx(uL,{isOpen:_,onClose:()=>j(!1),clientName:we?.name||"",clientId:we?.id||0})]})},FL=()=>{const{t:e}=qt(),n=et(b=>b.closeModal),t=et(b=>b.props),{task:s}=t,l=wF(),[i,o]=H.useState([]),[d,c]=H.useState("");H.useEffect(()=>{s?.requirements&&o(s.requirements.map(b=>({...b,is_provided:typeof b.is_provided=="string"?b.is_provided==="1":!!b.is_provided,temp_id:b.id?String(b.id):Hh()})))},[s]);const a=()=>{d.trim()&&(o(b=>[...b,{temp_id:Hh(),requirement_text:d.trim(),is_provided:!1}]),c(""))},u=(b,y)=>{o(g=>g.map(w=>w.temp_id===b||w.id===b?{...w,requirement_text:y}:w))},h=b=>{o(y=>y.map(g=>g.temp_id===b||g.id===b?{...g,is_provided:!g.is_provided}:g))},f=b=>{o(y=>y.filter(g=>g.temp_id!==b&&g.id!==b))},m=()=>{if(s){const y=i.filter(g=>g.requirement_text.trim()!=="").map(g=>({id:g.id,requirement_text:g.requirement_text,is_provided:g.is_provided}));l.mutate({task_id:s.id,requirements:y},{onSuccess:n})}};return s?r.jsxs(Zt,{isOpen:!0,onClose:n,title:e("tasks.requirementsTitle",{taskName:s.task_name||e(`type.${s.type}`)}),children:[r.jsxs("div",{className:"mb-3",children:[i.length===0&&r.jsx("p",{className:"text-muted small",children:e("tasks.noRequirements")}),i.map(b=>r.jsxs("div",{className:"input-group mb-2",children:[r.jsx("div",{className:"input-group-text",children:r.jsx("input",{type:"checkbox",className:"form-check-input mt-0",checked:b.is_provided,onChange:()=>h(b.temp_id||b.id)})}),r.jsx("input",{type:"text",className:"form-control",value:b.requirement_text,onChange:y=>u(b.temp_id||b.id,y.target.value),placeholder:e("tasks.addRequirement")}),r.jsx("button",{type:"button",className:"btn btn-outline-danger",onClick:()=>f(b.temp_id||b.id),children:r.jsx(jm,{size:18})})]},b.temp_id||b.id))]}),r.jsxs("div",{className:"input-group mb-3",children:[r.jsx("input",{type:"text",className:"form-control",value:d,onChange:b=>c(b.target.value),placeholder:e("tasks.addRequirement"),onKeyPress:b=>{b.key==="Enter"&&(b.preventDefault(),a())}}),r.jsxs(Ne,{type:"button",variant:"primary",onClick:a,children:[r.jsx(rl,{size:16})," ",e("tasks.addRequirement")]})]}),r.jsxs("footer",{className:"modal-footer",children:[r.jsx(Ne,{type:"button",variant:"secondary",onClick:n,disabled:l.isPending,children:e("common.cancel")}),r.jsx(Ne,{type:"button",variant:"primary",onClick:m,isLoading:l.isPending,children:l.isPending?e("common.saving"):e("common.save")})]})]}):r.jsx("div",{children:"Error: Task not found."})},P5=({control:e,register:n,totalAmount:t})=>{const{fields:s,append:l,remove:i}=DI({control:e,name:"amount_details"}),o=Z6({control:e,name:"amount_details"}),c=(Array.isArray(o)?o:typeof o=="string"?(()=>{try{const u=JSON.parse(o);return Array.isArray(u)?u:[]}catch{return[]}})():[]).reduce((u,h)=>u+(Number(h?.amount)||0),0),a=t-c;return r.jsxs("div",{className:"mb-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("label",{className:"block text-sm font-medium text-foreground",children:"  ()"}),r.jsxs(Ne,{type:"button",variant:"outline-primary",size:"sm",onClick:()=>l({description:"",amount:""}),children:[r.jsx(rl,{size:16,className:"ml-1"}),"  "]})]}),s.length>0&&r.jsx("div",{className:"p-3 border border-border rounded-md bg-muted/50 mb-2",children:s.map((u,h)=>r.jsxs("div",{className:"flex gap-2 mb-2 items-center",children:[r.jsx("input",{...n(`amount_details.${h}.description`),className:"base-input",placeholder:`  ${h+1}`}),r.jsx("input",{...n(`amount_details.${h}.amount`,{valueAsNumber:!0}),type:"number",step:"0.01",className:"base-input",placeholder:"",style:{width:"120px"}}),r.jsx(Ne,{type:"button",variant:"danger",size:"sm",onClick:()=>i(h),children:r.jsx(jm,{size:16})})]},u.id))}),s.length>0&&r.jsxs("div",{className:"p-2 rounded-md text-sm bg-blue-50 border border-blue-200 text-blue-800",children:[" : ",t.toLocaleString()," |  : ",c.toLocaleString()," |  : ",r.jsx("span",{className:"font-bold",children:a.toLocaleString()})]})]})},LL=()=>{const{t:e}=qt(),n=et(x=>x.props),t=et(x=>x.closeModal),s=n.client,[l,i]=H.useState(0),[o,d]=H.useState(s||null),{register:c,handleSubmit:a,formState:{errors:u},setValue:h,watch:f,control:m}=Wn({defaultValues:{client_id:s?.id,amount_details:[]}}),b=rL(),y=["Government","RealEstate","Accounting","Other"],g=f("amount")||0,w=x=>{b.mutate({...x,amount:Number(x.amount)},{onSuccess:t})};return r.jsx(Zt,{isOpen:!0,onClose:t,title:e("receivables.addNewManual"),children:r.jsxs("form",{onSubmit:a(w),children:[l===0&&r.jsxs("div",{className:"task-type-step",children:[r.jsxs("div",{className:"text-center mb-4",children:[r.jsx("h5",{className:"mb-2",children:e("tasks.selectTaskType")}),r.jsx("p",{className:"text-muted small",children:e("tasks.selectTaskTypeDescription")})]}),r.jsx("div",{className:"type-selection-grid",children:r.jsx(an,{name:"type",control:m,rules:{required:!0},render:({field:x})=>r.jsx(r.Fragment,{children:y.map(_=>r.jsxs("div",{className:`type-card ${x.value===_?"selected":""}`,onClick:()=>{x.onChange(_),i(1)},children:[r.jsxs("div",{className:"type-icon",children:[_==="Government"&&r.jsx("i",{className:"fas fa-building"}),_==="RealEstate"&&r.jsx("i",{className:"fas fa-home"}),_==="Accounting"&&r.jsx("i",{className:"fas fa-calculator"}),_==="Other"&&r.jsx("i",{className:"fas fa-tasks"})]}),r.jsx("div",{className:"type-label",children:e(`receivables.type.${_}`)})]},_))})})}),u.type&&r.jsx("div",{className:"text-center text-danger small mt-2",children:e("common.required")}),r.jsx("div",{className:"modal-footer-compact",children:r.jsxs("div",{className:"footer-content",children:[r.jsx("div",{}),r.jsx("div",{className:"footer-right",children:r.jsx(Ne,{type:"button",variant:"secondary",size:"sm",onClick:t,children:e("common.cancel")})})]})})]}),l===1&&r.jsxs("div",{className:"client-selection-step",children:[r.jsx("div",{className:"selected-type-display mb-4",children:r.jsxs("div",{className:"d-flex align-items-center justify-content-center",children:[r.jsx("span",{className:"badge bg-primary me-2",children:""}),r.jsxs("span",{className:"text-muted small",children:[e("receivables.selectType"),":"]}),r.jsx("span",{className:"fw-bold ms-2",children:f("type")?e(`receivables.type.${f("type")}`):""})]})}),s?r.jsxs("div",{className:"text-center",children:[r.jsx("h5",{className:"mb-3",children:e("receivables.selectedClient")}),r.jsxs("div",{className:"client-card selected mx-auto",style:{maxWidth:"300px"},children:[r.jsxs("div",{className:"client-info",children:[r.jsx("div",{className:"client-name",children:s.name}),r.jsx("div",{className:"client-phone",children:s.phone})]}),r.jsx("div",{className:"selected-indicator",children:r.jsx("i",{className:"fas fa-check-circle text-success"})})]}),r.jsx(Ne,{variant:"primary",size:"sm",className:"mt-3",onClick:()=>{d(s),h("client_id",s.id),i(2)},children:e("common.continue")})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"text-center mb-4",children:[r.jsx("h5",{className:"mb-2",children:e("tasks.selectClient")}),r.jsx("p",{className:"text-muted small",children:e("tasks.selectClientDescription")})]}),r.jsx("div",{className:"client-search-container",children:r.jsx(Um,{label:"",onSelect:x=>{d(x),h("client_id",x.id),i(2)},disabled:!1})})]}),r.jsx(an,{name:"client_id",control:m,rules:{required:!0},render:({field:x})=>r.jsx("input",{type:"hidden",...x})}),u.client_id&&r.jsx("div",{className:"text-center text-danger small mt-2",children:e("common.required")}),r.jsx("div",{className:"modal-footer-compact",children:r.jsxs("div",{className:"footer-content",children:[r.jsx("div",{className:"footer-left",children:r.jsxs(Ne,{type:"button",variant:"secondary",size:"sm",onClick:()=>i(0),children:[r.jsx("i",{className:"fas fa-arrow-right me-1"}),e("common.back")]})}),r.jsx("div",{className:"footer-right",children:r.jsx(Ne,{type:"button",variant:"secondary",size:"sm",onClick:t,children:e("common.cancel")})})]})})]}),l===2&&r.jsxs("div",{children:[r.jsx("div",{className:"mb-4 p-3 bg-light rounded",children:r.jsxs("div",{className:"row",children:[r.jsxs("div",{className:"col-md-6",children:[r.jsx("label",{className:"form-label",children:e("receivables.selectedType")}),r.jsx(an,{name:"type",control:m,rules:{required:!0},render:({field:x})=>r.jsxs("select",{...x,className:`form-select ${u.type?"is-invalid":""}`,children:[r.jsx("option",{value:"",children:e("tasks.formTypeLabel")}),y.map(_=>r.jsx("option",{value:_,children:e(`receivables.type.${_}`)},_))]})}),u.type&&r.jsx("div",{className:"invalid-feedback",children:e("common.required")})]}),r.jsxs("div",{className:"col-md-6",children:[r.jsx("label",{className:"form-label",children:e("receivables.selectedClient")}),r.jsxs("div",{className:"form-control-plaintext",children:[r.jsx("strong",{children:o?.name}),r.jsx("small",{className:"d-block text-muted",children:o?.phone})]}),r.jsx("small",{className:"text-muted",children:r.jsx("button",{type:"button",className:"btn btn-link btn-sm p-0 text-decoration-none",onClick:()=>i(1),children:" "})})]})]})}),r.jsx(Kt,{label:e("receivables.tableHeaderDescription"),...c("description",{required:!0}),error:u.description&&e("common.required")}),r.jsx(Kt,{label:e("receivables.tableHeaderTotal"),type:"number",step:"0.01",...c("amount",{required:!0,valueAsNumber:!0,validate:x=>{const _=f("amount_details")?.reduce((j,R)=>j+(Number(R.amount)||0),0)||0;return x>=_||`          (${_})`}}),error:u.amount?u.amount.message||"Amount is required":void 0}),r.jsx(P5,{control:m,register:c,totalAmount:g}),r.jsxs("div",{className:"mb-3",children:[r.jsx("label",{className:"form-label",children:e("receivables.notes")}),r.jsx("textarea",{className:"form-control",rows:3,placeholder:e("receivables.notesPlaceholder"),...c("notes")})]}),r.jsx(Kt,{label:e("receivables.tableHeaderDueDate"),type:"date",...c("due_date",{required:!0}),error:u.due_date&&e("common.required")}),r.jsx("div",{className:"modal-footer-compact",children:r.jsxs("div",{className:"footer-content",children:[r.jsx("div",{className:"footer-left",children:r.jsxs(Ne,{type:"button",variant:"secondary",size:"sm",onClick:()=>i(1),disabled:b.isPending,children:[r.jsx("i",{className:"fas fa-arrow-right me-1"}),e("common.back")]})}),r.jsxs("div",{className:"footer-right",children:[r.jsx(Ne,{type:"button",variant:"secondary",size:"sm",onClick:t,disabled:b.isPending,className:"me-2",children:e("common.cancel")}),r.jsx(Ne,{type:"submit",variant:"primary",size:"sm",isLoading:b.isPending,children:b.isPending?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"}),e("common.saving")]}):r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fas fa-save me-1"}),e("common.save")]})})]})]})})]}),r.jsx("style",{children:`
          .task-type-step {
            padding: 1rem 0;
          }
          .type-selection-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-bottom: 1rem;
          }
          .type-card {
            padding: 1.5rem 1rem;
            border: 2px solid #e9ecef;
            border-radius: 0.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
            background: white;
          }
          .type-card:hover {
            border-color: #007bff;
            box-shadow: 0 2px 8px rgba(0,123,255,0.15);
            transform: translateY(-2px);
          }
          .type-card.selected {
            border-color: #007bff;
            background-color: #e7f3ff;
            color: #007bff;
          }
          .type-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
            color: #6c757d;
          }
          .type-card.selected .type-icon {
            color: #007bff;
          }
          .type-label {
            font-weight: 500;
            font-size: 0.9rem;
          }
          @media (max-width: 576px) {
            .type-selection-grid {
              grid-template-columns: 1fr;
            }
          }
          .client-selection-step {
            padding: 1rem 0;
          }
          .selected-type-display {
            padding: 0.75rem;
            background-color: #f8f9fa;
            border-radius: 0.375rem;
            border: 1px solid #e9ecef;
          }
          .preselected-client {
            margin-bottom: 1rem;
          }
          .client-card {
            padding: 1rem;
            border: 2px solid #e9ecef;
            border-radius: 0.5rem;
            background: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
          }
          .client-card.selected {
            border-color: #28a745;
            background-color: #f8fff9;
          }
          .client-info {
            flex: 1;
          }
          .client-name {
            font-weight: 600;
            font-size: 1rem;
            color: #495057;
          }
          .client-phone {
            font-size: 0.875rem;
            color: #6c757d;
            margin-top: 0.25rem;
          }
          .selected-indicator {
            font-size: 1.25rem;
          }
          .client-search-container {
            padding: 0 1rem;
          }
          .modal-footer-compact {
            border-top: 1px solid #e9ecef;
            padding: 0.75rem 1rem;
            background-color: #f8f9fa;
            border-radius: 0 0 0.375rem 0.375rem;
            margin: 0 -1rem -1rem -1rem;
          }
          .footer-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
          }
          .footer-left,
          .footer-right {
            display: flex;
            align-items: center;
          }
          .spinner-border-sm {
            width: 1rem;
            height: 1rem;
          }
        `})]})})},zL=({receivables:e,isLoading:n,onSettlePayment:t})=>{const{t:s}=qt(),l=et(h=>h.openModal),[i,o]=H.useState(new Set);if(n)return r.jsx("div",{className:"d-flex justify-content-center align-items-center p-5",children:r.jsx("div",{className:"spinner-border text-primary",role:"status",children:r.jsx("span",{className:"visually-hidden",children:"Loading..."})})});if(!e.length)return r.jsxs("div",{className:"text-center p-5 text-muted",children:[r.jsx(Sn,{size:48,className:"mb-3 opacity-50"}),r.jsx("p",{className:"mb-0",children:s("receivables.noReceivables")})]});const d=h=>{const f=new Set(i);i.has(h)?f.delete(h):f.add(h),o(f)},c=h=>{const f={Accounting:"badge bg-warning text-dark fw-semibold",RealEstate:"badge bg-success text-white fw-semibold",Government:"badge bg-primary text-white fw-semibold",Other:"badge bg-secondary text-white fw-semibold"},m={Accounting:"",RealEstate:"",Government:"",Other:""};return r.jsx("span",{className:f[h]||f.Other,children:m[h]||m.Other})},a=h=>new Intl.NumberFormat("en-US",{style:"currency",currency:"SAR",minimumFractionDigits:2}).format(h),u={totalDebit:e.reduce((h,f)=>h+f.debit,0),totalCredit:e.reduce((h,f)=>h+f.credit,0),totalNet:e.length>0?e[e.length-1].balance:0};return r.jsxs("div",{className:"receivables-table-container",children:[r.jsx("div",{className:"card border-0 shadow-sm",children:r.jsx("div",{className:"card-body p-0",children:r.jsx("div",{className:"table-responsive",children:r.jsxs("table",{className:"table table-hover mb-0 receivables-table",children:[r.jsx("thead",{children:r.jsxs("tr",{style:{backgroundColor:"var(--color-primary)",color:"white"},children:[r.jsx("th",{className:"text-center py-3",style:{width:"40px"}}),r.jsx("th",{className:"text-center py-3",children:""}),r.jsx("th",{className:"text-center py-3",children:""}),r.jsx("th",{className:"text-center py-3",children:""}),r.jsx("th",{className:"text-center py-3",children:""}),r.jsx("th",{className:"text-center py-3",children:""}),r.jsx("th",{className:"text-center py-3",children:" "}),r.jsx("th",{className:"text-center py-3",children:""})]})}),r.jsx("tbody",{children:e.map(h=>r.jsxs(De.Fragment,{children:[r.jsxs("tr",{className:"receivable-row",style:{cursor:h.payments&&h.payments.length>0?"pointer":"default"},onClick:()=>h.payments&&h.payments.length>0&&d(h.id),children:[r.jsx("td",{className:"text-center align-middle",children:h.payments&&h.payments.length>0?i.has(h.id)?r.jsx(mc,{size:16}):r.jsx(Gs,{size:16}):null}),r.jsx("td",{className:"fw-medium",children:h.description}),r.jsx("td",{className:"text-center",children:c(h.type)}),r.jsx("td",{className:"text-center",children:r.jsx("span",{className:"text-danger fw-semibold",children:h.debit>0?a(h.debit):""})}),r.jsx("td",{className:"text-center",children:r.jsx("span",{className:"text-success fw-semibold",children:h.credit>0?a(h.credit):""})}),r.jsx("td",{className:"text-center",children:r.jsx("span",{className:"fw-bold",style:{color:"var(--color-primary)"},children:a(h.balance)})}),r.jsx("td",{className:"text-center small",children:Zr(h.date)}),r.jsxs("td",{className:"text-center",children:[t&&(h.remaining_amount??0)>0&&r.jsxs(Ne,{variant:"primary",size:"sm",onClick:f=>{f.stopPropagation(),t({id:h.receivable_id})},children:[r.jsx(gs,{size:14})," "]}),(h.remaining_amount??0)<=0&&h.debit>0&&r.jsx("span",{className:"badge bg-success text-white small",children:""})]})]}),i.has(h.id)&&h.payments&&h.payments.length>0&&r.jsx("tr",{className:"payment-details-row",children:r.jsx("td",{colSpan:8,className:"p-0",children:r.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"1rem"},children:[r.jsx("div",{className:"small text-muted mb-2 fw-medium",children:" :"}),r.jsxs("table",{className:"table table-sm bg-white mb-0",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-center",children:""}),r.jsx("th",{className:"text-center",children:""}),r.jsx("th",{className:"text-center",children:""}),r.jsx("th",{className:"text-center",children:""})]})}),r.jsx("tbody",{children:h.payments.map(f=>r.jsxs("tr",{children:[r.jsx("td",{className:"text-center text-success",children:a(f.amount)}),r.jsx("td",{className:"text-center",children:Zr(f.paid_at)}),r.jsx("td",{className:"text-center",children:f.payment_method?.name_ar||" "}),r.jsxs("td",{className:"text-center",children:[r.jsx(Ne,{variant:"secondary",size:"sm",className:"me-1",onClick:m=>{m.stopPropagation(),l("paymentEdit",{payment:f,receivable:{id:h.receivable_id}})},title:"",children:r.jsx(ui,{size:14})}),r.jsx(Ne,{variant:"danger",size:"sm",onClick:m=>{m.stopPropagation(),l("paymentDelete",{payment:f})},title:"",children:r.jsx(Is,{size:14})})]})]},f.id))})]})]})})})]},h.id))})]})})})}),r.jsx("div",{className:"card border-0 shadow-sm mt-2",children:r.jsx("div",{className:"card-body p-2",children:r.jsxs("div",{className:"row text-center",children:[r.jsx("div",{className:"col-md-4",children:r.jsxs("div",{className:"d-flex justify-content-between align-items-center p-2 bg-light rounded",children:[r.jsx("span",{className:"text-muted small",children:" :"}),r.jsx("span",{className:"fw-bold text-danger",children:a(u.totalDebit)})]})}),r.jsx("div",{className:"col-md-4",children:r.jsxs("div",{className:"d-flex justify-content-between align-items-center p-2 bg-light rounded",children:[r.jsx("span",{className:"text-muted small",children:" :"}),r.jsx("span",{className:"fw-bold text-success",children:a(u.totalCredit)})]})}),r.jsx("div",{className:"col-md-4",children:r.jsxs("div",{className:"d-flex justify-content-between align-items-center p-2 bg-primary text-white rounded",children:[r.jsx("span",{className:"small",children:" :"}),r.jsx("span",{className:"fw-bold",children:a(u.totalNet)})]})})]})})}),r.jsx("style",{children:`
        .receivable-row:hover { background-color: #f8f9fa ; }
        .cursor-pointer { cursor: pointer; }
      `})]})},BL=({isOpen:e,onClose:n,clientId:t})=>{const s=et(m=>m.openModal),[l,i]=H.useState(null);H.useEffect(()=>{const m=b=>{b.key==="Escape"&&n()};if(e)return document.addEventListener("keydown",m),()=>document.removeEventListener("keydown",m)},[e,n]);const{data:o,isLoading:d}=aL(t),c=o?.receivables||[],a=c.find(m=>m.id===l);H.useEffect(()=>{e||i(null)},[e]);const u=m=>{i(m)},h=()=>{a&&(n(),s("paymentForm",{receivable:a}))},f=m=>{const b=Number(m)||0;return new Intl.NumberFormat("en-US",{style:"currency",currency:"SAR",minimumFractionDigits:2}).format(b)};return e?r.jsx(Zt,{isOpen:e,onClose:n,title:"  ",children:r.jsxs("div",{className:"space-y-4",children:[d?r.jsx("div",{className:"text-center py-4",children:r.jsx("div",{className:"inline-block animate-spin text-primary",children:r.jsx("div",{className:"h-6 w-6 border-3 border-primary border-t-transparent rounded-full"})})}):c.length===0?r.jsx("div",{className:"text-center text-muted-foreground py-4",children:r.jsx("p",{children:"      "})}):r.jsxs("div",{className:"space-y-3",children:[r.jsx("p",{className:"text-sm text-black",children:"     :"}),r.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:c.map(m=>r.jsx("div",{className:`p-4 rounded-lg border cursor-pointer transition-colors ${l===m.id?"border-primary bg-primary/5":"border-border hover:bg-muted/50"}`,onClick:()=>u(Number(m.id)),children:r.jsxs("div",{className:"flex justify-between items-start gap-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h6",{className:"font-semibold text-black text-sm",children:m.description}),r.jsxs("small",{className:"text-muted-foreground text-xs",children:[" : ",Zr(m.due_date)]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"font-semibold text-destructive text-sm",children:f(m.amount)}),r.jsxs("small",{className:"text-green-600 text-xs block",children:[": ",f(m.total_paid||0)]}),r.jsxs("div",{className:"font-semibold text-primary text-sm",children:[": ",f((m.amount||0)-(m.total_paid||0))]})]})]})},m.id))})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t border-border",children:[r.jsx(Ne,{variant:"secondary",onClick:n,children:""}),r.jsxs(Ne,{variant:"primary",onClick:h,disabled:!l,children:[r.jsx(gs,{size:16,className:"mr-2"})," "]})]})]})}):null},qL=async()=>{const{data:e}=await Xe.get("/tags");if(!e.success)throw new Error(e.message||"Failed to fetch tags.");return e.data},$L=async e=>{const{data:n}=await Xe.post("/tags",e);if(!n.success)throw new Error(n.message||"Failed to create tag.");return n.data},UL=async({id:e,payload:n})=>{const{data:t}=await Xe.put(`/tags/${e}`,n);if(!t.success)throw new Error(t.message||"Failed to update tag.");return t.data},HL=async e=>{const{data:n}=await Xe.delete(`/tags/${e}`);if(!n.success)throw new Error(n.message||"Failed to delete tag.")},I5=()=>or({queryKey:["tags"],queryFn:qL,staleTime:300*1e3}),VL=()=>{const e=Nt();return Et({mutationFn:$L,onSuccess:()=>{e.invalidateQueries({queryKey:["tags"]}),e.invalidateQueries({queryKey:["tasks-by-tags"]})}})},KL=()=>{const e=Nt();return Et({mutationFn:UL,onSuccess:()=>{e.invalidateQueries({queryKey:["tags"]}),e.invalidateQueries({queryKey:["tasks-by-tags"]})}})},WL=()=>{const e=Nt();return Et({mutationFn:HL,onSuccess:()=>{e.invalidateQueries({queryKey:["tags"]}),e.invalidateQueries({queryKey:["tasks-by-tags"]})}})},QL=()=>{const e=et(g=>g.isOpen),n=et(g=>g.modalType),t=et(g=>g.props),s=et(g=>g.closeModal),{success:l,error:i}=ir(),[o,d]=H.useState({name:"",color:"#d4af37"}),c=e&&n==="tagForm",a=t?.tagToEdit,u=!!a;H.useEffect(()=>{const g=w=>{w.key==="Escape"&&s()};if(c)return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[c,s]);const h=VL(),f=KL(),m=h.isPending||f.isPending;H.useEffect(()=>{c&&d(u&&a?{name:a.name,color:a.color}:{name:"",color:"#d4af37"})},[c,u,a]);const b=(g,w)=>{d(x=>({...x,[g]:w}))},y=g=>{if(g.preventDefault(),!o.name.trim()){i("","  ");return}const w={name:o.name.trim(),color:o.color};u&&a?f.mutate({id:a.id,payload:w},{onSuccess:()=>{l(" ","   "),s()},onError:x=>i("  ",x.message||"  .")}):h.mutate(w,{onSuccess:()=>{l(" ","   "),s()},onError:x=>i("  ",x.message||"  .")})};return c?r.jsx(Zt,{isOpen:c,onClose:s,title:u?" ":"  ",children:r.jsxs("form",{onSubmit:y,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{htmlFor:"tagName",className:"font-semibold text-black text-sm block",children:["  ",r.jsx("span",{className:"text-destructive",children:"*"})]}),r.jsx("input",{type:"text",id:"tagName",className:"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary",value:o.name,onChange:g=>b("name",g.target.value),placeholder:"  ",required:!0,disabled:m||u&&a?.is_system}),u&&a?.is_system&&r.jsx("div",{className:"text-xs text-yellow-600",children:"     ."})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"tagColor",className:"font-semibold text-black text-sm block",children:" "}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("input",{type:"color",id:"tagColor",className:"w-16 h-10 border border-border rounded-md cursor-pointer",value:o.color,onChange:g=>b("color",g.target.value),disabled:m}),r.jsx("input",{type:"text",className:"flex-1 px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary font-mono text-sm",value:o.color,onChange:g=>b("color",g.target.value),placeholder:"#d4af37",pattern:"^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$",disabled:m})]})]}),r.jsx("div",{className:"space-y-2",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-semibold text-black text-sm",children:":"}),r.jsx("span",{className:"px-3 py-1 rounded-full text-white text-sm font-semibold",style:{backgroundColor:o.color,textShadow:"1px 1px 2px rgba(0,0,0,0.3)"},children:o.name||" "})]})}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t border-border",children:[r.jsx(Ne,{type:"button",variant:"secondary",onClick:s,disabled:m,children:""}),r.jsx(Ne,{type:"submit",variant:"primary",isLoading:m,disabled:!o.name.trim(),children:u?"":""})]})]})}):null},GL=()=>{const e=et(m=>m.isOpen),n=et(m=>m.modalType),t=et(m=>m.closeModal),s=et(m=>m.openModal),{success:l,error:i}=ir(),{data:o=[],isLoading:d}=I5(),c=WL(),a=e&&n==="tagManagement";H.useEffect(()=>{const m=b=>{b.key==="Escape"&&t()};if(a)return document.addEventListener("keydown",m),()=>document.removeEventListener("keydown",m)},[a,t]);const u=()=>s("tagForm",{}),h=m=>s("tagForm",{tagToEdit:m}),f=m=>{if(m.is_system){i("  ","    .");return}s("confirmDelete",{title:" ",message:`      "${m.name}"`,onConfirm:()=>{c.mutate(m.id,{onSuccess:()=>l(" ","   ."),onError:b=>i("",b.message||"  .")})}})};return a?r.jsx("div",{className:"modal show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:r.jsx("div",{className:"modal-dialog modal-lg modal-dialog-centered",onClick:m=>m.stopPropagation(),children:r.jsxs("div",{className:"modal-content",children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h5",{className:"modal-title",children:" "}),r.jsx("button",{type:"button",className:"btn-close",onClick:t})]}),r.jsxs("div",{className:"modal-body",children:[r.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[r.jsx("h6",{className:"mb-0",children:" "}),r.jsxs(Ne,{onClick:u,size:"sm",children:[r.jsx(hn,{size:16,className:"me-2"})," "]})]}),d?r.jsx("div",{className:"text-center py-4",children:r.jsx("div",{className:"loading-spinner"})}):o.length===0?r.jsxs("div",{className:"text-center py-4",children:[r.jsx("div",{className:"empty-icon mb-3",children:r.jsx("i",{className:"fas fa-tags fa-3x text-gray-400"})}),r.jsx("p",{className:"empty-description text-muted mb-0",children:"    "})]}):r.jsx("div",{className:"table-responsive",children:r.jsxs("table",{className:"table table-hover mb-0",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:" "}),r.jsx("th",{children:""}),r.jsx("th",{children:""}),r.jsx("th",{children:" "}),r.jsx("th",{className:"text-end",children:""})]})}),r.jsx("tbody",{children:o.map(m=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx("span",{className:"badge",style:{backgroundColor:m.color,color:"#fff",textShadow:"1px 1px 2px rgba(0,0,0,0.3)"},children:m.name})}),r.jsx("td",{children:r.jsxs("div",{className:"d-flex align-items-center",children:[r.jsx("div",{className:"color-preview me-2",style:{width:"20px",height:"20px",backgroundColor:m.color,borderRadius:"4px",border:"1px solid #dee2e6"}}),r.jsx("span",{className:"font-monospace",children:m.color})]})}),r.jsx("td",{children:r.jsx("span",{className:`badge ${m.is_system?"bg-warning":"bg-info"}`,children:m.is_system?"":""})}),r.jsx("td",{children:Zr(m.created_at)}),r.jsxs("td",{className:"text-end",children:[r.jsx(Ne,{size:"sm",variant:"outline-primary",onClick:()=>h(m),className:"me-2",title:"",children:r.jsx(Sm,{size:16})}),!m.is_system&&r.jsx(Ne,{size:"sm",variant:"danger",onClick:()=>f(m),title:"",isLoading:c.isPending&&c.variables===m.id,children:r.jsx(Is,{size:16})})]})]},m.id))})]})})]}),r.jsx("div",{className:"modal-footer",children:r.jsx(Ne,{variant:"secondary",onClick:t,children:""})})]})})}):null},XL=async e=>{const{data:n}=await Xe.get(`/payments/${e}`);if(!n.success)throw new Error(n.message||"Failed to fetch payment.");return n.data},YL=async()=>{const{data:e}=await Xe.get("/payments/methods",{params:{language:"ar"}});if(!e.success)throw new Error(e.message||"Failed to fetch payment methods.");return e.data},ZL=async e=>{const{data:n}=await Xe.post("/payments",e);if(!n.success)throw new Error(n.message||"Failed to create payment.");return n.data},JL=async({id:e,...n})=>{const{data:t}=await Xe.put(`/payments/${e}`,n);if(!t.success)throw new Error(t.message||"Failed to update payment.");return t.data},ez=async e=>{const{data:n}=await Xe.delete(`/payments/${e}`);if(!n.success)throw new Error(n.message||"Failed to delete payment.")},tz=async e=>{const{data:n}=await Xe.get(`/payments/receivable/${e}`);if(!n.success)throw new Error(n.message||"Failed to fetch payments for receivable.");return n.data},rz=e=>or({queryKey:["payment",e],queryFn:()=>XL(e),enabled:!!e}),sl=()=>or({queryKey:["paymentMethods"],queryFn:YL,staleTime:1/0,refetchOnWindowFocus:!1,refetchOnMount:!1}),nz=()=>{const e=Nt();return Et({mutationFn:ZL,onSuccess:n=>{e.invalidateQueries({queryKey:["receivables"]}),e.invalidateQueries({queryKey:["clients"]}),e.invalidateQueries({queryKey:["tasks"]}),e.invalidateQueries({queryKey:["dashboard"]}),e.invalidateQueries({queryKey:["payments",n.receivable_id]}),e.invalidateQueries({queryKey:["receivables","client",n.client_id]}),e.invalidateQueries({queryKey:["employee"]}),e.invalidateQueries({queryKey:["employees"]})}})},F5=()=>{const e=Nt();return Et({mutationFn:JL,onSuccess:n=>{e.invalidateQueries({queryKey:["receivables"]}),e.invalidateQueries({queryKey:["clients"]}),e.invalidateQueries({queryKey:["tasks"]}),e.invalidateQueries({queryKey:["dashboard"]}),e.invalidateQueries({queryKey:["payments",n.receivable_id]}),e.invalidateQueries({queryKey:["receivables","client",n.client_id]}),e.invalidateQueries({queryKey:["employee"]}),e.invalidateQueries({queryKey:["employees"]})}})},sz=()=>{const e=Nt();return Et({mutationFn:ez,onSuccess:n=>{e.invalidateQueries({queryKey:["receivables"]}),e.invalidateQueries({queryKey:["clients"]}),e.invalidateQueries({queryKey:["tasks"]}),e.invalidateQueries({queryKey:["dashboard"]}),e.invalidateQueries({queryKey:["payments"]}),e.invalidateQueries({queryKey:["receivables","client"]}),e.invalidateQueries({queryKey:["employee"]}),e.invalidateQueries({queryKey:["employees"]})}})},L5=(e,n)=>or({queryKey:["payments",e],queryFn:()=>tz(e),enabled:!!e,staleTime:0,initialData:n}),az=async e=>{const{data:n}=await Xe.get(`/clients/${e}/credits`);return n.data},iz=async e=>{const{client_id:n,...t}=e,{data:s}=await Xe.post(`/clients/${n}/credits`,t);return s.data},oz=async({id:e,amount:n})=>{const{data:t}=await Xe.put(`/credits/${e}`,{amount:n});return t.data},lz=async e=>{const{data:n}=await Xe.delete(`/credits/${e}`);return n.data},cz=async({id:e,new_amount:n,allocation_adjustments:t})=>{const{data:s}=await Xe.post(`/credits/${e}/resolve-reduction`,{new_amount:n,allocation_adjustments:t});return s.data},dz=async({id:e,allocation_resolutions:n})=>{const{data:t}=await Xe.post(`/credits/${e}/resolve-deletion`,{allocation_resolutions:n});return t.data},uz=async e=>{const{data:n}=await Xe.post(`/receivables/${e.receivableId}/apply-credit`,{amount:e.amount});return n.data},fz=async e=>{const{data:n}=await Xe.post(`/payments/${e}/replace-with-credit`);return n.data},yc=e=>or({queryKey:["clientCredits",e],queryFn:()=>az(e),enabled:!!e}),hz=()=>{const e=Nt();return Et({mutationFn:iz,onSuccess:n=>{e.invalidateQueries({queryKey:["clientCredits",n.client_id]}),e.invalidateQueries({queryKey:["clients"]}),e.invalidateQueries({queryKey:["account","client",n.client_id]}),e.invalidateQueries({queryKey:["account","clients"]}),e.invalidateQueries({queryKey:["employee"]}),e.invalidateQueries({queryKey:["employees"]})}})},mz=()=>{const e=Nt();return Et({mutationFn:oz,onSuccess:n=>{e.invalidateQueries({queryKey:["clientCredits",n.client_id]}),e.invalidateQueries({queryKey:["clients"]}),e.invalidateQueries({queryKey:["account","client",n.client_id]}),e.invalidateQueries({queryKey:["account","clients"]}),e.invalidateQueries({queryKey:["employee"]}),e.invalidateQueries({queryKey:["employees"]})}})},pz=()=>{const e=Nt();return Et({mutationFn:lz,onSuccess:n=>{e.invalidateQueries({queryKey:["clientCredits"]}),e.invalidateQueries({queryKey:["clients"]}),e.invalidateQueries({queryKey:["account"]}),e.invalidateQueries({queryKey:["employee"]}),e.invalidateQueries({queryKey:["employees"]})}})},gz=()=>{const e=Nt();return Et({mutationFn:cz,onSuccess:n=>{e.invalidateQueries({queryKey:["clientCredits",n.client_id]}),e.invalidateQueries({queryKey:["clients"]}),e.invalidateQueries({queryKey:["receivables"]}),e.invalidateQueries({queryKey:["invoices"]}),e.invalidateQueries({queryKey:["account","client",n.client_id]}),e.invalidateQueries({queryKey:["account","clients"]}),e.invalidateQueries({queryKey:["employee"]}),e.invalidateQueries({queryKey:["employees"]})}})},bz=()=>{const e=Nt();return Et({mutationFn:dz,onSuccess:n=>{e.invalidateQueries({queryKey:["clientCredits"]}),e.invalidateQueries({queryKey:["clients"]}),e.invalidateQueries({queryKey:["receivables"]}),e.invalidateQueries({queryKey:["invoices"]}),e.invalidateQueries({queryKey:["account"]}),e.invalidateQueries({queryKey:["employee"]}),e.invalidateQueries({queryKey:["employees"]})}})},yz=()=>{const e=Nt();return Et({mutationFn:uz,onSuccess:n=>{e.invalidateQueries({queryKey:["receivables"]}),e.invalidateQueries({queryKey:["clients"]}),e.invalidateQueries({queryKey:["clientCredits"]}),e.invalidateQueries({queryKey:["invoices"]}),e.invalidateQueries({queryKey:["account"]}),e.invalidateQueries({queryKey:["employee"]}),e.invalidateQueries({queryKey:["employees"]})}})},xz=()=>{const e=Nt();return Et({mutationFn:fz,onSuccess:()=>{e.invalidateQueries({queryKey:["receivables"]}),e.invalidateQueries({queryKey:["clients"]}),e.invalidateQueries({queryKey:["clientCredits"]}),e.invalidateQueries({queryKey:["payments"]}),e.invalidateQueries({queryKey:["invoices"]}),e.invalidateQueries({queryKey:["account"]}),e.invalidateQueries({queryKey:["employee"]}),e.invalidateQueries({queryKey:["employees"]})}})},vz=()=>{const{t:e}=qt(),n=et(I=>I.closeModal),t=et(I=>I.openModal),s=et(I=>I.props),{receivable:l,isRequired:i=!1}=s,{data:o,isLoading:d}=sl(),{data:c,isLoading:a}=L5(Number(l.id)),u=nz(),h=F5(),f=xz(),{data:m}=yc(Number(l.client_id)),b=m?.balance||0,y=i,{register:g,handleSubmit:w,control:x,formState:{errors:_}}=Wn({defaultValues:{receivable_id:Number(l.id),amount:i?l.amount:l.remaining_amount,paid_at:new Date().toISOString().split("T")[0],note:i?`  : ${l.description}`:""}}),j=I=>{if(y&&c&&c.length>0){const F=c[0];h.mutate({id:F.id,...I,amount:Number(I.amount),receivable_id:Number(l.id)},{onSuccess:n})}else u.mutate({...I,amount:Number(I.amount),receivable_id:Number(l.id)},{onSuccess:n})},R=()=>{i||n()},M=()=>{if(y&&c&&c.length>0){const I=c[0];f.mutate(I.id,{onSuccess:()=>{n()}})}else n(),t("applyCreditModal",{receivable:l,availableCredit:b})};return r.jsxs(Zt,{isOpen:!0,onClose:R,title:i?`  : ${l.description}`:e("payments.settleTitle",{description:l.description}),children:[i&&r.jsxs("div",{className:"alert alert-warning mb-3",children:[r.jsx("strong",{children:e("payments.paymentRequired")}),r.jsx("p",{className:"mb-0",children:e("payments.paymentRequiredMessage")}),r.jsxs("small",{className:"text-muted",children:[" : ",l.amount," "]})]}),r.jsxs("form",{onSubmit:w(j),children:[b>0&&r.jsxs("div",{className:`alert d-flex justify-content-between align-items-center ${y&&b>=l.amount?"alert-success":y&&b<l.amount?"alert-warning":"alert-success"}`,children:[r.jsxs("span",{children:["   : ",r.jsxs("strong",{children:[b.toLocaleString()," "]}),y&&r.jsxs(r.Fragment,{children:[r.jsx("br",{}),r.jsx("small",{children:b>=l.amount?"    ":`   -  ${l.amount.toLocaleString()} `})]})]}),(!i||y&&b>=l.amount)&&r.jsx(Ne,{type:"button",variant:"secondary",size:"sm",onClick:M,disabled:y&&b<l.amount,children:"  "})]}),r.jsx(Kt,{label:`${e("payments.amountLabel")}${i?" ( )":""}`,type:"number",step:"0.01",max:i?l.amount:l.remaining_amount,readOnly:i,...g("amount",{required:!0,valueAsNumber:!0,max:i?l.amount:l.remaining_amount}),error:_.amount?"Amount is required and cannot exceed remaining balance.":void 0}),r.jsxs("div",{className:"mb-3",children:[r.jsx("label",{className:"form-label",children:e("payments.methodLabel")}),r.jsx(an,{name:"payment_method_id",control:x,rules:{required:!0},render:({field:I})=>r.jsxs("select",{...I,className:`form-select ${_.payment_method_id?"is-invalid":""}`,disabled:d||a,children:[r.jsx("option",{value:"",children:e("payments.selectMethod")}),o?.map(F=>r.jsx("option",{value:F.id,children:F.name},F.id))]})}),_.payment_method_id&&r.jsx("div",{className:"invalid-feedback d-block",children:"Required"})]}),r.jsx(Kt,{label:e("payments.dateLabel"),type:"date",...g("paid_at",{required:!0}),error:_.paid_at&&"Required"}),r.jsx(Kt,{label:`${e("payments.notesLabel")}`,...g("note")}),r.jsxs("footer",{className:"modal-footer",children:[!i&&r.jsx(Ne,{type:"button",variant:"secondary",onClick:R,disabled:u.isPending||h.isPending||a,children:e("common.cancel")}),r.jsx(Ne,{type:"submit",isLoading:u.isPending||h.isPending||a,children:e(i?"payments.payNow":"common.save")})]})]}),i&&r.jsx("style",{children:`
          .form-control[readonly] {
            background-color: #f8f9fa;
            border-color: #6c757d;
            color: #495057;
            cursor: not-allowed;
          }
          
          .alert-warning {
            border-left: 4px solid #ffc107;
          }
        `})]})},wz=()=>{const{t:e}=qt(),n=et(i=>i.closeModal),t=et(i=>i.props),{receivable:s}=t,{data:l}=L5(s.id,s.payments);return r.jsxs(Zt,{isOpen:!0,onClose:n,title:e("payments.historyTitle",{description:s.description}),children:[!l?.length&&r.jsx("p",{className:"text-center text-muted",children:e("payments.noPayments")}),l&&l.length>0&&r.jsx("div",{className:"table-responsive",children:r.jsxs("table",{className:"table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:e("payments.tableHeaderAmount")}),r.jsx("th",{children:e("payments.tableHeaderMethod")}),r.jsx("th",{children:e("payments.tableHeaderDate")}),r.jsx("th",{children:e("payments.tableHeaderNotes")})]})}),r.jsx("tbody",{children:l.map(i=>r.jsxs("tr",{children:[r.jsx("td",{children:i.amount}),r.jsx("td",{children:i.payment_method?.name_ar||"N/A"}),r.jsx("td",{children:i.paid_at}),r.jsx("td",{children:i.note||"-"})]},i.id))})]})}),r.jsx("footer",{className:"modal-footer",children:r.jsx(Ne,{type:"button",variant:"secondary",onClick:n,children:e("common.close")})})]})},_z=()=>{const{t:e}=qt(),n=et(w=>w.closeModal),t=et(w=>w.openModal),s=et(w=>w.props),{payment:l,receivable:i}=s,{data:o,isLoading:d}=sl(),c=F5(),{data:a}=yc(Number(i.client_id)),u=a?.balance||0,{register:h,handleSubmit:f,control:m,formState:{errors:b}}=Wn({defaultValues:{amount:l.amount,payment_method_id:l.payment_method_id,paid_at:l.paid_at?.split("T")[0]||new Date().toISOString().split("T")[0],note:l.note||""}}),y=w=>{c.mutate({id:l.id,...w,amount:Number(w.amount)},{onSuccess:n})},g=()=>{n(),t("applyCreditModal",{receivable:i,availableCredit:u,paymentToReplace:l})};return r.jsx(Zt,{isOpen:!0,onClose:n,title:e("payments.editPayment"),children:r.jsxs("form",{onSubmit:f(y),children:[u>0&&r.jsxs("div",{className:"alert alert-success d-flex justify-content-between align-items-center",children:[r.jsxs("span",{children:["   : ",r.jsxs("strong",{children:[u.toLocaleString()," "]})]}),r.jsx(Ne,{type:"button",variant:"secondary",size:"sm",onClick:g,children:"  "})]}),r.jsx(Kt,{label:e("payments.amountLabel"),type:"number",step:"0.01",max:i.remaining_amount+l.amount,...h("amount",{required:!0,valueAsNumber:!0,max:i.remaining_amount+l.amount}),error:b.amount?"Amount is required and cannot exceed remaining balance.":void 0}),r.jsxs("div",{className:"mb-3",children:[r.jsx("label",{className:"form-label",children:e("payments.methodLabel")}),r.jsx(an,{name:"payment_method_id",control:m,rules:{required:!0},render:({field:w})=>r.jsxs("select",{...w,value:w.value?.toString()||"",className:`form-select ${b.payment_method_id?"is-invalid":""}`,disabled:d,children:[r.jsx("option",{value:"",children:e("payments.selectMethod")}),o?.map(x=>r.jsx("option",{value:x.id,children:x.name},x.id))]})}),b.payment_method_id&&r.jsx("div",{className:"invalid-feedback d-block",children:"Required"})]}),r.jsx(Kt,{label:e("payments.dateLabel"),type:"date",...h("paid_at",{required:!0}),error:b.paid_at&&"Required"}),r.jsx(Kt,{label:e("payments.notesLabel"),...h("note")}),r.jsxs("footer",{className:"modal-footer",children:[r.jsx(Ne,{type:"button",variant:"secondary",onClick:n,disabled:c.isPending,children:e("common.cancel")}),r.jsx(Ne,{type:"submit",isLoading:c.isPending,children:e("common.save")})]})]})})},jz=()=>{const{t:e}=qt(),n=et(a=>a.closeModal),t=et(a=>a.props),{payment:s}=t,{data:l,isLoading:i}=rz(s.id),o=l?.receivable?.description||"",d=sz(),c=()=>{d.mutate(s.id,{onSuccess:n})};return r.jsx(Zt,{isOpen:!0,onClose:n,title:e("payments.deletePayment"),children:i?r.jsx("div",{className:"text-center text-muted-foreground py-8",children:e("common.loading")}):r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"text-center space-y-2",children:[r.jsx(On,{className:"h-12 w-12 text-yellow-600 mx-auto"}),r.jsx("h5",{className:"text-lg font-semibold text-black",children:e("payments.confirmDeletePayment")}),r.jsx("p",{className:"text-muted-foreground text-sm",children:e("payments.deletePaymentMessage",{amount:s.amount,description:o})})]}),r.jsxs("div",{className:"rounded-lg border border-yellow-600 bg-yellow-50 p-3 flex gap-3",children:[r.jsx(On,{className:"text-yellow-600 flex-shrink-0 mt-0.5 h-5 w-5"}),r.jsxs("div",{children:[r.jsxs("p",{className:"font-medium text-yellow-900 text-sm",children:[e("common.warning"),":"]}),r.jsx("p",{className:"text-yellow-800 text-sm",children:e("payments.deletePaymentWarning")})]})]}),r.jsxs("div",{className:"flex justify-center gap-2 pt-4 border-t border-border",children:[r.jsx(Ne,{type:"button",variant:"secondary",onClick:n,disabled:d.isPending,children:e("common.cancel")}),r.jsx(Ne,{type:"button",variant:"danger",onClick:c,isLoading:d.isPending,children:e("common.delete")})]})]})})},Nz=()=>{const{t:e}=qt(),n=et(R=>R.closeModal),t=et(R=>R.props),{task:s}=t,{success:l,error:i}=ir(),o=Nt(),d=s.prepaid_receivable?.amount||s.prepaid_amount||0,c=s.amount-d,{data:a,isLoading:u}=sl(),h=l5(),{register:f,handleSubmit:m,control:b,formState:{errors:y},watch:g,setValue:w}=Wn({defaultValues:{is_paid:!1,is_full_payment:!0,payment_amount:c,paid_at:new Date().toISOString().split("T")[0],due_date:new Date().toISOString().split("T")[0],payment_note:""}}),x=g("is_paid"),_=g("is_full_payment");H.useEffect(()=>{_&&x&&w("payment_amount",c)},[_,x,c,w]);const j=R=>{const M={...R,payment_method_id:R.payment_method_id?Number(R.payment_method_id):void 0};if(R.is_paid)if(R.is_full_payment)M.payment_amount=c;else{const I=Number(R.payment_amount);if(isNaN(I)||I<=0||I>c){i(e("common.error"),e("payments.invalidAmount"));return}M.payment_amount=I}else delete M.payment_amount,delete M.payment_method_id,delete M.payment_note,delete M.paid_at,delete M.is_full_payment;h.mutate({id:Number(s.id),payload:M},{onSuccess:I=>{R.is_paid&&I.payment?l(e("tasks.completeSuccess"),e("tasks.completeWithPaymentSuccessMessage",{taskName:s.task_name||e(`type.${s.type}`),amount:M.payment_amount})):l(e("tasks.completeSuccess"),e("tasks.completeSuccessMessage",{taskName:s.task_name||e(`type.${s.type}`)})),o.invalidateQueries({queryKey:["dashboard"]}),o.invalidateQueries({queryKey:["tasks"]}),o.invalidateQueries({queryKey:["receivables"]}),o.invalidateQueries({queryKey:["clients"]}),n()},onError:I=>{i(e("common.error"),I.message||e("tasks.completeError"))}})};return r.jsxs(Zt,{isOpen:!0,onClose:n,title:e("tasks.completeTask",{taskName:s.task_name||e(`type.${s.type}`)}),children:[r.jsxs("div",{className:"rounded-lg border border-blue-600 bg-blue-50 p-3 flex flex-col gap-2 mb-4",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsx("span",{className:"text-sm",children:"  :"}),r.jsxs("span",{className:"font-semibold text-sm",children:[s.amount.toLocaleString()," "]})]}),r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsx("span",{className:"text-sm",children:" :"}),r.jsxs("span",{className:"font-semibold text-sm",children:[(s.prepaid_amount||0).toLocaleString()," "]})]}),r.jsx("div",{className:"border-t border-blue-600 my-1 pt-2"}),r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsx("span",{className:"font-semibold text-sm",children:" :"}),r.jsxs("span",{className:"font-semibold text-sm",children:[c.toLocaleString()," "]})]})]}),r.jsxs("form",{onSubmit:m(j),className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(an,{name:"is_paid",control:b,render:({field:R})=>r.jsx("input",{type:"checkbox",className:"rounded cursor-pointer",id:"is_paid",checked:R.value,onChange:M=>{R.onChange(M.target.checked)}})}),r.jsx("label",{className:"cursor-pointer text-sm",htmlFor:"is_paid",children:e("tasks.wasPaid")})]}),x?r.jsxs("div",{className:"space-y-4 pl-6 border-l-2 border-primary",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(an,{name:"is_full_payment",control:b,render:({field:R})=>r.jsx("input",{type:"checkbox",className:"rounded cursor-pointer",id:"is_full_payment",checked:R.value,onChange:R.onChange})}),r.jsx("label",{className:"cursor-pointer text-sm",htmlFor:"is_full_payment",children:e("payments.fullPayment")})]}),r.jsx(Kt,{label:e("payments.amountLabel"),type:"number",step:"0.01",max:c,disabled:_,...f("payment_amount",{required:x&&!_,valueAsNumber:!0,max:{value:c,message:`       ${c} `},min:.01}),error:y.payment_amount?y.payment_amount.message||e("payments.amountRequired"):void 0}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"font-semibold text-black text-sm block",children:e("payments.methodLabel")}),r.jsx(an,{name:"payment_method_id",control:b,rules:{required:x},render:({field:R})=>r.jsxs("select",{...R,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary ${y.payment_method_id?"border-destructive bg-destructive/5":"border-border"}`,disabled:u,children:[r.jsx("option",{value:"",children:e("payments.selectMethod")}),a?.map(M=>r.jsx("option",{value:M.id,children:M.name},M.id))]})}),y.payment_method_id&&r.jsx("div",{className:"text-destructive text-sm",children:e("payments.methodRequired")})]}),r.jsx(Kt,{label:e("payments.dateLabel"),type:"date",...f("paid_at",{required:x}),error:y.paid_at?e("payments.dateRequired"):void 0}),r.jsx(Kt,{label:e("payments.notesLabel"),...f("payment_note")})]}):r.jsx(Kt,{label:e("receivables.dueDate"),type:"date",...f("due_date"),error:y.due_date?e("receivables.dueDateRequired"):void 0}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t border-border",children:[r.jsx(Ne,{type:"button",variant:"secondary",onClick:n,disabled:h.isPending,children:e("common.cancel")}),r.jsx(Ne,{type:"submit",isLoading:h.isPending,children:e(x?"tasks.completeAndPay":"tasks.complete")})]})]})]})},Cz=()=>{const{t:e}=qt(),n=et(f=>f.closeModal),t=et(f=>f.props),{task:s}=t,[l,i]=H.useState(new Set),[o,d]=H.useState(!1),c=async(f,m)=>{try{await navigator.clipboard.writeText(m),i(b=>new Set(b).add(f)),setTimeout(()=>{i(b=>{const y=new Set(b);return y.delete(f),y})},2e3)}catch(b){console.error("Failed to copy:",b)}},a=async()=>{if(!s.amount_details||s.amount_details.length===0)return;const f=s.amount_details.map(m=>`${m.description}: ${m.amount} `).join(`
`)+`

: ${s.amount} `;try{await navigator.clipboard.writeText(f),d(!0),setTimeout(()=>d(!1),2e3)}catch(m){console.error("Failed to copy:",m)}};let u=[];if(Array.isArray(s.amount_details))u=s.amount_details;else if(typeof s.amount_details=="string")try{const f=JSON.parse(s.amount_details);u=Array.isArray(f)?f:[]}catch{u=[]}if(!u||u.length===0)return r.jsx(Zt,{isOpen:!0,onClose:n,title:" ",children:r.jsxs("div",{className:"text-center py-4",children:[r.jsx(Kn,{size:48,className:"mx-auto mb-3 text-muted"}),r.jsx("p",{className:"text-muted",children:"      "}),r.jsx(Ne,{variant:"secondary",onClick:n,className:"mt-3",children:""})]})});const h=u.reduce((f,m)=>f+(Number(m?.amount)||0),0);return r.jsxs(Zt,{isOpen:!0,onClose:n,title:" ",className:"amount-details-modal",children:[r.jsxs("div",{className:"max-h-screen overflow-y-auto space-y-4",children:[r.jsxs("div",{className:"bg-gray-100 rounded-lg p-4 border border-gray-300 space-y-3",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("small",{className:"text-muted-foreground text-xs block",children:""}),r.jsx("div",{className:"font-semibold",children:s.client.name})]}),r.jsxs("div",{children:[r.jsx("small",{className:"text-muted-foreground text-xs block",children:" "}),r.jsx("div",{className:"font-semibold",children:e(`type.${s.type}`)})]})]}),s.task_name&&r.jsxs("div",{children:[r.jsx("small",{className:"text-muted-foreground text-xs block",children:" "}),r.jsx("div",{className:"font-semibold",children:s.task_name})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("h6",{className:"font-semibold text-black flex items-center gap-2 m-0",children:[r.jsx(Nm,{size:18,className:"text-yellow-600"})," "]}),r.jsxs(Ne,{variant:"outline-primary",size:"sm",onClick:a,className:"flex items-center gap-1",style:{borderColor:"#d4af37",color:o?"#28a745":"#d4af37"},children:[o?r.jsx(ha,{size:16}):r.jsx(m_,{size:16}),o?" !":" "]})]}),r.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:u.map((f,m)=>r.jsxs("div",{className:"flex justify-between items-start p-3 rounded-lg border border-gray-200 bg-gray-50 transition-all duration-200 hover:shadow-md hover:-translate-y-0.5",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-medium text-black mb-1",children:f.description}),r.jsxs("div",{className:"text-muted-foreground text-sm flex items-center gap-1",children:[r.jsx(Kn,{size:14}),f.amount.toLocaleString()," "]})]}),r.jsx(Ne,{variant:"outline-primary",size:"sm",onClick:()=>c(m,`${f.description}: ${f.amount} `),className:"ml-2 flex items-center gap-1",style:{borderColor:l.has(m)?"#28a745":"#6c757d",color:l.has(m)?"#28a745":"#6c757d",minWidth:"80px"},children:l.has(m)?r.jsxs(r.Fragment,{children:[r.jsx(ha,{size:14})," "]}):r.jsxs(r.Fragment,{children:[r.jsx(m_,{size:14}),""]})})]},m))}),r.jsx("div",{className:"p-4 rounded-lg text-white",style:{background:"linear-gradient(135deg, #d4af37 0%, #b8941f 100%)"},children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-bold text-lg",children:" "}),r.jsx("small",{className:"opacity-75",children:"  "})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"font-bold text-2xl",children:[h.toLocaleString()," "]}),h!==s.amount&&r.jsxs("small",{className:"opacity-75",children:["(  : ",s.amount.toLocaleString()," )"]})]})]})})]}),r.jsx("div",{className:"flex justify-end gap-2 pt-4 border-t border-gray-300",children:r.jsx(Ne,{variant:"secondary",onClick:n,children:""})})]}),r.jsx("style",{children:`
        .amount-details-modal .modal-dialog {
          max-width: 750px;
        }
      `})]})},Sz=e=>{const n=et(w=>w.closeModal),t=et(w=>w.props),{subtasks:s,onSave:l,onClose:i}=e||t,[o,d]=H.useState(s&&s.length>0?[...s]:[{description:"",amount:0,is_completed:!1}]),[c,a]=H.useState({}),u=w=>{const x={};return w.description.trim()||(x.description="   "),w.amount<=0&&(x.amount="      "),x},h=(w,x,_)=>{const j=[...o];if(x==="amount"?j[w]={...j[w],[x]:Number(_)}:j[w]={...j[w],[x]:_},d(j),c[w]){const R={...c};delete R[w]?.[x],Object.keys(R[w]||{}).length===0&&delete R[w],a(R)}},f=()=>{d([...o,{description:"",amount:0,is_completed:!1}])},m=w=>{if(o.length>1){const x=o.filter((R,M)=>M!==w);d(x);const _={...c};delete _[w];const j={};Object.keys(_).forEach(R=>{const M=Number(R);M>w?j[M-1]=_[M]:M<w&&(j[M]=_[M])}),a(j)}},b=()=>{const w=o.filter(j=>j.description.trim()&&j.amount>0);if(w.length===0){l?.([]),i?i():n();return}const x={};let _=!1;if(w.forEach((j,R)=>{const M=u(j);Object.keys(M).length>0&&(x[R]=M,_=!0)}),_){a(x);return}l?.(w),i?i():n()},y=()=>o.reduce((w,x)=>w+(x.amount||0),0),g=o.some(w=>w.description.trim()&&w.amount>0);return r.jsxs(Zt,{isOpen:!0,onClose:i||n,title:"  ",className:"subtasks-modal",children:[r.jsxs("div",{className:"modal-content-wrapper space-y-4",children:[r.jsxs("div",{className:"rounded-lg border border-blue-600 bg-blue-50 p-4 flex gap-3",children:[r.jsx(Nm,{size:18,className:"text-blue-600 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-semibold text-black mb-1",children:"  "}),r.jsx("small",{className:"text-muted-foreground text-sm",children:"      .         ."})]})]}),r.jsx("div",{className:"subtasks-list space-y-3 max-h-96 overflow-y-auto",children:o.map((w,x)=>r.jsx("div",{className:"subtask-item rounded-lg border border-border bg-card p-4 transition-shadow hover:shadow-md",children:r.jsxs("div",{className:"grid grid-cols-5 gap-4 items-start",children:[r.jsxs("div",{className:"col-span-2",children:[r.jsx("label",{className:"font-medium text-black text-sm block mb-2",children:"  "}),r.jsx(Kt,{value:w.description,onChange:_=>h(x,"description",_.target.value),placeholder:":  ",className:c[x]?.description?"border-destructive bg-destructive/5":""}),c[x]?.description&&r.jsx("div",{className:"text-destructive text-xs mt-1",children:c[x].description})]}),r.jsxs("div",{className:"col-span-1",children:[r.jsx("label",{className:"font-medium text-black text-sm block mb-2",children:" ()"}),r.jsx(Kt,{type:"number",value:w.amount,onChange:_=>h(x,"amount",Number(_.target.value)),placeholder:"0",min:"0",step:"0.01",className:c[x]?.amount?"border-destructive bg-destructive/5":""}),c[x]?.amount&&r.jsx("div",{className:"text-destructive text-xs mt-1",children:c[x].amount})]}),r.jsxs("div",{className:"col-span-1",children:[r.jsx("label",{className:"font-medium text-black text-sm block mb-2",children:""}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",className:"rounded cursor-pointer",id:`completed-${x}`,checked:w.is_completed,onChange:_=>h(x,"is_completed",_.target.checked)}),r.jsx("label",{className:"cursor-pointer text-sm",htmlFor:`completed-${x}`,children:w.is_completed?r.jsxs("span",{className:"text-green-600 flex items-center gap-1",children:[r.jsx(ha,{size:14}),""]}):r.jsx("span",{className:"text-muted-foreground",children:" "})})]})]}),r.jsx("div",{className:"col-span-1 flex justify-end pt-8",children:r.jsx(Ne,{variant:"outline-danger",size:"sm",onClick:()=>m(x),disabled:o.length===1,title:"  ",children:r.jsx(Is,{size:16})})})]})},x))}),r.jsx("div",{className:"flex justify-center",children:r.jsxs(Ne,{variant:"outline-primary",onClick:f,className:"flex items-center gap-2",children:[r.jsx(hn,{size:18}),"   "]})}),g&&r.jsx("div",{className:"p-4 rounded-lg text-white bg-gradient-to-r from-yellow-500 to-yellow-700",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-semibold",children:" "}),r.jsx("small",{className:"opacity-75 text-xs",children:"   "})]}),r.jsx("div",{className:"text-right",children:r.jsxs("div",{className:"font-semibold text-lg flex items-center gap-1",children:[r.jsx(Kn,{size:20}),y().toLocaleString()," "]})})]})}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t border-border",children:[r.jsxs(Ne,{variant:"secondary",onClick:i||n,children:[r.jsx(ln,{size:16,className:"mr-1"}),""]}),r.jsxs(Ne,{variant:"primary",onClick:b,children:[r.jsx(pc,{size:16,className:"mr-1"})," "]})]})]}),r.jsx("style",{children:`
        .subtasks-modal .modal-dialog {
          max-width: 900px;
        }
        
        .subtask-item {
          transition: all 0.2s ease;
        }
        
        .modal-content-wrapper {
          max-height: 80vh;
        }
      `})]})},kz=()=>{const e=ir(),n=Nt(),t=et(g=>g.closeModal),s=et(g=>g.props),[l,i]=H.useState([]),[o,d]=H.useState(""),{data:c,isLoading:a}=Im({}),u=nl(),h=c?.tasks||[],f=h.filter(g=>(g.task_name||"").toLowerCase().includes(o.toLowerCase())||(g.client?.name||"").toLowerCase().includes(o.toLowerCase())),m=g=>{i(w=>w.includes(g)?w.filter(x=>x!==g):[...w,g])},b=async()=>{if(l.length===0){e.error("","     ");return}try{let g=0;for(const w of l){const x=h.find(_=>_.id===w);if(x){const _=Array.isArray(x.tags)?x.tags.map(I=>typeof I=="object"?I.id.toString():I.toString()):[],j=s.tagId.toString(),R=_.includes(j);let M;R?M=_.filter(I=>I!==j):M=[..._,j],await u.mutateAsync({id:w,taskData:{task_name:x.task_name||"",type:x.type,amount:x.amount,start_date:x.start_date,end_date:x.end_date||void 0,prepaid_amount:x.prepaid_amount,notes:x.notes||"",tags:M,requirements:x.requirements?.map(I=>({id:I.id,requirement_text:I.requirement_text,is_provided:I.is_provided}))||[]}}),g++}}n.invalidateQueries({queryKey:["tasks"]}),n.invalidateQueries({queryKey:["tags"]}),n.invalidateQueries({queryKey:["tag-collections"]}),e.success("",`  ${g}  `),t()}catch(g){console.error("Error updating tags for tasks:",g),e.error("",g?.response?.data?.message||"    ")}},y=g=>g.tags?(Array.isArray(g.tags)?g.tags.map(x=>typeof x=="object"?x.id.toString():x.toString()):[]).includes(s.tagId.toString()):!1;return r.jsxs(Zt,{isOpen:!0,onClose:t,title:"   ",children:[r.jsxs("div",{className:"task-selection-modal space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-2 border border-border rounded-md",children:[r.jsx("span",{className:"px-3 text-muted-foreground",children:r.jsx(ps,{size:16})}),r.jsx("input",{type:"text",className:"flex-1 px-3 py-2 border-0 focus:outline-none focus:ring-0 bg-transparent",placeholder:"  ...",value:o,onChange:g=>d(g.target.value)})]}),r.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:a?r.jsxs("div",{className:"text-center py-4",children:[r.jsx("div",{className:"inline-block animate-spin text-primary",children:r.jsx("div",{className:"h-6 w-6 border-3 border-primary border-t-transparent rounded-full"})}),r.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:" ..."})]}):f.length===0?r.jsx("div",{className:"text-center py-4 text-muted-foreground",children:o?"    ":"   "}):f.map(g=>{const w=y(g),x=l.includes(g.id);return r.jsx("div",{className:`task-item p-3 rounded-lg border cursor-pointer transition-colors ${x?"border-primary bg-primary/5":"border-border hover:bg-muted/50"}`,onClick:()=>m(g.id),children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("input",{type:"checkbox",checked:x,onChange:()=>m(g.id),className:"mt-1 rounded cursor-pointer",onClick:_=>_.stopPropagation()}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h6",{className:"font-semibold text-black text-sm",children:g.task_name}),r.jsxs("small",{className:"text-muted-foreground text-xs block",children:[": ",g.client?.name||" "," | : ",g.amount," "]}),r.jsx("div",{className:"mt-2",children:r.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-semibold text-white ${w?"bg-green-600":"bg-gray-400"}`,children:[r.jsx(ha,{size:12,className:"inline mr-1"}),w?"":" "]})})]})]})},g.id)})}),r.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-border",children:[r.jsx("div",{className:"text-muted-foreground text-xs",children:l.length>0&&`  ${l.length} `}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Ne,{variant:"secondary",onClick:t,children:""}),r.jsx(Ne,{variant:"primary",onClick:b,disabled:l.length===0||u.isPending,isLoading:u.isPending,children:"   "})]})]})]}),r.jsx("style",{children:`
        .task-item:hover:not(.opacity-50) {
          background-color: var(--color-muted-50) ;
        }
      `})]})},Ez=e=>{const n=new Date(e),s=new Date().getTime()-n.getTime(),l=Math.floor(s/(1e3*60*60)),i=Math.floor(s/(1e3*60*60*24));if(s<0){const o=Math.abs(i);return o===0?"":o===1?"":o===2?" ":o<=10?` ${o} `:` ${o} `}return l<1?"   ":l<24?` ${l} ${l===1?"":l===2?"":l<=10?"":""}`:i===1?"  ":i===2?" ":i<=10?` ${i} `:` ${i} `},Rz=()=>{const{t:e}=qt(),n=et(l=>l.closeModal),t=et(l=>l.props),{task:s}=t;return s?r.jsxs(Zt,{isOpen:!0,onClose:n,title:e("tasks.taskDetailsTitle"," "),children:[r.jsxs("div",{className:"task-details-modal space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("h6",{className:"font-semibold text-black",children:" "}),r.jsxs("p",{className:"text-sm",children:[r.jsxs("strong",{children:[e("tasks.tableHeaderService"),":"]})," ",s.task_name||e(`type.${s.type}`)]}),r.jsxs("p",{className:"text-sm",children:[r.jsxs("strong",{children:[e("tasks.tableHeaderType"),":"]})," ",e(`type.${s.type}`)]}),r.jsxs("p",{className:"text-sm",children:[r.jsxs("strong",{children:[e("common.status"),":"]})," ",e(`status.${s.status}`)]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h6",{className:"font-semibold text-black",children:" "}),r.jsxs("p",{className:"text-sm",children:[r.jsxs("strong",{children:[e("tasks.formDateLabel"),":"]})," ",Zr(s.start_date)," (",Ez(s.start_date),")"]}),s.end_date&&r.jsxs("p",{className:"text-sm",children:[r.jsxs("strong",{children:[e("tasks.formEndDateLabel"),":"]})," ",Zr(s.end_date)]}),r.jsxs("p",{className:"text-sm",children:[r.jsxs("strong",{children:[e("tasks.formAmountLabel"),":"]})," ",s.amount.toLocaleString()," "]}),s.prepaid_amount>0&&r.jsxs("p",{className:"text-sm",children:[r.jsxs("strong",{children:[e("tasks.formPrepaidAmountLabel"),":"]})," ",s.prepaid_amount.toLocaleString()," "]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h6",{className:"font-semibold text-black",children:e("tasks.formNotesLabel")}),r.jsx("p",{className:"text-sm",children:s.notes||"  ."})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h6",{className:"font-semibold text-black",children:e("tasks.formRequirementsLabel")}),s.requirements&&s.requirements.length>0?r.jsx("ul",{className:"text-sm space-y-1",children:s.requirements.map(l=>r.jsxs("li",{className:l.is_provided?"text-green-600":"text-muted-foreground",children:[l.is_provided?"":""," ",l.requirement_text]},l.id||l.temp_id))}):r.jsx("p",{className:"text-sm",children:"    ."})]})]}),r.jsx("div",{className:"flex justify-end gap-2 pt-4 border-t border-border",children:r.jsx(Ne,{variant:"secondary",onClick:n,children:e("common.close")})})]}):null},Tz=()=>{const{success:e,error:n}=ir(),t=et(B=>B.closeModal),s=et(B=>B.openModal),l=et(B=>B.props),{task:i}=l,[o,d]=H.useState(i.subtasks&&i.subtasks.length>0?[...i.subtasks]:[{description:"",amount:0,is_completed:!1}]),[c,a]=H.useState({}),[u,h]=H.useState(!1),f=nl(),m=()=>{if(!o||o.length===0)return!1;const B=o.reduce((Q,K)=>Q+(K.amount||0),0),U=i.amount||0;return Math.abs(U-B)<.01},b=()=>o&&o.length>0,y=B=>{const U={};return B.description.trim()||(U.description="   "),B.amount<=0&&(U.amount="      "),U},g=(B,U,Q)=>{const K=[...o];if(U==="amount"?K[B]={...K[B],[U]:Number(Q)}:K[B]={...K[B],[U]:Q},d(K),h(!0),c[B]){const T={...c};delete T[B]?.[U],Object.keys(T[B]||{}).length===0&&delete T[B],a(T)}},w=()=>{d([...o,{description:"",amount:0,is_completed:!1}]),h(!0)},x=B=>{if(o.length>1){const U=o.filter((T,P)=>P!==B);d(U),h(!0);const Q={...c};delete Q[B];const K={};Object.keys(Q).forEach(T=>{const P=Number(T);P>B?K[P-1]=Q[P]:P<B&&(K[P]=Q[P])}),a(K)}},_=async()=>{const B=o.filter(K=>K.description.trim()&&K.amount>0),U={};let Q=!1;if(B.forEach((K,T)=>{const P=y(K);Object.keys(P).length>0&&(U[T]=P,Q=!0)}),Q){a(U);return}try{const K=B.reduce((T,P)=>T+(P.amount||0),0);await f.mutateAsync({id:i.id,taskData:{task_name:i.task_name||"",type:i.type,amount:K,start_date:i.start_date,end_date:i.end_date||void 0,prepaid_amount:i.prepaid_amount,notes:i.notes||"",tags:i.tags?i.tags.map(T=>String(typeof T=="object"&&T.id||T)):[],amount_details:i.amount_details||[],subtasks:B}}),e(" ","    "),h(!1),t()}catch(K){n("",K.message||"     ")}},j=()=>{u?s("confirmDelete",{title:" ",message:"   .        ",onConfirm:async()=>{try{await _(),s("taskForm",{taskToEdit:{...i,amount:R()},client:i.client})}catch{}}}):(t(),s("taskForm",{taskToEdit:i,client:i.client}))},R=()=>o.reduce((B,U)=>B+(U.amount||0),0),M=()=>{const B=o.filter(T=>T.description.trim()&&T.amount>0);if(B.length===0)return{completed:0,total:0,percentage:0};const U=B.filter(T=>T.is_completed).length,Q=B.length,K=Q>0?Math.round(U/Q*100):0;return{completed:U,total:Q,percentage:K}},I=o.some(B=>B.description.trim()&&B.amount>0),F=M();return r.jsxs(Zt,{isOpen:!0,onClose:t,title:`  - ${i.task_name||` ${i.type}`}`,className:"task-subtasks-modal",children:[r.jsxs("div",{className:"max-h-screen overflow-y-auto space-y-4",children:[r.jsx("div",{className:"flex justify-end",children:r.jsxs(Ne,{variant:"outline-success",size:"sm",onClick:j,className:"flex items-center gap-1",children:[r.jsx(Sm,{size:16})," "]})}),I&&r.jsx("div",{className:"bg-gradient-to-r from-gray-100 to-gray-200 rounded-lg border border-gray-300 p-4 space-y-3",children:r.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"font-semibold mb-3 flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:F.percentage===100?"#28a745":F.percentage>0?"#ffc107":"#6c757d"}}),"   "]}),r.jsx("div",{className:"w-full h-2 bg-gray-300 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full transition-all duration-300 ease-out",style:{width:`${F.percentage}%`,backgroundColor:F.percentage===100?"#28a745":F.percentage>0?"#ffc107":"#6c757d"}})}),r.jsxs("small",{className:"text-muted-foreground text-sm mt-2 block",children:[F.completed,"  ",F.total,"   (",F.percentage,"%)"]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"font-semibold text-lg flex items-center justify-end gap-1",children:[r.jsx(Kn,{size:20,className:"text-yellow-600"}),R().toLocaleString()," "]}),r.jsx("small",{className:"text-muted-foreground text-sm",children:" "}),b()&&r.jsx("div",{className:"mt-2",children:r.jsx("span",{className:"inline-block bg-blue-100 text-blue-900 text-xs px-2 py-1 rounded",children:"   "})}),m()&&r.jsxs("small",{className:"text-muted-foreground text-xs mt-1 block",children:["      (",o.length," )"]}),b()&&!m()&&r.jsxs("small",{className:"text-blue-600 text-xs mt-1 block",children:["    ",o.length,"  "]})]})]})}),r.jsxs("div",{className:"rounded-lg border border-blue-600 bg-blue-50 p-4 flex gap-3",children:[r.jsx(Nm,{size:18,className:"text-blue-600 flex-shrink-0 mt-1"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-semibold mb-1",children:"  "}),r.jsx("small",{className:"text-muted-foreground text-sm",children:'         .   " "   .'})]})]}),r.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:o.map((B,U)=>r.jsx("div",{className:"rounded-lg border border-gray-200 p-4 transition-all duration-200 hover:shadow-md",style:{backgroundColor:B.is_completed?"#f8f9fa":"white"},children:r.jsxs("div",{className:"grid grid-cols-6 gap-4 items-start",children:[r.jsx("div",{className:"flex justify-center",children:r.jsx("input",{type:"checkbox",checked:B.is_completed,onChange:Q=>g(U,"is_completed",Q.target.checked),className:"w-5 h-5 rounded cursor-pointer accent-green-600"})}),r.jsxs("div",{className:"col-span-2",children:[r.jsx("label",{className:"font-medium text-black text-sm block mb-2",children:"  "}),r.jsx(Kt,{value:B.description,onChange:Q=>g(U,"description",Q.target.value),placeholder:":  ",className:c[U]?.description?"border-destructive bg-destructive/5":"",style:{textDecoration:B.is_completed?"line-through":"none",opacity:B.is_completed?.7:1}}),c[U]?.description&&r.jsx("div",{className:"text-destructive text-xs mt-1",children:c[U].description})]}),r.jsxs("div",{children:[r.jsx("label",{className:"font-medium text-black text-sm block mb-2",children:" ()"}),r.jsx(Kt,{type:"number",value:B.amount,onChange:Q=>g(U,"amount",Number(Q.target.value)),placeholder:"0",min:"0",step:"0.01",className:c[U]?.amount?"border-destructive bg-destructive/5":"",style:{opacity:B.is_completed?.7:1}}),c[U]?.amount&&r.jsx("div",{className:"text-destructive text-xs mt-1",children:c[U].amount})]}),r.jsx("div",{className:"flex justify-center",children:B.description.trim()&&B.amount>0&&r.jsx("span",{className:`inline-flex items-center gap-1 text-xs px-2 py-1 rounded ${B.is_completed?"bg-green-100 text-green-900":"bg-yellow-100 text-yellow-900"}`,children:B.is_completed?r.jsxs(r.Fragment,{children:[r.jsx(ha,{size:12}),""]}):r.jsxs(r.Fragment,{children:[r.jsx(On,{size:12})," "]})})}),r.jsx("div",{className:"flex justify-end",children:r.jsx(Ne,{variant:"outline-danger",size:"sm",onClick:()=>x(U),disabled:o.length<=1,className:"flex items-center gap-1",style:{fontSize:"0.75rem"},children:r.jsx(jm,{size:14})})})]})},U))}),r.jsx("div",{className:"flex justify-center",children:r.jsxs(Ne,{variant:"outline-primary",onClick:w,className:"flex items-center gap-2",style:{borderColor:"#d4af37",color:"#d4af37"},children:[r.jsx(hn,{size:18}),"   "]})}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t border-gray-200",children:[r.jsxs(Ne,{variant:"secondary",onClick:t,children:[r.jsx(ln,{size:16}),""]}),r.jsxs(Ne,{variant:"primary",onClick:_,disabled:f.isPending,style:{backgroundColor:"#d4af37",borderColor:"#d4af37"},children:[r.jsx(pc,{size:16}),f.isPending?" ...":" "]})]})]}),r.jsx("style",{children:`
        .task-subtasks-modal .modal-dialog {
          max-width: 1000px;
        }
      `})]})},Az=()=>{const e=et(m=>m.closeModal),n=et(m=>m.props),[t,s]=H.useState(n.client||null),{register:l,handleSubmit:i,formState:{errors:o},setValue:d}=Wn(),c=hz(),{data:a}=sl(),{data:u}=Pm(t?.id||0);H.useEffect(()=>{u&&(s(u),d("client_id",u.id))},[u]);const h=m=>{s(m),d("client_id",m.id)},f=m=>{c.mutate({...m,amount:Number(m.amount)},{onSuccess:()=>{e()}})};return r.jsx(Zt,{isOpen:!0,onClose:e,title:"  ",children:r.jsxs("form",{onSubmit:i(f),className:"space-y-4",children:[t?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"rounded-lg border border-blue-600 bg-blue-50 p-3 flex items-center justify-between",children:[r.jsxs("p",{className:"text-blue-800 text-sm",children:[": ",r.jsx("strong",{children:t.name})]}),r.jsx(Ne,{variant:"secondary",size:"sm",onClick:()=>s(null),children:""})]}),r.jsx(Kt,{label:"",type:"number",step:"0.01",...l("amount",{required:!0,valueAsNumber:!0}),error:o.amount&&" "}),r.jsx(Kt,{label:"",...l("description",{required:!0}),error:o.description&&" "}),r.jsx(Kt,{label:" ",type:"date",defaultValue:new Date().toISOString().split("T")[0],...l("received_at",{required:!0}),error:o.received_at&&" "}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"font-medium text-sm text-black block",children:" "}),r.jsxs("select",{...l("payment_method_id",{setValueAs:m=>m===""?void 0:Number(m)}),className:"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary text-black",children:[r.jsx("option",{value:"",children:"  "}),a?.map(m=>r.jsx("option",{value:m.id,children:m.name},m.id))]})]})]}):r.jsx(Um,{onSelect:h}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t border-border",children:[r.jsx(Ne,{type:"button",variant:"secondary",onClick:e,disabled:c.isPending,children:""}),r.jsx(Ne,{type:"submit",isLoading:c.isPending,disabled:!t,children:" "})]})]})})},zr=({size:e=24,strokeWidth:n=1.5,style:t,className:s,amount:l})=>{const i=l!==void 0?new Intl.NumberFormat("en-US",{style:"currency",currency:"SAR",minimumFractionDigits:2,maximumFractionDigits:2}).format(l):null;return r.jsxs("span",{className:"inline-flex items-center",style:{color:"black"},children:[i?r.jsx("span",{className:"me-1",children:i}):null,r.jsxs("svg",{width:e,height:e,viewBox:"0 0 1124.14 1256.39",style:{stroke:"currentColor",fill:"currentColor",strokeWidth:n,...t},className:s,children:[r.jsx("path",{d:"M699.62,1113.02h0c-20.06,44.48-33.32,92.75-38.4,143.37l424.51-90.24c20.06-44.47,33.31-92.75,38.4-143.37l-424.51,90.24Z"}),r.jsx("path",{d:"M1085.73,895.8c20.06-44.47,33.32-92.75,38.4-143.37l-330.68,70.33v-135.2l292.27-62.11c20.06-44.47,33.32-92.75,38.4-143.37l-330.68,70.27V66.13c-50.67,28.45-95.67,66.32-132.25,110.99v403.35l-132.25,28.11V0c-50.67,28.44-95.67,66.32-132.25,110.99v525.69l-295.91,62.88c-20.06,44.47-33.33,92.75-38.42,143.37l334.33-71.05v170.26l-358.3,76.14c-20.06,44.47-33.32,92.75-38.4,143.37l375.04-79.7c30.53-6.35,56.77-24.4,73.83-49.24l68.78-101.97v-.02c7.14-10.55,11.3-23.27,11.3-36.97v-149.98l132.25-28.11v270.4l424.53-90.28Z"})]})]})},Mz=()=>{const{t:e}=qt(),n=et(g=>g.closeModal),{credit:t}=et(g=>g.props),[s,l]=H.useState(null),[i,o]=H.useState([]),d=mz(),c=gz(),{register:a,handleSubmit:u,formState:{errors:h}}=Wn({defaultValues:{amount:t.amount}}),f=async g=>{try{s?await c.mutateAsync({id:t.id,new_amount:g.amount,allocation_adjustments:i}):await d.mutateAsync({id:t.id,amount:g.amount}),n()}catch(w){if(w.response?.status===409&&w.response.data?.code==="credit_reduction_conflict"){l(w.response.data.data);const x=w.response.data.data.allocations.map(_=>({allocation_id:_.id,action:"keep",new_amount:_.amount}));o(x)}}},m=(g,w,x)=>{o(_=>_.map(j=>j.allocation_id===g?{...j,action:w,new_amount:x}:j))},b=()=>s?s.allocations.reduce((g,w,x)=>{const _=i[x];if(!_)return g;switch(_.action){case"remove_allocation":return g+w.amount;case"reduce_allocation":return g+(w.amount-(_.new_amount||0));default:return g}},0):0,y=()=>s?b()>=s.deficit:!0;return r.jsx(Zt,{isOpen:!0,onClose:n,title:e("credits.editCredit"),children:r.jsxs("form",{onSubmit:u(f),className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"font-semibold text-black text-sm block",children:e("credits.currentAmount")}),r.jsx("div",{className:"text-black",children:r.jsx(zr,{amount:t.amount})})]}),r.jsx(Kt,{label:e("credits.newAmount"),type:"number",step:"0.01",...a("amount",{required:!0,valueAsNumber:!0,min:0,validate:g=>s&&g>t.amount?e("credits.cannotIncreaseAmount"):!0}),error:h.amount?.message}),s&&r.jsxs("div",{className:"rounded-lg border border-yellow-600 bg-yellow-50 p-4 space-y-3",children:[r.jsxs("div",{children:[r.jsx("h6",{className:"font-semibold text-black",children:e("credits.creditReductionConflict")}),r.jsx("p",{className:"text-sm text-yellow-800",children:e("credits.cannotReduceBelowAllocated")}),r.jsxs("p",{className:"text-sm text-yellow-800",children:[r.jsxs("strong",{children:[e("credits.allocatedAmount"),": "]}),r.jsx(zr,{amount:s.allocated_amount})]}),r.jsxs("p",{className:"text-sm text-yellow-800",children:[r.jsxs("strong",{children:[e("credits.deficit"),": "]}),r.jsx(zr,{amount:s.deficit})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h6",{className:"font-semibold text-black text-sm",children:e("credits.allocationAdjustments")}),r.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:s.allocations.map((g,w)=>r.jsx("div",{className:"rounded-lg border border-border bg-card p-3",children:r.jsxs("div",{className:"flex justify-between items-start gap-2",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("strong",{className:"text-sm text-black block",children:g.description??e("common.noDescription")}),r.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:r.jsx(zr,{amount:g.amount})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("select",{className:"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary text-sm",value:i[w]?.action||"keep",onChange:x=>{const _=x.target.value;m(g.id,_,g.amount)},children:[r.jsx("option",{value:"keep",children:e("credits.keepAllocation")}),r.jsx("option",{value:"reduce_allocation",children:e("credits.reduceAllocation")}),r.jsx("option",{value:"remove_allocation",children:e("credits.removeAllocation")})]}),i[w]?.action==="reduce_allocation"&&r.jsx("div",{children:r.jsx(Kt,{type:"number",step:"0.01",placeholder:e("credits.newAmount"),value:i[w]?.new_amount||"",onChange:x=>{m(g.id,"reduce_allocation",parseFloat(x.target.value)||0)}})})]})]})},g.id))})]}),r.jsxs("div",{className:"text-sm font-semibold text-black pt-2 border-t border-yellow-200",children:[e("credits.totalReduction"),": ",r.jsx(zr,{amount:b()})]}),!y()&&r.jsx("div",{className:"text-destructive text-xs",children:e("credits.insufficientReduction")})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t border-border",children:[r.jsx(Ne,{type:"button",variant:"secondary",onClick:n,children:e("common.cancel")}),r.jsx(Ne,{type:"submit",variant:"primary",isLoading:d.isPending||c.isPending,disabled:s?!y():!1,children:e("common.save")})]})]})})},Oz=()=>{const{t:e}=qt(),n=et(m=>m.closeModal),{credit:t}=et(m=>m.props),[s,l]=H.useState(null),[i,o]=H.useState([]),d=pz(),c=bz(),{data:a}=sl(),u=async()=>{try{s?await c.mutateAsync({id:t.id,allocation_resolutions:i}):await d.mutateAsync(t.id),n()}catch(m){if(m.response?.status===409&&m.response.data?.code==="credit_deletion_conflict"){l(m.response.data.data);const b=m.response.data.data.allocations.map(y=>({allocation_id:y.id,action:"delete_allocation"}));o(b)}}},h=(m,b,y)=>{o(g=>g.map(w=>w.allocation_id===m?{...w,action:b,payment_method_id:y}:w))},f=()=>s?i.every(m=>m.action==="convert_to_payment"?m.payment_method_id!==void 0:!0):!0;return r.jsx(Zt,{isOpen:!0,onClose:n,title:e("credits.deleteCredit"),children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-black text-sm",children:e("credits.deleteCreditConfirmation",{description:t.description})}),r.jsxs("div",{className:"text-black text-sm",children:[r.jsxs("span",{className:"font-medium",children:[e("credits.amount"),": "]}),r.jsx(zr,{amount:t.amount})]}),r.jsxs("div",{className:"text-black text-sm",children:[r.jsxs("span",{className:"font-medium",children:[e("credits.allocatedAmount"),": "]}),r.jsx(zr,{amount:t.allocated_amount})]}),r.jsxs("div",{className:"text-black text-sm",children:[r.jsxs("span",{className:"font-medium",children:[e("credits.remainingAmount"),": "]}),r.jsx(zr,{amount:t.amount-t.allocated_amount})]})]}),s&&r.jsxs("div",{className:"rounded-lg border border-yellow-600 bg-yellow-50 p-4 space-y-3",children:[r.jsxs("div",{className:"flex gap-3",children:[r.jsx(On,{className:"text-yellow-600 flex-shrink-0 mt-0.5 h-5 w-5"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h6",{className:"font-semibold text-yellow-900",children:e("credits.creditDeletionConflict")}),r.jsx("p",{className:"text-yellow-800 text-sm",children:e("credits.cannotDeleteWithAllocations")}),r.jsxs("p",{className:"text-yellow-800 text-sm",children:[r.jsxs("span",{className:"font-medium",children:[e("credits.allocatedAmount"),": "]}),r.jsx(zr,{amount:s.allocated_amount})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h6",{className:"font-semibold text-yellow-900",children:e("credits.allocationResolutions")}),s.allocations.map((m,b)=>r.jsx("div",{className:"rounded-lg border border-border bg-card p-3 space-y-2",children:r.jsxs("div",{className:"flex justify-between gap-4 items-start",children:[r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("p",{className:"font-medium text-black text-sm",children:m.description??e("common.noDescription")}),r.jsx("p",{className:"text-muted-foreground text-sm",children:r.jsx(zr,{amount:m.amount})})]}),r.jsxs("div",{className:"space-y-2 min-w-fit",children:[r.jsxs("select",{className:"w-full px-3 py-2 border border-border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary",value:i[b]?.action||"delete_allocation",onChange:y=>{const g=y.target.value;h(m.id,g)},children:[r.jsx("option",{value:"delete_allocation",children:e("credits.deleteAllocation")}),r.jsx("option",{value:"convert_to_payment",children:e("credits.convertToPayment")})]}),i[b]?.action==="convert_to_payment"&&r.jsxs("select",{className:"w-full px-3 py-2 border border-border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary",value:i[b]?.payment_method_id||"",onChange:y=>{h(m.id,"convert_to_payment",parseInt(y.target.value))},children:[r.jsx("option",{value:"",children:e("common.selectPaymentMethod")}),a?.map(y=>r.jsx("option",{value:y.id,children:y.name},y.id))]})]})]})},m.id))]}),!f()&&r.jsx("div",{className:"text-destructive text-xs font-medium mt-2",children:e("credits.selectPaymentMethodForConversion")})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t border-border",children:[r.jsx(Ne,{type:"button",variant:"secondary",onClick:n,children:e("common.cancel")}),r.jsx(Ne,{type:"button",variant:"danger",onClick:u,isLoading:d.isPending||c.isPending,disabled:s?!f():!1,children:e("common.delete")})]})]})})},Dz=async e=>{const{data:n}=await Xe.delete(`/allocations/${e}`);return n.data},z5=()=>{const e=Nt();return Et({mutationFn:Dz,onSuccess:n=>{e.invalidateQueries({queryKey:["receivables"]}),e.invalidateQueries({queryKey:["clientCredits"]}),e.invalidateQueries({queryKey:["clients"]}),e.invalidateQueries({queryKey:["employee"]}),e.invalidateQueries({queryKey:["employees"]})}})},Pz=async({allocationId:e,amount:n,description:t})=>{const{data:s}=await Xe.put(`/allocations/${e}`,{amount:n,description:t});return s.data},Iz=()=>{const e=Nt();return Et({mutationFn:Pz,onSuccess:()=>{e.invalidateQueries({queryKey:["receivables"]}),e.invalidateQueries({queryKey:["clientCredits"]}),e.invalidateQueries({queryKey:["clients"]}),e.invalidateQueries({queryKey:["employee"]}),e.invalidateQueries({queryKey:["employees"]})}})},Fz=()=>{const{t:e}=qt(),{closeModal:n,props:t}=et(),{allocation:s,clientId:l}=t,{data:i}=yc(l),o=Iz(),d=z5(),{register:c,handleSubmit:a,formState:{errors:u}}=Wn({defaultValues:{amount:s.amount,description:s.description||""}}),h=async f=>{if(f.amount<=0)return;const m=(i?.balance||0)+s.amount,b=s.amount;if(f.amount-b>m){alert(e("allocations.insufficientCredit"));return}o.mutate({allocationId:s.id,amount:f.amount,description:f.description},{onSuccess:()=>{n()}})};return r.jsx(Zt,{title:e("allocations.editAllocation"),onClose:n,isOpen:!0,children:r.jsxs("form",{onSubmit:a(h),className:"space-y-4",children:[r.jsx(O_,{label:e("allocations.amount"),error:u.amount?.message,required:!0,children:r.jsx(Kt,{type:"number",step:"0.01",min:"0.01",...c("amount",{required:e("validation.required"),min:{value:.01,message:e("validation.minAmount")},validate:f=>f<=0?e("validation.positiveAmount"):!0}),placeholder:e("allocations.enterAmount")})}),r.jsxs("div",{className:"text-xs text-muted-foreground",children:[e("allocations.currentAllocation"),": ",r.jsx(zr,{amount:s.amount})]}),r.jsx(O_,{label:e("allocations.description"),error:u.description?.message,children:r.jsx(Kt,{type:"text",...c("description",{maxLength:{value:255,message:e("validation.maxLength",{count:255})}}),placeholder:e("allocations.enterDescription")})}),i&&r.jsx("div",{className:"rounded-lg border border-blue-600 bg-blue-50 p-3",children:r.jsxs("small",{className:"text-blue-800",children:[e("allocations.availableCredit"),": ",r.jsx(zr,{amount:i.balance})]})}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t border-border",children:[r.jsx(Ne,{type:"button",variant:"danger",onClick:()=>{window.confirm(e("allocations.deleteAllocationConfirmation"))&&d.mutate(s.id,{onSuccess:()=>{n()}})},isLoading:d.isPending,children:e("common.delete")}),r.jsx(Ne,{type:"button",variant:"secondary",onClick:n,disabled:o.isPending||d.isPending,children:e("common.cancel")}),r.jsx(Ne,{type:"submit",variant:"primary",isLoading:o.isPending,disabled:o.isPending||d.isPending,children:e("common.save")})]})]})})},O_=({label:e,error:n,required:t,children:s})=>r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"font-semibold text-black text-sm block",children:[e,t&&r.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),s,n&&r.jsx("div",{className:"text-destructive text-sm",role:"alert",children:n})]}),Lz=()=>{const{t:e}=qt(),n=et(a=>a.closeModal),t=et(a=>a.props),{allocation:s}=t,l=z5(),[i,o]=H.useState(!1),d=async()=>{l.mutate(s.id,{onSuccess:()=>{n()}})},c=a=>new Intl.NumberFormat("en-US",{style:"currency",currency:"SAR"}).format(a);return r.jsx(Zt,{title:e("allocations.deleteAllocation"),onClose:n,isOpen:!0,children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"rounded-lg border border-yellow-600 bg-yellow-50 p-4 flex gap-3",children:[r.jsx(On,{className:"text-yellow-600 flex-shrink-0 mt-0.5 h-5 w-5"}),r.jsx("p",{className:"text-yellow-800 text-sm",children:e("allocations.deleteWarning")})]}),r.jsxs("div",{className:"rounded-lg border border-border bg-card p-4 space-y-2",children:[r.jsx("h6",{className:"font-semibold text-black text-sm",children:e("allocations.allocationDetails")}),r.jsxs("dl",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("dt",{className:"font-medium text-muted-foreground text-sm",children:[e("allocations.amount"),":"]}),r.jsx("dd",{className:"font-semibold text-black",children:c(s.amount)})]}),r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("dt",{className:"font-medium text-muted-foreground text-sm",children:[e("allocations.description"),":"]}),r.jsx("dd",{className:"font-medium text-black text-right",children:s.description||s.credit_description||e("allocations.noDescription")})]}),r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("dt",{className:"font-medium text-muted-foreground text-sm",children:[e("allocations.date"),":"]}),r.jsx("dd",{className:"font-medium text-black",children:new Date(s.allocated_at).toLocaleDateString("ar-SA")})]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",className:"rounded border-gray-300",id:"confirmDelete",checked:i,onChange:a=>o(a.target.checked)}),r.jsx("label",{className:"text-sm font-medium text-black",htmlFor:"confirmDelete",children:e("allocations.confirmDeleteMessage")})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t border-border",children:[r.jsx(Ne,{type:"button",variant:"secondary",onClick:n,disabled:l.isPending,children:e("common.cancel")}),r.jsx(Ne,{type:"button",variant:"danger",onClick:d,isLoading:l.isPending,disabled:!i,children:e("common.delete")})]})]})})},zz=()=>{const e=et(j=>j.closeModal),n=et(j=>j.props),{success:t,error:s}=ir(),l=nl(),{data:i,isLoading:o}=Im({}),{data:d}=I5(),[c,a]=H.useState(""),[u,h]=H.useState([]),[f,m]=H.useState(null),b=i?.tasks||[],y=d||[];H.useEffect(()=>{const j=y.find(R=>R.name?.trim().toLowerCase()==="".toLowerCase());m(j||null)},[y]),H.useEffect(()=>{n?.taskId&&h([n.taskId])},[n?.taskId]);const g=j=>{h(R=>R.includes(j)?R.filter(M=>M!==j):[...R,j])},w=j=>!f||!j.tags?!1:(Array.isArray(j.tags)?j.tags.map(M=>typeof M=="object"?M.id:M):[]).includes(f.id),x=async j=>{if(!f){s("",'     ""');return}if(u.length===0){s("","     ");return}try{for(const R of u){const M=b.find(I=>I.id===R);if(M){const I=Array.isArray(M.tags)?M.tags.map(B=>typeof B=="object"?B.id:B):[];let F;j?F=I.includes(f.id)?I:[...I,f.id]:F=I.filter(B=>B!==f.id),await l.mutateAsync({id:R,taskData:{task_name:M.task_name||"",type:M.type,amount:M.amount,start_date:M.start_date,end_date:M.end_date||void 0,prepaid_amount:M.prepaid_amount,notes:M.notes||"",tags:F,requirements:M.requirements?.map(B=>({id:B.id,requirement_text:B.requirement_text,is_provided:B.is_provided}))||[]}})}}t("",` ${j?"":""}   `),e()}catch(R){console.error("Error toggling urgent alert:",R),s("",R?.response?.data?.message||"   ")}},_=b.filter(j=>(j.task_name||"").toLowerCase().includes(c.toLowerCase())||(j.client?.name||"").toLowerCase().includes(c.toLowerCase()));return r.jsx(Zt,{isOpen:!0,onClose:e,title:"  ",children:r.jsxs("div",{style:{direction:"rtl"},className:"space-y-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(ps,{className:"absolute left-3 top-3 h-5 w-5 text-muted-foreground"}),r.jsx("input",{type:"text",className:"w-full pl-10 pr-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"  ...",value:c,onChange:j=>a(j.target.value)})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(Ne,{variant:"danger",onClick:()=>x(!0),disabled:u.length===0||l.isPending,className:"flex-1",children:[r.jsx(On,{size:16,className:"mr-2"}),"  "]}),r.jsxs(Ne,{variant:"secondary",onClick:()=>x(!1),disabled:u.length===0||l.isPending,className:"flex-1",children:[r.jsx(ln,{size:16,className:"mr-2"}),"  "]})]}),r.jsx("div",{className:"max-h-96 overflow-y-auto border border-border rounded-lg",children:o?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"inline-block h-6 w-6 animate-spin rounded-full border-2 border-primary border-r-transparent"}),r.jsx("p",{className:"mt-2 text-muted-foreground text-sm",children:" ..."})]}):_.length===0?r.jsx("div",{className:"text-center py-8 text-muted-foreground text-sm",children:c?"    ":"   "}):r.jsx("div",{className:"divide-y divide-border",children:_.map(j=>{const R=w(j),M=u.includes(j.id);return r.jsx("div",{className:`p-3 cursor-pointer transition-colors hover:bg-muted/50 ${M?"bg-primary/10 border-l-2 border-primary":""}`,onClick:()=>g(j.id),children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("input",{type:"checkbox",checked:M,onChange:()=>g(j.id),className:"rounded mt-0.5",onClick:I=>I.stopPropagation()}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h6",{className:"font-semibold text-black text-sm truncate",children:j.task_name}),r.jsxs("p",{className:"text-muted-foreground text-xs mt-1",children:[": ",j.client?.name||" "," | : ",j.amount," "]}),R&&r.jsx("div",{className:"mt-2",children:r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-md bg-destructive/10 text-destructive text-xs font-medium",children:[r.jsx(On,{size:12}),""]})})]})]})},j.id)})})}),r.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-border",children:[r.jsx("div",{className:"text-muted-foreground text-xs",children:u.length>0&&`  ${u.length} `}),r.jsx(Ne,{variant:"secondary",onClick:e,disabled:l.isPending,children:""})]})]})})},Bz=()=>{const{success:e,error:n}=ir(),{isOpen:t,modalType:s,props:l,closeModal:i}=et(),o=IF(),[d,c]=H.useState({amount:"",notes:"",type:"PAYOUT"}),[a,u]=H.useState({}),h=t&&s==="employeePayout",{employee:f}=l||{},m=f?.id,b=f?.user_id,y=()=>{const _={};return(!d.amount||parseFloat(d.amount)<=0)&&(_.amount="   "),u(_),Object.keys(_).length===0},g=async _=>{if(_.preventDefault(),console.log(d),console.log("Employee Table ID:",m),console.log("Employee User ID:",b),console.log(y()),!(!y()||!b))try{const j={amount:parseFloat(d.amount),notes:d.notes,type:d.type};console.log(j),await o.mutateAsync({employeeUserId:b,payoutData:j}),e("   "),c({amount:"",notes:"",type:"PAYOUT"}),u({}),i(),l?.onSuccess&&l.onSuccess()}catch(j){n(j.message||"   ")}},w=()=>{c({amount:"",notes:"",type:"PAYOUT"}),u({}),i()},x=(_,j)=>{c(R=>({...R,[_]:j})),a[_]&&u(R=>({...R,[_]:void 0}))};return r.jsx(Zt,{isOpen:h,onClose:w,title:`  - ${f?.display_name||""}`,children:r.jsxs("form",{onSubmit:g,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{htmlFor:"payout-amount",className:"font-semibold text-black text-sm block",children:[" ",r.jsx("span",{className:"text-destructive",children:"*"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"px-3 py-2 border border-border rounded-md bg-muted text-sm font-medium",children:""}),r.jsx("input",{type:"number",step:"0.01",min:"0.01",className:`flex-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary ${a.amount?"border-destructive bg-destructive/5":"border-border"}`,id:"payout-amount",value:d.amount,onChange:_=>x("amount",_.target.value),placeholder:"  ",required:!0})]}),a.amount&&r.jsx("div",{className:"text-destructive text-sm",children:a.amount})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{htmlFor:"payout-type",className:"font-semibold text-black text-sm block",children:["  ",r.jsx("span",{className:"text-destructive",children:"*"})]}),r.jsxs("select",{className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary ${a.type?"border-destructive bg-destructive/5":"border-border"}`,id:"payout-type",value:d.type,onChange:_=>x("type",_.target.value),required:!0,children:[r.jsx("option",{value:"PAYOUT",children:" "}),r.jsx("option",{value:"BONUS",children:""}),r.jsx("option",{value:"SALARY",children:""})]}),a.type&&r.jsx("div",{className:"text-destructive text-sm",children:a.type})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"payout-notes",className:"font-semibold text-black text-sm block",children:""}),r.jsx("textarea",{className:"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary resize-none",id:"payout-notes",rows:3,value:d.notes,onChange:_=>x("notes",_.target.value),placeholder:"    "})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t border-border",children:[r.jsxs(Ne,{type:"button",variant:"outline-secondary",onClick:w,children:[r.jsx(ln,{size:16,className:"mr-1"}),""]}),r.jsxs(Ne,{type:"submit",variant:"primary",isLoading:o.isPending,children:[r.jsx(pc,{size:16,className:"mr-1"})," "]})]})]})})},qz=()=>{const{success:e,error:n}=ir(),{isOpen:t,modalType:s,props:l,closeModal:i}=et(),o=FF(),[d,c]=H.useState({amount:"",notes:""}),[a,u]=H.useState({}),h=t&&s==="employeeBorrow",{employee:f}=l||{},m=f?.id,b=f?.user_id,y=()=>{const _={};return(!d.amount||parseFloat(d.amount)<=0)&&(_.amount="   "),u(_),Object.keys(_).length===0},g=async _=>{if(_.preventDefault(),console.log(d),console.log("Employee Table ID:",m),console.log("Employee User ID:",b),console.log(y()),!(!y()||!b))try{const j={amount:parseFloat(d.amount),notes:d.notes};console.log(j),await o.mutateAsync({employeeUserId:b,borrowData:j}),e("  "),c({amount:"",notes:""}),u({}),i(),l?.onSuccess&&l.onSuccess()}catch(j){n(j.message||"  ")}},w=()=>{c({amount:"",notes:""}),u({}),i()},x=(_,j)=>{c(R=>({...R,[_]:j})),a[_]&&u(R=>({...R,[_]:void 0}))};return r.jsx(Zt,{isOpen:h,onClose:w,title:`  - ${f?.display_name||""}`,children:r.jsxs("form",{onSubmit:g,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{htmlFor:"borrow-amount",className:"font-semibold text-black text-sm block",children:[" ",r.jsx("span",{className:"text-destructive",children:"*"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"px-3 py-2 border border-border rounded-md bg-muted text-sm font-medium",children:""}),r.jsx("input",{type:"number",step:"0.01",min:"0.01",className:`flex-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary ${a.amount?"border-destructive bg-destructive/5":"border-border"}`,id:"borrow-amount",value:d.amount,onChange:_=>x("amount",_.target.value),placeholder:" ",required:!0})]}),a.amount&&r.jsx("div",{className:"text-destructive text-sm",children:a.amount})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"borrow-notes",className:"font-semibold text-black text-sm block",children:""}),r.jsx("textarea",{className:"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary resize-none",id:"borrow-notes",rows:3,value:d.notes,onChange:_=>x("notes",_.target.value),placeholder:"   "})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t border-border",children:[r.jsxs(Ne,{type:"button",variant:"outline-secondary",onClick:w,children:[r.jsx(ln,{size:16,className:"mr-1"}),""]}),r.jsxs(Ne,{type:"submit",variant:"primary",isLoading:o.isPending,children:[r.jsx(pc,{size:16,className:"mr-1"}),""]})]})]})})},$z=()=>{const{success:e,error:n}=ir(),{isOpen:t,modalType:s,props:l,closeModal:i}=et(),o=AF(),[d,c]=H.useState({amount:"",notes:""}),[a,u]=H.useState({}),h=t&&s==="editEmployeePayout",{employee:f,transaction:m}=l||{},b=f?.id,y=f?.user_id;H.useEffect(()=>{h&&m&&c({amount:m.amount||"",notes:m.notes||""})},[h,m]);const g=()=>{const j={};return(!d.amount||parseFloat(d.amount)<=0)&&(j.amount="Please enter a valid amount"),u(j),Object.keys(j).length===0},w=async j=>{if(j.preventDefault(),!(!g()||!b||!y||!m))try{const R={amount:parseFloat(d.amount),notes:d.notes};await o.mutateAsync({employeeTableId:b,employeeUserId:y,transactionId:parseInt(m.id,10),data:R}),e("Payout updated successfully"),i(),l?.onSuccess&&l.onSuccess()}catch(R){n(R.message||"Failed to update payout")}},x=()=>{c({amount:"",notes:""}),u({}),i()},_=(j,R)=>{c(M=>({...M,[j]:R})),a[j]&&u(M=>({...M,[j]:void 0}))};return r.jsx(Zt,{isOpen:h,onClose:x,title:"Edit Payout",children:r.jsxs("form",{onSubmit:w,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{htmlFor:"edit-payout-amount",className:"font-semibold text-black text-sm block",children:["Amount ",r.jsx("span",{className:"text-destructive",children:"*"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"px-3 py-2 border border-border rounded-md bg-muted text-sm font-medium",children:"SAR"}),r.jsx("input",{type:"number",step:"0.01",min:"0.01",className:`flex-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary ${a.amount?"border-destructive bg-destructive/5":"border-border"}`,id:"edit-payout-amount",value:d.amount,onChange:j=>_("amount",j.target.value),placeholder:"Enter payout amount",required:!0})]}),a.amount&&r.jsx("div",{className:"text-destructive text-sm",children:a.amount})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"edit-payout-notes",className:"font-semibold text-black text-sm block",children:"Notes"}),r.jsx("textarea",{className:"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary resize-none",id:"edit-payout-notes",rows:3,value:d.notes,onChange:j=>_("notes",j.target.value),placeholder:"Optional notes about this payout"})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t border-border",children:[r.jsxs(Ne,{type:"button",variant:"outline-secondary",onClick:x,children:[r.jsx(ln,{size:16,className:"mr-1"}),"Cancel"]}),r.jsxs(Ne,{type:"submit",variant:"primary",isLoading:o.isPending,children:[r.jsx(pc,{size:16,className:"mr-1"}),"Update Payout"]})]})]})})};function us(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"SAR",minimumFractionDigits:2}).format(e)}function Uz(e){if(!e)return"";try{const n=new Date(e);return isNaN(n.getTime())?"":new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}).format(n)}catch{return""}}function fa(e){if(!e)return"";try{const n=new Date(e);if(isNaN(n.getTime()))return"";const t=n.getDate().toString().padStart(2,"0"),s=(n.getMonth()+1).toString().padStart(2,"0"),l=n.getFullYear();return`${t}/${s}/${l}`}catch{return""}}function Hz(e,n){const t=new Date(e),s=new Date(n),l=Math.abs(s.getTime()-t.getTime());return Math.ceil(l/(1e3*60*60*24))}function B5(e){return{New:"",Deferred:"",Completed:"",Cancelled:""}[e]||e}function q5(e){return{Government:"",RealEstate:"",Accounting:"",Other:"",Consultation:"",Documentation:"",Legal:"",Financial:"",Administrative:""}[e]||e}function D_(e,n){return n===0?0:Math.round(e/n*100*100)/100}const Vz=()=>{const{success:e,error:n}=ir(),{isOpen:t,modalType:s,props:l,closeModal:i}=et(),o=nl(),[d,c]=H.useState({expense_amount:""}),[a,u]=H.useState({}),h=t&&s==="editTaskExpense",{transaction:f}=l||{},m=f?.related_task_id,{data:b}=xF(h&&m?parseInt(m):0),y={commission_rate:20};H.useEffect(()=>{h&&b&&c({expense_amount:(b.expense_amount||0).toString()})},[h,b]);const g=()=>{const M={};return(d.expense_amount===""||parseFloat(d.expense_amount)<0)&&(M.expense_amount="Please enter a valid expense amount (0 or greater)"),u(M),Object.keys(M).length===0},w=async M=>{if(M.preventDefault(),!(!g()||!m))try{const I={expense_amount:parseFloat(d.expense_amount)};await o.mutateAsync({id:parseInt(m,10),taskData:I}),e("    "),i(),l?.onSuccess&&l.onSuccess()}catch(I){n(I.message||"    ")}},x=()=>{c({expense_amount:""}),u({}),i()},_=(M,I)=>{c(F=>({...F,[M]:I})),a[M]&&u(F=>({...F,[M]:void 0}))},R=(()=>{const M=f?.task_amount?parseFloat(f.task_amount):0,I=d.expense_amount?parseFloat(d.expense_amount):0,F=M-I,B=y?.commission_rate,U=F*B/100;return{taskAmount:M,currentExpense:I,netAmount:F,commissionRate:B,employeeCommission:Math.max(0,U)}})();return r.jsxs(Zt,{isOpen:h,onClose:x,title:"  ",children:[r.jsxs("div",{className:"rounded-lg border border-blue-600 bg-blue-50 p-4 space-y-2",children:[r.jsxs("div",{children:[r.jsx("strong",{className:"text-black",children:":"})," ",r.jsx("span",{className:"text-blue-800",children:f?.task_name||"  "})]}),r.jsxs("div",{children:[r.jsx("strong",{className:"text-black",children:":"})," ",r.jsx("span",{className:"text-blue-800",children:f?.client_name||"  "})]}),r.jsxs("div",{children:[r.jsx("strong",{className:"text-black",children:" :"})," ",r.jsx("span",{className:"text-blue-800",children:f?.amount?`${f.amount} `:" "})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("h6",{className:"font-semibold text-black text-sm",children:" "}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{className:"rounded-lg border border-primary bg-white p-3 text-center",children:[r.jsx("div",{className:"text-primary text-lg font-semibold",children:us(R.taskAmount)}),r.jsx("small",{className:"text-muted-foreground text-xs block",children:"  "})]}),r.jsxs("div",{className:"rounded-lg border border-yellow-600 bg-white p-3 text-center",children:[r.jsx("div",{className:"text-yellow-600 text-lg font-semibold",children:us(R.currentExpense)}),r.jsx("small",{className:"text-muted-foreground text-xs block",children:" "})]}),r.jsxs("div",{className:"rounded-lg border border-blue-600 bg-white p-3 text-center",children:[r.jsx("div",{className:"text-blue-600 text-lg font-semibold",children:us(R.netAmount)}),r.jsx("small",{className:"text-muted-foreground text-xs block",children:" "})]}),r.jsxs("div",{className:"rounded-lg border border-green-600 bg-white p-3 text-center",children:[r.jsx("div",{className:"text-green-600 text-lg font-semibold",children:us(R.employeeCommission)}),r.jsxs("small",{className:"text-muted-foreground text-xs block",children:["  (",R.commissionRate,"%)"]})]})]})]}),r.jsxs("form",{onSubmit:w,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{htmlFor:"edit-expense-amount",className:"font-semibold text-black text-sm block",children:["  ",r.jsx("span",{className:"text-destructive",children:"*"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"px-3 py-2 border border-border rounded-md bg-muted text-sm font-medium",children:""}),r.jsx("input",{type:"number",step:"0.01",min:"0",className:`flex-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary ${a.expense_amount?"border-destructive bg-destructive/5":"border-border"}`,id:"edit-expense-amount",value:d.expense_amount,onChange:M=>_("expense_amount",M.target.value),placeholder:"  ",required:!0})]}),a.expense_amount&&r.jsx("div",{className:"text-destructive text-sm",children:a.expense_amount}),r.jsx("div",{className:"text-muted-foreground text-xs",children:"         ."})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t border-border",children:[r.jsxs(Ne,{type:"button",variant:"outline-secondary",onClick:x,children:[r.jsx(ln,{size:16,className:"mr-1"}),""]}),r.jsxs(Ne,{type:"submit",variant:"primary",isLoading:o.isPending,children:[r.jsx(pc,{size:16,className:"mr-1"})," "]})]})]})]})},Kz=()=>{const{t:e}=qt(),n=et(h=>h.closeModal),t=kn(),[s,l]=H.useState(""),[i]=D5(s,300),{data:o,isLoading:d}=o5(i);H.useEffect(()=>{const h=document.getElementById("client-search-input");h&&h.focus()},[]);const c=h=>{t(`/clients/${h}`),n()},a=()=>{n()},u=(h,f)=>{f.stopPropagation();const m=h.replace(/\D/g,""),b=`https://wa.me/966${m.startsWith("0")?m.substring(1):m}`;window.open(b,"_blank")};return r.jsxs(Zt,{isOpen:!0,onClose:n,title:e("globalSearch.modalTitle")||"  ",className:"max-w-2xl",children:[r.jsx("div",{className:"p-4 bg-gray-50 border-b border-gray-200",children:r.jsxs("div",{className:"relative",children:[r.jsx(ps,{size:18,className:"absolute top-1/2 -translate-y-1/2 right-3 text-gray-400 pointer-events-none"}),r.jsx("input",{id:"client-search-input",type:"text",className:"base-input pr-10",placeholder:e("globalSearch.placeholder")||"    ...",value:s,onChange:h=>l(h.target.value)})]})}),r.jsxs("div",{className:"min-h-[300px] max-h-[400px] overflow-y-auto scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-100",children:[d&&r.jsx("div",{className:"flex justify-center items-center h-full py-12 animate-in fade-in duration-300",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-8 h-8 border-4 border-gray-200 border-t-blue-500 rounded-full animate-spin mx-auto"}),r.jsx("p",{className:"text-gray-500 mt-3 mb-0",children:" ..."})]})}),!d&&!o?.length&&i&&r.jsxs("div",{className:"flex flex-col justify-center items-center h-full py-12 animate-in fade-in duration-300",children:[r.jsx(ma,{size:48,className:"text-gray-400 mb-3"}),r.jsx("h6",{className:"text-gray-700 mb-2 font-semibold",children:"  "}),r.jsx("p",{className:"text-gray-500 text-sm mb-3",children:"      "}),r.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200",style:{color:"hsl(var(--primary-foreground))",background:"linear-gradient(135deg, hsl(var(--primary)) 0%, hsl(var(--primary) / 0.9) 100%)"},onClick:a,children:[r.jsx(hn,{size:16}),"  "]})]}),!d&&!i&&r.jsxs("div",{className:"flex flex-col justify-center items-center h-full py-12 animate-in fade-in duration-300",children:[r.jsx(ps,{size:48,className:"text-gray-400 mb-3"}),r.jsx("h6",{className:"text-gray-700 mb-2 font-semibold",children:" "}),r.jsx("p",{className:"text-gray-500 text-sm text-center",children:"       "})]}),o&&o.length>0&&r.jsx("div",{children:o.map((h,f)=>r.jsx("div",{className:`p-4 cursor-pointer transition-all duration-200 hover:bg-accent hover:-translate-y-px hover:shadow-sm ${f<o.length-1?"border-b border-gray-100":""}`,onClick:()=>c(h.id),children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{className:"flex items-center flex-grow",children:[r.jsx("div",{className:"w-11 h-11 rounded-full flex items-center justify-center mr-3 text-white text-lg font-semibold shadow-sm border-2 border-white/90 transition-all duration-200 hover:scale-105 hover:shadow-md",style:{background:"linear-gradient(135deg, hsl(var(--primary)) 0%, hsl(var(--primary) / 0.8) 100%)"},children:h.name.charAt(0).toUpperCase()}),r.jsxs("div",{className:"flex-grow",children:[r.jsxs("div",{className:"flex items-center mb-1",children:[r.jsx(ma,{size:14,className:"mr-2",style:{color:"hsl(var(--primary))"}}),r.jsx("span",{className:"font-semibold text-gray-900",children:h.name})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(o6,{size:14,className:"text-gray-500 mr-2"}),r.jsx("span",{className:"text-gray-500 text-sm",children:h.phone})]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{className:"w-9 h-9 flex items-center justify-center rounded-full border border-green-500 text-green-600 hover:bg-green-50 hover:scale-110 transition-all duration-200",onClick:m=>u(h.phone,m),title:" ",children:r.jsx(Ps,{size:16})}),r.jsx("div",{className:"text-gray-400",children:r.jsx(Sn,{size:16})})]})]})},h.id))})]}),o&&o.length>0&&r.jsxs("div",{className:"flex items-center gap-1 py-2 px-4 bg-gray-50 border-t border-gray-200",children:[r.jsx(ms,{size:14,className:"text-gray-500"}),r.jsxs("small",{className:"text-gray-500",children:[o.length,"  "]})]})]})},Wz=()=>{const e=et(u=>u.closeModal),n=et(u=>u.props),{receivable:t,availableCredit:s}=n,l=yz(),i=Math.min(t.remaining_amount,s),{register:o,handleSubmit:d,formState:{errors:c}}=Wn({defaultValues:{amount:i,paid_at:new Date().toISOString().split("T")[0],note:`  : ${t.description}`}}),a=u=>{l.mutate({receivableId:Number(t.id),amount:Number(u.amount),note:u.note,paid_at:u.paid_at},{onSuccess:e})};return r.jsxs(Zt,{isOpen:!0,onClose:e,title:"  ",children:[r.jsxs("div",{className:"rounded-lg border border-blue-600 bg-blue-50 p-4 flex flex-col gap-2 mb-4",children:[r.jsxs("div",{className:"text-sm text-blue-800",children:["  : ",r.jsxs("strong",{children:[s.toLocaleString()," "]})]}),r.jsxs("div",{className:"text-sm text-blue-800",children:["  : ",r.jsxs("strong",{children:[t.remaining_amount.toLocaleString()," "]})]})]}),r.jsxs("form",{onSubmit:d(a),className:"space-y-4",children:[r.jsx(Kt,{label:"  ",type:"number",step:"0.01",max:i,...o("amount",{required:" ",valueAsNumber:!0,max:{value:i,message:`     ${i} `}}),error:c.amount?.message}),r.jsx(Kt,{label:" ",type:"date",...o("paid_at",{required:" "}),error:c.paid_at?.message}),r.jsx(Kt,{label:"",...o("note")}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t border-border",children:[r.jsx(Ne,{type:"button",variant:"secondary",onClick:e,children:""}),r.jsx(Ne,{type:"submit",isLoading:l.isPending,children:" "})]})]})]})},Qz=()=>{const{t:e}=qt(),n=et(Q=>Q.closeModal),{receivable:t}=et(Q=>Q.props),{register:s,handleSubmit:l,formState:{errors:i},watch:o,control:d,reset:c,setValue:a}=Wn({defaultValues:{description:t.description,amount:t.amount,amount_details:Array.isArray(t.amount_details)?t.amount_details:[],notes:t.notes||"",due_date:M_(t.due_date),type:t.type}}),u=iL(),h=lL(),f=cL(),m=o("amount")||0,[b,y]=H.useState(null),[g,w]=H.useState(""),[x,_]=H.useState([]),[j,R]=H.useState([]),M=!!t.task_id;H.useEffect(()=>{c({description:t.description,amount:t.amount,amount_details:Array.isArray(t.amount_details)?t.amount_details:[],notes:t.notes||"",due_date:M_(t.due_date),type:t.type})},[t,c]);const I=Q=>{b?g==="manual_resolution"?h.mutate({id:t.id,resolution:{new_amount:Q.amount||0,payment_decisions:x,allocation_decisions:j}},{onSuccess:n}):f.mutate({id:t.id,new_amount:Q.amount||0,resolution_type:g},{onSuccess:n}):u.mutate({id:t.id,payload:Q},{onSuccess:n,onError:K=>{if(K.response?.status===409&&K.response.data?.code==="overpayment_detected"){y(K.response.data.data),w("auto_reduce_payments");const T=K.response.data.data.payments.map(A=>({payment_id:A.id,action:"keep"}));_(T);const P=K.response.data.data.allocations.map(A=>({allocation_id:A.id,action:"keep"}));R(P)}}})},F=["Government","RealEstate","Accounting","Other"],B=(Q,K,T)=>{_(P=>P.map(A=>A.payment_id===Q?{...A,action:K,new_amount:T}:A))},U=(Q,K)=>{R(T=>T.map(P=>P.allocation_id===Q?{...P,action:K}:P))};return r.jsx(Zt,{isOpen:!0,onClose:n,title:e("receivables.editReceivable"),children:b?r.jsxs("div",{className:"p-4 space-y-4",children:[r.jsxs("div",{className:"rounded-lg border border-yellow-600 bg-yellow-50 p-4",children:[r.jsxs("h5",{className:"flex items-center gap-2 font-semibold text-yellow-900 mb-2",children:[r.jsx("i",{className:"bi bi-exclamation-triangle-fill"}),e("receivables.overpaymentDetected")]}),r.jsxs("p",{className:"text-yellow-800 text-sm mb-0",children:["The new amount (",b.new_amount," SAR) is less than the total already paid (",b.total_paid," SAR). Please choose how to resolve the surplus of ",b.surplus," SAR."]})]}),r.jsxs("div",{children:[r.jsxs("h6",{className:"flex items-center gap-2 font-semibold text-black mb-3",children:[r.jsx("i",{className:"bi bi-gear-fill"}),"Choose Resolution Method"]}),Object.entries(b.resolution_options).map(([Q,K])=>r.jsx("div",{className:`rounded-lg border p-3 mb-2 ${g===Q?"border-primary bg-primary/5":"border-border"}`,children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("input",{className:"rounded mt-1",type:"radio",name:"resolutionMethod",id:Q,value:Q,checked:g===Q,onChange:T=>w(T.target.value),disabled:K.available===!1}),r.jsx("label",{className:"flex-1 cursor-pointer",htmlFor:Q,children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsxs("strong",{className:K.recommended?"text-green-600":"text-black",children:[K.label,K.recommended&&r.jsx("span",{className:"ml-2 inline-block px-2 py-1 rounded-full bg-green-600 text-white text-xs",children:"Recommended"})]}),r.jsx("div",{className:"text-muted-foreground text-sm mt-1",children:K.description})]}),K.available===!1&&r.jsx("span",{className:"px-2 py-1 rounded-full bg-gray-400 text-white text-xs",children:"Not Available"})]})})]})},Q))]}),g==="manual_resolution"&&r.jsxs("div",{className:"border border-border rounded-lg p-3 space-y-4",children:[r.jsx("h6",{className:"font-semibold text-black mb-3",children:"Manual Resolution Details"}),b.payments.length>0&&r.jsxs("div",{children:[r.jsxs("h6",{className:"flex items-center gap-2 font-semibold text-black mb-3",children:[r.jsx("i",{className:"bi bi-cash-coin"}),"Payment Actions"]}),b.payments.map(Q=>r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 items-center mb-3 p-3 border border-border rounded-lg",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"font-semibold text-black",children:[Q.amount," SAR"]}),r.jsx("small",{className:"text-muted-foreground text-xs",children:Q.paid_at})]}),r.jsx("div",{children:r.jsxs("select",{className:"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary",value:x.find(K=>K.payment_id===Q.id)?.action||"keep",onChange:K=>B(Q.id,K.target.value),children:[r.jsx("option",{value:"keep",children:e("common.keep")}),r.jsx("option",{value:"delete",children:e("common.delete")}),r.jsx("option",{value:"convert_to_credit",children:e("common.convertToCredit")})]})})]},Q.id))]}),b.allocations.length>0&&r.jsxs("div",{children:[r.jsxs("h6",{className:"flex items-center gap-2 font-semibold text-black mb-3",children:[r.jsx("i",{className:"bi bi-arrow-left-right"}),"Allocation Actions"]}),b.allocations.map(Q=>r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 items-center mb-3 p-3 border border-border rounded-lg",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"font-semibold text-black",children:[Q.amount," SAR"]}),r.jsx("small",{className:"text-muted-foreground text-xs",children:Q.description||e("common.noDescription")})]}),r.jsx("div",{children:r.jsxs("select",{className:"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary",value:j.find(K=>K.allocation_id===Q.id)?.action||"keep",onChange:K=>U(Q.id,K.target.value),children:[r.jsx("option",{value:"keep",children:e("common.keep")}),r.jsx("option",{value:"return_to_credit",children:"Return to Credit"}),r.jsx("option",{value:"delete_allocation",children:e("common.unallocate")})]})})]},Q.id))]})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(Ne,{type:"button",variant:"secondary",onClick:n,children:e("common.cancel")}),r.jsx(Ne,{type:"button",variant:"primary",onClick:l(I),isLoading:h.isPending||f.isPending,disabled:h.isPending||f.isPending||!g,children:g==="manual_resolution"?"Apply Manual Resolution":"Apply Auto Resolution"})]})]}):r.jsx("form",{onSubmit:l(I),children:r.jsxs("div",{className:"p-4 space-y-4",children:[r.jsx("div",{className:"rounded-lg border border-blue-600 bg-blue-50 p-4",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("i",{className:"bi bi-info-circle text-blue-600"}),r.jsxs("div",{className:"text-sm text-blue-800",children:[r.jsxs("strong",{children:[e("receivables.client"),": "]})," ",t.client_name,M&&r.jsxs(r.Fragment,{children:[r.jsx("br",{}),r.jsxs("strong",{children:[e("receivables.task"),": "]})," ",t.task_name,r.jsx("br",{}),r.jsx("small",{className:"text-blue-700",children:e("receivables.tiedToTaskNotice")})]})]})]})}),r.jsxs("div",{children:[r.jsx("label",{className:"font-semibold text-black text-sm block mb-2",children:e("receivables.chooseType")}),r.jsxs("select",{className:"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary",...s("type",{required:!0}),value:o("type")||"",onChange:Q=>{a("type",Q.target.value)},children:[r.jsx("option",{value:"",children:e("common.selectType")}),F.map(Q=>r.jsx("option",{value:Q,children:e(`receivables.type.${Q}`)},Q))]}),i.type&&r.jsx("div",{className:"text-destructive text-xs mt-1",children:e("common.required")})]}),r.jsx("div",{children:r.jsx(Kt,{label:e("receivables.tableHeaderDescription"),...s("description",{required:!0}),error:i.description&&e("common.required")})}),r.jsx("div",{children:r.jsx(Kt,{label:e("receivables.tableHeaderTotal"),type:"number",step:"0.01",...s("amount",{required:!0,valueAsNumber:!0,validate:Q=>{const K=o("amount_details")?.reduce((T,P)=>T+(Number(P?.amount)||0),0)||0;return(Q||0)>=K||e("receivables.amountLessThanDetails",{sum:K})}}),error:i.amount?i.amount.message||e("common.required"):void 0})}),r.jsx("div",{children:r.jsx(Kt,{label:e("receivables.tableHeaderDueDate"),type:"date",...s("due_date",{required:!0}),error:i.due_date&&e("common.required")})}),r.jsx("div",{children:r.jsx(P5,{control:d,register:s,totalAmount:m})}),r.jsx("div",{children:r.jsxs("div",{className:"col-12",children:[r.jsx("label",{className:"form-label fw-semibold",children:e("receivables.notes")}),r.jsx("textarea",{className:"form-control",rows:4,...s("notes"),placeholder:e("receivables.notesPlaceholder")})]})}),r.jsx("div",{className:"row",children:r.jsx("div",{className:"col-12",children:r.jsxs("div",{className:"d-flex justify-content-end gap-2",children:[r.jsx(Ne,{type:"button",variant:"secondary",onClick:n,children:e("common.cancel")}),r.jsx(Ne,{type:"submit",isLoading:u.isPending,disabled:u.isPending,children:e("common.save")})]})})})]})})})},Gz=()=>{const{t:e}=qt(),n=et(y=>y.closeModal),{receivable:t}=et(y=>y.props),[s,l]=H.useState(null),[i,o]=H.useState([]),[d,c]=H.useState([]),a=oL(),u=dL();H.useEffect(()=>{},[t]);const h=()=>{s?u.mutate({id:t.id,resolution:{payment_decisions:i,allocation_decisions:d}},{onSuccess:n}):a.mutate(t.id,{onSuccess:n,onError:y=>{if(y.response?.status===409&&y.response.data?.code==="deletion_conflict_financial_records_exist"){l(y.response.data.data);const g=y.response.data.data.payments.map(x=>({payment_id:x.id,action:"keep"}));o(g);const w=y.response.data.data.allocations.map(x=>({allocation_id:x.id,action:"keep"}));c(w)}}})},f=(y,g,w)=>{o(x=>x.map(_=>_.payment_id===y?{..._,action:g,new_amount:w}:_))},m=(y,g)=>{c(w=>w.map(x=>x.allocation_id===y?{...x,action:g}:x))},b=()=>!0;return r.jsx(Zt,{isOpen:!0,onClose:n,title:e("receivables.deleteReceivable"),children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"rounded-lg border border-yellow-600 bg-yellow-50 p-4 flex gap-3",children:[r.jsx(On,{className:"text-yellow-600 flex-shrink-0 mt-0.5 h-5 w-5"}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("h6",{className:"font-semibold text-yellow-900",children:[e("common.warning"),"!"]}),r.jsx("p",{className:"text-yellow-800 text-sm",children:e("receivables.deleteReceivableWarning",{description:t.description,amount:t.amount})})]})]}),s&&r.jsxs("div",{className:"rounded-lg border border-yellow-600 bg-yellow-50 p-4 space-y-3",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("h6",{className:"font-semibold text-yellow-900",children:e("receivables.overpaymentConflict")}),r.jsx("p",{className:"text-yellow-800 text-sm",children:e("receivables.cannotDeleteWithPayments")}),r.jsxs("p",{className:"text-yellow-800 text-sm",children:[r.jsxs("span",{className:"font-medium",children:[e("receivables.totalPaid"),": "]}),r.jsx(zr,{amount:s.total_paid})]}),r.jsxs("p",{className:"text-yellow-800 text-sm",children:[r.jsxs("span",{className:"font-medium",children:[e("receivables.surplus"),": "]}),r.jsx(zr,{amount:s.surplus})]})]}),s.payments.length>0&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("h6",{className:"font-semibold text-yellow-900",children:e("receivables.paymentDecisions")}),s.payments.map(y=>r.jsx("div",{className:"rounded-lg border border-border bg-card p-3 space-y-2",children:r.jsxs("div",{className:"flex justify-between gap-4 items-start",children:[r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("p",{className:"font-medium text-black text-sm",children:y.description||e("common.noDescription")}),r.jsx("p",{className:"text-muted-foreground text-sm",children:r.jsx(zr,{amount:y.amount})})]}),r.jsxs("div",{className:"space-y-2 min-w-fit",children:[r.jsxs("select",{className:"w-full px-3 py-2 border border-border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary",value:i.find(g=>g.payment_id===y.id)?.action||"keep",onChange:g=>{const w=g.target.value;f(y.id,w)},children:[r.jsx("option",{value:"keep",children:e("receivables.keepPayment")}),r.jsx("option",{value:"delete",children:e("receivables.deletePayment")}),r.jsx("option",{value:"convert_to_credit",children:e("receivables.convertToCredit")}),r.jsx("option",{value:"reduce_to_X",children:e("receivables.reducePayment")})]}),i.find(g=>g.payment_id===y.id)?.action==="reduce_to_X"&&r.jsx(Kt,{type:"number",step:"0.01",placeholder:e("receivables.newAmount"),value:i.find(g=>g.payment_id===y.id)?.new_amount||"",onChange:g=>{f(y.id,"reduce_to_X",parseFloat(g.target.value)||0)}})]})]})},y.id))]}),s.allocations.length>0&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("h6",{className:"font-semibold text-yellow-900",children:e("receivables.allocationDecisions")}),s.allocations.map(y=>r.jsx("div",{className:"rounded-lg border border-border bg-card p-3 space-y-2",children:r.jsxs("div",{className:"flex justify-between gap-4 items-start",children:[r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("p",{className:"font-medium text-black text-sm",children:y.description||e("common.noDescription")}),r.jsx("p",{className:"text-muted-foreground text-sm",children:r.jsx(zr,{amount:y.amount})})]}),r.jsx("div",{className:"min-w-fit",children:r.jsxs("select",{className:"w-full px-3 py-2 border border-border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary",value:d.find(g=>g.allocation_id===y.id)?.action||"keep",onChange:g=>{const w=g.target.value;m(y.id,w)},children:[r.jsx("option",{value:"keep",children:e("receivables.keepAllocation")}),r.jsx("option",{value:"delete_allocation",children:e("receivables.deleteAllocation")}),r.jsx("option",{value:"return_to_credit",children:e("receivables.returnToCredit")})]})})]})},y.id))]})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t border-border",children:[r.jsx(Ne,{type:"button",variant:"secondary",onClick:n,children:e("common.cancel")}),r.jsx(Ne,{type:"button",variant:"danger",onClick:h,isLoading:a.isPending||u.isPending,disabled:!b()||a.isPending||u.isPending,children:e("common.delete")})]})]})})};var Kg={},Ss={},Wg={},P_;function Xz(){return P_||(P_=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.useColumnWidths=e.getColumnWidths=void 0;const n=Br(),t=(l,i)=>{const o=i.map(({basis:c,minWidth:a,maxWidth:u})=>({basis:c,minWidth:a,maxWidth:u,size:c,violation:0,frozen:!1,factor:0}));let d=o.reduce((c,a)=>c-a.size,l);d>0?i.forEach(({grow:c},a)=>{o[a].factor=c}):d<0&&i.forEach(({shrink:c},a)=>{o[a].factor=c});for(const c of o)c.factor===0&&(c.frozen=!0);for(;o.some(({frozen:c})=>!c);){const c=o.reduce((u,h)=>u+(h.frozen?0:h.factor),0);let a=0;for(const u of o)u.frozen||(u.size+=d*u.factor/c,u.size<u.minWidth?u.violation=u.minWidth-u.size:u.maxWidth!==void 0&&u.size>u.maxWidth?u.violation=u.maxWidth-u.size:u.violation=0,u.size+=u.violation,a+=u.violation);if(a>0)for(const u of o)u.violation>0&&(u.frozen=!0);else if(a<0)for(const u of o)u.violation<0&&(u.frozen=!0);else break;d=o.reduce((u,h)=>u-h.size,l)}return o.map(({size:c})=>c)};e.getColumnWidths=t;const s=(l,i)=>{const o=l.map(({basis:d,minWidth:c,maxWidth:a,grow:u,shrink:h})=>[d,c,a,u,h].join(",")).join("|");return(0,n.useMemo)(()=>{if(i===void 0)return{fullWidth:!1,columnWidths:void 0,columnRights:void 0,totalWidth:void 0};const d=(0,e.getColumnWidths)(i,l);let c=0;const a=d.map((u,h)=>(c+=u,h===d.length-1?1/0:c));return{fullWidth:Math.abs(i-c)<.1,columnWidths:d,columnRights:a,totalWidth:c}},[i,o])};e.useColumnWidths=s}(Wg)),Wg}var Wb=function(e,n){return Wb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(t[l]=s[l])},Wb(e,n)};function $5(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");Wb(e,n);function t(){this.constructor=e}e.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)}var Yl=function(){return Yl=Object.assign||function(n){for(var t,s=1,l=arguments.length;s<l;s++){t=arguments[s];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Yl.apply(this,arguments)};function U5(e,n){var t={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&n.indexOf(s)<0&&(t[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(e);l<s.length;l++)n.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(e,s[l])&&(t[s[l]]=e[s[l]]);return t}var nh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Yz(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}var Xy=Yz,Zz=typeof nh=="object"&&nh&&nh.Object===Object&&nh,Jz=Zz,eB=Jz,tB=typeof self=="object"&&self&&self.Object===Object&&self,rB=eB||tB||Function("return this")(),H5=rB,nB=H5,sB=function(){return nB.Date.now()},aB=sB,iB=/\s/;function oB(e){for(var n=e.length;n--&&iB.test(e.charAt(n)););return n}var lB=oB,cB=lB,dB=/^\s+/;function uB(e){return e&&e.slice(0,cB(e)+1).replace(dB,"")}var fB=uB,hB=H5,mB=hB.Symbol,V5=mB,I_=V5,K5=Object.prototype,pB=K5.hasOwnProperty,gB=K5.toString,Md=I_?I_.toStringTag:void 0;function bB(e){var n=pB.call(e,Md),t=e[Md];try{e[Md]=void 0;var s=!0}catch{}var l=gB.call(e);return s&&(n?e[Md]=t:delete e[Md]),l}var yB=bB,xB=Object.prototype,vB=xB.toString;function wB(e){return vB.call(e)}var _B=wB,F_=V5,jB=yB,NB=_B,CB="[object Null]",SB="[object Undefined]",L_=F_?F_.toStringTag:void 0;function kB(e){return e==null?e===void 0?SB:CB:L_&&L_ in Object(e)?jB(e):NB(e)}var EB=kB;function RB(e){return e!=null&&typeof e=="object"}var TB=RB,AB=EB,MB=TB,OB="[object Symbol]";function DB(e){return typeof e=="symbol"||MB(e)&&AB(e)==OB}var PB=DB,IB=fB,z_=Xy,FB=PB,B_=NaN,LB=/^[-+]0x[0-9a-f]+$/i,zB=/^0b[01]+$/i,BB=/^0o[0-7]+$/i,qB=parseInt;function $B(e){if(typeof e=="number")return e;if(FB(e))return B_;if(z_(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=z_(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=IB(e);var t=zB.test(e);return t||BB.test(e)?qB(e.slice(2),t?2:8):LB.test(e)?B_:+e}var UB=$B,HB=Xy,Qg=aB,q_=UB,VB="Expected a function",KB=Math.max,WB=Math.min;function QB(e,n,t){var s,l,i,o,d,c,a=0,u=!1,h=!1,f=!0;if(typeof e!="function")throw new TypeError(VB);n=q_(n)||0,HB(t)&&(u=!!t.leading,h="maxWait"in t,i=h?KB(q_(t.maxWait)||0,n):i,f="trailing"in t?!!t.trailing:f);function m(M){var I=s,F=l;return s=l=void 0,a=M,o=e.apply(F,I),o}function b(M){return a=M,d=setTimeout(w,n),u?m(M):o}function y(M){var I=M-c,F=M-a,B=n-I;return h?WB(B,i-F):B}function g(M){var I=M-c,F=M-a;return c===void 0||I>=n||I<0||h&&F>=i}function w(){var M=Qg();if(g(M))return x(M);d=setTimeout(w,y(M))}function x(M){return d=void 0,f&&s?m(M):(s=l=void 0,o)}function _(){d!==void 0&&clearTimeout(d),a=0,s=c=l=d=void 0}function j(){return d===void 0?o:x(Qg())}function R(){var M=Qg(),I=g(M);if(s=arguments,l=this,c=M,I){if(d===void 0)return b(c);if(h)return clearTimeout(d),d=setTimeout(w,n),m(c)}return d===void 0&&(d=setTimeout(w,n)),o}return R.cancel=_,R.flush=j,R}var W5=QB,GB=W5,XB=Xy,YB="Expected a function";function ZB(e,n,t){var s=!0,l=!0;if(typeof e!="function")throw new TypeError(YB);return XB(t)&&(s="leading"in t?!!t.leading:s,l="trailing"in t?!!t.trailing:l),GB(e,n,{leading:s,maxWait:n,trailing:l})}var JB=ZB,Q5=function(e,n,t,s){switch(n){case"debounce":return W5(e,t,s);case"throttle":return JB(e,t,s);default:return e}},Qb=function(e){return typeof e=="function"},Xi=function(){return typeof window>"u"},$_=function(e){return e instanceof Element||e instanceof HTMLDocument},G5=function(e,n,t,s){return function(l){var i=l.width,o=l.height;n(function(d){return d.width===i&&d.height===o||d.width===i&&!s||d.height===o&&!t?d:(e&&Qb(e)&&e(i,o),{width:i,height:o})})}},X5=function(e){$5(n,e);function n(t){var s=e.call(this,t)||this;s.cancelHandler=function(){s.resizeHandler&&s.resizeHandler.cancel&&(s.resizeHandler.cancel(),s.resizeHandler=null)},s.attachObserver=function(){var a=s.props,u=a.targetRef,h=a.observerOptions;if(!Xi()){u&&u.current&&(s.targetRef.current=u.current);var f=s.getElement();f&&(s.observableElement&&s.observableElement===f||(s.observableElement=f,s.resizeObserver.observe(f,h)))}},s.getElement=function(){var a=s.props,u=a.querySelector,h=a.targetDomEl;if(Xi())return null;if(u)return document.querySelector(u);if(h&&$_(h))return h;if(s.targetRef&&$_(s.targetRef.current))return s.targetRef.current;var f=cs.findDOMNode(s);if(!f)return null;var m=s.getRenderType();switch(m){case"renderProp":return f;case"childFunction":return f;case"child":return f;case"childArray":return f;default:return f.parentElement}},s.createResizeHandler=function(a){var u=s.props,h=u.handleWidth,f=h===void 0?!0:h,m=u.handleHeight,b=m===void 0?!0:m,y=u.onResize;if(!(!f&&!b)){var g=G5(y,s.setState.bind(s),f,b);a.forEach(function(w){var x=w&&w.contentRect||{},_=x.width,j=x.height,R=!s.skipOnMount&&!Xi();R&&g({width:_,height:j}),s.skipOnMount=!1})}},s.getRenderType=function(){var a=s.props,u=a.render,h=a.children;return Qb(u)?"renderProp":Qb(h)?"childFunction":H.isValidElement(h)?"child":Array.isArray(h)?"childArray":"parent"};var l=t.skipOnMount,i=t.refreshMode,o=t.refreshRate,d=o===void 0?1e3:o,c=t.refreshOptions;return s.state={width:void 0,height:void 0},s.skipOnMount=l,s.targetRef=H.createRef(),s.observableElement=null,Xi()||(s.resizeHandler=Q5(s.createResizeHandler,i,d,c),s.resizeObserver=new window.ResizeObserver(s.resizeHandler)),s}return n.prototype.componentDidMount=function(){this.attachObserver()},n.prototype.componentDidUpdate=function(){this.attachObserver()},n.prototype.componentWillUnmount=function(){Xi()||(this.observableElement=null,this.resizeObserver.disconnect(),this.cancelHandler())},n.prototype.render=function(){var t=this.props,s=t.render,l=t.children,i=t.nodeType,o=i===void 0?"div":i,d=this.state,c=d.width,a=d.height,u={width:c,height:a,targetRef:this.targetRef},h=this.getRenderType(),f;switch(h){case"renderProp":return s&&s(u);case"childFunction":return f=l,f(u);case"child":if(f=l,f.type&&typeof f.type=="string"){u.targetRef;var m=U5(u,["targetRef"]);return H.cloneElement(f,m)}return H.cloneElement(f,u);case"childArray":return f=l,f.map(function(b){return!!b&&H.cloneElement(b,u)});default:return H.createElement(o,null)}},n}(H.PureComponent);function eq(e,n){n===void 0&&(n={});var t=function(i){$5(o,i);function o(){var d=i!==null&&i.apply(this,arguments)||this;return d.ref=H.createRef(),d}return o.prototype.render=function(){var d=this.props,c=d.forwardedRef,a=U5(d,["forwardedRef"]),u=c??this.ref;return H.createElement(X5,Yl({},n,{targetRef:u}),H.createElement(e,Yl({targetRef:u},a)))},o}(H.Component);function s(i,o){return H.createElement(t,Yl({},i,{forwardedRef:o}))}var l=e.displayName||e.name;return s.displayName="withResizeDetector(".concat(l,")"),H.forwardRef(s)}var tq=Xi()?H.useEffect:H.useLayoutEffect;function rq(e){e===void 0&&(e={});var n=e.skipOnMount,t=n===void 0?!1:n,s=e.refreshMode,l=e.refreshRate,i=l===void 0?1e3:l,o=e.refreshOptions,d=e.handleWidth,c=d===void 0?!0:d,a=e.handleHeight,u=a===void 0?!0:a,h=e.targetRef,f=e.observerOptions,m=e.onResize,b=H.useRef(t),y=H.useRef(null),g=h??y,w=H.useRef(),x=H.useState({width:void 0,height:void 0}),_=x[0],j=x[1];return tq(function(){if(!Xi()){var R=G5(m,j,c,u),M=function(F){!c&&!u||F.forEach(function(B){var U=B&&B.contentRect||{},Q=U.width,K=U.height,T=!b.current&&!Xi();T&&R({width:Q,height:K}),b.current=!1})};w.current=Q5(M,s,i,o);var I=new window.ResizeObserver(w.current);return g.current&&I.observe(g.current,f),function(){I.disconnect();var F=w.current;F&&F.cancel&&F.cancel()}}},[s,i,o,c,u,m,f,g.current]),Yl({ref:g},_)}const nq=Object.freeze(Object.defineProperty({__proto__:null,default:X5,useResizeDetector:rq,withResizeDetector:eq},Symbol.toStringTag,{value:"Module"})),sq=_9(nq);var ni={},U_;function aq(){return U_||(U_=1,function(e){var n=ni&&ni.__createBinding||(Object.create?function(b,y,g,w){w===void 0&&(w=g);var x=Object.getOwnPropertyDescriptor(y,g);(!x||("get"in x?!y.__esModule:x.writable||x.configurable))&&(x={enumerable:!0,get:function(){return y[g]}}),Object.defineProperty(b,w,x)}:function(b,y,g,w){w===void 0&&(w=g),b[w]=y[g]}),t=ni&&ni.__setModuleDefault||(Object.create?function(b,y){Object.defineProperty(b,"default",{enumerable:!0,value:y})}:function(b,y){b.default=y}),s=ni&&ni.__importStar||function(b){if(b&&b.__esModule)return b;var y={};if(b!=null)for(var g in b)g!=="default"&&Object.prototype.hasOwnProperty.call(b,g)&&n(y,b,g);return t(y,b),y};Object.defineProperty(e,"__esModule",{value:!0}),e.useColumns=e.parseFlexValue=void 0;const l=s(Br()),i=()=>l.default.createElement(l.default.Fragment,null),o=()=>!1,d=({rowData:b})=>b,c=()=>null,a=({rowIndex:b})=>l.default.createElement(l.default.Fragment,null,b+1),u=()=>!0,h=b=>b,f=b=>{if(typeof b=="number")return{basis:0,grow:b,shrink:1};if(b.match(/^ *\d+(\.\d*)? *$/))return{basis:0,grow:parseFloat(b.trim()),shrink:1};if(b.match(/^ *\d+(\.\d*)? *px *$/))return{basis:parseFloat(b.trim()),grow:1,shrink:1};if(b.match(/^ *\d+(\.\d*)? \d+(\.\d*)? *$/)){const[y,g]=b.trim().split(" ");return{basis:0,grow:parseFloat(y),shrink:parseFloat(g)}}if(b.match(/^ *\d+(\.\d*)? \d+(\.\d*)? *px *$/)){const[y,g]=b.trim().split(" ");return{basis:parseFloat(g),grow:parseFloat(y),shrink:1}}if(b.match(/^ *\d+(\.\d*)? \d+(\.\d*)? \d+(\.\d*)? *px *$/)){const[y,g,w]=b.trim().split(" ");return{basis:parseFloat(w),grow:parseFloat(y),shrink:parseFloat(g)}}return{basis:0,grow:1,shrink:1}};e.parseFlexValue=f;const m=(b,y,g)=>(0,l.useMemo)(()=>{var w,x,_,j,R,M,I,F,B,U;const Q=[y===!1?{basis:0,grow:0,shrink:0,minWidth:0,component:()=>l.default.createElement(l.default.Fragment,null),headerClassName:"dsg-hidden-cell",cellClassName:"dsg-hidden-cell",isCellEmpty:u}:Object.assign(Object.assign({},y),{basis:(w=y?.basis)!==null&&w!==void 0?w:40,grow:(x=y?.grow)!==null&&x!==void 0?x:0,shrink:(_=y?.shrink)!==null&&_!==void 0?_:0,minWidth:(j=y?.minWidth)!==null&&j!==void 0?j:0,title:(R=y?.title)!==null&&R!==void 0?R:l.default.createElement("div",{className:"dsg-corner-indicator"}),component:(M=y?.component)!==null&&M!==void 0?M:a,isCellEmpty:u}),...b];return g&&Q.push(Object.assign(Object.assign({},g),{basis:(I=g?.basis)!==null&&I!==void 0?I:40,grow:(F=g?.grow)!==null&&F!==void 0?F:0,shrink:(B=g?.shrink)!==null&&B!==void 0?B:0,minWidth:(U=g.minWidth)!==null&&U!==void 0?U:0,isCellEmpty:u})),Q.map(K=>{var T,P,A,N,k,S,E,O,L,z,G,Z,ee,W,J,$;const q=K.width!==void 0?(0,e.parseFlexValue)(K.width):{basis:void 0,grow:void 0,shrink:void 0};return Object.assign(Object.assign({},K),{basis:(P=(T=K.basis)!==null&&T!==void 0?T:q.basis)!==null&&P!==void 0?P:0,grow:(N=(A=K.grow)!==null&&A!==void 0?A:q.grow)!==null&&N!==void 0?N:1,shrink:(S=(k=K.shrink)!==null&&k!==void 0?k:q.shrink)!==null&&S!==void 0?S:1,minWidth:(E=K.minWidth)!==null&&E!==void 0?E:100,component:(O=K.component)!==null&&O!==void 0?O:i,disableKeys:(L=K.disableKeys)!==null&&L!==void 0?L:!1,disabled:(z=K.disabled)!==null&&z!==void 0?z:!1,keepFocus:(G=K.keepFocus)!==null&&G!==void 0?G:!1,deleteValue:(Z=K.deleteValue)!==null&&Z!==void 0?Z:d,copyValue:(ee=K.copyValue)!==null&&ee!==void 0?ee:c,pasteValue:(W=K.pasteValue)!==null&&W!==void 0?W:d,prePasteValues:(J=K.prePasteValues)!==null&&J!==void 0?J:h,isCellEmpty:($=K.isCellEmpty)!==null&&$!==void 0?$:o})})},[y,g,b]);e.useColumns=m}(ni)),ni}var Od={},Dd={},H_;function Yy(){if(H_)return Dd;H_=1,Object.defineProperty(Dd,"__esModule",{value:!0});function e(t,s,l,i){var o,d=!1,c=0;function a(){o&&clearTimeout(o)}function u(){a(),d=!0}typeof s!="boolean"&&(i=l,l=s,s=void 0);function h(){for(var f=arguments.length,m=new Array(f),b=0;b<f;b++)m[b]=arguments[b];var y=this,g=Date.now()-c;if(d)return;function w(){c=Date.now(),l.apply(y,m)}function x(){o=void 0}i&&!o&&w(),a(),i===void 0&&g>t?w():s!==!0&&(o=setTimeout(i?x:w,i===void 0?t-g:t))}return h.cancel=u,h}function n(t,s,l){return l===void 0?e(t,s,!1):e(t,l,s!==!1)}return Dd.debounce=n,Dd.throttle=e,Dd}var Ao={},Gg,V_;function Y5(){return V_||(V_=1,Gg=function e(n,t){if(n===t)return!0;if(n&&t&&typeof n=="object"&&typeof t=="object"){if(n.constructor!==t.constructor)return!1;var s,l,i;if(Array.isArray(n)){if(s=n.length,s!=t.length)return!1;for(l=s;l--!==0;)if(!e(n[l],t[l]))return!1;return!0}if(n.constructor===RegExp)return n.source===t.source&&n.flags===t.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===t.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===t.toString();if(i=Object.keys(n),s=i.length,s!==Object.keys(t).length)return!1;for(l=s;l--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[l]))return!1;for(l=s;l--!==0;){var o=i[l];if(!e(n[o],t[o]))return!1}return!0}return n!==n&&t!==t}),Gg}var K_;function Z5(){if(K_)return Ao;K_=1;var e=Ao&&Ao.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Ao,"__esModule",{value:!0}),Ao.useDeepEqualState=void 0;const n=Br(),t=e(Y5()),s=l=>{const[i,o]=(0,n.useState)(l),d=(0,n.useCallback)(c=>{o(a=>{const u=typeof c=="function"?c(a):c;return(0,t.default)(u,a)?a:u})},[o]);return[i,d]};return Ao.useDeepEqualState=s,Ao}var W_;function iq(){if(W_)return Od;W_=1,Object.defineProperty(Od,"__esModule",{value:!0}),Od.useEdges=void 0;const e=Br(),n=Yy(),t=Z5(),s=(l,i,o)=>{const[d,c]=(0,t.useDeepEqualState)({top:!0,right:!0,bottom:!0,left:!0});return(0,e.useEffect)(()=>{const a=(0,n.throttle)(100,()=>{var h,f,m,b,y,g,w,x,_,j;c({top:((h=l.current)===null||h===void 0?void 0:h.scrollTop)===0,right:((m=(f=l.current)===null||f===void 0?void 0:f.scrollLeft)!==null&&m!==void 0?m:0)>=((y=(b=l.current)===null||b===void 0?void 0:b.scrollWidth)!==null&&y!==void 0?y:0)-(i??0)-1,bottom:((w=(g=l.current)===null||g===void 0?void 0:g.scrollTop)!==null&&w!==void 0?w:0)>=((_=(x=l.current)===null||x===void 0?void 0:x.scrollHeight)!==null&&_!==void 0?_:0)-(o??0)-1,left:((j=l.current)===null||j===void 0?void 0:j.scrollLeft)===0})}),u=l.current;return u?.addEventListener("scroll",a),setTimeout(a,100),()=>{u?.removeEventListener("scroll",a),a.cancel()}},[o,i,l,c]),d};return Od.useEdges=s,Od}var Pd={},Q_;function J5(){if(Q_)return Pd;Q_=1,Object.defineProperty(Pd,"__esModule",{value:!0}),Pd.useDocumentEventListener=void 0;const e=Br(),n=(t,s)=>{(0,e.useEffect)(()=>(document.addEventListener(t,s),()=>{document.removeEventListener(t,s)}),[s,t])};return Pd.useDocumentEventListener=n,Pd}var Id={},G_;function oq(){if(G_)return Id;G_=1,Object.defineProperty(Id,"__esModule",{value:!0}),Id.useGetBoundingClientRect=void 0;const e=Br(),n=Yy(),t=(s,l=200)=>{const i=(0,e.useRef)(null),o=(0,e.useMemo)(()=>(0,n.throttle)(l,!0,()=>{setTimeout(()=>{var d;return i.current=((d=s.current)===null||d===void 0?void 0:d.getBoundingClientRect())||null},0)}),[s,l]);return(0,e.useCallback)((d=!1)=>{var c;return d?i.current=((c=s.current)===null||c===void 0?void 0:c.getBoundingClientRect())||null:o(),i.current},[s,o])};return Id.useGetBoundingClientRect=t,Id}var si={},X_;function eN(){return X_||(X_=1,function(e){var n=si&&si.__createBinding||(Object.create?function(o,d,c,a){a===void 0&&(a=c);var u=Object.getOwnPropertyDescriptor(d,c);(!u||("get"in u?!d.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return d[c]}}),Object.defineProperty(o,a,u)}:function(o,d,c,a){a===void 0&&(a=c),o[a]=d[c]}),t=si&&si.__setModuleDefault||(Object.create?function(o,d){Object.defineProperty(o,"default",{enumerable:!0,value:d})}:function(o,d){o.default=d}),s=si&&si.__importStar||function(o){if(o&&o.__esModule)return o;var d={};if(o!=null)for(var c in o)c!=="default"&&Object.prototype.hasOwnProperty.call(o,c)&&n(d,o,c);return t(d,o),d};Object.defineProperty(e,"__esModule",{value:!0}),e.AddRows=e.createAddRowsComponent=void 0;const l=s(Br()),i=(o={})=>({addRows:d})=>{var c,a;const[u,h]=(0,l.useState)(1),[f,m]=(0,l.useState)(String(u));return l.default.createElement("div",{className:"dsg-add-row"},l.default.createElement("button",{type:"button",className:"dsg-add-row-btn",onClick:()=>d(u)},(c=o.button)!==null&&c!==void 0?c:"Add")," ",l.default.createElement("input",{className:"dsg-add-row-input",value:f,onBlur:()=>m(String(u)),type:"number",min:1,onChange:b=>{m(b.target.value),h(Math.max(1,Math.round(parseInt(b.target.value)||0)))},onKeyDown:b=>{b.key==="Enter"&&d(u)}})," ",(a=o.unit)!==null&&a!==void 0?a:"rows")};e.createAddRowsComponent=i,e.AddRows=(0,e.createAddRowsComponent)(),e.AddRows.displayName="AddRows"}(si)),si}var Fd={},Y_;function lq(){if(Y_)return Fd;Y_=1,Object.defineProperty(Fd,"__esModule",{value:!0}),Fd.useDebounceState=void 0;const e=Br(),n=Yy(),t=(s,l)=>{const[i,o]=(0,e.useState)(s),d=(0,e.useRef)();(0,e.useEffect)(()=>()=>{var a;return(a=d.current)===null||a===void 0?void 0:a.cancel()},[]);const c=(0,e.useMemo)(()=>d.current=(0,n.debounce)(l,a=>{o(a)}),[l]);return[i,c]};return Fd.useDebounceState=t,Fd}var ai={},Z_;function tN(){return Z_||(Z_=1,function(e){var n=ai&&ai.__createBinding||(Object.create?function(a,u,h,f){f===void 0&&(f=h);var m=Object.getOwnPropertyDescriptor(u,h);(!m||("get"in m?!u.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return u[h]}}),Object.defineProperty(a,f,m)}:function(a,u,h,f){f===void 0&&(f=h),a[f]=u[h]}),t=ai&&ai.__setModuleDefault||(Object.create?function(a,u){Object.defineProperty(a,"default",{enumerable:!0,value:u})}:function(a,u){a.default=u}),s=ai&&ai.__importStar||function(a){if(a&&a.__esModule)return a;var u={};if(a!=null)for(var h in a)h!=="default"&&Object.prototype.hasOwnProperty.call(a,h)&&n(u,a,h);return t(u,a),u};Object.defineProperty(e,"__esModule",{value:!0}),e.ContextMenu=e.createContextMenuComponent=e.defaultRenderItem=void 0;const l=s(Br()),i=Br(),o=J5(),d=a=>a.type==="CUT"?l.createElement(l.Fragment,null,"Cut"):a.type==="COPY"?l.createElement(l.Fragment,null,"Copy"):a.type==="PASTE"?l.createElement(l.Fragment,null,"Paste"):a.type==="DELETE_ROW"?l.createElement(l.Fragment,null,"Delete row"):a.type==="DELETE_ROWS"?l.createElement(l.Fragment,null,"Delete rows ",l.createElement("b",null,a.fromRow)," to ",l.createElement("b",null,a.toRow)):a.type==="INSERT_ROW_BELLOW"?l.createElement(l.Fragment,null,"Insert row below"):a.type==="DUPLICATE_ROW"?l.createElement(l.Fragment,null,"Duplicate row"):a.type==="DUPLICATE_ROWS"?l.createElement(l.Fragment,null,"Duplicate rows ",l.createElement("b",null,a.fromRow)," to ",l.createElement("b",null,a.toRow)):a.type;e.defaultRenderItem=d;const c=(a=e.defaultRenderItem)=>({clientX:u,clientY:h,items:f,close:m})=>{const b=(0,i.useRef)(null),y=(0,i.useCallback)(g=>{var w;((w=b.current)===null||w===void 0?void 0:w.contains(g.target))||m()},[m]);return(0,o.useDocumentEventListener)("mousedown",y),l.createElement("div",{className:"dsg-context-menu",style:{left:u+"px",top:h+"px"},ref:b},f.map(g=>l.createElement("div",{key:g.type,onClick:g.action,className:"dsg-context-menu-item"},a(g))))};e.createContextMenuComponent=c,e.ContextMenu=(0,e.createContextMenuComponent)(e.defaultRenderItem),e.ContextMenu.displayName="ContextMenu"}(ai)),ai}var ia={},Ld={},J_;function cq(){if(J_)return Ld;J_=1,Object.defineProperty(Ld,"__esModule",{value:!0}),Ld.parseDom=void 0;const e=typeof DOMParser<"u"?new DOMParser:{parseFromString:()=>null},n=t=>e.parseFromString(t,"text/html");return Ld.parseDom=n,Ld}var e3;function dq(){if(e3)return ia;e3=1,Object.defineProperty(ia,"__esModule",{value:!0}),ia.isPrintableUnicode=ia.encodeHtml=ia.parseTextPlainData=ia.parseTextHtmlData=void 0;const e=cq(),n=i=>{var o,d;const c=(0,e.parseDom)(i.replace(/<br\/?>/g,`
`)),a=c.getElementsByTagName("table")[0];if(a){const h=[];for(let f=0;f<a.rows.length;f++){const m=[];h.push(m);for(let b=0;b<a.rows[f].cells.length;b++)m.push((o=a.rows[f].cells[b].textContent)!==null&&o!==void 0?o:"")}return h}const u=c.getElementsByTagName("span")[0];return u?[[(d=u.textContent)!==null&&d!==void 0?d:""]]:[[""]]};ia.parseTextHtmlData=n;const t=i=>{const o=i.replace(/\r|\n$/g,""),d=[[]];let c=0,a=0,u=!1,h=0;const f=()=>{let m=o.slice(a,c);m[0]==='"'&&m[m.length-1]==='"'&&(u=!0),u&&m[m.length-1]==='"'&&m.includes(`
`)&&(m=m.slice(1,m.length-1).replace(/""/g,'"'),u=!1),u&&m[m.length-1]!=='"'?m.split(`
`).forEach((b,y,{length:g})=>{d[h].push(b),y<g-1&&(d.push([]),h++)}):d[h].push(m)};for(;c<o.length;)u&&o[c]==='"'&&![void 0,"	",'"'].includes(o[c+1])&&(u=!1),u&&o[c]==='"'&&o[c+1]==='"'&&c++,c===a&&o[c]==='"'&&(u=!0),o[c]==="	"&&(f(),a=c+1,u=!1),o[c]===`
`&&!u&&(f(),d.push([]),a=c+1,h++),c++;return f(),d};ia.parseTextPlainData=t;const s=i=>i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");ia.encodeHtml=s;const l=i=>i.match(/^[^\x00-\x20\x7F-\x9F]$/)!==null;return ia.isPrintableUnicode=l,ia}var Xg={},t3;function uq(){return t3||(t3=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getSelectionWithId=e.getSelection=e.getCellWithId=e.getCell=void 0;const n=(i,o,d,c)=>{if(i===null||!o||!d)return null;if(typeof i!="object")throw new Error("Value must be an object or null");const a=c.findIndex(h=>h.id===i.col),u={col:Math.max(0,Math.min(o-1,a===-1?Number(i.col):a-1)),row:Math.max(0,Math.min(d-1,Number(i.row)))};if(isNaN(u.col)||isNaN(u.row))throw new Error("col or cell are not valid positive numbers");return u};e.getCell=n;const t=(i,o)=>{var d;return i?{col:i.col,row:i.row,colId:(d=o[i.col+1])===null||d===void 0?void 0:d.id}:null};e.getCellWithId=t;const s=(i,o,d,c)=>{if(i===null||!o||!d)return null;if(typeof i!="object")throw new Error("Value must be an object or null");const a={min:(0,e.getCell)(i.min,o,d,c),max:(0,e.getCell)(i.max,o,d,c)};if(!a.min||!a.max)throw new Error("min and max must be defined");return a};e.getSelection=s;const l=(i,o)=>i?{min:(0,e.getCellWithId)(i.min,o),max:(0,e.getCellWithId)(i.max,o)}:null;e.getSelectionWithId=l}(Xg)),Xg}var zd={},r3;function fq(){if(r3)return zd;r3=1,Object.defineProperty(zd,"__esModule",{value:!0}),zd.getAllTabbableElements=void 0;const e=()=>Array.from(document.querySelectorAll("*")).filter(n=>n instanceof HTMLElement&&typeof n.tabIndex=="number"&&n.tabIndex>=0&&!n.disabled&&(!(n instanceof HTMLAnchorElement)||!!n.href||n.getAttribute("tabIndex")!==null)&&getComputedStyle(n).visibility!=="collapse");return zd.getAllTabbableElements=e,zd}var ks={},Yg={},Zg={},Jg={},n3;function hq(){return n3||(n3=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function n(i,o,d){let c=d.initialDeps??[],a;function u(){var h,f,m,b;let y;d.key&&((h=d.debug)!=null&&h.call(d))&&(y=Date.now());const g=i();if(!(g.length!==c.length||g.some((_,j)=>c[j]!==_)))return a;c=g;let x;if(d.key&&((f=d.debug)!=null&&f.call(d))&&(x=Date.now()),a=o(...g),d.key&&((m=d.debug)!=null&&m.call(d))){const _=Math.round((Date.now()-y)*100)/100,j=Math.round((Date.now()-x)*100)/100,R=j/16,M=(I,F)=>{for(I=String(I);I.length<F;)I=" "+I;return I};console.info(`%c ${M(j,5)} /${M(_,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*R,120))}deg 100% 31%);`,d?.key)}return(b=d?.onChange)==null||b.call(d,a),a}return u.updateDeps=h=>{c=h},u}function t(i,o){if(i===void 0)throw new Error(`Unexpected undefined${o?`: ${o}`:""}`);return i}const s=(i,o)=>Math.abs(i-o)<1.01,l=(i,o,d)=>{let c;return function(...a){i.clearTimeout(c),c=i.setTimeout(()=>o.apply(this,a),d)}};e.approxEqual=s,e.debounce=l,e.memo=n,e.notUndefined=t}(Jg)),Jg}var s3;function mq(){return s3||(s3=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const n=hq(),t=w=>{const{offsetWidth:x,offsetHeight:_}=w;return{width:x,height:_}},s=w=>w,l=w=>{const x=Math.max(w.startIndex-w.overscan,0),_=Math.min(w.endIndex+w.overscan,w.count-1),j=[];for(let R=x;R<=_;R++)j.push(R);return j},i=(w,x)=>{const _=w.scrollElement;if(!_)return;const j=w.targetWindow;if(!j)return;const R=I=>{const{width:F,height:B}=I;x({width:Math.round(F),height:Math.round(B)})};if(R(t(_)),!j.ResizeObserver)return()=>{};const M=new j.ResizeObserver(I=>{const F=()=>{const B=I[0];if(B?.borderBoxSize){const U=B.borderBoxSize[0];if(U){R({width:U.inlineSize,height:U.blockSize});return}}R(t(_))};w.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(F):F()});return M.observe(_,{box:"border-box"}),()=>{M.unobserve(_)}},o={passive:!0},d=(w,x)=>{const _=w.scrollElement;if(!_)return;const j=()=>{x({width:_.innerWidth,height:_.innerHeight})};return j(),_.addEventListener("resize",j,o),()=>{_.removeEventListener("resize",j)}},c=typeof window>"u"?!0:"onscrollend"in window,a=(w,x)=>{const _=w.scrollElement;if(!_)return;const j=w.targetWindow;if(!j)return;let R=0;const M=w.options.useScrollendEvent&&c?()=>{}:n.debounce(j,()=>{x(R,!1)},w.options.isScrollingResetDelay),I=Q=>()=>{const{horizontal:K,isRtl:T}=w.options;R=K?_.scrollLeft*(T&&-1||1):_.scrollTop,M(),x(R,Q)},F=I(!0),B=I(!1);B(),_.addEventListener("scroll",F,o);const U=w.options.useScrollendEvent&&c;return U&&_.addEventListener("scrollend",B,o),()=>{_.removeEventListener("scroll",F),U&&_.removeEventListener("scrollend",B)}},u=(w,x)=>{const _=w.scrollElement;if(!_)return;const j=w.targetWindow;if(!j)return;let R=0;const M=w.options.useScrollendEvent&&c?()=>{}:n.debounce(j,()=>{x(R,!1)},w.options.isScrollingResetDelay),I=Q=>()=>{R=_[w.options.horizontal?"scrollX":"scrollY"],M(),x(R,Q)},F=I(!0),B=I(!1);B(),_.addEventListener("scroll",F,o);const U=w.options.useScrollendEvent&&c;return U&&_.addEventListener("scrollend",B,o),()=>{_.removeEventListener("scroll",F),U&&_.removeEventListener("scrollend",B)}},h=(w,x,_)=>{if(x?.borderBoxSize){const j=x.borderBoxSize[0];if(j)return Math.round(j[_.options.horizontal?"inlineSize":"blockSize"])}return w[_.options.horizontal?"offsetWidth":"offsetHeight"]},f=(w,{adjustments:x=0,behavior:_},j)=>{var R,M;const I=w+x;(M=(R=j.scrollElement)==null?void 0:R.scrollTo)==null||M.call(R,{[j.options.horizontal?"left":"top"]:I,behavior:_})},m=(w,{adjustments:x=0,behavior:_},j)=>{var R,M;const I=w+x;(M=(R=j.scrollElement)==null?void 0:R.scrollTo)==null||M.call(R,{[j.options.horizontal?"left":"top"]:I,behavior:_})};class b{constructor(x){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let _=null;const j=()=>_||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:_=new this.targetWindow.ResizeObserver(R=>{R.forEach(M=>{const I=()=>{this._measureElement(M.target,M)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(I):I()})}));return{disconnect:()=>{var R;(R=j())==null||R.disconnect(),_=null},observe:R=>{var M;return(M=j())==null?void 0:M.observe(R,{box:"border-box"})},unobserve:R=>{var M;return(M=j())==null?void 0:M.unobserve(R)}}})(),this.range=null,this.setOptions=_=>{Object.entries(_).forEach(([j,R])=>{typeof R>"u"&&delete _[j]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:s,rangeExtractor:l,onChange:()=>{},measureElement:h,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,..._}},this.notify=_=>{var j,R;(R=(j=this.options).onChange)==null||R.call(j,this,_)},this.maybeNotify=n.memo(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),_=>{this.notify(_)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(_=>_()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var _;const j=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==j){if(this.cleanup(),!j){this.maybeNotify();return}this.scrollElement=j,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((_=this.scrollElement)==null?void 0:_.window)??null,this.elementsCache.forEach(R=>{this.observer.observe(R)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,R=>{this.scrollRect=R,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(R,M)=>{this.scrollAdjustments=0,this.scrollDirection=M?this.getScrollOffset()<R?"forward":"backward":null,this.scrollOffset=R,this.isScrolling=M,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(_,j)=>{const R=new Map,M=new Map;for(let I=j-1;I>=0;I--){const F=_[I];if(R.has(F.lane))continue;const B=M.get(F.lane);if(B==null||F.end>B.end?M.set(F.lane,F):F.end<B.end&&R.set(F.lane,!0),R.size===this.options.lanes)break}return M.size===this.options.lanes?Array.from(M.values()).sort((I,F)=>I.end===F.end?I.index-F.index:I.end-F.end)[0]:void 0},this.getMeasurementOptions=n.memo(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(_,j,R,M,I)=>(this.pendingMeasuredCacheIndexes=[],{count:_,paddingStart:j,scrollMargin:R,getItemKey:M,enabled:I}),{key:!1}),this.getMeasurements=n.memo(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:_,paddingStart:j,scrollMargin:R,getItemKey:M,enabled:I},F)=>{if(!I)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(Q=>{this.itemSizeCache.set(Q.key,Q.size)}));const B=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const U=this.measurementsCache.slice(0,B);for(let Q=B;Q<_;Q++){const K=M(Q),T=this.options.lanes===1?U[Q-1]:this.getFurthestMeasurement(U,Q),P=T?T.end+this.options.gap:j+R,A=F.get(K),N=typeof A=="number"?A:this.options.estimateSize(Q),k=P+N,S=T?T.lane:Q%this.options.lanes;U[Q]={index:Q,start:P,size:N,end:k,key:K,lane:S}}return this.measurementsCache=U,U},{key:!1,debug:()=>this.options.debug}),this.calculateRange=n.memo(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(_,j,R,M)=>this.range=_.length>0&&j>0?g({measurements:_,outerSize:j,scrollOffset:R,lanes:M}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=n.memo(()=>{let _=null,j=null;const R=this.calculateRange();return R&&(_=R.startIndex,j=R.endIndex),this.maybeNotify.updateDeps([this.isScrolling,_,j]),[this.options.rangeExtractor,this.options.overscan,this.options.count,_,j]},(_,j,R,M,I)=>M===null||I===null?[]:_({startIndex:M,endIndex:I,overscan:j,count:R}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=_=>{const j=this.options.indexAttribute,R=_.getAttribute(j);return R?parseInt(R,10):(console.warn(`Missing attribute name '${j}={index}' on measured element.`),-1)},this._measureElement=(_,j)=>{const R=this.indexFromElement(_),M=this.measurementsCache[R];if(!M)return;const I=M.key,F=this.elementsCache.get(I);F!==_&&(F&&this.observer.unobserve(F),this.observer.observe(_),this.elementsCache.set(I,_)),_.isConnected&&this.resizeItem(R,this.options.measureElement(_,j,this))},this.resizeItem=(_,j)=>{const R=this.measurementsCache[_];if(!R)return;const M=this.itemSizeCache.get(R.key)??R.size,I=j-M;I!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(R,I,this):R.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=I,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(R.index),this.itemSizeCache=new Map(this.itemSizeCache.set(R.key,j)),this.notify(!1))},this.measureElement=_=>{if(!_){this.elementsCache.forEach((j,R)=>{j.isConnected||(this.observer.unobserve(j),this.elementsCache.delete(R))});return}this._measureElement(_,void 0)},this.getVirtualItems=n.memo(()=>[this.getVirtualIndexes(),this.getMeasurements()],(_,j)=>{const R=[];for(let M=0,I=_.length;M<I;M++){const F=_[M],B=j[F];R.push(B)}return R},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=_=>{const j=this.getMeasurements();if(j.length!==0)return n.notUndefined(j[y(0,j.length-1,R=>n.notUndefined(j[R]).start,_)])},this.getOffsetForAlignment=(_,j,R=0)=>{const M=this.getSize(),I=this.getScrollOffset();j==="auto"&&(j=_>=I+M?"end":"start"),j==="center"?_+=(R-M)/2:j==="end"&&(_-=M);const F=this.getTotalSize()+this.options.scrollMargin-M;return Math.max(Math.min(F,_),0)},this.getOffsetForIndex=(_,j="auto")=>{_=Math.max(0,Math.min(_,this.options.count-1));const R=this.measurementsCache[_];if(!R)return;const M=this.getSize(),I=this.getScrollOffset();if(j==="auto")if(R.end>=I+M-this.options.scrollPaddingEnd)j="end";else if(R.start<=I+this.options.scrollPaddingStart)j="start";else return[I,j];const F=j==="end"?R.end+this.options.scrollPaddingEnd:R.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(F,j,R.size),j]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(_,{align:j="start",behavior:R}={})=>{R==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(_,j),{adjustments:void 0,behavior:R})},this.scrollToIndex=(_,{align:j="auto",behavior:R}={})=>{R==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),_=Math.max(0,Math.min(_,this.options.count-1));let M=0;const I=10,F=U=>{if(!this.targetWindow)return;const Q=this.getOffsetForIndex(_,U);if(!Q){console.warn("Failed to get offset for index:",_);return}const[K,T]=Q;this._scrollToOffset(K,{adjustments:void 0,behavior:R}),this.targetWindow.requestAnimationFrame(()=>{const P=this.getScrollOffset(),A=this.getOffsetForIndex(_,T);if(!A){console.warn("Failed to get offset for index:",_);return}n.approxEqual(A[0],P)||B(T)})},B=U=>{this.targetWindow&&(M++,M<I?this.targetWindow.requestAnimationFrame(()=>F(U)):console.warn(`Failed to scroll to index ${_} after ${I} attempts.`))};F(j)},this.scrollBy=(_,{behavior:j}={})=>{j==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+_,{adjustments:void 0,behavior:j})},this.getTotalSize=()=>{var _;const j=this.getMeasurements();let R;if(j.length===0)R=this.options.paddingStart;else if(this.options.lanes===1)R=((_=j[j.length-1])==null?void 0:_.end)??0;else{const M=Array(this.options.lanes).fill(null);let I=j.length-1;for(;I>=0&&M.some(F=>F===null);){const F=j[I];M[F.lane]===null&&(M[F.lane]=F.end),I--}R=Math.max(...M.filter(F=>F!==null))}return Math.max(R-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(_,{adjustments:j,behavior:R})=>{this.options.scrollToFn(_,{behavior:R,adjustments:j},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(x)}}const y=(w,x,_,j)=>{for(;w<=x;){const R=(w+x)/2|0,M=_(R);if(M<j)w=R+1;else if(M>j)x=R-1;else return R}return w>0?w-1:0};function g({measurements:w,outerSize:x,scrollOffset:_,lanes:j}){const R=w.length-1,M=B=>w[B].start;if(w.length<=j)return{startIndex:0,endIndex:R};let I=y(0,R,M,_),F=I;if(j===1)for(;F<R&&w[F].end<_+x;)F++;else if(j>1){const B=Array(j).fill(0);for(;F<R&&B.some(Q=>Q<_+x);){const Q=w[F];B[Q.lane]=Q.end,F++}const U=Array(j).fill(_+x);for(;I>=0&&U.some(Q=>Q>=_);){const Q=w[I];U[Q.lane]=Q.start,I--}I=Math.max(0,I-I%j),F=Math.min(R,F+(j-1-F%j))}return{startIndex:I,endIndex:F}}e.approxEqual=n.approxEqual,e.debounce=n.debounce,e.memo=n.memo,e.notUndefined=n.notUndefined,e.Virtualizer=b,e.defaultKeyExtractor=s,e.defaultRangeExtractor=l,e.elementScroll=m,e.measureElement=h,e.observeElementOffset=a,e.observeElementRect=i,e.observeWindowOffset=u,e.observeWindowRect=d,e.windowScroll=f}(Zg)),Zg}var a3;function pq(){return a3||(a3=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const n=Br(),t=dy(),s=mq();function l(u){const h=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(u){for(const f in u)if(f!=="default"){const m=Object.getOwnPropertyDescriptor(u,f);Object.defineProperty(h,f,m.get?m:{enumerable:!0,get:()=>u[f]})}}return h.default=u,Object.freeze(h)}const i=l(n),o=typeof document<"u"?i.useLayoutEffect:i.useEffect;function d(u){const h=i.useReducer(()=>({}),{})[1],f={...u,onChange:(b,y)=>{var g;y?t.flushSync(h):h(),(g=u.onChange)==null||g.call(u,b,y)}},[m]=i.useState(()=>new s.Virtualizer(f));return m.setOptions(f),o(()=>m._didMount(),[]),o(()=>m._willUpdate()),m}function c(u){return d({observeElementRect:s.observeElementRect,observeElementOffset:s.observeElementOffset,scrollToFn:s.elementScroll,...u})}function a(u){return d({getScrollElement:()=>typeof document<"u"?window:null,observeElementRect:s.observeWindowRect,observeElementOffset:s.observeWindowOffset,scrollToFn:s.windowScroll,initialOffset:()=>typeof document<"u"?window.scrollY:0,...u})}e.useVirtualizer=c,e.useWindowVirtualizer=a,Object.keys(s).forEach(u=>{u!=="default"&&!Object.prototype.hasOwnProperty.call(e,u)&&Object.defineProperty(e,u,{enumerable:!0,get:()=>s[u]})})}(Yg)),Yg}var eb={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var i3;function xc(){return i3||(i3=1,function(e){(function(){var n={}.hasOwnProperty;function t(){for(var i="",o=0;o<arguments.length;o++){var d=arguments[o];d&&(i=l(i,s(d)))}return i}function s(i){if(typeof i=="string"||typeof i=="number")return i;if(typeof i!="object")return"";if(Array.isArray(i))return t.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var o="";for(var d in i)n.call(i,d)&&i[d]&&(o=l(o,d));return o}function l(i,o){return o?i?i+" "+o:i+o:i}e.exports?(t.default=t,e.exports=t):window.classNames=t})()}(eb)),eb.exports}var Mo={},o3;function gq(){if(o3)return Mo;o3=1;var e=Mo&&Mo.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Mo,"__esModule",{value:!0}),Mo.Cell=void 0;const n=e(Br()),t=e(xc()),s=({children:l,gutter:i,stickyRight:o,active:d,disabled:c,className:a,width:u,left:h})=>n.default.createElement("div",{className:(0,t.default)("dsg-cell",i&&"dsg-cell-gutter",c&&"dsg-cell-disabled",i&&d&&"dsg-cell-gutter-active",o&&"dsg-cell-sticky-right",a),style:{width:u,left:o?void 0:h}},l);return Mo.Cell=s,Mo}var Bd={},l3;function bq(){if(l3)return Bd;l3=1,Object.defineProperty(Bd,"__esModule",{value:!0}),Bd.useMemoizedIndexCallback=void 0;const e=Br(),n=(t,s)=>(0,e.useMemo)(()=>{const l=new Map;return i=>(l.has(i)||l.set(i,(...o)=>{t(i,...o.slice(0,s))}),l.get(i))},[s,t]);return Bd.useMemoizedIndexCallback=n,Bd}var c3;function yq(){if(c3)return ks;c3=1;var e=ks&&ks.__createBinding||(Object.create?function(u,h,f,m){m===void 0&&(m=f);var b=Object.getOwnPropertyDescriptor(h,f);(!b||("get"in b?!h.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return h[f]}}),Object.defineProperty(u,m,b)}:function(u,h,f,m){m===void 0&&(m=f),u[m]=h[f]}),n=ks&&ks.__setModuleDefault||(Object.create?function(u,h){Object.defineProperty(u,"default",{enumerable:!0,value:h})}:function(u,h){u.default=h}),t=ks&&ks.__importStar||function(u){if(u&&u.__esModule)return u;var h={};if(u!=null)for(var f in u)f!=="default"&&Object.prototype.hasOwnProperty.call(u,f)&&e(h,u,f);return n(h,u),h},s=ks&&ks.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(ks,"__esModule",{value:!0}),ks.Grid=void 0;const l=pq(),i=t(Br()),o=s(xc()),d=gq(),c=bq(),a=({data:u,columns:h,outerRef:f,innerRef:m,columnWidths:b,hasStickyRightColumn:y,displayHeight:g,headerRowHeight:w,rowHeight:x,rowKey:_,fullWidth:j,selection:R,activeCell:M,rowClassName:I,cellClassName:F,children:B,editing:U,getContextMenuItems:Q,setRowData:K,deleteRows:T,duplicateRows:P,insertRowAfter:A,stopEditing:N,onScroll:k})=>{var S,E,O,L;const z=(0,l.useVirtualizer)({count:u.length,getScrollElement:()=>f.current,paddingStart:w,estimateSize:oe=>x(oe).height,getItemKey:oe=>{if(_&&oe>0){const ae=u[oe-1];if(typeof _=="function")return _({rowData:ae,rowIndex:oe});if(typeof _=="string"&&ae instanceof Object&&_ in ae){const ce=ae[_];if(typeof ce=="string"||typeof ce=="number")return ce}}return oe},overscan:5}),G=(0,l.useVirtualizer)({count:h.length,getScrollElement:()=>f.current,estimateSize:oe=>{var ae;return(ae=b?.[oe])!==null&&ae!==void 0?ae:100},horizontal:!0,getItemKey:oe=>{var ae;return(ae=h[oe].id)!==null&&ae!==void 0?ae:oe},overscan:1,rangeExtractor:oe=>{const ae=(0,l.defaultRangeExtractor)(oe);return ae[0]!==0&&ae.unshift(0),y&&ae[ae.length-1]!==h.length-1&&ae.push(h.length-1),ae}});(0,i.useEffect)(()=>{G.measure()},[G,b]);const Z=(0,c.useMemoizedIndexCallback)(K,1),ee=(0,c.useMemoizedIndexCallback)(T,0),W=(0,c.useMemoizedIndexCallback)(P,0),J=(0,c.useMemoizedIndexCallback)(A,0),$=(S=R?.min.col)!==null&&S!==void 0?S:M?.col,q=(E=R?.max.col)!==null&&E!==void 0?E:M?.col,Y=(O=R?.min.row)!==null&&O!==void 0?O:M?.row,se=(L=R?.max.row)!==null&&L!==void 0?L:M?.row;return i.default.createElement("div",{ref:f,className:"dsg-container",onScroll:k,style:{height:g}},i.default.createElement("div",{ref:m,style:{width:j?"100%":G.getTotalSize(),height:z.getTotalSize()}},w>0&&i.default.createElement("div",{className:(0,o.default)("dsg-row","dsg-row-header"),style:{width:j?"100%":G.getTotalSize(),height:w}},G.getVirtualItems().map(oe=>i.default.createElement(d.Cell,{key:oe.key,gutter:oe.index===0,stickyRight:y&&oe.index===h.length-1,width:oe.size,left:oe.start,className:(0,o.default)("dsg-cell-header",$!==void 0&&q!==void 0&&$<=oe.index-1&&q>=oe.index-1&&"dsg-cell-header-active",h[oe.index].headerClassName)},i.default.createElement("div",{className:"dsg-cell-header-container"},h[oe.index].title)))),z.getVirtualItems().map(oe=>{const ae=oe.index>=(Y??1/0)&&oe.index<=(se??-1/0);return i.default.createElement("div",{key:oe.key,className:(0,o.default)("dsg-row",typeof I=="string"?I:null,typeof I=="function"?I({rowData:u[oe.index],rowIndex:oe.index}):null),style:{height:oe.size,top:oe.start,width:j?"100%":G.getTotalSize()}},G.getVirtualItems().map(ce=>{const we=h[ce.index].cellClassName,fe=h[ce.index].disabled,re=h[ce.index].component,ge=fe===!0||typeof fe=="function"&&fe({rowData:u[oe.index],rowIndex:oe.index}),le=M?.row===oe.index&&M.col===ce.index-1;return i.default.createElement(d.Cell,{key:ce.key,gutter:ce.index===0,stickyRight:y&&ce.index===h.length-1,active:ce.index===0&&ae,disabled:ge,className:(0,o.default)(typeof we=="function"?we({rowData:u[oe.index],rowIndex:oe.index,columnId:h[ce.index].id}):we,typeof F=="function"?F({rowData:u[oe.index],rowIndex:oe.index,columnId:h[ce.index].id}):F),width:ce.size,left:ce.start},i.default.createElement(re,{rowData:u[oe.index],getContextMenuItems:Q,disabled:ge,active:le,columnIndex:ce.index-1,rowIndex:oe.index,focus:le&&U,deleteRow:ee(oe.index),duplicateRow:W(oe.index),stopEditing:N,insertRowBelow:J(oe.index),setRowData:Z(oe.index),columnData:h[ce.index].columnData}))}))}),B))};return ks.Grid=a,ks}var oa={},d3;function xq(){return d3||(d3=1,function(e){var n=oa&&oa.__createBinding||(Object.create?function(a,u,h,f){f===void 0&&(f=h);var m=Object.getOwnPropertyDescriptor(u,h);(!m||("get"in m?!u.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return u[h]}}),Object.defineProperty(a,f,m)}:function(a,u,h,f){f===void 0&&(f=h),a[f]=u[h]}),t=oa&&oa.__setModuleDefault||(Object.create?function(a,u){Object.defineProperty(a,"default",{enumerable:!0,value:u})}:function(a,u){a.default=u}),s=oa&&oa.__importStar||function(a){if(a&&a.__esModule)return a;var u={};if(a!=null)for(var h in a)h!=="default"&&Object.prototype.hasOwnProperty.call(a,h)&&n(u,a,h);return t(u,a),u},l=oa&&oa.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0}),e.SelectionRect=void 0;const i=s(Br()),o=l(xc()),d=(a,u,h,f)=>[[f,a],[u,a],[u,h],[f,h],[f,a]],c=(a,u,h,f)=>`polygon(evenodd, ${[...d(0,"100%","100%",0),...d(a,u,h,f)].map(b=>b.map(y=>typeof y=="number"&&y!==0?y+"px":y).join(" ")).join(",")})`;e.SelectionRect=i.default.memo(({columnWidths:a,columnRights:u,headerRowHeight:h,selection:f,rowHeight:m,activeCell:b,hasStickyRightColumn:y,dataLength:g,viewWidth:w,viewHeight:x,contentWidth:_,edges:j,isCellDisabled:R,editing:M,expandSelection:I})=>{var F,B,U,Q;const K=b?R(b):!1,T=(0,i.useMemo)(()=>{if(!f)return K;for(let z=f.min.col;z<=f.max.col;++z)for(let G=f.min.row;G<=f.max.row;++G)if(!R({col:z,row:G}))return!1;return!0},[K,R,f]);if(!a||!u)return null;const P=z=>z<g-1?1:0,A=z=>z<a.length-(y?3:2)?1:0,N=b&&{width:a[b.col+1]+A(b.col),height:m(b.row).height+P(b.row),left:u[b.col],top:m(b.row).top+h},k=f&&{width:a.slice(f.min.col+1,f.max.col+2).reduce((z,G)=>z+G)+A(f.max.col),height:m(f.max.row).top+m(f.max.row).height-m(f.min.row).top+P(f.max.row),left:u[f.min.col],top:m(f.min.row).top+h},S=f?.min||b,E=f?.max||b,O=E&&I!==null&&{left:u[E.col]+a[E.col+1],top:m(E.row).top+m(E.row).height+h,transform:`translate(-${E.col<a.length-(y?3:2)?50:100}%, -${E.row<g-1?50:100}%)`},L=S&&E&&I!==null&&{width:a.slice(S.col+1,E.col+2).reduce((z,G)=>z+G)+A(E.col),height:m(E.row+I).top+m(E.row+I).height-m(E.row+1).top+P(E.row+I)-1,left:u[S.col],top:m(E.row).top+m(E.row).height+h+1};return i.default.createElement(i.default.Fragment,null,i.default.createElement("div",{className:"dsg-scrollable-view-container",style:{height:m(g-1).top+m(g-1).height+h,width:_||"100%"}},i.default.createElement("div",{className:(0,o.default)({"dsg-scrollable-view":!0,"dsg-scrollable-view-t":!j.top,"dsg-scrollable-view-r":!j.right,"dsg-scrollable-view-b":!j.bottom,"dsg-scrollable-view-l":!j.left}),style:{top:h,left:a[0],height:x?x-h:0,width:_&&w?w-a[0]-(y?a[a.length-1]:0):`calc(100% - ${a[0]+(y?a[a.length-1]:0)}px)`}})),(k||N)&&i.default.createElement("div",{className:"dsg-selection-col-marker-container",style:{left:(F=k?.left)!==null&&F!==void 0?F:N?.left,width:(B=k?.width)!==null&&B!==void 0?B:N?.width,height:m(g-1).top+m(g-1).height+h}},i.default.createElement("div",{className:(0,o.default)("dsg-selection-col-marker",T&&"dsg-selection-col-marker-disabled"),style:{top:h}})),(k||N)&&i.default.createElement("div",{className:"dsg-selection-row-marker-container",style:{top:(U=k?.top)!==null&&U!==void 0?U:N?.top,height:(Q=k?.height)!==null&&Q!==void 0?Q:N?.height,width:_||"100%"}},i.default.createElement("div",{className:(0,o.default)("dsg-selection-row-marker",T&&"dsg-selection-row-marker-disabled"),style:{left:a[0]}})),N&&b&&i.default.createElement("div",{className:(0,o.default)("dsg-active-cell",{"dsg-active-cell-focus":M,"dsg-active-cell-disabled":K}),style:N}),k&&N&&i.default.createElement("div",{className:(0,o.default)("dsg-selection-rect",T&&"dsg-selection-rect-disabled"),style:Object.assign(Object.assign({},k),{clipPath:c(N.top-k.top,N.left-k.left,N.top+N.height-k.top,N.left+N.width-k.left)})}),L&&i.default.createElement("div",{className:(0,o.default)("dsg-expand-rows-rect"),style:L}),O&&i.default.createElement("div",{className:(0,o.default)("dsg-expand-rows-indicator",T&&"dsg-expand-rows-indicator-disabled"),style:O}))}),e.SelectionRect.displayName="SelectionRect"}(oa)),oa}var qd={},u3;function vq(){if(u3)return qd;u3=1,Object.defineProperty(qd,"__esModule",{value:!0}),qd.useRowHeights=void 0;const e=Br(),n=({value:t,rowHeight:s})=>{const l=(0,e.useRef)([]),[,i]=(0,e.useState)(0);return(0,e.useMemo)(()=>{const o=d=>{if(typeof s=="number")return Math.min(t.length-1,Math.max(-1,Math.floor(d/s)));let c=0,a=l.current.length-1;for(;c<=a;){const u=Math.floor((c+a)/2);if(l.current[u].top<d)c=u+1;else if(l.current[u].top>d)a=u-1;else return u}if(a===l.current.length-1&&t.length>l.current.length&&(!l.current.length||d>=l.current[a].top+l.current[a].height)){let u=a===-1?0:l.current[a].top+l.current[a].height;do{a++;const h=s({rowIndex:a,rowData:t[a]});l.current.push({height:h,top:u}),u+=h}while(u<=d&&a<l.current.length-1)}return a};return{resetAfter:d=>{l.current=l.current.slice(0,d),i(c=>c+1)},getRowSize:d=>{if(typeof s=="number")return{height:s,top:s*d};if(d>=t.length)return{height:0,top:0};if(d<l.current.length)return l.current[d];let c=l.current[l.current.length-1].top+l.current[l.current.length-1].height;for(let a=l.current.length;a<=d;a++){const u=s({rowIndex:a,rowData:t[a]});l.current.push({height:u,top:c}),c+=u}return l.current[d]},getRowIndex:o,totalSize:d=>{if(typeof s=="number")return t.length*s;const c=o(d);return l.current[c].top+l.current[c].height}}},[s,t])};return qd.useRowHeights=n,qd}var f3;function rN(){return f3||(f3=1,function(e){var n=Ss&&Ss.__createBinding||(Object.create?function(T,P,A,N){N===void 0&&(N=A);var k=Object.getOwnPropertyDescriptor(P,A);(!k||("get"in k?!P.__esModule:k.writable||k.configurable))&&(k={enumerable:!0,get:function(){return P[A]}}),Object.defineProperty(T,N,k)}:function(T,P,A,N){N===void 0&&(N=A),T[N]=P[A]}),t=Ss&&Ss.__setModuleDefault||(Object.create?function(T,P){Object.defineProperty(T,"default",{enumerable:!0,value:P})}:function(T,P){T.default=P}),s=Ss&&Ss.__importStar||function(T){if(T&&T.__esModule)return T;var P={};if(T!=null)for(var A in T)A!=="default"&&Object.prototype.hasOwnProperty.call(T,A)&&n(P,T,A);return t(P,T),P},l=Ss&&Ss.__awaiter||function(T,P,A,N){function k(S){return S instanceof A?S:new A(function(E){E(S)})}return new(A||(A=Promise))(function(S,E){function O(G){try{z(N.next(G))}catch(Z){E(Z)}}function L(G){try{z(N.throw(G))}catch(Z){E(Z)}}function z(G){G.done?S(G.value):k(G.value).then(O,L)}z((N=N.apply(T,P||[])).next())})},i=Ss&&Ss.__importDefault||function(T){return T&&T.__esModule?T:{default:T}};Object.defineProperty(e,"__esModule",{value:!0}),e.DataSheetGrid=void 0;const o=s(Br()),d=Xz(),c=sq,a=aq(),u=iq(),h=Z5(),f=J5(),m=oq(),b=eN(),y=lq(),g=i(Y5()),w=tN(),x=dq(),_=uq(),j=fq(),R=yq(),M=xq(),I=vq(),F=[],B=[],U=()=>({}),Q=()=>null,K=({rowData:T})=>Object.assign({},T);e.DataSheetGrid=o.default.memo(o.default.forwardRef(({value:T=F,className:P,style:A,height:N=400,onChange:k=Q,columns:S=B,rowHeight:E=40,headerRowHeight:O=typeof E=="number"?E:40,gutterColumn:L,stickyRightColumn:z,rowKey:G,addRowsComponent:Z=b.AddRows,createRow:ee=U,autoAddRow:W=!1,lockRows:J=!1,disableExpandSelection:$=!1,disableSmartDelete:q=!1,duplicateRow:Y=K,contextMenuComponent:se=w.ContextMenu,disableContextMenu:oe=!1,onFocus:ae=Q,onBlur:ce=Q,onActiveCellChange:we=Q,onSelectionChange:fe=Q,rowClassName:re,cellClassName:ge,onScroll:le},te)=>{var ie,ue,_e,je,ke,Le;const Ue=(0,o.useRef)(null),Qe=oe||J,Be=(0,a.useColumns)(S,L,z),ct=!!z,ft=(0,o.useRef)(null),_t=(0,o.useRef)(null),ut=(0,o.useRef)(null),lt=(0,o.useRef)(null),[ht,jt]=(0,y.useDebounceState)(1,100),{getRowSize:pt,totalSize:Qt,getRowIndex:sr}=(0,I.useRowHeights)({value:T,rowHeight:E}),Ot=Math.min(N,O+Qt(N)+ht),{width:Xt,height:kt}=(0,c.useResizeDetector)({targetRef:_t,refreshMode:"throttle",refreshRate:100});jt(kt?Ot-kt:0);const Rt=(0,u.useEdges)(_t,Xt,kt),{fullWidth:$t,totalWidth:Ht,columnWidths:xt,columnRights:Mt}=(0,d.useColumnWidths)(Be,Xt),[be,xe]=(0,o.useState)(null),[Ee,qe]=(0,o.useState)([]),[Oe,he]=(0,o.useState)(!1),[ye,Te]=(0,o.useState)(0),[Fe,nt]=(0,o.useState)(null),[me,He]=(0,h.useDeepEqualState)(null),[at,Ze]=(0,h.useDeepEqualState)(null),Ce=(0,o.useMemo)(()=>me&&at&&{min:{col:Math.min(me.col,at.col),row:Math.min(me.row,at.row)},max:{col:Math.max(me.col,at.col),row:Math.max(me.row,at.row)}},[me,at]),[vt,mt]=(0,h.useDeepEqualState)({columns:!1,rows:!1,active:!1}),Ut=$||Oe||vt.active||me?.row===T?.length-1||Ce?.max.row===T?.length-1||me&&Be.slice(((ie=Ce?.min.col)!==null&&ie!==void 0?ie:me.col)+1,((ue=Ce?.max.col)!==null&&ue!==void 0?ue:me.col)+2).every(Se=>Se.disabled===!0)?null:ye,dr=(0,m.useGetBoundingClientRect)(ft),jr=(0,m.useGetBoundingClientRect)(_t);(0,o.useEffect)(()=>{var Se;me!==null&&(document.activeElement.blur(),(Se=window.getSelection())===null||Se===void 0||Se.removeAllRanges())},[me!==null]);const ar=(0,o.useCallback)((Se,dt=!1,rt=!1)=>{const Ke=dr(dt),Dt=rt&&jr(dt);if(Ke&&Mt&&xt){let nr=Se.clientX-Ke.left,bt=Se.clientY-Ke.top;return Dt&&(Se.clientY-Dt.top<=O&&(bt=0),Se.clientX-Dt.left<=xt[0]&&(nr=0),ct&&Dt.right-Se.clientX<=xt[xt.length-1]&&(nr=Mt[Mt.length-2]+1)),{col:Mt.findIndex(It=>nr<It)-1,row:sr(bt-O)}}return null},[Mt,xt,T.length,dr,jr,O,ct,sr]),ur=(0,o.useRef)(T);ur.current=T;const pe=(0,o.useCallback)(Se=>{const dt=Be[Se.col+1].disabled;return!!(typeof dt=="function"?dt({rowData:ur.current[Se.row],rowIndex:Se.row}):dt)},[Be]),Ae=(0,o.useCallback)((Se,dt=1)=>{J||(Ze(null),he(!1),k([...ur.current.slice(0,Se+1),...new Array(dt).fill(0).map(ee),...ur.current.slice(Se+1)],[{type:"CREATE",fromRowIndex:Se+1,toRowIndex:Se+1+dt}]),He(rt=>({col:rt?.col||0,row:Se+dt,doNotScrollX:!0})))},[ee,J,k,He,Ze]),Ge=(0,o.useCallback)((Se,dt=Se)=>{J||(k([...ur.current.slice(0,dt+1),...ur.current.slice(Se,dt+1).map((rt,Ke)=>Y({rowData:rt,rowIndex:Ke+Se})),...ur.current.slice(dt+1)],[{type:"CREATE",fromRowIndex:dt+1,toRowIndex:dt+2+dt-Se}]),He({col:0,row:dt+1,doNotScrollX:!0}),Ze({col:Be.length-(ct?3:2),row:2*dt-Se+1,doNotScrollX:!0}),he(!1))},[Be.length,Y,J,k,He,Ze,ct]),Je=(0,o.useCallback)(Se=>{if(!(!kt||!Xt)){if(!Se.doNotScrollY){const dt=pt(Se.row).top,rt=pt(Se.row).top+pt(Se.row).height+O-kt+1,Ke=_t.current.scrollTop;Ke>dt?_t.current.scrollTop=dt:Ke<rt&&(_t.current.scrollTop=rt)}if(Mt&&xt&&_t.current&&!Se.doNotScrollX){const dt=Mt[Se.col]-Mt[0],rt=Mt[Se.col]+xt[Se.col+1]+(ct?xt[xt.length-1]:0)-Xt+1,Ke=_t.current.scrollLeft;Ke>dt?_t.current.scrollLeft=dt:Ke<rt&&(_t.current.scrollLeft=rt)}}},[kt,Xt,O,Mt,xt,pt,ct]);(0,o.useEffect)(()=>{at&&Je(at)},[at,Je]),(0,o.useEffect)(()=>{me&&Je(me)},[me,Je]);const Ct=(0,o.useCallback)((Se,dt)=>{var rt,Ke;k([...(rt=ur.current)===null||rt===void 0?void 0:rt.slice(0,Se),dt,...(Ke=ur.current)===null||Ke===void 0?void 0:Ke.slice(Se+1)],[{type:"UPDATE",fromRowIndex:Se,toRowIndex:Se+1}])},[k]),We=(0,o.useCallback)((Se,dt=Se)=>{J||(he(!1),He(rt=>{const Ke=Math.min(ur.current.length-2-dt+Se,Se);return Ke<0?null:rt&&{col:rt.col,row:Ke}}),Ze(null),k([...ur.current.slice(0,Se),...ur.current.slice(dt+1)],[{type:"DELETE",fromRowIndex:Se,toRowIndex:dt+1}]))},[J,k,He,Ze]),ot=(0,o.useCallback)((Se=!0)=>{const dt=Se&&!q;if(!me)return;const rt=Ce?.min||me,Ke=Ce?.max||me;if(T.slice(rt.row,Ke.row+1).every((nr,bt)=>Be.every(It=>It.isCellEmpty({rowData:nr,rowIndex:bt+rt.row})))){dt&&We(rt.row,Ke.row);return}const Dt=[...T];for(let nr=rt.row;nr<=Ke.row;++nr)for(let bt=rt.col;bt<=Ke.col;++bt)if(!pe({col:bt,row:nr})){const{deleteValue:It=({rowData:lr})=>lr}=Be[bt+1];Dt[nr]=It({rowData:Dt[nr],rowIndex:nr})}if(dt&&(0,g.default)(Dt,T)){He({col:0,row:rt.row,doNotScrollX:!0}),Ze({col:Be.length-(ct?3:2),row:Ke.row,doNotScrollX:!0});return}k(Dt,[{type:"UPDATE",fromRowIndex:rt.row,toRowIndex:Ke.row+1}])},[me,Be,T,We,pe,k,Ce?.max,Ce?.min,He,Ze,ct]),Jt=(0,o.useCallback)(({nextRow:Se=!0}={})=>{me?.row===ur.current.length-1?Se&&W?Ae(me.row):he(!1):(he(!1),Se&&He(dt=>dt&&{col:dt.col,row:dt.row+1}))},[me?.row,W,Ae,He]),Ft=(0,o.useCallback)(Se=>l(void 0,void 0,void 0,function*(){var dt,rt;if(!Oe&&me){const Ke=[],Dt=Ce?.min||me,nr=Ce?.max||me;for(let zt=Dt.row;zt<=nr.row;++zt){Ke.push([]);for(let Nr=Dt.col;Nr<=nr.col;++Nr){const{copyValue:Sr=()=>null}=Be[Nr+1];Ke[zt-Dt.row].push(Sr({rowData:T[zt],rowIndex:zt}))}}const bt=Ke.map(zt=>zt.join("	")).join(`
`),It=`<table>${Ke.map(zt=>`<tr>${zt.map(Nr=>`<td>${(0,x.encodeHtml)(String(Nr??"")).replace(/\n/g,"<br/>")}</td>`).join("")}</tr>`).join("")}</table>`;if(Se!==void 0){(dt=Se.clipboardData)===null||dt===void 0||dt.setData("text/plain",bt),(rt=Se.clipboardData)===null||rt===void 0||rt.setData("text/html",It),Se.preventDefault();return}let lr=!1;if(navigator.clipboard.write!==void 0){const zt=new Blob([bt],{type:"text/plain"}),Nr=new Blob([It],{type:"text/html"}),Sr=[new ClipboardItem({"text/plain":zt,"text/html":Nr})];yield navigator.clipboard.write(Sr).then(()=>{lr=!0})}else navigator.clipboard.writeText!==void 0?yield navigator.clipboard.writeText(bt).then(()=>{lr=!0}):document.execCommand!==void 0&&document.execCommand("copy")&&(lr=!0);lr||alert("This action is unavailable in your browser, but you can still use Ctrl+C for copy or Ctrl+X for cut")}}),[me,Be,T,Oe,Ce]);(0,f.useDocumentEventListener)("copy",Ft);const Tt=(0,o.useCallback)(Se=>{!Oe&&me&&(Ft(Se),ot(!1))},[me,ot,Oe,Ft]);(0,f.useDocumentEventListener)("cut",Tt);const At=(0,o.useCallback)(Se=>l(void 0,void 0,void 0,function*(){var dt,rt;if(!Oe&&me){const Ke=Ce?.min||me,Dt=Ce?.max||me,nr=yield Promise.all(Se[0].map((bt,It)=>{var lr,zt;const Nr=(lr=Be[Ke.col+It+1])===null||lr===void 0?void 0:lr.prePasteValues,Sr=Se.map(tn=>tn[It]);return(zt=Nr?.(Sr))!==null&&zt!==void 0?zt:Sr}));if(Se=Se.map((bt,It)=>nr.map(lr=>lr[It])),Se.length===1){const bt=[...T];for(let It=0;It<Se[0].length;It++){const lr=(dt=Be[Ke.col+It+1])===null||dt===void 0?void 0:dt.pasteValue;if(lr)for(let zt=Ke.row;zt<=Dt.row;zt++)pe({col:It+Ke.col,row:zt})||(bt[zt]=yield lr({rowData:bt[zt],value:Se[0][It],rowIndex:zt}))}k(bt,[{type:"UPDATE",fromRowIndex:Ke.row,toRowIndex:Dt.row+1}]),He({col:Ke.col,row:Ke.row}),Ze({col:Math.min(Ke.col+Se[0].length-1,Be.length-(ct?3:2)),row:Dt.row})}else{let bt=[...T];const It=Ke.row+Se.length-T.length;It>0&&(J?Se.splice(Se.length-It,It):bt=[...bt,...new Array(It).fill(0).map(()=>ee())]);for(let zt=0;zt<Se[0].length&&Ke.col+zt<Be.length-(ct?2:1);zt++){const Nr=(rt=Be[Ke.col+zt+1])===null||rt===void 0?void 0:rt.pasteValue;if(Nr)for(let Sr=0;Sr<Se.length;Sr++)pe({col:Ke.col+zt,row:Ke.row+Sr})||(bt[Ke.row+Sr]=yield Nr({rowData:bt[Ke.row+Sr],value:Se[Sr][zt],rowIndex:Ke.row+Sr}))}const lr=[{type:"UPDATE",fromRowIndex:Ke.row,toRowIndex:Ke.row+Se.length-(!J&&It>0?It:0)}];It>0&&!J&&lr.push({type:"CREATE",fromRowIndex:Ke.row+Se.length-It,toRowIndex:Ke.row+Se.length}),k(bt,lr),He({col:Ke.col,row:Ke.row}),Ze({col:Math.min(Ke.col+Se[0].length-1,Be.length-(ct?3:2)),row:Ke.row+Se.length-1})}}}),[me,Be,ee,T,Oe,ct,pe,J,k,Ce?.max,Ce?.min,He,Ze]),xr=(0,o.useCallback)(Se=>{var dt,rt,Ke,Dt,nr,bt;if(me&&!Oe){let It=[[""]];!((dt=Se.clipboardData)===null||dt===void 0)&&dt.types.includes("text/html")?It=(0,x.parseTextHtmlData)((rt=Se.clipboardData)===null||rt===void 0?void 0:rt.getData("text/html")):!((Ke=Se.clipboardData)===null||Ke===void 0)&&Ke.types.includes("text/plain")?It=(0,x.parseTextPlainData)((Dt=Se.clipboardData)===null||Dt===void 0?void 0:Dt.getData("text/plain")):!((nr=Se.clipboardData)===null||nr===void 0)&&nr.types.includes("text")&&(It=(0,x.parseTextPlainData)((bt=Se.clipboardData)===null||bt===void 0?void 0:bt.getData("text"))),At(It),Se.preventDefault()}},[me,At,Oe]);(0,f.useDocumentEventListener)("paste",xr);const vr=(0,o.useCallback)(Se=>{var dt,rt,Ke;if(be&&Ee.length)return;const Dt=Se.button===2||Se.button===0&&Se.ctrlKey,nr=((dt=ft.current)===null||dt===void 0?void 0:dt.contains(Se.target))||!1,bt=nr?ar(Se,!0,!0):null;if(!nr&&Oe&&me&&Be[me.col+1].keepFocus)return;if(Se.target instanceof HTMLElement&&Se.target.className.includes("dsg-expand-rows-indicator")){nt(Math.max((rt=me?.row)!==null&&rt!==void 0?rt:0,(Ke=Ce?.max.row)!==null&&Ke!==void 0?Ke:0));return}const It=bt&&me&&me.col===bt.col&&me.row===bt.row&&!pe(me);if(It&&Oe)return;const lr=bt?.col===Be.length-2&&ct,zt=Dt&&Ce&&bt&&bt.row>=Ce.min.row&&bt.row<=Ce.max.row&&bt.col>=Ce.min.col&&bt.col<=Ce.max.col,Nr=Dt&&Ce&&bt&&bt.row===-1&&bt.col>=Ce.min.col&&bt.col<=Ce.max.col,Sr=Dt&&Ce&&bt&&bt.row>=Ce.min.row&&bt.row<=Ce.max.row&&bt.col===-1,tn=lr&&Ce&&bt&&bt.row>=Ce.min.row&&bt.row<=Ce.max.row;if(Dt&&!Qe&&xe({x:Se.clientX,y:Se.clientY,cursorIndex:bt}),(!(Se.shiftKey&&me)||Dt)&&T.length>0&&He(bt&&{col:(zt||Nr)&&me?me.col:Math.max(0,lr?0:bt.col),row:(zt||Sr||tn)&&me?me.row:Math.max(0,bt.row),doNotScrollX:!!(zt&&me||lr||bt.col===-1),doNotScrollY:!!(zt&&me||bt.row===-1)}),It&&!Dt&&(Ue.current=me),he(!!(It&&!Dt)),mt(bt&&!Dt?{columns:bt.col!==-1&&!lr||!!(Se.shiftKey&&me),rows:bt.row!==-1||!!(Se.shiftKey&&me),active:!0}:{columns:!1,rows:!1,active:!1}),Se.shiftKey&&me&&!Dt)Ze(bt&&{col:Math.max(0,bt.col-(lr?1:0)),row:Math.max(0,bt.row)});else if(!zt){if(bt&&(bt?.col===-1||bt?.row===-1||lr)){let Hr=bt.col,cn=bt.row,Xr=!1,gn=!1;(bt.col===-1||lr)&&(Hr=Be.length-(ct?3:2),Xr=!0),bt.row===-1&&(cn=T.length-1,gn=!0),Nr&&at&&(Hr=at.col,gn=!0),(Sr||tn)&&at&&(cn=at.row,Xr=!0),Ze({col:Hr,row:cn,doNotScrollX:Xr,doNotScrollY:gn})}else Ze(null);nr&&Se.preventDefault()}},[be,Ee.length,ar,Oe,me,Be,pe,Ce,ct,Qe,mt,He,Ze,at,T.length]);(0,f.useDocumentEventListener)("mousedown",vr);const rr=(0,o.useCallback)(()=>{var Se,dt,rt,Ke,Dt,nr,bt,It,lr;if(Fe!==null){if(ye>0&&me){let zt=[];const Nr=Ce?.min||me,Sr=Ce?.max||me;for(let tn=Nr.row;tn<=Sr.row;++tn){zt.push([]);for(let Hr=Nr.col;Hr<=Sr.col;++Hr){const{copyValue:cn=()=>null}=Be[Hr+1];zt[tn-Nr.row].push(String((Se=cn({rowData:T[tn],rowIndex:tn}))!==null&&Se!==void 0?Se:""))}}Promise.all(zt[0].map((tn,Hr)=>{var cn,Xr;const gn=(cn=Be[Nr.col+Hr+1])===null||cn===void 0?void 0:cn.prePasteValues,Qr=zt.map(ys=>ys[Hr]);return(Xr=gn?.(Qr))!==null&&Xr!==void 0?Xr:Qr})).then(tn=>{var Hr;zt=zt.map((Xr,gn)=>tn.map(Qr=>Qr[gn]));const cn=[...T];for(let Xr=0;Xr<zt[0].length;Xr++){const gn=(Hr=Be[Nr.col+Xr+1])===null||Hr===void 0?void 0:Hr.pasteValue;if(gn)for(let Qr=Sr.row+1;Qr<=Sr.row+ye;Qr++)pe({col:Xr+Nr.col,row:Qr})||(cn[Qr]=gn({rowData:cn[Qr],value:zt[(Qr-Sr.row-1)%zt.length][Xr],rowIndex:Qr}))}k(cn,[{type:"UPDATE",fromRowIndex:Sr.row+1,toRowIndex:Sr.row+1+ye}])}),Te(0),He({col:Math.min((dt=me?.col)!==null&&dt!==void 0?dt:1/0,(rt=Ce?.min.col)!==null&&rt!==void 0?rt:1/0),row:Math.min((Ke=me?.row)!==null&&Ke!==void 0?Ke:1/0,(Dt=Ce?.min.row)!==null&&Dt!==void 0?Dt:1/0),doNotScrollX:!0,doNotScrollY:!0}),Ze({col:Math.max((nr=me?.col)!==null&&nr!==void 0?nr:0,(bt=Ce?.max.col)!==null&&bt!==void 0?bt:0),row:Math.max((It=me?.row)!==null&&It!==void 0?It:0,(lr=Ce?.max.row)!==null&&lr!==void 0?lr:0)+ye})}nt(null)}mt({columns:!1,rows:!1,active:!1})},[Fe,mt,ye,me,Ce?.min,Ce?.max,T,k,He,Ze,Be,pe]);(0,f.useDocumentEventListener)("mouseup",rr);const Dr=(0,o.useCallback)(Se=>{if(Fe!==null){const dt=ar(Se);dt&&(Te(Math.max(0,dt.row-Fe)),Je({col:dt.col,row:Math.max(dt.row,Fe)}))}if(vt.active){const dt=ar(Se),rt=Be.length-(ct?3:2);Ze(dt&&{col:vt.columns?Math.max(0,Math.min(rt,dt.col)):rt,row:vt.rows?Math.max(0,dt.row):T.length-1,doNotScrollX:!vt.columns,doNotScrollY:!vt.rows}),he(!1)}},[Je,vt.active,vt.columns,vt.rows,ar,Be.length,ct,Ze,T.length,Fe]);(0,f.useDocumentEventListener)("mousemove",Dr);const Jr=(0,o.useCallback)(Se=>{var dt;if(me&&!Se.isComposing){if(Se.key==="Tab"&&!Se.shiftKey&&me.col===Be.length-(ct?3:2)&&!Be[me.col+1].disableKeys)if(me.row===T.length-1){if(lt.current){Se.preventDefault(),He(null),Ze(null),he(!1);const rt=(0,j.getAllTabbableElements)(),Ke=rt.indexOf(lt.current);rt[(Ke+1)%rt.length].focus();return}}else{He(rt=>{var Ke;return{col:0,row:((Ke=rt?.row)!==null&&Ke!==void 0?Ke:0)+1}}),Ze(null),he(!1),Se.preventDefault();return}if(Se.key==="Tab"&&Se.shiftKey&&me.col===0&&!Be[me.col+1].disableKeys)if(me.row===0){if(ut.current){Se.preventDefault(),He(null),Ze(null),he(!1);const rt=(0,j.getAllTabbableElements)(),Ke=rt.indexOf(ut.current);rt[(Ke-1+rt.length)%rt.length].focus();return}}else{He(rt=>{var Ke;return{col:Be.length-(ct?3:2),row:((Ke=rt?.row)!==null&&Ke!==void 0?Ke:1)-1}}),Ze(null),he(!1),Se.preventDefault();return}if(!((dt=Se.key)===null||dt===void 0)&&dt.startsWith("Arrow")||Se.key==="Tab"){if(Oe&&Be[me.col+1].disableKeys||Oe&&["ArrowLeft","ArrowRight"].includes(Se.key))return;const rt=([Ke,Dt],nr)=>nr&&{col:Math.max(0,Math.min(Be.length-(ct?3:2),nr.col+Ke)),row:Math.max(0,Math.min(T.length-1,nr.row+Dt))};if(Se.key==="Tab"&&Se.shiftKey)He(Ke=>rt([-1,0],Ke)),Ze(null);else{const Ke={ArrowDown:[0,1],ArrowUp:[0,-1],ArrowLeft:[-1,0],ArrowRight:[1,0],Tab:[1,0]}[Se.key];(Se.ctrlKey||Se.metaKey)&&(Ke[0]*=Be.length,Ke[1]*=T.length),Se.shiftKey?Ze(Dt=>rt(Ke,Dt||me)):(He(Dt=>rt(Ke,Dt)),Ze(null))}he(!1),Se.preventDefault()}else Se.key==="Escape"?(!Oe&&!at&&He(null),Ze(null),he(!1)):(Se.key==="Enter"||Se.key==="F2")&&!Se.ctrlKey&&!Se.metaKey&&!Se.altKey&&!Se.shiftKey?(Ze(null),Oe?Be[me.col+1].disableKeys||(Jt(),Se.preventDefault()):pe(me)||(Ue.current=me,he(!0),Je(me),Se.preventDefault())):Se.key==="Enter"&&!Se.ctrlKey&&!Se.metaKey&&!Se.altKey&&Se.shiftKey?Ae(Ce?.max.row||me.row):Se.key==="d"&&(Se.ctrlKey||Se.metaKey)&&!Se.altKey&&!Se.shiftKey?(Ge(Ce?.min.row||me.row,Ce?.max.row),Se.preventDefault()):((0,x.isPrintableUnicode)(Se.key)||Se.code.match(/Key[A-Z]$/))&&!Se.ctrlKey&&!Se.metaKey&&!Se.altKey?!Oe&&!pe(me)&&(Ue.current=me,Ze(null),he(!0),Je(me)):["Backspace","Delete"].includes(Se.key)?Oe||(ot(),Se.preventDefault()):Se.key==="a"&&(Se.ctrlKey||Se.metaKey)&&(Oe||(He({col:0,row:0,doNotScrollY:!0,doNotScrollX:!0}),Ze({col:Be.length-(ct?3:2),row:T.length-1,doNotScrollY:!0,doNotScrollX:!0}),Se.preventDefault()))}},[me,Be,T.length,ot,Ge,Oe,Ae,pe,Je,Ce?.max.row,Ce?.min.row,at,He,Ze,Jt,ct]);(0,f.useDocumentEventListener)("keydown",Jr);const en=(0,o.useCallback)(Se=>{var dt;const rt=((dt=ft.current)===null||dt===void 0?void 0:dt.contains(Se.target))||!1,Ke=rt?ar(Se,!0,!0):null,Dt=Ke&&me&&me.col===Ke.col&&me.row===Ke.row&&Oe;rt&&!Dt&&Se.preventDefault()},[ar,me,Oe]);(0,f.useDocumentEventListener)("contextmenu",en),(0,o.useEffect)(()=>{const Se=[];me?.row!==void 0&&Se.push({type:"COPY",action:()=>{Ft(),xe(null)}},{type:"CUT",action:()=>{Tt(),xe(null)}},{type:"PASTE",action:()=>l(void 0,void 0,void 0,function*(){if(navigator.clipboard.read!==void 0)(yield navigator.clipboard.read()).forEach(rt=>l(void 0,void 0,void 0,function*(){let Ke=[[""]];if(rt.types.includes("text/html")){const Dt=yield rt.getType("text/html");Ke=(0,x.parseTextHtmlData)(yield Dt.text())}else if(rt.types.includes("text/plain")){const Dt=yield rt.getType("text/plain");Ke=(0,x.parseTextPlainData)(yield Dt.text())}else if(rt.types.includes("text")){const Dt=yield rt.getType("text");Ke=(0,x.parseTextHtmlData)(yield Dt.text())}At(Ke)}));else if(navigator.clipboard.readText!==void 0){const dt=yield navigator.clipboard.readText();At((0,x.parseTextPlainData)(dt))}else alert("This action is unavailable in your browser, but you can still use Ctrl+V for paste");xe(null)})}),Ce?.max.row!==void 0?Se.push({type:"INSERT_ROW_BELLOW",action:()=>{xe(null),Ae(Ce.max.row)}}):me?.row!==void 0&&Se.push({type:"INSERT_ROW_BELLOW",action:()=>{xe(null),Ae(me.row)}}),Ce?.min.row!==void 0&&Ce.min.row!==Ce.max.row?Se.push({type:"DUPLICATE_ROWS",fromRow:Ce.min.row+1,toRow:Ce.max.row+1,action:()=>{xe(null),Ge(Ce.min.row,Ce.max.row)}}):me?.row!==void 0&&Se.push({type:"DUPLICATE_ROW",action:()=>{xe(null),Ge(me.row)}}),Ce?.min.row!==void 0&&Ce.min.row!==Ce.max.row?Se.push({type:"DELETE_ROWS",fromRow:Ce.min.row+1,toRow:Ce.max.row+1,action:()=>{xe(null),We(Ce.min.row,Ce.max.row)}}):me?.row!==void 0&&Se.push({type:"DELETE_ROW",action:()=>{xe(null),We(me.row)}}),qe(Se),Se.length||xe(null)},[Ce,me,We,Ge,Ae,Tt,Ft,At]);const Pn=(0,o.useRef)(Ee);Pn.current=Ee;const ns=(0,o.useCallback)(()=>Pn.current,[]);(0,o.useImperativeHandle)(te,()=>({activeCell:(0,_.getCellWithId)(me,Be),selection:(0,_.getSelectionWithId)(Ce??(me?{min:me,max:me}:null),Be),setSelection:Se=>{const dt=(0,_.getSelection)(Se,Be.length-(ct?2:1),T.length,Be);He(dt?.min||null),he(!1),mt({columns:!1,active:!1,rows:!1}),Ze(dt?.max||null)},setActiveCell:Se=>{const dt=(0,_.getCell)(Se,Be.length-(ct?2:1),T.length,Be);He(dt),he(!1),mt({columns:!1,active:!1,rows:!1}),Ze(null)}}));const In=(0,o.useRef)({onFocus:ae,onBlur:ce,onActiveCellChange:we,onSelectionChange:fe});return In.current.onFocus=ae,In.current.onBlur=ce,In.current.onActiveCellChange=we,In.current.onSelectionChange=fe,(0,o.useEffect)(()=>{Ue.current&&(Oe?In.current.onFocus({cell:(0,_.getCellWithId)(Ue.current,Be)}):In.current.onBlur({cell:(0,_.getCellWithId)(Ue.current,Be)}))},[Oe,Be]),(0,o.useEffect)(()=>{In.current.onActiveCellChange({cell:(0,_.getCellWithId)(me,Be)})},[me?.col,me?.row,Be]),(0,o.useEffect)(()=>{In.current.onSelectionChange({selection:(0,_.getSelectionWithId)(Ce??(me?{min:me,max:me}:null),Be)})},[(_e=Ce?.min.col)!==null&&_e!==void 0?_e:me?.col,(je=Ce?.min.row)!==null&&je!==void 0?je:me?.row,(ke=Ce?.max.col)!==null&&ke!==void 0?ke:me?.col,(Le=Ce?.max.row)!==null&&Le!==void 0?Le:me?.row,me?.col,me?.row,Be]),o.default.createElement("div",{className:P,style:A},o.default.createElement("div",{ref:ut,tabIndex:S.length&&T.length?0:void 0,onFocus:Se=>{Se.target.blur(),He({col:0,row:0})}}),o.default.createElement(R.Grid,{columns:Be,outerRef:_t,columnWidths:xt,hasStickyRightColumn:ct,displayHeight:Ot,data:T,fullWidth:$t,headerRowHeight:O,activeCell:me,innerRef:ft,rowHeight:pt,rowKey:G,selection:Ce,rowClassName:re,editing:Oe,getContextMenuItems:ns,setRowData:Ct,deleteRows:We,insertRowAfter:Ae,duplicateRows:Ge,stopEditing:Jt,cellClassName:ge,onScroll:le},o.default.createElement(M.SelectionRect,{columnRights:Mt,columnWidths:xt,activeCell:me,selection:Ce,headerRowHeight:O,rowHeight:pt,hasStickyRightColumn:ct,dataLength:T.length,viewHeight:kt,viewWidth:Xt,contentWidth:$t?void 0:Ht,edges:Rt,editing:Oe,isCellDisabled:pe,expandSelection:Ut})),o.default.createElement("div",{ref:lt,tabIndex:S.length&&T.length?0:void 0,onFocus:Se=>{Se.target.blur(),He({col:Be.length-(ct?3:2),row:T.length-1})}}),!J&&Z&&o.default.createElement(Z,{addRows:Se=>Ae(T.length-1,Se)}),be&&Ee.length>0&&o.default.createElement(se,{clientX:be.x,clientY:be.y,cursorIndex:be.cursorIndex,items:Ee,close:()=>xe(null)}))})),e.DataSheetGrid.displayName="DataSheetGrid"}(Ss)),Ss}var ii={},h3;function wq(){if(h3)return ii;h3=1;var e=ii&&ii.__rest||function(i,o){var d={};for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&o.indexOf(c)<0&&(d[c]=i[c]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,c=Object.getOwnPropertySymbols(i);a<c.length;a++)o.indexOf(c[a])<0&&Object.prototype.propertyIsEnumerable.call(i,c[a])&&(d[c[a]]=i[c[a]]);return d},n=ii&&ii.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(ii,"__esModule",{value:!0}),ii.StaticDataSheetGrid=void 0;const t=Br(),s=rN(),l=n(Br());return ii.StaticDataSheetGrid=l.default.forwardRef((i,o)=>{var{columns:d,gutterColumn:c,stickyRightColumn:a,addRowsComponent:u,createRow:h,duplicateRow:f,style:m,rowKey:b,onFocus:y,onBlur:g,onActiveCellChange:w,onSelectionChange:x,rowClassName:_,rowHeight:j}=i,R=e(i,["columns","gutterColumn","stickyRightColumn","addRowsComponent","createRow","duplicateRow","style","rowKey","onFocus","onBlur","onActiveCellChange","onSelectionChange","rowClassName","rowHeight"]);const[M]=(0,t.useState)({columns:d,gutterColumn:c,stickyRightColumn:a,addRowsComponent:u,createRow:h,duplicateRow:f,style:m,rowKey:b,onFocus:y,onBlur:g,onActiveCellChange:w,onSelectionChange:x,rowClassName:_,rowHeight:j});return l.default.createElement(s.DataSheetGrid,Object.assign({},M,R,{rowHeight:typeof j=="number"?j:M.rowHeight,ref:o}))}),ii}var Xn={},$d={},m3;function _q(){if(m3)return $d;m3=1,Object.defineProperty($d,"__esModule",{value:!0}),$d.useFirstRender=void 0;const e=Br(),n=()=>{const t=(0,e.useRef)(!0),s=t.current;return t.current=!1,s};return $d.useFirstRender=n,$d}var p3;function Hm(){if(p3)return Xn;p3=1;var e=Xn&&Xn.__createBinding||(Object.create?function(a,u,h,f){f===void 0&&(f=h);var m=Object.getOwnPropertyDescriptor(u,h);(!m||("get"in m?!u.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return u[h]}}),Object.defineProperty(a,f,m)}:function(a,u,h,f){f===void 0&&(f=h),a[f]=u[h]}),n=Xn&&Xn.__setModuleDefault||(Object.create?function(a,u){Object.defineProperty(a,"default",{enumerable:!0,value:u})}:function(a,u){a.default=u}),t=Xn&&Xn.__importStar||function(a){if(a&&a.__esModule)return a;var u={};if(a!=null)for(var h in a)h!=="default"&&Object.prototype.hasOwnProperty.call(a,h)&&e(u,a,h);return n(u,a),u},s=Xn&&Xn.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Xn,"__esModule",{value:!0}),Xn.createTextColumn=Xn.textColumn=void 0;const l=t(Br()),i=s(xc()),o=_q(),d=l.default.memo(({active:a,focus:u,rowData:h,setRowData:f,columnData:{placeholder:m,alignRight:b,formatInputOnFocus:y,formatBlurredInput:g,parseUserInput:w,continuousUpdates:x}})=>{const _=(0,l.useRef)(null),j=(0,o.useFirstRender)(),R=(0,l.useRef)({rowData:h,formatInputOnFocus:y,formatBlurredInput:g,setRowData:f,parseUserInput:w,continuousUpdates:x,firstRender:j,focusedAt:0,changedAt:0,escPressed:!1});return R.current={rowData:h,formatInputOnFocus:y,formatBlurredInput:g,setRowData:f,parseUserInput:w,continuousUpdates:x,firstRender:j,focusedAt:R.current.focusedAt,changedAt:R.current.changedAt,escPressed:R.current.escPressed},(0,l.useLayoutEffect)(()=>{u?(_.current&&(_.current.value=R.current.formatInputOnFocus(R.current.rowData),_.current.focus(),_.current.select()),R.current.escPressed=!1,R.current.focusedAt=Date.now()):_.current&&(!R.current.escPressed&&!R.current.continuousUpdates&&!R.current.firstRender&&R.current.changedAt>=R.current.focusedAt&&R.current.setRowData(R.current.parseUserInput(_.current.value)),_.current.blur())},[u]),(0,l.useEffect)(()=>{!u&&_.current&&(_.current.value=R.current.formatBlurredInput(h))},[u,h]),l.default.createElement("input",{defaultValue:g(h),className:(0,i.default)("dsg-input",b&&"dsg-input-align-right"),placeholder:a?m:void 0,tabIndex:-1,ref:_,style:{pointerEvents:u?"auto":"none"},onChange:M=>{R.current.changedAt=Date.now(),x&&f(w(M.target.value))},onKeyDown:M=>{M.key==="Escape"&&(R.current.escPressed=!0)}})});d.displayName="TextComponent",Xn.textColumn=c();function c({placeholder:a,alignRight:u=!1,continuousUpdates:h=!0,deletedValue:f=null,parseUserInput:m=x=>x.trim()||null,formatBlurredInput:b=x=>String(x??""),formatInputOnFocus:y=x=>String(x??""),formatForCopy:g=x=>String(x??""),parsePastedValue:w=x=>x.replace(/[\n\r]+/g," ").trim()||null}={}){return{component:d,columnData:{placeholder:a,alignRight:u,continuousUpdates:h,formatInputOnFocus:y,formatBlurredInput:b,parseUserInput:m},deleteValue:()=>f,copyValue:({rowData:x})=>g(x),pasteValue:({value:x})=>w(x),isCellEmpty:({rowData:x})=>x==null}}return Xn.createTextColumn=c,Xn}var la={},g3;function jq(){if(g3)return la;g3=1;var e=la&&la.__createBinding||(Object.create?function(o,d,c,a){a===void 0&&(a=c);var u=Object.getOwnPropertyDescriptor(d,c);(!u||("get"in u?!d.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return d[c]}}),Object.defineProperty(o,a,u)}:function(o,d,c,a){a===void 0&&(a=c),o[a]=d[c]}),n=la&&la.__setModuleDefault||(Object.create?function(o,d){Object.defineProperty(o,"default",{enumerable:!0,value:d})}:function(o,d){o.default=d}),t=la&&la.__importStar||function(o){if(o&&o.__esModule)return o;var d={};if(o!=null)for(var c in o)c!=="default"&&Object.prototype.hasOwnProperty.call(o,c)&&e(d,o,c);return n(d,o),d};Object.defineProperty(la,"__esModule",{value:!0}),la.checkboxColumn=void 0;const s=t(Br()),l=["","false","no","off","disabled","0","n","f","unchecked","undefined","null","wrong","negative"],i=s.default.memo(({focus:o,rowData:d,setRowData:c,active:a,stopEditing:u,disabled:h})=>{const f=(0,s.useRef)(null);return(0,s.useLayoutEffect)(()=>{o&&(c(!d),u({nextRow:!1}))},[o,u]),s.default.createElement("input",{className:"dsg-checkbox",tabIndex:-1,type:"checkbox",ref:f,disabled:h,checked:!!d,onMouseDown:()=>!a&&c(!d),onChange:()=>null})});return i.displayName="CheckboxComponent",la.checkboxColumn={component:i,deleteValue:()=>!1,copyValue:({rowData:o})=>o?"YES":"NO",pasteValue:({value:o})=>!l.includes(o.toLowerCase()),isCellEmpty:({rowData:o})=>!o},la}var Ud={},b3;function Nq(){if(b3)return Ud;b3=1,Object.defineProperty(Ud,"__esModule",{value:!0}),Ud.floatColumn=void 0;const e=Hm();return Ud.floatColumn=(0,e.createTextColumn)({alignRight:!0,formatBlurredInput:n=>typeof n=="number"?new Intl.NumberFormat().format(n):"",parseUserInput:n=>{const t=parseFloat(n);return isNaN(t)?null:t},parsePastedValue:n=>{const t=parseFloat(n);return isNaN(t)?null:t}}),Ud}var Hd={},y3;function Cq(){if(y3)return Hd;y3=1,Object.defineProperty(Hd,"__esModule",{value:!0}),Hd.intColumn=void 0;const e=Hm();return Hd.intColumn=(0,e.createTextColumn)({alignRight:!0,formatBlurredInput:n=>typeof n=="number"?new Intl.NumberFormat().format(n):"",parseUserInput:n=>{const t=parseFloat(n);return isNaN(t)?null:Math.round(t)},parsePastedValue:n=>{const t=parseFloat(n);return isNaN(t)?null:Math.round(t)}}),Hd}var Vd={},x3;function Sq(){if(x3)return Vd;x3=1,Object.defineProperty(Vd,"__esModule",{value:!0}),Vd.percentColumn=void 0;const e=Hm(),n=1e12,t=1e10;return Vd.percentColumn=(0,e.createTextColumn)({alignRight:!0,formatBlurredInput:s=>typeof s=="number"?new Intl.NumberFormat(void 0,{style:"percent"}).format(s):"",formatInputOnFocus:s=>typeof s=="number"&&!isNaN(s)?String(Math.round(s*n)/t):"",parseUserInput:s=>{const l=parseFloat(s);return isNaN(l)?null:l/100},parsePastedValue:s=>{const l=parseFloat(s);return isNaN(l)?null:l}}),Vd}var Es={},v3;function kq(){if(v3)return Es;v3=1;var e=Es&&Es.__createBinding||(Object.create?function(d,c,a,u){u===void 0&&(u=a);var h=Object.getOwnPropertyDescriptor(c,a);(!h||("get"in h?!c.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return c[a]}}),Object.defineProperty(d,u,h)}:function(d,c,a,u){u===void 0&&(u=a),d[u]=c[a]}),n=Es&&Es.__setModuleDefault||(Object.create?function(d,c){Object.defineProperty(d,"default",{enumerable:!0,value:c})}:function(d,c){d.default=c}),t=Es&&Es.__importStar||function(d){if(d&&d.__esModule)return d;var c={};if(d!=null)for(var a in d)a!=="default"&&Object.prototype.hasOwnProperty.call(d,a)&&e(c,d,a);return n(c,d),c},s=Es&&Es.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(Es,"__esModule",{value:!0}),Es.dateColumn=void 0;const l=t(Br()),i=s(xc()),o=l.default.memo(({focus:d,active:c,rowData:a,setRowData:u})=>{var h;const f=(0,l.useRef)(null);return(0,l.useLayoutEffect)(()=>{var m,b;d?(m=f.current)===null||m===void 0||m.select():(b=f.current)===null||b===void 0||b.blur()},[d]),l.default.createElement("input",{className:(0,i.default)("dsg-input",!c&&"dsg-hide-date-picker"),type:"date",tabIndex:-1,max:"9999-12-31",ref:f,style:{pointerEvents:d?"auto":"none",opacity:a||c?void 0:0},value:(h=a?.toISOString().substr(0,10))!==null&&h!==void 0?h:"",onChange:m=>{const b=new Date(m.target.value);u(isNaN(b.getTime())?null:b)}})});return o.displayName="DateComponent",Es.dateColumn={component:o,deleteValue:()=>null,copyValue:({rowData:d})=>d?d.toISOString().substr(0,10):null,pasteValue:({value:d})=>{const c=new Date(d.replace(/\.\s?|\//g,"-"));return isNaN(c.getTime())?null:c},minWidth:170,isCellEmpty:({rowData:d})=>!d},Es}var Rs={},w3;function Eq(){if(w3)return Rs;w3=1;var e=Rs&&Rs.__createBinding||(Object.create?function(d,c,a,u){u===void 0&&(u=a);var h=Object.getOwnPropertyDescriptor(c,a);(!h||("get"in h?!c.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return c[a]}}),Object.defineProperty(d,u,h)}:function(d,c,a,u){u===void 0&&(u=a),d[u]=c[a]}),n=Rs&&Rs.__setModuleDefault||(Object.create?function(d,c){Object.defineProperty(d,"default",{enumerable:!0,value:c})}:function(d,c){d.default=c}),t=Rs&&Rs.__importStar||function(d){if(d&&d.__esModule)return d;var c={};if(d!=null)for(var a in d)a!=="default"&&Object.prototype.hasOwnProperty.call(d,a)&&e(c,d,a);return n(c,d),c},s=Rs&&Rs.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(Rs,"__esModule",{value:!0}),Rs.isoDateColumn=void 0;const l=t(Br()),i=s(xc()),o=l.default.memo(({focus:d,active:c,rowData:a,setRowData:u})=>{const h=(0,l.useRef)(null);return(0,l.useLayoutEffect)(()=>{var f,m;d?(f=h.current)===null||f===void 0||f.select():(m=h.current)===null||m===void 0||m.blur()},[d]),l.default.createElement("input",{className:(0,i.default)("dsg-input",!c&&"dsg-hide-date-picker"),type:"date",tabIndex:-1,max:"9999-12-31",ref:h,style:{pointerEvents:d?"auto":"none",opacity:a||c?void 0:0},value:a??"",onChange:f=>{const m=new Date(f.target.value);u(isNaN(m.getTime())?null:m.toISOString().substr(0,10))}})});return o.displayName="IsoDateComponent",Rs.isoDateColumn={component:o,deleteValue:()=>null,copyValue:({rowData:d})=>d,pasteValue:({value:d})=>{const c=new Date(d.replace(/\.\s?|\//g,"-"));return isNaN(c.getTime())?null:c.toISOString().substr(0,10)},minWidth:170,isCellEmpty:({rowData:d})=>!d},Rs}var Ts={},_3;function Rq(){if(_3)return Ts;_3=1;var e=Ts&&Ts.__createBinding||(Object.create?function(d,c,a,u){u===void 0&&(u=a);var h=Object.getOwnPropertyDescriptor(c,a);(!h||("get"in h?!c.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return c[a]}}),Object.defineProperty(d,u,h)}:function(d,c,a,u){u===void 0&&(u=a),d[u]=c[a]}),n=Ts&&Ts.__setModuleDefault||(Object.create?function(d,c){Object.defineProperty(d,"default",{enumerable:!0,value:c})}:function(d,c){d.default=c}),t=Ts&&Ts.__importStar||function(d){if(d&&d.__esModule)return d;var c={};if(d!=null)for(var a in d)a!=="default"&&Object.prototype.hasOwnProperty.call(d,a)&&e(c,d,a);return n(c,d),c},s=Ts&&Ts.__rest||function(d,c){var a={};for(var u in d)Object.prototype.hasOwnProperty.call(d,u)&&c.indexOf(u)<0&&(a[u]=d[u]);if(d!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,u=Object.getOwnPropertySymbols(d);h<u.length;h++)c.indexOf(u[h])<0&&Object.prototype.propertyIsEnumerable.call(d,u[h])&&(a[u[h]]=d[u[h]]);return a};Object.defineProperty(Ts,"__esModule",{value:!0}),Ts.keyColumn=void 0;const l=t(Br()),i=d=>{var{columnData:{key:c,original:a},rowData:u,setRowData:h}=d,f=s(d,["columnData","rowData","setRowData"]);const m=(0,l.useRef)(u);m.current=u;const b=(0,l.useCallback)(g=>{h(Object.assign(Object.assign({},m.current),{[c]:g}))},[c,h]);if(!a.component)return l.default.createElement(l.default.Fragment,null);const y=a.component;return l.default.createElement(y,Object.assign({columnData:a.columnData,setRowData:b,rowData:u[c]},f))},o=(d,c)=>Object.assign(Object.assign({id:d},c),{columnData:{key:d,original:c},component:i,copyValue:({rowData:a,rowIndex:u})=>{var h,f;return(f=(h=c.copyValue)===null||h===void 0?void 0:h.call(c,{rowData:a[d],rowIndex:u}))!==null&&f!==void 0?f:null},deleteValue:({rowData:a,rowIndex:u})=>{var h,f;return Object.assign(Object.assign({},a),{[d]:(f=(h=c.deleteValue)===null||h===void 0?void 0:h.call(c,{rowData:a[d],rowIndex:u}))!==null&&f!==void 0?f:null})},pasteValue:({rowData:a,value:u,rowIndex:h})=>{var f,m;return Object.assign(Object.assign({},a),{[d]:(m=(f=c.pasteValue)===null||f===void 0?void 0:f.call(c,{rowData:a[d],value:u,rowIndex:h}))!==null&&m!==void 0?m:null})},disabled:typeof c.disabled=="function"?({rowData:a,rowIndex:u})=>{var h;return typeof c.disabled=="function"?c.disabled({rowData:a[d],rowIndex:u}):(h=c.disabled)!==null&&h!==void 0?h:!1}:c.disabled,cellClassName:typeof c.cellClassName=="function"?({rowData:a,rowIndex:u,columnId:h})=>{var f;return typeof c.cellClassName=="function"?c.cellClassName({rowData:a[d],rowIndex:u,columnId:h}):(f=c.cellClassName)!==null&&f!==void 0?f:void 0}:c.cellClassName,isCellEmpty:({rowData:a,rowIndex:u})=>{var h,f;return(f=(h=c.isCellEmpty)===null||h===void 0?void 0:h.call(c,{rowData:a[d],rowIndex:u}))!==null&&f!==void 0?f:!1}});return Ts.keyColumn=o,Ts}var j3;function Tq(){return j3||(j3=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.renderContextMenuItem=e.createContextMenuComponent=e.createAddRowsComponent=e.keyColumn=e.isoDateColumn=e.dateColumn=e.percentColumn=e.intColumn=e.floatColumn=e.checkboxColumn=e.createTextColumn=e.textColumn=e.DataSheetGrid=e.DynamicDataSheetGrid=void 0;const n=rN(),t=wq();e.DynamicDataSheetGrid=n.DataSheetGrid,e.DataSheetGrid=t.StaticDataSheetGrid;var s=Hm();Object.defineProperty(e,"textColumn",{enumerable:!0,get:function(){return s.textColumn}}),Object.defineProperty(e,"createTextColumn",{enumerable:!0,get:function(){return s.createTextColumn}});var l=jq();Object.defineProperty(e,"checkboxColumn",{enumerable:!0,get:function(){return l.checkboxColumn}});var i=Nq();Object.defineProperty(e,"floatColumn",{enumerable:!0,get:function(){return i.floatColumn}});var o=Cq();Object.defineProperty(e,"intColumn",{enumerable:!0,get:function(){return o.intColumn}});var d=Sq();Object.defineProperty(e,"percentColumn",{enumerable:!0,get:function(){return d.percentColumn}});var c=kq();Object.defineProperty(e,"dateColumn",{enumerable:!0,get:function(){return c.dateColumn}});var a=Eq();Object.defineProperty(e,"isoDateColumn",{enumerable:!0,get:function(){return a.isoDateColumn}});var u=Rq();Object.defineProperty(e,"keyColumn",{enumerable:!0,get:function(){return u.keyColumn}});var h=eN();Object.defineProperty(e,"createAddRowsComponent",{enumerable:!0,get:function(){return h.createAddRowsComponent}});var f=tN();Object.defineProperty(e,"createContextMenuComponent",{enumerable:!0,get:function(){return f.createContextMenuComponent}}),Object.defineProperty(e,"renderContextMenuItem",{enumerable:!0,get:function(){return f.defaultRenderItem}})}(Kg)),Kg}var Aq=Tq();const ca={Government:{base:"rgba(74, 162, 255, 0.08)",alternate:"rgba(74, 162, 255, 0.15)"},RealEstate:{base:"rgba(90, 175, 110, 0.08)",alternate:"rgba(90, 175, 110, 0.15)"},Accounting:{base:"rgba(248, 220, 61, 0.08)",alternate:"rgba(248, 220, 61, 0.15)"},Other:{base:"rgba(206, 208, 209, 0.08)",alternate:"rgba(206, 208, 209, 0.15)"}},N3={even:"rgba(255, 255, 255, 1)",odd:"rgba(248, 250, 252, 1)"};function La(e,n){if(n)return n.split(".").reduce((t,s)=>t?.[s],e)}function Mu(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"SAR",minimumFractionDigits:2}).format(e)}function nN(e){if(!e)return"";try{const n=new Date(e);return isNaN(n.getTime())?"":new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}).format(n)}catch{return""}}const sN=De.memo(({rowData:e,columnData:n,active:t})=>{const s=n?.key?La(e,n.key):"",l=n?.formatter?n.formatter(s,e):s;return r.jsx("span",{className:"hulool-cell-content hulool-text",style:{fontWeight:t?700:400},children:l??""})});sN.displayName="TextCell";const aN=De.memo(({rowData:e,columnData:n,active:t})=>{const s=n?.key?La(e,n.key):"";return r.jsx("span",{className:"hulool-cell-content hulool-client-name",style:{fontWeight:t?800:600},children:s??""})});aN.displayName="ClientNameCell";const iN=De.memo(({rowData:e,columnData:n,active:t})=>{const s=n?.key?La(e,n.key):0,l=Number(s)||0;return r.jsx("span",{className:"hulool-cell-content hulool-currency",style:{color:n?.color||"#000000",fontWeight:t?700:500},children:l!==0?Mu(l):""})});iN.displayName="CurrencyCell";const oN=De.memo(({rowData:e,columnData:n,active:t})=>{const s=n?.key?La(e,n.key):0,l=Number(s)||0;return r.jsx("span",{className:"hulool-cell-content hulool-debit",style:{fontWeight:t?700:500},children:l>0?Mu(l):""})});oN.displayName="DebitCell";const lN=De.memo(({rowData:e,columnData:n,active:t})=>{const s=n?.key?La(e,n.key):0,l=Number(s)||0;return r.jsx("span",{className:"hulool-cell-content hulool-credit",style:{fontWeight:t?700:500},children:l>0?Mu(l):""})});lN.displayName="CreditCell";const cN=De.memo(({rowData:e,columnData:n,active:t})=>{const s=n?.key?La(e,n.key):0,l=Number(s)||0;return r.jsx("span",{className:"hulool-cell-content hulool-due",style:{color:l>0?"#dc2626":"#000000",fontWeight:t?800:600},children:Mu(l)})});cN.displayName="DueCell";const dN=De.memo(({rowData:e,columnData:n,active:t})=>{const s=n?.key?La(e,n.key):"";return r.jsx("span",{className:"hulool-cell-content hulool-date",style:{fontWeight:t?700:400},children:nN(s)})});dN.displayName="DateCell";const uN=De.memo(({rowData:e,columnData:n,active:t})=>{const s=n?.key?La(e,n.key):"",l=o=>{if(!o)return"";const d=o.replace(/\D/g,"");return d.startsWith("966")?d:d.startsWith("0")?`966${d.substring(1)}`:`966${d}`},i=o=>{o.stopPropagation();const d=l(s);d&&window.open(`https://wa.me/${d}`,"_blank")};return s?r.jsxs("div",{className:"hulool-cell-content hulool-phone-container",style:{fontWeight:t?700:400},children:[r.jsx("span",{className:"hulool-phone-number",children:s}),r.jsx("button",{onClick:i,title:" ",className:"hulool-whatsapp-btn",children:r.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"#25D366",children:r.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})})})]}):r.jsx("span",{className:"hulool-cell-content hulool-phone",style:{fontWeight:t?700:400},children:""})});uN.displayName="PhoneCell";const fN=De.memo(({rowData:e,columnData:n,active:t})=>{const s=n?.key?La(e,n.key):"",l=n?.formatter?n.formatter(s,e):s,o={...{Government:"#3b82f6",RealEstate:"#22c55e",Accounting:"#eab308",Other:"#6b7280",New:"#eab308",Deferred:"#ef4444",Completed:"#22c55e","Pending Review":"#f97316",Cancelled:"#6b7280"},...n?.badgeColors}[s]||"#6b7280";return r.jsx("span",{className:"hulool-cell-content hulool-badge",style:{backgroundColor:o,fontWeight:t?700:600},children:l??s??""})});fN.displayName="BadgeCell";function Mq(e){const n=De.memo(t=>{const{active:s}=t;return r.jsx("div",{className:`hulool-active-wrapper hulool-cell-truncate ${s?"hulool-cell-active":""}`,style:{width:"100%",height:"100%",display:"flex",alignItems:"center",overflow:"hidden"},children:r.jsx(e,{...t})})});return n.displayName=`ActiveWrapper(${e.displayName||"Component"})`,n}function Oq(e){if(e.component)return Mq(e.component);switch(e.type){case"clientName":return aN;case"phone":return uN;case"debit":return oN;case"credit":return lN;case"due":return cN;case"currency":return iN;case"date":return dN;case"badge":return fN;default:return sN}}function Dq({clientX:e,clientY:n,items:t,close:s}){const l=t.find(o=>o.type==="COPY");if(!l)return null;const i=()=>{l.action(),s()};return r.jsx("div",{className:"hulool-context-menu",style:{position:"fixed",left:e,top:n,zIndex:1e4,backgroundColor:"white",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",border:"1px solid rgba(0, 0, 0, 0.1)",padding:"4px 0",minWidth:"120px",fontFamily:"Cairo, sans-serif"},children:r.jsxs("button",{onClick:i,style:{display:"flex",alignItems:"center",gap:"8px",width:"100%",padding:"8px 16px",border:"none",background:"transparent",cursor:"pointer",fontSize:"14px",color:"#333",textAlign:"right",direction:"rtl"},onMouseEnter:o=>o.currentTarget.style.backgroundColor="rgba(59, 130, 246, 0.1)",onMouseLeave:o=>o.currentTarget.style.backgroundColor="transparent",children:[r.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),r.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),""]})})}function co({data:e,columns:n,isLoading:t=!1,emptyMessage:s="  ",height:l="auto",rowHeight:i=44,typeField:o,typeColors:d=ca,showId:c=!0,idField:a="id",className:u="",stickyHeader:h=!0,minHeight:f=400}){const m=H.useMemo(()=>{if(l==="auto"||l==="fill"){const x=e.length*i+48;return Math.max(x,f)}return l},[l,e.length,i,f]),b=H.useMemo(()=>{let x=n.filter(j=>!j.hidden);const _=e.length>0&&e[0]?.[a]!==void 0;return c&&_&&!x.find(j=>j.key===a)&&(x=[{id:"id",title:"#",type:"text",key:a,width:60,grow:0},...x]),x},[n,e,c,a]),y=H.useMemo(()=>[...b].reverse(),[b]),g=H.useMemo(()=>y.map(x=>{const _=Oq(x),j=({rowData:R})=>{const M=x.key?La(R,x.key):null;if(M==null)return null;switch(x.type){case"currency":case"debit":case"credit":case"due":const I=Number(M)||0;return I!==0?Mu(I):"";case"date":return nN(M);default:return String(M)}};return{id:x.id,title:x.title,component:_,columnData:{key:x.key,formatter:x.formatter,badgeColors:x.badgeColors,...x.columnData||{}},basis:x.width||0,minWidth:x.width||100,maxWidth:x.width||void 0,grow:x.grow??1,shrink:0,disabled:!0,copyValue:j}}),[y]),w=H.useCallback(({rowIndex:x,rowData:_})=>{if(!o)return x%2===0?"hulool-row-even":"hulool-row-odd";const j=_[o];let R=0;for(let B=x-1;B>=0&&e[B]?.[o]===j;B--)R++;const M=R%2===1;return`${`hulool-type-${j?.toLowerCase()||"other"}`} ${M?"hulool-type-alternate":"hulool-type-base"}`},[o,e]);return t?r.jsxs("div",{className:"hulool-grid-loading",children:[r.jsx("div",{className:"hulool-spinner"}),r.jsx("span",{children:" ..."})]}):e.length?r.jsxs("div",{className:`hulool-data-grid ${u}`,children:[r.jsx(Aq.DataSheetGrid,{value:e,columns:g,height:m,rowHeight:i,headerRowHeight:48,rowClassName:w,lockRows:!0,disableExpandSelection:!0,gutterColumn:!1,contextMenuComponent:Dq}),r.jsx("style",{children:`
        /* ================================
           HULOOL DATA GRID - BASE STYLES
           ================================ */
        
        .hulool-data-grid {
          font-family: 'Cairo', sans-serif;
          direction: rtl;
        }
        
        .hulool-grid-loading {
          padding: 48px;
          text-align: center;
          font-family: 'Cairo', sans-serif;
        }
        
        .hulool-spinner {
          width: 40px;
          height: 40px;
          border: 4px solid var(--color-primary, #3b82f6);
          border-top-color: transparent;
          border-radius: 50%;
          animation: hulool-spin 1s linear infinite;
          margin: 0 auto 16px;
        }
        
        @keyframes hulool-spin {
          to { transform: rotate(360deg); }
        }
        
        .hulool-grid-empty {
          padding: 48px;
          text-align: center;
          font-family: 'Cairo', sans-serif;
          color: #666;
        }
        
        /* ================================
           DSG CONTAINER OVERRIDES
           ================================ */
        
        .hulool-data-grid .dsg-container {
          --dsg-border-color: rgba(0, 0, 0, 0.08);
          --dsg-selection-border-color: var(--color-primary, #3b82f6);
          --dsg-selection-background-color: rgba(59, 130, 246, 0.1);
          direction: ltr; /* Keep LTR internally, we handle RTL via column reversal */
        }
        
        /* ================================
           HEADER STYLES
           ================================ */
        
        .hulool-data-grid .dsg-header-row {
          background-color: var(--color-primary, #3b82f6) !important;
          position: ${h?"sticky":"relative"};
          top: 0;
          z-index: 10;
        }
        
        .hulool-data-grid .dsg-header-row .dsg-cell {
          color: #ffffff !important;
          font-weight: 700 !important;
          font-family: 'Cairo', sans-serif !important;
          justify-content: center;
          text-align: center;
          border-left: 1px solid rgba(255, 255, 255, 0.2);
          border-right: none;
          white-space: nowrap;
          direction: rtl;
        }
        
        /* ================================
           CELL STYLES
           ================================ */
        
        .hulool-data-grid .dsg-cell {
          font-family: 'Cairo', sans-serif !important;
          color: #000000;
          border-left: 1px solid rgba(0, 0, 0, 0.05);
          border-right: none;
          padding: 0 12px;
          direction: rtl;
          white-space: nowrap;
        }
        
        /* ================================
           ACTIVE CELL OUTLINE
           ================================ */
        
        .hulool-data-grid .dsg-active-cell {
          box-shadow: inset 0 0 0 2px var(--color-primary, #3b82f6) !important;
        }
        
        /* ================================
           ACTIVE CELL BOLD - AUTO-APPLIES TO ANY CONTENT
           ================================ */
        
        .hulool-cell-active,
        .hulool-cell-active * {
          font-weight: 700 !important;
        }
        
        .hulool-cell-active a,
        .hulool-cell-active span,
        .hulool-cell-active div {
          font-weight: 700 !important;
        }
        
        /* ================================
           TEXT TRUNCATION - Auto ellipsis for overflow
           ================================ */
        
        .hulool-cell-truncate {
          overflow: hidden;
        }
        
        .hulool-cell-truncate > *,
        .hulool-cell-truncate span,
        .hulool-cell-truncate div,
        .hulool-cell-truncate a {
          overflow: hidden;
          text-overflow: ellipsis;
          white-space: nowrap;
          max-width: 100%;
        }
        
        /* ================================
           CELL CONTENT TYPES
           ================================ */
        
        .hulool-cell-content {
          display: flex;
          align-items: center;
          height: 100%;
          width: 100%;
          overflow: hidden;
          text-overflow: ellipsis;
          white-space: nowrap;
        }
        
        /* Text cells - right aligned for RTL */
        .hulool-text,
        .hulool-client-name {
          justify-content: flex-start;
          text-align: right;
        }
        
        /* Currency cells - centered */
        .hulool-currency,
        .hulool-debit,
        .hulool-credit,
        .hulool-due,
        .hulool-date {
          justify-content: center;
          text-align: center;
          font-variant-numeric: tabular-nums;
        }
        
        .hulool-debit { color: #000000; }
        .hulool-credit { color: #16a34a; }
        
        /* Badge */
        .hulool-badge {
          padding: 4px 12px;
          border-radius: 9999px;
          font-size: 0.875rem;
          color: #ffffff;
          justify-content: center;
        }
        
        /* Phone cell */
        .hulool-phone-container {
          display: flex;
          align-items: center;
          gap: 8px;
          justify-content: center;
        }
        
        .hulool-whatsapp-btn {
          padding: 4px;
          border-radius: 4px;
          border: none;
          background: transparent;
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          pointer-events: auto !important;
        }
        
        .hulool-whatsapp-btn:hover {
          background-color: #dcfce7;
        }
        
        /* ================================
           ROW COLORS - SIMPLE ALTERNATING
           ================================ */
        
        .hulool-data-grid .dsg-row.hulool-row-even .dsg-cell {
          background-color: ${N3.even};
        }
        
        .hulool-data-grid .dsg-row.hulool-row-odd .dsg-cell {
          background-color: ${N3.odd};
        }
        
        /* ================================
           ROW COLORS - TYPE-BASED
           ================================ */
        
        .hulool-data-grid .dsg-row.hulool-type-government.hulool-type-base .dsg-cell {
          background-color: ${d.Government?.base||ca.Government.base};
        }
        .hulool-data-grid .dsg-row.hulool-type-government.hulool-type-alternate .dsg-cell {
          background-color: ${d.Government?.alternate||ca.Government.alternate};
        }
        
        .hulool-data-grid .dsg-row.hulool-type-realestate.hulool-type-base .dsg-cell {
          background-color: ${d.RealEstate?.base||ca.RealEstate.base};
        }
        .hulool-data-grid .dsg-row.hulool-type-realestate.hulool-type-alternate .dsg-cell {
          background-color: ${d.RealEstate?.alternate||ca.RealEstate.alternate};
        }
        
        .hulool-data-grid .dsg-row.hulool-type-accounting.hulool-type-base .dsg-cell {
          background-color: ${d.Accounting?.base||ca.Accounting.base};
        }
        .hulool-data-grid .dsg-row.hulool-type-accounting.hulool-type-alternate .dsg-cell {
          background-color: ${d.Accounting?.alternate||ca.Accounting.alternate};
        }
        
        .hulool-data-grid .dsg-row.hulool-type-other.hulool-type-base .dsg-cell {
          background-color: ${d.Other?.base||ca.Other.base};
        }
        .hulool-data-grid .dsg-row.hulool-type-other.hulool-type-alternate .dsg-cell {
          background-color: ${d.Other?.alternate||ca.Other.alternate};
        }
        
        /* ================================
           HOVER & INTERACTIONS
           ================================ */
        
        .hulool-data-grid .dsg-row:hover .dsg-cell {
          filter: brightness(0.97);
        }
        
        /* Enable pointer events for buttons in cells */
        .hulool-data-grid .dsg-cell button {
          pointer-events: auto !important;
          cursor: pointer;
        }
        
        .hulool-data-grid .dsg-cell button:disabled {
          cursor: not-allowed;
        }
        
        .hulool-data-grid .dsg-cell > div {
          pointer-events: auto;
        }
        
        /* Action bar special handling */
        .grid-action-bar {
          pointer-events: auto !important;
        }
        
        .grid-action-bar button {
          pointer-events: auto !important;
        }
        
        /* Remove edit cursor since read-only */
        .hulool-data-grid .dsg-cell input {
          cursor: default !important;
          pointer-events: none;
        }
        
        .hulool-data-grid .dsg-input {
          background: transparent !important;
          border: none !important;
          outline: none !important;
        }
      `})]}):r.jsx("div",{className:"hulool-grid-empty",children:s})}const Yi=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"SAR",minimumFractionDigits:2}).format(e),Pq=e=>{const n={Accounting:{bg:"#eab308",color:"#000000"},RealEstate:{bg:"#22c55e",color:"#ffffff"},Government:{bg:"#3b82f6",color:"#ffffff"},Other:{bg:"#6b7280",color:"#ffffff"}};return n[e]||n.Other},hN=De.memo(({rowData:e,columnData:n})=>{const{expandedRows:t,toggleRow:s}=n||{};if(!(e.details?.payments&&e.details.payments.length>0||e.details?.allocations&&e.details.allocations.length>0))return null;const i=t?.has(e.id);return r.jsx("button",{onClick:o=>{o.stopPropagation(),s?.(e.id)},style:{background:"none",border:"none",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center"},children:i?r.jsx(mc,{size:16}):r.jsx(Gs,{size:16})})});hN.displayName="ExpandCell";const mN=De.memo(({rowData:e})=>r.jsx("div",{style:{fontWeight:500,color:"#000000"},children:e.description}));mN.displayName="DescriptionCell";const pN=De.memo(({rowData:e,columnData:n})=>{const t=n?.hideAmounts;return r.jsx("div",{style:{textAlign:"center",fontWeight:600,color:"#000000"},children:t?"***":e.debit>0?Yi(e.debit):""})});pN.displayName="DebitCell";const gN=De.memo(({rowData:e,columnData:n})=>{const t=n?.hideAmounts;return r.jsx("div",{style:{textAlign:"center",fontWeight:600,color:"#16a34a"},children:t?"***":e.credit>0?Yi(e.credit):""})});gN.displayName="CreditCell";const bN=De.memo(({rowData:e,columnData:n})=>{const t=n?.hideAmounts;return r.jsx("div",{style:{textAlign:"center",fontWeight:700,color:"#dc2626"},children:t?"***":Yi(e.balance)})});bN.displayName="BalanceCell";const yN=De.memo(({rowData:e})=>r.jsx("div",{style:{textAlign:"center",fontSize:"0.875rem",color:"#000000"},children:Zr(e.date)}));yN.displayName="DateCell";const xN=De.memo(({rowData:e})=>{const n=Pq(e.type),t={Accounting:"",RealEstate:"",Government:"",Other:""};return r.jsx("div",{style:{display:"flex",justifyContent:"center"},children:r.jsx("span",{style:{backgroundColor:n.bg,color:n.color,padding:"4px 10px",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:600,whiteSpace:"nowrap"},children:t[e.type]||t.Other})})});xN.displayName="TypeBadgeCell";const vN=De.memo(({rowData:e,columnData:n})=>{const{client:t,openModal:s}=n||{},l=e;if(!t||!s)return null;const i=l.details?.receivables&&l.details.receivables.length>0&&!l.details.receivables[0].task_id,o=(l.remaining_amount??0)>0,d=(l.remaining_amount??0)<=0&&l.debit>0,c=h=>{if(h.stopPropagation(),!l.details?.receivables?.length)return;const f=l.details.receivables.find(m=>m.id===l.receivable_id)||{id:l.details.receivables[0].id,client_id:Number(t.id),task_id:l.task_id?Number(l.task_id):null,type:String(l.type),description:l.description,amount:Number(l.debit||l.balance+l.credit),due_date:l.date,notes:"",created_at:l.date,updated_at:l.date};s("editReceivable",{receivable:f})},a=h=>{if(h.stopPropagation(),!l.details?.receivables?.length)return;const f=l.details.receivables.find(m=>m.id===l.receivable_id)||{id:l.details.receivables[0].id,client_id:Number(t.id),task_id:l.task_id?Number(l.task_id):null,type:String(l.type),description:l.description,amount:Number(l.debit||l.balance+l.credit),due_date:l.date,notes:"",created_at:l.date,updated_at:l.date};s("deleteReceivable",{receivable:f})},u=h=>{if(h.stopPropagation(),!l.details?.receivables?.length)return;let f=l.details.receivables[0]?.id===l.details.receivables[0]?.prepaid_receivable_id?l.details.receivables[1]?.id:l.details.receivables[0]?.id;if(!f)return;const m={id:f,client_id:Number(t.id),task_id:l.task_id?Number(l.task_id):null,reference_receivable_id:null,prepaid_receivable_id:l.details.receivables[0]?.prepaid_receivable_id,created_by:Number(t.id),type:String(l.type),description:l.description,amount:Number(l.debit||l.balance+l.credit),original_amount:null,amount_details:[],adjustment_reason:null,notes:null,due_date:l.date,created_at:l.date,updated_at:l.date,client_name:t.name,client_phone:t.phone,task_name:l.description,task_type:String(l.type),total_paid:Number(l.credit),remaining_amount:Number(l.remaining_amount??l.debit-l.credit),payments:l.details?.payments||[],allocations:[],client:{id:Number(t.id),name:t.name,phone:t.phone}};s("paymentForm",{receivable:m})};return r.jsxs("div",{className:"hulool-cell-actions",style:{display:"flex",flexDirection:"row",gap:"4px",justifyContent:"flex-start",alignItems:"center",flexWrap:"nowrap"},children:[i&&r.jsxs(r.Fragment,{children:[r.jsx(Ne,{variant:"outline-primary",size:"sm",onClick:c,style:{padding:"4px 8px"},children:r.jsx(ui,{size:12})}),r.jsx(Ne,{variant:"danger",size:"sm",onClick:a,style:{padding:"4px 8px"},children:r.jsx(Is,{size:12})})]}),o&&r.jsxs(Ne,{variant:"primary",size:"sm",onClick:u,style:{padding:"4px 8px",whiteSpace:"nowrap"},children:[r.jsx(gs,{size:14})," "]}),d&&r.jsx("span",{style:{padding:"4px 10px",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:600,backgroundColor:"#22c55e",color:"#ffffff",whiteSpace:"nowrap"},children:""})]})});vN.displayName="ActionsCell";const Iq=({receivables:e,isLoading:n,client:t,filter:s="all",hideAmounts:l=!1})=>{const{t:i}=qt(),[o,d]=H.useState(new Set),c=et(b=>b.openModal),a=b=>{const y=new Set(o);o.has(b)?y.delete(b):y.add(b),d(y)},u=H.useMemo(()=>{const y=[...e.filter(x=>{switch(s){case"unpaid":return(x.remaining_amount??0)>0;case"paid":return(x.remaining_amount??0)<=0&&x.debit>0;default:return!0}})].sort((x,_)=>new Date(x.date).getTime()-new Date(_.date).getTime());let g=0;return y.map(x=>(g+=x.debit-x.credit,{...x,running_balance:g})).reverse()},[e,s]),h=H.useMemo(()=>{const b=u.reduce((w,x)=>w+x.credit,0),y=u.reduce((w,x)=>w+x.debit,0),g=u.reduce((w,x)=>w+x.balance,0);return{totalDebit:y,totalCredit:b,totalNet:g}},[u]),f=H.useMemo(()=>[{id:"expand",key:"id",title:"",type:"custom",component:hN,width:40,grow:0},{id:"description",key:"description",title:"",type:"custom",component:mN,grow:2},{id:"debit",key:"debit",title:"",type:"custom",component:pN,grow:1},{id:"credit",key:"credit",title:"",type:"custom",component:gN,grow:1},{id:"balance",key:"balance",title:"",type:"custom",component:bN,grow:1},{id:"date",key:"date",title:" ",type:"custom",component:yN,grow:1},{id:"type",key:"type",title:"",type:"custom",component:xN,grow:1},{id:"actions",key:"id",title:"",type:"custom",component:vN,width:160,grow:0}],[]),m=H.useMemo(()=>f.map(b=>b.id==="expand"?{...b,columnData:{expandedRows:o,toggleRow:a}}:b.id==="debit"||b.id==="credit"||b.id==="balance"?{...b,columnData:{hideAmounts:l}}:b.id==="actions"?{...b,columnData:{client:t,openModal:c}}:b),[f,o,l,t,c]);return n?r.jsx("div",{className:"flex justify-center items-center p-12",children:r.jsx("div",{className:"w-10 h-10 border-4 border-primary border-t-transparent rounded-full animate-spin"})}):u.length?r.jsxs("div",{className:"client-receivables-wrapper",children:[r.jsx("div",{className:"rounded-lg border border-border bg-card shadow-sm overflow-hidden",children:r.jsx(co,{data:u,columns:m,isLoading:!1,typeField:"type",typeColors:ca,showId:!1,height:"auto",minHeight:300})}),r.jsx("div",{className:"rounded-lg border border-border bg-card shadow-sm mt-2",children:r.jsx("div",{className:"p-2",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 text-center",children:[r.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-100 rounded",children:[r.jsx("span",{className:"text-gray-600 text-sm",children:" :"}),r.jsx("span",{className:"font-bold text-red-600",children:Yi(h.totalDebit)})]}),r.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-100 rounded",children:[r.jsx("span",{className:"text-gray-600 text-sm",children:" :"}),r.jsx("span",{className:"font-bold text-green-600",children:Yi(h.totalCredit)})]}),r.jsxs("div",{className:"flex justify-between items-center p-2 bg-primary text-white rounded",children:[r.jsx("span",{className:"text-sm",children:" :"}),r.jsx("span",{className:"font-bold",children:Yi(h.totalNet)})]})]})})}),Array.from(o).map(b=>{const y=u.find(g=>g.id===b);return!y||!y.details?.payments?.length&&!y.details?.allocations?.length?null:r.jsxs("div",{className:"bg-gray-50 p-4 mt-1 rounded-lg border border-border",children:[y.details.payments&&y.details.payments.length>0&&r.jsxs("div",{className:"mb-3",children:[r.jsxs("div",{className:"text-sm text-gray-600 mb-2 font-medium",children:["   (",y.details.payments.length,"):"]}),r.jsxs("div",{className:"bg-white rounded-lg overflow-hidden border border-border",children:[r.jsxs("div",{className:"grid grid-cols-4 gap-2 p-2 bg-gray-100 font-bold text-black text-center text-sm",children:[r.jsx("div",{children:""}),r.jsx("div",{children:""}),r.jsx("div",{children:" "}),r.jsx("div",{children:""})]}),r.jsx("div",{className:"divide-y divide-border",children:y.details.payments.map(g=>{let w=" ";return g.payment_method&&(typeof g.payment_method=="object"?w=g.payment_method.name_ar||g.payment_method.name_en||" ":typeof g.payment_method=="string"&&(w=g.payment_method)),r.jsxs("div",{className:"grid grid-cols-4 gap-2 p-2 text-center items-center",children:[r.jsx("div",{className:"text-green-600 font-bold",children:Yi(g.amount)}),r.jsx("div",{className:"text-black",children:Zr(g.paid_at)}),r.jsx("div",{className:"text-black font-medium",children:w}),r.jsxs("div",{className:"flex gap-1 justify-center",children:[r.jsx(Ne,{variant:"outline-primary",size:"sm",className:"p-1.5",onClick:()=>c("paymentEdit",{payment:g,receivable:{client_id:t.id}}),children:r.jsx(ui,{size:14})}),r.jsx(Ne,{variant:"danger",size:"sm",className:"p-1.5",onClick:()=>c("paymentDelete",{payment:g}),children:r.jsx(Is,{size:14})})]})]},g.id)})})]})]}),y.details?.allocations&&y.details.allocations.length>0&&r.jsxs("div",{children:[r.jsxs("div",{className:"text-sm text-gray-600 mb-2 font-medium",children:["   (",y.details.allocations.length,"):"]}),r.jsxs("div",{className:"bg-white rounded-lg overflow-hidden border border-border",children:[r.jsxs("div",{className:"grid grid-cols-5 gap-2 p-2 bg-gray-100 font-bold text-black text-center text-sm",children:[r.jsx("div",{children:""}),r.jsx("div",{children:""}),r.jsx("div",{children:""}),r.jsx("div",{children:""}),r.jsx("div",{children:""})]}),r.jsx("div",{className:"divide-y divide-border",children:y.details.allocations.map(g=>r.jsxs("div",{className:"grid grid-cols-5 gap-2 p-2 text-center items-center",children:[r.jsx("div",{className:"text-blue-500 font-bold",children:Yi(g.amount)}),r.jsx("div",{className:"text-black",children:Zr(g.allocated_at)}),r.jsx("div",{className:"text-black",children:g.description??"   "}),r.jsx("div",{className:"text-black",children:""}),r.jsxs("div",{className:"flex gap-1 justify-center",children:[r.jsx(Ne,{variant:"outline-primary",size:"sm",className:"p-1.5",onClick:()=>c("allocationEdit",{allocation:g,clientId:t.id}),children:r.jsx(ui,{size:14})}),r.jsx(Ne,{variant:"danger",size:"sm",className:"p-1.5",onClick:()=>c("allocationDelete",{allocation:g,clientId:t.id}),children:r.jsx(Is,{size:14})})]})]},g.id))})]})]})]},`details-${b}`)})]}):r.jsxs("div",{className:"text-center p-12 text-black",children:[r.jsx(Sn,{size:48,className:"mb-3 opacity-50 mx-auto"}),r.jsx("p",{className:"mb-0",children:i("receivables.noReceivables")})]})},Fq=()=>{const{props:e,closeModal:n}=et(),{clientId:t}=e;H.useEffect(()=>{const d=c=>{c.key==="Escape"&&n()};return document.addEventListener("keydown",d),()=>document.removeEventListener("keydown",d)},[n]);const{data:s,isLoading:l}=Pm(t),{data:i,isLoading:o}=zm(t);return s?r.jsx(Zt,{isOpen:!0,onClose:n,title:`  : ${s.name}`,className:"max-w-6xl",children:l||o?r.jsx("div",{className:"text-center py-8",children:r.jsx("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-primary border-r-transparent"})}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"p-0",children:r.jsx(Iq,{receivables:i?.statementItems||[],isLoading:o,client:s,filter:"all"})}),r.jsx("div",{className:"flex justify-end gap-2 pt-4 border-t border-border",children:r.jsx(Ne,{type:"button",variant:"secondary",onClick:n,children:""})})]})}):null},Lq=({taskId:e,conflictData:n,newPrepaidAmount:t,onResolved:s})=>{const{t:l}=qt(),{closeModal:i}=et(),{showToast:o}=ir(),d=jF(),[c,a]=H.useState([]),[u,h]=H.useState([]),[f,m]=H.useState("eliminate_prepaid"),b=(j,R)=>{a(M=>M.find(F=>F.payment_id===j.id)?M.map(F=>F.payment_id===j.id?R:F):[...M,R])},y=(j,R)=>{h(M=>M.find(F=>F.allocation_id===j.id)?M.map(F=>F.allocation_id===j.id?R:F):[...M,R])},g=async()=>{try{const j={receivable_decision:f,payment_decisions:c,allocation_decisions:u};await d.mutateAsync({id:e,new_prepaid_amount:t,decisions:j}),o({type:"success",title:l("tasks.prepaidConflictResolved")}),s(),i()}catch(j){o({type:"error",title:j.message||l("common.error")})}},w=()=>r.jsxs("div",{className:"rounded-lg border border-destructive bg-destructive/10 p-4 space-y-3",children:[r.jsx("h3",{className:"text-lg font-semibold text-destructive",children:l("tasks.prepaidConflictDetected")}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("p",{children:[r.jsxs("strong",{children:[l("tasks.currentPrepaidAmount"),":"]})," ",n.current_prepaid_amount.toLocaleString()," SAR"]}),r.jsxs("p",{children:[r.jsxs("strong",{children:[l("tasks.newPrepaidAmount"),":"]})," ",n.new_prepaid_amount.toLocaleString()," SAR"]}),r.jsxs("p",{children:[r.jsxs("strong",{children:[l("tasks.totalPaidOnPrepaid"),":"]})," ",n.total_paid.toLocaleString()," SAR"]}),r.jsxs("p",{children:[r.jsxs("strong",{children:[l("tasks.taskAmount"),":"]})," ",n.task_amount.toLocaleString()," SAR"]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("h4",{className:"font-semibold text-destructive text-sm",children:[l("tasks.identifiedConflicts"),":"]}),r.jsx("div",{className:"space-y-1",children:n.conflicts.map((j,R)=>r.jsxs("div",{className:`text-sm p-2 rounded ${j.severity==="high"?"border border-destructive bg-destructive/10 text-destructive":j.severity==="medium"?"border border-yellow-600 bg-yellow-50 text-yellow-800":"border border-blue-600 bg-blue-50 text-blue-800"}`,children:[r.jsxs("span",{className:"font-semibold",children:[j.type.replace(/_/g," ").toUpperCase(),":"]})," ",j.message,j.surplus&&r.jsxs("div",{className:"mt-1",children:["Surplus: ",j.surplus.toLocaleString()," SAR"]})]},R))})]})]}),x=()=>r.jsxs("div",{className:"space-y-3",children:[r.jsx("h3",{className:"text-lg font-semibold text-black",children:l("tasks.paymentDecisions")}),n.financial_records.payments.map(j=>r.jsxs("div",{className:"rounded-lg border border-border bg-card p-4 space-y-3",children:[r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("p",{children:[r.jsxs("strong",{children:[l("payments.amount"),":"]})," ",j.amount.toLocaleString()," SAR"]}),r.jsxs("p",{children:[r.jsxs("strong",{children:[l("payments.method"),":"]})," ",j.payment_method_name||"Cash"]}),r.jsxs("p",{children:[r.jsxs("strong",{children:[l("payments.paidAt"),":"]})," ",new Date(j.paid_at).toLocaleDateString()]}),r.jsxs("p",{children:[r.jsxs("strong",{children:[l("payments.createdBy"),":"]})," ",j.created_by_name||"Unknown"]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"block font-semibold text-sm text-black",children:[l("tasks.chooseAction"),":"]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-muted/50 transition-colors cursor-pointer",children:[r.jsx("input",{type:"radio",name:`payment-${j.id}`,onChange:()=>b(j,{payment_id:j.id,action:"keep"}),className:"rounded"}),r.jsx("span",{className:"text-sm",children:l("tasks.keepPayment")})]}),r.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-muted/50 transition-colors cursor-pointer",children:[r.jsx("input",{type:"radio",name:`payment-${j.id}`,onChange:()=>b(j,{payment_id:j.id,action:"delete"}),className:"rounded"}),r.jsx("span",{className:"text-sm",children:l("tasks.deletePayment")})]}),r.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-muted/50 transition-colors cursor-pointer",children:[r.jsx("input",{type:"radio",name:`payment-${j.id}`,onChange:()=>b(j,{payment_id:j.id,action:"convert_to_credit",surplus_action:"convert_to_credit"}),className:"rounded"}),r.jsx("span",{className:"text-sm",children:l("tasks.convertToCredit")})]}),r.jsxs("div",{className:"flex items-center gap-2 p-2 rounded hover:bg-muted/50 transition-colors",children:[r.jsx("input",{type:"radio",name:`payment-${j.id}`,onChange:()=>b(j,{payment_id:j.id,action:"reduce_to",new_amount:t}),className:"rounded"}),r.jsxs("label",{className:"text-sm cursor-pointer",children:[l("tasks.reduceTo"),":"]}),r.jsx("input",{type:"number",className:"border border-border rounded px-2 py-1 w-24 focus:outline-none focus:ring-2 focus:ring-primary text-sm",defaultValue:t,onChange:R=>b(j,{payment_id:j.id,action:"reduce_to",new_amount:parseFloat(R.target.value)})}),r.jsx("span",{className:"text-sm",children:"SAR"})]})]})]})]},j.id))]}),_=()=>r.jsxs("div",{className:"space-y-3",children:[r.jsx("h3",{className:"text-lg font-semibold text-black",children:l("tasks.allocationDecisions")}),n.financial_records.allocations.map(j=>r.jsxs("div",{className:"rounded-lg border border-border bg-card p-4 space-y-3",children:[r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("p",{children:[r.jsxs("strong",{children:[l("allocations.amount"),":"]})," ",j.amount.toLocaleString()," SAR"]}),r.jsxs("p",{children:[r.jsxs("strong",{children:[l("allocations.allocatedAt"),":"]})," ",new Date(j.allocated_at).toLocaleDateString()]}),r.jsxs("p",{children:[r.jsxs("strong",{children:[l("allocations.creditSource"),":"]})," ",j.credit_description||"Credit"]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"block font-semibold text-sm text-black",children:[l("tasks.chooseAction"),":"]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-muted/50 transition-colors cursor-pointer",children:[r.jsx("input",{type:"radio",name:`allocation-${j.id}`,onChange:()=>y(j,{allocation_id:j.id,action:"keep"}),className:"rounded"}),r.jsx("span",{className:"text-sm",children:l("tasks.keepAllocation")})]}),r.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-muted/50 transition-colors cursor-pointer",children:[r.jsx("input",{type:"radio",name:`allocation-${j.id}`,onChange:()=>y(j,{allocation_id:j.id,action:"return_to_credit"}),className:"rounded"}),r.jsx("span",{className:"text-sm",children:l("tasks.returnToCredit")})]}),r.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-muted/50 transition-colors cursor-pointer",children:[r.jsx("input",{type:"radio",name:`allocation-${j.id}`,onChange:()=>y(j,{allocation_id:j.id,action:"delete_allocation"}),className:"rounded"}),r.jsx("span",{className:"text-sm",children:l("tasks.deleteAllocation")})]})]})]})]},j.id))]});return r.jsx(Zt,{isOpen:!0,onClose:i,title:l("tasks.resolvePrepaidConflict"),children:r.jsxs("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:[w(),r.jsxs("div",{className:"space-y-3",children:[r.jsx("h3",{className:"text-lg font-semibold text-black",children:l("tasks.prepaidReceivableDecision")}),r.jsxs("select",{value:f,onChange:j=>m(j.target.value),className:"w-full border border-border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary",children:[r.jsx("option",{value:"eliminate_prepaid",children:l("tasks.eliminatePrepaidReceivable")}),r.jsx("option",{value:"adjust_to_new_amount",children:l("tasks.adjustToNewAmount")})]})]}),n.financial_records.payments.length>0&&x(),n.financial_records.allocations.length>0&&_(),r.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t border-border",children:[r.jsx(Ne,{variant:"secondary",onClick:i,children:l("common.cancel")}),r.jsx(Ne,{variant:"primary",onClick:g,isLoading:d.isPending,children:l("tasks.resolveConflict")})]})]})})},zq=({taskId:e,conflictData:n,newTaskAmount:t,onResolved:s})=>{const{t:l}=qt(),{closeModal:i}=et(),{showToast:o}=ir(),d=CF(),[c,a]=H.useState([]),[u,h]=H.useState([]),f=(x,_)=>{a(j=>j.find(M=>M.payment_id===x.id)?j.map(M=>M.payment_id===x.id?_:M):[...j,_])},m=(x,_)=>{h(j=>j.find(M=>M.allocation_id===x.id)?j.map(M=>M.allocation_id===x.id?_:M):[...j,_])},b=async()=>{try{const x={payment_decisions:c,allocation_decisions:u};await d.mutateAsync({id:e,new_task_amount:t,main_receivable_decisions:x}),o({type:"success",title:l("tasks.amountConflictResolved")}),s(),i()}catch(x){o({type:"error",title:x.message||l("common.error")})}},y=()=>r.jsxs("div",{className:"rounded-lg border border-destructive bg-destructive/10 p-4 space-y-3",children:[r.jsx("h3",{className:"text-lg font-semibold text-destructive",children:l("tasks.taskAmountConflictDetected")}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("p",{children:[r.jsxs("strong",{children:[l("tasks.currentTaskAmount"),":"]})," ",n.current_task_amount.toLocaleString()," SAR"]}),r.jsxs("p",{children:[r.jsxs("strong",{children:[l("tasks.newTaskAmount"),":"]})," ",n.new_task_amount.toLocaleString()," SAR"]}),r.jsxs("p",{children:[r.jsxs("strong",{children:[l("tasks.currentMainReceivableAmount"),":"]})," ",n.current_main_receivable_amount.toLocaleString()," SAR"]}),r.jsxs("p",{children:[r.jsxs("strong",{children:[l("tasks.calculatedNewMainAmount"),":"]})," ",n.calculated_new_main_amount.toLocaleString()," SAR"]}),r.jsxs("p",{children:[r.jsxs("strong",{children:[l("tasks.totalPaidOnMain"),":"]})," ",n.main_receivable_paid.toLocaleString()," SAR"]}),r.jsxs("p",{className:"text-destructive font-semibold",children:[r.jsxs("strong",{children:[l("tasks.overpaymentSurplus"),":"]})," ",n.surplus.toLocaleString()," SAR"]})]}),r.jsx("div",{className:"p-3 rounded-lg border border-yellow-600 bg-yellow-50",children:r.jsxs("p",{className:"text-yellow-800 text-sm",children:[r.jsxs("strong",{children:[l("tasks.conflictExplanation"),":"]})," ",l("tasks.mainReceivableOverpaymentMessage")]})})]}),g=()=>r.jsxs("div",{className:"space-y-3",children:[r.jsx("h3",{className:"text-lg font-semibold text-black",children:l("tasks.mainReceivablePaymentDecisions")}),n.financial_records.payments.map(x=>r.jsxs("div",{className:"rounded-lg border border-border bg-card p-4 space-y-3",children:[r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("p",{children:[r.jsxs("strong",{children:[l("payments.amount"),":"]})," ",x.amount.toLocaleString()," SAR"]}),r.jsxs("p",{children:[r.jsxs("strong",{children:[l("payments.method"),":"]})," ",x.payment_method_name||"Cash"]}),r.jsxs("p",{children:[r.jsxs("strong",{children:[l("payments.paidAt"),":"]})," ",new Date(x.paid_at).toLocaleDateString()]}),r.jsxs("p",{children:[r.jsxs("strong",{children:[l("payments.createdBy"),":"]})," ",x.created_by_name||"Unknown"]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"block font-semibold text-sm text-black",children:[l("tasks.chooseAction"),":"]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-muted/50 transition-colors cursor-pointer",children:[r.jsx("input",{type:"radio",name:`main-payment-${x.id}`,onChange:()=>f(x,{payment_id:x.id,action:"keep"}),className:"rounded"}),r.jsxs("span",{className:"text-sm",children:[l("tasks.keepPayment")," (",l("tasks.willCreateOverpayment"),")"]})]}),r.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-muted/50 transition-colors cursor-pointer",children:[r.jsx("input",{type:"radio",name:`main-payment-${x.id}`,onChange:()=>f(x,{payment_id:x.id,action:"delete"}),className:"rounded"}),r.jsx("span",{className:"text-sm",children:l("tasks.deletePayment")})]}),r.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-muted/50 transition-colors cursor-pointer",children:[r.jsx("input",{type:"radio",name:`main-payment-${x.id}`,onChange:()=>f(x,{payment_id:x.id,action:"convert_to_credit"}),className:"rounded"}),r.jsx("span",{className:"text-sm",children:l("tasks.convertToCredit")})]}),r.jsxs("div",{className:"flex items-center gap-2 p-2 rounded hover:bg-muted/50 transition-colors",children:[r.jsx("input",{type:"radio",name:`main-payment-${x.id}`,onChange:()=>f(x,{payment_id:x.id,action:"reduce_to",new_amount:Math.min(x.amount,n.calculated_new_main_amount)}),className:"rounded"}),r.jsxs("label",{className:"text-sm cursor-pointer",children:[l("tasks.reduceTo"),":"]}),r.jsx("input",{type:"number",className:"border border-border rounded px-2 py-1 w-24 focus:outline-none focus:ring-2 focus:ring-primary text-sm",max:x.amount,defaultValue:Math.min(x.amount,n.calculated_new_main_amount),onChange:_=>f(x,{payment_id:x.id,action:"reduce_to",new_amount:parseFloat(_.target.value)})}),r.jsx("span",{className:"text-sm",children:"SAR"})]})]})]})]},x.id))]}),w=()=>r.jsxs("div",{className:"space-y-3",children:[r.jsx("h3",{className:"text-lg font-semibold text-black",children:l("tasks.mainReceivableAllocationDecisions")}),n.financial_records.allocations.map(x=>r.jsxs("div",{className:"rounded-lg border border-border bg-card p-4 space-y-3",children:[r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("p",{children:[r.jsxs("strong",{children:[l("allocations.amount"),":"]})," ",x.amount.toLocaleString()," SAR"]}),r.jsxs("p",{children:[r.jsxs("strong",{children:[l("allocations.allocatedAt"),":"]})," ",new Date(x.allocated_at).toLocaleDateString()]}),r.jsxs("p",{children:[r.jsxs("strong",{children:[l("allocations.creditSource"),":"]})," ",x.credit_description||"Credit"]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"block font-semibold text-sm text-black",children:[l("tasks.chooseAction"),":"]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-muted/50 transition-colors cursor-pointer",children:[r.jsx("input",{type:"radio",name:`main-allocation-${x.id}`,onChange:()=>m(x,{allocation_id:x.id,action:"keep"}),className:"rounded"}),r.jsxs("span",{className:"text-sm",children:[l("tasks.keepAllocation")," (",l("tasks.willCreateOverpayment"),")"]})]}),r.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-muted/50 transition-colors cursor-pointer",children:[r.jsx("input",{type:"radio",name:`main-allocation-${x.id}`,onChange:()=>m(x,{allocation_id:x.id,action:"return_to_credit"}),className:"rounded"}),r.jsx("span",{className:"text-sm",children:l("tasks.returnToCredit")})]}),r.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-muted/50 transition-colors cursor-pointer",children:[r.jsx("input",{type:"radio",name:`main-allocation-${x.id}`,onChange:()=>m(x,{allocation_id:x.id,action:"delete_allocation"}),className:"rounded"}),r.jsx("span",{className:"text-sm",children:l("tasks.deleteAllocation")})]})]})]})]},x.id))]});return r.jsx(Zt,{isOpen:!0,onClose:i,title:l("tasks.resolveAmountConflict"),children:r.jsxs("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:[y(),n.financial_records.payments.length>0&&g(),n.financial_records.allocations.length>0&&w(),r.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t border-border",children:[r.jsx(Ne,{variant:"secondary",onClick:i,children:l("common.cancel")}),r.jsx(Ne,{variant:"primary",onClick:b,isLoading:d.isPending,children:l("tasks.resolveConflict")})]})]})})},Bq=({taskId:e,analysisData:n,onResolved:t})=>{const{t:s}=qt(),{closeModal:l}=et(),{showToast:i}=ir(),o=bc(),[d,c]=H.useState("cancel"),[a,u]=H.useState([]),[h,f]=H.useState([]),[m,b]=H.useState([]),[y,g]=H.useState([]),w=(F,B)=>{u(U=>U.find(K=>K.payment_id===F)?U.map(K=>K.payment_id===F?B:K):[...U,B])},x=(F,B)=>{f(U=>U.find(K=>K.allocation_id===F)?U.map(K=>K.allocation_id===F?B:K):[...U,B])},_=(F,B)=>{b(U=>U.find(K=>K.payment_id===F)?U.map(K=>K.payment_id===F?B:K):[...U,B])},j=(F,B)=>{g(U=>U.find(K=>K.allocation_id===F)?U.map(K=>K.allocation_id===F?B:K):[...U,B])},R=async()=>{try{const F={task_action:d};n.prepaid_receivable&&(n.prepaid_receivable.payments.length>0||n.prepaid_receivable.allocations.length>0)&&(F.prepaid_receivable_decisions={payment_decisions:a,allocation_decisions:h}),n.main_receivable&&(n.main_receivable.payments.length>0||n.main_receivable.allocations.length>0)&&(F.main_receivable_decisions={payment_decisions:m,allocation_decisions:y}),await o.mutateAsync({id:e,decisions:F}),i({type:"success",title:s(d==="delete"?"tasks.taskDeleted":"tasks.taskCancelled")}),t(),l()}catch(F){i({type:"error",title:F.message||s("common.error")})}},M=()=>r.jsxs("div",{className:"analysis-summary bg-orange-50 p-4 rounded-lg mb-6 border border-orange-200",children:[r.jsxs("div",{className:"flex items-center mb-3",children:[r.jsx("div",{className:"text-orange-600 mr-2",children:r.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),r.jsx("h3",{className:"text-lg font-semibold text-orange-800",children:"   "})]}),r.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[r.jsx("p",{className:"font-medium",children:"        "}),r.jsxs("p",{children:[r.jsx("strong",{children:" :"})," ",n.task_id]}),r.jsxs("p",{children:[r.jsx("strong",{children:"   :"})," ",n.total_funds_involved.toLocaleString()," "]}),n.prepaid_receivable&&r.jsxs("div",{className:"mt-3 p-3 bg-blue-50 rounded border border-blue-200",children:[r.jsx("p",{className:"font-semibold text-blue-800 mb-1",children:" :"}),r.jsxs("p",{className:"text-sm",children:[": ",n.prepaid_receivable.amount.toLocaleString()," "]}),r.jsxs("p",{className:"text-sm",children:[" : ",n.prepaid_receivable.total_paid.toLocaleString()," "]}),r.jsxs("p",{className:"text-sm",children:[" : ",n.prepaid_receivable.balance.toLocaleString()," "]})]}),n.main_receivable&&r.jsxs("div",{className:"mt-3 p-3 bg-green-50 rounded border border-green-200",children:[r.jsx("p",{className:"font-semibold text-green-800 mb-1",children:" :"}),r.jsxs("p",{className:"text-sm",children:[": ",n.main_receivable.amount.toLocaleString()," "]}),r.jsxs("p",{className:"text-sm",children:[" : ",n.main_receivable.total_paid.toLocaleString()," "]}),r.jsxs("p",{className:"text-sm",children:[" : ",n.main_receivable.balance.toLocaleString()," "]})]}),r.jsx("div",{className:"mt-4 p-3 bg-yellow-50 rounded border border-yellow-200",children:r.jsxs("p",{className:"text-sm text-yellow-800",children:[r.jsx("strong",{children:":"}),"        .        ."]})})]})]}),I=(F,B,U,Q,K)=>r.jsxs("div",{className:"receivable-decisions mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold mb-3",children:B}),F.payments.length>0&&r.jsxs("div",{className:"payments-section mb-4",children:[r.jsx("h4",{className:"font-semibold mb-3 text-gray-700",children:"    "}),F.payments.map(T=>r.jsxs("div",{className:"payment-item border p-4 rounded-lg mb-3 bg-gray-50",children:[r.jsxs("div",{className:"payment-info mb-3",children:[r.jsxs("p",{className:"font-medium text-gray-800",children:["  ",T.amount.toLocaleString()," "]}),r.jsxs("p",{className:"text-sm text-gray-600",children:[" : ",new Date(T.paid_at).toLocaleDateString("ar-SA")]})]}),r.jsxs("div",{className:"decision-options space-y-2",children:[r.jsxs("label",{className:"flex items-center p-2 rounded hover:bg-white cursor-pointer",children:[r.jsx("input",{type:"radio",name:`${K}-payment-${T.id}`,onChange:()=>U(T.id,{payment_id:T.id,action:"keep"}),className:"mr-3",defaultChecked:!0}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:" "}),r.jsx("p",{className:"text-sm text-gray-600",children:"   "})]})]}),r.jsxs("label",{className:"flex items-center p-2 rounded hover:bg-white cursor-pointer",children:[r.jsx("input",{type:"radio",name:`${K}-payment-${T.id}`,onChange:()=>U(T.id,{payment_id:T.id,action:"delete"}),className:"mr-3"}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium text-red-600",children:" "}),r.jsx("p",{className:"text-sm text-gray-600",children:"    "})]})]}),r.jsxs("label",{className:"flex items-center p-2 rounded hover:bg-white cursor-pointer",children:[r.jsx("input",{type:"radio",name:`${K}-payment-${T.id}`,onChange:()=>U(T.id,{payment_id:T.id,action:"convert_to_credit"}),className:"mr-3"}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium text-green-600",children:"  "}),r.jsx("p",{className:"text-sm text-gray-600",children:"     "})]})]})]})]},T.id))]}),F.allocations.length>0&&r.jsxs("div",{className:"allocations-section mb-4",children:[r.jsx("h4",{className:"font-semibold mb-3 text-gray-700",children:"    "}),F.allocations.map(T=>r.jsxs("div",{className:"allocation-item border p-4 rounded-lg mb-3 bg-gray-50",children:[r.jsxs("div",{className:"allocation-info mb-3",children:[r.jsxs("p",{className:"font-medium text-gray-800",children:["  ",T.amount.toLocaleString()," "]}),r.jsxs("p",{className:"text-sm text-gray-600",children:[" : ",new Date(T.allocated_at).toLocaleDateString("ar-SA")]})]}),r.jsxs("div",{className:"decision-options space-y-2",children:[r.jsxs("label",{className:"flex items-center p-2 rounded hover:bg-white cursor-pointer",children:[r.jsx("input",{type:"radio",name:`${K}-allocation-${T.id}`,onChange:()=>Q(T.id,{allocation_id:T.id,action:"keep"}),className:"mr-3",defaultChecked:!0}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:" "}),r.jsx("p",{className:"text-sm text-gray-600",children:"   "})]})]}),r.jsxs("label",{className:"flex items-center p-2 rounded hover:bg-white cursor-pointer",children:[r.jsx("input",{type:"radio",name:`${K}-allocation-${T.id}`,onChange:()=>Q(T.id,{allocation_id:T.id,action:"return_to_credit"}),className:"mr-3"}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium text-blue-600",children:"  "}),r.jsx("p",{className:"text-sm text-gray-600",children:"     "})]})]}),r.jsxs("label",{className:"flex items-center p-2 rounded hover:bg-white cursor-pointer",children:[r.jsx("input",{type:"radio",name:`${K}-allocation-${T.id}`,onChange:()=>Q(T.id,{allocation_id:T.id,action:"delete_allocation"}),className:"mr-3"}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium text-red-600",children:" "}),r.jsx("p",{className:"text-sm text-gray-600",children:"    "})]})]})]})]},T.id))]})]});return r.jsx(Zt,{isOpen:!0,onClose:l,title:"  -   ",className:"large-modal",children:r.jsxs("div",{className:"task-cancellation-modal",children:[M(),r.jsxs("div",{className:"task-action-decision mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold mb-3",children:"  "}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("label",{className:"flex items-center p-3 border rounded-lg hover:bg-gray-50 cursor-pointer",children:[r.jsx("input",{type:"radio",name:"task-action",value:"cancel",checked:d==="cancel",onChange:F=>c(F.target.value),className:"mr-3 text-blue-600"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("span",{className:"font-semibold text-gray-800",children:" "}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:'       ""   '})]})]}),r.jsxs("label",{className:"flex items-center p-3 border rounded-lg hover:bg-gray-50 cursor-pointer border-red-200",children:[r.jsx("input",{type:"radio",name:"task-action",value:"delete",checked:d==="delete",onChange:F=>c(F.target.value),className:"mr-3 text-red-600"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("span",{className:"font-semibold text-red-600",children:"  "}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"       ( )"})]})]})]})]}),n.prepaid_receivable&&I(n.prepaid_receivable,s("tasks.prepaidReceivableDecisions"),w,x,"prepaid"),n.main_receivable&&I(n.main_receivable,s("tasks.mainReceivableDecisions"),_,j,"main"),r.jsxs("div",{className:"modal-actions flex justify-end gap-3 pt-4 border-t",children:[r.jsx(Ne,{variant:"secondary",onClick:l,className:"px-6",children:""}),r.jsx(Ne,{variant:d==="delete"?"danger":"primary",onClick:R,disabled:o.isPending,className:"px-6",children:o.isPending?" ...":d==="delete"?"  ":" "})]})]})})},qq=({conflictData:e,onRetry:n,onCancel:t})=>{const{t:s}=qt(),{closeModal:l}=et(),{showToast:i}=ir(),[o,d]=H.useState("cancel"),c=()=>{if(o==="cancel"){t(),l();return}const u=o==="use_current";n(u),l(),i({type:"info",title:s(u?"tasks.usingCurrentData":"tasks.overwritingChanges")})},a=()=>{const u=e.current_task_data;return r.jsxs("div",{className:"space-y-3",children:[r.jsx("h3",{className:"text-lg font-semibold text-black",children:s("tasks.taskDataComparison")}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"rounded-lg border border-blue-600 bg-blue-50 p-3",children:[r.jsx("h4",{className:"font-semibold text-blue-900 text-sm mb-2",children:s("tasks.yourChanges")}),r.jsxs("div",{className:"text-xs text-blue-800 space-y-1",children:[r.jsx("p",{children:r.jsxs("strong",{children:[s("tasks.expectedUpdateTime"),":"]})}),r.jsx("p",{className:"font-mono",children:new Date(e.expected_updated_at).toLocaleString()})]})]}),r.jsxs("div",{className:"rounded-lg border border-green-600 bg-green-50 p-3",children:[r.jsx("h4",{className:"font-semibold text-green-900 text-sm mb-2",children:s("tasks.currentData")}),r.jsxs("div",{className:"text-xs text-green-800 space-y-1",children:[r.jsx("p",{children:r.jsxs("strong",{children:[s("tasks.actualUpdateTime"),":"]})}),r.jsx("p",{className:"font-mono",children:new Date(e.current_updated_at).toLocaleString()}),r.jsxs("div",{className:"mt-2 pt-2 border-t border-green-200 space-y-1",children:[r.jsx("p",{children:r.jsxs("strong",{children:[s("tasks.currentValues"),":"]})}),r.jsxs("p",{children:[s("tasks.taskName"),": ",u.task_name]}),r.jsxs("p",{children:[s("tasks.amount"),": ",u.amount.toLocaleString()," SAR"]}),r.jsxs("p",{children:[s("tasks.prepaidAmount"),": ",u.prepaid_amount.toLocaleString()," SAR"]}),r.jsxs("p",{children:[s("tasks.status"),": ",u.status]})]})]})]})]})]})};return r.jsx(Zt,{isOpen:!0,onClose:l,title:s("tasks.concurrentModificationDetected"),children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"rounded-lg border border-destructive bg-destructive/10 p-4 flex gap-3",children:[r.jsx(On,{className:"text-destructive flex-shrink-0 mt-0.5 h-5 w-5"}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("h3",{className:"font-semibold text-destructive",children:s("tasks.conflictDetected")}),r.jsx("p",{className:"text-sm text-destructive/80",children:s("tasks.concurrentModificationExplanation")}),r.jsx("p",{className:"text-sm text-destructive/80",children:s("tasks.someoneElseModifiedTask")})]})]}),a(),r.jsxs("div",{className:"space-y-3",children:[r.jsx("h3",{className:"text-lg font-semibold text-black",children:s("tasks.chooseResolution")}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"flex gap-3 p-3 border border-border rounded-lg cursor-pointer hover:bg-muted/50 transition-colors",children:[r.jsx("input",{type:"radio",name:"resolution",value:"use_current",checked:o==="use_current",onChange:u=>d(u.target.value),className:"mt-1 rounded"}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("span",{className:"font-semibold text-green-700 text-sm block",children:s("tasks.useCurrentData")}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:s("tasks.useCurrentDataDescription")})]})]}),r.jsxs("label",{className:"flex gap-3 p-3 border border-border rounded-lg cursor-pointer hover:bg-muted/50 transition-colors",children:[r.jsx("input",{type:"radio",name:"resolution",value:"overwrite",checked:o==="overwrite",onChange:u=>d(u.target.value),className:"mt-1 rounded"}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("span",{className:"font-semibold text-blue-700 text-sm block",children:s("tasks.overwriteChanges")}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:s("tasks.overwriteChangesDescription")})]})]}),r.jsxs("label",{className:"flex gap-3 p-3 border border-border rounded-lg cursor-pointer hover:bg-muted/50 transition-colors",children:[r.jsx("input",{type:"radio",name:"resolution",value:"cancel",checked:o==="cancel",onChange:u=>d(u.target.value),className:"mt-1 rounded"}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("span",{className:"font-semibold text-gray-700 text-sm block",children:s("tasks.cancelUpdate")}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:s("tasks.cancelUpdateDescription")})]})]})]})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t border-border",children:[r.jsx(Ne,{variant:"secondary",onClick:()=>{t(),l()},children:s("common.cancel")}),r.jsx(Ne,{variant:o==="overwrite"?"danger":o==="use_current"?"primary":"secondary",onClick:c,disabled:o==="cancel",children:s(o==="overwrite"?"tasks.overwriteChanges":o==="use_current"?"tasks.useCurrentData":"common.cancel")})]})]})})},$q=()=>{const{t:e}=qt(),{success:n,error:t}=ir(),s=et(y=>y.closeModal),l=et(y=>y.props),{task:i}=l,{data:o=[],isLoading:d}=Uy(),c=EF(),{control:a,handleSubmit:u,formState:{isSubmitting:h},reset:f}=Wn({defaultValues:{assigned_to_id:i?.assigned_to_id||null}});H.useEffect(()=>{i&&f({assigned_to_id:i.assigned_to_id||null})},[i,f]);const m=()=>{if(!i?.assigned_to_id)return" ";const y=o.find(g=>g.user_id===i.assigned_to_id);return y?y.display_name:"Unknown Employee"},b=y=>{i&&c.mutate({taskId:i.id,assignedToId:y.assigned_to_id},{onSuccess:()=>{const g=y.assigned_to_id?o.find(w=>w.user_id===y.assigned_to_id)?.display_name||"Unknown":" ";n("  ",y.assigned_to_id?`  ${g} `:"   "),s()},onError:g=>{t("  ",g.message||"     ")}})};return i?r.jsx(Zt,{isOpen:!0,onClose:s,title:" ",children:r.jsxs("form",{onSubmit:u(b),className:"space-y-4",children:[r.jsxs("div",{className:"p-4 rounded-lg bg-muted border border-border space-y-3",children:[r.jsx("h6",{className:"font-semibold text-black",children:" "}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("span",{className:"text-muted-foreground text-xs block",children:":"}),r.jsx("div",{className:"font-medium text-black",children:i.client?.name||"  "})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("span",{className:"text-muted-foreground text-xs block",children:" :"}),r.jsx("div",{className:"font-medium text-black",children:e(`type.${i.type}`)})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("span",{className:"text-muted-foreground text-xs block",children:" :"}),r.jsx("div",{className:"font-medium text-black",children:i.task_name||e(`type.${i.type}`)})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("span",{className:"text-muted-foreground text-xs block",children:" :"}),r.jsx("div",{className:"font-medium text-primary",children:m()})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"font-semibold text-black text-sm flex items-center gap-2",children:[r.jsx(nc,{size:16})," "]}),r.jsx(an,{name:"assigned_to_id",control:a,render:({field:y})=>r.jsxs("select",{...y,className:"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary disabled:bg-muted text-black",value:y.value||"",onChange:g=>y.onChange(g.target.value===""?null:Number(g.target.value)),disabled:d||h,children:[r.jsx("option",{value:"",children:" "}),o.map(g=>r.jsx("option",{value:g.user_id,children:g.display_name},g.user_id))]})}),d&&r.jsx("small",{className:"text-muted-foreground text-xs",children:"   ..."})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t border-border",children:[r.jsxs(Ne,{type:"button",variant:"secondary",onClick:s,disabled:h,children:[r.jsx(ln,{size:16,className:"mr-1"}),""]}),r.jsxs(Ne,{type:"submit",variant:"primary",disabled:h||d,isLoading:h,children:[r.jsx(nc,{size:16,className:"mr-1"}),h?" ...":" "]})]})]})}):null},Uq=()=>{const{t:e}=qt(),n=et(x=>x.closeModal),t=et(x=>x.props),{task:s}=t,{success:l,error:i}=ir(),[o,d]=H.useState(!1),c=SF(),a=kF(),{register:u,handleSubmit:h,formState:{errors:f},watch:m}=Wn({defaultValues:{expense_amount:0,notes:""}}),b=m("expense_amount"),y=s.amount-(Number(b)||0),g=x=>{if(x.expense_amount<0){i(e("common.error"),"      ");return}if(x.expense_amount>s.amount){i(e("common.error"),"       ");return}c.mutate({id:Number(s.id),expense_amount:Number(x.expense_amount),notes:x.notes},{onSuccess:()=>{l(e("tasks.approvalSuccess"),`    "${s.task_name||` #${s.id}`}"    ${y.toFixed(2)}`),n()},onError:_=>{i(e("common.error"),_.message||"    ")}})},w=()=>{a.mutate({id:Number(s.id),rejection_reason:"Task rejected by admin"},{onSuccess:()=>{l("  ",`   "${s.task_name||` #${s.id}`}"     ""`),n()},onError:x=>{i(e("common.error"),x.message||"   ")}})};return r.jsx(Zt,{isOpen:!0,onClose:n,title:"  ",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:" "}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:" :"}),r.jsx("p",{className:"font-medium",children:s.task_name||` #${s.id}`})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:":"}),r.jsx("p",{className:"font-medium",children:s.client?s.client.name:"  "})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:" :"}),r.jsx("p",{className:"font-medium",children:s.amount.toFixed(2)})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:":"}),r.jsx("p",{className:"font-medium text-orange-600",children:s.status})]})]})]}),o?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"bg-red-50 p-4 rounded-lg border border-red-200",children:[r.jsx("h3",{className:"font-medium text-red-800 mb-2",children:" "}),r.jsx("p",{className:"text-red-700 text-sm",children:'               ""       .'})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx(Ne,{type:"button",variant:"outline-secondary",onClick:()=>d(!1),disabled:a.isPending,children:""}),r.jsx(Ne,{type:"button",variant:"outline-secondary",onClick:n,disabled:a.isPending,children:""}),r.jsx(Ne,{type:"button",variant:"danger",onClick:w,isLoading:a.isPending,disabled:a.isPending,children:" "})]})]}):r.jsxs("form",{onSubmit:h(g),className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"expense_amount",className:"block text-sm font-medium text-gray-700 mb-1",children:"  *"}),r.jsx(Kt,{id:"expense_amount",type:"number",step:"0.01",min:"0",max:s.amount,...u("expense_amount",{required:"  ",valueAsNumber:!0,min:{value:0,message:"      "},max:{value:s.amount,message:"       "}}),error:f.expense_amount?.message,placeholder:"  "})]}),r.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-600",children:" :"}),r.jsx("span",{className:`font-semibold ${y>=0?"text-green-600":"text-red-600"}`,children:y.toFixed(2)})]}),r.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["  (",s.amount.toFixed(2),") -   (",(Number(b)||0).toFixed(2),")"]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-1",children:" ()"}),r.jsx("textarea",{id:"notes",rows:3,...u("notes"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"       ..."})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx(Ne,{type:"button",variant:"outline-danger",onClick:()=>d(!0),disabled:c.isPending||a.isPending,children:""}),r.jsx(Ne,{type:"button",variant:"outline-secondary",onClick:n,disabled:c.isPending||a.isPending,children:""}),r.jsx(Ne,{type:"submit",variant:"primary",isLoading:c.isPending,disabled:c.isPending||a.isPending,children:" "})]})]})]})})},Hq=()=>{const{t:e}=qt(),n=et(j=>j.closeModal),t=et(j=>j.props),{task:s}=t,{success:l,error:i}=ir(),o=Nt(),d=s.prepaid_receivable?.amount||s.prepaid_amount||0,c=s.amount-d,{data:a,isLoading:u}=sl(),{register:h,handleSubmit:f,control:m,formState:{errors:b},watch:y,setValue:g}=Wn({defaultValues:{is_paid:!1,is_full_payment:!0,payment_amount:c,paid_at:new Date().toISOString().split("T")[0],due_date:new Date().toISOString().split("T")[0],payment_note:""}}),w=y("is_paid"),x=y("is_full_payment");H.useEffect(()=>{x&&w&&g("payment_amount",c)},[x,w,c,g]);const _=async j=>{try{const R=await Xe.post(`/tasks/${s.id}/submit-for-review`);if(!R.data.success)throw new Error(R.data.message||"Failed to submit task for review");const M=R.data.data.receivable_id;if(!M)throw new Error("No receivable was created");if(j.is_paid&&j.payment_method_id){const I=j.is_full_payment?c:Number(j.payment_amount);if(isNaN(I)||I<=0||I>c){i(e("common.error"),e("payments.invalidAmount"));return}const F={receivable_id:M,amount:I,payment_method_id:Number(j.payment_method_id),paid_at:j.paid_at,notes:j.payment_note||""},B=await Xe.post("/payments",F);B.data.success||console.warn("Task submitted but payment creation failed:",B.data.message),l(e("tasks.submitSuccess"),e("tasks.submitWithPaymentSuccessMessage",{taskName:s.task_name||e(`type.${s.type}`),amount:I}))}else l(e("tasks.submitSuccess"),e("tasks.submitSuccessMessage",{taskName:s.task_name||e(`type.${s.type}`)}));o.invalidateQueries({queryKey:["dashboard"]}),o.invalidateQueries({queryKey:["tasks"]}),o.invalidateQueries({queryKey:["receivables"]}),o.invalidateQueries({queryKey:["clients"]}),o.invalidateQueries({queryKey:["employee"]}),n()}catch(R){i(e("common.error"),R.message||e("tasks.submitError"))}};return r.jsxs(Zt,{isOpen:!0,onClose:n,title:e("tasks.submitForReview",{taskName:s.task_name||e(`type.${s.type}`)}),children:[r.jsxs("div",{className:"rounded-lg border border-blue-600 bg-blue-50 p-3 flex flex-col gap-2",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsx("span",{className:"text-sm",children:"  :"}),r.jsxs("span",{className:"font-semibold text-sm",children:[s.amount.toLocaleString()," "]})]}),r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsx("span",{className:"text-sm",children:" :"}),r.jsxs("span",{className:"font-semibold text-sm",children:[(s.prepaid_amount||0).toLocaleString()," "]})]}),r.jsx("div",{className:"border-t border-blue-600 my-1 pt-2"}),r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsx("span",{className:"font-semibold text-sm",children:" :"}),r.jsxs("span",{className:"font-semibold text-sm",children:[c.toLocaleString()," "]})]})]}),r.jsxs("div",{className:"rounded-lg border border-yellow-600 bg-yellow-50 p-3 flex flex-col gap-2",children:[r.jsx("h6",{className:"font-semibold text-yellow-800 text-sm",children:e("tasks.submitForReviewModal.title")}),r.jsx("p",{className:"text-yellow-700 text-sm mb-2",children:e("tasks.submitForReviewModal.taskWillBeSubmitted",{taskName:s.task_name||`#${s.id}`})}),r.jsx("p",{className:"text-yellow-700 text-sm mb-0",children:e("tasks.submitForReviewModal.askAboutPayment")})]}),r.jsxs("form",{onSubmit:f(_),className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(an,{name:"is_paid",control:m,render:({field:j})=>r.jsx("input",{type:"checkbox",className:"rounded cursor-pointer",id:"is_paid",checked:j.value,onChange:R=>{j.onChange(R.target.checked)}})}),r.jsx("label",{className:"cursor-pointer text-sm",htmlFor:"is_paid",children:e("tasks.submitForReviewModal.paymentReceived")})]}),w?r.jsxs("div",{className:"space-y-4 pl-6 border-l-2 border-primary",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(an,{name:"is_full_payment",control:m,render:({field:j})=>r.jsx("input",{type:"checkbox",className:"rounded cursor-pointer",id:"is_full_payment",checked:j.value,onChange:j.onChange})}),r.jsx("label",{className:"cursor-pointer text-sm",htmlFor:"is_full_payment",children:e("payments.fullPayment")})]}),r.jsx(Kt,{label:e("payments.amountLabel"),type:"number",step:"0.01",max:c,disabled:x,...h("payment_amount",{required:w&&!x,valueAsNumber:!0,max:{value:c,message:`       ${c} `},min:.01}),error:b.payment_amount?b.payment_amount.message||e("payments.amountRequired"):void 0}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"font-semibold text-black text-sm block",children:e("payments.methodLabel")}),r.jsx(an,{name:"payment_method_id",control:m,rules:{required:w},render:({field:j})=>r.jsxs("select",{...j,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary ${b.payment_method_id?"border-destructive bg-destructive/5":"border-border"}`,disabled:u,children:[r.jsx("option",{value:"",children:e("payments.selectMethod")}),a?.map(R=>r.jsx("option",{value:R.id,children:R.name},R.id))]})}),b.payment_method_id&&r.jsx("div",{className:"text-destructive text-sm",children:e("payments.methodRequired")})]}),r.jsx(Kt,{label:e("payments.dateLabel"),type:"date",...h("paid_at",{required:w}),error:b.paid_at?e("payments.dateRequired"):void 0}),r.jsx(Kt,{label:e("payments.notesLabel"),...h("payment_note")})]}):r.jsx(Kt,{label:e("receivables.dueDate"),type:"date",...h("due_date"),error:b.due_date?e("receivables.dueDateRequired"):void 0}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t border-border",children:[r.jsx(Ne,{type:"button",variant:"secondary",onClick:n,children:e("common.cancel")}),r.jsx(Ne,{type:"submit",children:e(w?"tasks.submitForReviewModal.submitWithPayment":"tasks.submitForReviewModal.submitWithoutPayment")})]})]})]})},Vq=50,Kq=async(e,n)=>{const{data:t}=await Xe.get(`/accounts/${e}/${n}/balance`);if(t.success===!1)throw new Error(t.message||"Failed to fetch account balance");let s;if(t.data&&typeof t.data=="object")s=t.data;else if(typeof t=="object"&&!Array.isArray(t))s=t;else throw new Error("Invalid balance response format");return{account_type:s.account_type||e,account_id:s.account_id||n,name:s.name,current_balance:s.current_balance??s.balance??0,total_credits:s.total_credits??0,total_debits:s.total_debits??0,total_invoiced:s.total_invoiced,total_paid:s.total_paid,last_updated:s.last_updated||new Date().toISOString()}},Wq=async(e,n,t=1,s=Vq)=>{const{data:l}=await Xe.get(`/accounts/${e}/${n}/history`,{params:{page:t,per_page:s}});if(l.success===!1)throw new Error(l.message||"Failed to fetch account history");let i=[],o={total:0,per_page:s,current_page:t,total_pages:1,has_next:!1,has_prev:!1};return l.data?.transactions?(i=l.data.transactions,o=l.data.pagination||o):l.data?.data?(i=l.data.data,o=l.data.pagination||o):l.transactions?(i=l.transactions,o=l.pagination||o):Array.isArray(l.data)?i=l.data:Array.isArray(l)&&(i=l),{transactions:i,pagination:o}},Qq=(e,n,t=!0)=>or({queryKey:["account",e,n,"balance"],queryFn:()=>Kq(e,n),enabled:!!n&&t,staleTime:30*1e3}),Gq=(e,n,t=1,s=!0)=>or({queryKey:["account",e,n,"history",t],queryFn:()=>Wq(e,n,t),enabled:!!n&&s,staleTime:10*1e3}),Xq=20,Yq=async(e={})=>{const n={page:e.page||1,per_page:e.per_page||Xq};e.status&&(n.status=e.status),e.payment_status&&(n.payment_status=e.payment_status),e.client_id&&(n.client_id=e.client_id),e.employee_user_id&&(n.employee_user_id=e.employee_user_id),e.date_from&&(n.date_from=e.date_from),e.date_to&&(n.date_to=e.date_to),e.orderby&&(n.orderby=e.orderby),e.order&&(n.order=e.order),e.search&&(n.search=e.search);const{data:t}=await Xe.get("/invoices",{params:n});return{invoices:(t.invoices||[]).map(Vm),pagination:t.pagination}},Zq=async({pageParam:e=1,filters:n={}})=>Yq({...n,page:e}),Jq=async e=>{const{data:n}=await Xe.get(`/invoices/${e}`);return Vm(n)},e$=async e=>{const{data:n}=await Xe.post("/invoices",e);return Vm(n)},t$=async e=>{const n={per_page:100};e&&(n.client_id=e);const{data:t}=await Xe.get("/invoices/payable",{params:n});let s=[];return Array.isArray(t)?s=t:t.invoices&&(s=t.invoices),s.map(Vm)},r$=async({invoiceId:e,payload:n})=>{const{data:t}=await Xe.post(`/invoices/${e}/payments`,n);return t};function Vm(e){return{...e,id:Number(e.id),client_id:Number(e.client_id),task_id:e.task_id?Number(e.task_id):null,created_by:Number(e.created_by),amount:Number(e.amount||e.total_amount||0),total_amount:Number(e.total_amount||e.amount||0),paid_amount:Number(e.paid_amount||e.amount_paid||0),amount_paid:Number(e.amount_paid||e.paid_amount||0),remaining_amount:Number(e.remaining_amount||e.amount_due||(e.amount||e.total_amount||0)-(e.paid_amount||e.amount_paid||0)),amount_due:Number(e.amount_due||e.remaining_amount||(e.amount||e.total_amount||0)-(e.paid_amount||e.amount_paid||0)),is_fully_paid:e.is_fully_paid??e.status==="paid",is_partially_paid:e.is_partially_paid??e.status==="partially_paid",is_overdue:e.is_overdue??e.status==="overdue"}}const n$=(e={},n=!0)=>xa({queryKey:["invoices","infinite",e],queryFn:({pageParam:t})=>Zq({pageParam:t,filters:e}),initialPageParam:1,getNextPageParam:t=>{if(t.pagination.current_page<t.pagination.total_pages)return t.pagination.current_page+1},enabled:n,staleTime:30*1e3}),s$=(e,n=!0)=>or({queryKey:["invoice",e],queryFn:()=>Jq(e),enabled:!!e&&n,staleTime:10*1e3}),a$=(e,n=!0)=>or({queryKey:["invoices","payable",e],queryFn:()=>t$(e),enabled:n,staleTime:0,gcTime:0,refetchOnMount:!0,refetchOnWindowFocus:!0,refetchOnReconnect:!0}),i$=()=>{const e=Nt();return Et({mutationFn:e$,onSuccess:n=>{e.invalidateQueries({queryKey:["invoices"]}),e.invalidateQueries({queryKey:["invoices","client",n.client_id]}),e.invalidateQueries({queryKey:["account","client",n.client_id]}),e.invalidateQueries({queryKey:["client",n.client_id]}),e.invalidateQueries({queryKey:["clients"]}),e.invalidateQueries({queryKey:["client"]}),e.invalidateQueries({queryKey:["dashboard"]}),e.invalidateQueries({queryKey:["account","clients"]}),e.invalidateQueries({queryKey:["tasks"]}),e.invalidateQueries({queryKey:["employee"]}),e.invalidateQueries({queryKey:["employees"]}),e.invalidateQueries({queryKey:["receivables"]})}})},o$=()=>{const e=Nt();return Et({mutationFn:r$,onSuccess:async n=>{await e.invalidateQueries({queryKey:["invoice",n.invoice_id],refetchType:"active"}),await e.invalidateQueries({queryKey:["invoices",n.invoice_id,"payments"],refetchType:"active"}),await e.invalidateQueries({queryKey:["invoices"],refetchType:"active"}),await e.invalidateQueries({queryKey:["invoices","payable"],refetchType:"all"}),await e.invalidateQueries({queryKey:["account"],refetchType:"active"}),await e.invalidateQueries({queryKey:["clients"],refetchType:"active"}),await e.invalidateQueries({queryKey:["client"],refetchType:"active"}),await e.invalidateQueries({queryKey:["dashboard"],refetchType:"active"}),await e.invalidateQueries({queryKey:["tasks"],refetchType:"active"}),await e.invalidateQueries({queryKey:["employee"],refetchType:"active"}),await e.invalidateQueries({queryKey:["employees"],refetchType:"active"}),await e.invalidateQueries({queryKey:["receivables"],refetchType:"active"})}})},li=e=>{const n=typeof e=="string"?parseFloat(e):e??0;return isNaN(n)?"SAR 0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"SAR",minimumFractionDigits:2}).format(n)},Kh=e=>{const n=e.debit;if(n!=null){const s=parseFloat(n);return isNaN(s)?0:s}return e.direction==="debit"||e.transaction_type==="INVOICE_CREATED"||e.transaction_type==="INVOICE_GENERATED"?typeof e.amount=="string"?parseFloat(e.amount):e.amount:0},wN=e=>{const n=e.credit;if(n!=null){const s=parseFloat(n);return isNaN(s)?0:s}return e.direction==="debit"||e.transaction_type==="INVOICE_CREATED"||e.transaction_type==="INVOICE_GENERATED"?0:typeof e.amount=="string"?parseFloat(e.amount):e.amount},l$=e=>{const n=e.balance??e.balance_after;if(n==null)return 0;const t=typeof n=="string"?parseFloat(n):n;return isNaN(t)?0:t},_N=De.memo(({rowData:e})=>{const n=t=>{switch(t){case"INVOICE_CREATED":case"INVOICE_GENERATED":return r.jsx(Vo,{size:16,className:"text-red-500"});case"PAYMENT_RECEIVED":return r.jsx(FM,{size:16,className:"text-green-500"});case"CREDIT_APPLIED":case"CREDIT_RECEIVED":case"CREDIT_ALLOCATED":return r.jsx(l6,{size:16,className:"text-blue-500"});case"REVERSAL":case"INVOICE_REVERSED":return r.jsx(qM,{size:16,className:"text-orange-500"});default:return r.jsx(Sn,{size:16,className:"text-gray-500"})}};return r.jsx("span",{className:"hulool-cell-content",style:{justifyContent:"center"},children:n(e.transaction_type)})});_N.displayName="TransactionIconCell";const jN=De.memo(({rowData:e,active:n})=>r.jsx("span",{className:"hulool-cell-content",style:{fontWeight:n?700:500,color:"#000000"},children:e.description}));jN.displayName="DescriptionCell";const NN=De.memo(({rowData:e,columnData:n,active:t})=>{const s=Kh(e);return r.jsx("span",{className:"hulool-cell-content",style:{justifyContent:"center",color:"#dc2626",fontWeight:t?700:400},children:n?.hideAmounts?"***":s>0?li(s):""})});NN.displayName="DebitCell";const CN=De.memo(({rowData:e,columnData:n,active:t})=>{const s=wN(e);return r.jsx("span",{className:"hulool-cell-content",style:{justifyContent:"center",color:"#16a34a",fontWeight:t?700:400},children:n?.hideAmounts?"***":s>0?li(s):""})});CN.displayName="CreditCell";const SN=De.memo(({rowData:e,columnData:n,active:t})=>{const s=l$(e);return r.jsx("span",{className:"hulool-cell-content",style:{justifyContent:"center",fontWeight:t?800:700,color:s>=0?"#dc2626":"#16a34a"},children:n?.hideAmounts?"***":li(s)})});SN.displayName="BalanceCell";const kN=De.memo(({rowData:e,active:n})=>r.jsx("span",{className:"hulool-cell-content",style:{justifyContent:"center",fontSize:"0.875rem",color:"#000000",fontWeight:n?700:400},children:Zr(e.transaction_date||e.created_at)}));kN.displayName="DateCell";const EN=De.memo(({rowData:e})=>{const t={INVOICE_CREATED:{bg:"#fee2e2",text:"#b91c1c",label:""},INVOICE_GENERATED:{bg:"#fee2e2",text:"#b91c1c",label:""},PAYMENT_RECEIVED:{bg:"#dcfce7",text:"#15803d",label:""},CREDIT_APPLIED:{bg:"#dbeafe",text:"#1d4ed8",label:" "},CREDIT_RECEIVED:{bg:"#dbeafe",text:"#1d4ed8",label:" "},CREDIT_ALLOCATED:{bg:"#dbeafe",text:"#1d4ed8",label:" "},ADJUSTMENT:{bg:"#fef9c3",text:"#a16207",label:""},REVERSAL:{bg:"#ffedd5",text:"#c2410c",label:""},INVOICE_REVERSED:{bg:"#ffedd5",text:"#c2410c",label:" "}}[e.transaction_type]||{bg:"#f3f4f6",text:"#4b5563",label:e.transaction_type};return r.jsx("span",{className:"hulool-cell-content",style:{justifyContent:"center"},children:r.jsx("span",{style:{backgroundColor:t.bg,color:t.text,padding:"4px 10px",borderRadius:"9999px",fontSize:"0.875rem",fontWeight:600},children:t.label})})});EN.displayName="TypeBadgeCell";const RN=De.memo(({rowData:e,columnData:n})=>{const{client:t,payableInvoices:s,openModal:l}=n||{};if(!n)return null;const i=(c,a)=>{const u=c.related_object_id;if(u==null)return!1;const h=Number(u);return!isNaN(h)&&h===a},o=c=>{c.stopPropagation(),c.preventDefault();const a=s?.find(u=>i(e,u.id));if(a&&t)l?.("recordPayment",{invoice:a,clientName:t.name});else if(t){const h={id:Number(e.related_object_id),client_id:t.id,description:e.description,amount:Kh(e),remaining_amount:Kh(e),status:"pending",type:"Other"};l?.("recordPayment",{invoice:h,clientName:t.name})}};return(e.transaction_type==="INVOICE_CREATED"||e.transaction_type==="INVOICE_GENERATED")&&e.related_object_type==="invoice"&&s?.some(c=>i(e,c.id))?r.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",pointerEvents:"auto"},onMouseDown:c=>c.stopPropagation(),onClick:c=>c.stopPropagation(),children:r.jsxs("button",{onClick:o,onMouseDown:c=>c.stopPropagation(),style:{display:"flex",alignItems:"center",gap:"4px",padding:"4px 12px",backgroundColor:"var(--color-primary, #3b82f6)",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.875rem",fontWeight:500,pointerEvents:"auto"},children:[r.jsx(gs,{size:14})," "]})}):null});RN.displayName="ActionsCell";const c$=({client:e,filter:n="all",hideAmounts:t=!1})=>{qt();const s=et(b=>b.openModal),{data:l,isLoading:i,error:o}=Gq("client",e.id),{data:d,isLoading:c}=Qq("client",e.id),{data:a}=a$(e.id),u=i||c,h=H.useMemo(()=>l?.transactions?l.transactions.filter(b=>{switch(n){case"invoices":return b.transaction_type==="INVOICE_CREATED"||b.transaction_type==="INVOICE_GENERATED";case"payments":return b.transaction_type==="PAYMENT_RECEIVED";case"credits":return b.transaction_type==="CREDIT_APPLIED"||b.transaction_type==="CREDIT_RECEIVED"||b.transaction_type==="CREDIT_ALLOCATED";default:return!0}}):[],[l?.transactions,n]),f=H.useMemo(()=>{const b=h.reduce((w,x)=>w+Kh(x),0),y=h.reduce((w,x)=>w+wN(x),0),g=d?.current_balance??b-y;return{totalDebit:b,totalCredit:y,balance:g}},[h,d]),m=H.useMemo(()=>[{id:"icon",key:"transaction_type",title:"",type:"custom",component:_N,width:50,grow:0},{id:"description",key:"description",title:"",type:"custom",component:jN,grow:2},{id:"debit",key:"debit",title:"",type:"custom",component:NN,columnData:{hideAmounts:t},grow:1},{id:"credit",key:"credit",title:"",type:"custom",component:CN,columnData:{hideAmounts:t},grow:1},{id:"balance",key:"balance",title:"",type:"custom",component:SN,columnData:{hideAmounts:t},grow:1},{id:"date",key:"transaction_date",title:"",type:"custom",component:kN,grow:1},{id:"type",key:"transaction_type",title:"",type:"custom",component:EN,grow:1},{id:"actions",key:"id",title:"",type:"custom",component:RN,columnData:{client:e,payableInvoices:a,openModal:s},width:100,grow:0}],[t,e,a,s]);return o?r.jsxs("div",{className:"text-center p-12 text-red-500",children:[r.jsx(Sn,{size:48,className:"mb-3 opacity-50 mx-auto"}),r.jsx("p",{className:"mb-0",children:"    "})]}):r.jsxs("div",{className:"account-ledger-wrapper",children:[d&&r.jsx("div",{className:"rounded-lg border border-border bg-card shadow-sm mb-4 p-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 text-center",children:[r.jsxs("div",{className:"flex flex-col items-center p-3 bg-gray-50 rounded-lg",children:[r.jsx("span",{className:"text-sm text-gray-500 mb-1",children:" "}),r.jsx("span",{className:"text-lg font-bold text-red-600",children:t?"***":li(d.total_debits)})]}),r.jsxs("div",{className:"flex flex-col items-center p-3 bg-gray-50 rounded-lg",children:[r.jsx("span",{className:"text-sm text-gray-500 mb-1",children:" "}),r.jsx("span",{className:"text-lg font-bold text-green-600",children:t?"***":li(d.total_credits)})]}),r.jsxs("div",{className:"flex flex-col items-center p-3 bg-primary/10 rounded-lg",children:[r.jsx("span",{className:"text-sm text-primary mb-1",children:" "}),r.jsx("span",{className:`text-xl font-bold ${d.current_balance>=0?"text-red-600":"text-green-600"}`,children:t?"***":li(d.current_balance)})]}),r.jsxs("div",{className:"flex flex-col items-center p-3 bg-gray-50 rounded-lg",children:[r.jsx("span",{className:"text-sm text-gray-500 mb-1",children:" "}),r.jsx("span",{className:"text-sm font-medium text-gray-700",children:Zr(d.last_updated)})]})]})}),r.jsx(co,{data:h,columns:m,isLoading:u,emptyMessage:"   ",showId:!1,height:"auto",minHeight:300}),r.jsx("div",{className:"rounded-lg border border-border bg-card shadow-sm mt-2",children:r.jsx("div",{className:"p-2",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 text-center",children:[r.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-100 rounded",children:[r.jsx("span",{className:"text-gray-600 text-sm",children:" :"}),r.jsx("span",{className:"font-bold text-red-600",children:t?"***":li(f.totalDebit)})]}),r.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-100 rounded",children:[r.jsx("span",{className:"text-gray-600 text-sm",children:" :"}),r.jsx("span",{className:"font-bold text-green-600",children:t?"***":li(f.totalCredit)})]}),r.jsxs("div",{className:"flex justify-between items-center p-2 bg-primary text-white rounded",children:[r.jsx("span",{className:"text-sm",children:" :"}),r.jsx("span",{className:"font-bold",children:t?"***":li(f.balance)})]})]})})})]})},C3=()=>{const{t:e}=qt(),n=et(U=>U.props),t=et(U=>U.closeModal),s=n.client,[l,i]=H.useState(0),[o,d]=H.useState(s||null),[c,a]=H.useState([]),{register:u,handleSubmit:h,formState:{errors:f},setValue:m,watch:b,control:y}=Wn({defaultValues:{client_id:s?.id,type:"Other",line_items:[]}}),g=i$(),w=["Government","RealEstate","Accounting","Other"],x=b("amount")||0,_=c.reduce((U,Q)=>U+(Q.amount||0),0),j=c.length>0?_:x,R=()=>{a([...c,{description:"",quantity:1,unit_price:0,amount:0}])},M=U=>{a(c.filter((Q,K)=>K!==U))},I=(U,Q,K)=>{const T=[...c];T[U]={...T[U],[Q]:K},(Q==="quantity"||Q==="unit_price")&&(T[U].amount=T[U].quantity*T[U].unit_price),a(T)},F=U=>{const Q={...U,amount:j,line_items:c.length>0?c:void 0};g.mutate(Q,{onSuccess:()=>{t()}})},B=U=>({Government:"",RealEstate:"",Accounting:"",Other:""})[U]||"";return r.jsx(Zt,{isOpen:!0,onClose:t,title:"  ",children:r.jsxs("form",{onSubmit:h(F),children:[l===0&&r.jsxs("div",{className:"task-type-step",children:[r.jsxs("div",{className:"text-center mb-4",children:[r.jsx("h5",{className:"mb-2",children:"  "}),r.jsx("p",{className:"text-muted small",children:"   "})]}),r.jsx("div",{className:"type-selection-grid",children:r.jsx(an,{name:"type",control:y,rules:{required:!0},render:({field:U})=>r.jsx(r.Fragment,{children:w.map(Q=>r.jsxs("div",{className:`type-card ${U.value===Q?"selected":""}`,onClick:()=>{U.onChange(Q),i(1)},children:[r.jsx("div",{className:"type-icon text-3xl mb-2",children:B(Q)}),r.jsx("div",{className:"type-label",children:e(`receivables.type.${Q}`)})]},Q))})})}),f.type&&r.jsx("div",{className:"text-center text-danger small mt-2",children:e("common.required")}),r.jsx("div",{className:"modal-footer-compact",children:r.jsxs("div",{className:"footer-content",children:[r.jsx("div",{}),r.jsx("div",{className:"footer-right",children:r.jsx(Ne,{type:"button",variant:"secondary",size:"sm",onClick:t,children:e("common.cancel")})})]})})]}),l===1&&r.jsxs("div",{className:"client-selection-step",children:[r.jsx("div",{className:"selected-type-display mb-4",children:r.jsxs("div",{className:"d-flex align-items-center justify-content-center",children:[r.jsx("span",{className:"badge bg-primary me-2",children:""}),r.jsx("span",{className:"text-muted small",children:":"}),r.jsx("span",{className:"fw-bold ms-2",children:b("type")?e(`receivables.type.${b("type")}`):""})]})}),s?r.jsxs("div",{className:"text-center",children:[r.jsx("h5",{className:"mb-3",children:" "}),r.jsxs("div",{className:"client-card selected mx-auto",style:{maxWidth:"300px"},children:[r.jsxs("div",{className:"client-info",children:[r.jsx("div",{className:"client-name",children:s.name}),r.jsx("div",{className:"client-phone",children:s.phone})]}),r.jsx("div",{className:"selected-indicator",children:r.jsx("span",{className:"text-green-500 text-xl",children:""})})]}),r.jsx(Ne,{variant:"primary",size:"sm",className:"mt-3",onClick:()=>{d(s),m("client_id",s.id),i(2)},children:e("common.continue")})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"text-center mb-4",children:[r.jsx("h5",{className:"mb-2",children:" "}),r.jsx("p",{className:"text-muted small",children:"      "})]}),r.jsx("div",{className:"client-search-container",children:r.jsx(Um,{label:"",onSelect:U=>{d(U),m("client_id",U.id),i(2)},disabled:!1})})]}),r.jsx(an,{name:"client_id",control:y,rules:{required:!0},render:({field:U})=>r.jsx("input",{type:"hidden",...U})}),f.client_id&&r.jsx("div",{className:"text-center text-danger small mt-2",children:e("common.required")}),r.jsx("div",{className:"modal-footer-compact",children:r.jsxs("div",{className:"footer-content",children:[r.jsx("div",{className:"footer-left",children:r.jsx(Ne,{type:"button",variant:"secondary",size:"sm",onClick:()=>i(0),children:" "})}),r.jsx("div",{className:"footer-right",children:r.jsx(Ne,{type:"button",variant:"secondary",size:"sm",onClick:t,children:e("common.cancel")})})]})})]}),l===2&&r.jsxs("div",{children:[r.jsx("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-500",children:""}),r.jsx(an,{name:"type",control:y,rules:{required:!0},render:({field:U})=>r.jsx("select",{...U,className:`form-select mt-1 ${f.type?"is-invalid":""}`,children:w.map(Q=>r.jsx("option",{value:Q,children:e(`receivables.type.${Q}`)},Q))})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-500",children:""}),r.jsxs("div",{className:"mt-1",children:[r.jsx("strong",{children:o?.name}),r.jsx("small",{className:"d-block text-muted",children:o?.phone}),r.jsx("button",{type:"button",className:"btn btn-link btn-sm p-0 text-decoration-none",onClick:()=>i(1),children:" "})]})]})]})}),r.jsx(Kt,{label:" ",...u("description",{required:!0}),error:f.description&&e("common.required"),placeholder:"  "}),r.jsxs("div",{className:"mb-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("label",{className:"font-medium",children:" "}),r.jsxs(Ne,{type:"button",variant:"outline-primary",size:"sm",onClick:R,children:[r.jsx(hn,{size:14,className:"ml-1"}),"  "]})]}),c.length>0?r.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[r.jsxs("div",{className:"grid grid-cols-12 gap-2 p-2 bg-gray-100 text-sm font-medium",children:[r.jsx("div",{className:"col-span-5",children:""}),r.jsx("div",{className:"col-span-2 text-center",children:""}),r.jsx("div",{className:"col-span-2 text-center",children:""}),r.jsx("div",{className:"col-span-2 text-center",children:""}),r.jsx("div",{className:"col-span-1"})]}),c.map((U,Q)=>r.jsxs("div",{className:"grid grid-cols-12 gap-2 p-2 border-t items-center",children:[r.jsx("div",{className:"col-span-5",children:r.jsx("input",{type:"text",className:"form-control form-control-sm",value:U.description,onChange:K=>I(Q,"description",K.target.value),placeholder:" "})}),r.jsx("div",{className:"col-span-2",children:r.jsx("input",{type:"number",className:"form-control form-control-sm text-center",value:U.quantity,onChange:K=>I(Q,"quantity",Number(K.target.value)),min:"1"})}),r.jsx("div",{className:"col-span-2",children:r.jsx("input",{type:"number",className:"form-control form-control-sm text-center",value:U.unit_price,onChange:K=>I(Q,"unit_price",Number(K.target.value)),step:"0.01",min:"0"})}),r.jsx("div",{className:"col-span-2 text-center font-medium",children:U.amount.toFixed(2)}),r.jsx("div",{className:"col-span-1 text-center",children:r.jsx(Ne,{type:"button",variant:"danger",size:"sm",onClick:()=>M(Q),className:"p-1",children:r.jsx(Is,{size:14})})})]},Q)),r.jsxs("div",{className:"grid grid-cols-12 gap-2 p-2 bg-gray-50 border-t font-bold",children:[r.jsx("div",{className:"col-span-9 text-left",children:":"}),r.jsxs("div",{className:"col-span-2 text-center text-primary",children:[_.toFixed(2)," ."]}),r.jsx("div",{className:"col-span-1"})]})]}):r.jsxs("div",{className:"text-center py-4 border rounded-lg bg-gray-50",children:[r.jsx("p",{className:"text-muted mb-2",children:"    "}),r.jsx("p",{className:"text-sm text-gray-400",children:"      "})]})]}),c.length===0&&r.jsx(Kt,{label:" ",type:"number",step:"0.01",...u("amount",{required:c.length===0,valueAsNumber:!0,min:{value:.01,message:"      "}}),error:f.amount?.message}),r.jsxs("div",{className:"mb-3",children:[r.jsx("label",{className:"form-label",children:""}),r.jsx("textarea",{className:"form-control",rows:3,placeholder:"    ",...u("notes")})]}),r.jsx(Kt,{label:" ",type:"date",...u("due_date",{required:!0}),error:f.due_date&&e("common.required")}),r.jsxs("div",{className:"bg-primary/10 p-4 rounded-lg mb-4 text-center",children:[r.jsx("div",{className:"text-sm text-gray-600 mb-1",children:" "}),r.jsxs("div",{className:"text-2xl font-bold text-primary",children:[j.toFixed(2)," ."]})]}),r.jsx("div",{className:"modal-footer-compact",children:r.jsxs("div",{className:"footer-content",children:[r.jsx("div",{className:"footer-left",children:r.jsx(Ne,{type:"button",variant:"secondary",size:"sm",onClick:()=>i(1),disabled:g.isPending,children:" "})}),r.jsxs("div",{className:"footer-right",children:[r.jsx(Ne,{type:"button",variant:"secondary",size:"sm",onClick:t,disabled:g.isPending,className:"me-2",children:e("common.cancel")}),r.jsx(Ne,{type:"submit",variant:"primary",size:"sm",isLoading:g.isPending,children:g.isPending?" ...":" "})]})]})})]}),r.jsx("style",{children:`
          .task-type-step {
            padding: 1rem 0;
          }
          .type-selection-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-bottom: 1rem;
          }
          .type-card {
            padding: 1.5rem 1rem;
            border: 2px solid #e9ecef;
            border-radius: 0.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
            background: white;
          }
          .type-card:hover {
            border-color: var(--color-primary);
            box-shadow: 0 2px 8px rgba(0,123,255,0.15);
            transform: translateY(-2px);
          }
          .type-card.selected {
            border-color: var(--color-primary);
            background-color: var(--color-primary-light, #e7f3ff);
          }
          .type-label {
            font-weight: 500;
            font-size: 0.9rem;
          }
          @media (max-width: 576px) {
            .type-selection-grid {
              grid-template-columns: 1fr;
            }
          }
          .client-selection-step {
            padding: 1rem 0;
          }
          .selected-type-display {
            padding: 0.75rem;
            background-color: #f8f9fa;
            border-radius: 0.375rem;
            border: 1px solid #e9ecef;
          }
          .client-card {
            padding: 1rem;
            border: 2px solid #e9ecef;
            border-radius: 0.5rem;
            background: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
          }
          .client-card.selected {
            border-color: #28a745;
            background-color: #f8fff9;
          }
          .client-info {
            flex: 1;
          }
          .client-name {
            font-weight: 600;
            font-size: 1rem;
            color: #495057;
          }
          .client-phone {
            font-size: 0.875rem;
            color: #6c757d;
            margin-top: 0.25rem;
          }
          .client-search-container {
            padding: 0 1rem;
          }
          .modal-footer-compact {
            border-top: 1px solid #e9ecef;
            padding: 0.75rem 1rem;
            background-color: #f8f9fa;
            border-radius: 0 0 0.375rem 0.375rem;
            margin: 0 -1rem -1rem -1rem;
          }
          .footer-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
          }
          .footer-left,
          .footer-right {
            display: flex;
            align-items: center;
          }
        `})]})})},d$=()=>{const{t:e}=qt(),n=et(Q=>Q.props),t=et(Q=>Q.closeModal),{invoiceId:s,invoice:l,amountDue:i,clientName:o}=n,d=s||l?.id,c=i??l?.remaining_amount??(l?Number(l.amount)-Number(l.paid_amount):0),a=o||l?.client?.name||"",{data:u,isLoading:h}=sl(),{register:f,handleSubmit:m,formState:{errors:b},control:y,watch:g,setValue:w}=Wn({defaultValues:{amount:c,payment_method_id:void 0,paid_at:new Date().toISOString().split("T")[0],note:"",reference_number:""}}),x=o$(),_=g("amount"),j=g("payment_method_id"),R=u?.find(Q=>Q.id===j),M=R?.code==="cash",I=Q=>{d&&x.mutate({invoiceId:d,payload:Q},{onSuccess:()=>{t()}})},F=()=>{w("amount",c)},B=_>c,U=c-_;return d?r.jsx(Zt,{isOpen:!0,onClose:t,title:" ",children:r.jsxs("form",{onSubmit:m(I),children:[r.jsxs("div",{className:"invoice-summary mb-4",children:[r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{className:"summary-label",children:" :"}),r.jsxs("span",{className:"summary-value",children:["#",d]})]}),a&&r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{className:"summary-label",children:":"}),r.jsx("span",{className:"summary-value",children:a})]}),r.jsxs("div",{className:"summary-row highlight",children:[r.jsx("span",{className:"summary-label",children:" :"}),r.jsxs("span",{className:"summary-value text-primary font-bold",children:[c.toFixed(2)," ."]})]})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"form-label font-medium mb-2",children:" "}),h?r.jsxs("div",{className:"text-center py-3",children:[r.jsx(no,{className:"animate-spin mx-auto",size:24}),r.jsx("p",{className:"text-muted small mt-2",children:"   ..."})]}):r.jsx(an,{name:"payment_method_id",control:y,rules:{required:e("common.required")},render:({field:Q})=>r.jsx("div",{className:"payment-methods-grid",children:u?.map(K=>r.jsx("div",{className:`payment-method-card ${Q.value===K.id?"selected":""}`,onClick:()=>Q.onChange(K.id),children:r.jsx("div",{className:"method-label",children:K.name})},K.id))})}),b.payment_method_id&&r.jsx("div",{className:"text-danger small mt-1",children:b.payment_method_id.message})]}),r.jsxs("div",{className:"mb-4",children:[r.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-1",children:[r.jsx("label",{className:"form-label font-medium mb-0",children:" "}),r.jsx("button",{type:"button",className:"btn btn-link btn-sm p-0 text-decoration-none",onClick:F,children:"  "})]}),r.jsx(Kt,{type:"number",step:"0.01",...f("amount",{required:e("common.required"),valueAsNumber:!0,min:{value:.01,message:"      "}}),error:b.amount?.message}),_>0&&r.jsx("div",{className:`payment-preview mt-2 ${B?"warning":""}`,children:B?r.jsxs("div",{className:"preview-item warning",children:[r.jsx(Mn,{size:16,className:"ml-1"}),r.jsxs("span",{children:["   !   ",(_-c).toFixed(2)," .  "]})]}):r.jsxs("div",{className:"preview-item",children:[r.jsx("span",{children:"  :"}),r.jsx("span",{className:U===0?"text-success font-bold":"",children:U===0?"   ":`${U.toFixed(2)} .`})]})})]}),r.jsx(Kt,{label:" ",type:"date",...f("paid_at",{required:e("common.required")}),error:b.paid_at?.message}),!M&&R&&r.jsx(Kt,{label:"  / ",...f("reference_number"),placeholder:R?.code==="bank_transfer"?"  ":R?.code==="card"?" 4   ":R?.code==="check"?" ":" "}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"form-label",children:""}),r.jsx("textarea",{className:"form-control",rows:2,placeholder:"   ...",...f("note")})]}),r.jsx("div",{className:"modal-footer-compact",children:r.jsxs("div",{className:"footer-content",children:[r.jsx("div",{className:"footer-left"}),r.jsxs("div",{className:"footer-right",children:[r.jsx(Ne,{type:"button",variant:"secondary",size:"sm",onClick:t,disabled:x.isPending,className:"me-2",children:e("common.cancel")}),r.jsx(Ne,{type:"submit",variant:"primary",size:"sm",isLoading:x.isPending,children:x.isPending?" ...":" "})]})]})}),r.jsx("style",{children:`
          .invoice-summary {
            background-color: #f8f9fa;
            border-radius: 0.5rem;
            padding: 1rem;
            border: 1px solid #e9ecef;
          }
          .summary-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem 0;
            border-bottom: 1px solid #e9ecef;
          }
          .summary-row:last-child {
            border-bottom: none;
          }
          .summary-row.highlight {
            background-color: #e7f3ff;
            margin: 0.5rem -1rem -1rem -1rem;
            padding: 0.75rem 1rem;
            border-radius: 0 0 0.5rem 0.5rem;
          }
          .summary-label {
            color: #6c757d;
            font-size: 0.875rem;
          }
          .summary-value {
            font-weight: 500;
          }
          
          .payment-methods-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 0.75rem;
          }
          @media (max-width: 576px) {
            .payment-methods-grid {
              grid-template-columns: repeat(2, 1fr);
            }
          }
          .payment-method-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 1rem 0.5rem;
            border: 2px solid #e9ecef;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.2s ease;
            background: white;
          }
          .payment-method-card:hover {
            border-color: var(--color-primary);
            box-shadow: 0 2px 8px rgba(0,123,255,0.15);
          }
          .payment-method-card.selected {
            border-color: var(--color-primary);
            background-color: var(--color-primary-light, #e7f3ff);
          }
          .method-label {
            font-size: 0.9rem;
            font-weight: 500;
            text-align: center;
          }
          
          .payment-preview {
            background-color: #e7f3ff;
            border-radius: 0.375rem;
            padding: 0.75rem;
            font-size: 0.875rem;
          }
          .payment-preview.warning {
            background-color: #fff3cd;
          }
          .preview-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
          }
          .preview-item.warning {
            color: #856404;
            justify-content: flex-start;
          }
          
          .modal-footer-compact {
            border-top: 1px solid #e9ecef;
            padding: 0.75rem 1rem;
            background-color: #f8f9fa;
            border-radius: 0 0 0.375rem 0.375rem;
            margin: 0 -1rem -1rem -1rem;
          }
          .footer-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
          }
          .footer-left,
          .footer-right {
            display: flex;
            align-items: center;
          }
        `})]})}):r.jsx(Zt,{isOpen:!0,onClose:t,title:" ",children:r.jsxs("div",{className:"text-center py-4",children:[r.jsx(Mn,{className:"mx-auto mb-3 text-danger",size:48}),r.jsx("p",{className:"text-danger",children:":    "}),r.jsx(Ne,{variant:"secondary",onClick:t,className:"mt-3",children:""})]})})},u$=qy("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Er({className:e,variant:n,...t}){return r.jsx("div",{className:Lt(u$({variant:n}),e),...t})}const Zs=H.forwardRef(({className:e,...n},t)=>r.jsx("div",{className:"relative w-full overflow-auto",children:r.jsx("table",{ref:t,className:Lt("w-full caption-bottom text-sm",e),...n})}));Zs.displayName="Table";const Fs=H.forwardRef(({className:e,...n},t)=>r.jsx("thead",{ref:t,className:Lt("[&_tr]:border-b [&_tr]:border-border/20",e),...n}));Fs.displayName="TableHeader";const Js=H.forwardRef(({className:e,...n},t)=>r.jsx("tbody",{ref:t,className:Lt("",e),...n}));Js.displayName="TableBody";const TN=H.forwardRef(({className:e,...n},t)=>r.jsx("tfoot",{ref:t,className:Lt("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...n}));TN.displayName="TableFooter";const $r=H.forwardRef(({className:e,...n},t)=>r.jsx("tr",{ref:t,className:Lt("border-b border-border/10 transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...n}));$r.displayName="TableRow";const St=H.forwardRef(({className:e,...n},t)=>r.jsx("th",{ref:t,className:Lt("h-10 px-2 text-left align-middle font-medium text-black [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...n}));St.displayName="TableHead";const yt=H.forwardRef(({className:e,...n},t)=>r.jsx("td",{ref:t,className:Lt("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...n}));yt.displayName="TableCell";const f$=H.forwardRef(({className:e,...n},t)=>r.jsx("caption",{ref:t,className:Lt("mt-4 text-sm text-black",e),...n}));f$.displayName="TableCaption";const xi=H.forwardRef(({className:e,size:n="md",...t},s)=>{const l={sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8"};return r.jsx("div",{ref:s,className:Lt("animate-spin rounded-full border-2 border-gray-300 border-t-primary",l[n],e),...t,children:r.jsx("span",{className:"sr-only",children:"Loading..."})})});xi.displayName="Spinner";const h$=()=>{const e=et(a=>a.props),n=et(a=>a.closeModal),t=et(a=>a.openModal),{invoiceId:s}=e,{data:l,isLoading:i,error:o}=s$(s||0,!!s);if(!s)return r.jsx(Zt,{isOpen:!0,onClose:n,title:" ",children:r.jsxs("div",{className:"text-center py-4",children:[r.jsx(Mn,{className:"mx-auto mb-3 text-red-500",size:48}),r.jsx("p",{className:"text-red-600",children:":    "}),r.jsx(Ne,{variant:"secondary",onClick:n,className:"mt-3",children:""})]})});const d=(a,u,h)=>u>=h?r.jsx(Er,{variant:"default",className:"text-xs bg-green-500",children:""}):u>0?r.jsx(Er,{variant:"secondary",className:"text-xs bg-yellow-500 text-black",children:""}):a==="draft"?r.jsx(Er,{variant:"secondary",className:"text-xs",children:""}):a==="overdue"?r.jsx(Er,{variant:"destructive",className:"text-xs",children:""}):r.jsx(Er,{variant:"default",className:"text-xs",children:""}),c=()=>{l&&l.remaining_amount>0&&t("recordPayment",{invoiceId:l.id,amountDue:l.remaining_amount,clientName:l.client?.name})};return r.jsx(Zt,{isOpen:!0,onClose:n,title:" ",children:i?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(xi,{size:"lg"}),r.jsx("p",{className:"text-gray-500 mt-3 text-sm",children:"  ..."})]}):o?r.jsxs("div",{className:"text-center py-4",children:[r.jsx(Mn,{className:"mx-auto mb-3 text-red-500",size:48}),r.jsx("p",{className:"text-red-600",children:"     "}),r.jsx(Ne,{variant:"secondary",onClick:n,className:"mt-3",children:""})]}):l?r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Sn,{size:16,className:"text-gray-400"}),r.jsx("span",{className:"text-gray-600",children:" :"}),r.jsxs("span",{className:"font-bold font-mono",children:["#",l.id]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-gray-600",children:":"}),d(l.status,Number(l.paid_amount),Number(l.amount))]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ma,{size:16,className:"text-gray-400"}),r.jsx("span",{className:"text-gray-600",children:":"}),r.jsx("span",{className:"font-medium",children:l.client?.name||` #${l.client_id}`})]}),l.task&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ro,{size:16,className:"text-gray-400"}),r.jsx("span",{className:"text-gray-600",children:":"}),r.jsx("span",{className:"font-medium",children:l.task.task_name})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ph,{size:16,className:"text-gray-400"}),r.jsx("span",{className:"text-gray-600",children:" :"}),r.jsx("span",{children:new Date(l.created_at).toLocaleDateString("en-CA")})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ms,{size:16,className:"text-gray-400"}),r.jsx("span",{className:"text-gray-600",children:" :"}),r.jsx("span",{children:new Date(l.due_date).toLocaleDateString("en-CA")})]})]})}),l.description&&r.jsx("div",{className:"bg-blue-50 rounded-lg p-3 border border-blue-200",children:r.jsxs("p",{className:"text-sm text-gray-700",children:[r.jsx("span",{className:"font-medium text-gray-900",children:": "}),l.description]})}),l.notes&&r.jsx("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:r.jsxs("p",{className:"text-sm text-gray-700",children:[r.jsx("span",{className:"font-medium text-gray-900",children:": "}),l.notes]})}),r.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[r.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 border border-blue-200",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(Kn,{size:14,className:"text-blue-600"}),r.jsx("span",{className:"text-xs text-gray-600",children:" "})]}),r.jsx("p",{className:"text-lg font-bold text-blue-700",children:new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}).format(Number(l.amount))})]}),r.jsxs("div",{className:"bg-green-50 rounded-lg p-3 border border-green-200",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(es,{size:14,className:"text-green-600"}),r.jsx("span",{className:"text-xs text-gray-600",children:""})]}),r.jsx("p",{className:"text-lg font-bold text-green-700",children:new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}).format(Number(l.paid_amount))})]}),r.jsxs("div",{className:`rounded-lg p-3 border ${Number(l.remaining_amount)>0?"bg-orange-50 border-orange-200":"bg-gray-50 border-gray-200"}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(Mn,{size:14,className:Number(l.remaining_amount)>0?"text-orange-600":"text-gray-400"}),r.jsx("span",{className:"text-xs text-gray-600",children:""})]}),r.jsx("p",{className:`text-lg font-bold ${Number(l.remaining_amount)>0?"text-orange-700":"text-gray-500"}`,children:new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}).format(Number(l.remaining_amount))})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"font-semibold text-sm text-gray-900 mb-2 flex items-center gap-2",children:[r.jsx(gs,{size:16}),"  (",l.payments?.length||0,")"]}),l.payments&&l.payments.length>0?r.jsxs(Zs,{className:"border-collapse border border-gray-300",children:[r.jsx(Fs,{children:r.jsxs($r,{children:[r.jsx(St,{className:"text-start border border-gray-300 text-xs px-2 py-1",children:"#"}),r.jsx(St,{className:"text-start border border-gray-300 text-xs px-2 py-1",children:""}),r.jsx(St,{className:"text-start border border-gray-300 text-xs px-2 py-1",children:""}),r.jsx(St,{className:"text-start border border-gray-300 text-xs px-2 py-1",children:""}),r.jsx(St,{className:"text-start border border-gray-300 text-xs px-2 py-1",children:""})]})}),r.jsx(Js,{children:l.payments.map(a=>r.jsxs($r,{children:[r.jsx(yt,{className:"border border-gray-300 text-start text-xs px-2 py-1 font-mono",children:a.id}),r.jsx(yt,{className:"border border-gray-300 text-start text-xs px-2 py-1 font-medium",children:new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}).format(Number(a.amount))}),r.jsx(yt,{className:"border border-gray-300 text-start text-xs px-2 py-1",children:a.payment_method?.name||"-"}),r.jsx(yt,{className:"border border-gray-300 text-start text-xs px-2 py-1",children:new Date(a.paid_at).toLocaleDateString("en-CA")}),r.jsx(yt,{className:"border border-gray-300 text-start text-xs px-2 py-1 text-gray-600",children:a.note||"-"})]},a.id))})]}):r.jsx("div",{className:"text-center py-4 bg-gray-50 rounded border border-gray-200",children:r.jsx("p",{className:"text-sm text-gray-500",children:"   "})})]}),r.jsxs("div",{className:"flex justify-between items-center pt-3 border-t",children:[r.jsx(Ne,{variant:"secondary",onClick:n,children:""}),Number(l.remaining_amount)>0&&r.jsxs(Ne,{variant:"primary",onClick:c,children:[r.jsx(Kn,{size:16,className:"me-1"})," "]})]})]}):null})},Nn=H.forwardRef(({className:e,...n},t)=>r.jsx("div",{ref:t,className:Lt("rounded-xl border bg-card text-card-foreground shadow",e),...n}));Nn.displayName="Card";const ac=H.forwardRef(({className:e,...n},t)=>r.jsx("div",{ref:t,className:Lt("flex flex-col space-y-1.5 p-6",e),...n}));ac.displayName="CardHeader";const Gb=H.forwardRef(({className:e,...n},t)=>r.jsx("div",{ref:t,className:Lt("font-semibold leading-none tracking-tight",e),...n}));Gb.displayName="CardTitle";const m$=H.forwardRef(({className:e,...n},t)=>r.jsx("div",{ref:t,className:Lt("text-sm text-black",e),...n}));m$.displayName="CardDescription";const Cn=H.forwardRef(({className:e,...n},t)=>r.jsx("div",{ref:t,className:Lt("p-6 pt-0",e),...n}));Cn.displayName="CardContent";const p$=H.forwardRef(({className:e,...n},t)=>r.jsx("div",{ref:t,className:Lt("flex items-center p-6 pt-0",e),...n}));p$.displayName="CardFooter";var S3=1,g$=.9,b$=.8,y$=.17,tb=.1,rb=.999,x$=.9999,v$=.99,w$=/[\\\/_+.#"@\[\(\{&]/,_$=/[\\\/_+.#"@\[\(\{&]/g,j$=/[\s-]/,AN=/[\s-]/g;function Xb(e,n,t,s,l,i,o){if(i===n.length)return l===e.length?S3:v$;var d=`${l},${i}`;if(o[d]!==void 0)return o[d];for(var c=s.charAt(i),a=t.indexOf(c,l),u=0,h,f,m,b;a>=0;)h=Xb(e,n,t,s,a+1,i+1,o),h>u&&(a===l?h*=S3:w$.test(e.charAt(a-1))?(h*=b$,m=e.slice(l,a-1).match(_$),m&&l>0&&(h*=Math.pow(rb,m.length))):j$.test(e.charAt(a-1))?(h*=g$,b=e.slice(l,a-1).match(AN),b&&l>0&&(h*=Math.pow(rb,b.length))):(h*=y$,l>0&&(h*=Math.pow(rb,a-l))),e.charAt(a)!==n.charAt(i)&&(h*=x$)),(h<tb&&t.charAt(a-1)===s.charAt(i+1)||s.charAt(i+1)===s.charAt(i)&&t.charAt(a-1)!==s.charAt(i))&&(f=Xb(e,n,t,s,a+1,i+2,o),f*tb>h&&(h=f*tb)),h>u&&(u=h),a=t.indexOf(c,a+1);return o[d]=u,u}function k3(e){return e.toLowerCase().replace(AN," ")}function N$(e,n,t){return e=t&&t.length>0?`${e+" "+t.join(" ")}`:e,Xb(e,n,k3(e),k3(n),0,0,{})}function C$(e,n=globalThis?.document){const t=pi(e);H.useEffect(()=>{const s=l=>{l.key==="Escape"&&t(l)};return n.addEventListener("keydown",s,{capture:!0}),()=>n.removeEventListener("keydown",s,{capture:!0})},[t,n])}var S$="DismissableLayer",Yb="dismissableLayer.update",k$="dismissableLayer.pointerDownOutside",E$="dismissableLayer.focusOutside",E3,MN=H.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Km=H.forwardRef((e,n)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:s,onPointerDownOutside:l,onFocusOutside:i,onInteractOutside:o,onDismiss:d,...c}=e,a=H.useContext(MN),[u,h]=H.useState(null),f=u?.ownerDocument??globalThis?.document,[,m]=H.useState({}),b=pn(n,I=>h(I)),y=Array.from(a.layers),[g]=[...a.layersWithOutsidePointerEventsDisabled].slice(-1),w=y.indexOf(g),x=u?y.indexOf(u):-1,_=a.layersWithOutsidePointerEventsDisabled.size>0,j=x>=w,R=A$(I=>{const F=I.target,B=[...a.branches].some(U=>U.contains(F));!j||B||(l?.(I),o?.(I),I.defaultPrevented||d?.())},f),M=M$(I=>{const F=I.target;[...a.branches].some(U=>U.contains(F))||(i?.(I),o?.(I),I.defaultPrevented||d?.())},f);return C$(I=>{x===a.layers.size-1&&(s?.(I),!I.defaultPrevented&&d&&(I.preventDefault(),d()))},f),H.useEffect(()=>{if(u)return t&&(a.layersWithOutsidePointerEventsDisabled.size===0&&(E3=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),a.layersWithOutsidePointerEventsDisabled.add(u)),a.layers.add(u),R3(),()=>{t&&a.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=E3)}},[u,f,t,a]),H.useEffect(()=>()=>{u&&(a.layers.delete(u),a.layersWithOutsidePointerEventsDisabled.delete(u),R3())},[u,a]),H.useEffect(()=>{const I=()=>m({});return document.addEventListener(Yb,I),()=>document.removeEventListener(Yb,I)},[]),r.jsx(gr.div,{...c,ref:b,style:{pointerEvents:_?j?"auto":"none":void 0,...e.style},onFocusCapture:Yt(e.onFocusCapture,M.onFocusCapture),onBlurCapture:Yt(e.onBlurCapture,M.onBlurCapture),onPointerDownCapture:Yt(e.onPointerDownCapture,R.onPointerDownCapture)})});Km.displayName=S$;var R$="DismissableLayerBranch",T$=H.forwardRef((e,n)=>{const t=H.useContext(MN),s=H.useRef(null),l=pn(n,s);return H.useEffect(()=>{const i=s.current;if(i)return t.branches.add(i),()=>{t.branches.delete(i)}},[t.branches]),r.jsx(gr.div,{...e,ref:l})});T$.displayName=R$;function A$(e,n=globalThis?.document){const t=pi(e),s=H.useRef(!1),l=H.useRef(()=>{});return H.useEffect(()=>{const i=d=>{if(d.target&&!s.current){let c=function(){ON(k$,t,a,{discrete:!0})};const a={originalEvent:d};d.pointerType==="touch"?(n.removeEventListener("click",l.current),l.current=c,n.addEventListener("click",l.current,{once:!0})):c()}else n.removeEventListener("click",l.current);s.current=!1},o=window.setTimeout(()=>{n.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),n.removeEventListener("pointerdown",i),n.removeEventListener("click",l.current)}},[n,t]),{onPointerDownCapture:()=>s.current=!0}}function M$(e,n=globalThis?.document){const t=pi(e),s=H.useRef(!1);return H.useEffect(()=>{const l=i=>{i.target&&!s.current&&ON(E$,t,{originalEvent:i},{discrete:!1})};return n.addEventListener("focusin",l),()=>n.removeEventListener("focusin",l)},[n,t]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function R3(){const e=new CustomEvent(Yb);document.dispatchEvent(e)}function ON(e,n,t,{discrete:s}){const l=t.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:t});n&&l.addEventListener(e,n,{once:!0}),s?h6(l,i):l.dispatchEvent(i)}var nb="focusScope.autoFocusOnMount",sb="focusScope.autoFocusOnUnmount",T3={bubbles:!1,cancelable:!0},O$="FocusScope",Wm=H.forwardRef((e,n)=>{const{loop:t=!1,trapped:s=!1,onMountAutoFocus:l,onUnmountAutoFocus:i,...o}=e,[d,c]=H.useState(null),a=pi(l),u=pi(i),h=H.useRef(null),f=pn(n,y=>c(y)),m=H.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;H.useEffect(()=>{if(s){let y=function(_){if(m.paused||!d)return;const j=_.target;d.contains(j)?h.current=j:Wi(h.current,{select:!0})},g=function(_){if(m.paused||!d)return;const j=_.relatedTarget;j!==null&&(d.contains(j)||Wi(h.current,{select:!0}))},w=function(_){if(document.activeElement===document.body)for(const R of _)R.removedNodes.length>0&&Wi(d)};document.addEventListener("focusin",y),document.addEventListener("focusout",g);const x=new MutationObserver(w);return d&&x.observe(d,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",g),x.disconnect()}}},[s,d,m.paused]),H.useEffect(()=>{if(d){M3.add(m);const y=document.activeElement;if(!d.contains(y)){const w=new CustomEvent(nb,T3);d.addEventListener(nb,a),d.dispatchEvent(w),w.defaultPrevented||(D$(z$(DN(d)),{select:!0}),document.activeElement===y&&Wi(d))}return()=>{d.removeEventListener(nb,a),setTimeout(()=>{const w=new CustomEvent(sb,T3);d.addEventListener(sb,u),d.dispatchEvent(w),w.defaultPrevented||Wi(y??document.body,{select:!0}),d.removeEventListener(sb,u),M3.remove(m)},0)}}},[d,a,u,m]);const b=H.useCallback(y=>{if(!t&&!s||m.paused)return;const g=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,w=document.activeElement;if(g&&w){const x=y.currentTarget,[_,j]=P$(x);_&&j?!y.shiftKey&&w===j?(y.preventDefault(),t&&Wi(_,{select:!0})):y.shiftKey&&w===_&&(y.preventDefault(),t&&Wi(j,{select:!0})):w===x&&y.preventDefault()}},[t,s,m.paused]);return r.jsx(gr.div,{tabIndex:-1,...o,ref:f,onKeyDown:b})});Wm.displayName=O$;function D$(e,{select:n=!1}={}){const t=document.activeElement;for(const s of e)if(Wi(s,{select:n}),document.activeElement!==t)return}function P$(e){const n=DN(e),t=A3(n,e),s=A3(n.reverse(),e);return[t,s]}function DN(e){const n=[],t=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const l=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||l?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)n.push(t.currentNode);return n}function A3(e,n){for(const t of e)if(!I$(t,{upTo:n}))return t}function I$(e,{upTo:n}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(n!==void 0&&e===n)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function F$(e){return e instanceof HTMLInputElement&&"select"in e}function Wi(e,{select:n=!1}={}){if(e&&e.focus){const t=document.activeElement;e.focus({preventScroll:!0}),e!==t&&F$(e)&&n&&e.select()}}var M3=L$();function L$(){let e=[];return{add(n){const t=e[0];n!==t&&t?.pause(),e=O3(e,n),e.unshift(n)},remove(n){e=O3(e,n),e[0]?.resume()}}}function O3(e,n){const t=[...e],s=t.indexOf(n);return s!==-1&&t.splice(s,1),t}function z$(e){return e.filter(n=>n.tagName!=="A")}var B$="Portal",Qm=H.forwardRef((e,n)=>{const{container:t,...s}=e,[l,i]=H.useState(!1);mi(()=>i(!0),[]);const o=t||l&&globalThis?.document?.body;return o?bT.createPortal(r.jsx(gr.div,{...s,ref:n}),o):null});Qm.displayName=B$;var ab=0;function Zy(){H.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??D3()),document.body.insertAdjacentElement("beforeend",e[1]??D3()),ab++,()=>{ab===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(n=>n.remove()),ab--}},[])}function D3(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Ta=function(){return Ta=Object.assign||function(n){for(var t,s=1,l=arguments.length;s<l;s++){t=arguments[s];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Ta.apply(this,arguments)};function PN(e,n){var t={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&n.indexOf(s)<0&&(t[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(e);l<s.length;l++)n.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(e,s[l])&&(t[s[l]]=e[s[l]]);return t}function q$(e,n,t){if(t||arguments.length===2)for(var s=0,l=n.length,i;s<l;s++)(i||!(s in n))&&(i||(i=Array.prototype.slice.call(n,0,s)),i[s]=n[s]);return e.concat(i||Array.prototype.slice.call(n))}var _h="right-scroll-bar-position",jh="width-before-scroll-bar",$$="with-scroll-bars-hidden",U$="--removed-body-scroll-bar-size";function ib(e,n){return typeof e=="function"?e(n):e&&(e.current=n),e}function H$(e,n){var t=H.useState(function(){return{value:e,callback:n,facade:{get current(){return t.value},set current(s){var l=t.value;l!==s&&(t.value=s,t.callback(s,l))}}}})[0];return t.callback=n,t.facade}var V$=typeof window<"u"?H.useLayoutEffect:H.useEffect,P3=new WeakMap;function K$(e,n){var t=H$(null,function(s){return e.forEach(function(l){return ib(l,s)})});return V$(function(){var s=P3.get(t);if(s){var l=new Set(s),i=new Set(e),o=t.current;l.forEach(function(d){i.has(d)||ib(d,null)}),i.forEach(function(d){l.has(d)||ib(d,o)})}P3.set(t,e)},[e]),t}function W$(e){return e}function Q$(e,n){n===void 0&&(n=W$);var t=[],s=!1,l={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:e},useMedium:function(i){var o=n(i,s);return t.push(o),function(){t=t.filter(function(d){return d!==o})}},assignSyncMedium:function(i){for(s=!0;t.length;){var o=t;t=[],o.forEach(i)}t={push:function(d){return i(d)},filter:function(){return t}}},assignMedium:function(i){s=!0;var o=[];if(t.length){var d=t;t=[],d.forEach(i),o=t}var c=function(){var u=o;o=[],u.forEach(i)},a=function(){return Promise.resolve().then(c)};a(),t={push:function(u){o.push(u),a()},filter:function(u){return o=o.filter(u),t}}}};return l}function G$(e){e===void 0&&(e={});var n=Q$(null);return n.options=Ta({async:!0,ssr:!1},e),n}var IN=function(e){var n=e.sideCar,t=PN(e,["sideCar"]);if(!n)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=n.read();if(!s)throw new Error("Sidecar medium not found");return H.createElement(s,Ta({},t))};IN.isSideCarExport=!0;function X$(e,n){return e.useMedium(n),IN}var FN=G$(),ob=function(){},Gm=H.forwardRef(function(e,n){var t=H.useRef(null),s=H.useState({onScrollCapture:ob,onWheelCapture:ob,onTouchMoveCapture:ob}),l=s[0],i=s[1],o=e.forwardProps,d=e.children,c=e.className,a=e.removeScrollBar,u=e.enabled,h=e.shards,f=e.sideCar,m=e.noRelative,b=e.noIsolation,y=e.inert,g=e.allowPinchZoom,w=e.as,x=w===void 0?"div":w,_=e.gapMode,j=PN(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),R=f,M=K$([t,n]),I=Ta(Ta({},j),l);return H.createElement(H.Fragment,null,u&&H.createElement(R,{sideCar:FN,removeScrollBar:a,shards:h,noRelative:m,noIsolation:b,inert:y,setCallbacks:i,allowPinchZoom:!!g,lockRef:t,gapMode:_}),o?H.cloneElement(H.Children.only(d),Ta(Ta({},I),{ref:M})):H.createElement(x,Ta({},I,{className:c,ref:M}),d))});Gm.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Gm.classNames={fullWidth:jh,zeroRight:_h};var Y$=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Z$(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var n=Y$();return n&&e.setAttribute("nonce",n),e}function J$(e,n){e.styleSheet?e.styleSheet.cssText=n:e.appendChild(document.createTextNode(n))}function eU(e){var n=document.head||document.getElementsByTagName("head")[0];n.appendChild(e)}var tU=function(){var e=0,n=null;return{add:function(t){e==0&&(n=Z$())&&(J$(n,t),eU(n)),e++},remove:function(){e--,!e&&n&&(n.parentNode&&n.parentNode.removeChild(n),n=null)}}},rU=function(){var e=tU();return function(n,t){H.useEffect(function(){return e.add(n),function(){e.remove()}},[n&&t])}},LN=function(){var e=rU(),n=function(t){var s=t.styles,l=t.dynamic;return e(s,l),null};return n},nU={left:0,top:0,right:0,gap:0},lb=function(e){return parseInt(e||"",10)||0},sU=function(e){var n=window.getComputedStyle(document.body),t=n[e==="padding"?"paddingLeft":"marginLeft"],s=n[e==="padding"?"paddingTop":"marginTop"],l=n[e==="padding"?"paddingRight":"marginRight"];return[lb(t),lb(s),lb(l)]},aU=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return nU;var n=sU(e),t=document.documentElement.clientWidth,s=window.innerWidth;return{left:n[0],top:n[1],right:n[2],gap:Math.max(0,s-t+n[2]-n[0])}},iU=LN(),Zl="data-scroll-locked",oU=function(e,n,t,s){var l=e.left,i=e.top,o=e.right,d=e.gap;return t===void 0&&(t="margin"),`
  .`.concat($$,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(d,"px ").concat(s,`;
  }
  body[`).concat(Zl,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([n&&"position: relative ".concat(s,";"),t==="margin"&&`
    padding-left: `.concat(l,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(d,"px ").concat(s,`;
    `),t==="padding"&&"padding-right: ".concat(d,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(_h,` {
    right: `).concat(d,"px ").concat(s,`;
  }
  
  .`).concat(jh,` {
    margin-right: `).concat(d,"px ").concat(s,`;
  }
  
  .`).concat(_h," .").concat(_h,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(jh," .").concat(jh,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(Zl,`] {
    `).concat(U$,": ").concat(d,`px;
  }
`)},I3=function(){var e=parseInt(document.body.getAttribute(Zl)||"0",10);return isFinite(e)?e:0},lU=function(){H.useEffect(function(){return document.body.setAttribute(Zl,(I3()+1).toString()),function(){var e=I3()-1;e<=0?document.body.removeAttribute(Zl):document.body.setAttribute(Zl,e.toString())}},[])},cU=function(e){var n=e.noRelative,t=e.noImportant,s=e.gapMode,l=s===void 0?"margin":s;lU();var i=H.useMemo(function(){return aU(l)},[l]);return H.createElement(iU,{styles:oU(i,!n,l,t?"":"!important")})},Zb=!1;if(typeof window<"u")try{var sh=Object.defineProperty({},"passive",{get:function(){return Zb=!0,!0}});window.addEventListener("test",sh,sh),window.removeEventListener("test",sh,sh)}catch{Zb=!1}var zl=Zb?{passive:!1}:!1,dU=function(e){return e.tagName==="TEXTAREA"},zN=function(e,n){if(!(e instanceof Element))return!1;var t=window.getComputedStyle(e);return t[n]!=="hidden"&&!(t.overflowY===t.overflowX&&!dU(e)&&t[n]==="visible")},uU=function(e){return zN(e,"overflowY")},fU=function(e){return zN(e,"overflowX")},F3=function(e,n){var t=n.ownerDocument,s=n;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var l=BN(e,s);if(l){var i=qN(e,s),o=i[1],d=i[2];if(o>d)return!0}s=s.parentNode}while(s&&s!==t.body);return!1},hU=function(e){var n=e.scrollTop,t=e.scrollHeight,s=e.clientHeight;return[n,t,s]},mU=function(e){var n=e.scrollLeft,t=e.scrollWidth,s=e.clientWidth;return[n,t,s]},BN=function(e,n){return e==="v"?uU(n):fU(n)},qN=function(e,n){return e==="v"?hU(n):mU(n)},pU=function(e,n){return e==="h"&&n==="rtl"?-1:1},gU=function(e,n,t,s,l){var i=pU(e,window.getComputedStyle(n).direction),o=i*s,d=t.target,c=n.contains(d),a=!1,u=o>0,h=0,f=0;do{if(!d)break;var m=qN(e,d),b=m[0],y=m[1],g=m[2],w=y-g-i*b;(b||w)&&BN(e,d)&&(h+=w,f+=b);var x=d.parentNode;d=x&&x.nodeType===Node.DOCUMENT_FRAGMENT_NODE?x.host:x}while(!c&&d!==document.body||c&&(n.contains(d)||n===d));return(u&&Math.abs(h)<1||!u&&Math.abs(f)<1)&&(a=!0),a},ah=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},L3=function(e){return[e.deltaX,e.deltaY]},z3=function(e){return e&&"current"in e?e.current:e},bU=function(e,n){return e[0]===n[0]&&e[1]===n[1]},yU=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},xU=0,Bl=[];function vU(e){var n=H.useRef([]),t=H.useRef([0,0]),s=H.useRef(),l=H.useState(xU++)[0],i=H.useState(LN)[0],o=H.useRef(e);H.useEffect(function(){o.current=e},[e]),H.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(l));var y=q$([e.lockRef.current],(e.shards||[]).map(z3),!0).filter(Boolean);return y.forEach(function(g){return g.classList.add("allow-interactivity-".concat(l))}),function(){document.body.classList.remove("block-interactivity-".concat(l)),y.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(l))})}}},[e.inert,e.lockRef.current,e.shards]);var d=H.useCallback(function(y,g){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!o.current.allowPinchZoom;var w=ah(y),x=t.current,_="deltaX"in y?y.deltaX:x[0]-w[0],j="deltaY"in y?y.deltaY:x[1]-w[1],R,M=y.target,I=Math.abs(_)>Math.abs(j)?"h":"v";if("touches"in y&&I==="h"&&M.type==="range")return!1;var F=F3(I,M);if(!F)return!0;if(F?R=I:(R=I==="v"?"h":"v",F=F3(I,M)),!F)return!1;if(!s.current&&"changedTouches"in y&&(_||j)&&(s.current=R),!R)return!0;var B=s.current||R;return gU(B,g,y,B==="h"?_:j)},[]),c=H.useCallback(function(y){var g=y;if(!(!Bl.length||Bl[Bl.length-1]!==i)){var w="deltaY"in g?L3(g):ah(g),x=n.current.filter(function(R){return R.name===g.type&&(R.target===g.target||g.target===R.shadowParent)&&bU(R.delta,w)})[0];if(x&&x.should){g.cancelable&&g.preventDefault();return}if(!x){var _=(o.current.shards||[]).map(z3).filter(Boolean).filter(function(R){return R.contains(g.target)}),j=_.length>0?d(g,_[0]):!o.current.noIsolation;j&&g.cancelable&&g.preventDefault()}}},[]),a=H.useCallback(function(y,g,w,x){var _={name:y,delta:g,target:w,should:x,shadowParent:wU(w)};n.current.push(_),setTimeout(function(){n.current=n.current.filter(function(j){return j!==_})},1)},[]),u=H.useCallback(function(y){t.current=ah(y),s.current=void 0},[]),h=H.useCallback(function(y){a(y.type,L3(y),y.target,d(y,e.lockRef.current))},[]),f=H.useCallback(function(y){a(y.type,ah(y),y.target,d(y,e.lockRef.current))},[]);H.useEffect(function(){return Bl.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",c,zl),document.addEventListener("touchmove",c,zl),document.addEventListener("touchstart",u,zl),function(){Bl=Bl.filter(function(y){return y!==i}),document.removeEventListener("wheel",c,zl),document.removeEventListener("touchmove",c,zl),document.removeEventListener("touchstart",u,zl)}},[]);var m=e.removeScrollBar,b=e.inert;return H.createElement(H.Fragment,null,b?H.createElement(i,{styles:yU(l)}):null,m?H.createElement(cU,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function wU(e){for(var n=null;e!==null;)e instanceof ShadowRoot&&(n=e.host,e=e.host),e=e.parentNode;return n}const _U=X$(FN,vU);var Xm=H.forwardRef(function(e,n){return H.createElement(Gm,Ta({},e,{ref:n,sideCar:_U}))});Xm.classNames=Gm.classNames;var jU=function(e){if(typeof document>"u")return null;var n=Array.isArray(e)?e[0]:e;return n.ownerDocument.body},ql=new WeakMap,ih=new WeakMap,oh={},cb=0,$N=function(e){return e&&(e.host||$N(e.parentNode))},NU=function(e,n){return n.map(function(t){if(e.contains(t))return t;var s=$N(t);return s&&e.contains(s)?s:(console.error("aria-hidden",t,"in not contained inside",e,". Doing nothing"),null)}).filter(function(t){return!!t})},CU=function(e,n,t,s){var l=NU(n,Array.isArray(e)?e:[e]);oh[t]||(oh[t]=new WeakMap);var i=oh[t],o=[],d=new Set,c=new Set(l),a=function(h){!h||d.has(h)||(d.add(h),a(h.parentNode))};l.forEach(a);var u=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(f){if(d.has(f))u(f);else try{var m=f.getAttribute(s),b=m!==null&&m!=="false",y=(ql.get(f)||0)+1,g=(i.get(f)||0)+1;ql.set(f,y),i.set(f,g),o.push(f),y===1&&b&&ih.set(f,!0),g===1&&f.setAttribute(t,"true"),b||f.setAttribute(s,"true")}catch(w){console.error("aria-hidden: cannot operate on ",f,w)}})};return u(n),d.clear(),cb++,function(){o.forEach(function(h){var f=ql.get(h)-1,m=i.get(h)-1;ql.set(h,f),i.set(h,m),f||(ih.has(h)||h.removeAttribute(s),ih.delete(h)),m||h.removeAttribute(t)}),cb--,cb||(ql=new WeakMap,ql=new WeakMap,ih=new WeakMap,oh={})}},Jy=function(e,n,t){t===void 0&&(t="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),l=jU(e);return l?(s.push.apply(s,Array.from(l.querySelectorAll("[aria-live], script"))),CU(s,l,t,"aria-hidden")):function(){return null}},Ym="Dialog",[UN,MZ]=Fa(Ym),[SU,ja]=UN(Ym),HN=e=>{const{__scopeDialog:n,children:t,open:s,defaultOpen:l,onOpenChange:i,modal:o=!0}=e,d=H.useRef(null),c=H.useRef(null),[a,u]=lo({prop:s,defaultProp:l??!1,onChange:i,caller:Ym});return r.jsx(SU,{scope:n,triggerRef:d,contentRef:c,contentId:Vn(),titleId:Vn(),descriptionId:Vn(),open:a,onOpenChange:u,onOpenToggle:H.useCallback(()=>u(h=>!h),[u]),modal:o,children:t})};HN.displayName=Ym;var VN="DialogTrigger",kU=H.forwardRef((e,n)=>{const{__scopeDialog:t,...s}=e,l=ja(VN,t),i=pn(n,l.triggerRef);return r.jsx(gr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":l.open,"aria-controls":l.contentId,"data-state":rx(l.open),...s,ref:i,onClick:Yt(e.onClick,l.onOpenToggle)})});kU.displayName=VN;var ex="DialogPortal",[EU,KN]=UN(ex,{forceMount:void 0}),WN=e=>{const{__scopeDialog:n,forceMount:t,children:s,container:l}=e,i=ja(ex,n);return r.jsx(EU,{scope:n,forceMount:t,children:H.Children.map(s,o=>r.jsx(ra,{present:t||i.open,children:r.jsx(Qm,{asChild:!0,container:l,children:o})}))})};WN.displayName=ex;var Wh="DialogOverlay",QN=H.forwardRef((e,n)=>{const t=KN(Wh,e.__scopeDialog),{forceMount:s=t.forceMount,...l}=e,i=ja(Wh,e.__scopeDialog);return i.modal?r.jsx(ra,{present:s||i.open,children:r.jsx(TU,{...l,ref:n})}):null});QN.displayName=Wh;var RU=sc("DialogOverlay.RemoveScroll"),TU=H.forwardRef((e,n)=>{const{__scopeDialog:t,...s}=e,l=ja(Wh,t);return r.jsx(Xm,{as:RU,allowPinchZoom:!0,shards:[l.contentRef],children:r.jsx(gr.div,{"data-state":rx(l.open),...s,ref:n,style:{pointerEvents:"auto",...s.style}})})}),Yo="DialogContent",GN=H.forwardRef((e,n)=>{const t=KN(Yo,e.__scopeDialog),{forceMount:s=t.forceMount,...l}=e,i=ja(Yo,e.__scopeDialog);return r.jsx(ra,{present:s||i.open,children:i.modal?r.jsx(AU,{...l,ref:n}):r.jsx(MU,{...l,ref:n})})});GN.displayName=Yo;var AU=H.forwardRef((e,n)=>{const t=ja(Yo,e.__scopeDialog),s=H.useRef(null),l=pn(n,t.contentRef,s);return H.useEffect(()=>{const i=s.current;if(i)return Jy(i)},[]),r.jsx(XN,{...e,ref:l,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Yt(e.onCloseAutoFocus,i=>{i.preventDefault(),t.triggerRef.current?.focus()}),onPointerDownOutside:Yt(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,d=o.button===0&&o.ctrlKey===!0;(o.button===2||d)&&i.preventDefault()}),onFocusOutside:Yt(e.onFocusOutside,i=>i.preventDefault())})}),MU=H.forwardRef((e,n)=>{const t=ja(Yo,e.__scopeDialog),s=H.useRef(!1),l=H.useRef(!1);return r.jsx(XN,{...e,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{e.onCloseAutoFocus?.(i),i.defaultPrevented||(s.current||t.triggerRef.current?.focus(),i.preventDefault()),s.current=!1,l.current=!1},onInteractOutside:i=>{e.onInteractOutside?.(i),i.defaultPrevented||(s.current=!0,i.detail.originalEvent.type==="pointerdown"&&(l.current=!0));const o=i.target;t.triggerRef.current?.contains(o)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&l.current&&i.preventDefault()}})}),XN=H.forwardRef((e,n)=>{const{__scopeDialog:t,trapFocus:s,onOpenAutoFocus:l,onCloseAutoFocus:i,...o}=e,d=ja(Yo,t),c=H.useRef(null),a=pn(n,c);return Zy(),r.jsxs(r.Fragment,{children:[r.jsx(Wm,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:l,onUnmountAutoFocus:i,children:r.jsx(Km,{role:"dialog",id:d.contentId,"aria-describedby":d.descriptionId,"aria-labelledby":d.titleId,"data-state":rx(d.open),...o,ref:a,onDismiss:()=>d.onOpenChange(!1)})}),r.jsxs(r.Fragment,{children:[r.jsx(IU,{titleId:d.titleId}),r.jsx(LU,{contentRef:c,descriptionId:d.descriptionId})]})]})}),tx="DialogTitle",OU=H.forwardRef((e,n)=>{const{__scopeDialog:t,...s}=e,l=ja(tx,t);return r.jsx(gr.h2,{id:l.titleId,...s,ref:n})});OU.displayName=tx;var YN="DialogDescription",DU=H.forwardRef((e,n)=>{const{__scopeDialog:t,...s}=e,l=ja(YN,t);return r.jsx(gr.p,{id:l.descriptionId,...s,ref:n})});DU.displayName=YN;var ZN="DialogClose",PU=H.forwardRef((e,n)=>{const{__scopeDialog:t,...s}=e,l=ja(ZN,t);return r.jsx(gr.button,{type:"button",...s,ref:n,onClick:Yt(e.onClick,()=>l.onOpenChange(!1))})});PU.displayName=ZN;function rx(e){return e?"open":"closed"}var JN="DialogTitleWarning",[OZ,e8]=eP(JN,{contentName:Yo,titleName:tx,docsSlug:"dialog"}),IU=({titleId:e})=>{const n=e8(JN),t=`\`${n.contentName}\` requires a \`${n.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${n.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${n.docsSlug}`;return H.useEffect(()=>{e&&(document.getElementById(e)||console.error(t))},[t,e]),null},FU="DialogDescriptionWarning",LU=({contentRef:e,descriptionId:n})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${e8(FU).contentName}}.`;return H.useEffect(()=>{const l=e.current?.getAttribute("aria-describedby");n&&l&&(document.getElementById(n)||console.warn(s))},[s,e,n]),null},zU=HN,BU=WN,qU=QN,$U=GN,Kd='[cmdk-group=""]',db='[cmdk-group-items=""]',UU='[cmdk-group-heading=""]',t8='[cmdk-item=""]',B3=`${t8}:not([aria-disabled="true"])`,Jb="cmdk-item-select",Hl="data-value",HU=(e,n,t)=>N$(e,n,t),r8=H.createContext(void 0),Ou=()=>H.useContext(r8),n8=H.createContext(void 0),nx=()=>H.useContext(n8),s8=H.createContext(void 0),a8=H.forwardRef((e,n)=>{let t=Vl(()=>{var z,G;return{search:"",value:(G=(z=e.value)!=null?z:e.defaultValue)!=null?G:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),s=Vl(()=>new Set),l=Vl(()=>new Map),i=Vl(()=>new Map),o=Vl(()=>new Set),d=i8(e),{label:c,children:a,value:u,onValueChange:h,filter:f,shouldFilter:m,loop:b,disablePointerSelection:y=!1,vimBindings:g=!0,...w}=e,x=Vn(),_=Vn(),j=Vn(),R=H.useRef(null),M=tH();Zo(()=>{if(u!==void 0){let z=u.trim();t.current.value=z,I.emit()}},[u]),Zo(()=>{M(6,T)},[]);let I=H.useMemo(()=>({subscribe:z=>(o.current.add(z),()=>o.current.delete(z)),snapshot:()=>t.current,setState:(z,G,Z)=>{var ee,W,J,$;if(!Object.is(t.current[z],G)){if(t.current[z]=G,z==="search")K(),U(),M(1,Q);else if(z==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let q=document.getElementById(j);q?q.focus():(ee=document.getElementById(x))==null||ee.focus()}if(M(7,()=>{var q;t.current.selectedItemId=(q=P())==null?void 0:q.id,I.emit()}),Z||M(5,T),((W=d.current)==null?void 0:W.value)!==void 0){let q=G??"";($=(J=d.current).onValueChange)==null||$.call(J,q);return}}I.emit()}},emit:()=>{o.current.forEach(z=>z())}}),[]),F=H.useMemo(()=>({value:(z,G,Z)=>{var ee;G!==((ee=i.current.get(z))==null?void 0:ee.value)&&(i.current.set(z,{value:G,keywords:Z}),t.current.filtered.items.set(z,B(G,Z)),M(2,()=>{U(),I.emit()}))},item:(z,G)=>(s.current.add(z),G&&(l.current.has(G)?l.current.get(G).add(z):l.current.set(G,new Set([z]))),M(3,()=>{K(),U(),t.current.value||Q(),I.emit()}),()=>{i.current.delete(z),s.current.delete(z),t.current.filtered.items.delete(z);let Z=P();M(4,()=>{K(),Z?.getAttribute("id")===z&&Q(),I.emit()})}),group:z=>(l.current.has(z)||l.current.set(z,new Set),()=>{i.current.delete(z),l.current.delete(z)}),filter:()=>d.current.shouldFilter,label:c||e["aria-label"],getDisablePointerSelection:()=>d.current.disablePointerSelection,listId:x,inputId:j,labelId:_,listInnerRef:R}),[]);function B(z,G){var Z,ee;let W=(ee=(Z=d.current)==null?void 0:Z.filter)!=null?ee:HU;return z?W(z,t.current.search,G):0}function U(){if(!t.current.search||d.current.shouldFilter===!1)return;let z=t.current.filtered.items,G=[];t.current.filtered.groups.forEach(ee=>{let W=l.current.get(ee),J=0;W.forEach($=>{let q=z.get($);J=Math.max(q,J)}),G.push([ee,J])});let Z=R.current;A().sort((ee,W)=>{var J,$;let q=ee.getAttribute("id"),Y=W.getAttribute("id");return((J=z.get(Y))!=null?J:0)-(($=z.get(q))!=null?$:0)}).forEach(ee=>{let W=ee.closest(db);W?W.appendChild(ee.parentElement===W?ee:ee.closest(`${db} > *`)):Z.appendChild(ee.parentElement===Z?ee:ee.closest(`${db} > *`))}),G.sort((ee,W)=>W[1]-ee[1]).forEach(ee=>{var W;let J=(W=R.current)==null?void 0:W.querySelector(`${Kd}[${Hl}="${encodeURIComponent(ee[0])}"]`);J?.parentElement.appendChild(J)})}function Q(){let z=A().find(Z=>Z.getAttribute("aria-disabled")!=="true"),G=z?.getAttribute(Hl);I.setState("value",G||void 0)}function K(){var z,G,Z,ee;if(!t.current.search||d.current.shouldFilter===!1){t.current.filtered.count=s.current.size;return}t.current.filtered.groups=new Set;let W=0;for(let J of s.current){let $=(G=(z=i.current.get(J))==null?void 0:z.value)!=null?G:"",q=(ee=(Z=i.current.get(J))==null?void 0:Z.keywords)!=null?ee:[],Y=B($,q);t.current.filtered.items.set(J,Y),Y>0&&W++}for(let[J,$]of l.current)for(let q of $)if(t.current.filtered.items.get(q)>0){t.current.filtered.groups.add(J);break}t.current.filtered.count=W}function T(){var z,G,Z;let ee=P();ee&&(((z=ee.parentElement)==null?void 0:z.firstChild)===ee&&((Z=(G=ee.closest(Kd))==null?void 0:G.querySelector(UU))==null||Z.scrollIntoView({block:"nearest"})),ee.scrollIntoView({block:"nearest"}))}function P(){var z;return(z=R.current)==null?void 0:z.querySelector(`${t8}[aria-selected="true"]`)}function A(){var z;return Array.from(((z=R.current)==null?void 0:z.querySelectorAll(B3))||[])}function N(z){let G=A()[z];G&&I.setState("value",G.getAttribute(Hl))}function k(z){var G;let Z=P(),ee=A(),W=ee.findIndex($=>$===Z),J=ee[W+z];(G=d.current)!=null&&G.loop&&(J=W+z<0?ee[ee.length-1]:W+z===ee.length?ee[0]:ee[W+z]),J&&I.setState("value",J.getAttribute(Hl))}function S(z){let G=P(),Z=G?.closest(Kd),ee;for(;Z&&!ee;)Z=z>0?JU(Z,Kd):eH(Z,Kd),ee=Z?.querySelector(B3);ee?I.setState("value",ee.getAttribute(Hl)):k(z)}let E=()=>N(A().length-1),O=z=>{z.preventDefault(),z.metaKey?E():z.altKey?S(1):k(1)},L=z=>{z.preventDefault(),z.metaKey?N(0):z.altKey?S(-1):k(-1)};return H.createElement(gr.div,{ref:n,tabIndex:-1,...w,"cmdk-root":"",onKeyDown:z=>{var G;(G=w.onKeyDown)==null||G.call(w,z);let Z=z.nativeEvent.isComposing||z.keyCode===229;if(!(z.defaultPrevented||Z))switch(z.key){case"n":case"j":{g&&z.ctrlKey&&O(z);break}case"ArrowDown":{O(z);break}case"p":case"k":{g&&z.ctrlKey&&L(z);break}case"ArrowUp":{L(z);break}case"Home":{z.preventDefault(),N(0);break}case"End":{z.preventDefault(),E();break}case"Enter":{z.preventDefault();let ee=P();if(ee){let W=new Event(Jb);ee.dispatchEvent(W)}}}}},H.createElement("label",{"cmdk-label":"",htmlFor:F.inputId,id:F.labelId,style:nH},c),Zm(e,z=>H.createElement(n8.Provider,{value:I},H.createElement(r8.Provider,{value:F},z))))}),VU=H.forwardRef((e,n)=>{var t,s;let l=Vn(),i=H.useRef(null),o=H.useContext(s8),d=Ou(),c=i8(e),a=(s=(t=c.current)==null?void 0:t.forceMount)!=null?s:o?.forceMount;Zo(()=>{if(!a)return d.item(l,o?.id)},[a]);let u=o8(l,i,[e.value,e.children,i],e.keywords),h=nx(),f=so(M=>M.value&&M.value===u.current),m=so(M=>a||d.filter()===!1?!0:M.search?M.filtered.items.get(l)>0:!0);H.useEffect(()=>{let M=i.current;if(!(!M||e.disabled))return M.addEventListener(Jb,b),()=>M.removeEventListener(Jb,b)},[m,e.onSelect,e.disabled]);function b(){var M,I;y(),(I=(M=c.current).onSelect)==null||I.call(M,u.current)}function y(){h.setState("value",u.current,!0)}if(!m)return null;let{disabled:g,value:w,onSelect:x,forceMount:_,keywords:j,...R}=e;return H.createElement(gr.div,{ref:hi(i,n),...R,id:l,"cmdk-item":"",role:"option","aria-disabled":!!g,"aria-selected":!!f,"data-disabled":!!g,"data-selected":!!f,onPointerMove:g||d.getDisablePointerSelection()?void 0:y,onClick:g?void 0:b},e.children)}),KU=H.forwardRef((e,n)=>{let{heading:t,children:s,forceMount:l,...i}=e,o=Vn(),d=H.useRef(null),c=H.useRef(null),a=Vn(),u=Ou(),h=so(m=>l||u.filter()===!1?!0:m.search?m.filtered.groups.has(o):!0);Zo(()=>u.group(o),[]),o8(o,d,[e.value,e.heading,c]);let f=H.useMemo(()=>({id:o,forceMount:l}),[l]);return H.createElement(gr.div,{ref:hi(d,n),...i,"cmdk-group":"",role:"presentation",hidden:h?void 0:!0},t&&H.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:a},t),Zm(e,m=>H.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":t?a:void 0},H.createElement(s8.Provider,{value:f},m))))}),WU=H.forwardRef((e,n)=>{let{alwaysRender:t,...s}=e,l=H.useRef(null),i=so(o=>!o.search);return!t&&!i?null:H.createElement(gr.div,{ref:hi(l,n),...s,"cmdk-separator":"",role:"separator"})}),QU=H.forwardRef((e,n)=>{let{onValueChange:t,...s}=e,l=e.value!=null,i=nx(),o=so(a=>a.search),d=so(a=>a.selectedItemId),c=Ou();return H.useEffect(()=>{e.value!=null&&i.setState("search",e.value)},[e.value]),H.createElement(gr.input,{ref:n,...s,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":d,id:c.inputId,type:"text",value:l?e.value:o,onChange:a=>{l||i.setState("search",a.target.value),t?.(a.target.value)}})}),GU=H.forwardRef((e,n)=>{let{children:t,label:s="Suggestions",...l}=e,i=H.useRef(null),o=H.useRef(null),d=so(a=>a.selectedItemId),c=Ou();return H.useEffect(()=>{if(o.current&&i.current){let a=o.current,u=i.current,h,f=new ResizeObserver(()=>{h=requestAnimationFrame(()=>{let m=a.offsetHeight;u.style.setProperty("--cmdk-list-height",m.toFixed(1)+"px")})});return f.observe(a),()=>{cancelAnimationFrame(h),f.unobserve(a)}}},[]),H.createElement(gr.div,{ref:hi(i,n),...l,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":d,"aria-label":s,id:c.listId},Zm(e,a=>H.createElement("div",{ref:hi(o,c.listInnerRef),"cmdk-list-sizer":""},a)))}),XU=H.forwardRef((e,n)=>{let{open:t,onOpenChange:s,overlayClassName:l,contentClassName:i,container:o,...d}=e;return H.createElement(zU,{open:t,onOpenChange:s},H.createElement(BU,{container:o},H.createElement(qU,{"cmdk-overlay":"",className:l}),H.createElement($U,{"aria-label":e.label,"cmdk-dialog":"",className:i},H.createElement(a8,{ref:n,...d}))))}),YU=H.forwardRef((e,n)=>so(t=>t.filtered.count===0)?H.createElement(gr.div,{ref:n,...e,"cmdk-empty":"",role:"presentation"}):null),ZU=H.forwardRef((e,n)=>{let{progress:t,children:s,label:l="Loading...",...i}=e;return H.createElement(gr.div,{ref:n,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":t,"aria-valuemin":0,"aria-valuemax":100,"aria-label":l},Zm(e,o=>H.createElement("div",{"aria-hidden":!0},o)))}),bs=Object.assign(a8,{List:GU,Item:VU,Input:QU,Group:KU,Separator:WU,Dialog:XU,Empty:YU,Loading:ZU});function JU(e,n){let t=e.nextElementSibling;for(;t;){if(t.matches(n))return t;t=t.nextElementSibling}}function eH(e,n){let t=e.previousElementSibling;for(;t;){if(t.matches(n))return t;t=t.previousElementSibling}}function i8(e){let n=H.useRef(e);return Zo(()=>{n.current=e}),n}var Zo=typeof window>"u"?H.useEffect:H.useLayoutEffect;function Vl(e){let n=H.useRef();return n.current===void 0&&(n.current=e()),n}function so(e){let n=nx(),t=()=>e(n.snapshot());return H.useSyncExternalStore(n.subscribe,t,t)}function o8(e,n,t,s=[]){let l=H.useRef(),i=Ou();return Zo(()=>{var o;let d=(()=>{var a;for(let u of t){if(typeof u=="string")return u.trim();if(typeof u=="object"&&"current"in u)return u.current?(a=u.current.textContent)==null?void 0:a.trim():l.current}})(),c=s.map(a=>a.trim());i.value(e,d,c),(o=n.current)==null||o.setAttribute(Hl,d),l.current=d}),l}var tH=()=>{let[e,n]=H.useState(),t=Vl(()=>new Map);return Zo(()=>{t.current.forEach(s=>s()),t.current=new Map},[e]),(s,l)=>{t.current.set(s,l),n({})}};function rH(e){let n=e.type;return typeof n=="function"?n(e.props):"render"in n?n.render(e.props):e}function Zm({asChild:e,children:n},t){return e&&H.isValidElement(n)?H.cloneElement(rH(n),{ref:n.ref},t(n.props.children)):t(n)}var nH={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const l8=H.forwardRef(({className:e,...n},t)=>r.jsx(bs,{ref:t,className:Lt("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...n}));l8.displayName=bs.displayName;const c8=H.forwardRef(({className:e,...n},t)=>r.jsxs("div",{className:"flex items-center border-b px-3",children:[r.jsx(ps,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),r.jsx(bs.Input,{ref:t,className:Lt("flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...n})]}));c8.displayName=bs.Input.displayName;const d8=H.forwardRef(({className:e,...n},t)=>r.jsx(bs.List,{ref:t,className:Lt("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...n}));d8.displayName=bs.List.displayName;const u8=H.forwardRef((e,n)=>r.jsx(bs.Empty,{ref:n,className:"py-6 text-center text-sm",...e}));u8.displayName=bs.Empty.displayName;const f8=H.forwardRef(({className:e,...n},t)=>r.jsx(bs.Group,{ref:t,className:Lt("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...n}));f8.displayName=bs.Group.displayName;const sH=H.forwardRef(({className:e,...n},t)=>r.jsx(bs.Separator,{ref:t,className:Lt("-mx-1 h-px bg-border",e),...n}));sH.displayName=bs.Separator.displayName;const h8=H.forwardRef(({className:e,...n},t)=>r.jsx(bs.Item,{ref:t,className:Lt("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e),...n}));h8.displayName=bs.Item.displayName;const aH=["top","right","bottom","left"],ao=Math.min,Os=Math.max,Qh=Math.round,lh=Math.floor,Pa=e=>({x:e,y:e}),iH={left:"right",right:"left",bottom:"top",top:"bottom"},oH={start:"end",end:"start"};function ey(e,n,t){return Os(e,ao(n,t))}function gi(e,n){return typeof e=="function"?e(n):e}function bi(e){return e.split("-")[0]}function vc(e){return e.split("-")[1]}function sx(e){return e==="x"?"y":"x"}function ax(e){return e==="y"?"height":"width"}const lH=new Set(["top","bottom"]);function Ma(e){return lH.has(bi(e))?"y":"x"}function ix(e){return sx(Ma(e))}function cH(e,n,t){t===void 0&&(t=!1);const s=vc(e),l=ix(e),i=ax(l);let o=l==="x"?s===(t?"end":"start")?"right":"left":s==="start"?"bottom":"top";return n.reference[i]>n.floating[i]&&(o=Gh(o)),[o,Gh(o)]}function dH(e){const n=Gh(e);return[ty(e),n,ty(n)]}function ty(e){return e.replace(/start|end/g,n=>oH[n])}const q3=["left","right"],$3=["right","left"],uH=["top","bottom"],fH=["bottom","top"];function hH(e,n,t){switch(e){case"top":case"bottom":return t?n?$3:q3:n?q3:$3;case"left":case"right":return n?uH:fH;default:return[]}}function mH(e,n,t,s){const l=vc(e);let i=hH(bi(e),t==="start",s);return l&&(i=i.map(o=>o+"-"+l),n&&(i=i.concat(i.map(ty)))),i}function Gh(e){return e.replace(/left|right|bottom|top/g,n=>iH[n])}function pH(e){return{top:0,right:0,bottom:0,left:0,...e}}function m8(e){return typeof e!="number"?pH(e):{top:e,right:e,bottom:e,left:e}}function Xh(e){const{x:n,y:t,width:s,height:l}=e;return{width:s,height:l,top:t,left:n,right:n+s,bottom:t+l,x:n,y:t}}function U3(e,n,t){let{reference:s,floating:l}=e;const i=Ma(n),o=ix(n),d=ax(o),c=bi(n),a=i==="y",u=s.x+s.width/2-l.width/2,h=s.y+s.height/2-l.height/2,f=s[d]/2-l[d]/2;let m;switch(c){case"top":m={x:u,y:s.y-l.height};break;case"bottom":m={x:u,y:s.y+s.height};break;case"right":m={x:s.x+s.width,y:h};break;case"left":m={x:s.x-l.width,y:h};break;default:m={x:s.x,y:s.y}}switch(vc(n)){case"start":m[o]-=f*(t&&a?-1:1);break;case"end":m[o]+=f*(t&&a?-1:1);break}return m}const gH=async(e,n,t)=>{const{placement:s="bottom",strategy:l="absolute",middleware:i=[],platform:o}=t,d=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(n));let a=await o.getElementRects({reference:e,floating:n,strategy:l}),{x:u,y:h}=U3(a,s,c),f=s,m={},b=0;for(let y=0;y<d.length;y++){const{name:g,fn:w}=d[y],{x,y:_,data:j,reset:R}=await w({x:u,y:h,initialPlacement:s,placement:f,strategy:l,middlewareData:m,rects:a,platform:o,elements:{reference:e,floating:n}});u=x??u,h=_??h,m={...m,[g]:{...m[g],...j}},R&&b<=50&&(b++,typeof R=="object"&&(R.placement&&(f=R.placement),R.rects&&(a=R.rects===!0?await o.getElementRects({reference:e,floating:n,strategy:l}):R.rects),{x:u,y:h}=U3(a,f,c)),y=-1)}return{x:u,y:h,placement:f,strategy:l,middlewareData:m}};async function lu(e,n){var t;n===void 0&&(n={});const{x:s,y:l,platform:i,rects:o,elements:d,strategy:c}=e,{boundary:a="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:f=!1,padding:m=0}=gi(n,e),b=m8(m),g=d[f?h==="floating"?"reference":"floating":h],w=Xh(await i.getClippingRect({element:(t=await(i.isElement==null?void 0:i.isElement(g)))==null||t?g:g.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(d.floating)),boundary:a,rootBoundary:u,strategy:c})),x=h==="floating"?{x:s,y:l,width:o.floating.width,height:o.floating.height}:o.reference,_=await(i.getOffsetParent==null?void 0:i.getOffsetParent(d.floating)),j=await(i.isElement==null?void 0:i.isElement(_))?await(i.getScale==null?void 0:i.getScale(_))||{x:1,y:1}:{x:1,y:1},R=Xh(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:d,rect:x,offsetParent:_,strategy:c}):x);return{top:(w.top-R.top+b.top)/j.y,bottom:(R.bottom-w.bottom+b.bottom)/j.y,left:(w.left-R.left+b.left)/j.x,right:(R.right-w.right+b.right)/j.x}}const bH=e=>({name:"arrow",options:e,async fn(n){const{x:t,y:s,placement:l,rects:i,platform:o,elements:d,middlewareData:c}=n,{element:a,padding:u=0}=gi(e,n)||{};if(a==null)return{};const h=m8(u),f={x:t,y:s},m=ix(l),b=ax(m),y=await o.getDimensions(a),g=m==="y",w=g?"top":"left",x=g?"bottom":"right",_=g?"clientHeight":"clientWidth",j=i.reference[b]+i.reference[m]-f[m]-i.floating[b],R=f[m]-i.reference[m],M=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a));let I=M?M[_]:0;(!I||!await(o.isElement==null?void 0:o.isElement(M)))&&(I=d.floating[_]||i.floating[b]);const F=j/2-R/2,B=I/2-y[b]/2-1,U=ao(h[w],B),Q=ao(h[x],B),K=U,T=I-y[b]-Q,P=I/2-y[b]/2+F,A=ey(K,P,T),N=!c.arrow&&vc(l)!=null&&P!==A&&i.reference[b]/2-(P<K?U:Q)-y[b]/2<0,k=N?P<K?P-K:P-T:0;return{[m]:f[m]+k,data:{[m]:A,centerOffset:P-A-k,...N&&{alignmentOffset:k}},reset:N}}}),yH=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(n){var t,s;const{placement:l,middlewareData:i,rects:o,initialPlacement:d,platform:c,elements:a}=n,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:y=!0,...g}=gi(e,n);if((t=i.arrow)!=null&&t.alignmentOffset)return{};const w=bi(l),x=Ma(d),_=bi(d)===d,j=await(c.isRTL==null?void 0:c.isRTL(a.floating)),R=f||(_||!y?[Gh(d)]:dH(d)),M=b!=="none";!f&&M&&R.push(...mH(d,y,b,j));const I=[d,...R],F=await lu(n,g),B=[];let U=((s=i.flip)==null?void 0:s.overflows)||[];if(u&&B.push(F[w]),h){const P=cH(l,o,j);B.push(F[P[0]],F[P[1]])}if(U=[...U,{placement:l,overflows:B}],!B.every(P=>P<=0)){var Q,K;const P=(((Q=i.flip)==null?void 0:Q.index)||0)+1,A=I[P];if(A&&(!(h==="alignment"?x!==Ma(A):!1)||U.every(S=>Ma(S.placement)===x?S.overflows[0]>0:!0)))return{data:{index:P,overflows:U},reset:{placement:A}};let N=(K=U.filter(k=>k.overflows[0]<=0).sort((k,S)=>k.overflows[1]-S.overflows[1])[0])==null?void 0:K.placement;if(!N)switch(m){case"bestFit":{var T;const k=(T=U.filter(S=>{if(M){const E=Ma(S.placement);return E===x||E==="y"}return!0}).map(S=>[S.placement,S.overflows.filter(E=>E>0).reduce((E,O)=>E+O,0)]).sort((S,E)=>S[1]-E[1])[0])==null?void 0:T[0];k&&(N=k);break}case"initialPlacement":N=d;break}if(l!==N)return{reset:{placement:N}}}return{}}}};function H3(e,n){return{top:e.top-n.height,right:e.right-n.width,bottom:e.bottom-n.height,left:e.left-n.width}}function V3(e){return aH.some(n=>e[n]>=0)}const xH=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(n){const{rects:t}=n,{strategy:s="referenceHidden",...l}=gi(e,n);switch(s){case"referenceHidden":{const i=await lu(n,{...l,elementContext:"reference"}),o=H3(i,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:V3(o)}}}case"escaped":{const i=await lu(n,{...l,altBoundary:!0}),o=H3(i,t.floating);return{data:{escapedOffsets:o,escaped:V3(o)}}}default:return{}}}}},p8=new Set(["left","top"]);async function vH(e,n){const{placement:t,platform:s,elements:l}=e,i=await(s.isRTL==null?void 0:s.isRTL(l.floating)),o=bi(t),d=vc(t),c=Ma(t)==="y",a=p8.has(o)?-1:1,u=i&&c?-1:1,h=gi(n,e);let{mainAxis:f,crossAxis:m,alignmentAxis:b}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return d&&typeof b=="number"&&(m=d==="end"?b*-1:b),c?{x:m*u,y:f*a}:{x:f*a,y:m*u}}const wH=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(n){var t,s;const{x:l,y:i,placement:o,middlewareData:d}=n,c=await vH(n,e);return o===((t=d.offset)==null?void 0:t.placement)&&(s=d.arrow)!=null&&s.alignmentOffset?{}:{x:l+c.x,y:i+c.y,data:{...c,placement:o}}}}},_H=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(n){const{x:t,y:s,placement:l}=n,{mainAxis:i=!0,crossAxis:o=!1,limiter:d={fn:g=>{let{x:w,y:x}=g;return{x:w,y:x}}},...c}=gi(e,n),a={x:t,y:s},u=await lu(n,c),h=Ma(bi(l)),f=sx(h);let m=a[f],b=a[h];if(i){const g=f==="y"?"top":"left",w=f==="y"?"bottom":"right",x=m+u[g],_=m-u[w];m=ey(x,m,_)}if(o){const g=h==="y"?"top":"left",w=h==="y"?"bottom":"right",x=b+u[g],_=b-u[w];b=ey(x,b,_)}const y=d.fn({...n,[f]:m,[h]:b});return{...y,data:{x:y.x-t,y:y.y-s,enabled:{[f]:i,[h]:o}}}}}},jH=function(e){return e===void 0&&(e={}),{options:e,fn(n){const{x:t,y:s,placement:l,rects:i,middlewareData:o}=n,{offset:d=0,mainAxis:c=!0,crossAxis:a=!0}=gi(e,n),u={x:t,y:s},h=Ma(l),f=sx(h);let m=u[f],b=u[h];const y=gi(d,n),g=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(c){const _=f==="y"?"height":"width",j=i.reference[f]-i.floating[_]+g.mainAxis,R=i.reference[f]+i.reference[_]-g.mainAxis;m<j?m=j:m>R&&(m=R)}if(a){var w,x;const _=f==="y"?"width":"height",j=p8.has(bi(l)),R=i.reference[h]-i.floating[_]+(j&&((w=o.offset)==null?void 0:w[h])||0)+(j?0:g.crossAxis),M=i.reference[h]+i.reference[_]+(j?0:((x=o.offset)==null?void 0:x[h])||0)-(j?g.crossAxis:0);b<R?b=R:b>M&&(b=M)}return{[f]:m,[h]:b}}}},NH=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(n){var t,s;const{placement:l,rects:i,platform:o,elements:d}=n,{apply:c=()=>{},...a}=gi(e,n),u=await lu(n,a),h=bi(l),f=vc(l),m=Ma(l)==="y",{width:b,height:y}=i.floating;let g,w;h==="top"||h==="bottom"?(g=h,w=f===(await(o.isRTL==null?void 0:o.isRTL(d.floating))?"start":"end")?"left":"right"):(w=h,g=f==="end"?"top":"bottom");const x=y-u.top-u.bottom,_=b-u.left-u.right,j=ao(y-u[g],x),R=ao(b-u[w],_),M=!n.middlewareData.shift;let I=j,F=R;if((t=n.middlewareData.shift)!=null&&t.enabled.x&&(F=_),(s=n.middlewareData.shift)!=null&&s.enabled.y&&(I=x),M&&!f){const U=Os(u.left,0),Q=Os(u.right,0),K=Os(u.top,0),T=Os(u.bottom,0);m?F=b-2*(U!==0||Q!==0?U+Q:Os(u.left,u.right)):I=y-2*(K!==0||T!==0?K+T:Os(u.top,u.bottom))}await c({...n,availableWidth:F,availableHeight:I});const B=await o.getDimensions(d.floating);return b!==B.width||y!==B.height?{reset:{rects:!0}}:{}}}};function Jm(){return typeof window<"u"}function wc(e){return g8(e)?(e.nodeName||"").toLowerCase():"#document"}function Ds(e){var n;return(e==null||(n=e.ownerDocument)==null?void 0:n.defaultView)||window}function za(e){var n;return(n=(g8(e)?e.ownerDocument:e.document)||window.document)==null?void 0:n.documentElement}function g8(e){return Jm()?e instanceof Node||e instanceof Ds(e).Node:!1}function pa(e){return Jm()?e instanceof Element||e instanceof Ds(e).Element:!1}function Ia(e){return Jm()?e instanceof HTMLElement||e instanceof Ds(e).HTMLElement:!1}function K3(e){return!Jm()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Ds(e).ShadowRoot}const CH=new Set(["inline","contents"]);function Du(e){const{overflow:n,overflowX:t,overflowY:s,display:l}=ga(e);return/auto|scroll|overlay|hidden|clip/.test(n+s+t)&&!CH.has(l)}const SH=new Set(["table","td","th"]);function kH(e){return SH.has(wc(e))}const EH=[":popover-open",":modal"];function ep(e){return EH.some(n=>{try{return e.matches(n)}catch{return!1}})}const RH=["transform","translate","scale","rotate","perspective"],TH=["transform","translate","scale","rotate","perspective","filter"],AH=["paint","layout","strict","content"];function ox(e){const n=lx(),t=pa(e)?ga(e):e;return RH.some(s=>t[s]?t[s]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!n&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!n&&(t.filter?t.filter!=="none":!1)||TH.some(s=>(t.willChange||"").includes(s))||AH.some(s=>(t.contain||"").includes(s))}function MH(e){let n=io(e);for(;Ia(n)&&!ic(n);){if(ox(n))return n;if(ep(n))return null;n=io(n)}return null}function lx(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const OH=new Set(["html","body","#document"]);function ic(e){return OH.has(wc(e))}function ga(e){return Ds(e).getComputedStyle(e)}function tp(e){return pa(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function io(e){if(wc(e)==="html")return e;const n=e.assignedSlot||e.parentNode||K3(e)&&e.host||za(e);return K3(n)?n.host:n}function b8(e){const n=io(e);return ic(n)?e.ownerDocument?e.ownerDocument.body:e.body:Ia(n)&&Du(n)?n:b8(n)}function cu(e,n,t){var s;n===void 0&&(n=[]),t===void 0&&(t=!0);const l=b8(e),i=l===((s=e.ownerDocument)==null?void 0:s.body),o=Ds(l);if(i){const d=ry(o);return n.concat(o,o.visualViewport||[],Du(l)?l:[],d&&t?cu(d):[])}return n.concat(l,cu(l,[],t))}function ry(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function y8(e){const n=ga(e);let t=parseFloat(n.width)||0,s=parseFloat(n.height)||0;const l=Ia(e),i=l?e.offsetWidth:t,o=l?e.offsetHeight:s,d=Qh(t)!==i||Qh(s)!==o;return d&&(t=i,s=o),{width:t,height:s,$:d}}function cx(e){return pa(e)?e:e.contextElement}function Jl(e){const n=cx(e);if(!Ia(n))return Pa(1);const t=n.getBoundingClientRect(),{width:s,height:l,$:i}=y8(n);let o=(i?Qh(t.width):t.width)/s,d=(i?Qh(t.height):t.height)/l;return(!o||!Number.isFinite(o))&&(o=1),(!d||!Number.isFinite(d))&&(d=1),{x:o,y:d}}const DH=Pa(0);function x8(e){const n=Ds(e);return!lx()||!n.visualViewport?DH:{x:n.visualViewport.offsetLeft,y:n.visualViewport.offsetTop}}function PH(e,n,t){return n===void 0&&(n=!1),!t||n&&t!==Ds(e)?!1:n}function Jo(e,n,t,s){n===void 0&&(n=!1),t===void 0&&(t=!1);const l=e.getBoundingClientRect(),i=cx(e);let o=Pa(1);n&&(s?pa(s)&&(o=Jl(s)):o=Jl(e));const d=PH(i,t,s)?x8(i):Pa(0);let c=(l.left+d.x)/o.x,a=(l.top+d.y)/o.y,u=l.width/o.x,h=l.height/o.y;if(i){const f=Ds(i),m=s&&pa(s)?Ds(s):s;let b=f,y=ry(b);for(;y&&s&&m!==b;){const g=Jl(y),w=y.getBoundingClientRect(),x=ga(y),_=w.left+(y.clientLeft+parseFloat(x.paddingLeft))*g.x,j=w.top+(y.clientTop+parseFloat(x.paddingTop))*g.y;c*=g.x,a*=g.y,u*=g.x,h*=g.y,c+=_,a+=j,b=Ds(y),y=ry(b)}}return Xh({width:u,height:h,x:c,y:a})}function rp(e,n){const t=tp(e).scrollLeft;return n?n.left+t:Jo(za(e)).left+t}function v8(e,n){const t=e.getBoundingClientRect(),s=t.left+n.scrollLeft-rp(e,t),l=t.top+n.scrollTop;return{x:s,y:l}}function IH(e){let{elements:n,rect:t,offsetParent:s,strategy:l}=e;const i=l==="fixed",o=za(s),d=n?ep(n.floating):!1;if(s===o||d&&i)return t;let c={scrollLeft:0,scrollTop:0},a=Pa(1);const u=Pa(0),h=Ia(s);if((h||!h&&!i)&&((wc(s)!=="body"||Du(o))&&(c=tp(s)),Ia(s))){const m=Jo(s);a=Jl(s),u.x=m.x+s.clientLeft,u.y=m.y+s.clientTop}const f=o&&!h&&!i?v8(o,c):Pa(0);return{width:t.width*a.x,height:t.height*a.y,x:t.x*a.x-c.scrollLeft*a.x+u.x+f.x,y:t.y*a.y-c.scrollTop*a.y+u.y+f.y}}function FH(e){return Array.from(e.getClientRects())}function LH(e){const n=za(e),t=tp(e),s=e.ownerDocument.body,l=Os(n.scrollWidth,n.clientWidth,s.scrollWidth,s.clientWidth),i=Os(n.scrollHeight,n.clientHeight,s.scrollHeight,s.clientHeight);let o=-t.scrollLeft+rp(e);const d=-t.scrollTop;return ga(s).direction==="rtl"&&(o+=Os(n.clientWidth,s.clientWidth)-l),{width:l,height:i,x:o,y:d}}const W3=25;function zH(e,n){const t=Ds(e),s=za(e),l=t.visualViewport;let i=s.clientWidth,o=s.clientHeight,d=0,c=0;if(l){i=l.width,o=l.height;const u=lx();(!u||u&&n==="fixed")&&(d=l.offsetLeft,c=l.offsetTop)}const a=rp(s);if(a<=0){const u=s.ownerDocument,h=u.body,f=getComputedStyle(h),m=u.compatMode==="CSS1Compat"&&parseFloat(f.marginLeft)+parseFloat(f.marginRight)||0,b=Math.abs(s.clientWidth-h.clientWidth-m);b<=W3&&(i-=b)}else a<=W3&&(i+=a);return{width:i,height:o,x:d,y:c}}const BH=new Set(["absolute","fixed"]);function qH(e,n){const t=Jo(e,!0,n==="fixed"),s=t.top+e.clientTop,l=t.left+e.clientLeft,i=Ia(e)?Jl(e):Pa(1),o=e.clientWidth*i.x,d=e.clientHeight*i.y,c=l*i.x,a=s*i.y;return{width:o,height:d,x:c,y:a}}function Q3(e,n,t){let s;if(n==="viewport")s=zH(e,t);else if(n==="document")s=LH(za(e));else if(pa(n))s=qH(n,t);else{const l=x8(e);s={x:n.x-l.x,y:n.y-l.y,width:n.width,height:n.height}}return Xh(s)}function w8(e,n){const t=io(e);return t===n||!pa(t)||ic(t)?!1:ga(t).position==="fixed"||w8(t,n)}function $H(e,n){const t=n.get(e);if(t)return t;let s=cu(e,[],!1).filter(d=>pa(d)&&wc(d)!=="body"),l=null;const i=ga(e).position==="fixed";let o=i?io(e):e;for(;pa(o)&&!ic(o);){const d=ga(o),c=ox(o);!c&&d.position==="fixed"&&(l=null),(i?!c&&!l:!c&&d.position==="static"&&!!l&&BH.has(l.position)||Du(o)&&!c&&w8(e,o))?s=s.filter(u=>u!==o):l=d,o=io(o)}return n.set(e,s),s}function UH(e){let{element:n,boundary:t,rootBoundary:s,strategy:l}=e;const o=[...t==="clippingAncestors"?ep(n)?[]:$H(n,this._c):[].concat(t),s],d=o[0],c=o.reduce((a,u)=>{const h=Q3(n,u,l);return a.top=Os(h.top,a.top),a.right=ao(h.right,a.right),a.bottom=ao(h.bottom,a.bottom),a.left=Os(h.left,a.left),a},Q3(n,d,l));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function HH(e){const{width:n,height:t}=y8(e);return{width:n,height:t}}function VH(e,n,t){const s=Ia(n),l=za(n),i=t==="fixed",o=Jo(e,!0,i,n);let d={scrollLeft:0,scrollTop:0};const c=Pa(0);function a(){c.x=rp(l)}if(s||!s&&!i)if((wc(n)!=="body"||Du(l))&&(d=tp(n)),s){const m=Jo(n,!0,i,n);c.x=m.x+n.clientLeft,c.y=m.y+n.clientTop}else l&&a();i&&!s&&l&&a();const u=l&&!s&&!i?v8(l,d):Pa(0),h=o.left+d.scrollLeft-c.x-u.x,f=o.top+d.scrollTop-c.y-u.y;return{x:h,y:f,width:o.width,height:o.height}}function ub(e){return ga(e).position==="static"}function G3(e,n){if(!Ia(e)||ga(e).position==="fixed")return null;if(n)return n(e);let t=e.offsetParent;return za(e)===t&&(t=t.ownerDocument.body),t}function _8(e,n){const t=Ds(e);if(ep(e))return t;if(!Ia(e)){let l=io(e);for(;l&&!ic(l);){if(pa(l)&&!ub(l))return l;l=io(l)}return t}let s=G3(e,n);for(;s&&kH(s)&&ub(s);)s=G3(s,n);return s&&ic(s)&&ub(s)&&!ox(s)?t:s||MH(e)||t}const KH=async function(e){const n=this.getOffsetParent||_8,t=this.getDimensions,s=await t(e.floating);return{reference:VH(e.reference,await n(e.floating),e.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function WH(e){return ga(e).direction==="rtl"}const QH={convertOffsetParentRelativeRectToViewportRelativeRect:IH,getDocumentElement:za,getClippingRect:UH,getOffsetParent:_8,getElementRects:KH,getClientRects:FH,getDimensions:HH,getScale:Jl,isElement:pa,isRTL:WH};function j8(e,n){return e.x===n.x&&e.y===n.y&&e.width===n.width&&e.height===n.height}function GH(e,n){let t=null,s;const l=za(e);function i(){var d;clearTimeout(s),(d=t)==null||d.disconnect(),t=null}function o(d,c){d===void 0&&(d=!1),c===void 0&&(c=1),i();const a=e.getBoundingClientRect(),{left:u,top:h,width:f,height:m}=a;if(d||n(),!f||!m)return;const b=lh(h),y=lh(l.clientWidth-(u+f)),g=lh(l.clientHeight-(h+m)),w=lh(u),_={rootMargin:-b+"px "+-y+"px "+-g+"px "+-w+"px",threshold:Os(0,ao(1,c))||1};let j=!0;function R(M){const I=M[0].intersectionRatio;if(I!==c){if(!j)return o();I?o(!1,I):s=setTimeout(()=>{o(!1,1e-7)},1e3)}I===1&&!j8(a,e.getBoundingClientRect())&&o(),j=!1}try{t=new IntersectionObserver(R,{..._,root:l.ownerDocument})}catch{t=new IntersectionObserver(R,_)}t.observe(e)}return o(!0),i}function XH(e,n,t,s){s===void 0&&(s={});const{ancestorScroll:l=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:d=typeof IntersectionObserver=="function",animationFrame:c=!1}=s,a=cx(e),u=l||i?[...a?cu(a):[],...cu(n)]:[];u.forEach(w=>{l&&w.addEventListener("scroll",t,{passive:!0}),i&&w.addEventListener("resize",t)});const h=a&&d?GH(a,t):null;let f=-1,m=null;o&&(m=new ResizeObserver(w=>{let[x]=w;x&&x.target===a&&m&&(m.unobserve(n),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var _;(_=m)==null||_.observe(n)})),t()}),a&&!c&&m.observe(a),m.observe(n));let b,y=c?Jo(e):null;c&&g();function g(){const w=Jo(e);y&&!j8(y,w)&&t(),y=w,b=requestAnimationFrame(g)}return t(),()=>{var w;u.forEach(x=>{l&&x.removeEventListener("scroll",t),i&&x.removeEventListener("resize",t)}),h?.(),(w=m)==null||w.disconnect(),m=null,c&&cancelAnimationFrame(b)}}const YH=wH,ZH=_H,JH=yH,eV=NH,tV=xH,X3=bH,rV=jH,nV=(e,n,t)=>{const s=new Map,l={platform:QH,...t},i={...l.platform,_c:s};return gH(e,n,{...l,platform:i})};var sV=typeof document<"u",aV=function(){},Nh=sV?H.useLayoutEffect:aV;function Yh(e,n){if(e===n)return!0;if(typeof e!=typeof n)return!1;if(typeof e=="function"&&e.toString()===n.toString())return!0;let t,s,l;if(e&&n&&typeof e=="object"){if(Array.isArray(e)){if(t=e.length,t!==n.length)return!1;for(s=t;s--!==0;)if(!Yh(e[s],n[s]))return!1;return!0}if(l=Object.keys(e),t=l.length,t!==Object.keys(n).length)return!1;for(s=t;s--!==0;)if(!{}.hasOwnProperty.call(n,l[s]))return!1;for(s=t;s--!==0;){const i=l[s];if(!(i==="_owner"&&e.$$typeof)&&!Yh(e[i],n[i]))return!1}return!0}return e!==e&&n!==n}function N8(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Y3(e,n){const t=N8(e);return Math.round(n*t)/t}function fb(e){const n=H.useRef(e);return Nh(()=>{n.current=e}),n}function iV(e){e===void 0&&(e={});const{placement:n="bottom",strategy:t="absolute",middleware:s=[],platform:l,elements:{reference:i,floating:o}={},transform:d=!0,whileElementsMounted:c,open:a}=e,[u,h]=H.useState({x:0,y:0,strategy:t,placement:n,middlewareData:{},isPositioned:!1}),[f,m]=H.useState(s);Yh(f,s)||m(s);const[b,y]=H.useState(null),[g,w]=H.useState(null),x=H.useCallback(S=>{S!==M.current&&(M.current=S,y(S))},[]),_=H.useCallback(S=>{S!==I.current&&(I.current=S,w(S))},[]),j=i||b,R=o||g,M=H.useRef(null),I=H.useRef(null),F=H.useRef(u),B=c!=null,U=fb(c),Q=fb(l),K=fb(a),T=H.useCallback(()=>{if(!M.current||!I.current)return;const S={placement:n,strategy:t,middleware:f};Q.current&&(S.platform=Q.current),nV(M.current,I.current,S).then(E=>{const O={...E,isPositioned:K.current!==!1};P.current&&!Yh(F.current,O)&&(F.current=O,cs.flushSync(()=>{h(O)}))})},[f,n,t,Q,K]);Nh(()=>{a===!1&&F.current.isPositioned&&(F.current.isPositioned=!1,h(S=>({...S,isPositioned:!1})))},[a]);const P=H.useRef(!1);Nh(()=>(P.current=!0,()=>{P.current=!1}),[]),Nh(()=>{if(j&&(M.current=j),R&&(I.current=R),j&&R){if(U.current)return U.current(j,R,T);T()}},[j,R,T,U,B]);const A=H.useMemo(()=>({reference:M,floating:I,setReference:x,setFloating:_}),[x,_]),N=H.useMemo(()=>({reference:j,floating:R}),[j,R]),k=H.useMemo(()=>{const S={position:t,left:0,top:0};if(!N.floating)return S;const E=Y3(N.floating,u.x),O=Y3(N.floating,u.y);return d?{...S,transform:"translate("+E+"px, "+O+"px)",...N8(N.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:E,top:O}},[t,d,N.floating,u.x,u.y]);return H.useMemo(()=>({...u,update:T,refs:A,elements:N,floatingStyles:k}),[u,T,A,N,k])}const oV=e=>{function n(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:e,fn(t){const{element:s,padding:l}=typeof e=="function"?e(t):e;return s&&n(s)?s.current!=null?X3({element:s.current,padding:l}).fn(t):{}:s?X3({element:s,padding:l}).fn(t):{}}}},lV=(e,n)=>({...YH(e),options:[e,n]}),cV=(e,n)=>({...ZH(e),options:[e,n]}),dV=(e,n)=>({...rV(e),options:[e,n]}),uV=(e,n)=>({...JH(e),options:[e,n]}),fV=(e,n)=>({...eV(e),options:[e,n]}),hV=(e,n)=>({...tV(e),options:[e,n]}),mV=(e,n)=>({...oV(e),options:[e,n]});var pV="Arrow",C8=H.forwardRef((e,n)=>{const{children:t,width:s=10,height:l=5,...i}=e;return r.jsx(gr.svg,{...i,ref:n,width:s,height:l,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?t:r.jsx("polygon",{points:"0,0 30,0 15,10"})})});C8.displayName=pV;var gV=C8;function bV(e){const[n,t]=H.useState(void 0);return mi(()=>{if(e){t({width:e.offsetWidth,height:e.offsetHeight});const s=new ResizeObserver(l=>{if(!Array.isArray(l)||!l.length)return;const i=l[0];let o,d;if("borderBoxSize"in i){const c=i.borderBoxSize,a=Array.isArray(c)?c[0]:c;o=a.inlineSize,d=a.blockSize}else o=e.offsetWidth,d=e.offsetHeight;t({width:o,height:d})});return s.observe(e,{box:"border-box"}),()=>s.unobserve(e)}else t(void 0)},[e]),n}var dx="Popper",[S8,np]=Fa(dx),[yV,k8]=S8(dx),E8=e=>{const{__scopePopper:n,children:t}=e,[s,l]=H.useState(null);return r.jsx(yV,{scope:n,anchor:s,onAnchorChange:l,children:t})};E8.displayName=dx;var R8="PopperAnchor",T8=H.forwardRef((e,n)=>{const{__scopePopper:t,virtualRef:s,...l}=e,i=k8(R8,t),o=H.useRef(null),d=pn(n,o),c=H.useRef(null);return H.useEffect(()=>{const a=c.current;c.current=s?.current||o.current,a!==c.current&&i.onAnchorChange(c.current)}),s?null:r.jsx(gr.div,{...l,ref:d})});T8.displayName=R8;var ux="PopperContent",[xV,vV]=S8(ux),A8=H.forwardRef((e,n)=>{const{__scopePopper:t,side:s="bottom",sideOffset:l=0,align:i="center",alignOffset:o=0,arrowPadding:d=0,avoidCollisions:c=!0,collisionBoundary:a=[],collisionPadding:u=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:m="optimized",onPlaced:b,...y}=e,g=k8(ux,t),[w,x]=H.useState(null),_=pn(n,J=>x(J)),[j,R]=H.useState(null),M=bV(j),I=M?.width??0,F=M?.height??0,B=s+(i!=="center"?"-"+i:""),U=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},Q=Array.isArray(a)?a:[a],K=Q.length>0,T={padding:U,boundary:Q.filter(_V),altBoundary:K},{refs:P,floatingStyles:A,placement:N,isPositioned:k,middlewareData:S}=iV({strategy:"fixed",placement:B,whileElementsMounted:(...J)=>XH(...J,{animationFrame:m==="always"}),elements:{reference:g.anchor},middleware:[lV({mainAxis:l+F,alignmentAxis:o}),c&&cV({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?dV():void 0,...T}),c&&uV({...T}),fV({...T,apply:({elements:J,rects:$,availableWidth:q,availableHeight:Y})=>{const{width:se,height:oe}=$.reference,ae=J.floating.style;ae.setProperty("--radix-popper-available-width",`${q}px`),ae.setProperty("--radix-popper-available-height",`${Y}px`),ae.setProperty("--radix-popper-anchor-width",`${se}px`),ae.setProperty("--radix-popper-anchor-height",`${oe}px`)}}),j&&mV({element:j,padding:d}),jV({arrowWidth:I,arrowHeight:F}),f&&hV({strategy:"referenceHidden",...T})]}),[E,O]=D8(N),L=pi(b);mi(()=>{k&&L?.()},[k,L]);const z=S.arrow?.x,G=S.arrow?.y,Z=S.arrow?.centerOffset!==0,[ee,W]=H.useState();return mi(()=>{w&&W(window.getComputedStyle(w).zIndex)},[w]),r.jsx("div",{ref:P.setFloating,"data-radix-popper-content-wrapper":"",style:{...A,transform:k?A.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ee,"--radix-popper-transform-origin":[S.transformOrigin?.x,S.transformOrigin?.y].join(" "),...S.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:r.jsx(xV,{scope:t,placedSide:E,onArrowChange:R,arrowX:z,arrowY:G,shouldHideArrow:Z,children:r.jsx(gr.div,{"data-side":E,"data-align":O,...y,ref:_,style:{...y.style,animation:k?void 0:"none"}})})})});A8.displayName=ux;var M8="PopperArrow",wV={top:"bottom",right:"left",bottom:"top",left:"right"},O8=H.forwardRef(function(n,t){const{__scopePopper:s,...l}=n,i=vV(M8,s),o=wV[i.placedSide];return r.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:r.jsx(gV,{...l,ref:t,style:{...l.style,display:"block"}})})});O8.displayName=M8;function _V(e){return e!==null}var jV=e=>({name:"transformOrigin",options:e,fn(n){const{placement:t,rects:s,middlewareData:l}=n,o=l.arrow?.centerOffset!==0,d=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[a,u]=D8(t),h={start:"0%",center:"50%",end:"100%"}[u],f=(l.arrow?.x??0)+d/2,m=(l.arrow?.y??0)+c/2;let b="",y="";return a==="bottom"?(b=o?h:`${f}px`,y=`${-c}px`):a==="top"?(b=o?h:`${f}px`,y=`${s.floating.height+c}px`):a==="right"?(b=`${-c}px`,y=o?h:`${m}px`):a==="left"&&(b=`${s.floating.width+c}px`,y=o?h:`${m}px`),{data:{x:b,y}}}});function D8(e){const[n,t="center"]=e.split("-");return[n,t]}var P8=E8,fx=T8,I8=A8,F8=O8,sp="Popover",[L8,DZ]=Fa(sp,[np]),Pu=np(),[NV,uo]=L8(sp),z8=e=>{const{__scopePopover:n,children:t,open:s,defaultOpen:l,onOpenChange:i,modal:o=!1}=e,d=Pu(n),c=H.useRef(null),[a,u]=H.useState(!1),[h,f]=lo({prop:s,defaultProp:l??!1,onChange:i,caller:sp});return r.jsx(P8,{...d,children:r.jsx(NV,{scope:n,contentId:Vn(),triggerRef:c,open:h,onOpenChange:f,onOpenToggle:H.useCallback(()=>f(m=>!m),[f]),hasCustomAnchor:a,onCustomAnchorAdd:H.useCallback(()=>u(!0),[]),onCustomAnchorRemove:H.useCallback(()=>u(!1),[]),modal:o,children:t})})};z8.displayName=sp;var B8="PopoverAnchor",CV=H.forwardRef((e,n)=>{const{__scopePopover:t,...s}=e,l=uo(B8,t),i=Pu(t),{onCustomAnchorAdd:o,onCustomAnchorRemove:d}=l;return H.useEffect(()=>(o(),()=>d()),[o,d]),r.jsx(fx,{...i,...s,ref:n})});CV.displayName=B8;var q8="PopoverTrigger",$8=H.forwardRef((e,n)=>{const{__scopePopover:t,...s}=e,l=uo(q8,t),i=Pu(t),o=pn(n,l.triggerRef),d=r.jsx(gr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":l.open,"aria-controls":l.contentId,"data-state":W8(l.open),...s,ref:o,onClick:Yt(e.onClick,l.onOpenToggle)});return l.hasCustomAnchor?d:r.jsx(fx,{asChild:!0,...i,children:d})});$8.displayName=q8;var hx="PopoverPortal",[SV,kV]=L8(hx,{forceMount:void 0}),U8=e=>{const{__scopePopover:n,forceMount:t,children:s,container:l}=e,i=uo(hx,n);return r.jsx(SV,{scope:n,forceMount:t,children:r.jsx(ra,{present:t||i.open,children:r.jsx(Qm,{asChild:!0,container:l,children:s})})})};U8.displayName=hx;var oc="PopoverContent",H8=H.forwardRef((e,n)=>{const t=kV(oc,e.__scopePopover),{forceMount:s=t.forceMount,...l}=e,i=uo(oc,e.__scopePopover);return r.jsx(ra,{present:s||i.open,children:i.modal?r.jsx(RV,{...l,ref:n}):r.jsx(TV,{...l,ref:n})})});H8.displayName=oc;var EV=sc("PopoverContent.RemoveScroll"),RV=H.forwardRef((e,n)=>{const t=uo(oc,e.__scopePopover),s=H.useRef(null),l=pn(n,s),i=H.useRef(!1);return H.useEffect(()=>{const o=s.current;if(o)return Jy(o)},[]),r.jsx(Xm,{as:EV,allowPinchZoom:!0,children:r.jsx(V8,{...e,ref:l,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Yt(e.onCloseAutoFocus,o=>{o.preventDefault(),i.current||t.triggerRef.current?.focus()}),onPointerDownOutside:Yt(e.onPointerDownOutside,o=>{const d=o.detail.originalEvent,c=d.button===0&&d.ctrlKey===!0,a=d.button===2||c;i.current=a},{checkForDefaultPrevented:!1}),onFocusOutside:Yt(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),TV=H.forwardRef((e,n)=>{const t=uo(oc,e.__scopePopover),s=H.useRef(!1),l=H.useRef(!1);return r.jsx(V8,{...e,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{e.onCloseAutoFocus?.(i),i.defaultPrevented||(s.current||t.triggerRef.current?.focus(),i.preventDefault()),s.current=!1,l.current=!1},onInteractOutside:i=>{e.onInteractOutside?.(i),i.defaultPrevented||(s.current=!0,i.detail.originalEvent.type==="pointerdown"&&(l.current=!0));const o=i.target;t.triggerRef.current?.contains(o)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&l.current&&i.preventDefault()}})}),V8=H.forwardRef((e,n)=>{const{__scopePopover:t,trapFocus:s,onOpenAutoFocus:l,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:d,onPointerDownOutside:c,onFocusOutside:a,onInteractOutside:u,...h}=e,f=uo(oc,t),m=Pu(t);return Zy(),r.jsx(Wm,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:l,onUnmountAutoFocus:i,children:r.jsx(Km,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:d,onPointerDownOutside:c,onFocusOutside:a,onDismiss:()=>f.onOpenChange(!1),children:r.jsx(I8,{"data-state":W8(f.open),role:"dialog",id:f.contentId,...m,...h,ref:n,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),K8="PopoverClose",AV=H.forwardRef((e,n)=>{const{__scopePopover:t,...s}=e,l=uo(K8,t);return r.jsx(gr.button,{type:"button",...s,ref:n,onClick:Yt(e.onClick,()=>l.onOpenChange(!1))})});AV.displayName=K8;var MV="PopoverArrow",OV=H.forwardRef((e,n)=>{const{__scopePopover:t,...s}=e,l=Pu(t);return r.jsx(F8,{...l,...s,ref:n})});OV.displayName=MV;function W8(e){return e?"open":"closed"}var DV=z8,PV=$8,IV=U8,Q8=H8;const FV=DV,LV=PV,G8=H.forwardRef(({className:e,align:n="center",sideOffset:t=4,...s},l)=>r.jsx(IV,{children:r.jsx(Q8,{ref:l,align:n,sideOffset:t,className:Lt("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})}));G8.displayName=Q8.displayName;const zV=()=>or({queryKey:["pending-items","me"],queryFn:async()=>{const{data:e}=await Xe.get("/pending-items/employee/me");return e}}),ny=(e,n,t=!0)=>or({queryKey:["accounts","by-type",e,n],queryFn:async()=>{const s=new URLSearchParams;s.append("type",e),n?.search&&s.append("search",n.search),n?.page&&s.append("page",String(n.page)),n?.per_page&&s.append("per_page",String(n.per_page));const{data:l}=await Xe.get(`/accounts?${s.toString()}`);return l},enabled:t,staleTime:300*1e3}),BV=e=>or({queryKey:["accounts","unified",e],queryFn:async()=>{const n=new URLSearchParams;e?.type&&n.append("type",e.type),e?.search&&n.append("search",e.search),e?.page&&n.append("page",e.page.toString()),e?.per_page&&n.append("per_page",e.per_page.toString());const{data:t}=await Xe.get(`/accounts${n.toString()?`?${n.toString()}`:""}`);return t}}),qV=()=>{const e=Nt();return Et({mutationFn:async n=>{const{data:t}=await Xe.post("/accounts/transactions",n);return t.data},onSuccess:()=>{e.invalidateQueries({queryKey:["accounts"]}),e.invalidateQueries({queryKey:["transactions"]})}})},$V=e=>or({queryKey:["invoices","aging-analysis",e],queryFn:async()=>{const n=new URLSearchParams,{data:t}=await Xe.get(`/invoices/aging-analysis${n.toString()?`?${n.toString()}`:""}`);return t.data}});function ap(e,n){const[t,s]=H.useState(e);return H.useEffect(()=>{const l=setTimeout(()=>{s(e)},n);return()=>{clearTimeout(l)}},[e,n]),t}const Z3=({value:e,onChange:n,placeholder:t=" ...",disabled:s=!1})=>{const[l,i]=H.useState(!1),[o,d]=H.useState(""),c=ap(o,300),{data:a,isLoading:u}=ny("client",{search:c,per_page:10},l),h=a?.accounts||[],f=h.find(m=>String(m.id)===e);return r.jsxs(FV,{open:l,onOpenChange:i,children:[r.jsx(LV,{asChild:!0,children:r.jsxs(Ne,{variant:"outline-secondary",role:"combobox","aria-expanded":l,className:"w-full justify-between text-right",disabled:s,children:[r.jsx("span",{className:Lt(!f&&"text-black/50"),children:f?f.name:t}),r.jsx(cO,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),r.jsx(G8,{className:"w-full p-0",align:"start",children:r.jsxs(l8,{shouldFilter:!1,children:[r.jsx(c8,{placeholder:"  ...",value:o,onValueChange:d}),r.jsx(d8,{children:u?r.jsxs("div",{className:"py-6 text-center",children:[r.jsx(no,{className:"mx-auto h-4 w-4 animate-spin text-black/50"}),r.jsx("p",{className:"mt-2 text-xs text-black/50",children:" ..."})]}):h.length===0?r.jsx(u8,{children:o?"  ":"  "}):r.jsx(f8,{children:h.map(m=>r.jsxs(h8,{value:String(m.id),onSelect:b=>{n(b===e?"":b),i(!1),d("")},className:"text-right",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-medium",children:m.name}),r.jsxs("div",{className:"text-xs text-black/50",children:[": ",new Intl.NumberFormat("en-US").format(m.balance)," ."]})]}),r.jsx(ha,{className:Lt("mr-2 h-4 w-4",e===String(m.id)?"opacity-100":"opacity-0")})]},m.id))})})]})})]})},UV=({isOpen:e,onClose:n,preselectedAccount:t})=>{const{showToast:s}=ir(),l=qV(),{data:i}=ny("employee",{},e),{data:o}=ny("company",{},e),[d,c]=H.useState(t?.type||"employee"),[a,u]=H.useState(t?.id?.toString()||""),[h,f]=H.useState("company"),[m,b]=H.useState(""),[y,g]=H.useState(""),[w,x]=H.useState(""),[_,j]=H.useState(new Date().toISOString().split("T")[0]),[R,M]=H.useState("");H.useEffect(()=>{e&&t&&(c(t.type),u(t.id.toString()))},[e,t]);const I=S=>S==="employee"?i?.accounts||[]:S==="company"?o?.accounts||[]:[],F=[...i?.accounts||[],...o?.accounts||[]],B=F.find(S=>S.type===d&&String(S.id)===a),U=m&&m!==""?F.find(S=>S.type===h&&String(S.id)===m):null,Q=parseFloat(y)||0,K=B?B.balance-Q:0,T=U?U.balance+Q:0,P=S=>new Intl.NumberFormat("ar-SA",{minimumFractionDigits:0,maximumFractionDigits:2}).format(S),A=S=>{switch(S){case"employee":return r.jsx(ma,{size:14});case"client":return r.jsx(ro,{size:14});case"company":return r.jsx(Cu,{size:14})}},N=async S=>{if(S.preventDefault(),!a||!m||!y||!w){s({type:"error",title:"    "});return}try{await l.mutateAsync({type:"transfer",from_account_type:d,from_account_id:Number(a),to_account_type:h,to_account_id:Number(m),amount:parseFloat(y),description:w,effective_date:`${_}T12:00:00`,notes:R||void 0}),s({type:"success",title:"   "}),n(),k()}catch(E){s({type:"error",title:"  ",message:E instanceof Error?E.message:" "})}},k=()=>{c("employee"),u(""),f("company"),b(""),g(""),x(""),j(new Date().toISOString().split("T")[0]),M("")};return r.jsx(Zt,{isOpen:e,onClose:n,title:" ",children:r.jsxs("form",{onSubmit:N,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-black mb-1",children:" "}),r.jsxs("select",{value:d,onChange:S=>{c(S.target.value),u("")},className:"w-full px-3 py-2 text-sm border border-input rounded-md bg-background",children:[r.jsx("option",{value:"employee",children:""}),r.jsx("option",{value:"client",children:""}),r.jsx("option",{value:"company",children:""})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-black mb-1",children:" "}),d==="client"?r.jsx(Z3,{value:a,onChange:u,placeholder:"  ..."}):r.jsxs("select",{value:a,onChange:S=>u(S.target.value),className:"w-full px-3 py-2 text-sm border border-input rounded-md bg-background",required:!0,children:[r.jsx("option",{value:"",children:"..."}),I(d).map(S=>r.jsxs("option",{value:S.id,children:[S.name," (",P(S.balance)," .)"]},S.id))]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-black mb-1",children:" "}),r.jsxs("select",{value:h,onChange:S=>{f(S.target.value),b("")},className:"w-full px-3 py-2 text-sm border border-input rounded-md bg-background",children:[r.jsx("option",{value:"employee",children:""}),r.jsx("option",{value:"client",children:""}),r.jsx("option",{value:"company",children:""})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-black mb-1",children:"  "}),h==="client"?r.jsx(Z3,{value:m,onChange:b,placeholder:"  ..."}):r.jsxs("select",{value:m,onChange:S=>b(S.target.value),className:"w-full px-3 py-2 text-sm border border-input rounded-md bg-background",required:!0,children:[r.jsx("option",{value:"",children:"..."}),I(h).filter(S=>!(S.type===d&&String(S.id)===a)).map(S=>r.jsxs("option",{value:S.id,children:[S.name," (",P(S.balance)," .)"]},S.id))]})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-black mb-1",children:[" ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"number",step:"0.01",min:"0.01",value:y,onChange:S=>g(S.target.value),className:"w-full px-3 py-2 text-sm border border-input rounded-md bg-background pr-10",placeholder:"0.00",required:!0}),r.jsx(zr,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-black/40"})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-black mb-1",children:[" ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:w,onChange:S=>x(S.target.value),className:"w-full px-3 py-2 text-sm border border-input rounded-md bg-background",placeholder:":    ...",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-black mb-1",children:" "}),r.jsx("input",{type:"date",value:_,onChange:S=>j(S.target.value),className:"w-full px-3 py-2 text-sm border border-input rounded-md bg-background"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-black mb-1",children:" ()"}),r.jsx("textarea",{value:R,onChange:S=>M(S.target.value),className:"w-full px-3 py-2 text-sm border border-input rounded-md bg-background",rows:2,placeholder:"  ..."})]}),B&&U&&Q>0&&r.jsx(Nn,{className:"bg-muted/50",children:r.jsxs(Cn,{className:"p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(Mn,{size:16,className:"text-primary"}),r.jsx("span",{className:"font-medium text-sm",children:" "})]}),r.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[r.jsxs("div",{className:"flex-1 p-3 bg-background rounded-md border border-red-200",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[A(B.type),r.jsx("span",{className:"font-medium",children:B.name})]}),r.jsx("div",{className:"text-xs text-black/60 mb-2",children:r.jsxs("span",{className:"block",children:[" : ",P(B.balance)," ."]})}),r.jsxs("div",{className:"flex items-center justify-between border-t border-red-200 pt-2",children:[r.jsx("span",{className:"text-black/60",children:" :"}),r.jsxs("span",{className:"font-bold text-red-600",children:[P(K)," ."]})]}),r.jsxs("span",{className:"text-red-600 text-xs font-medium mt-2 block",children:["-",P(Q)," ."]})]}),r.jsx(zM,{size:20,className:"text-primary flex-shrink-0"}),r.jsxs("div",{className:"flex-1 p-3 bg-background rounded-md border border-green-200",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[A(U.type),r.jsx("span",{className:"font-medium",children:U.name})]}),r.jsx("div",{className:"text-xs text-black/60 mb-2",children:r.jsxs("span",{className:"block",children:[" : ",P(U.balance)," ."]})}),r.jsxs("div",{className:"flex items-center justify-between border-t border-green-200 pt-2",children:[r.jsx("span",{className:"text-black/60",children:" :"}),r.jsxs("span",{className:"font-bold text-green-600",children:[P(T)," ."]})]}),r.jsxs("span",{className:"text-green-600 text-xs font-medium mt-2 block",children:["+",P(Q)," ."]})]})]})]})}),B&&!U&&Q>0&&r.jsx(Nn,{className:"bg-amber-50 border border-amber-200",children:r.jsx(Cn,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Mn,{size:16,className:"text-amber-600"}),r.jsx("span",{className:"text-sm text-amber-700",children:"      "})]})})}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t border-border",children:[r.jsx(Ne,{type:"button",variant:"outline-primary",onClick:n,children:""}),r.jsx(Ne,{type:"submit",variant:"primary",isLoading:l.isPending,children:" "})]})]})})},HV=()=>{const{closeModal:e,props:n}=et(),{transactionId:t,accountType:s,accountId:l}=n,{data:i,isLoading:o,error:d}=or({queryKey:["journal-entry",t],queryFn:async()=>{const y=(await Xe.get(`/accounts/${s}/${l}/history`)).data.transactions,g=y.find(x=>x.id===t);if(!g)throw new Error("Transaction not found");let w=null;if(g.related_transaction_id&&(w=y.find(x=>x.id===g.related_transaction_id),!w)){const x=g.related_transaction_id;for(const _ of["client","employee","company"])try{const R=(await Xe.get("/accounts/transactions",{params:{account_type:_,page:1,per_page:1e3}})).data.transactions?.find(M=>M.id===x);if(R){w=R;break}}catch{}}return{original:g,related:w}},enabled:!!t}),c=b=>{switch(b){case"client":return r.jsx(ma,{size:16});case"employee":return r.jsx(fi,{size:16});case"company":return r.jsx(Cu,{size:16});default:return r.jsx(ma,{size:16})}},a=b=>{switch(b){case"client":return"";case"employee":return"";case"company":return"";default:return b}},u=b=>({INVOICE_GENERATED:"",PAYMENT_RECEIVED:" ",COMMISSION_EARNED:"",SALARY_PAID:"",TRANSFER_IN:" ",TRANSFER_OUT:" ",MANUAL_ADJUSTMENT:" ",CREDIT_ALLOCATED:" ",EXPENSE:"",INCOME:"",INITIAL_BALANCE:" ",INVOICE_REVERSAL:" ",PAYMENT_REVERSAL:" ",CREDIT_RECEIVED:" "})[b]||b,h=b=>{const y=typeof b=="string"?parseFloat(b):b;return new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}).format(y)},f=b=>{try{return new Date(b).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch{return b}},m=b=>{if(!b.related_object_type||!b.related_object_id)return null;const y=b.related_object_type,g=b.related_object_id,w=b.client_name||b.employee_name||b.task_name||b.invoice_name||b.account_name;let x="",_="";return y==="client"||y.includes("Client")?(x=`/clients/${g}`,_=w||`Client #${g}`):y==="employee"||y.includes("Employee")?(x=`/employees/${g}`,_=w||`Employee #${g}`):y==="task"||y.includes("Task")?(x=`/tasks/${g}`,_=w||`Task #${g}`):(y==="invoice"||y.includes("Invoice"))&&(x=`/invoices/${g}`,_=w||`Invoice #${g}`),x?r.jsxs(xn,{to:x,className:"inline-flex items-center gap-1 text-primary hover:underline",children:[_,r.jsx(Ih,{size:12})]}):r.jsxs("span",{children:[y," #",g]})};return r.jsx(Zt,{isOpen:!0,onClose:e,title:`   #${t}`,className:"max-w-4xl",children:r.jsx("div",{className:"space-y-4",children:o?r.jsx("div",{className:"flex justify-center items-center py-12",children:r.jsx(xi,{size:"lg"})}):d?r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-red-800",children:"    "}):r.jsxs(r.Fragment,{children:[i?.original&&r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-sm space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-gray-600",children:":"}),r.jsx("span",{className:"font-medium",children:f(i.original.transaction_date||i.original.created_at)})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-gray-600",children:":"}),r.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:u(i.original.transaction_type)})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-600",children:":"}),r.jsx("p",{className:"font-medium mt-1",children:i.original.description})]}),m(i.original)&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-gray-600",children:" :"}),m(i.original)]})]}),r.jsx("div",{className:"border border-gray-300 rounded-lg overflow-hidden",children:r.jsxs("table",{className:"w-full border-collapse",children:[r.jsx("thead",{className:"bg-gray-100",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-3 py-2 text-start text-sm font-semibold text-gray-700 border border-gray-300",children:""}),r.jsx("th",{className:"px-3 py-2 text-start text-sm font-semibold text-gray-700 border border-gray-300",children:" "}),r.jsx("th",{className:"px-3 py-2 text-start text-sm font-semibold text-gray-700 border border-gray-300",children:" (Debit)"}),r.jsx("th",{className:"px-3 py-2 text-start text-sm font-semibold text-gray-700 border border-gray-300",children:" (Credit)"}),r.jsx("th",{className:"px-3 py-2 text-start text-sm font-semibold text-gray-700 border border-gray-300",children:" "})]})}),r.jsxs("tbody",{children:[i?.original&&r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-3 py-2 border border-gray-300",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-gray-600",children:c(i.original.account_type)}),r.jsxs("div",{className:"text-sm",children:[r.jsxs("div",{className:"font-medium",children:[a(i.original.account_type)," #",i.original.account_id]}),r.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",i.original.id]})]})]})}),r.jsx("td",{className:"px-3 py-2 border border-gray-300",children:r.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs bg-blue-100 text-blue-800",children:a(i.original.account_type)})}),r.jsx("td",{className:"px-3 py-2 border border-gray-300 text-start",children:i.original.debit&&parseFloat(i.original.debit)>0?r.jsxs("span",{className:"text-green-600 font-semibold flex items-center gap-1",children:[r.jsx(zh,{size:14}),"+",h(i.original.debit)]}):r.jsx("span",{className:"text-gray-400",children:"-"})}),r.jsx("td",{className:"px-3 py-2 border border-gray-300 text-start",children:i.original.credit&&parseFloat(i.original.credit)>0?r.jsxs("span",{className:"text-blue-600 font-semibold flex items-center gap-1",children:[r.jsx(Lh,{size:14}),"-",h(i.original.credit)]}):r.jsx("span",{className:"text-gray-400",children:"-"})}),r.jsx("td",{className:"px-3 py-2 border border-gray-300 text-start",children:r.jsx("span",{className:`font-semibold ${parseFloat(i.original.balance||i.original.balance_after)<0?"text-red-600":parseFloat(i.original.balance||i.original.balance_after)>0?"text-green-600":"text-gray-600"}`,children:h(i.original.balance||i.original.balance_after)})})]}),i?.related?r.jsxs("tr",{className:"hover:bg-gray-50 bg-purple-50",children:[r.jsx("td",{className:"px-3 py-2 border border-gray-300",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-gray-600",children:c(i.related.account_type)}),r.jsxs("div",{className:"text-sm",children:[r.jsxs("div",{className:"font-medium",children:[a(i.related.account_type)," #",i.related.account_id]}),r.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",i.related.id]})]})]})}),r.jsx("td",{className:"px-3 py-2 border border-gray-300",children:r.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs bg-purple-100 text-purple-800",children:a(i.related.account_type)})}),r.jsx("td",{className:"px-3 py-2 border border-gray-300 text-start",children:i.related.debit&&parseFloat(i.related.debit)>0?r.jsxs("span",{className:"text-green-600 font-semibold flex items-center gap-1",children:[r.jsx(zh,{size:14}),"+",h(i.related.debit)]}):r.jsx("span",{className:"text-gray-400",children:"-"})}),r.jsx("td",{className:"px-3 py-2 border border-gray-300 text-start",children:i.related.credit&&parseFloat(i.related.credit)>0?r.jsxs("span",{className:"text-blue-600 font-semibold flex items-center gap-1",children:[r.jsx(Lh,{size:14}),"-",h(i.related.credit)]}):r.jsx("span",{className:"text-gray-400",children:"-"})}),r.jsx("td",{className:"px-3 py-2 border border-gray-300 text-start",children:r.jsx("span",{className:`font-semibold ${parseFloat(i.related.balance||i.related.balance_after)<0?"text-red-600":parseFloat(i.related.balance||i.related.balance_after)>0?"text-green-600":"text-gray-600"}`,children:h(i.related.balance||i.related.balance_after)})})]}):r.jsx("tr",{className:"bg-yellow-50",children:r.jsx("td",{colSpan:5,className:"px-3 py-2 border border-gray-300 text-center text-sm text-yellow-800",children:"    (   -  )"})})]}),r.jsx("tfoot",{className:"bg-gray-100 font-semibold text-sm",children:r.jsxs("tr",{children:[r.jsx("td",{colSpan:2,className:"px-3 py-2 text-start border border-gray-300",children:":"}),r.jsx("td",{className:"px-3 py-2 text-start text-green-600 border border-gray-300",children:h(parseFloat(i?.original?.debit||0)+parseFloat(i?.related?.debit||0))}),r.jsx("td",{className:"px-3 py-2 text-start text-blue-600 border border-gray-300",children:h(parseFloat(i?.original?.credit||0)+parseFloat(i?.related?.credit||0))}),r.jsx("td",{className:"px-3 py-2 border border-gray-300"})]})})]})}),i?.original&&i?.related&&r.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 text-sm",children:r.jsxs("div",{className:"flex items-center gap-2 text-green-800",children:[r.jsx("div",{className:"w-5 h-5 bg-green-600 text-white rounded-full flex items-center justify-center text-xs",children:""}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"  "}),r.jsxs("p",{className:"text-xs",children:["Total Debits ="," ",h(parseFloat(i.original.debit||0)+parseFloat(i.related.debit||0))," ","| Total Credits ="," ",h(parseFloat(i.original.credit||0)+parseFloat(i.related.credit||0))]})]})]})})]})})})},VV=({client:e})=>{const{data:n,isLoading:t}=zm(e?.id||0);return r.jsx(zL,{receivables:n?.statementItems||[],isLoading:t,clientName:e?.name||""})},X8=()=>{const e=et(o=>o.isOpen),n=et(o=>o.modalType),t=et(o=>o.props),s=et(o=>o.closeModal),{t:l}=qt();return e?(()=>{switch(n){case"clientForm":return r.jsx(Zt,{isOpen:e,onClose:s,title:t.clientToEdit?l("clients.editClient"):l("clients.addNew"),children:r.jsx(GI,{clientToEdit:t.clientToEdit,onSuccess:s})},"clientForm");case"taskForm":return r.jsx(IL,{},"taskForm");case"assignTask":return r.jsx($q,{},"assignTask");case"approval":return r.jsx(Uq,{},"approval");case"requirements":return r.jsx(FL,{},"requirements");case"manualReceivable":return r.jsx(LL,{},"manualReceivable");case"taskDetails":return r.jsx(Rz,{},"taskDetails");case"taskSubtasks":return r.jsx(Tz,{},"taskSubtasks");case"clientReceivables":return r.jsx(Zt,{isOpen:e,onClose:s,title:`${l("receivables.title")} - ${t.client?.name||""}`,children:r.jsx(VV,{client:t.client})},"clientReceivables");case"paymentForm":return r.jsx(vz,{});case"paymentHistory":return r.jsx(wz,{});case"paymentEdit":return r.jsx(_z,{});case"paymentDelete":return r.jsx(jz,{});case"clientSearch":return r.jsx(Kz,{});case"tagForm":return r.jsx(QL,{});case"tagManagement":return r.jsx(GL,{});case"selectReceivableForPayment":return r.jsx(BL,{isOpen:e,onClose:s,clientId:t.clientId},"selectReceivableForPayment");case"taskCompletion":return r.jsx(Nz,{},"taskCompletion");case"amountDetails":return r.jsx(Cz,{},"amountDetails");case"subtasksModal":return r.jsx(Sz,{},"subtasksModal");case"taskSelection":return r.jsx(kz,{},"taskSelection");case"recordCreditModal":return r.jsx(Az,{},"recordCreditModal");case"applyCreditModal":return r.jsx(Wz,{},"applyCreditModal");case"creditEdit":return r.jsx(Mz,{},"creditEdit");case"creditDelete":return r.jsx(Oz,{},"creditDelete");case"allocationEdit":return r.jsx(Fz,{},"allocationEdit");case"allocationDelete":return r.jsx(Lz,{},"allocationDelete");case"editReceivable":return r.jsx(Qz,{},"editReceivable");case"deleteReceivable":return r.jsx(Gz,{},"deleteReceivable");case"clientReceivablesEdit":return r.jsx(Fq,{},"clientReceivablesEdit");case"urgentAlert":return r.jsx(zz,{},"urgentAlert");case"prepaidConflict":return r.jsx(Lq,{taskId:t.taskId,conflictData:t.conflictData,newPrepaidAmount:t.newPrepaidAmount,onResolved:t.onResolved},"prepaidConflict");case"taskAmountConflict":return r.jsx(zq,{taskId:t.taskId,conflictData:t.conflictData,newTaskAmount:t.newTaskAmount,onResolved:t.onResolved},"taskAmountConflict");case"taskCancellation":return r.jsx(Bq,{taskId:t.taskId,analysisData:t.analysisData,onResolved:t.onResolved},"taskCancellation");case"concurrentModification":return r.jsx(qq,{conflictData:t.conflictData,onRetry:t.onRetry,onCancel:t.onCancel},"concurrentModification");case"confirmDelete":return r.jsxs(Zt,{isOpen:e,onClose:s,title:t.title,children:[r.jsx("p",{children:t.message}),r.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[r.jsx(Ne,{variant:"secondary",onClick:s,children:l("common.cancel")}),r.jsx(Ne,{variant:"danger",onClick:()=>{t.onConfirm(),s()},children:l("common.confirm")})]})]},"confirmDelete");case"employeePayout":return r.jsx(Bz,{},"employeePayout");case"employeeBorrow":return r.jsx(qz,{},"employeeBorrow");case"editEmployeePayout":return r.jsx($z,{},"editEmployeePayout");case"editTaskExpense":return r.jsx(Vz,{},"editTaskExpense");case"submitForReview":return r.jsx(Hq,{},"submitForReview");case"invoiceForm":return r.jsx(C3,{},"invoiceForm");case"recordPayment":return r.jsx(d$,{},"recordPayment");case"invoiceDetails":return r.jsx(h$,{},"invoiceDetails");case"manualTransaction":return r.jsx(UV,{isOpen:e,onClose:s,preselectedAccount:t.preselectedAccount},"manualTransaction");case"createInvoice":return r.jsx(C3,{},"createInvoice");case"journalEntryDetails":return r.jsx(HV,{},"journalEntryDetails");default:return null}})():null},al=mm(e=>({isOpen:!1,drawerType:null,props:{},openDrawer:(n,t)=>e({isOpen:!0,drawerType:n,props:t}),closeDrawer:()=>e({isOpen:!1,drawerType:null,props:{}})})),KV=async({pageParam:e=1,queryKey:n})=>{const[t,s,l=20]=n,{data:i}=await Xe.get(`/tasks/${s}/messages`,{params:{page:e,per_page:l}});return i.data},WV=async({taskId:e,payload:n})=>{const{data:t}=await Xe.post(`/tasks/${e}/messages`,n);return t.data.message},QV=(e,n=20)=>xa({queryKey:["taskMessages",e,n],queryFn:KV,initialPageParam:1,getNextPageParam:t=>t.pagination.has_next_page?t.pagination.current_page+1:void 0,getPreviousPageParam:t=>t.pagination.has_prev_page?t.pagination.current_page-1:void 0,enabled:!!e&&e>0,staleTime:1e3*60*2,refetchOnWindowFocus:!1}),GV=()=>{const e=Nt();return Et({mutationFn:WV,onMutate:async({taskId:n,payload:t})=>{await e.cancelQueries({queryKey:["taskMessages",n]});const s=e.getQueryData(["taskMessages",n]);return e.setQueryData(["taskMessages",n],l=>{if(!l)return l;const i={id:Date.now(),task_id:n,employee_id:0,employee_name:"",employee_email:"",message_content:t.message_content,message_type:"comment",created_at:new Date().toISOString(),created_at_formatted:"",is_system_message:!1};return{...l,pages:l.pages.map((o,d)=>d===0?{...o,messages:[i,...o.messages],pagination:{...o.pagination,total_messages:o.pagination.total_messages+1}}:o)}}),{previousMessages:s,taskId:n}},onError:(n,t,s)=>{s&&e.setQueryData(["taskMessages",s.taskId],s.previousMessages)},onSettled:(n,t,s)=>{e.invalidateQueries({queryKey:["taskMessages",s.taskId]}),e.invalidateQueries({queryKey:["taskMessageStats",s.taskId]}),e.invalidateQueries({queryKey:["recentMessages"]}),e.invalidateQueries({queryKey:["employee"]}),e.invalidateQueries({queryKey:["employees"]})}})},XV=({messagesData:e,isLoading:n,error:t,onLoadMore:s,hasNextPage:l,isFetchingNextPage:i,highlightMessage:o})=>{const d=H.useRef(null),c=H.useRef(null),a=H.useRef(new Map);H.useEffect(()=>{e?.pages.length===1&&c.current?.scrollIntoView({behavior:"smooth"})},[e?.pages[0]?.messages.length]),H.useEffect(()=>{if(o&&e?.pages){console.log("Attempting to highlight message ID:",o);const m=e.pages.flatMap(b=>b.messages).find(b=>b.id===o);m?(console.log("Found target message:",m),setTimeout(()=>{const b=a.current.get(o);b?(console.log("Scrolling to message element"),b.scrollIntoView({behavior:"smooth",block:"center"}),b.style.backgroundColor="rgba(255, 193, 7, 0.3)",b.style.transition="background-color 0.5s ease",setTimeout(()=>{b.style.backgroundColor=""},3e3)):console.log("Message element not found in DOM")},500)):console.log("Target message not found in loaded messages")}},[o,e]);const u=(f,m)=>{m?a.current.set(f,m):a.current.delete(f)};if(n)return r.jsx("div",{className:"flex items-center justify-center h-full p-4",children:r.jsxs("div",{className:"text-center",children:[r.jsx(no,{className:"text-primary mb-2 animate-spin",size:24}),r.jsx("p",{className:"text-sm text-black mb-0",children:"  ..."})]})});if(t)return r.jsx("div",{className:"flex items-center justify-center h-full p-4",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Mn,{className:"text-red-600 mb-3",size:32}),r.jsx("h6",{className:"text-black mb-1 font-semibold",children:"   "}),r.jsx("p",{className:"text-sm text-black mb-3",children:t?.message||"   "}),r.jsx("button",{className:"px-4 py-2 text-sm border border-primary text-primary rounded-md hover:bg-primary/10 transition-colors",onClick:()=>window.location.reload(),children:" "})]})});const h=e?.pages.flatMap(f=>f.messages)||[];return h.length===0?r.jsx("div",{className:"flex items-center justify-center h-full p-4",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Ps,{className:"text-black mb-3",size:48}),r.jsx("h6",{className:"text-black mb-1 font-semibold",children:"   "}),r.jsx("p",{className:"text-sm text-black mb-0",children:"     "})]})}):r.jsxs("div",{ref:d,className:"h-full overflow-auto",children:[l&&r.jsx("div",{className:"text-center p-3 border-b border-border",children:r.jsx("button",{className:"px-4 py-2 text-sm border border-border rounded-md hover:bg-muted transition-colors disabled:opacity-50",onClick:s,disabled:i,children:i?r.jsxs(r.Fragment,{children:[r.jsx(no,{size:12,className:"inline mr-1 animate-spin"})," ..."]}):"  "})}),r.jsx("div",{className:"p-2",children:[...h].reverse().map((f,m)=>r.jsx(YV,{message:f,ref:b=>u(f.id,b)},`${f.id}-${m}`))}),r.jsx("div",{ref:c})]})},YV=De.forwardRef(({message:e},n)=>e.is_system_message?r.jsx("div",{ref:n,className:"text-center mb-2",children:r.jsx("div",{className:"inline-block bg-muted rounded px-2 py-1",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(XM,{size:12,className:"text-black mr-1"}),r.jsx("small",{className:"text-black",children:e.message_content})]})})}):r.jsxs("div",{ref:n,className:"flex mb-2",children:[r.jsx("div",{className:"flex-shrink-0 mr-2",children:r.jsx("div",{className:"bg-primary/10 rounded-full flex items-center justify-center",style:{width:"28px",height:"28px"},children:r.jsx(ma,{size:14,className:"text-primary"})})}),r.jsx("div",{className:"flex-1 min-w-0",children:r.jsxs("div",{className:"bg-muted rounded p-2",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("small",{className:"font-medium text-black mb-0",children:e.employee_name}),r.jsx("small",{className:"text-black",children:e.created_at_formatted})]}),r.jsx("p",{className:"text-sm mb-0 text-black",style:{lineHeight:"1.3"},children:e.message_content})]})})]})),ZV=({taskId:e})=>{const[n,t]=H.useState(""),s=H.useRef(null),l=GV(),{success:i,error:o}=ir(),d=async f=>{f?.preventDefault();const m=n.trim();if(m)try{await l.mutateAsync({taskId:e,payload:{message_content:m}}),t(""),s.current?.focus(),i("   ","   ")}catch(b){console.error("Error sending message:",b),o("   ","    ")}},c=f=>{f.key==="Enter"&&!f.shiftKey&&(f.preventDefault(),d())},a=f=>{t(f.target.value);const m=f.target;m.style.height="auto",m.style.height=Math.min(m.scrollHeight,120)+"px"},u=l.isPending,h=n.trim().length>0&&!u;return r.jsx("div",{className:"p-3",children:r.jsx("form",{onSubmit:d,children:r.jsxs("div",{className:"flex",children:[r.jsxs("div",{className:"flex-1 mr-2",children:[r.jsx("textarea",{ref:s,value:n,onChange:a,onKeyDown:c,placeholder:" ...",className:"w-full px-3 py-2 text-sm border border-input rounded-md bg-background text-black focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-colors disabled:opacity-50",rows:1,style:{minHeight:"38px",maxHeight:"120px",resize:"none"},disabled:u}),r.jsxs("div",{className:"flex justify-between items-center mt-1",children:[r.jsx("small",{className:"text-black",children:n.length>0&&`${n.length} `}),r.jsx("small",{className:"text-black",children:"Enter   Shift+Enter  "})]})]}),r.jsx("button",{type:"submit",className:"bg-primary text-white px-3 py-2 rounded-md hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed self-start",disabled:!h,style:{minWidth:"38px"},children:u?r.jsx(no,{size:16,className:"animate-spin"}):r.jsx(gD,{size:16})})]})})})},Y8=()=>{const{isOpen:e,drawerType:n,props:t,closeDrawer:s}=al(),{taskId:l,taskName:i,clientName:o,highlightMessage:d}=t||{};H.useEffect(()=>{const w=x=>{x.key==="Escape"&&s()};if(e&&n==="taskFollowUp")return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[e,n,s]);const{data:c,fetchNextPage:a,hasNextPage:u,isFetchingNextPage:h,isLoading:f,error:m}=QV(l||0);if(!e||n!=="taskFollowUp")return null;const b=()=>{s()},y={task_name:i||c?.pages[0]?.task_info?.task_name||"  ",client_name:o||c?.pages[0]?.task_info?.client_name||"  "},g=c?.pages[0]?.pagination?.total_messages||0;return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 bg-black/50 transition-opacity",style:{zIndex:1040},onClick:b}),r.jsxs("div",{className:"fixed right-0 top-0 h-full w-96 bg-card shadow-xl transition-transform flex flex-col",style:{zIndex:1045,transform:"translateX(0)"},children:[r.jsx("div",{className:"border-b border-border bg-muted/30 px-4 py-3",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"bg-primary/10 rounded p-2 mr-3",children:r.jsx(Ps,{className:"text-primary",size:20})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h5",{className:"text-lg font-bold text-black mb-0",children:" "}),r.jsxs("div",{className:"text-sm text-black",children:[r.jsx("div",{className:"truncate",style:{maxWidth:"250px"},children:y.task_name}),r.jsxs("div",{className:"flex items-center mt-1",children:[r.jsx(ma,{size:12,className:"mr-1"}),r.jsx("span",{children:y.client_name}),g>0&&r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"mx-1",children:""}),r.jsxs("span",{children:[g," "]})]})]})]})]}),r.jsx("button",{type:"button",className:"text-black hover:text-foreground transition-colors p-2",onClick:b,"aria-label":"Close",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),r.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[r.jsx("div",{className:"flex-1 overflow-auto transition-opacity",style:{opacity:f?.7:1},children:r.jsx(XV,{messagesData:c,isLoading:f,error:m,onLoadMore:()=>{u&&!h&&a()},hasNextPage:u,isFetchingNextPage:h,highlightMessage:d})}),r.jsx("div",{className:"border-t border-border bg-white transition-transform",style:{transform:f?"translateY(5px)":"translateY(0)"},children:r.jsx(ZV,{taskId:l})})]})]})]})},oi=()=>{const e=ta(),{isCollapsed:n}=_m(),t=H.useMemo(()=>{const s=e.pathname;return s==="/dashboard"?"dashboard":s==="/tasks"?"tasks":s==="/clients"?"clients":s==="/receivables"?"receivables":s==="/settings"?"settings":s.startsWith("/clients/")?"clientProfile":"default"},[e.pathname]);return r.jsxs("div",{className:"flex h-screen overflow-hidden bg-gray-50 rtl","data-page":t,children:[r.jsx("main",{className:"flex-1 overflow-y-auto h-full bg-gray-50 ltr transition-[margin-right] duration-300 ease-in-out",style:{marginRight:n?"0px":"160px",scrollbarWidth:"thin",scrollbarColor:"hsl(var(--muted-foreground)) hsl(var(--secondary))"},children:r.jsxs("div",{className:"[direction:rtl]  p-6 min-h-full",children:[r.jsx(xu,{})," "]})}),r.jsx(pI,{}),r.jsx(X8,{}),r.jsx(Y8,{})]})},JV=()=>{const e=Dn(u=>u.user),n=Dn(u=>u.logout),{isCollapsed:t,toggleCollapsed:s}=_m(),l=kn(),i=et(u=>u.openModal),o=()=>{i("clientSearch",{})},d=()=>{n(),l("/login",{replace:!0})},c=[{path:"/employee/dashboard",icon:Ay,label:" "},{path:"/employee/tasks",icon:vO,label:"  "},{path:"/employee/clients",icon:fi,label:""},{path:"/employee/financials",icon:Kn,label:" "},{path:"/employee/notifications",icon:rc,label:""}],a=[{label:"  ",icon:rl,action:()=>i("taskForm",{})}];return r.jsxs(r.Fragment,{children:[r.jsxs("aside",{className:`
          fixed top-0 right-0 h-screen flex flex-col bg-card border-l border-border z-40 
          transition-all duration-300 ease-in-out overflow-hidden backdrop-blur-sm
          ${t?"w-0 border-l-0":"w-40"}
        `,style:{direction:"rtl"},children:[!t&&r.jsx("button",{className:"absolute top-1/2 -left-3 -translate-y-1/2 w-6 h-6 bg-muted border border-border rounded-full flex items-center justify-center cursor-pointer z-10 transition-all duration-200 text-black hover:bg-muted/80 hover:scale-110",onClick:s,title:t?"  ":"  ",children:r.jsx(Gs,{size:16})}),r.jsx("div",{className:"px-3 py-3 border-b border-border bg-muted/30 flex items-center gap-2 min-h-[60px]",children:r.jsxs("div",{className:"flex items-center justify-between w-full",children:[r.jsx(Jj,{compact:!0}),!t&&r.jsx(V6,{className:"ml-2"})]})}),r.jsxs("nav",{className:"flex-1 py-2 overflow-y-auto scrollbar-thin scrollbar-thumb-muted-foreground/50 scrollbar-track-transparent hover:scrollbar-thumb-muted-foreground",children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("div",{className:"text-xs text-black font-bold uppercase tracking-wider px-2 mb-1 text-right",children:" "}),c.map(u=>r.jsxs(Yd,{to:u.path,className:({isActive:h})=>`flex items-center gap-2 px-2 py-1.5 mx-1 text-foreground text-xs font-normal no-underline rounded-lg transition-all duration-200 relative overflow-hidden hover:bg-accent hover:text-accent-foreground hover:-translate-x-1 hover:font-bold ${h?'bg-primary text-primary-foreground font-bold shadow-md before:content-[""] before:absolute before:top-0 before:right-0 before:w-1 before:h-full before:bg-primary-foreground before:rounded-l-sm':""}`,children:[r.jsx("span",{className:"w-4 h-4 flex items-center justify-center text-sm transition-all duration-200 flex-shrink-0",children:r.jsx(u.icon,{size:16})}),r.jsx("span",{className:"flex-1 text-right whitespace-nowrap",children:u.label}),r.jsx("span",{className:`w-1.5 h-1.5 rounded-full bg-primary-foreground flex-shrink-0 transition-opacity duration-200 ${u.path===location.pathname?"opacity-100":"opacity-0"}`})]},u.path))]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("div",{className:"text-xs text-black font-bold uppercase tracking-wider px-2 mb-1 text-right",children:" "}),a.map((u,h)=>r.jsxs("button",{onClick:u.action,className:"w-full border-none bg-transparent text-right flex items-center gap-2 px-2 py-1.5 mx-1 text-foreground text-xs font-normal rounded-lg transition-all duration-200 hover:bg-accent hover:text-accent-foreground hover:-translate-x-1 focus:outline-none focus:bg-accent",children:[r.jsx("span",{className:"w-4 h-4 flex items-center justify-center text-sm transition-all duration-200 flex-shrink-0",children:r.jsx(u.icon,{size:16})}),r.jsx("span",{className:"flex-1 text-right whitespace-nowrap",children:u.label})]},h))]}),r.jsxs("div",{className:"mx-2 mb-2 relative",children:[r.jsx("input",{type:"text",placeholder:"  ...",className:"w-full px-2 pr-8 py-1.5 bg-muted/30 border border-border rounded-lg text-xs font-normal outline-none transition-all duration-200 cursor-pointer placeholder:text-right hover:bg-muted/50 hover:border-muted-foreground/40 focus:bg-muted/50 focus:border-primary focus:ring-2 focus:ring-primary/25",onFocus:o,readOnly:!0}),r.jsx(ps,{size:16,className:"absolute right-2 top-1/2 -translate-y-1/2 text-black/70 transition-all duration-200 pointer-events-none"})]})]}),r.jsx("div",{className:"p-2 border-t border-border bg-muted/30",children:r.jsxs("div",{className:"flex items-center gap-2 p-1.5 bg-muted/50 rounded-lg transition-all duration-200 hover:bg-muted",children:[r.jsx("div",{className:"w-9 h-9 rounded-full flex items-center justify-center font-semibold text-base flex-shrink-0 shadow-sm border-2 border-white/20 bg-primary text-primary-foreground",children:r.jsx("span",{children:e?.display_name?.charAt(0).toUpperCase()||""})}),r.jsxs("div",{className:"flex-1 text-right overflow-hidden",children:[r.jsx("div",{className:"text-foreground text-sm font-medium whitespace-nowrap overflow-hidden text-ellipsis mb-0.5",children:e?.display_name||""}),r.jsxs("div",{className:"text-black text-xs font-normal",children:[" ",e?.commission_rate&&`(${e.commission_rate}%)`]})]}),r.jsx("button",{onClick:d,className:"bg-transparent border-none text-black text-base cursor-pointer p-1.5 rounded transition-all duration-200 flex-shrink-0 hover:text-destructive hover:bg-destructive/10 hover:scale-105 active:scale-95",title:" ",children:r.jsx(s6,{size:18})})]})})]}),t&&cs.createPortal(r.jsx("button",{className:"fixed top-1/2 -right-5 -translate-y-1/2 w-10 h-10 border-2 rounded-l-full flex items-center justify-center cursor-pointer z-[9999] shadow-lg text-primary-foreground transition-all duration-300 ease-in-out hover:-right-2.5 bg-primary hover:bg-primary/90 border-primary",onClick:s,title:"  ",children:r.jsx(Gs,{className:"rotate-180",size:18})}),document.body)]})},eK=()=>{const e=ta(),{isCollapsed:n}=_m(),t=H.useMemo(()=>{const s=e.pathname;return s.includes("/employee/dashboard")?"employee-dashboard":s.includes("/employee/tasks")?"employee-tasks":s.includes("/employee/clients")?"employee-clients":s.includes("/employee/financials")?"employee-financials":s.includes("/employee/notifications")?"employee-notifications":"employee-default"},[e.pathname]);return r.jsxs("div",{className:"flex h-screen overflow-hidden bg-gray-50 rtl","data-page-type":t,children:[r.jsx(JV,{}),r.jsx("main",{className:"flex-1 overflow-y-auto h-full bg-gray-50 ltr transition-[margin-right] duration-300 ease-in-out",style:{marginRight:n?"0px":"160px",scrollbarWidth:"thin",scrollbarColor:"hsl(var(--muted-foreground)) hsl(var(--secondary))"},children:r.jsx("div",{className:"[direction:rtl] p-6 min-h-full",children:r.jsx(xu,{})})}),r.jsx(X8,{}),r.jsx(Y8,{})]})},_c=()=>{const{data:e,isLoading:n}=wm(),t=e?.manage_options||!1,s=t||e?.tm_view_receivables_amounts||!1,l=t||e?.tm_view_paid_receivables||!1,i=t||e?.tm_view_overdue_receivables||!1,o=t||e?.tm_view_all_receivables||!1;return{isLoading:n,hasViewAmountsPermission:s,hasViewPaidReceivablesPermission:l,hasViewOverdueReceivablesPermission:i,hasViewAllReceivablesPermission:o,hasAnyReceivablesPermission:o||l||i}};let J3=null;const qn=e=>{if(J3===e)return;J3=e;const n=localStorage.getItem(`bg-${e}`),t=document.querySelector("main");n&&t?(t.style.setProperty("background-image",`url(${n})`),t.style.setProperty("background-size","cover"),t.style.setProperty("background-position","center"),t.style.setProperty("background-attachment","fixed"),t.style.setProperty("background-repeat","no-repeat"),document.documentElement.style.setProperty(`--bg-${e}`,`url(${n})`)):t&&(t.style.removeProperty("background-image"),t.style.removeProperty("background-size"),t.style.removeProperty("background-position"),t.style.removeProperty("background-attachment"),t.style.removeProperty("background-repeat"),document.documentElement.style.removeProperty(`--bg-${e}`))},tK=()=>{const e=document.querySelector("main");e&&(e.style.removeProperty("background-image"),e.style.removeProperty("background-size"),e.style.removeProperty("background-position"),e.style.removeProperty("background-attachment"),e.style.removeProperty("background-repeat")),["dashboard","tasks","clients","receivables","clientProfile"].forEach(t=>{document.documentElement.style.removeProperty(`--bg-${t}`)})},rK=()=>{tK()},Wd=e=>localStorage.getItem(`bg-${e}`)||"",nK=(e,n)=>{localStorage.setItem(`bg-${e}`,n),qn(e)},sK=e=>{localStorage.removeItem(`bg-${e}`);const n=document.querySelector("main");n&&(n.style.removeProperty("background-image"),n.style.removeProperty("background-size"),n.style.removeProperty("background-position"),n.style.removeProperty("background-attachment"),n.style.removeProperty("background-repeat")),document.documentElement.style.removeProperty(`--bg-${e}`)},aK={add:r.jsx(hn,{size:16}),edit:r.jsx(Sm,{size:16}),delete:r.jsx(Is,{size:16}),view:r.jsx(Ih,{size:16}),whatsapp:r.jsx(Ps,{size:16}),googleDrive:r.jsx(Ih,{size:16}),message:r.jsx(Ps,{size:16}),assign:r.jsx(nc,{size:16}),complete:r.jsx(es,{size:16}),defer:r.jsx(ku,{size:16}),resume:r.jsx(Cm,{size:16}),restore:r.jsx(Eu,{size:16}),review:r.jsx(ky,{size:16}),requirements:r.jsx(Sn,{size:16}),payment:r.jsx(gs,{size:16}),viewAmount:r.jsx(Kn,{size:16}),cancel:r.jsx(ln,{size:16}),custom:r.jsx(ou,{size:16})},iK={add:"primary",edit:"outline-primary",delete:"danger",complete:"primary",defer:"outline-secondary",resume:"outline-primary",payment:"primary",cancel:"danger"};function mx({item:e,index:n,actions:t,compact:s=!0,direction:l="horizontal"}){const i=t.filter(o=>typeof o.hidden=="function"?!o.hidden(e):!o.hidden);return i.length?r.jsx("div",{className:`grid-action-bar ${l==="vertical"?"flex-col":"flex-row"}`,style:{display:"flex",flexDirection:l==="vertical"?"column":"row",gap:s?"4px":"8px",flexWrap:"wrap",justifyContent:"flex-start",alignItems:"center"},children:i.map((o,d)=>{const c=typeof o.disabled=="function"?o.disabled(e):o.disabled,a=o.icon||aK[o.type],u=o.variant||iK[o.type]||"outline-primary",h=f=>{f.stopPropagation(),f.preventDefault(),f.nativeEvent.stopImmediatePropagation?.(),o.onClick(e,n)};return r.jsxs(Ne,{variant:u,size:"sm",onClick:h,onMouseDown:f=>{f.stopPropagation(),f.preventDefault()},onTouchStart:f=>{f.stopPropagation(),f.preventDefault()},disabled:c,title:o.title||o.label,className:`p-1.5 ${o.className||""}`,style:{pointerEvents:"auto",cursor:c?"not-allowed":"pointer"},children:[a,!s&&o.label&&r.jsx("span",{className:"mr-1",children:o.label})]},`${o.type}-${d}`)})}):null}function il(e,n,t){return{type:e,onClick:n,...t}}function px(e){return il("edit",e,{title:""})}function Z8(e){return il("add",e,{title:" ",icon:r.jsx(hn,{size:16})})}function J8(e){return il("add",e,{title:" ",icon:r.jsx(hn,{size:16})})}function eC(e){return il("googleDrive",n=>{const t=e(n);t&&window.open(t,"_blank")},{title:"Google Drive",hidden:n=>!e(n)})}function oK(e){return il("assign",e,{title:" "})}function lK(e){return il("requirements",e,{title:"",className:"border-cyan-500 text-cyan-500 hover:bg-cyan-50"})}function cK(e){return il("viewAmount",e,{title:" ",className:"border-cyan-500 text-cyan-500 hover:bg-cyan-50"})}const tC=De.memo(({rowData:e,columnData:n,focus:t})=>{const s=n?.linkBasePath||"/clients";return r.jsx("div",{style:{fontWeight:700,fontSize:t?"1.05em":"1em"},children:r.jsx(xn,{to:`${s}/${e.id}`,className:"no-underline text-black font-bold hover:text-primary transition-colors",onClick:l=>l.stopPropagation(),children:e.name})})});tC.displayName="ClientNameLinkCell";const rC=De.memo(({rowData:e})=>{const n=s=>{const l=s.replace(/\D/g,"");return l.startsWith("966")?l:l.startsWith("0")?`966${l.substring(1)}`:`966${l}`},t=s=>{s.stopPropagation();const l=n(e.phone);window.open(`https://wa.me/${l}`,"_blank")};return r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx("span",{style:{color:"#000000"},children:e.phone}),r.jsx("button",{onClick:t,title:" ",style:{padding:"4px",borderRadius:"4px",border:"none",backgroundColor:"transparent",cursor:"pointer",display:"flex",alignItems:"center"},onMouseEnter:s=>s.currentTarget.style.backgroundColor="#dcfce7",onMouseLeave:s=>s.currentTarget.style.backgroundColor="transparent",children:r.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"#25D366",children:r.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})})})]})});rC.displayName="PhoneWithWhatsAppCell";const nC=De.memo(({rowData:e})=>{const n=t=>{if(!t)return"#6b7280";const s=["#3b82f6","#22c55e","#0ea5e9","#eab308","#ef4444","#8b5cf6"],l=t.split("").reduce((i,o)=>(i=(i<<5)-i+o.charCodeAt(0),i&i),0);return s[Math.abs(l)%s.length]};return e.region_name?r.jsx("span",{style:{backgroundColor:n(e.region_name),color:"#ffffff",padding:"4px 10px",borderRadius:"9999px",fontSize:"0.875rem",fontWeight:500},children:e.region_name}):r.jsx("span",{style:{color:"#000000"},children:""})});nC.displayName="RegionBadgeCell";const sC=De.memo(({rowData:e})=>{const n=e.notes,t=n?n.length>50?`${n.substring(0,50)}...`:n:"";return r.jsx("span",{style:{color:"#000000"},children:t})});sC.displayName="NotesCell";const aC=De.memo(({rowData:e})=>{const n=Number(e.total_outstanding||0),t=n.toFixed(2),s=n>0?"#dc2626":"#000000";return r.jsx("div",{style:{textAlign:"center"},children:r.jsx("span",{style:{fontWeight:600,color:s},children:t})})});aC.displayName="DueAmountCell";const iC=De.memo(({rowData:e,rowIndex:n,columnData:t})=>{const s=H.useMemo(()=>[J8(t.onAddInvoice),Z8(t.onAddTask),px(t.onEdit),eC(l=>l.google_drive_link)],[t.onEdit,t.onAddTask,t.onAddInvoice]);return r.jsx("div",{style:{display:"flex",justifyContent:"flex-start",alignItems:"center",height:"100%"},children:r.jsx(mx,{item:e,index:n,actions:s,compact:!0})})});iC.displayName="ActionsCell";const oC=({clients:e,isLoading:n,onEdit:t,onAddTask:s,onAddInvoice:l,linkBasePath:i="/clients"})=>{const{t:o}=qt(),d=H.useMemo(()=>[{id:"name",key:"name",title:o("clients.tableHeaderName"),type:"custom",component:tC,grow:1},{id:"phone",key:"phone",title:o("clients.tableHeaderPhone"),type:"custom",component:rC,grow:1},{id:"region",key:"region_name",title:o("clients.tableHeaderRegion"),type:"custom",component:nC,grow:1},{id:"notes",key:"notes",title:o("clients.tableHeaderNotes"),type:"custom",component:sC,grow:2},{id:"outstanding",key:"total_outstanding",title:o("clients.tableHeaderDueAmount"),type:"custom",component:aC,grow:1},{id:"actions",key:"id",title:o("clients.tableHeaderActions"),type:"custom",component:iC,width:180,grow:0}],[o,i,t,s,l]),c=H.useMemo(()=>d.map(a=>a.id==="name"?{...a,columnData:{linkBasePath:i}}:a.id==="actions"?{...a,columnData:{onEdit:t,onAddTask:s,onAddInvoice:l}}:a),[d,i,t,s,l]);return r.jsx(co,{data:e,columns:c,isLoading:n,emptyMessage:o("common.noResults"),showId:!1})};function ch(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var hb={exports:{}};/*! ExcelJS 19-10-2023 */var e4;function dK(){return e4||(e4=1,function(e,n){(function(t){e.exports=t()})(function(){return function t(s,l,i){function o(a,u){if(!l[a]){if(!s[a]){var h=typeof ch=="function"&&ch;if(!u&&h)return h(a,!0);if(d)return d(a,!0);var f=new Error("Cannot find module '"+a+"'");throw f.code="MODULE_NOT_FOUND",f}var m=l[a]={exports:{}};s[a][0].call(m.exports,function(b){return o(s[a][1][b]||b)},m,m.exports,t,s,l,i)}return l[a].exports}for(var d=typeof ch=="function"&&ch,c=0;c<i.length;c++)o(i[c]);return o}({1:[function(t,s,l){const i=t("fs"),o=t("fast-csv"),d=t("dayjs/plugin/customParseFormat"),c=t("dayjs/plugin/utc"),a=t("dayjs").extend(d).extend(c),u=t("../utils/stream-buf"),{fs:{exists:h}}=t("../utils/utils"),f={true:!0,false:!1,"#N/A":{error:"#N/A"},"#REF!":{error:"#REF!"},"#NAME?":{error:"#NAME?"},"#DIV/0!":{error:"#DIV/0!"},"#NULL!":{error:"#NULL!"},"#VALUE!":{error:"#VALUE!"},"#NUM!":{error:"#NUM!"}};s.exports=class{constructor(m){this.workbook=m,this.worksheet=null}async readFile(m,b){if(b=b||{},!await h(m))throw new Error("File not found: "+m);const y=i.createReadStream(m),g=await this.read(y,b);return y.close(),g}read(m,b){return b=b||{},new Promise((y,g)=>{const w=this.workbook.addWorksheet(b.sheetName),x=b.dateFormats||["YYYY-MM-DD[T]HH:mm:ssZ","YYYY-MM-DD[T]HH:mm:ss","MM-DD-YYYY","YYYY-MM-DD"],_=b.map||function(R){if(R==="")return null;const M=Number(R);if(!Number.isNaN(M)&&M!==1/0)return M;const I=x.reduce((B,U)=>{if(B)return B;const Q=a(R,U,!0);return Q.isValid()?Q:null},null);if(I)return new Date(I.valueOf());const F=f[R];return F!==void 0?F:R},j=o.parse(b.parserOptions).on("data",R=>{w.addRow(R.map(_))}).on("end",()=>{j.emit("worksheet",w)});j.on("worksheet",y).on("error",g),m.pipe(j)})}createInputStream(){throw new Error("`CSV#createInputStream` is deprecated. You should use `CSV#read` instead. This method will be removed in version 5.0. Please follow upgrade instruction: https://github.com/exceljs/exceljs/blob/master/UPGRADE-4.0.md")}write(m,b){return new Promise((y,g)=>{b=b||{};const w=this.workbook.getWorksheet(b.sheetName||b.sheetId),x=o.format(b.formatterOptions);m.on("finish",()=>{y()}),x.on("error",g),x.pipe(m);const{dateFormat:_,dateUTC:j}=b,R=b.map||(F=>{if(F){if(F.text||F.hyperlink)return F.hyperlink||F.text||"";if(F.formula||F.result)return F.result||"";if(F instanceof Date)return _?j?a.utc(F).format(_):a(F).format(_):j?a.utc(F).format():a(F).format();if(F.error)return F.error;if(typeof F=="object")return JSON.stringify(F)}return F}),M=b.includeEmptyRows===void 0||b.includeEmptyRows;let I=1;w&&w.eachRow((F,B)=>{if(M)for(;I++<B-1;)x.write([]);const{values:U}=F;U.shift(),x.write(U.map(R)),I=B}),x.end()})}writeFile(m,b){const y={encoding:(b=b||{}).encoding||"utf8"},g=i.createWriteStream(m,y);return this.write(g,b)}async writeBuffer(m){const b=new u;return await this.write(b,m),b.read()}}},{"../utils/stream-buf":24,"../utils/utils":27,dayjs:391,"dayjs/plugin/customParseFormat":392,"dayjs/plugin/utc":393,"fast-csv":424,fs:216}],2:[function(t,s,l){const i=t("../utils/col-cache");class o{constructor(c,a){let u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(this.worksheet=c,a)if(typeof a=="string"){const h=i.decodeAddress(a);this.nativeCol=h.col+u,this.nativeColOff=0,this.nativeRow=h.row+u,this.nativeRowOff=0}else a.nativeCol!==void 0?(this.nativeCol=a.nativeCol||0,this.nativeColOff=a.nativeColOff||0,this.nativeRow=a.nativeRow||0,this.nativeRowOff=a.nativeRowOff||0):a.col!==void 0?(this.col=a.col+u,this.row=a.row+u):(this.nativeCol=0,this.nativeColOff=0,this.nativeRow=0,this.nativeRowOff=0);else this.nativeCol=0,this.nativeColOff=0,this.nativeRow=0,this.nativeRowOff=0}static asInstance(c){return c instanceof o||c==null?c:new o(c)}get col(){return this.nativeCol+Math.min(this.colWidth-1,this.nativeColOff)/this.colWidth}set col(c){this.nativeCol=Math.floor(c),this.nativeColOff=Math.floor((c-this.nativeCol)*this.colWidth)}get row(){return this.nativeRow+Math.min(this.rowHeight-1,this.nativeRowOff)/this.rowHeight}set row(c){this.nativeRow=Math.floor(c),this.nativeRowOff=Math.floor((c-this.nativeRow)*this.rowHeight)}get colWidth(){return this.worksheet&&this.worksheet.getColumn(this.nativeCol+1)&&this.worksheet.getColumn(this.nativeCol+1).isCustomWidth?Math.floor(1e4*this.worksheet.getColumn(this.nativeCol+1).width):64e4}get rowHeight(){return this.worksheet&&this.worksheet.getRow(this.nativeRow+1)&&this.worksheet.getRow(this.nativeRow+1).height?Math.floor(1e4*this.worksheet.getRow(this.nativeRow+1).height):18e4}get model(){return{nativeCol:this.nativeCol,nativeColOff:this.nativeColOff,nativeRow:this.nativeRow,nativeRowOff:this.nativeRowOff}}set model(c){this.nativeCol=c.nativeCol,this.nativeColOff=c.nativeColOff,this.nativeRow=c.nativeRow,this.nativeRowOff=c.nativeRowOff}}s.exports=o},{"../utils/col-cache":19}],3:[function(t,s,l){const i=t("../utils/col-cache"),o=t("../utils/under-dash"),d=t("./enums"),{slideFormula:c}=t("../utils/shared-formula"),a=t("./note");class u{constructor(m,b,y){if(!m||!b)throw new Error("A Cell needs a Row");this._row=m,this._column=b,i.validateAddress(y),this._address=y,this._value=h.create(u.Types.Null,this),this.style=this._mergeStyle(m.style,b.style,{}),this._mergeCount=0}get worksheet(){return this._row.worksheet}get workbook(){return this._row.worksheet.workbook}destroy(){delete this.style,delete this._value,delete this._row,delete this._column,delete this._address}get numFmt(){return this.style.numFmt}set numFmt(m){this.style.numFmt=m}get font(){return this.style.font}set font(m){this.style.font=m}get alignment(){return this.style.alignment}set alignment(m){this.style.alignment=m}get border(){return this.style.border}set border(m){this.style.border=m}get fill(){return this.style.fill}set fill(m){this.style.fill=m}get protection(){return this.style.protection}set protection(m){this.style.protection=m}_mergeStyle(m,b,y){const g=m&&m.numFmt||b&&b.numFmt;g&&(y.numFmt=g);const w=m&&m.font||b&&b.font;w&&(y.font=w);const x=m&&m.alignment||b&&b.alignment;x&&(y.alignment=x);const _=m&&m.border||b&&b.border;_&&(y.border=_);const j=m&&m.fill||b&&b.fill;j&&(y.fill=j);const R=m&&m.protection||b&&b.protection;return R&&(y.protection=R),y}get address(){return this._address}get row(){return this._row.number}get col(){return this._column.number}get $col$row(){return`$${this._column.letter}$${this.row}`}get type(){return this._value.type}get effectiveType(){return this._value.effectiveType}toCsvString(){return this._value.toCsvString()}addMergeRef(){this._mergeCount++}releaseMergeRef(){this._mergeCount--}get isMerged(){return this._mergeCount>0||this.type===u.Types.Merge}merge(m,b){this._value.release(),this._value=h.create(u.Types.Merge,this,m),b||(this.style=m.style)}unmerge(){this.type===u.Types.Merge&&(this._value.release(),this._value=h.create(u.Types.Null,this),this.style=this._mergeStyle(this._row.style,this._column.style,{}))}isMergedTo(m){return this._value.type===u.Types.Merge&&this._value.isMergedTo(m)}get master(){return this.type===u.Types.Merge?this._value.master:this}get isHyperlink(){return this._value.type===u.Types.Hyperlink}get hyperlink(){return this._value.hyperlink}get value(){return this._value.value}set value(m){this.type!==u.Types.Merge?(this._value.release(),this._value=h.create(h.getType(m),this,m)):this._value.master.value=m}get note(){return this._comment&&this._comment.note}set note(m){this._comment=new a(m)}get text(){return this._value.toString()}get html(){return o.escapeHtml(this.text)}toString(){return this.text}_upgradeToHyperlink(m){this.type===u.Types.String&&(this._value=h.create(u.Types.Hyperlink,this,{text:this._value.value,hyperlink:m}))}get formula(){return this._value.formula}get result(){return this._value.result}get formulaType(){return this._value.formulaType}get fullAddress(){const{worksheet:m}=this._row;return{sheetName:m.name,address:this.address,row:this.row,col:this.col}}get name(){return this.names[0]}set name(m){this.names=[m]}get names(){return this.workbook.definedNames.getNamesEx(this.fullAddress)}set names(m){const{definedNames:b}=this.workbook;b.removeAllNames(this.fullAddress),m.forEach(y=>{b.addEx(this.fullAddress,y)})}addName(m){this.workbook.definedNames.addEx(this.fullAddress,m)}removeName(m){this.workbook.definedNames.removeEx(this.fullAddress,m)}removeAllNames(){this.workbook.definedNames.removeAllNames(this.fullAddress)}get _dataValidations(){return this.worksheet.dataValidations}get dataValidation(){return this._dataValidations.find(this.address)}set dataValidation(m){this._dataValidations.add(this.address,m)}get model(){const{model:m}=this._value;return m.style=this.style,this._comment&&(m.comment=this._comment.model),m}set model(m){if(this._value.release(),this._value=h.create(m.type,this),this._value.model=m,m.comment)switch(m.comment.type){case"note":this._comment=a.fromModel(m.comment)}m.style?this.style=m.style:this.style={}}}u.Types=d.ValueType;const h={getType:f=>f==null?u.Types.Null:f instanceof String||typeof f=="string"?u.Types.String:typeof f=="number"?u.Types.Number:typeof f=="boolean"?u.Types.Boolean:f instanceof Date?u.Types.Date:f.text&&f.hyperlink?u.Types.Hyperlink:f.formula||f.sharedFormula?u.Types.Formula:f.richText?u.Types.RichText:f.sharedString?u.Types.SharedString:f.error?u.Types.Error:u.Types.JSON,types:[{t:u.Types.Null,f:class{constructor(f){this.model={address:f.address,type:u.Types.Null}}get value(){return null}set value(f){}get type(){return u.Types.Null}get effectiveType(){return u.Types.Null}get address(){return this.model.address}set address(f){this.model.address=f}toCsvString(){return""}release(){}toString(){return""}}},{t:u.Types.Number,f:class{constructor(f,m){this.model={address:f.address,type:u.Types.Number,value:m}}get value(){return this.model.value}set value(f){this.model.value=f}get type(){return u.Types.Number}get effectiveType(){return u.Types.Number}get address(){return this.model.address}set address(f){this.model.address=f}toCsvString(){return this.model.value.toString()}release(){}toString(){return this.model.value.toString()}}},{t:u.Types.String,f:class{constructor(f,m){this.model={address:f.address,type:u.Types.String,value:m}}get value(){return this.model.value}set value(f){this.model.value=f}get type(){return u.Types.String}get effectiveType(){return u.Types.String}get address(){return this.model.address}set address(f){this.model.address=f}toCsvString(){return`"${this.model.value.replace(/"/g,'""')}"`}release(){}toString(){return this.model.value}}},{t:u.Types.Date,f:class{constructor(f,m){this.model={address:f.address,type:u.Types.Date,value:m}}get value(){return this.model.value}set value(f){this.model.value=f}get type(){return u.Types.Date}get effectiveType(){return u.Types.Date}get address(){return this.model.address}set address(f){this.model.address=f}toCsvString(){return this.model.value.toISOString()}release(){}toString(){return this.model.value.toString()}}},{t:u.Types.Hyperlink,f:class{constructor(f,m){this.model={address:f.address,type:u.Types.Hyperlink,text:m?m.text:void 0,hyperlink:m?m.hyperlink:void 0},m&&m.tooltip&&(this.model.tooltip=m.tooltip)}get value(){const f={text:this.model.text,hyperlink:this.model.hyperlink};return this.model.tooltip&&(f.tooltip=this.model.tooltip),f}set value(f){this.model={text:f.text,hyperlink:f.hyperlink},f.tooltip&&(this.model.tooltip=f.tooltip)}get text(){return this.model.text}set text(f){this.model.text=f}get hyperlink(){return this.model.hyperlink}set hyperlink(f){this.model.hyperlink=f}get type(){return u.Types.Hyperlink}get effectiveType(){return u.Types.Hyperlink}get address(){return this.model.address}set address(f){this.model.address=f}toCsvString(){return this.model.hyperlink}release(){}toString(){return this.model.text}}},{t:u.Types.Formula,f:class{constructor(f,m){this.cell=f,this.model={address:f.address,type:u.Types.Formula,shareType:m?m.shareType:void 0,ref:m?m.ref:void 0,formula:m?m.formula:void 0,sharedFormula:m?m.sharedFormula:void 0,result:m?m.result:void 0}}_copyModel(f){const m={},b=y=>{const g=f[y];g&&(m[y]=g)};return b("formula"),b("result"),b("ref"),b("shareType"),b("sharedFormula"),m}get value(){return this._copyModel(this.model)}set value(f){this.model=this._copyModel(f)}validate(f){switch(h.getType(f)){case u.Types.Null:case u.Types.String:case u.Types.Number:case u.Types.Date:break;case u.Types.Hyperlink:case u.Types.Formula:default:throw new Error("Cannot process that type of result value")}}get dependencies(){return{ranges:this.formula.match(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}:[A-Z]{1,3}\d{1,4}/g),cells:this.formula.replace(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}:[A-Z]{1,3}\d{1,4}/g,"").match(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}/g)}}get formula(){return this.model.formula||this._getTranslatedFormula()}set formula(f){this.model.formula=f}get formulaType(){return this.model.formula?d.FormulaType.Master:this.model.sharedFormula?d.FormulaType.Shared:d.FormulaType.None}get result(){return this.model.result}set result(f){this.model.result=f}get type(){return u.Types.Formula}get effectiveType(){const f=this.model.result;return f==null?d.ValueType.Null:f instanceof String||typeof f=="string"?d.ValueType.String:typeof f=="number"?d.ValueType.Number:f instanceof Date?d.ValueType.Date:f.text&&f.hyperlink?d.ValueType.Hyperlink:f.formula?d.ValueType.Formula:d.ValueType.Null}get address(){return this.model.address}set address(f){this.model.address=f}_getTranslatedFormula(){if(!this._translatedFormula&&this.model.sharedFormula){const{worksheet:f}=this.cell,m=f.findCell(this.model.sharedFormula);this._translatedFormula=m&&c(m.formula,m.address,this.model.address)}return this._translatedFormula}toCsvString(){return""+(this.model.result||"")}release(){}toString(){return this.model.result?this.model.result.toString():""}}},{t:u.Types.Merge,f:class{constructor(f,m){this.model={address:f.address,type:u.Types.Merge,master:m?m.address:void 0},this._master=m,m&&m.addMergeRef()}get value(){return this._master.value}set value(f){f instanceof u?(this._master&&this._master.releaseMergeRef(),f.addMergeRef(),this._master=f):this._master.value=f}isMergedTo(f){return f===this._master}get master(){return this._master}get type(){return u.Types.Merge}get effectiveType(){return this._master.effectiveType}get address(){return this.model.address}set address(f){this.model.address=f}toCsvString(){return""}release(){this._master.releaseMergeRef()}toString(){return this.value.toString()}}},{t:u.Types.JSON,f:class{constructor(f,m){this.model={address:f.address,type:u.Types.String,value:JSON.stringify(m),rawValue:m}}get value(){return this.model.rawValue}set value(f){this.model.rawValue=f,this.model.value=JSON.stringify(f)}get type(){return u.Types.String}get effectiveType(){return u.Types.String}get address(){return this.model.address}set address(f){this.model.address=f}toCsvString(){return this.model.value}release(){}toString(){return this.model.value}}},{t:u.Types.SharedString,f:class{constructor(f,m){this.model={address:f.address,type:u.Types.SharedString,value:m}}get value(){return this.model.value}set value(f){this.model.value=f}get type(){return u.Types.SharedString}get effectiveType(){return u.Types.SharedString}get address(){return this.model.address}set address(f){this.model.address=f}toCsvString(){return this.model.value.toString()}release(){}toString(){return this.model.value.toString()}}},{t:u.Types.RichText,f:class{constructor(f,m){this.model={address:f.address,type:u.Types.String,value:m}}get value(){return this.model.value}set value(f){this.model.value=f}toString(){return this.model.value.richText.map(f=>f.text).join("")}get type(){return u.Types.RichText}get effectiveType(){return u.Types.RichText}get address(){return this.model.address}set address(f){this.model.address=f}toCsvString(){return`"${this.text.replace(/"/g,'""')}"`}release(){}}},{t:u.Types.Boolean,f:class{constructor(f,m){this.model={address:f.address,type:u.Types.Boolean,value:m}}get value(){return this.model.value}set value(f){this.model.value=f}get type(){return u.Types.Boolean}get effectiveType(){return u.Types.Boolean}get address(){return this.model.address}set address(f){this.model.address=f}toCsvString(){return this.model.value?1:0}release(){}toString(){return this.model.value.toString()}}},{t:u.Types.Error,f:class{constructor(f,m){this.model={address:f.address,type:u.Types.Error,value:m}}get value(){return this.model.value}set value(f){this.model.value=f}get type(){return u.Types.Error}get effectiveType(){return u.Types.Error}get address(){return this.model.address}set address(f){this.model.address=f}toCsvString(){return this.toString()}release(){}toString(){return this.model.value.error.toString()}}}].reduce((f,m)=>(f[m.t]=m.f,f),[]),create(f,m,b){const y=this.types[f];if(!y)throw new Error("Could not create Value of type "+f);return new y(m,b)}};s.exports=u},{"../utils/col-cache":19,"../utils/shared-formula":23,"../utils/under-dash":26,"./enums":7,"./note":9}],4:[function(t,s,l){const i=t("../utils/under-dash"),o=t("./enums"),d=t("../utils/col-cache");class c{constructor(u,h,f){this._worksheet=u,this._number=h,f!==!1&&(this.defn=f)}get number(){return this._number}get worksheet(){return this._worksheet}get letter(){return d.n2l(this._number)}get isCustomWidth(){return this.width!==void 0&&this.width!==9}get defn(){return{header:this._header,key:this.key,width:this.width,style:this.style,hidden:this.hidden,outlineLevel:this.outlineLevel}}set defn(u){u?(this.key=u.key,this.width=u.width!==void 0?u.width:9,this.outlineLevel=u.outlineLevel,u.style?this.style=u.style:this.style={},this.header=u.header,this._hidden=!!u.hidden):(delete this._header,delete this._key,delete this.width,this.style={},this.outlineLevel=0)}get headers(){return this._header&&this._header instanceof Array?this._header:[this._header]}get header(){return this._header}set header(u){u!==void 0?(this._header=u,this.headers.forEach((h,f)=>{this._worksheet.getCell(f+1,this.number).value=h})):this._header=void 0}get key(){return this._key}set key(u){(this._key&&this._worksheet.getColumnKey(this._key))===this&&this._worksheet.deleteColumnKey(this._key),this._key=u,u&&this._worksheet.setColumnKey(this._key,this)}get hidden(){return!!this._hidden}set hidden(u){this._hidden=u}get outlineLevel(){return this._outlineLevel||0}set outlineLevel(u){this._outlineLevel=u}get collapsed(){return!!(this._outlineLevel&&this._outlineLevel>=this._worksheet.properties.outlineLevelCol)}toString(){return JSON.stringify({key:this.key,width:this.width,headers:this.headers.length?this.headers:void 0})}equivalentTo(u){return this.width===u.width&&this.hidden===u.hidden&&this.outlineLevel===u.outlineLevel&&i.isEqual(this.style,u.style)}get isDefault(){if(this.isCustomWidth||this.hidden||this.outlineLevel)return!1;const u=this.style;return!u||!(u.font||u.numFmt||u.alignment||u.border||u.fill||u.protection)}get headerCount(){return this.headers.length}eachCell(u,h){const f=this.number;h||(h=u,u=null),this._worksheet.eachRow(u,(m,b)=>{h(m.getCell(f),b)})}get values(){const u=[];return this.eachCell((h,f)=>{h&&h.type!==o.ValueType.Null&&(u[f]=h.value)}),u}set values(u){if(!u)return;const h=this.number;let f=0;u.hasOwnProperty("0")&&(f=1),u.forEach((m,b)=>{this._worksheet.getCell(b+f,h).value=m})}_applyStyle(u,h){return this.style[u]=h,this.eachCell(f=>{f[u]=h}),h}get numFmt(){return this.style.numFmt}set numFmt(u){this._applyStyle("numFmt",u)}get font(){return this.style.font}set font(u){this._applyStyle("font",u)}get alignment(){return this.style.alignment}set alignment(u){this._applyStyle("alignment",u)}get protection(){return this.style.protection}set protection(u){this._applyStyle("protection",u)}get border(){return this.style.border}set border(u){this._applyStyle("border",u)}get fill(){return this.style.fill}set fill(u){this._applyStyle("fill",u)}static toModel(u){const h=[];let f=null;return u&&u.forEach((m,b)=>{m.isDefault?f&&(f=null):f&&m.equivalentTo(f)?f.max=b+1:(f={min:b+1,max:b+1,width:m.width!==void 0?m.width:9,style:m.style,isCustomWidth:m.isCustomWidth,hidden:m.hidden,outlineLevel:m.outlineLevel,collapsed:m.collapsed},h.push(f))}),h.length?h:void 0}static fromModel(u,h){const f=[];let m=1,b=0;for(h=(h=h||[]).sort(function(y,g){return y.min-g.min});b<h.length;){const y=h[b++];for(;m<y.min;)f.push(new c(u,m++));for(;m<=y.max;)f.push(new c(u,m++,y))}return f.length?f:null}}s.exports=c},{"../utils/col-cache":19,"../utils/under-dash":26,"./enums":7}],5:[function(t,s,l){s.exports=class{constructor(i){this.model=i||{}}add(i,o){return this.model[i]=o}find(i){return this.model[i]}remove(i){this.model[i]=void 0}}},{}],6:[function(t,s,l){const i=t("../utils/under-dash"),o=t("../utils/col-cache"),d=t("../utils/cell-matrix"),c=t("./range"),a=/[$](\w+)[$](\d+)(:[$](\w+)[$](\d+))?/;s.exports=class{constructor(){this.matrixMap={}}getMatrix(u){return this.matrixMap[u]||(this.matrixMap[u]=new d)}add(u,h){const f=o.decodeEx(u);this.addEx(f,h)}addEx(u,h){const f=this.getMatrix(h);if(u.top)for(let m=u.left;m<=u.right;m++)for(let b=u.top;b<=u.bottom;b++){const y={sheetName:u.sheetName,address:o.n2l(m)+b,row:b,col:m};f.addCellEx(y)}else f.addCellEx(u)}remove(u,h){const f=o.decodeEx(u);this.removeEx(f,h)}removeEx(u,h){this.getMatrix(h).removeCellEx(u)}removeAllNames(u){i.each(this.matrixMap,h=>{h.removeCellEx(u)})}forEach(u){i.each(this.matrixMap,(h,f)=>{h.forEach(m=>{u(f,m)})})}getNames(u){return this.getNamesEx(o.decodeEx(u))}getNamesEx(u){return i.map(this.matrixMap,(h,f)=>h.findCellEx(u)&&f).filter(Boolean)}_explore(u,h){h.mark=!1;const{sheetName:f}=h,m=new c(h.row,h.col,h.row,h.col,f);let b,y;function g(x,_){const j=u.findCellAt(f,x,h.col);return!(!j||!j.mark)&&(m[_]=x,j.mark=!1,!0)}for(y=h.row-1;g(y,"top");y--);for(y=h.row+1;g(y,"bottom");y++);function w(x,_){const j=[];for(y=m.top;y<=m.bottom;y++){const R=u.findCellAt(f,y,x);if(!R||!R.mark)return!1;j.push(R)}m[_]=x;for(let R=0;R<j.length;R++)j[R].mark=!1;return!0}for(b=h.col-1;w(b,"left");b--);for(b=h.col+1;w(b,"right");b++);return m}getRanges(u,h){return(h=h||this.matrixMap[u])?(h.forEach(f=>{f.mark=!0}),{name:u,ranges:h.map(f=>f.mark&&this._explore(h,f)).filter(Boolean).map(f=>f.$shortRange)}):{name:u,ranges:[]}}normaliseMatrix(u,h){u.forEachInSheet(h,(f,m,b)=>{f&&(f.row===m&&f.col===b||(f.row=m,f.col=b,f.address=o.n2l(b)+m))})}spliceRows(u,h,f,m){i.each(this.matrixMap,b=>{b.spliceRows(u,h,f,m),this.normaliseMatrix(b,u)})}spliceColumns(u,h,f,m){i.each(this.matrixMap,b=>{b.spliceColumns(u,h,f,m),this.normaliseMatrix(b,u)})}get model(){return i.map(this.matrixMap,(u,h)=>this.getRanges(h,u)).filter(u=>u.ranges.length)}set model(u){const h=this.matrixMap={};u.forEach(f=>{const m=h[f.name]=new d;f.ranges.forEach(b=>{a.test(b.split("!").pop()||"")&&m.addCell(b)})})}}},{"../utils/cell-matrix":18,"../utils/col-cache":19,"../utils/under-dash":26,"./range":10}],7:[function(t,s,l){s.exports={ValueType:{Null:0,Merge:1,Number:2,String:3,Date:4,Hyperlink:5,Formula:6,SharedString:7,RichText:8,Boolean:9,Error:10},FormulaType:{None:0,Master:1,Shared:2},RelationshipType:{None:0,OfficeDocument:1,Worksheet:2,CalcChain:3,SharedStrings:4,Styles:5,Theme:6,Hyperlink:7},DocumentType:{Xlsx:1},ReadingOrder:{LeftToRight:1,RightToLeft:2},ErrorValue:{NotApplicable:"#N/A",Ref:"#REF!",Name:"#NAME?",DivZero:"#DIV/0!",Null:"#NULL!",Value:"#VALUE!",Num:"#NUM!"}}},{}],8:[function(t,s,l){const i=t("../utils/col-cache"),o=t("./anchor");s.exports=class{constructor(d,c){this.worksheet=d,this.model=c}get model(){switch(this.type){case"background":return{type:this.type,imageId:this.imageId};case"image":return{type:this.type,imageId:this.imageId,hyperlinks:this.range.hyperlinks,range:{tl:this.range.tl.model,br:this.range.br&&this.range.br.model,ext:this.range.ext,editAs:this.range.editAs}};default:throw new Error("Invalid Image Type")}}set model(d){let{type:c,imageId:a,range:u,hyperlinks:h}=d;if(this.type=c,this.imageId=a,c==="image")if(typeof u=="string"){const f=i.decode(u);this.range={tl:new o(this.worksheet,{col:f.left,row:f.top},-1),br:new o(this.worksheet,{col:f.right,row:f.bottom},0),editAs:"oneCell"}}else this.range={tl:new o(this.worksheet,u.tl,0),br:u.br&&new o(this.worksheet,u.br,0),ext:u.ext,editAs:u.editAs,hyperlinks:h||u.hyperlinks}}}},{"../utils/col-cache":19,"./anchor":2}],9:[function(t,s,l){const i=t("../utils/under-dash");class o{constructor(c){this.note=c}get model(){let c=null;switch(typeof this.note){case"string":c={type:"note",note:{texts:[{text:this.note}]}};break;default:c={type:"note",note:this.note}}return i.deepMerge({},o.DEFAULT_CONFIGS,c)}set model(c){const{note:a}=c,{texts:u}=a;u.length===1&&Object.keys(u[0]).length===1?this.note=u[0].text:this.note=a}static fromModel(c){const a=new o;return a.model=c,a}}o.DEFAULT_CONFIGS={note:{margins:{insetmode:"auto",inset:[.13,.13,.25,.25]},protection:{locked:"True",lockText:"True"},editAs:"absolute"}},s.exports=o},{"../utils/under-dash":26}],10:[function(t,s,l){const i=t("../utils/col-cache");class o{constructor(){this.decode(arguments)}setTLBR(c,a,u,h,f){if(arguments.length<4){const m=i.decodeAddress(c),b=i.decodeAddress(a);this.model={top:Math.min(m.row,b.row),left:Math.min(m.col,b.col),bottom:Math.max(m.row,b.row),right:Math.max(m.col,b.col),sheetName:u},this.setTLBR(m.row,m.col,b.row,b.col,f)}else this.model={top:Math.min(c,u),left:Math.min(a,h),bottom:Math.max(c,u),right:Math.max(a,h),sheetName:f}}decode(c){switch(c.length){case 5:this.setTLBR(c[0],c[1],c[2],c[3],c[4]);break;case 4:this.setTLBR(c[0],c[1],c[2],c[3]);break;case 3:this.setTLBR(c[0],c[1],c[2]);break;case 2:this.setTLBR(c[0],c[1]);break;case 1:{const a=c[0];if(a instanceof o)this.model={top:a.model.top,left:a.model.left,bottom:a.model.bottom,right:a.model.right,sheetName:a.sheetName};else if(a instanceof Array)this.decode(a);else if(a.top&&a.left&&a.bottom&&a.right)this.model={top:a.top,left:a.left,bottom:a.bottom,right:a.right,sheetName:a.sheetName};else{const u=i.decodeEx(a);u.top?this.model={top:u.top,left:u.left,bottom:u.bottom,right:u.right,sheetName:u.sheetName}:this.model={top:u.row,left:u.col,bottom:u.row,right:u.col,sheetName:u.sheetName}}break}case 0:this.model={top:0,left:0,bottom:0,right:0};break;default:throw new Error("Invalid number of arguments to _getDimensions() - "+c.length)}}get top(){return this.model.top||1}set top(c){this.model.top=c}get left(){return this.model.left||1}set left(c){this.model.left=c}get bottom(){return this.model.bottom||1}set bottom(c){this.model.bottom=c}get right(){return this.model.right||1}set right(c){this.model.right=c}get sheetName(){return this.model.sheetName}set sheetName(c){this.model.sheetName=c}get _serialisedSheetName(){const{sheetName:c}=this.model;return c?/^[a-zA-Z0-9]*$/.test(c)?c+"!":`'${c}'!`:""}expand(c,a,u,h){(!this.model.top||c<this.top)&&(this.top=c),(!this.model.left||a<this.left)&&(this.left=a),(!this.model.bottom||u>this.bottom)&&(this.bottom=u),(!this.model.right||h>this.right)&&(this.right=h)}expandRow(c){if(c){const{dimensions:a,number:u}=c;a&&this.expand(u,a.min,u,a.max)}}expandToAddress(c){const a=i.decodeEx(c);this.expand(a.row,a.col,a.row,a.col)}get tl(){return i.n2l(this.left)+this.top}get $t$l(){return`$${i.n2l(this.left)}$${this.top}`}get br(){return i.n2l(this.right)+this.bottom}get $b$r(){return`$${i.n2l(this.right)}$${this.bottom}`}get range(){return`${this._serialisedSheetName+this.tl}:${this.br}`}get $range(){return`${this._serialisedSheetName+this.$t$l}:${this.$b$r}`}get shortRange(){return this.count>1?this.range:this._serialisedSheetName+this.tl}get $shortRange(){return this.count>1?this.$range:this._serialisedSheetName+this.$t$l}get count(){return(1+this.bottom-this.top)*(1+this.right-this.left)}toString(){return this.range}intersects(c){return(!c.sheetName||!this.sheetName||c.sheetName===this.sheetName)&&!(c.bottom<this.top)&&!(c.top>this.bottom)&&!(c.right<this.left)&&!(c.left>this.right)}contains(c){const a=i.decodeEx(c);return this.containsEx(a)}containsEx(c){return(!c.sheetName||!this.sheetName||c.sheetName===this.sheetName)&&c.row>=this.top&&c.row<=this.bottom&&c.col>=this.left&&c.col<=this.right}forEachAddress(c){for(let a=this.left;a<=this.right;a++)for(let u=this.top;u<=this.bottom;u++)c(i.encodeAddress(u,a),u,a)}}s.exports=o},{"../utils/col-cache":19}],11:[function(t,s,l){const i=t("../utils/under-dash"),o=t("./enums"),d=t("../utils/col-cache"),c=t("./cell");s.exports=class{constructor(a,u){this._worksheet=a,this._number=u,this._cells=[],this.style={},this.outlineLevel=0}get number(){return this._number}get worksheet(){return this._worksheet}commit(){this._worksheet._commitRow(this)}destroy(){delete this._worksheet,delete this._cells,delete this.style}findCell(a){return this._cells[a-1]}getCellEx(a){let u=this._cells[a.col-1];if(!u){const h=this._worksheet.getColumn(a.col);u=new c(this,h,a.address),this._cells[a.col-1]=u}return u}getCell(a){if(typeof a=="string"){const u=this._worksheet.getColumnKey(a);a=u?u.number:d.l2n(a)}return this._cells[a-1]||this.getCellEx({address:d.encodeAddress(this._number,a),row:this._number,col:a})}splice(a,u){const h=a+u;for(var f=arguments.length,m=new Array(f>2?f-2:0),b=2;b<f;b++)m[b-2]=arguments[b];const y=m.length-u,g=this._cells.length;let w,x,_;if(y<0)for(w=a+m.length;w<=g;w++)_=this._cells[w-1],x=this._cells[w-y-1],x?(_=this.getCell(w),_.value=x.value,_.style=x.style,_._comment=x._comment):_&&(_.value=null,_.style={},_._comment=void 0);else if(y>0)for(w=g;w>=h;w--)x=this._cells[w-1],x?(_=this.getCell(w+y),_.value=x.value,_.style=x.style,_._comment=x._comment):this._cells[w+y-1]=void 0;for(w=0;w<m.length;w++)_=this.getCell(a+w),_.value=m[w],_.style={},_._comment=void 0}eachCell(a,u){if(u||(u=a,a=null),a&&a.includeEmpty){const h=this._cells.length;for(let f=1;f<=h;f++)u(this.getCell(f),f)}else this._cells.forEach((h,f)=>{h&&h.type!==o.ValueType.Null&&u(h,f+1)})}addPageBreak(a,u){const h=this._worksheet,f=Math.max(0,a-1)||0,m=Math.max(0,u-1)||16838,b={id:this._number,max:m,man:1};f&&(b.min=f),h.rowBreaks.push(b)}get values(){const a=[];return this._cells.forEach(u=>{u&&u.type!==o.ValueType.Null&&(a[u.col]=u.value)}),a}set values(a){if(this._cells=[],a)if(a instanceof Array){let u=0;a.hasOwnProperty("0")&&(u=1),a.forEach((h,f)=>{h!==void 0&&(this.getCellEx({address:d.encodeAddress(this._number,f+u),row:this._number,col:f+u}).value=h)})}else this._worksheet.eachColumnKey((u,h)=>{a[h]!==void 0&&(this.getCellEx({address:d.encodeAddress(this._number,u.number),row:this._number,col:u.number}).value=a[h])})}get hasValues(){return i.some(this._cells,a=>a&&a.type!==o.ValueType.Null)}get cellCount(){return this._cells.length}get actualCellCount(){let a=0;return this.eachCell(()=>{a++}),a}get dimensions(){let a=0,u=0;return this._cells.forEach(h=>{h&&h.type!==o.ValueType.Null&&((!a||a>h.col)&&(a=h.col),u<h.col&&(u=h.col))}),a>0?{min:a,max:u}:null}_applyStyle(a,u){return this.style[a]=u,this._cells.forEach(h=>{h&&(h[a]=u)}),u}get numFmt(){return this.style.numFmt}set numFmt(a){this._applyStyle("numFmt",a)}get font(){return this.style.font}set font(a){this._applyStyle("font",a)}get alignment(){return this.style.alignment}set alignment(a){this._applyStyle("alignment",a)}get protection(){return this.style.protection}set protection(a){this._applyStyle("protection",a)}get border(){return this.style.border}set border(a){this._applyStyle("border",a)}get fill(){return this.style.fill}set fill(a){this._applyStyle("fill",a)}get hidden(){return!!this._hidden}set hidden(a){this._hidden=a}get outlineLevel(){return this._outlineLevel||0}set outlineLevel(a){this._outlineLevel=a}get collapsed(){return!!(this._outlineLevel&&this._outlineLevel>=this._worksheet.properties.outlineLevelRow)}get model(){const a=[];let u=0,h=0;return this._cells.forEach(f=>{if(f){const m=f.model;m&&((!u||u>f.col)&&(u=f.col),h<f.col&&(h=f.col),a.push(m))}}),this.height||a.length?{cells:a,number:this.number,min:u,max:h,height:this.height,style:this.style,hidden:this.hidden,outlineLevel:this.outlineLevel,collapsed:this.collapsed}:null}set model(a){if(a.number!==this._number)throw new Error("Invalid row number in model");let u;this._cells=[],a.cells.forEach(h=>{switch(h.type){case c.Types.Merge:break;default:{let f;if(h.address)f=d.decodeAddress(h.address);else if(u){const{row:m}=u,b=u.col+1;f={row:m,col:b,address:d.encodeAddress(m,b),$col$row:`$${d.n2l(b)}$${m}`}}u=f,this.getCellEx(f).model=h;break}}}),a.height?this.height=a.height:delete this.height,this.hidden=a.hidden,this.outlineLevel=a.outlineLevel||0,this.style=a.style&&JSON.parse(JSON.stringify(a.style))||{}}}},{"../utils/col-cache":19,"../utils/under-dash":26,"./cell":3,"./enums":7}],12:[function(t,s,l){const i=t("../utils/col-cache");class o{constructor(c,a,u){this.table=c,this.column=a,this.index=u}_set(c,a){this.table.cacheState(),this.column[c]=a}get name(){return this.column.name}set name(c){this._set("name",c)}get filterButton(){return this.column.filterButton}set filterButton(c){this.column.filterButton=c}get style(){return this.column.style}set style(c){this.column.style=c}get totalsRowLabel(){return this.column.totalsRowLabel}set totalsRowLabel(c){this._set("totalsRowLabel",c)}get totalsRowFunction(){return this.column.totalsRowFunction}set totalsRowFunction(c){this._set("totalsRowFunction",c)}get totalsRowResult(){return this.column.totalsRowResult}set totalsRowResult(c){this._set("totalsRowResult",c)}get totalsRowFormula(){return this.column.totalsRowFormula}set totalsRowFormula(c){this._set("totalsRowFormula",c)}}s.exports=class{constructor(d,c){this.worksheet=d,c&&(this.table=c,this.validate(),this.store())}getFormula(d){switch(d.totalsRowFunction){case"none":return null;case"average":return`SUBTOTAL(101,${this.table.name}[${d.name}])`;case"countNums":return`SUBTOTAL(102,${this.table.name}[${d.name}])`;case"count":return`SUBTOTAL(103,${this.table.name}[${d.name}])`;case"max":return`SUBTOTAL(104,${this.table.name}[${d.name}])`;case"min":return`SUBTOTAL(105,${this.table.name}[${d.name}])`;case"stdDev":return`SUBTOTAL(106,${this.table.name}[${d.name}])`;case"var":return`SUBTOTAL(107,${this.table.name}[${d.name}])`;case"sum":return`SUBTOTAL(109,${this.table.name}[${d.name}])`;case"custom":return d.totalsRowFormula;default:throw new Error("Invalid Totals Row Function: "+d.totalsRowFunction)}}get width(){return this.table.columns.length}get height(){return this.table.rows.length}get filterHeight(){return this.height+(this.table.headerRow?1:0)}get tableHeight(){return this.filterHeight+(this.table.totalsRow?1:0)}validate(){const{table:d}=this,c=(y,g,w)=>{y[g]===void 0&&(y[g]=w)};c(d,"headerRow",!0),c(d,"totalsRow",!1),c(d,"style",{}),c(d.style,"theme","TableStyleMedium2"),c(d.style,"showFirstColumn",!1),c(d.style,"showLastColumn",!1),c(d.style,"showRowStripes",!1),c(d.style,"showColumnStripes",!1);const a=(y,g)=>{if(!y)throw new Error(g)};a(d.ref,"Table must have ref"),a(d.columns,"Table must have column definitions"),a(d.rows,"Table must have row definitions"),d.tl=i.decodeAddress(d.ref);const{row:u,col:h}=d.tl;a(u>0,"Table must be on valid row"),a(h>0,"Table must be on valid col");const{width:f,filterHeight:m,tableHeight:b}=this;d.autoFilterRef=i.encode(u,h,u+m-1,h+f-1),d.tableRef=i.encode(u,h,u+b-1,h+f-1),d.columns.forEach((y,g)=>{a(y.name,`Column ${g} must have a name`),g===0?c(y,"totalsRowLabel","Total"):(c(y,"totalsRowFunction","none"),y.totalsRowFormula=this.getFormula(y))})}store(){const d=(m,b)=>{b&&Object.keys(b).forEach(y=>{m[y]=b[y]})},{worksheet:c,table:a}=this,{row:u,col:h}=a.tl;let f=0;if(a.headerRow){const m=c.getRow(u+f++);a.columns.forEach((b,y)=>{const{style:g,name:w}=b,x=m.getCell(h+y);x.value=w,d(x,g)})}if(a.rows.forEach(m=>{const b=c.getRow(u+f++);m.forEach((y,g)=>{const w=b.getCell(h+g);w.value=y,d(w,a.columns[g].style)})}),a.totalsRow){const m=c.getRow(u+f++);a.columns.forEach((b,y)=>{const g=m.getCell(h+y);if(y===0)g.value=b.totalsRowLabel;else{const w=this.getFormula(b);g.value=w?{formula:b.totalsRowFormula,result:b.totalsRowResult}:null}d(g,b.style)})}}load(d){const{table:c}=this,{row:a,col:u}=c.tl;let h=0;if(c.headerRow){const f=d.getRow(a+h++);c.columns.forEach((m,b)=>{f.getCell(u+b).value=m.name})}if(c.rows.forEach(f=>{const m=d.getRow(a+h++);f.forEach((b,y)=>{m.getCell(u+y).value=b})}),c.totalsRow){const f=d.getRow(a+h++);c.columns.forEach((m,b)=>{const y=f.getCell(u+b);b===0?y.value=m.totalsRowLabel:this.getFormula(m)&&(y.value={formula:m.totalsRowFormula,result:m.totalsRowResult})})}}get model(){return this.table}set model(d){this.table=d}cacheState(){this._cache||(this._cache={ref:this.ref,width:this.width,tableHeight:this.tableHeight})}commit(){if(!this._cache)return;this.validate();const d=i.decodeAddress(this._cache.ref);if(this.ref!==this._cache.ref)for(let c=0;c<this._cache.tableHeight;c++){const a=this.worksheet.getRow(d.row+c);for(let u=0;u<this._cache.width;u++)a.getCell(d.col+u).value=null}else{for(let c=this.tableHeight;c<this._cache.tableHeight;c++){const a=this.worksheet.getRow(d.row+c);for(let u=0;u<this._cache.width;u++)a.getCell(d.col+u).value=null}for(let c=0;c<this.tableHeight;c++){const a=this.worksheet.getRow(d.row+c);for(let u=this.width;u<this._cache.width;u++)a.getCell(d.col+u).value=null}}this.store()}addRow(d,c){this.cacheState(),c===void 0?this.table.rows.push(d):this.table.rows.splice(c,0,d)}removeRows(d){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.cacheState(),this.table.rows.splice(d,c)}getColumn(d){const c=this.table.columns[d];return new o(this,c,d)}addColumn(d,c,a){this.cacheState(),a===void 0?(this.table.columns.push(d),this.table.rows.forEach((u,h)=>{u.push(c[h])})):(this.table.columns.splice(a,0,d),this.table.rows.forEach((u,h)=>{u.splice(a,0,c[h])}))}removeColumns(d){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.cacheState(),this.table.columns.splice(d,c),this.table.rows.forEach(a=>{a.splice(d,c)})}_assign(d,c,a){this.cacheState(),d[c]=a}get ref(){return this.table.ref}set ref(d){this._assign(this.table,"ref",d)}get name(){return this.table.name}set name(d){this.table.name=d}get displayName(){return this.table.displyName||this.table.name}set displayNamename(d){this.table.displayName=d}get headerRow(){return this.table.headerRow}set headerRow(d){this._assign(this.table,"headerRow",d)}get totalsRow(){return this.table.totalsRow}set totalsRow(d){this._assign(this.table,"totalsRow",d)}get theme(){return this.table.style.name}set theme(d){this.table.style.name=d}get showFirstColumn(){return this.table.style.showFirstColumn}set showFirstColumn(d){this.table.style.showFirstColumn=d}get showLastColumn(){return this.table.style.showLastColumn}set showLastColumn(d){this.table.style.showLastColumn=d}get showRowStripes(){return this.table.style.showRowStripes}set showRowStripes(d){this.table.style.showRowStripes=d}get showColumnStripes(){return this.table.style.showColumnStripes}set showColumnStripes(d){this.table.style.showColumnStripes=d}}},{"../utils/col-cache":19}],13:[function(t,s,l){const i=t("./worksheet"),o=t("./defined-names"),d=t("../xlsx/xlsx"),c=t("../csv/csv");s.exports=class{constructor(){this.category="",this.company="",this.created=new Date,this.description="",this.keywords="",this.manager="",this.modified=this.created,this.properties={},this.calcProperties={},this._worksheets=[],this.subject="",this.title="",this.views=[],this.media=[],this._definedNames=new o}get xlsx(){return this._xlsx||(this._xlsx=new d(this)),this._xlsx}get csv(){return this._csv||(this._csv=new c(this)),this._csv}get nextId(){for(let a=1;a<this._worksheets.length;a++)if(!this._worksheets[a])return a;return this._worksheets.length||1}addWorksheet(a,u){const h=this.nextId;u&&(typeof u=="string"?(console.trace('tabColor argument is now deprecated. Please use workbook.addWorksheet(name, {properties: { tabColor: { argb: "rbg value" } }'),u={properties:{tabColor:{argb:u}}}):(u.argb||u.theme||u.indexed)&&(console.trace("tabColor argument is now deprecated. Please use workbook.addWorksheet(name, {properties: { tabColor: { ... } }"),u={properties:{tabColor:u}}));const f=this._worksheets.reduce((y,g)=>(g&&g.orderNo)>y?g.orderNo:y,0),m=Object.assign({},u,{id:h,name:a,orderNo:f+1,workbook:this}),b=new i(m);return this._worksheets[h]=b,b}removeWorksheetEx(a){delete this._worksheets[a.id]}removeWorksheet(a){const u=this.getWorksheet(a);u&&u.destroy()}getWorksheet(a){return a===void 0?this._worksheets.find(Boolean):typeof a=="number"?this._worksheets[a]:typeof a=="string"?this._worksheets.find(u=>u&&u.name===a):void 0}get worksheets(){return this._worksheets.slice(1).sort((a,u)=>a.orderNo-u.orderNo).filter(Boolean)}eachSheet(a){this.worksheets.forEach(u=>{a(u,u.id)})}get definedNames(){return this._definedNames}clearThemes(){this._themes=void 0}addImage(a){const u=this.media.length;return this.media.push(Object.assign({},a,{type:"image"})),u}getImage(a){return this.media[a]}get model(){return{creator:this.creator||"Unknown",lastModifiedBy:this.lastModifiedBy||"Unknown",lastPrinted:this.lastPrinted,created:this.created,modified:this.modified,properties:this.properties,worksheets:this.worksheets.map(a=>a.model),sheets:this.worksheets.map(a=>a.model).filter(Boolean),definedNames:this._definedNames.model,views:this.views,company:this.company,manager:this.manager,title:this.title,subject:this.subject,keywords:this.keywords,category:this.category,description:this.description,language:this.language,revision:this.revision,contentStatus:this.contentStatus,themes:this._themes,media:this.media,calcProperties:this.calcProperties}}set model(a){this.creator=a.creator,this.lastModifiedBy=a.lastModifiedBy,this.lastPrinted=a.lastPrinted,this.created=a.created,this.modified=a.modified,this.company=a.company,this.manager=a.manager,this.title=a.title,this.subject=a.subject,this.keywords=a.keywords,this.category=a.category,this.description=a.description,this.language=a.language,this.revision=a.revision,this.contentStatus=a.contentStatus,this.properties=a.properties,this.calcProperties=a.calcProperties,this._worksheets=[],a.worksheets.forEach(u=>{const{id:h,name:f,state:m}=u,b=a.sheets&&a.sheets.findIndex(y=>y.id===h);(this._worksheets[h]=new i({id:h,name:f,orderNo:b,state:m,workbook:this})).model=u}),this._definedNames.model=a.definedNames,this.views=a.views,this._themes=a.themes,this.media=a.media||[]}}},{"../csv/csv":1,"../xlsx/xlsx":144,"./defined-names":6,"./worksheet":14}],14:[function(t,s,l){const i=t("../utils/under-dash"),o=t("../utils/col-cache"),d=t("./range"),c=t("./row"),a=t("./column"),u=t("./enums"),h=t("./image"),f=t("./table"),m=t("./data-validations"),b=t("../utils/encryptor"),{copyStyle:y}=t("../utils/copy-style");s.exports=class{constructor(g){g=g||{},this._workbook=g.workbook,this.id=g.id,this.orderNo=g.orderNo,this.name=g.name,this.state=g.state||"visible",this._rows=[],this._columns=null,this._keys={},this._merges={},this.rowBreaks=[],this.properties=Object.assign({},{defaultRowHeight:15,dyDescent:55,outlineLevelCol:0,outlineLevelRow:0},g.properties),this.pageSetup=Object.assign({},{margins:{left:.7,right:.7,top:.75,bottom:.75,header:.3,footer:.3},orientation:"portrait",horizontalDpi:4294967295,verticalDpi:4294967295,fitToPage:!(!g.pageSetup||!g.pageSetup.fitToWidth&&!g.pageSetup.fitToHeight||g.pageSetup.scale),pageOrder:"downThenOver",blackAndWhite:!1,draft:!1,cellComments:"None",errors:"displayed",scale:100,fitToWidth:1,fitToHeight:1,paperSize:void 0,showRowColHeaders:!1,showGridLines:!1,firstPageNumber:void 0,horizontalCentered:!1,verticalCentered:!1,rowBreaks:null,colBreaks:null},g.pageSetup),this.headerFooter=Object.assign({},{differentFirst:!1,differentOddEven:!1,oddHeader:null,oddFooter:null,evenHeader:null,evenFooter:null,firstHeader:null,firstFooter:null},g.headerFooter),this.dataValidations=new m,this.views=g.views||[],this.autoFilter=g.autoFilter||null,this._media=[],this.sheetProtection=null,this.tables={},this.conditionalFormattings=[]}get name(){return this._name}set name(g){if(g===void 0&&(g="sheet"+this.id),this._name!==g){if(typeof g!="string")throw new Error("The name has to be a string.");if(g==="")throw new Error("The name can't be empty.");if(g==="History")throw new Error('The name "History" is protected. Please use a different name.');if(/[*?:/\\[\]]/.test(g))throw new Error(`Worksheet name ${g} cannot include any of the following characters: * ? : \\ / [ ]`);if(/(^')|('$)/.test(g))throw new Error("The first or last character of worksheet name cannot be a single quotation mark: "+g);if(g&&g.length>31&&(console.warn(`Worksheet name ${g} exceeds 31 chars. This will be truncated`),g=g.substring(0,31)),this._workbook._worksheets.find(w=>w&&w.name.toLowerCase()===g.toLowerCase()))throw new Error("Worksheet name already exists: "+g);this._name=g}}get workbook(){return this._workbook}destroy(){this._workbook.removeWorksheetEx(this)}get dimensions(){const g=new d;return this._rows.forEach(w=>{if(w){const x=w.dimensions;x&&g.expand(w.number,x.min,w.number,x.max)}}),g}get columns(){return this._columns}set columns(g){this._headerRowCount=g.reduce((_,j)=>{const R=(j.header?1:j.headers&&j.headers.length)||0;return Math.max(_,R)},0);let w=1;const x=this._columns=[];g.forEach(_=>{const j=new a(this,w++,!1);x.push(j),j.defn=_})}getColumnKey(g){return this._keys[g]}setColumnKey(g,w){this._keys[g]=w}deleteColumnKey(g){delete this._keys[g]}eachColumnKey(g){i.each(this._keys,g)}getColumn(g){if(typeof g=="string"){const w=this._keys[g];if(w)return w;g=o.l2n(g)}if(this._columns||(this._columns=[]),g>this._columns.length){let w=this._columns.length+1;for(;w<=g;)this._columns.push(new a(this,w++))}return this._columns[g-1]}spliceColumns(g,w){const x=this._rows.length;for(var _=arguments.length,j=new Array(_>2?_-2:0),R=2;R<_;R++)j[R-2]=arguments[R];if(j.length>0)for(let B=0;B<x;B++){const U=[g,w];j.forEach(K=>{U.push(K[B]||null)});const Q=this.getRow(B+1);Q.splice.apply(Q,U)}else this._rows.forEach(B=>{B&&B.splice(g,w)});const M=j.length-w,I=g+w,F=this._columns.length;if(M<0)for(let B=g+j.length;B<=F;B++)this.getColumn(B).defn=this.getColumn(B-M).defn;else if(M>0)for(let B=F;B>=I;B--)this.getColumn(B+M).defn=this.getColumn(B).defn;for(let B=g;B<g+j.length;B++)this.getColumn(B).defn=null;this.workbook.definedNames.spliceColumns(this.name,g,w,j.length)}get lastColumn(){return this.getColumn(this.columnCount)}get columnCount(){let g=0;return this.eachRow(w=>{g=Math.max(g,w.cellCount)}),g}get actualColumnCount(){const g=[];let w=0;return this.eachRow(x=>{x.eachCell(_=>{let{col:j}=_;g[j]||(g[j]=!0,w++)})}),w}_commitRow(){}get _lastRowNumber(){const g=this._rows;let w=g.length;for(;w>0&&g[w-1]===void 0;)w--;return w}get _nextRow(){return this._lastRowNumber+1}get lastRow(){if(this._rows.length)return this._rows[this._rows.length-1]}findRow(g){return this._rows[g-1]}findRows(g,w){return this._rows.slice(g-1,g-1+w)}get rowCount(){return this._lastRowNumber}get actualRowCount(){let g=0;return this.eachRow(()=>{g++}),g}getRow(g){let w=this._rows[g-1];return w||(w=this._rows[g-1]=new c(this,g)),w}getRows(g,w){if(w<1)return;const x=[];for(let _=g;_<g+w;_++)x.push(this.getRow(_));return x}addRow(g){let w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"n";const x=this._nextRow,_=this.getRow(x);return _.values=g,this._setStyleOption(x,w[0]==="i"?w:"n"),_}addRows(g){let w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"n";const x=[];return g.forEach(_=>{x.push(this.addRow(_,w))}),x}insertRow(g,w){let x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"n";return this.spliceRows(g,0,w),this._setStyleOption(g,x),this.getRow(g)}insertRows(g,w){let x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"n";if(this.spliceRows(g,0,...w),x!=="n")for(let _=0;_<w.length;_++)x[0]==="o"&&this.findRow(w.length+g+_)!==void 0?this._copyStyle(w.length+g+_,g+_,x[1]==="+"):x[0]==="i"&&this.findRow(g-1)!==void 0&&this._copyStyle(g-1,g+_,x[1]==="+");return this.getRows(g,w.length)}_setStyleOption(g){let w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"n";w[0]==="o"&&this.findRow(g+1)!==void 0?this._copyStyle(g+1,g,w[1]==="+"):w[0]==="i"&&this.findRow(g-1)!==void 0&&this._copyStyle(g-1,g,w[1]==="+")}_copyStyle(g,w){let x=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const _=this.getRow(g),j=this.getRow(w);j.style=y(_.style),_.eachCell({includeEmpty:x},(R,M)=>{j.getCell(M).style=y(R.style)}),j.height=_.height}duplicateRow(g,w){let x=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const _=this._rows[g-1],j=new Array(w).fill(_.values);this.spliceRows(g+1,x?0:w,...j);for(let R=0;R<w;R++){const M=this._rows[g+R];M.style=_.style,M.height=_.height,_.eachCell({includeEmpty:!0},(I,F)=>{M.getCell(F).style=I.style})}}spliceRows(g,w){const x=g+w;for(var _=arguments.length,j=new Array(_>2?_-2:0),R=2;R<_;R++)j[R-2]=arguments[R];const M=j.length,I=M-w,F=this._rows.length;let B,U;if(I<0)for(g===F&&(this._rows[F-1]=void 0),B=x;B<=F;B++)if(U=this._rows[B-1],U){const Q=this.getRow(B+I);Q.values=U.values,Q.style=U.style,Q.height=U.height,U.eachCell({includeEmpty:!0},(K,T)=>{Q.getCell(T).style=K.style}),this._rows[B-1]=void 0}else this._rows[B+I-1]=void 0;else if(I>0)for(B=F;B>=x;B--)if(U=this._rows[B-1],U){const Q=this.getRow(B+I);Q.values=U.values,Q.style=U.style,Q.height=U.height,U.eachCell({includeEmpty:!0},(K,T)=>{if(Q.getCell(T).style=K.style,K._value.constructor.name==="MergeValue"){const P=this.getRow(K._row._number+M).getCell(T),A=K._value._master,N=this.getRow(A._row._number+M).getCell(A._column._number);P.merge(N)}})}else this._rows[B+I-1]=void 0;for(B=0;B<M;B++){const Q=this.getRow(g+B);Q.style={},Q.values=j[B]}this.workbook.definedNames.spliceRows(this.name,g,w,M)}eachRow(g,w){if(w||(w=g,g=void 0),g&&g.includeEmpty){const x=this._rows.length;for(let _=1;_<=x;_++)w(this.getRow(_),_)}else this._rows.forEach(x=>{x&&x.hasValues&&w(x,x.number)})}getSheetValues(){const g=[];return this._rows.forEach(w=>{w&&(g[w.number]=w.values)}),g}findCell(g,w){const x=o.getAddress(g,w),_=this._rows[x.row-1];return _?_.findCell(x.col):void 0}getCell(g,w){const x=o.getAddress(g,w);return this.getRow(x.row).getCellEx(x)}mergeCells(){for(var g=arguments.length,w=new Array(g),x=0;x<g;x++)w[x]=arguments[x];const _=new d(w);this._mergeCellsInternal(_)}mergeCellsWithoutStyle(){for(var g=arguments.length,w=new Array(g),x=0;x<g;x++)w[x]=arguments[x];const _=new d(w);this._mergeCellsInternal(_,!0)}_mergeCellsInternal(g,w){i.each(this._merges,_=>{if(_.intersects(g))throw new Error("Cannot merge already merged cells")});const x=this.getCell(g.top,g.left);for(let _=g.top;_<=g.bottom;_++)for(let j=g.left;j<=g.right;j++)(_>g.top||j>g.left)&&this.getCell(_,j).merge(x,w);this._merges[x.address]=g}_unMergeMaster(g){const w=this._merges[g.address];if(w){for(let x=w.top;x<=w.bottom;x++)for(let _=w.left;_<=w.right;_++)this.getCell(x,_).unmerge();delete this._merges[g.address]}}get hasMerges(){return i.some(this._merges,Boolean)}unMergeCells(){for(var g=arguments.length,w=new Array(g),x=0;x<g;x++)w[x]=arguments[x];const _=new d(w);for(let j=_.top;j<=_.bottom;j++)for(let R=_.left;R<=_.right;R++){const M=this.findCell(j,R);M&&(M.type===u.ValueType.Merge?this._unMergeMaster(M.master):this._merges[M.address]&&this._unMergeMaster(M))}}fillFormula(g,w,x){let _=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"shared";const j=o.decode(g),{top:R,left:M,bottom:I,right:F}=j,B=F-M+1,U=o.encodeAddress(R,M),Q=_==="shared";let K;K=typeof x=="function"?x:Array.isArray(x)?Array.isArray(x[0])?(P,A)=>x[P-R][A-M]:(P,A)=>x[(P-R)*B+(A-M)]:()=>{};let T=!0;for(let P=R;P<=I;P++)for(let A=M;A<=F;A++)T?(this.getCell(P,A).value={shareType:_,formula:w,ref:g,result:K(P,A)},T=!1):this.getCell(P,A).value=Q?{sharedFormula:U,result:K(P,A)}:K(P,A)}addImage(g,w){const x={type:"image",imageId:g,range:w};this._media.push(new h(this,x))}getImages(){return this._media.filter(g=>g.type==="image")}addBackgroundImage(g){const w={type:"background",imageId:g};this._media.push(new h(this,w))}getBackgroundImageId(){const g=this._media.find(w=>w.type==="background");return g&&g.imageId}protect(g,w){return new Promise(x=>{this.sheetProtection={sheet:!0},w&&"spinCount"in w&&(w.spinCount=Number.isFinite(w.spinCount)?Math.round(Math.max(0,w.spinCount)):1e5),g&&(this.sheetProtection.algorithmName="SHA-512",this.sheetProtection.saltValue=b.randomBytes(16).toString("base64"),this.sheetProtection.spinCount=w&&"spinCount"in w?w.spinCount:1e5,this.sheetProtection.hashValue=b.convertPasswordToHash(g,"SHA512",this.sheetProtection.saltValue,this.sheetProtection.spinCount)),w&&(this.sheetProtection=Object.assign(this.sheetProtection,w),!g&&"spinCount"in w&&delete this.sheetProtection.spinCount),x()})}unprotect(){this.sheetProtection=null}addTable(g){const w=new f(this,g);return this.tables[g.name]=w,w}getTable(g){return this.tables[g]}removeTable(g){delete this.tables[g]}getTables(){return Object.values(this.tables)}addConditionalFormatting(g){this.conditionalFormattings.push(g)}removeConditionalFormatting(g){typeof g=="number"?this.conditionalFormattings.splice(g,1):this.conditionalFormattings=g instanceof Function?this.conditionalFormattings.filter(g):[]}get tabColor(){return console.trace("worksheet.tabColor property is now deprecated. Please use worksheet.properties.tabColor"),this.properties.tabColor}set tabColor(g){console.trace("worksheet.tabColor property is now deprecated. Please use worksheet.properties.tabColor"),this.properties.tabColor=g}get model(){const g={id:this.id,name:this.name,dataValidations:this.dataValidations.model,properties:this.properties,state:this.state,pageSetup:this.pageSetup,headerFooter:this.headerFooter,rowBreaks:this.rowBreaks,views:this.views,autoFilter:this.autoFilter,media:this._media.map(_=>_.model),sheetProtection:this.sheetProtection,tables:Object.values(this.tables).map(_=>_.model),conditionalFormattings:this.conditionalFormattings};g.cols=a.toModel(this.columns);const w=g.rows=[],x=g.dimensions=new d;return this._rows.forEach(_=>{const j=_&&_.model;j&&(x.expand(j.number,j.min,j.number,j.max),w.push(j))}),g.merges=[],i.each(this._merges,_=>{g.merges.push(_.range)}),g}_parseRows(g){this._rows=[],g.rows.forEach(w=>{const x=new c(this,w.number);this._rows[x.number-1]=x,x.model=w})}_parseMergeCells(g){i.each(g.mergeCells,w=>{this.mergeCellsWithoutStyle(w)})}set model(g){this.name=g.name,this._columns=a.fromModel(this,g.cols),this._parseRows(g),this._parseMergeCells(g),this.dataValidations=new m(g.dataValidations),this.properties=g.properties,this.pageSetup=g.pageSetup,this.headerFooter=g.headerFooter,this.views=g.views,this.autoFilter=g.autoFilter,this._media=g.media.map(w=>new h(this,w)),this.sheetProtection=g.sheetProtection,this.tables=g.tables.reduce((w,x)=>{const _=new f;return _.model=x,w[x.name]=_,w},{}),this.conditionalFormattings=g.conditionalFormattings}}},{"../utils/col-cache":19,"../utils/copy-style":20,"../utils/encryptor":21,"../utils/under-dash":26,"./column":4,"./data-validations":5,"./enums":7,"./image":8,"./range":10,"./row":11,"./table":12}],15:[function(t,s,l){t("core-js/modules/es.promise"),t("core-js/modules/es.promise.finally"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.values"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.async-iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.find-index"),t("core-js/modules/es.array.find"),t("core-js/modules/es.string.from-code-point"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.number.is-nan"),t("regenerator-runtime/runtime");const i={Workbook:t("./doc/workbook")},o=t("./doc/enums");Object.keys(o).forEach(d=>{i[d]=o[d]}),s.exports=i},{"./doc/enums":7,"./doc/workbook":13,"core-js/modules/es.array.find":359,"core-js/modules/es.array.find-index":358,"core-js/modules/es.array.includes":360,"core-js/modules/es.array.iterator":361,"core-js/modules/es.number.is-nan":363,"core-js/modules/es.object.assign":364,"core-js/modules/es.object.keys":366,"core-js/modules/es.object.values":367,"core-js/modules/es.promise":372,"core-js/modules/es.promise.finally":371,"core-js/modules/es.string.from-code-point":376,"core-js/modules/es.string.includes":377,"core-js/modules/es.symbol":381,"core-js/modules/es.symbol.async-iterator":378,"regenerator-runtime/runtime":492}],16:[function(t,s,l){const i=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");l.bufferToString=function(o){return typeof o=="string"?o:i?i.decode(o):o.toString()}},{}],17:[function(t,s,l){const i=typeof TextEncoder>"u"?null:new TextEncoder("utf-8"),{Buffer:o}=t("buffer");l.stringToBuffer=function(d){return typeof d!="string"?d:i?o.from(i.encode(d).buffer):o.from(d)}},{buffer:220}],18:[function(t,s,l){const i=t("./under-dash"),o=t("./col-cache");s.exports=class{constructor(d){this.template=d,this.sheets={}}addCell(d){this.addCellEx(o.decodeEx(d))}getCell(d){return this.findCellEx(o.decodeEx(d),!0)}findCell(d){return this.findCellEx(o.decodeEx(d),!1)}findCellAt(d,c,a){const u=this.sheets[d],h=u&&u[c];return h&&h[a]}addCellEx(d){if(d.top)for(let c=d.top;c<=d.bottom;c++)for(let a=d.left;a<=d.right;a++)this.getCellAt(d.sheetName,c,a);else this.findCellEx(d,!0)}getCellEx(d){return this.findCellEx(d,!0)}findCellEx(d,c){const a=this.findSheet(d,c),u=this.findSheetRow(a,d,c);return this.findRowCell(u,d,c)}getCellAt(d,c,a){const u=this.sheets[d]||(this.sheets[d]=[]),h=u[c]||(u[c]=[]);return h[a]||(h[a]={sheetName:d,address:o.n2l(a)+c,row:c,col:a})}removeCellEx(d){const c=this.findSheet(d);if(!c)return;const a=this.findSheetRow(c,d);a&&delete a[d.col]}forEachInSheet(d,c){const a=this.sheets[d];a&&a.forEach((u,h)=>{u&&u.forEach((f,m)=>{f&&c(f,h,m)})})}forEach(d){i.each(this.sheets,(c,a)=>{this.forEachInSheet(a,d)})}map(d){const c=[];return this.forEach(a=>{c.push(d(a))}),c}findSheet(d,c){const a=d.sheetName;return this.sheets[a]?this.sheets[a]:c?this.sheets[a]=[]:void 0}findSheetRow(d,c,a){const{row:u}=c;return d&&d[u]?d[u]:a?d[u]=[]:void 0}findRowCell(d,c,a){const{col:u}=c;return d&&d[u]?d[u]:a?d[u]=this.template?Object.assign(c,JSON.parse(JSON.stringify(this.template))):c:void 0}spliceRows(d,c,a,u){const h=this.sheets[d];if(h){const f=[];for(let m=0;m<u;m++)f.push([]);h.splice(c,a,...f)}}spliceColumns(d,c,a,u){const h=this.sheets[d];if(h){const f=[];for(let m=0;m<u;m++)f.push(null);i.each(h,m=>{m.splice(c,a,...f)})}}}},{"./col-cache":19,"./under-dash":26}],19:[function(t,s,l){const i=/^[A-Z]+\d+$/,o={_dictionary:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],_l2nFill:0,_l2n:{},_n2l:[],_level:d=>d<=26?1:d<=676?2:3,_fill(d){let c,a,u,h,f,m=1;if(d>=4)throw new Error("Out of bounds. Excel supports columns from 1 to 16384");if(this._l2nFill<1&&d>=1){for(;m<=26;)c=this._dictionary[m-1],this._n2l[m]=c,this._l2n[c]=m,m++;this._l2nFill=1}if(this._l2nFill<2&&d>=2){for(m=27;m<=702;)a=m-27,u=a%26,h=Math.floor(a/26),c=this._dictionary[h]+this._dictionary[u],this._n2l[m]=c,this._l2n[c]=m,m++;this._l2nFill=2}if(this._l2nFill<3&&d>=3){for(m=703;m<=16384;)a=m-703,u=a%26,h=Math.floor(a/26)%26,f=Math.floor(a/676),c=this._dictionary[f]+this._dictionary[h]+this._dictionary[u],this._n2l[m]=c,this._l2n[c]=m,m++;this._l2nFill=3}},l2n(d){if(this._l2n[d]||this._fill(d.length),!this._l2n[d])throw new Error("Out of bounds. Invalid column letter: "+d);return this._l2n[d]},n2l(d){if(d<1||d>16384)throw new Error(d+" is out of bounds. Excel supports columns from 1 to 16384");return this._n2l[d]||this._fill(this._level(d)),this._n2l[d]},_hash:{},validateAddress(d){if(!i.test(d))throw new Error("Invalid Address: "+d);return!0},decodeAddress(d){const c=d.length<5&&this._hash[d];if(c)return c;let a=!1,u="",h=0,f=!1,m="",b=0;for(let g,w=0;w<d.length;w++)if(g=d.charCodeAt(w),!f&&g>=65&&g<=90)a=!0,u+=d[w],h=26*h+g-64;else if(g>=48&&g<=57)f=!0,m+=d[w],b=10*b+g-48;else if(f&&a&&g!==36)break;if(a){if(h>16384)throw new Error("Out of bounds. Invalid column letter: "+u)}else h=void 0;f||(b=void 0);const y={address:d=u+m,col:h,row:b,$col$row:`$${u}$${m}`};return h<=100&&b<=100&&(this._hash[d]=y,this._hash[y.$col$row]=y),y},getAddress(d,c){if(c){const a=this.n2l(c)+d;return this.decodeAddress(a)}return this.decodeAddress(d)},decode(d){const c=d.split(":");if(c.length===2){const a=this.decodeAddress(c[0]),u=this.decodeAddress(c[1]),h={top:Math.min(a.row,u.row),left:Math.min(a.col,u.col),bottom:Math.max(a.row,u.row),right:Math.max(a.col,u.col)};return h.tl=this.n2l(h.left)+h.top,h.br=this.n2l(h.right)+h.bottom,h.dimensions=`${h.tl}:${h.br}`,h}return this.decodeAddress(d)},decodeEx(d){const c=d.match(/(?:(?:(?:'((?:[^']|'')*)')|([^'^ !]*))!)?(.*)/),a=c[1]||c[2],u=c[3],h=u.split(":");if(h.length>1){let m=this.decodeAddress(h[0]),b=this.decodeAddress(h[1]);const y=Math.min(m.row,b.row),g=Math.min(m.col,b.col),w=Math.max(m.row,b.row),x=Math.max(m.col,b.col);return m=this.n2l(g)+y,b=this.n2l(x)+w,{top:y,left:g,bottom:w,right:x,sheetName:a,tl:{address:m,col:g,row:y,$col$row:`$${this.n2l(g)}$${y}`,sheetName:a},br:{address:b,col:x,row:w,$col$row:`$${this.n2l(x)}$${w}`,sheetName:a},dimensions:`${m}:${b}`}}if(u.startsWith("#"))return a?{sheetName:a,error:u}:{error:u};const f=this.decodeAddress(u);return a?{sheetName:a,...f}:f},encodeAddress:(d,c)=>o.n2l(c)+d,encode(){switch(arguments.length){case 2:return o.encodeAddress(arguments[0],arguments[1]);case 4:return`${o.encodeAddress(arguments[0],arguments[1])}:${o.encodeAddress(arguments[2],arguments[3])}`;default:throw new Error("Can only encode with 2 or 4 arguments")}},inRange(d,c){const[a,u,,h,f]=d,[m,b]=c;return m>=a&&m<=h&&b>=u&&b<=f}};s.exports=o},{}],20:[function(t,s,l){const i=(d,c)=>({...d,...c.reduce((a,u)=>(d[u]&&(a[u]={...d[u]}),a),{})}),o=function(d,c,a){let u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];d[a]&&(c[a]=i(d[a],u))};l.copyStyle=d=>{if(!d)return d;if(c=d,Object.keys(c).length===0)return{};var c;const a={...d};return o(d,a,"font",["color"]),o(d,a,"alignment"),o(d,a,"protection"),d.border&&(o(d,a,"border"),o(d.border,a.border,"top",["color"]),o(d.border,a.border,"left",["color"]),o(d.border,a.border,"bottom",["color"]),o(d.border,a.border,"right",["color"]),o(d.border,a.border,"diagonal",["color"])),d.fill&&(o(d,a,"fill",["fgColor","bgColor","center"]),d.fill.stops&&(a.fill.stops=d.fill.stops.map(u=>i(u,["color"])))),a}},{}],21:[function(t,s,l){(function(i){(function(){const o=t("crypto"),d={hash(c){const a=o.createHash(c);for(var u=arguments.length,h=new Array(u>1?u-1:0),f=1;f<u;f++)h[f-1]=arguments[f];return a.update(i.concat(h)),a.digest()},convertPasswordToHash(c,a,u,h){if(a=a.toLowerCase(),o.getHashes().indexOf(a)<0)throw new Error(`Hash algorithm '${a}' not supported!`);const f=i.from(c,"utf16le");let m=this.hash(a,i.from(u,"base64"),f);for(let b=0;b<h;b++){const y=i.alloc(4);y.writeUInt32LE(b,0),m=this.hash(a,m,y)}return m.toString("base64")},randomBytes:c=>o.randomBytes(c)};s.exports=d}).call(this)}).call(this,t("buffer").Buffer)},{buffer:220,crypto:390}],22:[function(t,s,l){const{SaxesParser:i}=t("saxes"),{PassThrough:o}=t("readable-stream"),{bufferToString:d}=t("./browser-buffer-decode");s.exports=async function*(c){c.pipe&&!c[Symbol.asyncIterator]&&(c=c.pipe(new o));const a=new i;let u;a.on("error",f=>{u=f});let h=[];a.on("opentag",f=>h.push({eventType:"opentag",value:f})),a.on("text",f=>h.push({eventType:"text",value:f})),a.on("closetag",f=>h.push({eventType:"closetag",value:f}));for await(const f of c){if(a.write(d(f)),u)throw u;yield h,h=[]}}},{"./browser-buffer-decode":16,"readable-stream":491,saxes:496}],23:[function(t,s,l){const i=t("./col-cache"),o=/(([a-z_\-0-9]*)!)?([a-z0-9_$]{2,})([(])?/gi,d=/^([$])?([a-z]+)([$])?([1-9][0-9]*)$/i;s.exports={slideFormula:function(c,a,u){const h=i.decode(a),f=i.decode(u);return c.replace(o,(m,b,y,g,w)=>{if(w)return m;const x=d.exec(g);if(x){const _=x[1],j=x[2].toUpperCase(),R=x[3],M=x[4];if(j.length>3||j.length===3&&j>"XFD")return m;let I=i.l2n(j),F=parseInt(M,10);return _||(I+=f.col-h.col),R||(F+=f.row-h.row),(b||"")+(_||"")+i.n2l(I)+(R||"")+F}return m})}}},{"./col-cache":19}],24:[function(t,s,l){(function(i,o){(function(){const d=t("readable-stream"),c=t("./utils"),a=t("./string-buf");class u{constructor(g,w){this._data=g,this._encoding=w}get length(){return this.toBuffer().length}copy(g,w,x,_){return this.toBuffer().copy(g,w,x,_)}toBuffer(){return this._buffer||(this._buffer=o.from(this._data,this._encoding)),this._buffer}}class h{constructor(g){this._data=g}get length(){return this._data.length}copy(g,w,x,_){return this._data._buf.copy(g,w,x,_)}toBuffer(){return this._data.toBuffer()}}class f{constructor(g){this._data=g}get length(){return this._data.length}copy(g,w,x,_){this._data.copy(g,w,x,_)}toBuffer(){return this._data}}class m{constructor(g){this.size=g,this.buffer=o.alloc(g),this.iRead=0,this.iWrite=0}toBuffer(){if(this.iRead===0&&this.iWrite===this.size)return this.buffer;const g=o.alloc(this.iWrite-this.iRead);return this.buffer.copy(g,0,this.iRead,this.iWrite),g}get length(){return this.iWrite-this.iRead}get eod(){return this.iRead===this.iWrite}get full(){return this.iWrite===this.size}read(g){let w;return g===0?null:g===void 0||g>=this.length?(w=this.toBuffer(),this.iRead=this.iWrite,w):(w=o.alloc(g),this.buffer.copy(w,0,this.iRead,g),this.iRead+=g,w)}write(g,w,x){const _=Math.min(x,this.size-this.iWrite);return g.copy(this.buffer,this.iWrite,w,w+_),this.iWrite+=_,_}}const b=function(y){y=y||{},this.bufSize=y.bufSize||1048576,this.buffers=[],this.batch=y.batch||!1,this.corked=!1,this.inPos=0,this.outPos=0,this.pipes=[],this.paused=!1,this.encoding=null};c.inherits(b,d.Duplex,{toBuffer(){switch(this.buffers.length){case 0:return null;case 1:return this.buffers[0].toBuffer();default:return o.concat(this.buffers.map(y=>y.toBuffer()))}},_getWritableBuffer(){if(this.buffers.length){const g=this.buffers[this.buffers.length-1];if(!g.full)return g}const y=new m(this.bufSize);return this.buffers.push(y),y},async _pipe(y){await Promise.all(this.pipes.map(function(g){return new Promise(w=>{g.write(y.toBuffer(),()=>{w()})})}))},_writeToBuffers(y){let g=0;const w=y.length;for(;g<w;)g+=this._getWritableBuffer().write(y,g,w-g)},async write(y,g,w){let x;if(g instanceof Function&&(w=g,g="utf8"),w=w||c.nop,y instanceof a)x=new h(y);else if(y instanceof o)x=new f(y);else{if(!(typeof y=="string"||y instanceof String||y instanceof ArrayBuffer))throw new Error("Chunk must be one of type String, Buffer or StringBuf.");x=new u(y,g)}if(this.pipes.length)if(this.batch)for(this._writeToBuffers(x);!this.corked&&this.buffers.length>1;)this._pipe(this.buffers.shift());else this.corked?(this._writeToBuffers(x),i.nextTick(w)):(await this._pipe(x),w());else this.paused||this.emit("data",x.toBuffer()),this._writeToBuffers(x),this.emit("readable");return!0},cork(){this.corked=!0},_flush(){if(this.pipes.length)for(;this.buffers.length;)this._pipe(this.buffers.shift())},uncork(){this.corked=!1,this._flush()},end(y,g,w){const x=_=>{_?w(_):(this._flush(),this.pipes.forEach(j=>{j.end()}),this.emit("finish"))};y?this.write(y,g,x):x()},read(y){let g;if(y){for(g=[];y&&this.buffers.length&&!this.buffers[0].eod;){const w=this.buffers[0],x=w.read(y);y-=x.length,g.push(x),w.eod&&w.full&&this.buffers.shift()}return o.concat(g)}return g=this.buffers.map(w=>w.toBuffer()).filter(Boolean),this.buffers=[],o.concat(g)},setEncoding(y){this.encoding=y},pause(){this.paused=!0},resume(){this.paused=!1},isPaused(){return!!this.paused},pipe(y){this.pipes.push(y),!this.paused&&this.buffers.length&&this.end()},unpipe(y){this.pipes=this.pipes.filter(g=>g!==y)},unshift(){throw new Error("Not Implemented")},wrap(){throw new Error("Not Implemented")}}),s.exports=b}).call(this)}).call(this,t("_process"),t("buffer").Buffer)},{"./string-buf":25,"./utils":27,_process:467,buffer:220,"readable-stream":491}],25:[function(t,s,l){(function(i){(function(){s.exports=class{constructor(o){this._buf=i.alloc(o&&o.size||16384),this._encoding=o&&o.encoding||"utf8",this._inPos=0,this._buffer=void 0}get length(){return this._inPos}get capacity(){return this._buf.length}get buffer(){return this._buf}toBuffer(){return this._buffer||(this._buffer=i.alloc(this.length),this._buf.copy(this._buffer,0,0,this.length)),this._buffer}reset(o){o=o||0,this._buffer=void 0,this._inPos=o}_grow(o){let d=2*this._buf.length;for(;d<o;)d*=2;const c=i.alloc(d);this._buf.copy(c,0),this._buf=c}addText(o){this._buffer=void 0;let d=this._inPos+this._buf.write(o,this._inPos,this._encoding);for(;d>=this._buf.length-4;)this._grow(this._inPos+o.length),d=this._inPos+this._buf.write(o,this._inPos,this._encoding);this._inPos=d}addStringBuf(o){o.length&&(this._buffer=void 0,this.length+o.length>this.capacity&&this._grow(this.length+o.length),o._buf.copy(this._buf,this._inPos,0,o.length),this._inPos+=o.length)}}}).call(this)}).call(this,t("buffer").Buffer)},{buffer:220}],26:[function(t,s,l){const{toString:i}=Object.prototype,o=/["&<>]/,d={each:function(c,a){c&&(Array.isArray(c)?c.forEach(a):Object.keys(c).forEach(u=>{a(c[u],u)}))},some:function(c,a){return!!c&&(Array.isArray(c)?c.some(a):Object.keys(c).some(u=>a(c[u],u)))},every:function(c,a){return!c||(Array.isArray(c)?c.every(a):Object.keys(c).every(u=>a(c[u],u)))},map:function(c,a){return c?Array.isArray(c)?c.map(a):Object.keys(c).map(u=>a(c[u],u)):[]},keyBy:(c,a)=>c.reduce((u,h)=>(u[h[a]]=h,u),{}),isEqual:function(c,a){const u=typeof c,h=typeof a,f=Array.isArray(c),m=Array.isArray(a);let b;if(u!==h)return!1;switch(typeof c){case"object":if(f||m)return!(!f||!m)&&c.length===a.length&&c.every((y,g)=>{const w=a[g];return d.isEqual(y,w)});if(c===null||a===null)return c===a;if(b=Object.keys(c),Object.keys(a).length!==b.length)return!1;for(const y of b)if(!a.hasOwnProperty(y))return!1;return d.every(c,(y,g)=>{const w=a[g];return d.isEqual(y,w)});default:return c===a}},escapeHtml(c){const a=o.exec(c);if(!a)return c;let u="",h="",f=0,m=a.index;for(;m<c.length;m++){switch(c.charAt(m)){case'"':h="&quot;";break;case"&":h="&amp;";break;case"'":h="&apos;";break;case"<":h="&lt;";break;case">":h="&gt;";break;default:continue}f!==m&&(u+=c.substring(f,m)),f=m+1,u+=h}return f!==m?u+c.substring(f,m):u},strcmp:(c,a)=>c<a?-1:c>a?1:0,isUndefined:c=>i.call(c)==="[object Undefined]",isObject:c=>i.call(c)==="[object Object]",deepMerge(){const c=arguments[0]||{},{length:a}=arguments;let u,h,f;function m(b,y){u=c[y],f=Array.isArray(b),d.isObject(b)||f?(f?(f=!1,h=u&&Array.isArray(u)?u:[]):h=u&&d.isObject(u)?u:{},c[y]=d.deepMerge(h,b)):d.isUndefined(b)||(c[y]=b)}for(let b=0;b<a;b++)d.each(arguments[b],m);return c}};s.exports=d},{}],27:[function(t,s,l){(function(i,o){(function(){const d=t("fs"),c=/[<>&'"\x7F\x00-\x08\x0B-\x0C\x0E-\x1F]/,a={nop(){},promiseImmediate:u=>new Promise(h=>{i.setImmediate?o(()=>{h(u)}):setTimeout(()=>{h(u)},1)}),inherits:function(u,h,f,m){u.super_=h,m||(m=f,f=null),f&&Object.keys(f).forEach(y=>{Object.defineProperty(u,y,Object.getOwnPropertyDescriptor(f,y))});const b={constructor:{value:u,enumerable:!1,writable:!1,configurable:!0}};m&&Object.keys(m).forEach(y=>{b[y]=Object.getOwnPropertyDescriptor(m,y)}),u.prototype=Object.create(h.prototype,b)},dateToExcel:(u,h)=>25569+u.getTime()/864e5-(h?1462:0),excelToDate(u,h){const f=Math.round(24*(u-25569+(h?1462:0))*3600*1e3);return new Date(f)},parsePath(u){const h=u.lastIndexOf("/");return{path:u.substring(0,h),name:u.substring(h+1)}},getRelsPath(u){const h=a.parsePath(u);return`${h.path}/_rels/${h.name}.rels`},xmlEncode(u){const h=c.exec(u);if(!h)return u;let f="",m="",b=0,y=h.index;for(;y<u.length;y++){const g=u.charCodeAt(y);switch(g){case 34:m="&quot;";break;case 38:m="&amp;";break;case 39:m="&apos;";break;case 60:m="&lt;";break;case 62:m="&gt;";break;case 127:m="";break;default:if(g<=31&&(g<=8||g>=11&&g!==13)){m="";break}continue}b!==y&&(f+=u.substring(b,y)),b=y+1,m&&(f+=m)}return b!==y?f+u.substring(b,y):f},xmlDecode:u=>u.replace(/&([a-z]*);/g,h=>{switch(h){case"&lt;":return"<";case"&gt;":return">";case"&amp;":return"&";case"&apos;":return"'";case"&quot;":return'"';default:return h}}),validInt(u){const h=parseInt(u,10);return Number.isNaN(h)?0:h},isDateFmt(u){return u?(u=(u=u.replace(/\[[^\]]*]/g,"")).replace(/"[^"]*"/g,"")).match(/[ymdhMsb]+/)!==null:!1},fs:{exists:u=>new Promise(h=>{d.access(u,d.constants.F_OK,f=>{h(!f)})})},toIsoDateString:u=>u.toIsoString().subsstr(0,10),parseBoolean:u=>u===!0||u==="true"||u===1||u==="1"};s.exports=a}).call(this)}).call(this,typeof mr<"u"?mr:typeof self<"u"?self:typeof window<"u"?window:{},t("timers").setImmediate)},{fs:216,timers:523}],28:[function(t,s,l){const i=t("./under-dash"),o=t("./utils");function d(u,h,f){u.push(` ${h}="${o.xmlEncode(f.toString())}"`)}function c(u,h){if(h){const f=[];i.each(h,(m,b)=>{m!==void 0&&d(f,b,m)}),u.push(f.join(""))}}class a{constructor(){this._xml=[],this._stack=[],this._rollbacks=[]}get tos(){return this._stack.length?this._stack[this._stack.length-1]:void 0}get cursor(){return this._xml.length}openXml(h){const f=this._xml;f.push("<?xml"),c(f,h),f.push(`?>
`)}openNode(h,f){const m=this.tos,b=this._xml;m&&this.open&&b.push(">"),this._stack.push(h),b.push("<"),b.push(h),c(b,f),this.leaf=!0,this.open=!0}addAttribute(h,f){if(!this.open)throw new Error("Cannot write attributes to node if it is not open");f!==void 0&&d(this._xml,h,f)}addAttributes(h){if(!this.open)throw new Error("Cannot write attributes to node if it is not open");c(this._xml,h)}writeText(h){const f=this._xml;this.open&&(f.push(">"),this.open=!1),this.leaf=!1,f.push(o.xmlEncode(h.toString()))}writeXml(h){this.open&&(this._xml.push(">"),this.open=!1),this.leaf=!1,this._xml.push(h)}closeNode(){const h=this._stack.pop(),f=this._xml;this.leaf?f.push("/>"):(f.push("</"),f.push(h),f.push(">")),this.open=!1,this.leaf=!1}leafNode(h,f,m){this.openNode(h,f),m!==void 0&&this.writeText(m),this.closeNode()}closeAll(){for(;this._stack.length;)this.closeNode()}addRollback(){return this._rollbacks.push({xml:this._xml.length,stack:this._stack.length,leaf:this.leaf,open:this.open}),this.cursor}commit(){this._rollbacks.pop()}rollback(){const h=this._rollbacks.pop();this._xml.length>h.xml&&this._xml.splice(h.xml,this._xml.length-h.xml),this._stack.length>h.stack&&this._stack.splice(h.stack,this._stack.length-h.stack),this.leaf=h.leaf,this.open=h.open}get xml(){return this.closeAll(),this._xml.join("")}}a.StdDocAttributes={version:"1.0",encoding:"UTF-8",standalone:"yes"},s.exports=a},{"./under-dash":26,"./utils":27}],29:[function(t,s,l){(function(i){(function(){const o=t("events"),d=t("jszip"),c=t("./stream-buf"),{stringToBuffer:a}=t("./browser-buffer-encode");class u extends o.EventEmitter{constructor(f){super(),this.options=Object.assign({type:"nodebuffer",compression:"DEFLATE"},f),this.zip=new d,this.stream=new c}append(f,m){m.hasOwnProperty("base64")&&m.base64?this.zip.file(m.name,f,{base64:!0}):(i.browser&&typeof f=="string"&&(f=a(f)),this.zip.file(m.name,f))}async finalize(){const f=await this.zip.generateAsync(this.options);this.stream.end(f),this.emit("finish")}read(f){return this.stream.read(f)}setEncoding(f){return this.stream.setEncoding(f)}pause(){return this.stream.pause()}resume(){return this.stream.resume()}isPaused(){return this.stream.isPaused()}pipe(f,m){return this.stream.pipe(f,m)}unpipe(f){return this.stream.unpipe(f)}unshift(f){return this.stream.unshift(f)}wrap(f){return this.stream.wrap(f)}}s.exports={ZipWriter:u}}).call(this)}).call(this,t("_process"))},{"./browser-buffer-encode":17,"./stream-buf":24,_process:467,events:422,jszip:441}],30:[function(t,s,l){s.exports={0:{f:"General"},1:{f:"0"},2:{f:"0.00"},3:{f:"#,##0"},4:{f:"#,##0.00"},9:{f:"0%"},10:{f:"0.00%"},11:{f:"0.00E+00"},12:{f:"# ?/?"},13:{f:"# ??/??"},14:{f:"mm-dd-yy"},15:{f:"d-mmm-yy"},16:{f:"d-mmm"},17:{f:"mmm-yy"},18:{f:"h:mm AM/PM"},19:{f:"h:mm:ss AM/PM"},20:{f:"h:mm"},21:{f:"h:mm:ss"},22:{f:'m/d/yy "h":mm'},27:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy""m""',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"" mm"" dd""'},28:{"zh-tw":'[$-404]e""m""d""',"zh-cn":'m""d""',"ja-jp":'[$-411]ggge""m""d""',"ko-kr":"mm-dd"},29:{"zh-tw":'[$-404]e""m""d""',"zh-cn":'m""d""',"ja-jp":'[$-411]ggge""m""d""',"ko-kr":"mm-dd"},30:{"zh-tw":"m/d/yy ","zh-cn":"m-d-yy","ja-jp":"m/d/yy","ko-kr":"mm-dd-yy"},31:{"zh-tw":'yyyy""m""d""',"zh-cn":'yyyy""m""d""',"ja-jp":'yyyy""m""d""',"ko-kr":'yyyy"" mm"" dd""'},32:{"zh-tw":'hh""mm""',"zh-cn":'h""mm""',"ja-jp":'h""mm""',"ko-kr":'h"" mm""'},33:{"zh-tw":'hh""mm""ss""',"zh-cn":'h""mm""ss""',"ja-jp":'h""mm""ss""',"ko-kr":'h"" mm"" ss""'},34:{"zh-tw":'/ hh""mm""',"zh-cn":'/ h""mm""',"ja-jp":'yyyy""m""',"ko-kr":"yyyy-mm-dd"},35:{"zh-tw":'/ hh""mm""ss""',"zh-cn":'/ h""mm""ss""',"ja-jp":'m""d""',"ko-kr":"yyyy-mm-dd"},36:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy""m""',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"" mm"" dd""'},37:{f:"#,##0 ;(#,##0)"},38:{f:"#,##0 ;[Red](#,##0)"},39:{f:"#,##0.00 ;(#,##0.00)"},40:{f:"#,##0.00 ;[Red](#,##0.00)"},45:{f:"mm:ss"},46:{f:"[h]:mm:ss"},47:{f:"mmss.0"},48:{f:"##0.0E+0"},49:{f:"@"},50:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy""m""',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"" mm"" dd""'},51:{"zh-tw":'[$-404]e""m""d""',"zh-cn":'m""d""',"ja-jp":'[$-411]ggge""m""d""',"ko-kr":"mm-dd"},52:{"zh-tw":'/ hh""mm""',"zh-cn":'yyyy""m""',"ja-jp":'yyyy""m""',"ko-kr":"yyyy-mm-dd"},53:{"zh-tw":'/ hh""mm""ss""',"zh-cn":'m""d""',"ja-jp":'m""d""',"ko-kr":"yyyy-mm-dd"},54:{"zh-tw":'[$-404]e""m""d""',"zh-cn":'m""d""',"ja-jp":'[$-411]ggge""m""d""',"ko-kr":"mm-dd"},55:{"zh-tw":'/ hh""mm""',"zh-cn":'/ h""mm""',"ja-jp":'yyyy""m""',"ko-kr":"yyyy-mm-dd"},56:{"zh-tw":'/ hh""mm""ss""',"zh-cn":'/ h""mm""ss""',"ja-jp":'m""d""',"ko-kr":"yyyy-mm-dd"},57:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy""m""',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"" mm"" dd""'},58:{"zh-tw":'[$-404]e""m""d""',"zh-cn":'m""d""',"ja-jp":'[$-411]ggge""m""d""',"ko-kr":"mm-dd"},59:{"th-th":"t0"},60:{"th-th":"t0.00"},61:{"th-th":"t#,##0"},62:{"th-th":"t#,##0.00"},67:{"th-th":"t0%"},68:{"th-th":"t0.00%"},69:{"th-th":"t# ?/?"},70:{"th-th":"t# ??/??"},81:{"th-th":"d/m/bb"}}},{}],31:[function(t,s,l){s.exports={OfficeDocument:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",Worksheet:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet",CalcChain:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/calcChain",SharedStrings:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",Styles:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",Theme:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",Hyperlink:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",Image:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",CoreProperties:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",ExtenderProperties:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",Comments:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",VmlDrawing:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",Table:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/table"}},{}],32:[function(t,s,l){const i=t("../../utils/parse-sax"),o=t("../../utils/xml-stream");class d{prepare(){}render(){}parseOpen(a){}parseText(a){}parseClose(a){}reconcile(a,u){}reset(){this.model=null,this.map&&Object.values(this.map).forEach(a=>{a instanceof d?a.reset():a.xform&&a.xform.reset()})}mergeModel(a){this.model=Object.assign(this.model||{},a)}async parse(a){for await(const u of a)for(const{eventType:h,value:f}of u)if(h==="opentag")this.parseOpen(f);else if(h==="text")this.parseText(f);else if(h==="closetag"&&!this.parseClose(f.name))return this.model;return this.model}async parseStream(a){return this.parse(i(a))}get xml(){return this.toXml(this.model)}toXml(a){const u=new o;return this.render(u,a),u.xml}static toAttribute(a,u){let h=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(a===void 0){if(h)return u}else if(h||a!==u)return a.toString()}static toStringAttribute(a,u){let h=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return d.toAttribute(a,u,h)}static toStringValue(a,u){return a===void 0?u:a}static toBoolAttribute(a,u){let h=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(a===void 0){if(h)return u}else if(h||a!==u)return a?"1":"0"}static toBoolValue(a,u){return a===void 0?u:a==="1"}static toIntAttribute(a,u){let h=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return d.toAttribute(a,u,h)}static toIntValue(a,u){return a===void 0?u:parseInt(a,10)}static toFloatAttribute(a,u){let h=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return d.toAttribute(a,u,h)}static toFloatValue(a,u){return a===void 0?u:parseFloat(a)}}s.exports=d},{"../../utils/parse-sax":22,"../../utils/xml-stream":28}],33:[function(t,s,l){const i=t("../base-xform"),o=t("../../../utils/col-cache");function d(a){try{return o.decodeEx(a),!0}catch{return!1}}function c(a){const u=[];let h=!1,f="";return a.split(",").forEach(m=>{if(!m)return;const b=(m.match(/'/g)||[]).length;if(!b)return void(h?f+=m+",":d(m)&&u.push(m));const y=b%2==0;!h&&y&&d(m)?u.push(m):h&&!y?(h=!1,d(f+m)&&u.push(f+m),f=""):(h=!0,f+=m+",")}),u}s.exports=class extends i{render(a,u){a.openNode("definedName",{name:u.name,localSheetId:u.localSheetId}),a.writeText(u.ranges.join(",")),a.closeNode()}parseOpen(a){switch(a.name){case"definedName":return this._parsedName=a.attributes.name,this._parsedLocalSheetId=a.attributes.localSheetId,this._parsedText=[],!0;default:return!1}}parseText(a){this._parsedText.push(a)}parseClose(){return this.model={name:this._parsedName,ranges:c(this._parsedText.join(""))},this._parsedLocalSheetId!==void 0&&(this.model.localSheetId=parseInt(this._parsedLocalSheetId,10)),!1}}},{"../../../utils/col-cache":19,"../base-xform":32}],34:[function(t,s,l){const i=t("../../../utils/utils"),o=t("../base-xform");s.exports=class extends o{render(d,c){d.leafNode("sheet",{sheetId:c.id,name:c.name,state:c.state,"r:id":c.rId})}parseOpen(d){return d.name==="sheet"&&(this.model={name:i.xmlDecode(d.attributes.name),id:parseInt(d.attributes.sheetId,10),state:d.attributes.state,rId:d.attributes["r:id"]},!0)}parseText(){}parseClose(){return!1}}},{"../../../utils/utils":27,"../base-xform":32}],35:[function(t,s,l){const i=t("../base-xform");s.exports=class extends i{render(o,d){o.leafNode("calcPr",{calcId:171027,fullCalcOnLoad:d.fullCalcOnLoad?1:void 0})}parseOpen(o){return o.name==="calcPr"&&(this.model={},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],36:[function(t,s,l){const i=t("../base-xform");s.exports=class extends i{render(o,d){o.leafNode("workbookPr",{date1904:d.date1904?1:void 0,defaultThemeVersion:164011,filterPrivacy:1})}parseOpen(o){return o.name==="workbookPr"&&(this.model={date1904:o.attributes.date1904==="1"},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],37:[function(t,s,l){const i=t("../base-xform");s.exports=class extends i{render(o,d){const c={xWindow:d.x||0,yWindow:d.y||0,windowWidth:d.width||12e3,windowHeight:d.height||24e3,firstSheet:d.firstSheet,activeTab:d.activeTab};d.visibility&&d.visibility!=="visible"&&(c.visibility=d.visibility),o.leafNode("workbookView",c)}parseOpen(o){if(o.name==="workbookView"){const d=this.model={},c=function(u,h,f){const m=h!==void 0?d[u]=h:f;m!==void 0&&(d[u]=m)},a=function(u,h,f){const m=h!==void 0?d[u]=parseInt(h,10):f;m!==void 0&&(d[u]=m)};return a("x",o.attributes.xWindow,0),a("y",o.attributes.yWindow,0),a("width",o.attributes.windowWidth,25e3),a("height",o.attributes.windowHeight,1e4),c("visibility",o.attributes.visibility,"visible"),a("activeTab",o.attributes.activeTab,void 0),a("firstSheet",o.attributes.firstSheet,void 0),!0}return!1}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],38:[function(t,s,l){const i=t("../../../utils/under-dash"),o=t("../../../utils/col-cache"),d=t("../../../utils/xml-stream"),c=t("../base-xform"),a=t("../static-xform"),u=t("../list-xform"),h=t("./defined-name-xform"),f=t("./sheet-xform"),m=t("./workbook-view-xform"),b=t("./workbook-properties-xform"),y=t("./workbook-calc-properties-xform");class g extends c{constructor(){super(),this.map={fileVersion:g.STATIC_XFORMS.fileVersion,workbookPr:new b,bookViews:new u({tag:"bookViews",count:!1,childXform:new m}),sheets:new u({tag:"sheets",count:!1,childXform:new f}),definedNames:new u({tag:"definedNames",count:!1,childXform:new h}),calcPr:new y}}prepare(x){x.sheets=x.worksheets;const _=[];let j=0;x.sheets.forEach(R=>{if(R.pageSetup&&R.pageSetup.printArea&&R.pageSetup.printArea.split("&&").forEach(M=>{const I=M.split(":"),F={name:"_xlnm.Print_Area",ranges:[`'${R.name}'!$${I[0]}:$${I[1]}`],localSheetId:j};_.push(F)}),R.pageSetup&&(R.pageSetup.printTitlesRow||R.pageSetup.printTitlesColumn)){const M=[];if(R.pageSetup.printTitlesColumn){const F=R.pageSetup.printTitlesColumn.split(":");M.push(`'${R.name}'!$${F[0]}:$${F[1]}`)}if(R.pageSetup.printTitlesRow){const F=R.pageSetup.printTitlesRow.split(":");M.push(`'${R.name}'!$${F[0]}:$${F[1]}`)}const I={name:"_xlnm.Print_Titles",ranges:M,localSheetId:j};_.push(I)}j++}),_.length&&(x.definedNames=x.definedNames.concat(_)),(x.media||[]).forEach((R,M)=>{R.name=R.type+(M+1)})}render(x,_){x.openXml(d.StdDocAttributes),x.openNode("workbook",g.WORKBOOK_ATTRIBUTES),this.map.fileVersion.render(x),this.map.workbookPr.render(x,_.properties),this.map.bookViews.render(x,_.views),this.map.sheets.render(x,_.sheets),this.map.definedNames.render(x,_.definedNames),this.map.calcPr.render(x,_.calcProperties),x.closeNode()}parseOpen(x){if(this.parser)return this.parser.parseOpen(x),!0;switch(x.name){case"workbook":return!0;default:return this.parser=this.map[x.name],this.parser&&this.parser.parseOpen(x),!0}}parseText(x){this.parser&&this.parser.parseText(x)}parseClose(x){if(this.parser)return this.parser.parseClose(x)||(this.parser=void 0),!0;switch(x){case"workbook":return this.model={sheets:this.map.sheets.model,properties:this.map.workbookPr.model||{},views:this.map.bookViews.model,calcProperties:{}},this.map.definedNames.model&&(this.model.definedNames=this.map.definedNames.model),!1;default:return!0}}reconcile(x){const _=(x.workbookRels||[]).reduce((F,B)=>(F[B.Id]=B,F),{}),j=[];let R,M=0;(x.sheets||[]).forEach(F=>{const B=_[F.rId];B&&(R=x.worksheetHash["xl/"+B.Target.replace(/^(\s|\/xl\/)+/,"")],R&&(R.name=F.name,R.id=F.id,R.state=F.state,j[M++]=R))});const I=[];i.each(x.definedNames,F=>{if(F.name==="_xlnm.Print_Area"){if(R=j[F.localSheetId],R){R.pageSetup||(R.pageSetup={});const B=o.decodeEx(F.ranges[0]);R.pageSetup.printArea=R.pageSetup.printArea?`${R.pageSetup.printArea}&&${B.dimensions}`:B.dimensions}}else if(F.name==="_xlnm.Print_Titles"){if(R=j[F.localSheetId],R){R.pageSetup||(R.pageSetup={});const B=F.ranges.join(","),U=/\$/g,Q=/\$\d+:\$\d+/,K=B.match(Q);if(K&&K.length){const A=K[0];R.pageSetup.printTitlesRow=A.replace(U,"")}const T=/\$[A-Z]+:\$[A-Z]+/,P=B.match(T);if(P&&P.length){const A=P[0];R.pageSetup.printTitlesColumn=A.replace(U,"")}}}else I.push(F)}),x.definedNames=I,x.media.forEach((F,B)=>{F.index=B})}}g.WORKBOOK_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x15","xmlns:x15":"http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"},g.STATIC_XFORMS={fileVersion:new a({tag:"fileVersion",$:{appName:"xl",lastEdited:5,lowestEdited:5,rupBuild:9303}})},s.exports=g},{"../../../utils/col-cache":19,"../../../utils/under-dash":26,"../../../utils/xml-stream":28,"../base-xform":32,"../list-xform":71,"../static-xform":120,"./defined-name-xform":33,"./sheet-xform":34,"./workbook-calc-properties-xform":35,"./workbook-properties-xform":36,"./workbook-view-xform":37}],39:[function(t,s,l){const i=t("../strings/rich-text-xform"),o=t("../../../utils/utils"),d=t("../base-xform"),c=s.exports=function(a){this.model=a};o.inherits(c,d,{get tag(){return"r"},get richTextXform(){return this._richTextXform||(this._richTextXform=new i),this._richTextXform},render(a,u){u=u||this.model,a.openNode("comment",{ref:u.ref,authorId:0}),a.openNode("text"),u&&u.note&&u.note.texts&&u.note.texts.forEach(h=>{this.richTextXform.render(a,h)}),a.closeNode(),a.closeNode()},parseOpen(a){if(this.parser)return this.parser.parseOpen(a),!0;switch(a.name){case"comment":return this.model={type:"note",note:{texts:[]},...a.attributes},!0;case"r":return this.parser=this.richTextXform,this.parser.parseOpen(a),!0;default:return!1}},parseText(a){this.parser&&this.parser.parseText(a)},parseClose(a){switch(a){case"comment":return!1;case"r":return this.model.note.texts.push(this.parser.model),this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(a),!0}}})},{"../../../utils/utils":27,"../base-xform":32,"../strings/rich-text-xform":122}],40:[function(t,s,l){const i=t("../../../utils/xml-stream"),o=t("../../../utils/utils"),d=t("../base-xform"),c=t("./comment-xform"),a=s.exports=function(){this.map={comment:new c}};o.inherits(a,d,{COMMENTS_ATTRIBUTES:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},{render(u,h){h=h||this.model,u.openXml(i.StdDocAttributes),u.openNode("comments",a.COMMENTS_ATTRIBUTES),u.openNode("authors"),u.leafNode("author",null,"Author"),u.closeNode(),u.openNode("commentList"),h.comments.forEach(f=>{this.map.comment.render(u,f)}),u.closeNode(),u.closeNode()},parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case"commentList":return this.model={comments:[]},!0;case"comment":return this.parser=this.map.comment,this.parser.parseOpen(u),!0;default:return!1}},parseText(u){this.parser&&this.parser.parseText(u)},parseClose(u){switch(u){case"commentList":return!1;case"comment":return this.model.comments.push(this.parser.model),this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(u),!0}}})},{"../../../utils/utils":27,"../../../utils/xml-stream":28,"../base-xform":32,"./comment-xform":39}],41:[function(t,s,l){const i=t("../../base-xform");s.exports=class extends i{constructor(o){super(),this._model=o}get tag(){return this._model&&this._model.tag}render(o,d,c){(d===c[2]||this.tag==="x:SizeWithCells"&&d===c[1])&&o.leafNode(this.tag)}parseOpen(o){switch(o.name){case this.tag:return this.model={},this.model[this.tag]=!0,!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../base-xform":32}],42:[function(t,s,l){const i=t("../../base-xform");s.exports=class extends i{constructor(o){super(),this._model=o}get tag(){return this._model&&this._model.tag}render(o,d){o.leafNode(this.tag,null,d)}parseOpen(o){switch(o.name){case this.tag:return this.text="",!0;default:return!1}}parseText(o){this.text=o}parseClose(){return!1}}},{"../../base-xform":32}],43:[function(t,s,l){const i=t("../base-xform");s.exports=class extends i{get tag(){return"x:Anchor"}getAnchorRect(o){const d=Math.floor(o.left),c=Math.floor(68*(o.left-d)),a=Math.floor(o.top),u=Math.floor(18*(o.top-a)),h=Math.floor(o.right),f=Math.floor(68*(o.right-h)),m=Math.floor(o.bottom);return[d,c,a,u,h,f,m,Math.floor(18*(o.bottom-m))]}getDefaultRect(o){const d=o.col,c=Math.max(o.row-2,0);return[d,6,c,14,d+2,2,c+4,16]}render(o,d){const c=d.anchor?this.getAnchorRect(d.anchor):this.getDefaultRect(d.refAddress);o.leafNode("x:Anchor",null,c.join(", "))}parseOpen(o){switch(o.name){case this.tag:return this.text="",!0;default:return!1}}parseText(o){this.text=o}parseClose(){return!1}}},{"../base-xform":32}],44:[function(t,s,l){const i=t("../base-xform"),o=t("./vml-anchor-xform"),d=t("./style/vml-protection-xform"),c=t("./style/vml-position-xform"),a=["twoCells","oneCells","absolute"];s.exports=class extends i{constructor(){super(),this.map={"x:Anchor":new o,"x:Locked":new d({tag:"x:Locked"}),"x:LockText":new d({tag:"x:LockText"}),"x:SizeWithCells":new c({tag:"x:SizeWithCells"}),"x:MoveWithCells":new c({tag:"x:MoveWithCells"})}}get tag(){return"x:ClientData"}render(u,h){const{protection:f,editAs:m}=h.note;u.openNode(this.tag,{ObjectType:"Note"}),this.map["x:MoveWithCells"].render(u,m,a),this.map["x:SizeWithCells"].render(u,m,a),this.map["x:Anchor"].render(u,h),this.map["x:Locked"].render(u,f.locked),u.leafNode("x:AutoFill",null,"False"),this.map["x:LockText"].render(u,f.lockText),u.leafNode("x:Row",null,h.refAddress.row-1),u.leafNode("x:Column",null,h.refAddress.col-1),u.closeNode()}parseOpen(u){switch(u.name){case this.tag:this.reset(),this.model={anchor:[],protection:{},editAs:""};break;default:this.parser=this.map[u.name],this.parser&&this.parser.parseOpen(u)}return!0}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){if(this.parser)return this.parser.parseClose(u)||(this.parser=void 0),!0;switch(u){case this.tag:return this.normalizeModel(),!1;default:return!0}}normalizeModel(){const u=Object.assign({},this.map["x:MoveWithCells"].model,this.map["x:SizeWithCells"].model),h=Object.keys(u).length;this.model.editAs=a[h],this.model.anchor=this.map["x:Anchor"].text,this.model.protection.locked=this.map["x:Locked"].text,this.model.protection.lockText=this.map["x:LockText"].text}}},{"../base-xform":32,"./style/vml-position-xform":41,"./style/vml-protection-xform":42,"./vml-anchor-xform":43}],45:[function(t,s,l){const i=t("../../../utils/xml-stream"),o=t("../base-xform"),d=t("./vml-shape-xform");class c extends o{constructor(){super(),this.map={"v:shape":new d}}get tag(){return"xml"}render(u,h){u.openXml(i.StdDocAttributes),u.openNode(this.tag,c.DRAWING_ATTRIBUTES),u.openNode("o:shapelayout",{"v:ext":"edit"}),u.leafNode("o:idmap",{"v:ext":"edit",data:1}),u.closeNode(),u.openNode("v:shapetype",{id:"_x0000_t202",coordsize:"21600,21600","o:spt":202,path:"m,l,21600r21600,l21600,xe"}),u.leafNode("v:stroke",{joinstyle:"miter"}),u.leafNode("v:path",{gradientshapeok:"t","o:connecttype":"rect"}),u.closeNode(),h.comments.forEach((f,m)=>{this.map["v:shape"].render(u,f,m)}),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case this.tag:this.reset(),this.model={comments:[]};break;default:this.parser=this.map[u.name],this.parser&&this.parser.parseOpen(u)}return!0}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){if(this.parser)return this.parser.parseClose(u)||(this.model.comments.push(this.parser.model),this.parser=void 0),!0;switch(u){case this.tag:return!1;default:return!0}}reconcile(u,h){u.anchors.forEach(f=>{f.br?this.map["xdr:twoCellAnchor"].reconcile(f,h):this.map["xdr:oneCellAnchor"].reconcile(f,h)})}}c.DRAWING_ATTRIBUTES={"xmlns:v":"urn:schemas-microsoft-com:vml","xmlns:o":"urn:schemas-microsoft-com:office:office","xmlns:x":"urn:schemas-microsoft-com:office:excel"},s.exports=c},{"../../../utils/xml-stream":28,"../base-xform":32,"./vml-shape-xform":46}],46:[function(t,s,l){const i=t("../base-xform"),o=t("./vml-textbox-xform"),d=t("./vml-client-data-xform");class c extends i{constructor(){super(),this.map={"v:textbox":new o,"x:ClientData":new d}}get tag(){return"v:shape"}render(u,h,f){u.openNode("v:shape",c.V_SHAPE_ATTRIBUTES(h,f)),u.leafNode("v:fill",{color2:"infoBackground [80]"}),u.leafNode("v:shadow",{color:"none [81]",obscured:"t"}),u.leafNode("v:path",{"o:connecttype":"none"}),this.map["v:textbox"].render(u,h),this.map["x:ClientData"].render(u,h),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case this.tag:this.reset(),this.model={margins:{insetmode:u.attributes["o:insetmode"]},anchor:"",editAs:"",protection:{}};break;default:this.parser=this.map[u.name],this.parser&&this.parser.parseOpen(u)}return!0}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){if(this.parser)return this.parser.parseClose(u)||(this.parser=void 0),!0;switch(u){case this.tag:return this.model.margins.inset=this.map["v:textbox"].model&&this.map["v:textbox"].model.inset,this.model.protection=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.protection,this.model.anchor=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.anchor,this.model.editAs=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.editAs,!1;default:return!0}}}c.V_SHAPE_ATTRIBUTES=(a,u)=>({id:"_x0000_s"+(1025+u),type:"#_x0000_t202",style:"position:absolute; margin-left:105.3pt;margin-top:10.5pt;width:97.8pt;height:59.1pt;z-index:1;visibility:hidden",fillcolor:"infoBackground [80]",strokecolor:"none [81]","o:insetmode":a.note.margins&&a.note.margins.insetmode}),s.exports=c},{"../base-xform":32,"./vml-client-data-xform":44,"./vml-textbox-xform":47}],47:[function(t,s,l){const i=t("../base-xform");s.exports=class extends i{get tag(){return"v:textbox"}conversionUnit(o,d,c){return`${parseFloat(o)*d.toFixed(2)}${c}`}reverseConversionUnit(o){return(o||"").split(",").map(d=>Number(parseFloat(this.conversionUnit(parseFloat(d),.1,"")).toFixed(2)))}render(o,d){const c={style:"mso-direction-alt:auto"};if(d&&d.note){let{inset:a}=d.note&&d.note.margins;Array.isArray(a)&&(a=a.map(u=>this.conversionUnit(u,10,"mm")).join(",")),a&&(c.inset=a)}o.openNode("v:textbox",c),o.leafNode("div",{style:"text-align:left"}),o.closeNode()}parseOpen(o){switch(o.name){case this.tag:return this.model={inset:this.reverseConversionUnit(o.attributes.inset)},!0;default:return!0}}parseText(){}parseClose(o){switch(o){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],48:[function(t,s,l){const i=t("./base-xform");s.exports=class extends i{createNewModel(o){return{}}parseOpen(o){return this.parser=this.parser||this.map[o.name],this.parser?(this.parser.parseOpen(o),!0):o.name===this.tag&&(this.model=this.createNewModel(o),!0)}parseText(o){this.parser&&this.parser.parseText(o)}onParserClose(o,d){this.model[o]=d.model}parseClose(o){return this.parser?(this.parser.parseClose(o)||(this.onParserClose(o,this.parser),this.parser=void 0),!0):o!==this.tag}}},{"./base-xform":32}],49:[function(t,s,l){const i=t("../base-xform");s.exports=class extends i{render(o,d){o.openNode("HeadingPairs"),o.openNode("vt:vector",{size:2,baseType:"variant"}),o.openNode("vt:variant"),o.leafNode("vt:lpstr",void 0,"Worksheets"),o.closeNode(),o.openNode("vt:variant"),o.leafNode("vt:i4",void 0,d.length),o.closeNode(),o.closeNode(),o.closeNode()}parseOpen(o){return o.name==="HeadingPairs"}parseText(){}parseClose(o){return o!=="HeadingPairs"}}},{"../base-xform":32}],50:[function(t,s,l){const i=t("../base-xform");s.exports=class extends i{render(o,d){o.openNode("TitlesOfParts"),o.openNode("vt:vector",{size:d.length,baseType:"lpstr"}),d.forEach(c=>{o.leafNode("vt:lpstr",void 0,c.name)}),o.closeNode(),o.closeNode()}parseOpen(o){return o.name==="TitlesOfParts"}parseText(){}parseClose(o){return o!=="TitlesOfParts"}}},{"../base-xform":32}],51:[function(t,s,l){const i=t("../../../utils/xml-stream"),o=t("../base-xform"),d=t("../simple/string-xform"),c=t("./app-heading-pairs-xform"),a=t("./app-titles-of-parts-xform");class u extends o{constructor(){super(),this.map={Company:new d({tag:"Company"}),Manager:new d({tag:"Manager"}),HeadingPairs:new c,TitleOfParts:new a}}render(f,m){f.openXml(i.StdDocAttributes),f.openNode("Properties",u.PROPERTY_ATTRIBUTES),f.leafNode("Application",void 0,"Microsoft Excel"),f.leafNode("DocSecurity",void 0,"0"),f.leafNode("ScaleCrop",void 0,"false"),this.map.HeadingPairs.render(f,m.worksheets),this.map.TitleOfParts.render(f,m.worksheets),this.map.Company.render(f,m.company||""),this.map.Manager.render(f,m.manager),f.leafNode("LinksUpToDate",void 0,"false"),f.leafNode("SharedDoc",void 0,"false"),f.leafNode("HyperlinksChanged",void 0,"false"),f.leafNode("AppVersion",void 0,"16.0300"),f.closeNode()}parseOpen(f){if(this.parser)return this.parser.parseOpen(f),!0;switch(f.name){case"Properties":return!0;default:return this.parser=this.map[f.name],!!this.parser&&(this.parser.parseOpen(f),!0)}}parseText(f){this.parser&&this.parser.parseText(f)}parseClose(f){if(this.parser)return this.parser.parseClose(f)||(this.parser=void 0),!0;switch(f){case"Properties":return this.model={worksheets:this.map.TitleOfParts.model,company:this.map.Company.model,manager:this.map.Manager.model},!1;default:return!0}}}u.DateFormat=function(h){return h.toISOString().replace(/[.]\d{3,6}/,"")},u.DateAttrs={"xsi:type":"dcterms:W3CDTF"},u.PROPERTY_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties","xmlns:vt":"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"},s.exports=u},{"../../../utils/xml-stream":28,"../base-xform":32,"../simple/string-xform":119,"./app-heading-pairs-xform":49,"./app-titles-of-parts-xform":50}],52:[function(t,s,l){const i=t("../../../utils/xml-stream"),o=t("../base-xform");class d extends o{render(a,u){a.openXml(i.StdDocAttributes),a.openNode("Types",d.PROPERTY_ATTRIBUTES);const h={};(u.media||[]).forEach(f=>{if(f.type==="image"){const m=f.extension;h[m]||(h[m]=!0,a.leafNode("Default",{Extension:m,ContentType:"image/"+m}))}}),a.leafNode("Default",{Extension:"rels",ContentType:"application/vnd.openxmlformats-package.relationships+xml"}),a.leafNode("Default",{Extension:"xml",ContentType:"application/xml"}),a.leafNode("Override",{PartName:"/xl/workbook.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"}),u.worksheets.forEach(f=>{const m=`/xl/worksheets/sheet${f.id}.xml`;a.leafNode("Override",{PartName:m,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"})}),a.leafNode("Override",{PartName:"/xl/theme/theme1.xml",ContentType:"application/vnd.openxmlformats-officedocument.theme+xml"}),a.leafNode("Override",{PartName:"/xl/styles.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"}),u.sharedStrings&&u.sharedStrings.count&&a.leafNode("Override",{PartName:"/xl/sharedStrings.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"}),u.tables&&u.tables.forEach(f=>{a.leafNode("Override",{PartName:"/xl/tables/"+f.target,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml"})}),u.drawings&&u.drawings.forEach(f=>{a.leafNode("Override",{PartName:`/xl/drawings/${f.name}.xml`,ContentType:"application/vnd.openxmlformats-officedocument.drawing+xml"})}),u.commentRefs&&(a.leafNode("Default",{Extension:"vml",ContentType:"application/vnd.openxmlformats-officedocument.vmlDrawing"}),u.commentRefs.forEach(f=>{let{commentName:m}=f;a.leafNode("Override",{PartName:`/xl/${m}.xml`,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml"})})),a.leafNode("Override",{PartName:"/docProps/core.xml",ContentType:"application/vnd.openxmlformats-package.core-properties+xml"}),a.leafNode("Override",{PartName:"/docProps/app.xml",ContentType:"application/vnd.openxmlformats-officedocument.extended-properties+xml"}),a.closeNode()}parseOpen(){return!1}parseText(){}parseClose(){return!1}}d.PROPERTY_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"},s.exports=d},{"../../../utils/xml-stream":28,"../base-xform":32}],53:[function(t,s,l){const i=t("../../../utils/xml-stream"),o=t("../base-xform"),d=t("../simple/date-xform"),c=t("../simple/string-xform"),a=t("../simple/integer-xform");class u extends o{constructor(){super(),this.map={"dc:creator":new c({tag:"dc:creator"}),"dc:title":new c({tag:"dc:title"}),"dc:subject":new c({tag:"dc:subject"}),"dc:description":new c({tag:"dc:description"}),"dc:identifier":new c({tag:"dc:identifier"}),"dc:language":new c({tag:"dc:language"}),"cp:keywords":new c({tag:"cp:keywords"}),"cp:category":new c({tag:"cp:category"}),"cp:lastModifiedBy":new c({tag:"cp:lastModifiedBy"}),"cp:lastPrinted":new d({tag:"cp:lastPrinted",format:u.DateFormat}),"cp:revision":new a({tag:"cp:revision"}),"cp:version":new c({tag:"cp:version"}),"cp:contentStatus":new c({tag:"cp:contentStatus"}),"cp:contentType":new c({tag:"cp:contentType"}),"dcterms:created":new d({tag:"dcterms:created",attrs:u.DateAttrs,format:u.DateFormat}),"dcterms:modified":new d({tag:"dcterms:modified",attrs:u.DateAttrs,format:u.DateFormat})}}render(f,m){f.openXml(i.StdDocAttributes),f.openNode("cp:coreProperties",u.CORE_PROPERTY_ATTRIBUTES),this.map["dc:creator"].render(f,m.creator),this.map["dc:title"].render(f,m.title),this.map["dc:subject"].render(f,m.subject),this.map["dc:description"].render(f,m.description),this.map["dc:identifier"].render(f,m.identifier),this.map["dc:language"].render(f,m.language),this.map["cp:keywords"].render(f,m.keywords),this.map["cp:category"].render(f,m.category),this.map["cp:lastModifiedBy"].render(f,m.lastModifiedBy),this.map["cp:lastPrinted"].render(f,m.lastPrinted),this.map["cp:revision"].render(f,m.revision),this.map["cp:version"].render(f,m.version),this.map["cp:contentStatus"].render(f,m.contentStatus),this.map["cp:contentType"].render(f,m.contentType),this.map["dcterms:created"].render(f,m.created),this.map["dcterms:modified"].render(f,m.modified),f.closeNode()}parseOpen(f){if(this.parser)return this.parser.parseOpen(f),!0;switch(f.name){case"cp:coreProperties":case"coreProperties":return!0;default:if(this.parser=this.map[f.name],this.parser)return this.parser.parseOpen(f),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(f))}}parseText(f){this.parser&&this.parser.parseText(f)}parseClose(f){if(this.parser)return this.parser.parseClose(f)||(this.parser=void 0),!0;switch(f){case"cp:coreProperties":case"coreProperties":return this.model={creator:this.map["dc:creator"].model,title:this.map["dc:title"].model,subject:this.map["dc:subject"].model,description:this.map["dc:description"].model,identifier:this.map["dc:identifier"].model,language:this.map["dc:language"].model,keywords:this.map["cp:keywords"].model,category:this.map["cp:category"].model,lastModifiedBy:this.map["cp:lastModifiedBy"].model,lastPrinted:this.map["cp:lastPrinted"].model,revision:this.map["cp:revision"].model,contentStatus:this.map["cp:contentStatus"].model,contentType:this.map["cp:contentType"].model,created:this.map["dcterms:created"].model,modified:this.map["dcterms:modified"].model},!1;default:throw new Error("Unexpected xml node in parseClose: "+f)}}}u.DateFormat=function(h){return h.toISOString().replace(/[.]\d{3}/,"")},u.DateAttrs={"xsi:type":"dcterms:W3CDTF"},u.CORE_PROPERTY_ATTRIBUTES={"xmlns:cp":"http://schemas.openxmlformats.org/package/2006/metadata/core-properties","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:dcterms":"http://purl.org/dc/terms/","xmlns:dcmitype":"http://purl.org/dc/dcmitype/","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance"},s.exports=u},{"../../../utils/xml-stream":28,"../base-xform":32,"../simple/date-xform":117,"../simple/integer-xform":118,"../simple/string-xform":119}],54:[function(t,s,l){const i=t("../base-xform");s.exports=class extends i{render(o,d){o.leafNode("Relationship",d)}parseOpen(o){switch(o.name){case"Relationship":return this.model=o.attributes,!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],55:[function(t,s,l){const i=t("../../../utils/xml-stream"),o=t("../base-xform"),d=t("./relationship-xform");class c extends o{constructor(){super(),this.map={Relationship:new d}}render(u,h){h=h||this._values,u.openXml(i.StdDocAttributes),u.openNode("Relationships",c.RELATIONSHIPS_ATTRIBUTES),h.forEach(f=>{this.map.Relationship.render(u,f)}),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case"Relationships":return this.model=[],!0;default:if(this.parser=this.map[u.name],this.parser)return this.parser.parseOpen(u),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(u))}}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){if(this.parser)return this.parser.parseClose(u)||(this.model.push(this.parser.model),this.parser=void 0),!0;switch(u){case"Relationships":return!1;default:throw new Error("Unexpected xml node in parseClose: "+u)}}}c.RELATIONSHIPS_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"},s.exports=c},{"../../../utils/xml-stream":28,"../base-xform":32,"./relationship-xform":54}],56:[function(t,s,l){const i=t("../base-xform");s.exports=class extends i{parseOpen(o){if(this.parser)return this.parser.parseOpen(o),!0;switch(o.name){case this.tag:this.reset(),this.model={range:{editAs:o.attributes.editAs||"oneCell"}};break;default:this.parser=this.map[o.name],this.parser&&this.parser.parseOpen(o)}return!0}parseText(o){this.parser&&this.parser.parseText(o)}reconcilePicture(o,d){if(o&&o.rId){const c=d.rels[o.rId].Target.match(/.*\/media\/(.+[.][a-zA-Z]{3,4})/);if(c){const a=c[1],u=d.mediaIndex[a];return d.media[u]}}}}},{"../base-xform":32}],57:[function(t,s,l){const i=t("../base-xform"),o=t("./blip-xform");s.exports=class extends i{constructor(){super(),this.map={"a:blip":new o}}get tag(){return"xdr:blipFill"}render(d,c){d.openNode(this.tag),this.map["a:blip"].render(d,c),d.openNode("a:stretch"),d.leafNode("a:fillRect"),d.closeNode(),d.closeNode()}parseOpen(d){if(this.parser)return this.parser.parseOpen(d),!0;switch(d.name){case this.tag:this.reset();break;default:this.parser=this.map[d.name],this.parser&&this.parser.parseOpen(d)}return!0}parseText(){}parseClose(d){if(this.parser)return this.parser.parseClose(d)||(this.parser=void 0),!0;switch(d){case this.tag:return this.model=this.map["a:blip"].model,!1;default:return!0}}}},{"../base-xform":32,"./blip-xform":58}],58:[function(t,s,l){const i=t("../base-xform");s.exports=class extends i{get tag(){return"a:blip"}render(o,d){o.leafNode(this.tag,{"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","r:embed":d.rId,cstate:"print"})}parseOpen(o){switch(o.name){case this.tag:return this.model={rId:o.attributes["r:embed"]},!0;default:return!0}}parseText(){}parseClose(o){switch(o){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],59:[function(t,s,l){const i=t("../base-xform");s.exports=class extends i{get tag(){return"xdr:cNvPicPr"}render(o){o.openNode(this.tag),o.leafNode("a:picLocks",{noChangeAspect:"1"}),o.closeNode()}parseOpen(o){switch(o.name){case this.tag:default:return!0}}parseText(){}parseClose(o){switch(o){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],60:[function(t,s,l){const i=t("../base-xform"),o=t("./hlink-click-xform"),d=t("./ext-lst-xform");s.exports=class extends i{constructor(){super(),this.map={"a:hlinkClick":new o,"a:extLst":new d}}get tag(){return"xdr:cNvPr"}render(c,a){c.openNode(this.tag,{id:a.index,name:"Picture "+a.index}),this.map["a:hlinkClick"].render(c,a),this.map["a:extLst"].render(c,a),c.closeNode()}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case this.tag:this.reset();break;default:this.parser=this.map[c.name],this.parser&&this.parser.parseOpen(c)}return!0}parseText(){}parseClose(c){if(this.parser)return this.parser.parseClose(c)||(this.parser=void 0),!0;switch(c){case this.tag:return this.model=this.map["a:hlinkClick"].model,!1;default:return!0}}}},{"../base-xform":32,"./ext-lst-xform":63,"./hlink-click-xform":65}],61:[function(t,s,l){const i=t("../base-xform"),o=t("../simple/integer-xform");s.exports=class extends i{constructor(d){super(),this.tag=d.tag,this.map={"xdr:col":new o({tag:"xdr:col",zero:!0}),"xdr:colOff":new o({tag:"xdr:colOff",zero:!0}),"xdr:row":new o({tag:"xdr:row",zero:!0}),"xdr:rowOff":new o({tag:"xdr:rowOff",zero:!0})}}render(d,c){d.openNode(this.tag),this.map["xdr:col"].render(d,c.nativeCol),this.map["xdr:colOff"].render(d,c.nativeColOff),this.map["xdr:row"].render(d,c.nativeRow),this.map["xdr:rowOff"].render(d,c.nativeRowOff),d.closeNode()}parseOpen(d){if(this.parser)return this.parser.parseOpen(d),!0;switch(d.name){case this.tag:this.reset();break;default:this.parser=this.map[d.name],this.parser&&this.parser.parseOpen(d)}return!0}parseText(d){this.parser&&this.parser.parseText(d)}parseClose(d){if(this.parser)return this.parser.parseClose(d)||(this.parser=void 0),!0;switch(d){case this.tag:return this.model={nativeCol:this.map["xdr:col"].model,nativeColOff:this.map["xdr:colOff"].model,nativeRow:this.map["xdr:row"].model,nativeRowOff:this.map["xdr:rowOff"].model},!1;default:return!0}}}},{"../base-xform":32,"../simple/integer-xform":118}],62:[function(t,s,l){const i=t("../../../utils/col-cache"),o=t("../../../utils/xml-stream"),d=t("../base-xform"),c=t("./two-cell-anchor-xform"),a=t("./one-cell-anchor-xform");class u extends d{constructor(){super(),this.map={"xdr:twoCellAnchor":new c,"xdr:oneCellAnchor":new a}}prepare(f){f.anchors.forEach((m,b)=>{m.anchorType=function(y){return(typeof y.range=="string"?i.decode(y.range):y.range).br?"xdr:twoCellAnchor":"xdr:oneCellAnchor"}(m),this.map[m.anchorType].prepare(m,{index:b})})}get tag(){return"xdr:wsDr"}render(f,m){f.openXml(o.StdDocAttributes),f.openNode(this.tag,u.DRAWING_ATTRIBUTES),m.anchors.forEach(b=>{this.map[b.anchorType].render(f,b)}),f.closeNode()}parseOpen(f){if(this.parser)return this.parser.parseOpen(f),!0;switch(f.name){case this.tag:this.reset(),this.model={anchors:[]};break;default:this.parser=this.map[f.name],this.parser&&this.parser.parseOpen(f)}return!0}parseText(f){this.parser&&this.parser.parseText(f)}parseClose(f){if(this.parser)return this.parser.parseClose(f)||(this.model.anchors.push(this.parser.model),this.parser=void 0),!0;switch(f){case this.tag:return!1;default:return!0}}reconcile(f,m){f.anchors.forEach(b=>{b.br?this.map["xdr:twoCellAnchor"].reconcile(b,m):this.map["xdr:oneCellAnchor"].reconcile(b,m)})}}u.DRAWING_ATTRIBUTES={"xmlns:xdr":"http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing","xmlns:a":"http://schemas.openxmlformats.org/drawingml/2006/main"},s.exports=u},{"../../../utils/col-cache":19,"../../../utils/xml-stream":28,"../base-xform":32,"./one-cell-anchor-xform":67,"./two-cell-anchor-xform":70}],63:[function(t,s,l){const i=t("../base-xform");s.exports=class extends i{get tag(){return"a:extLst"}render(o){o.openNode(this.tag),o.openNode("a:ext",{uri:"{FF2B5EF4-FFF2-40B4-BE49-F238E27FC236}"}),o.leafNode("a16:creationId",{"xmlns:a16":"http://schemas.microsoft.com/office/drawing/2014/main",id:"{00000000-0008-0000-0000-000002000000}"}),o.closeNode(),o.closeNode()}parseOpen(o){switch(o.name){case this.tag:default:return!0}}parseText(){}parseClose(o){switch(o){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],64:[function(t,s,l){const i=t("../base-xform");s.exports=class extends i{constructor(o){super(),this.tag=o.tag,this.map={}}render(o,d){o.openNode(this.tag);const c=Math.floor(9525*d.width),a=Math.floor(9525*d.height);o.addAttribute("cx",c),o.addAttribute("cy",a),o.closeNode()}parseOpen(o){return o.name===this.tag&&(this.model={width:parseInt(o.attributes.cx||"0",10)/9525,height:parseInt(o.attributes.cy||"0",10)/9525},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],65:[function(t,s,l){const i=t("../base-xform");s.exports=class extends i{get tag(){return"a:hlinkClick"}render(o,d){d.hyperlinks&&d.hyperlinks.rId&&o.leafNode(this.tag,{"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","r:id":d.hyperlinks.rId,tooltip:d.hyperlinks.tooltip})}parseOpen(o){switch(o.name){case this.tag:return this.model={hyperlinks:{rId:o.attributes["r:id"],tooltip:o.attributes.tooltip}},!0;default:return!0}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],66:[function(t,s,l){const i=t("../base-xform"),o=t("./c-nv-pr-xform"),d=t("./c-nv-pic-pr-xform");s.exports=class extends i{constructor(){super(),this.map={"xdr:cNvPr":new o,"xdr:cNvPicPr":new d}}get tag(){return"xdr:nvPicPr"}render(c,a){c.openNode(this.tag),this.map["xdr:cNvPr"].render(c,a),this.map["xdr:cNvPicPr"].render(c,a),c.closeNode()}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case this.tag:this.reset();break;default:this.parser=this.map[c.name],this.parser&&this.parser.parseOpen(c)}return!0}parseText(){}parseClose(c){if(this.parser)return this.parser.parseClose(c)||(this.parser=void 0),!0;switch(c){case this.tag:return this.model=this.map["xdr:cNvPr"].model,!1;default:return!0}}}},{"../base-xform":32,"./c-nv-pic-pr-xform":59,"./c-nv-pr-xform":60}],67:[function(t,s,l){const i=t("./base-cell-anchor-xform"),o=t("../static-xform"),d=t("./cell-position-xform"),c=t("./ext-xform"),a=t("./pic-xform");s.exports=class extends i{constructor(){super(),this.map={"xdr:from":new d({tag:"xdr:from"}),"xdr:ext":new c({tag:"xdr:ext"}),"xdr:pic":new a,"xdr:clientData":new o({tag:"xdr:clientData"})}}get tag(){return"xdr:oneCellAnchor"}prepare(u,h){this.map["xdr:pic"].prepare(u.picture,h)}render(u,h){u.openNode(this.tag,{editAs:h.range.editAs||"oneCell"}),this.map["xdr:from"].render(u,h.range.tl),this.map["xdr:ext"].render(u,h.range.ext),this.map["xdr:pic"].render(u,h.picture),this.map["xdr:clientData"].render(u,{}),u.closeNode()}parseClose(u){if(this.parser)return this.parser.parseClose(u)||(this.parser=void 0),!0;switch(u){case this.tag:return this.model.range.tl=this.map["xdr:from"].model,this.model.range.ext=this.map["xdr:ext"].model,this.model.picture=this.map["xdr:pic"].model,!1;default:return!0}}reconcile(u,h){u.medium=this.reconcilePicture(u.picture,h)}}},{"../static-xform":120,"./base-cell-anchor-xform":56,"./cell-position-xform":61,"./ext-xform":64,"./pic-xform":68}],68:[function(t,s,l){const i=t("../base-xform"),o=t("../static-xform"),d=t("./blip-fill-xform"),c=t("./nv-pic-pr-xform"),a=t("./sp-pr");s.exports=class extends i{constructor(){super(),this.map={"xdr:nvPicPr":new c,"xdr:blipFill":new d,"xdr:spPr":new o(a)}}get tag(){return"xdr:pic"}prepare(u,h){u.index=h.index+1}render(u,h){u.openNode(this.tag),this.map["xdr:nvPicPr"].render(u,h),this.map["xdr:blipFill"].render(u,h),this.map["xdr:spPr"].render(u,h),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case this.tag:this.reset();break;default:this.parser=this.map[u.name],this.parser&&this.parser.parseOpen(u)}return!0}parseText(){}parseClose(u){if(this.parser)return this.parser.parseClose(u)||(this.mergeModel(this.parser.model),this.parser=void 0),!0;switch(u){case this.tag:return!1;default:return!0}}}},{"../base-xform":32,"../static-xform":120,"./blip-fill-xform":57,"./nv-pic-pr-xform":66,"./sp-pr":69}],69:[function(t,s,l){s.exports={tag:"xdr:spPr",c:[{tag:"a:xfrm",c:[{tag:"a:off",$:{x:"0",y:"0"}},{tag:"a:ext",$:{cx:"0",cy:"0"}}]},{tag:"a:prstGeom",$:{prst:"rect"},c:[{tag:"a:avLst"}]}]}},{}],70:[function(t,s,l){const i=t("./base-cell-anchor-xform"),o=t("../static-xform"),d=t("./cell-position-xform"),c=t("./pic-xform");s.exports=class extends i{constructor(){super(),this.map={"xdr:from":new d({tag:"xdr:from"}),"xdr:to":new d({tag:"xdr:to"}),"xdr:pic":new c,"xdr:clientData":new o({tag:"xdr:clientData"})}}get tag(){return"xdr:twoCellAnchor"}prepare(a,u){this.map["xdr:pic"].prepare(a.picture,u)}render(a,u){a.openNode(this.tag,{editAs:u.range.editAs||"oneCell"}),this.map["xdr:from"].render(a,u.range.tl),this.map["xdr:to"].render(a,u.range.br),this.map["xdr:pic"].render(a,u.picture),this.map["xdr:clientData"].render(a,{}),a.closeNode()}parseClose(a){if(this.parser)return this.parser.parseClose(a)||(this.parser=void 0),!0;switch(a){case this.tag:return this.model.range.tl=this.map["xdr:from"].model,this.model.range.br=this.map["xdr:to"].model,this.model.picture=this.map["xdr:pic"].model,!1;default:return!0}}reconcile(a,u){a.medium=this.reconcilePicture(a.picture,u)}}},{"../static-xform":120,"./base-cell-anchor-xform":56,"./cell-position-xform":61,"./pic-xform":68}],71:[function(t,s,l){const i=t("./base-xform");s.exports=class extends i{constructor(o){super(),this.tag=o.tag,this.always=!!o.always,this.count=o.count,this.empty=o.empty,this.$count=o.$count||"count",this.$=o.$,this.childXform=o.childXform,this.maxItems=o.maxItems}prepare(o,d){const{childXform:c}=this;o&&o.forEach((a,u)=>{d.index=u,c.prepare(a,d)})}render(o,d){if(this.always||d&&d.length){o.openNode(this.tag,this.$),this.count&&o.addAttribute(this.$count,d&&d.length||0);const{childXform:c}=this;(d||[]).forEach((a,u)=>{c.render(o,a,u)}),o.closeNode()}else this.empty&&o.leafNode(this.tag)}parseOpen(o){if(this.parser)return this.parser.parseOpen(o),!0;switch(o.name){case this.tag:return this.model=[],!0;default:return!!this.childXform.parseOpen(o)&&(this.parser=this.childXform,!0)}}parseText(o){this.parser&&this.parser.parseText(o)}parseClose(o){if(this.parser){if(!this.parser.parseClose(o)&&(this.model.push(this.parser.model),this.parser=void 0,this.maxItems&&this.model.length>this.maxItems))throw new Error(`Max ${this.childXform.tag} count (${this.maxItems}) exceeded`);return!0}return!1}reconcile(o,d){if(o){const{childXform:c}=this;o.forEach(a=>{c.reconcile(a,d)})}}}},{"./base-xform":32}],72:[function(t,s,l){const i=t("../../../utils/col-cache"),o=t("../base-xform");s.exports=class extends o{get tag(){return"autoFilter"}render(d,c){if(c)if(typeof c=="string")d.leafNode("autoFilter",{ref:c});else{const a=function(f){return typeof f=="string"?f:i.getAddress(f.row,f.column).address},u=a(c.from),h=a(c.to);u&&h&&d.leafNode("autoFilter",{ref:`${u}:${h}`})}}parseOpen(d){d.name==="autoFilter"&&(this.model=d.attributes.ref)}}},{"../../../utils/col-cache":19,"../base-xform":32}],73:[function(t,s,l){const i=t("../../../utils/utils"),o=t("../base-xform"),d=t("../../../doc/range"),c=t("../../../doc/enums"),a=t("../strings/rich-text-xform");function u(h){if(h==null)return c.ValueType.Null;if(h instanceof String||typeof h=="string")return c.ValueType.String;if(typeof h=="number")return c.ValueType.Number;if(typeof h=="boolean")return c.ValueType.Boolean;if(h instanceof Date)return c.ValueType.Date;if(h.text&&h.hyperlink)return c.ValueType.Hyperlink;if(h.formula)return c.ValueType.Formula;if(h.error)return c.ValueType.Error;throw new Error("I could not understand type of value")}s.exports=class extends o{constructor(){super(),this.richTextXForm=new a}get tag(){return"c"}prepare(h,f){const m=f.styles.addStyleModel(h.style||{},function(b){switch(b.type){case c.ValueType.Formula:return u(b.result);default:return b.type}}(h));switch(m&&(h.styleId=m),h.comment&&f.comments.push({...h.comment,ref:h.address}),h.type){case c.ValueType.String:case c.ValueType.RichText:f.sharedStrings&&(h.ssId=f.sharedStrings.add(h.value));break;case c.ValueType.Date:f.date1904&&(h.date1904=!0);break;case c.ValueType.Hyperlink:f.sharedStrings&&h.text!==void 0&&h.text!==null&&(h.ssId=f.sharedStrings.add(h.text)),f.hyperlinks.push({address:h.address,target:h.hyperlink,tooltip:h.tooltip});break;case c.ValueType.Merge:f.merges.add(h);break;case c.ValueType.Formula:if(f.date1904&&(h.date1904=!0),h.shareType==="shared"&&(h.si=f.siFormulae++),h.formula)f.formulae[h.address]=h;else if(h.sharedFormula){const b=f.formulae[h.sharedFormula];if(!b)throw new Error("Shared Formula master must exist above and or left of clone for cell "+h.address);b.si===void 0?(b.shareType="shared",b.si=f.siFormulae++,b.range=new d(b.address,h.address)):b.range&&b.range.expandToAddress(h.address),h.si=b.si}}}renderFormula(h,f){let m=null;switch(f.shareType){case"shared":m={t:"shared",ref:f.ref||f.range.range,si:f.si};break;case"array":m={t:"array",ref:f.ref};break;default:f.si!==void 0&&(m={t:"shared",si:f.si})}switch(u(f.result)){case c.ValueType.Null:h.leafNode("f",m,f.formula);break;case c.ValueType.String:h.addAttribute("t","str"),h.leafNode("f",m,f.formula),h.leafNode("v",null,f.result);break;case c.ValueType.Number:h.leafNode("f",m,f.formula),h.leafNode("v",null,f.result);break;case c.ValueType.Boolean:h.addAttribute("t","b"),h.leafNode("f",m,f.formula),h.leafNode("v",null,f.result?1:0);break;case c.ValueType.Error:h.addAttribute("t","e"),h.leafNode("f",m,f.formula),h.leafNode("v",null,f.result.error);break;case c.ValueType.Date:h.leafNode("f",m,f.formula),h.leafNode("v",null,i.dateToExcel(f.result,f.date1904));break;default:throw new Error("I could not understand type of value")}}render(h,f){if(f.type!==c.ValueType.Null||f.styleId){switch(h.openNode("c"),h.addAttribute("r",f.address),f.styleId&&h.addAttribute("s",f.styleId),f.type){case c.ValueType.Null:break;case c.ValueType.Number:h.leafNode("v",null,f.value);break;case c.ValueType.Boolean:h.addAttribute("t","b"),h.leafNode("v",null,f.value?"1":"0");break;case c.ValueType.Error:h.addAttribute("t","e"),h.leafNode("v",null,f.value.error);break;case c.ValueType.String:case c.ValueType.RichText:f.ssId!==void 0?(h.addAttribute("t","s"),h.leafNode("v",null,f.ssId)):f.value&&f.value.richText?(h.addAttribute("t","inlineStr"),h.openNode("is"),f.value.richText.forEach(m=>{this.richTextXForm.render(h,m)}),h.closeNode("is")):(h.addAttribute("t","str"),h.leafNode("v",null,f.value));break;case c.ValueType.Date:h.leafNode("v",null,i.dateToExcel(f.value,f.date1904));break;case c.ValueType.Hyperlink:f.ssId!==void 0?(h.addAttribute("t","s"),h.leafNode("v",null,f.ssId)):(h.addAttribute("t","str"),h.leafNode("v",null,f.text));break;case c.ValueType.Formula:this.renderFormula(h,f);break;case c.ValueType.Merge:}h.closeNode()}}parseOpen(h){if(this.parser)return this.parser.parseOpen(h),!0;switch(h.name){case"c":return this.model={address:h.attributes.r},this.t=h.attributes.t,h.attributes.s&&(this.model.styleId=parseInt(h.attributes.s,10)),!0;case"f":return this.currentNode="f",this.model.si=h.attributes.si,this.model.shareType=h.attributes.t,this.model.ref=h.attributes.ref,!0;case"v":return this.currentNode="v",!0;case"t":return this.currentNode="t",!0;case"r":return this.parser=this.richTextXForm,this.parser.parseOpen(h),!0;default:return!1}}parseText(h){if(this.parser)this.parser.parseText(h);else switch(this.currentNode){case"f":this.model.formula=this.model.formula?this.model.formula+h:h;break;case"v":case"t":this.model.value&&this.model.value.richText?this.model.value.richText.text=this.model.value.richText.text?this.model.value.richText.text+h:h:this.model.value=this.model.value?this.model.value+h:h}}parseClose(h){switch(h){case"c":{const{model:f}=this;if(f.formula||f.shareType)f.type=c.ValueType.Formula,f.value&&(this.t==="str"?f.result=i.xmlDecode(f.value):this.t==="b"?f.result=parseInt(f.value,10)!==0:this.t==="e"?f.result={error:f.value}:f.result=parseFloat(f.value),f.value=void 0);else if(f.value!==void 0)switch(this.t){case"s":f.type=c.ValueType.String,f.value=parseInt(f.value,10);break;case"str":f.type=c.ValueType.String,f.value=i.xmlDecode(f.value);break;case"inlineStr":f.type=c.ValueType.String;break;case"b":f.type=c.ValueType.Boolean,f.value=parseInt(f.value,10)!==0;break;case"e":f.type=c.ValueType.Error,f.value={error:f.value};break;default:f.type=c.ValueType.Number,f.value=parseFloat(f.value)}else f.styleId?f.type=c.ValueType.Null:f.type=c.ValueType.Merge;return!1}case"f":case"v":case"is":return this.currentNode=void 0,!0;case"t":return this.parser?(this.parser.parseClose(h),!0):(this.currentNode=void 0,!0);case"r":return this.model.value=this.model.value||{},this.model.value.richText=this.model.value.richText||[],this.model.value.richText.push(this.parser.model),this.parser=void 0,this.currentNode=void 0,!0;default:return!!this.parser&&(this.parser.parseClose(h),!0)}}reconcile(h,f){const m=h.styleId&&f.styles&&f.styles.getStyleModel(h.styleId);switch(m&&(h.style=m),h.styleId!==void 0&&(h.styleId=void 0),h.type){case c.ValueType.String:typeof h.value=="number"&&f.sharedStrings&&(h.value=f.sharedStrings.getString(h.value)),h.value.richText&&(h.type=c.ValueType.RichText);break;case c.ValueType.Number:m&&i.isDateFmt(m.numFmt)&&(h.type=c.ValueType.Date,h.value=i.excelToDate(h.value,f.date1904));break;case c.ValueType.Formula:h.result!==void 0&&m&&i.isDateFmt(m.numFmt)&&(h.result=i.excelToDate(h.result,f.date1904)),h.shareType==="shared"&&(h.ref?f.formulae[h.si]=h.address:(h.sharedFormula=f.formulae[h.si],delete h.shareType),delete h.si)}const b=f.hyperlinkMap[h.address];b&&(h.type===c.ValueType.Formula?(h.text=h.result,h.result=void 0):(h.text=h.value,h.value=void 0),h.type=c.ValueType.Hyperlink,h.hyperlink=b);const y=f.commentsMap&&f.commentsMap[h.address];y&&(h.comment=y)}}},{"../../../doc/enums":7,"../../../doc/range":10,"../../../utils/utils":27,"../base-xform":32,"../strings/rich-text-xform":122}],74:[function(t,s,l){const i=t("../../base-xform");s.exports=class extends i{get tag(){return"x14:cfIcon"}render(o,d){o.leafNode(this.tag,{iconSet:d.iconSet,iconId:d.iconId})}parseOpen(o){let{attributes:d}=o;this.model={iconSet:d.iconSet,iconId:i.toIntValue(d.iconId)}}parseClose(o){return o!==this.tag}}},{"../../base-xform":32}],75:[function(t,s,l){const{v4:i}=t("uuid"),o=t("../../base-xform"),d=t("../../composite-xform"),c=t("./databar-ext-xform"),a=t("./icon-set-ext-xform"),u={"3Triangles":!0,"3Stars":!0,"5Boxes":!0};class h extends d{constructor(){super(),this.map={"x14:dataBar":this.databarXform=new c,"x14:iconSet":this.iconSetXform=new a}}get tag(){return"x14:cfRule"}static isExt(m){return m.type==="dataBar"?c.isExt(m):!(m.type!=="iconSet"||!m.custom&&!u[m.iconSet])}prepare(m){h.isExt(m)&&(m.x14Id=`{${i()}}`.toUpperCase())}render(m,b){if(h.isExt(b))switch(b.type){case"dataBar":this.renderDataBar(m,b);break;case"iconSet":this.renderIconSet(m,b)}}renderDataBar(m,b){m.openNode(this.tag,{type:"dataBar",id:b.x14Id}),this.databarXform.render(m,b),m.closeNode()}renderIconSet(m,b){m.openNode(this.tag,{type:"iconSet",priority:b.priority,id:b.x14Id||`{${i()}}`}),this.iconSetXform.render(m,b),m.closeNode()}createNewModel(m){let{attributes:b}=m;return{type:b.type,x14Id:b.id,priority:o.toIntValue(b.priority)}}onParserClose(m,b){Object.assign(this.model,b.model)}}s.exports=h},{"../../base-xform":32,"../../composite-xform":48,"./databar-ext-xform":79,"./icon-set-ext-xform":81,uuid:528}],76:[function(t,s,l){const i=t("../../composite-xform"),o=t("./f-ext-xform");s.exports=class extends i{constructor(){super(),this.map={"xm:f":this.fExtXform=new o}}get tag(){return"x14:cfvo"}render(d,c){d.openNode(this.tag,{type:c.type}),c.value!==void 0&&this.fExtXform.render(d,c.value),d.closeNode()}createNewModel(d){return{type:d.attributes.type}}onParserClose(d,c){switch(d){case"xm:f":this.model.value=c.model?parseFloat(c.model):0}}}},{"../../composite-xform":48,"./f-ext-xform":80}],77:[function(t,s,l){const i=t("../../composite-xform"),o=t("./sqref-ext-xform"),d=t("./cf-rule-ext-xform");s.exports=class extends i{constructor(){super(),this.map={"xm:sqref":this.sqRef=new o,"x14:cfRule":this.cfRule=new d}}get tag(){return"x14:conditionalFormatting"}prepare(c,a){c.rules.forEach(u=>{this.cfRule.prepare(u,a)})}render(c,a){a.rules.some(d.isExt)&&(c.openNode(this.tag,{"xmlns:xm":"http://schemas.microsoft.com/office/excel/2006/main"}),a.rules.filter(d.isExt).forEach(u=>this.cfRule.render(c,u)),this.sqRef.render(c,a.ref),c.closeNode())}createNewModel(){return{rules:[]}}onParserClose(c,a){switch(c){case"xm:sqref":this.model.ref=a.model;break;case"x14:cfRule":this.model.rules.push(a.model)}}}},{"../../composite-xform":48,"./cf-rule-ext-xform":75,"./sqref-ext-xform":82}],78:[function(t,s,l){const i=t("../../composite-xform"),o=t("./cf-rule-ext-xform"),d=t("./conditional-formatting-ext-xform");s.exports=class extends i{constructor(){super(),this.map={"x14:conditionalFormatting":this.cfXform=new d}}get tag(){return"x14:conditionalFormattings"}hasContent(c){return c.hasExtContent===void 0&&(c.hasExtContent=c.some(a=>a.rules.some(o.isExt))),c.hasExtContent}prepare(c,a){c.forEach(u=>{this.cfXform.prepare(u,a)})}render(c,a){this.hasContent(a)&&(c.openNode(this.tag),a.forEach(u=>this.cfXform.render(c,u)),c.closeNode())}createNewModel(){return[]}onParserClose(c,a){this.model.push(a.model)}}},{"../../composite-xform":48,"./cf-rule-ext-xform":75,"./conditional-formatting-ext-xform":77}],79:[function(t,s,l){const i=t("../../base-xform"),o=t("../../composite-xform"),d=t("../../style/color-xform"),c=t("./cfvo-ext-xform");s.exports=class extends o{constructor(){super(),this.map={"x14:cfvo":this.cfvoXform=new c,"x14:borderColor":this.borderColorXform=new d("x14:borderColor"),"x14:negativeBorderColor":this.negativeBorderColorXform=new d("x14:negativeBorderColor"),"x14:negativeFillColor":this.negativeFillColorXform=new d("x14:negativeFillColor"),"x14:axisColor":this.axisColorXform=new d("x14:axisColor")}}static isExt(a){return!a.gradient}get tag(){return"x14:dataBar"}render(a,u){a.openNode(this.tag,{minLength:i.toIntAttribute(u.minLength,0,!0),maxLength:i.toIntAttribute(u.maxLength,100,!0),border:i.toBoolAttribute(u.border,!1),gradient:i.toBoolAttribute(u.gradient,!0),negativeBarColorSameAsPositive:i.toBoolAttribute(u.negativeBarColorSameAsPositive,!0),negativeBarBorderColorSameAsPositive:i.toBoolAttribute(u.negativeBarBorderColorSameAsPositive,!0),axisPosition:i.toAttribute(u.axisPosition,"auto"),direction:i.toAttribute(u.direction,"leftToRight")}),u.cfvo.forEach(h=>{this.cfvoXform.render(a,h)}),this.borderColorXform.render(a,u.borderColor),this.negativeBorderColorXform.render(a,u.negativeBorderColor),this.negativeFillColorXform.render(a,u.negativeFillColor),this.axisColorXform.render(a,u.axisColor),a.closeNode()}createNewModel(a){let{attributes:u}=a;return{cfvo:[],minLength:i.toIntValue(u.minLength,0),maxLength:i.toIntValue(u.maxLength,100),border:i.toBoolValue(u.border,!1),gradient:i.toBoolValue(u.gradient,!0),negativeBarColorSameAsPositive:i.toBoolValue(u.negativeBarColorSameAsPositive,!0),negativeBarBorderColorSameAsPositive:i.toBoolValue(u.negativeBarBorderColorSameAsPositive,!0),axisPosition:i.toStringValue(u.axisPosition,"auto"),direction:i.toStringValue(u.direction,"leftToRight")}}onParserClose(a,u){const[,h]=a.split(":");switch(h){case"cfvo":this.model.cfvo.push(u.model);break;default:this.model[h]=u.model}}}},{"../../base-xform":32,"../../composite-xform":48,"../../style/color-xform":128,"./cfvo-ext-xform":76}],80:[function(t,s,l){const i=t("../../base-xform");s.exports=class extends i{get tag(){return"xm:f"}render(o,d){o.leafNode(this.tag,null,d)}parseOpen(){this.model=""}parseText(o){this.model+=o}parseClose(o){return o!==this.tag}}},{"../../base-xform":32}],81:[function(t,s,l){const i=t("../../base-xform"),o=t("../../composite-xform"),d=t("./cfvo-ext-xform"),c=t("./cf-icon-ext-xform");s.exports=class extends o{constructor(){super(),this.map={"x14:cfvo":this.cfvoXform=new d,"x14:cfIcon":this.cfIconXform=new c}}get tag(){return"x14:iconSet"}render(a,u){a.openNode(this.tag,{iconSet:i.toStringAttribute(u.iconSet),reverse:i.toBoolAttribute(u.reverse,!1),showValue:i.toBoolAttribute(u.showValue,!0),custom:i.toBoolAttribute(u.icons,!1)}),u.cfvo.forEach(h=>{this.cfvoXform.render(a,h)}),u.icons&&u.icons.forEach((h,f)=>{h.iconId=f,this.cfIconXform.render(a,h)}),a.closeNode()}createNewModel(a){let{attributes:u}=a;return{cfvo:[],iconSet:i.toStringValue(u.iconSet,"3TrafficLights"),reverse:i.toBoolValue(u.reverse,!1),showValue:i.toBoolValue(u.showValue,!0)}}onParserClose(a,u){const[,h]=a.split(":");switch(h){case"cfvo":this.model.cfvo.push(u.model);break;case"cfIcon":this.model.icons||(this.model.icons=[]),this.model.icons.push(u.model);break;default:this.model[h]=u.model}}}},{"../../base-xform":32,"../../composite-xform":48,"./cf-icon-ext-xform":74,"./cfvo-ext-xform":76}],82:[function(t,s,l){const i=t("../../base-xform");s.exports=class extends i{get tag(){return"xm:sqref"}render(o,d){o.leafNode(this.tag,null,d)}parseOpen(){this.model=""}parseText(o){this.model+=o}parseClose(o){return o!==this.tag}}},{"../../base-xform":32}],83:[function(t,s,l){const i=t("../../base-xform"),o=t("../../composite-xform"),d=t("../../../../doc/range"),c=t("./databar-xform"),a=t("./ext-lst-ref-xform"),u=t("./formula-xform"),h=t("./color-scale-xform"),f=t("./icon-set-xform"),m={"3Triangles":!0,"3Stars":!0,"5Boxes":!0},b=g=>{const{type:w,operator:x}=g;switch(w){case"containsText":case"containsBlanks":case"notContainsBlanks":case"containsErrors":case"notContainsErrors":return{type:"containsText",operator:w};default:return{type:w,operator:x}}};class y extends o{constructor(){super(),this.map={dataBar:this.databarXform=new c,extLst:this.extLstRefXform=new a,formula:this.formulaXform=new u,colorScale:this.colorScaleXform=new h,iconSet:this.iconSetXform=new f}}get tag(){return"cfRule"}static isPrimitive(w){return w.type!=="iconSet"||!w.custom&&!m[w.iconSet]}render(w,x){switch(x.type){case"expression":this.renderExpression(w,x);break;case"cellIs":this.renderCellIs(w,x);break;case"top10":this.renderTop10(w,x);break;case"aboveAverage":this.renderAboveAverage(w,x);break;case"dataBar":this.renderDataBar(w,x);break;case"colorScale":this.renderColorScale(w,x);break;case"iconSet":this.renderIconSet(w,x);break;case"containsText":this.renderText(w,x);break;case"timePeriod":this.renderTimePeriod(w,x)}}renderExpression(w,x){w.openNode(this.tag,{type:"expression",dxfId:x.dxfId,priority:x.priority}),this.formulaXform.render(w,x.formulae[0]),w.closeNode()}renderCellIs(w,x){w.openNode(this.tag,{type:"cellIs",dxfId:x.dxfId,priority:x.priority,operator:x.operator}),x.formulae.forEach(_=>{this.formulaXform.render(w,_)}),w.closeNode()}renderTop10(w,x){w.leafNode(this.tag,{type:"top10",dxfId:x.dxfId,priority:x.priority,percent:i.toBoolAttribute(x.percent,!1),bottom:i.toBoolAttribute(x.bottom,!1),rank:i.toIntValue(x.rank,10,!0)})}renderAboveAverage(w,x){w.leafNode(this.tag,{type:"aboveAverage",dxfId:x.dxfId,priority:x.priority,aboveAverage:i.toBoolAttribute(x.aboveAverage,!0)})}renderDataBar(w,x){w.openNode(this.tag,{type:"dataBar",priority:x.priority}),this.databarXform.render(w,x),this.extLstRefXform.render(w,x),w.closeNode()}renderColorScale(w,x){w.openNode(this.tag,{type:"colorScale",priority:x.priority}),this.colorScaleXform.render(w,x),w.closeNode()}renderIconSet(w,x){y.isPrimitive(x)&&(w.openNode(this.tag,{type:"iconSet",priority:x.priority}),this.iconSetXform.render(w,x),w.closeNode())}renderText(w,x){w.openNode(this.tag,{type:x.operator,dxfId:x.dxfId,priority:x.priority,operator:i.toStringAttribute(x.operator,"containsText")});const _=(j=>{if(j.formulae&&j.formulae[0])return j.formulae[0];const R=new d(j.ref),{tl:M}=R;switch(j.operator){case"containsText":return`NOT(ISERROR(SEARCH("${j.text}",${M})))`;case"containsBlanks":return`LEN(TRIM(${M}))=0`;case"notContainsBlanks":return`LEN(TRIM(${M}))>0`;case"containsErrors":return`ISERROR(${M})`;case"notContainsErrors":return`NOT(ISERROR(${M}))`;default:return}})(x);_&&this.formulaXform.render(w,_),w.closeNode()}renderTimePeriod(w,x){w.openNode(this.tag,{type:"timePeriod",dxfId:x.dxfId,priority:x.priority,timePeriod:x.timePeriod});const _=(j=>{if(j.formulae&&j.formulae[0])return j.formulae[0];const R=new d(j.ref),{tl:M}=R;switch(j.timePeriod){case"thisWeek":return`AND(TODAY()-ROUNDDOWN(${M},0)<=WEEKDAY(TODAY())-1,ROUNDDOWN(${M},0)-TODAY()<=7-WEEKDAY(TODAY()))`;case"lastWeek":return`AND(TODAY()-ROUNDDOWN(${M},0)>=(WEEKDAY(TODAY())),TODAY()-ROUNDDOWN(${M},0)<(WEEKDAY(TODAY())+7))`;case"nextWeek":return`AND(ROUNDDOWN(${M},0)-TODAY()>(7-WEEKDAY(TODAY())),ROUNDDOWN(${M},0)-TODAY()<(15-WEEKDAY(TODAY())))`;case"yesterday":return`FLOOR(${M},1)=TODAY()-1`;case"today":return`FLOOR(${M},1)=TODAY()`;case"tomorrow":return`FLOOR(${M},1)=TODAY()+1`;case"last7Days":return`AND(TODAY()-FLOOR(${M},1)<=6,FLOOR(${M},1)<=TODAY())`;case"lastMonth":return`AND(MONTH(${M})=MONTH(EDATE(TODAY(),0-1)),YEAR(${M})=YEAR(EDATE(TODAY(),0-1)))`;case"thisMonth":return`AND(MONTH(${M})=MONTH(TODAY()),YEAR(${M})=YEAR(TODAY()))`;case"nextMonth":return`AND(MONTH(${M})=MONTH(EDATE(TODAY(),0+1)),YEAR(${M})=YEAR(EDATE(TODAY(),0+1)))`;default:return}})(x);_&&this.formulaXform.render(w,_),w.closeNode()}createNewModel(w){let{attributes:x}=w;return{...b(x),dxfId:i.toIntValue(x.dxfId),priority:i.toIntValue(x.priority),timePeriod:x.timePeriod,percent:i.toBoolValue(x.percent),bottom:i.toBoolValue(x.bottom),rank:i.toIntValue(x.rank),aboveAverage:i.toBoolValue(x.aboveAverage)}}onParserClose(w,x){switch(w){case"dataBar":case"extLst":case"colorScale":case"iconSet":Object.assign(this.model,x.model);break;case"formula":this.model.formulae=this.model.formulae||[],this.model.formulae.push(x.model)}}}s.exports=y},{"../../../../doc/range":10,"../../base-xform":32,"../../composite-xform":48,"./color-scale-xform":85,"./databar-xform":88,"./ext-lst-ref-xform":89,"./formula-xform":90,"./icon-set-xform":91}],84:[function(t,s,l){const i=t("../../base-xform");s.exports=class extends i{get tag(){return"cfvo"}render(o,d){o.leafNode(this.tag,{type:d.type,val:d.value})}parseOpen(o){this.model={type:o.attributes.type,value:i.toFloatValue(o.attributes.val)}}parseClose(o){return o!==this.tag}}},{"../../base-xform":32}],85:[function(t,s,l){const i=t("../../composite-xform"),o=t("../../style/color-xform"),d=t("./cfvo-xform");s.exports=class extends i{constructor(){super(),this.map={cfvo:this.cfvoXform=new d,color:this.colorXform=new o}}get tag(){return"colorScale"}render(c,a){c.openNode(this.tag),a.cfvo.forEach(u=>{this.cfvoXform.render(c,u)}),a.color.forEach(u=>{this.colorXform.render(c,u)}),c.closeNode()}createNewModel(c){return{cfvo:[],color:[]}}onParserClose(c,a){this.model[c].push(a.model)}}},{"../../composite-xform":48,"../../style/color-xform":128,"./cfvo-xform":84}],86:[function(t,s,l){const i=t("../../composite-xform"),o=t("./cf-rule-xform");s.exports=class extends i{constructor(){super(),this.map={cfRule:new o}}get tag(){return"conditionalFormatting"}render(d,c){c.rules.some(o.isPrimitive)&&(d.openNode(this.tag,{sqref:c.ref}),c.rules.forEach(a=>{o.isPrimitive(a)&&(a.ref=c.ref,this.map.cfRule.render(d,a))}),d.closeNode())}createNewModel(d){let{attributes:c}=d;return{ref:c.sqref,rules:[]}}onParserClose(d,c){this.model.rules.push(c.model)}}},{"../../composite-xform":48,"./cf-rule-xform":83}],87:[function(t,s,l){const i=t("../../base-xform"),o=t("./conditional-formatting-xform");s.exports=class extends i{constructor(){super(),this.cfXform=new o}get tag(){return"conditionalFormatting"}reset(){this.model=[]}prepare(d,c){let a=d.reduce((u,h)=>Math.max(u,...h.rules.map(f=>f.priority||0)),1);d.forEach(u=>{u.rules.forEach(h=>{h.priority||(h.priority=a++),h.style&&(h.dxfId=c.styles.addDxfStyle(h.style))})})}render(d,c){c.forEach(a=>{this.cfXform.render(d,a)})}parseOpen(d){if(this.parser)return this.parser.parseOpen(d),!0;switch(d.name){case"conditionalFormatting":return this.parser=this.cfXform,this.parser.parseOpen(d),!0;default:return!1}}parseText(d){this.parser&&this.parser.parseText(d)}parseClose(d){return!!this.parser&&(!!this.parser.parseClose(d)||(this.model.push(this.parser.model),this.parser=void 0,!1))}reconcile(d,c){d.forEach(a=>{a.rules.forEach(u=>{u.dxfId!==void 0&&(u.style=c.styles.getDxfStyle(u.dxfId),delete u.dxfId)})})}}},{"../../base-xform":32,"./conditional-formatting-xform":86}],88:[function(t,s,l){const i=t("../../composite-xform"),o=t("../../style/color-xform"),d=t("./cfvo-xform");s.exports=class extends i{constructor(){super(),this.map={cfvo:this.cfvoXform=new d,color:this.colorXform=new o}}get tag(){return"dataBar"}render(c,a){c.openNode(this.tag),a.cfvo.forEach(u=>{this.cfvoXform.render(c,u)}),this.colorXform.render(c,a.color),c.closeNode()}createNewModel(){return{cfvo:[]}}onParserClose(c,a){switch(c){case"cfvo":this.model.cfvo.push(a.model);break;case"color":this.model.color=a.model}}}},{"../../composite-xform":48,"../../style/color-xform":128,"./cfvo-xform":84}],89:[function(t,s,l){const i=t("../../base-xform"),o=t("../../composite-xform");class d extends i{get tag(){return"x14:id"}render(u,h){u.leafNode(this.tag,null,h)}parseOpen(){this.model=""}parseText(u){this.model+=u}parseClose(u){return u!==this.tag}}class c extends o{constructor(){super(),this.map={"x14:id":this.idXform=new d}}get tag(){return"ext"}render(u,h){u.openNode(this.tag,{uri:"{B025F937-C7B1-47D3-B67F-A62EFF666E3E}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"}),this.idXform.render(u,h.x14Id),u.closeNode()}createNewModel(){return{}}onParserClose(u,h){this.model.x14Id=h.model}}s.exports=class extends o{constructor(){super(),this.map={ext:new c}}get tag(){return"extLst"}render(a,u){a.openNode(this.tag),this.map.ext.render(a,u),a.closeNode()}createNewModel(){return{}}onParserClose(a,u){Object.assign(this.model,u.model)}}},{"../../base-xform":32,"../../composite-xform":48}],90:[function(t,s,l){const i=t("../../base-xform");s.exports=class extends i{get tag(){return"formula"}render(o,d){o.leafNode(this.tag,null,d)}parseOpen(){this.model=""}parseText(o){this.model+=o}parseClose(o){return o!==this.tag}}},{"../../base-xform":32}],91:[function(t,s,l){const i=t("../../base-xform"),o=t("../../composite-xform"),d=t("./cfvo-xform");s.exports=class extends o{constructor(){super(),this.map={cfvo:this.cfvoXform=new d}}get tag(){return"iconSet"}render(c,a){c.openNode(this.tag,{iconSet:i.toStringAttribute(a.iconSet,"3TrafficLights"),reverse:i.toBoolAttribute(a.reverse,!1),showValue:i.toBoolAttribute(a.showValue,!0)}),a.cfvo.forEach(u=>{this.cfvoXform.render(c,u)}),c.closeNode()}createNewModel(c){let{attributes:a}=c;return{iconSet:i.toStringValue(a.iconSet,"3TrafficLights"),reverse:i.toBoolValue(a.reverse),showValue:i.toBoolValue(a.showValue),cfvo:[]}}onParserClose(c,a){this.model[c].push(a.model)}}},{"../../base-xform":32,"../../composite-xform":48,"./cfvo-xform":84}],92:[function(t,s,l){const i=t("../../../utils/utils"),o=t("../base-xform");s.exports=class extends o{get tag(){return"col"}prepare(d,c){const a=c.styles.addStyleModel(d.style||{});a&&(d.styleId=a)}render(d,c){d.openNode("col"),d.addAttribute("min",c.min),d.addAttribute("max",c.max),c.width&&d.addAttribute("width",c.width),c.styleId&&d.addAttribute("style",c.styleId),c.hidden&&d.addAttribute("hidden","1"),c.bestFit&&d.addAttribute("bestFit","1"),c.outlineLevel&&d.addAttribute("outlineLevel",c.outlineLevel),c.collapsed&&d.addAttribute("collapsed","1"),d.addAttribute("customWidth","1"),d.closeNode()}parseOpen(d){if(d.name==="col"){const c=this.model={min:parseInt(d.attributes.min||"0",10),max:parseInt(d.attributes.max||"0",10),width:d.attributes.width===void 0?void 0:parseFloat(d.attributes.width||"0")};return d.attributes.style&&(c.styleId=parseInt(d.attributes.style,10)),i.parseBoolean(d.attributes.hidden)&&(c.hidden=!0),i.parseBoolean(d.attributes.bestFit)&&(c.bestFit=!0),d.attributes.outlineLevel&&(c.outlineLevel=parseInt(d.attributes.outlineLevel,10)),i.parseBoolean(d.attributes.collapsed)&&(c.collapsed=!0),!0}return!1}parseText(){}parseClose(){return!1}reconcile(d,c){d.styleId&&(d.style=c.styles.getStyleModel(d.styleId))}}},{"../../../utils/utils":27,"../base-xform":32}],93:[function(t,s,l){const i=t("../../../utils/under-dash"),o=t("../../../utils/utils"),d=t("../../../utils/col-cache"),c=t("../base-xform"),a=t("../../../doc/range");function u(f,m,b,y){const g=m[b];g!==void 0?f[b]=g:y!==void 0&&(f[b]=y)}function h(f,m,b,y){const g=m[b];g!==void 0&&(f[b]=o.parseBoolean(g))}s.exports=class extends c{get tag(){return"dataValidations"}render(f,m){const b=function(y){const g=i.map(y,(_,j)=>({address:j,dataValidation:_,marked:!1})).sort((_,j)=>i.strcmp(_.address,j.address)),w=i.keyBy(g,"address"),x=(_,j,R)=>{for(let M=0;M<j;M++){const I=d.encodeAddress(_.row+M,R);if(!y[I]||!i.isEqual(y[_.address],y[I]))return!1}return!0};return g.map(_=>{if(!_.marked){const j=d.decodeEx(_.address);if(j.dimensions)return w[j.dimensions].marked=!0,{..._.dataValidation,sqref:_.address};let R=1,M=d.encodeAddress(j.row+R,j.col);for(;y[M]&&i.isEqual(_.dataValidation,y[M]);)R++,M=d.encodeAddress(j.row+R,j.col);let I=1;for(;x(j,R,j.col+I);)I++;for(let F=0;F<R;F++)for(let B=0;B<I;B++)M=d.encodeAddress(j.row+F,j.col+B),w[M].marked=!0;if(R>1||I>1){const F=j.row+(R-1),B=j.col+(I-1);return{..._.dataValidation,sqref:`${_.address}:${d.encodeAddress(F,B)}`}}return{..._.dataValidation,sqref:_.address}}return null}).filter(Boolean)}(m);b.length&&(f.openNode("dataValidations",{count:b.length}),b.forEach(y=>{f.openNode("dataValidation"),y.type!=="any"&&(f.addAttribute("type",y.type),y.operator&&y.type!=="list"&&y.operator!=="between"&&f.addAttribute("operator",y.operator),y.allowBlank&&f.addAttribute("allowBlank","1")),y.showInputMessage&&f.addAttribute("showInputMessage","1"),y.promptTitle&&f.addAttribute("promptTitle",y.promptTitle),y.prompt&&f.addAttribute("prompt",y.prompt),y.showErrorMessage&&f.addAttribute("showErrorMessage","1"),y.errorStyle&&f.addAttribute("errorStyle",y.errorStyle),y.errorTitle&&f.addAttribute("errorTitle",y.errorTitle),y.error&&f.addAttribute("error",y.error),f.addAttribute("sqref",y.sqref),(y.formulae||[]).forEach((g,w)=>{f.openNode("formula"+(w+1)),y.type==="date"?f.writeText(o.dateToExcel(new Date(g))):f.writeText(g),f.closeNode()}),f.closeNode()}),f.closeNode())}parseOpen(f){switch(f.name){case"dataValidations":return this.model={},!0;case"dataValidation":{this._address=f.attributes.sqref;const m={type:f.attributes.type||"any",formulae:[]};switch(f.attributes.type&&h(m,f.attributes,"allowBlank"),h(m,f.attributes,"showInputMessage"),h(m,f.attributes,"showErrorMessage"),m.type){case"any":case"list":case"custom":break;default:u(m,f.attributes,"operator","between")}return u(m,f.attributes,"promptTitle"),u(m,f.attributes,"prompt"),u(m,f.attributes,"errorStyle"),u(m,f.attributes,"errorTitle"),u(m,f.attributes,"error"),this._dataValidation=m,!0}case"formula1":case"formula2":return this._formula=[],!0;default:return!1}}parseText(f){this._formula&&this._formula.push(f)}parseClose(f){switch(f){case"dataValidations":return!1;case"dataValidation":return this._dataValidation.formulae&&this._dataValidation.formulae.length||(delete this._dataValidation.formulae,delete this._dataValidation.operator),(this._address.split(/\s+/g)||[]).forEach(m=>{m.includes(":")?new a(m).forEachAddress(b=>{this.model[b]=this._dataValidation}):this.model[m]=this._dataValidation}),!0;case"formula1":case"formula2":{let m=this._formula.join("");switch(this._dataValidation.type){case"whole":case"textLength":m=parseInt(m,10);break;case"decimal":m=parseFloat(m);break;case"date":m=o.excelToDate(parseFloat(m))}return this._dataValidation.formulae.push(m),this._formula=void 0,!0}default:return!0}}}},{"../../../doc/range":10,"../../../utils/col-cache":19,"../../../utils/under-dash":26,"../../../utils/utils":27,"../base-xform":32}],94:[function(t,s,l){const i=t("../base-xform");s.exports=class extends i{get tag(){return"dimension"}render(o,d){d&&o.leafNode("dimension",{ref:d})}parseOpen(o){return o.name==="dimension"&&(this.model=o.attributes.ref,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],95:[function(t,s,l){const i=t("../base-xform");s.exports=class extends i{get tag(){return"drawing"}render(o,d){d&&o.leafNode(this.tag,{"r:id":d.rId})}parseOpen(o){switch(o.name){case this.tag:return this.model={rId:o.attributes["r:id"]},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],96:[function(t,s,l){const i=t("../composite-xform"),o=t("./cf-ext/conditional-formattings-ext-xform");class d extends i{constructor(){super(),this.map={"x14:conditionalFormattings":this.conditionalFormattings=new o}}get tag(){return"ext"}hasContent(a){return this.conditionalFormattings.hasContent(a.conditionalFormattings)}prepare(a,u){this.conditionalFormattings.prepare(a.conditionalFormattings,u)}render(a,u){a.openNode("ext",{uri:"{78C0D931-6437-407d-A8EE-F0AAD7539E65}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"}),this.conditionalFormattings.render(a,u.conditionalFormattings),a.closeNode()}createNewModel(){return{}}onParserClose(a,u){this.model[a]=u.model}}s.exports=class extends i{constructor(){super(),this.map={ext:this.ext=new d}}get tag(){return"extLst"}prepare(c,a){this.ext.prepare(c,a)}hasContent(c){return this.ext.hasContent(c)}render(c,a){this.hasContent(a)&&(c.openNode("extLst"),this.ext.render(c,a),c.closeNode())}createNewModel(){return{}}onParserClose(c,a){Object.assign(this.model,a.model)}}},{"../composite-xform":48,"./cf-ext/conditional-formattings-ext-xform":78}],97:[function(t,s,l){const i=t("../base-xform");s.exports=class extends i{get tag(){return"headerFooter"}render(o,d){if(d){o.addRollback();let c=!1;o.openNode("headerFooter"),d.differentFirst&&(o.addAttribute("differentFirst","1"),c=!0),d.differentOddEven&&(o.addAttribute("differentOddEven","1"),c=!0),d.oddHeader&&typeof d.oddHeader=="string"&&(o.leafNode("oddHeader",null,d.oddHeader),c=!0),d.oddFooter&&typeof d.oddFooter=="string"&&(o.leafNode("oddFooter",null,d.oddFooter),c=!0),d.evenHeader&&typeof d.evenHeader=="string"&&(o.leafNode("evenHeader",null,d.evenHeader),c=!0),d.evenFooter&&typeof d.evenFooter=="string"&&(o.leafNode("evenFooter",null,d.evenFooter),c=!0),d.firstHeader&&typeof d.firstHeader=="string"&&(o.leafNode("firstHeader",null,d.firstHeader),c=!0),d.firstFooter&&typeof d.firstFooter=="string"&&(o.leafNode("firstFooter",null,d.firstFooter),c=!0),c?(o.closeNode(),o.commit()):o.rollback()}}parseOpen(o){switch(o.name){case"headerFooter":return this.model={},o.attributes.differentFirst&&(this.model.differentFirst=parseInt(o.attributes.differentFirst,0)===1),o.attributes.differentOddEven&&(this.model.differentOddEven=parseInt(o.attributes.differentOddEven,0)===1),!0;case"oddHeader":return this.currentNode="oddHeader",!0;case"oddFooter":return this.currentNode="oddFooter",!0;case"evenHeader":return this.currentNode="evenHeader",!0;case"evenFooter":return this.currentNode="evenFooter",!0;case"firstHeader":return this.currentNode="firstHeader",!0;case"firstFooter":return this.currentNode="firstFooter",!0;default:return!1}}parseText(o){switch(this.currentNode){case"oddHeader":this.model.oddHeader=o;break;case"oddFooter":this.model.oddFooter=o;break;case"evenHeader":this.model.evenHeader=o;break;case"evenFooter":this.model.evenFooter=o;break;case"firstHeader":this.model.firstHeader=o;break;case"firstFooter":this.model.firstFooter=o}}parseClose(){switch(this.currentNode){case"oddHeader":case"oddFooter":case"evenHeader":case"evenFooter":case"firstHeader":case"firstFooter":return this.currentNode=void 0,!0;default:return!1}}}},{"../base-xform":32}],98:[function(t,s,l){const i=t("../base-xform");s.exports=class extends i{get tag(){return"hyperlink"}render(o,d){this.isInternalLink(d)?o.leafNode("hyperlink",{ref:d.address,"r:id":d.rId,tooltip:d.tooltip,location:d.target}):o.leafNode("hyperlink",{ref:d.address,"r:id":d.rId,tooltip:d.tooltip})}parseOpen(o){return o.name==="hyperlink"&&(this.model={address:o.attributes.ref,rId:o.attributes["r:id"],tooltip:o.attributes.tooltip},o.attributes.location&&(this.model.target=o.attributes.location),!0)}parseText(){}parseClose(){return!1}isInternalLink(o){return o.target&&/^[^!]+![a-zA-Z]+[\d]+$/.test(o.target)}}},{"../base-xform":32}],99:[function(t,s,l){const i=t("../base-xform");s.exports=class extends i{get tag(){return"mergeCell"}render(o,d){o.leafNode("mergeCell",{ref:d})}parseOpen(o){return o.name==="mergeCell"&&(this.model=o.attributes.ref,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],100:[function(t,s,l){const i=t("../../../utils/under-dash"),o=t("../../../doc/range"),d=t("../../../utils/col-cache"),c=t("../../../doc/enums");s.exports=class{constructor(){this.merges={}}add(a){if(this.merges[a.master])this.merges[a.master].expandToAddress(a.address);else{const u=`${a.master}:${a.address}`;this.merges[a.master]=new o(u)}}get mergeCells(){return i.map(this.merges,a=>a.range)}reconcile(a,u){i.each(a,h=>{const f=d.decode(h);for(let m=f.top;m<=f.bottom;m++){const b=u[m-1];for(let y=f.left;y<=f.right;y++){const g=b.cells[y-1];g?g.type===c.ValueType.Merge&&(g.master=f.tl):b.cells[y]={type:c.ValueType.Null,address:d.encodeAddress(m,y)}}}})}getMasterAddress(a){const u=this.hash[a];return u&&u.tl}}},{"../../../doc/enums":7,"../../../doc/range":10,"../../../utils/col-cache":19,"../../../utils/under-dash":26}],101:[function(t,s,l){const i=t("../base-xform"),o=d=>d!==void 0;s.exports=class extends i{get tag(){return"outlinePr"}render(d,c){return!(!c||!o(c.summaryBelow)&&!o(c.summaryRight))&&(d.leafNode(this.tag,{summaryBelow:o(c.summaryBelow)?Number(c.summaryBelow):void 0,summaryRight:o(c.summaryRight)?Number(c.summaryRight):void 0}),!0)}parseOpen(d){return d.name===this.tag&&(this.model={summaryBelow:o(d.attributes.summaryBelow)?!!Number(d.attributes.summaryBelow):void 0,summaryRight:o(d.attributes.summaryRight)?!!Number(d.attributes.summaryRight):void 0},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],102:[function(t,s,l){const i=t("../base-xform");s.exports=class extends i{get tag(){return"brk"}render(o,d){o.leafNode("brk",d)}parseOpen(o){return o.name==="brk"&&(this.model=o.attributes.ref,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],103:[function(t,s,l){const i=t("../../../utils/under-dash"),o=t("../base-xform");s.exports=class extends o{get tag(){return"pageMargins"}render(d,c){if(c){const a={left:c.left,right:c.right,top:c.top,bottom:c.bottom,header:c.header,footer:c.footer};i.some(a,u=>u!==void 0)&&d.leafNode(this.tag,a)}}parseOpen(d){switch(d.name){case this.tag:return this.model={left:parseFloat(d.attributes.left||.7),right:parseFloat(d.attributes.right||.7),top:parseFloat(d.attributes.top||.75),bottom:parseFloat(d.attributes.bottom||.75),header:parseFloat(d.attributes.header||.3),footer:parseFloat(d.attributes.footer||.3)},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],104:[function(t,s,l){const i=t("../base-xform");s.exports=class extends i{get tag(){return"pageSetUpPr"}render(o,d){return!(!d||!d.fitToPage)&&(o.leafNode(this.tag,{fitToPage:d.fitToPage?"1":void 0}),!0)}parseOpen(o){return o.name===this.tag&&(this.model={fitToPage:o.attributes.fitToPage==="1"},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],105:[function(t,s,l){const i=t("../../../utils/under-dash"),o=t("../base-xform");function d(h){return h?"1":void 0}function c(h){switch(h){case"overThenDown":return h;default:return}}function a(h){switch(h){case"atEnd":case"asDisplyed":return h;default:return}}function u(h){switch(h){case"dash":case"blank":case"NA":return h;default:return}}s.exports=class extends o{get tag(){return"pageSetup"}render(h,f){if(f){const m={paperSize:f.paperSize,orientation:f.orientation,horizontalDpi:f.horizontalDpi,verticalDpi:f.verticalDpi,pageOrder:c(f.pageOrder),blackAndWhite:d(f.blackAndWhite),draft:d(f.draft),cellComments:a(f.cellComments),errors:u(f.errors),scale:f.scale,fitToWidth:f.fitToWidth,fitToHeight:f.fitToHeight,firstPageNumber:f.firstPageNumber,useFirstPageNumber:d(f.firstPageNumber),usePrinterDefaults:d(f.usePrinterDefaults),copies:f.copies};i.some(m,b=>b!==void 0)&&h.leafNode(this.tag,m)}}parseOpen(h){switch(h.name){case this.tag:return this.model={paperSize:(f=h.attributes.paperSize,f!==void 0?parseInt(f,10):void 0),orientation:h.attributes.orientation||"portrait",horizontalDpi:parseInt(h.attributes.horizontalDpi||"4294967295",10),verticalDpi:parseInt(h.attributes.verticalDpi||"4294967295",10),pageOrder:h.attributes.pageOrder||"downThenOver",blackAndWhite:h.attributes.blackAndWhite==="1",draft:h.attributes.draft==="1",cellComments:h.attributes.cellComments||"None",errors:h.attributes.errors||"displayed",scale:parseInt(h.attributes.scale||"100",10),fitToWidth:parseInt(h.attributes.fitToWidth||"1",10),fitToHeight:parseInt(h.attributes.fitToHeight||"1",10),firstPageNumber:parseInt(h.attributes.firstPageNumber||"1",10),useFirstPageNumber:h.attributes.useFirstPageNumber==="1",usePrinterDefaults:h.attributes.usePrinterDefaults==="1",copies:parseInt(h.attributes.copies||"1",10)},!0;default:return!1}var f}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],106:[function(t,s,l){const i=t("../base-xform");s.exports=class extends i{get tag(){return"picture"}render(o,d){d&&o.leafNode(this.tag,{"r:id":d.rId})}parseOpen(o){switch(o.name){case this.tag:return this.model={rId:o.attributes["r:id"]},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],107:[function(t,s,l){const i=t("../../../utils/under-dash"),o=t("../base-xform");function d(c){return c?"1":void 0}s.exports=class extends o{get tag(){return"printOptions"}render(c,a){if(a){const u={headings:d(a.showRowColHeaders),gridLines:d(a.showGridLines),horizontalCentered:d(a.horizontalCentered),verticalCentered:d(a.verticalCentered)};i.some(u,h=>h!==void 0)&&c.leafNode(this.tag,u)}}parseOpen(c){switch(c.name){case this.tag:return this.model={showRowColHeaders:c.attributes.headings==="1",showGridLines:c.attributes.gridLines==="1",horizontalCentered:c.attributes.horizontalCentered==="1",verticalCentered:c.attributes.verticalCentered==="1"},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],108:[function(t,s,l){const i=t("./page-breaks-xform"),o=t("../list-xform");s.exports=class extends o{constructor(){super({tag:"rowBreaks",count:!0,childXform:new i})}render(d,c){if(c&&c.length){d.openNode(this.tag,this.$),this.count&&(d.addAttribute(this.$count,c.length),d.addAttribute("manualBreakCount",c.length));const{childXform:a}=this;c.forEach(u=>{a.render(d,u)}),d.closeNode()}else this.empty&&d.leafNode(this.tag)}}},{"../list-xform":71,"./page-breaks-xform":102}],109:[function(t,s,l){const i=t("../base-xform"),o=t("../../../utils/utils"),d=t("./cell-xform");s.exports=class extends i{constructor(c){super(),this.maxItems=c&&c.maxItems,this.map={c:new d}}get tag(){return"row"}prepare(c,a){const u=a.styles.addStyleModel(c.style);u&&(c.styleId=u);const h=this.map.c;c.cells.forEach(f=>{h.prepare(f,a)})}render(c,a,u){c.openNode("row"),c.addAttribute("r",a.number),a.height&&(c.addAttribute("ht",a.height),c.addAttribute("customHeight","1")),a.hidden&&c.addAttribute("hidden","1"),a.min>0&&a.max>0&&a.min<=a.max&&c.addAttribute("spans",`${a.min}:${a.max}`),a.styleId&&(c.addAttribute("s",a.styleId),c.addAttribute("customFormat","1")),c.addAttribute("x14ac:dyDescent","0.25"),a.outlineLevel&&c.addAttribute("outlineLevel",a.outlineLevel),a.collapsed&&c.addAttribute("collapsed","1");const h=this.map.c;a.cells.forEach(f=>{h.render(c,f,u)}),c.closeNode()}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;if(c.name==="row"){this.numRowsSeen+=1;const a=c.attributes.spans?c.attributes.spans.split(":").map(h=>parseInt(h,10)):[void 0,void 0],u=this.model={number:parseInt(c.attributes.r,10),min:a[0],max:a[1],cells:[]};return c.attributes.s&&(u.styleId=parseInt(c.attributes.s,10)),o.parseBoolean(c.attributes.hidden)&&(u.hidden=!0),o.parseBoolean(c.attributes.bestFit)&&(u.bestFit=!0),c.attributes.ht&&(u.height=parseFloat(c.attributes.ht)),c.attributes.outlineLevel&&(u.outlineLevel=parseInt(c.attributes.outlineLevel,10)),o.parseBoolean(c.attributes.collapsed)&&(u.collapsed=!0),!0}return this.parser=this.map[c.name],!!this.parser&&(this.parser.parseOpen(c),!0)}parseText(c){this.parser&&this.parser.parseText(c)}parseClose(c){if(this.parser){if(!this.parser.parseClose(c)){if(this.model.cells.push(this.parser.model),this.maxItems&&this.model.cells.length>this.maxItems)throw new Error(`Max column count (${this.maxItems}) exceeded`);this.parser=void 0}return!0}return!1}reconcile(c,a){c.style=c.styleId?a.styles.getStyleModel(c.styleId):{},c.styleId!==void 0&&(c.styleId=void 0);const u=this.map.c;c.cells.forEach(h=>{u.reconcile(h,a)})}}},{"../../../utils/utils":27,"../base-xform":32,"./cell-xform":73}],110:[function(t,s,l){const i=t("../../../utils/under-dash"),o=t("../base-xform");s.exports=class extends o{get tag(){return"sheetFormatPr"}render(d,c){if(c){const a={defaultRowHeight:c.defaultRowHeight,outlineLevelRow:c.outlineLevelRow,outlineLevelCol:c.outlineLevelCol,"x14ac:dyDescent":c.dyDescent};c.defaultColWidth&&(a.defaultColWidth=c.defaultColWidth),c.defaultRowHeight&&c.defaultRowHeight===15||(a.customHeight="1"),i.some(a,u=>u!==void 0)&&d.leafNode("sheetFormatPr",a)}}parseOpen(d){return d.name==="sheetFormatPr"&&(this.model={defaultRowHeight:parseFloat(d.attributes.defaultRowHeight||"0"),dyDescent:parseFloat(d.attributes["x14ac:dyDescent"]||"0"),outlineLevelRow:parseInt(d.attributes.outlineLevelRow||"0",10),outlineLevelCol:parseInt(d.attributes.outlineLevelCol||"0",10)},d.attributes.defaultColWidth&&(this.model.defaultColWidth=parseFloat(d.attributes.defaultColWidth)),!0)}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],111:[function(t,s,l){const i=t("../base-xform"),o=t("../style/color-xform"),d=t("./page-setup-properties-xform"),c=t("./outline-properties-xform");s.exports=class extends i{constructor(){super(),this.map={tabColor:new o("tabColor"),pageSetUpPr:new d,outlinePr:new c}}get tag(){return"sheetPr"}render(a,u){if(u){a.addRollback(),a.openNode("sheetPr");let h=!1;h=this.map.tabColor.render(a,u.tabColor)||h,h=this.map.pageSetUpPr.render(a,u.pageSetup)||h,h=this.map.outlinePr.render(a,u.outlineProperties)||h,h?(a.closeNode(),a.commit()):a.rollback()}}parseOpen(a){return this.parser?(this.parser.parseOpen(a),!0):a.name===this.tag?(this.reset(),!0):!!this.map[a.name]&&(this.parser=this.map[a.name],this.parser.parseOpen(a),!0)}parseText(a){return!!this.parser&&(this.parser.parseText(a),!0)}parseClose(a){return this.parser?(this.parser.parseClose(a)||(this.parser=void 0),!0):(this.map.tabColor.model||this.map.pageSetUpPr.model||this.map.outlinePr.model?(this.model={},this.map.tabColor.model&&(this.model.tabColor=this.map.tabColor.model),this.map.pageSetUpPr.model&&(this.model.pageSetup=this.map.pageSetUpPr.model),this.map.outlinePr.model&&(this.model.outlineProperties=this.map.outlinePr.model)):this.model=null,!1)}}},{"../base-xform":32,"../style/color-xform":128,"./outline-properties-xform":101,"./page-setup-properties-xform":104}],112:[function(t,s,l){const i=t("../../../utils/under-dash"),o=t("../base-xform");function d(a,u){return a?u:void 0}function c(a,u){return a===u||void 0}s.exports=class extends o{get tag(){return"sheetProtection"}render(a,u){if(u){const h={sheet:d(u.sheet,"1"),selectLockedCells:u.selectLockedCells===!1?"1":void 0,selectUnlockedCells:u.selectUnlockedCells===!1?"1":void 0,formatCells:d(u.formatCells,"0"),formatColumns:d(u.formatColumns,"0"),formatRows:d(u.formatRows,"0"),insertColumns:d(u.insertColumns,"0"),insertRows:d(u.insertRows,"0"),insertHyperlinks:d(u.insertHyperlinks,"0"),deleteColumns:d(u.deleteColumns,"0"),deleteRows:d(u.deleteRows,"0"),sort:d(u.sort,"0"),autoFilter:d(u.autoFilter,"0"),pivotTables:d(u.pivotTables,"0")};u.sheet&&(h.algorithmName=u.algorithmName,h.hashValue=u.hashValue,h.saltValue=u.saltValue,h.spinCount=u.spinCount,h.objects=d(u.objects===!1,"1"),h.scenarios=d(u.scenarios===!1,"1")),i.some(h,f=>f!==void 0)&&a.leafNode(this.tag,h)}}parseOpen(a){switch(a.name){case this.tag:return this.model={sheet:c(a.attributes.sheet,"1"),objects:a.attributes.objects!=="1"&&void 0,scenarios:a.attributes.scenarios!=="1"&&void 0,selectLockedCells:a.attributes.selectLockedCells!=="1"&&void 0,selectUnlockedCells:a.attributes.selectUnlockedCells!=="1"&&void 0,formatCells:c(a.attributes.formatCells,"0"),formatColumns:c(a.attributes.formatColumns,"0"),formatRows:c(a.attributes.formatRows,"0"),insertColumns:c(a.attributes.insertColumns,"0"),insertRows:c(a.attributes.insertRows,"0"),insertHyperlinks:c(a.attributes.insertHyperlinks,"0"),deleteColumns:c(a.attributes.deleteColumns,"0"),deleteRows:c(a.attributes.deleteRows,"0"),sort:c(a.attributes.sort,"0"),autoFilter:c(a.attributes.autoFilter,"0"),pivotTables:c(a.attributes.pivotTables,"0")},a.attributes.algorithmName&&(this.model.algorithmName=a.attributes.algorithmName,this.model.hashValue=a.attributes.hashValue,this.model.saltValue=a.attributes.saltValue,this.model.spinCount=parseInt(a.attributes.spinCount,10)),!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],113:[function(t,s,l){const i=t("../../../utils/col-cache"),o=t("../base-xform"),d={frozen:"frozen",frozenSplit:"frozen",split:"split"};s.exports=class extends o{get tag(){return"sheetView"}prepare(c){switch(c.state){case"frozen":case"split":break;default:c.state="normal"}}render(c,a){c.openNode("sheetView",{workbookViewId:a.workbookViewId||0});const u=function(y,g,w){w&&c.addAttribute(y,g)};let h,f,m,b;switch(u("rightToLeft","1",a.rightToLeft===!0),u("tabSelected","1",a.tabSelected),u("showRuler","0",a.showRuler===!1),u("showRowColHeaders","0",a.showRowColHeaders===!1),u("showGridLines","0",a.showGridLines===!1),u("zoomScale",a.zoomScale,a.zoomScale),u("zoomScaleNormal",a.zoomScaleNormal,a.zoomScaleNormal),u("view",a.style,a.style),a.state){case"frozen":f=a.xSplit||0,m=a.ySplit||0,h=a.topLeftCell||i.getAddress(m+1,f+1).address,b=(a.xSplit&&a.ySplit?"bottomRight":a.xSplit&&"topRight")||"bottomLeft",c.leafNode("pane",{xSplit:a.xSplit||void 0,ySplit:a.ySplit||void 0,topLeftCell:h,activePane:b,state:"frozen"}),c.leafNode("selection",{pane:b,activeCell:a.activeCell,sqref:a.activeCell});break;case"split":a.activePane==="topLeft"&&(a.activePane=void 0),c.leafNode("pane",{xSplit:a.xSplit||void 0,ySplit:a.ySplit||void 0,topLeftCell:a.topLeftCell,activePane:a.activePane}),c.leafNode("selection",{pane:a.activePane,activeCell:a.activeCell,sqref:a.activeCell});break;case"normal":a.activeCell&&c.leafNode("selection",{activeCell:a.activeCell,sqref:a.activeCell})}c.closeNode()}parseOpen(c){switch(c.name){case"sheetView":return this.sheetView={workbookViewId:parseInt(c.attributes.workbookViewId,10),rightToLeft:c.attributes.rightToLeft==="1",tabSelected:c.attributes.tabSelected==="1",showRuler:c.attributes.showRuler!=="0",showRowColHeaders:c.attributes.showRowColHeaders!=="0",showGridLines:c.attributes.showGridLines!=="0",zoomScale:parseInt(c.attributes.zoomScale||"100",10),zoomScaleNormal:parseInt(c.attributes.zoomScaleNormal||"100",10),style:c.attributes.view},this.pane=void 0,this.selections={},!0;case"pane":return this.pane={xSplit:parseInt(c.attributes.xSplit||"0",10),ySplit:parseInt(c.attributes.ySplit||"0",10),topLeftCell:c.attributes.topLeftCell,activePane:c.attributes.activePane||"topLeft",state:c.attributes.state},!0;case"selection":{const a=c.attributes.pane||"topLeft";return this.selections[a]={pane:a,activeCell:c.attributes.activeCell},!0}default:return!1}}parseText(){}parseClose(c){let a,u;switch(c){case"sheetView":return this.sheetView&&this.pane?(a=this.model={workbookViewId:this.sheetView.workbookViewId,rightToLeft:this.sheetView.rightToLeft,state:d[this.pane.state]||"split",xSplit:this.pane.xSplit,ySplit:this.pane.ySplit,topLeftCell:this.pane.topLeftCell,showRuler:this.sheetView.showRuler,showRowColHeaders:this.sheetView.showRowColHeaders,showGridLines:this.sheetView.showGridLines,zoomScale:this.sheetView.zoomScale,zoomScaleNormal:this.sheetView.zoomScaleNormal},this.model.state==="split"&&(a.activePane=this.pane.activePane),u=this.selections[this.pane.activePane],u&&u.activeCell&&(a.activeCell=u.activeCell),this.sheetView.style&&(a.style=this.sheetView.style)):(a=this.model={workbookViewId:this.sheetView.workbookViewId,rightToLeft:this.sheetView.rightToLeft,state:"normal",showRuler:this.sheetView.showRuler,showRowColHeaders:this.sheetView.showRowColHeaders,showGridLines:this.sheetView.showGridLines,zoomScale:this.sheetView.zoomScale,zoomScaleNormal:this.sheetView.zoomScaleNormal},u=this.selections.topLeft,u&&u.activeCell&&(a.activeCell=u.activeCell),this.sheetView.style&&(a.style=this.sheetView.style)),!1;default:return!0}}reconcile(){}}},{"../../../utils/col-cache":19,"../base-xform":32}],114:[function(t,s,l){const i=t("../base-xform");s.exports=class extends i{get tag(){return"tablePart"}render(o,d){d&&o.leafNode(this.tag,{"r:id":d.rId})}parseOpen(o){switch(o.name){case this.tag:return this.model={rId:o.attributes["r:id"]},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],115:[function(t,s,l){const i=t("../../../utils/under-dash"),o=t("../../../utils/col-cache"),d=t("../../../utils/xml-stream"),c=t("../../rel-type"),a=t("./merges"),u=t("../base-xform"),h=t("../list-xform"),f=t("./row-xform"),m=t("./col-xform"),b=t("./dimension-xform"),y=t("./hyperlink-xform"),g=t("./merge-cell-xform"),w=t("./data-validations-xform"),x=t("./sheet-properties-xform"),_=t("./sheet-format-properties-xform"),j=t("./sheet-view-xform"),R=t("./sheet-protection-xform"),M=t("./page-margins-xform"),I=t("./page-setup-xform"),F=t("./print-options-xform"),B=t("./auto-filter-xform"),U=t("./picture-xform"),Q=t("./drawing-xform"),K=t("./table-part-xform"),T=t("./row-breaks-xform"),P=t("./header-footer-xform"),A=t("./cf/conditional-formattings-xform"),N=t("./ext-lst-xform"),k=(E,O)=>{if(!O||!O.length)return E;if(!E||!E.length)return O;const L={},z={};return E.forEach(G=>{L[G.ref]=G,G.rules.forEach(Z=>{const{x14Id:ee}=Z;ee&&(z[ee]=Z)})}),O.forEach(G=>{G.rules.forEach(Z=>{const ee=z[Z.x14Id];ee?((W,J)=>{Object.keys(J).forEach($=>{const q=W[$],Y=J[$];q===void 0&&Y!==void 0&&(W[$]=Y)})})(ee,Z):L[G.ref]?L[G.ref].rules.push(Z):E.push({ref:G.ref,rules:[Z]})})}),E};class S extends u{constructor(O){super();const{maxRows:L,maxCols:z,ignoreNodes:G}=O||{};this.ignoreNodes=G||[],this.map={sheetPr:new x,dimension:new b,sheetViews:new h({tag:"sheetViews",count:!1,childXform:new j}),sheetFormatPr:new _,cols:new h({tag:"cols",count:!1,childXform:new m}),sheetData:new h({tag:"sheetData",count:!1,empty:!0,childXform:new f({maxItems:z}),maxItems:L}),autoFilter:new B,mergeCells:new h({tag:"mergeCells",count:!0,childXform:new g}),rowBreaks:new T,hyperlinks:new h({tag:"hyperlinks",count:!1,childXform:new y}),pageMargins:new M,dataValidations:new w,pageSetup:new I,headerFooter:new P,printOptions:new F,picture:new U,drawing:new Q,sheetProtection:new R,tableParts:new h({tag:"tableParts",count:!0,childXform:new K}),conditionalFormatting:new A,extLst:new N}}prepare(O,L){L.merges=new a,O.hyperlinks=L.hyperlinks=[],O.comments=L.comments=[],L.formulae={},L.siFormulae=0,this.map.cols.prepare(O.cols,L),this.map.sheetData.prepare(O.rows,L),this.map.conditionalFormatting.prepare(O.conditionalFormattings,L),O.mergeCells=L.merges.mergeCells;const z=O.rels=[];function G(W){return"rId"+(W.length+1)}if(O.hyperlinks.forEach(W=>{const J=G(z);W.rId=J,z.push({Id:J,Type:c.Hyperlink,Target:W.target,TargetMode:"External"})}),O.comments.length>0){const W={Id:G(z),Type:c.Comments,Target:`../comments${O.id}.xml`};z.push(W);const J={Id:G(z),Type:c.VmlDrawing,Target:`../drawings/vmlDrawing${O.id}.vml`};z.push(J),O.comments.forEach($=>{$.refAddress=o.decodeAddress($.ref)}),L.commentRefs.push({commentName:"comments"+O.id,vmlDrawing:"vmlDrawing"+O.id})}const Z=[];let ee;O.media.forEach(W=>{if(W.type==="background"){const J=G(z);ee=L.media[W.imageId],z.push({Id:J,Type:c.Image,Target:`../media/${ee.name}.${ee.extension}`}),O.background={rId:J},O.image=L.media[W.imageId]}else if(W.type==="image"){let{drawing:J}=O;ee=L.media[W.imageId],J||(J=O.drawing={rId:G(z),name:"drawing"+ ++L.drawingsCount,anchors:[],rels:[]},L.drawings.push(J),z.push({Id:J.rId,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",Target:`../drawings/${J.name}.xml`}));let $=this.preImageId===W.imageId?Z[W.imageId]:Z[J.rels.length];$||($=G(J.rels),Z[J.rels.length]=$,J.rels.push({Id:$,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",Target:`../media/${ee.name}.${ee.extension}`}));const q={picture:{rId:$},range:W.range};if(W.hyperlinks&&W.hyperlinks.hyperlink){const Y=G(J.rels);Z[J.rels.length]=Y,q.picture.hyperlinks={tooltip:W.hyperlinks.tooltip,rId:Y},J.rels.push({Id:Y,Type:c.Hyperlink,Target:W.hyperlinks.hyperlink,TargetMode:"External"})}this.preImageId=W.imageId,J.anchors.push(q)}}),O.tables.forEach(W=>{const J=G(z);W.rId=J,z.push({Id:J,Type:c.Table,Target:"../tables/"+W.target}),W.columns.forEach($=>{const{style:q}=$;q&&($.dxfId=L.styles.addDxfStyle(q))})}),this.map.extLst.prepare(O,L)}render(O,L){O.openXml(d.StdDocAttributes),O.openNode("worksheet",S.WORKSHEET_ATTRIBUTES);const z=L.properties?{defaultRowHeight:L.properties.defaultRowHeight,dyDescent:L.properties.dyDescent,outlineLevelCol:L.properties.outlineLevelCol,outlineLevelRow:L.properties.outlineLevelRow}:void 0;L.properties&&L.properties.defaultColWidth&&(z.defaultColWidth=L.properties.defaultColWidth);const G={outlineProperties:L.properties&&L.properties.outlineProperties,tabColor:L.properties&&L.properties.tabColor,pageSetup:L.pageSetup&&L.pageSetup.fitToPage?{fitToPage:L.pageSetup.fitToPage}:void 0},Z=L.pageSetup&&L.pageSetup.margins,ee={showRowColHeaders:L.pageSetup&&L.pageSetup.showRowColHeaders,showGridLines:L.pageSetup&&L.pageSetup.showGridLines,horizontalCentered:L.pageSetup&&L.pageSetup.horizontalCentered,verticalCentered:L.pageSetup&&L.pageSetup.verticalCentered},W=L.sheetProtection;this.map.sheetPr.render(O,G),this.map.dimension.render(O,L.dimensions),this.map.sheetViews.render(O,L.views),this.map.sheetFormatPr.render(O,z),this.map.cols.render(O,L.cols),this.map.sheetData.render(O,L.rows),this.map.sheetProtection.render(O,W),this.map.autoFilter.render(O,L.autoFilter),this.map.mergeCells.render(O,L.mergeCells),this.map.conditionalFormatting.render(O,L.conditionalFormattings),this.map.dataValidations.render(O,L.dataValidations),this.map.hyperlinks.render(O,L.hyperlinks),this.map.printOptions.render(O,ee),this.map.pageMargins.render(O,Z),this.map.pageSetup.render(O,L.pageSetup),this.map.headerFooter.render(O,L.headerFooter),this.map.rowBreaks.render(O,L.rowBreaks),this.map.drawing.render(O,L.drawing),this.map.picture.render(O,L.background),this.map.tableParts.render(O,L.tables),this.map.extLst.render(O,L),L.rels&&L.rels.forEach(J=>{J.Type===c.VmlDrawing&&O.leafNode("legacyDrawing",{"r:id":J.Id})}),O.closeNode()}parseOpen(O){return this.parser?(this.parser.parseOpen(O),!0):O.name==="worksheet"?(i.each(this.map,L=>{L.reset()}),!0):(this.map[O.name]&&!this.ignoreNodes.includes(O.name)&&(this.parser=this.map[O.name],this.parser.parseOpen(O)),!0)}parseText(O){this.parser&&this.parser.parseText(O)}parseClose(O){if(this.parser)return this.parser.parseClose(O)||(this.parser=void 0),!0;switch(O){case"worksheet":{const L=this.map.sheetFormatPr.model||{};this.map.sheetPr.model&&this.map.sheetPr.model.tabColor&&(L.tabColor=this.map.sheetPr.model.tabColor),this.map.sheetPr.model&&this.map.sheetPr.model.outlineProperties&&(L.outlineProperties=this.map.sheetPr.model.outlineProperties);const z={fitToPage:this.map.sheetPr.model&&this.map.sheetPr.model.pageSetup&&this.map.sheetPr.model.pageSetup.fitToPage||!1,margins:this.map.pageMargins.model},G=Object.assign(z,this.map.pageSetup.model,this.map.printOptions.model),Z=k(this.map.conditionalFormatting.model,this.map.extLst.model&&this.map.extLst.model["x14:conditionalFormattings"]);return this.model={dimensions:this.map.dimension.model,cols:this.map.cols.model,rows:this.map.sheetData.model,mergeCells:this.map.mergeCells.model,hyperlinks:this.map.hyperlinks.model,dataValidations:this.map.dataValidations.model,properties:L,views:this.map.sheetViews.model,pageSetup:G,headerFooter:this.map.headerFooter.model,background:this.map.picture.model,drawing:this.map.drawing.model,tables:this.map.tableParts.model,conditionalFormattings:Z},this.map.autoFilter.model&&(this.model.autoFilter=this.map.autoFilter.model),this.map.sheetProtection.model&&(this.model.sheetProtection=this.map.sheetProtection.model),!1}default:return!0}}reconcile(O,L){const z=(O.relationships||[]).reduce((Z,ee)=>{if(Z[ee.Id]=ee,ee.Type===c.Comments&&(O.comments=L.comments[ee.Target].comments),ee.Type===c.VmlDrawing&&O.comments&&O.comments.length){const W=L.vmlDrawings[ee.Target].comments;O.comments.forEach((J,$)=>{J.note=Object.assign({},J.note,W[$])})}return Z},{});if(L.commentsMap=(O.comments||[]).reduce((Z,ee)=>(ee.ref&&(Z[ee.ref]=ee),Z),{}),L.hyperlinkMap=(O.hyperlinks||[]).reduce((Z,ee)=>(ee.rId&&(Z[ee.address]=z[ee.rId].Target),Z),{}),L.formulae={},O.rows=O.rows&&O.rows.filter(Boolean)||[],O.rows.forEach(Z=>{Z.cells=Z.cells&&Z.cells.filter(Boolean)||[]}),this.map.cols.reconcile(O.cols,L),this.map.sheetData.reconcile(O.rows,L),this.map.conditionalFormatting.reconcile(O.conditionalFormattings,L),O.media=[],O.drawing){const Z=z[O.drawing.rId].Target.match(/\/drawings\/([a-zA-Z0-9]+)[.][a-zA-Z]{3,4}$/);if(Z){const ee=Z[1];L.drawings[ee].anchors.forEach(W=>{if(W.medium){const J={type:"image",imageId:W.medium.index,range:W.range,hyperlinks:W.picture.hyperlinks};O.media.push(J)}})}}const G=O.background&&z[O.background.rId];if(G){const Z=G.Target.split("/media/")[1],ee=L.mediaIndex&&L.mediaIndex[Z];ee!==void 0&&O.media.push({type:"background",imageId:ee})}O.tables=(O.tables||[]).map(Z=>{const ee=z[Z.rId];return L.tables[ee.Target]}),delete O.relationships,delete O.hyperlinks,delete O.comments}}S.WORKSHEET_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x14ac","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"},s.exports=S},{"../../../utils/col-cache":19,"../../../utils/under-dash":26,"../../../utils/xml-stream":28,"../../rel-type":31,"../base-xform":32,"../list-xform":71,"./auto-filter-xform":72,"./cf/conditional-formattings-xform":87,"./col-xform":92,"./data-validations-xform":93,"./dimension-xform":94,"./drawing-xform":95,"./ext-lst-xform":96,"./header-footer-xform":97,"./hyperlink-xform":98,"./merge-cell-xform":99,"./merges":100,"./page-margins-xform":103,"./page-setup-xform":105,"./picture-xform":106,"./print-options-xform":107,"./row-breaks-xform":108,"./row-xform":109,"./sheet-format-properties-xform":110,"./sheet-properties-xform":111,"./sheet-protection-xform":112,"./sheet-view-xform":113,"./table-part-xform":114}],116:[function(t,s,l){const i=t("../base-xform");s.exports=class extends i{constructor(o){super(),this.tag=o.tag,this.attr=o.attr}render(o,d){d&&(o.openNode(this.tag),o.closeNode())}parseOpen(o){o.name===this.tag&&(this.model=!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],117:[function(t,s,l){const i=t("../base-xform");s.exports=class extends i{constructor(o){super(),this.tag=o.tag,this.attr=o.attr,this.attrs=o.attrs,this._format=o.format||function(d){try{return Number.isNaN(d.getTime())?"":d.toISOString()}catch{return""}},this._parse=o.parse||function(d){return new Date(d)}}render(o,d){d&&(o.openNode(this.tag),this.attrs&&o.addAttributes(this.attrs),this.attr?o.addAttribute(this.attr,this._format(d)):o.writeText(this._format(d)),o.closeNode())}parseOpen(o){o.name===this.tag&&(this.attr?this.model=this._parse(o.attributes[this.attr]):this.text=[])}parseText(o){this.attr||this.text.push(o)}parseClose(){return this.attr||(this.model=this._parse(this.text.join(""))),!1}}},{"../base-xform":32}],118:[function(t,s,l){const i=t("../base-xform");s.exports=class extends i{constructor(o){super(),this.tag=o.tag,this.attr=o.attr,this.attrs=o.attrs,this.zero=o.zero}render(o,d){(d||this.zero)&&(o.openNode(this.tag),this.attrs&&o.addAttributes(this.attrs),this.attr?o.addAttribute(this.attr,d):o.writeText(d),o.closeNode())}parseOpen(o){return o.name===this.tag&&(this.attr?this.model=parseInt(o.attributes[this.attr],10):this.text=[],!0)}parseText(o){this.attr||this.text.push(o)}parseClose(){return this.attr||(this.model=parseInt(this.text.join("")||0,10)),!1}}},{"../base-xform":32}],119:[function(t,s,l){const i=t("../base-xform");s.exports=class extends i{constructor(o){super(),this.tag=o.tag,this.attr=o.attr,this.attrs=o.attrs}render(o,d){d!==void 0&&(o.openNode(this.tag),this.attrs&&o.addAttributes(this.attrs),this.attr?o.addAttribute(this.attr,d):o.writeText(d),o.closeNode())}parseOpen(o){o.name===this.tag&&(this.attr?this.model=o.attributes[this.attr]:this.text=[])}parseText(o){this.attr||this.text.push(o)}parseClose(){return this.attr||(this.model=this.text.join("")),!1}}},{"../base-xform":32}],120:[function(t,s,l){const i=t("./base-xform"),o=t("../../utils/xml-stream");s.exports=class extends i{constructor(d){super(),this._model=d}render(d){if(!this._xml){const c=new o;(function a(u,h){u.openNode(h.tag,h.$),h.c&&h.c.forEach(f=>{a(u,f)}),h.t&&u.writeText(h.t),u.closeNode()})(c,this._model),this._xml=c.xml}d.writeXml(this._xml)}parseOpen(){return!0}parseText(){}parseClose(d){switch(d){case this._model.tag:return!1;default:return!0}}}},{"../../utils/xml-stream":28,"./base-xform":32}],121:[function(t,s,l){const i=t("./text-xform"),o=t("./rich-text-xform"),d=t("../base-xform");s.exports=class extends d{constructor(){super(),this.map={r:new o,t:new i}}get tag(){return"rPh"}render(c,a){if(c.openNode(this.tag,{sb:a.sb||0,eb:a.eb||0}),a&&a.hasOwnProperty("richText")&&a.richText){const{r:u}=this.map;a.richText.forEach(h=>{u.render(c,h)})}else a&&this.map.t.render(c,a.text);c.closeNode()}parseOpen(c){const{name:a}=c;return this.parser?(this.parser.parseOpen(c),!0):a===this.tag?(this.model={sb:parseInt(c.attributes.sb,10),eb:parseInt(c.attributes.eb,10)},!0):(this.parser=this.map[a],!!this.parser&&(this.parser.parseOpen(c),!0))}parseText(c){this.parser&&this.parser.parseText(c)}parseClose(c){if(this.parser){if(!this.parser.parseClose(c)){switch(c){case"r":{let a=this.model.richText;a||(a=this.model.richText=[]),a.push(this.parser.model);break}case"t":this.model.text=this.parser.model}this.parser=void 0}return!0}switch(c){case this.tag:return!1;default:return!0}}}},{"../base-xform":32,"./rich-text-xform":122,"./text-xform":125}],122:[function(t,s,l){const i=t("./text-xform"),o=t("../style/font-xform"),d=t("../base-xform");class c extends d{constructor(u){super(),this.model=u}get tag(){return"r"}get textXform(){return this._textXform||(this._textXform=new i)}get fontXform(){return this._fontXform||(this._fontXform=new o(c.FONT_OPTIONS))}render(u,h){h=h||this.model,u.openNode("r"),h.font&&this.fontXform.render(u,h.font),this.textXform.render(u,h.text),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case"r":return this.model={},!0;case"t":return this.parser=this.textXform,this.parser.parseOpen(u),!0;case"rPr":return this.parser=this.fontXform,this.parser.parseOpen(u),!0;default:return!1}}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){switch(u){case"r":return!1;case"t":return this.model.text=this.parser.model,this.parser=void 0,!0;case"rPr":return this.model.font=this.parser.model,this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(u),!0}}}c.FONT_OPTIONS={tagName:"rPr",fontNameTag:"rFont"},s.exports=c},{"../base-xform":32,"../style/font-xform":131,"./text-xform":125}],123:[function(t,s,l){const i=t("./text-xform"),o=t("./rich-text-xform"),d=t("./phonetic-text-xform"),c=t("../base-xform");s.exports=class extends c{constructor(a){super(),this.model=a,this.map={r:new o,t:new i,rPh:new d}}get tag(){return"si"}render(a,u){a.openNode(this.tag),u&&u.hasOwnProperty("richText")&&u.richText?u.richText.length?u.richText.forEach(h=>{this.map.r.render(a,h)}):this.map.t.render(a,""):u!=null&&this.map.t.render(a,u),a.closeNode()}parseOpen(a){const{name:u}=a;return this.parser?(this.parser.parseOpen(a),!0):u===this.tag?(this.model={},!0):(this.parser=this.map[u],!!this.parser&&(this.parser.parseOpen(a),!0))}parseText(a){this.parser&&this.parser.parseText(a)}parseClose(a){if(this.parser){if(!this.parser.parseClose(a)){switch(a){case"r":{let u=this.model.richText;u||(u=this.model.richText=[]),u.push(this.parser.model);break}case"t":this.model=this.parser.model}this.parser=void 0}return!0}switch(a){case this.tag:return!1;default:return!0}}}},{"../base-xform":32,"./phonetic-text-xform":121,"./rich-text-xform":122,"./text-xform":125}],124:[function(t,s,l){const i=t("../../../utils/xml-stream"),o=t("../base-xform"),d=t("./shared-string-xform");s.exports=class extends o{constructor(c){super(),this.model=c||{values:[],count:0},this.hash=Object.create(null),this.rich=Object.create(null)}get sharedStringXform(){return this._sharedStringXform||(this._sharedStringXform=new d)}get values(){return this.model.values}get uniqueCount(){return this.model.values.length}get count(){return this.model.count}getString(c){return this.model.values[c]}add(c){return c.richText?this.addRichText(c):this.addText(c)}addText(c){let a=this.hash[c];return a===void 0&&(a=this.hash[c]=this.model.values.length,this.model.values.push(c)),this.model.count++,a}addRichText(c){const a=this.sharedStringXform.toXml(c);let u=this.rich[a];return u===void 0&&(u=this.rich[a]=this.model.values.length,this.model.values.push(c)),this.model.count++,u}render(c,a){a=a||this._values,c.openXml(i.StdDocAttributes),c.openNode("sst",{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main",count:a.count,uniqueCount:a.values.length});const u=this.sharedStringXform;a.values.forEach(h=>{u.render(c,h)}),c.closeNode()}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case"sst":return!0;case"si":return this.parser=this.sharedStringXform,this.parser.parseOpen(c),!0;default:throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(c))}}parseText(c){this.parser&&this.parser.parseText(c)}parseClose(c){if(this.parser)return this.parser.parseClose(c)||(this.model.values.push(this.parser.model),this.model.count++,this.parser=void 0),!0;switch(c){case"sst":return!1;default:throw new Error("Unexpected xml node in parseClose: "+c)}}}},{"../../../utils/xml-stream":28,"../base-xform":32,"./shared-string-xform":123}],125:[function(t,s,l){const i=t("../base-xform");s.exports=class extends i{get tag(){return"t"}render(o,d){o.openNode("t"),/^\s|\n|\s$/.test(d)&&o.addAttribute("xml:space","preserve"),o.writeText(d),o.closeNode()}get model(){return this._text.join("").replace(/_x([0-9A-F]{4})_/g,(o,d)=>String.fromCharCode(parseInt(d,16)))}parseOpen(o){switch(o.name){case"t":return this._text=[],!0;default:return!1}}parseText(o){this._text.push(o)}parseClose(){return!1}}},{"../base-xform":32}],126:[function(t,s,l){const i=t("../../../doc/enums"),o=t("../../../utils/utils"),d=t("../base-xform"),c={horizontalValues:["left","center","right","fill","centerContinuous","distributed","justify"].reduce((u,h)=>(u[h]=!0,u),{}),horizontal(u){return this.horizontalValues[u]?u:void 0},verticalValues:["top","middle","bottom","distributed","justify"].reduce((u,h)=>(u[h]=!0,u),{}),vertical(u){return u==="middle"?"center":this.verticalValues[u]?u:void 0},wrapText:u=>!!u||void 0,shrinkToFit:u=>!!u||void 0,textRotation(u){switch(u){case"vertical":return u;default:return(u=o.validInt(u))>=-90&&u<=90?u:void 0}},indent:u=>(u=o.validInt(u),Math.max(0,u)),readingOrder(u){switch(u){case"ltr":return i.ReadingOrder.LeftToRight;case"rtl":return i.ReadingOrder.RightToLeft;default:return}}},a={toXml(u){if(u=c.textRotation(u)){if(u==="vertical")return 255;const h=Math.round(u);if(h>=0&&h<=90)return h;if(h<0&&h>=-90)return 90-h}},toModel(u){const h=o.validInt(u);if(h!==void 0){if(h===255)return"vertical";if(h>=0&&h<=90)return h;if(h>90&&h<=180)return 90-h}}};s.exports=class extends d{get tag(){return"alignment"}render(u,h){u.addRollback(),u.openNode("alignment");let f=!1;function m(b,y){y&&(u.addAttribute(b,y),f=!0)}m("horizontal",c.horizontal(h.horizontal)),m("vertical",c.vertical(h.vertical)),m("wrapText",!!c.wrapText(h.wrapText)&&"1"),m("shrinkToFit",!!c.shrinkToFit(h.shrinkToFit)&&"1"),m("indent",c.indent(h.indent)),m("textRotation",a.toXml(h.textRotation)),m("readingOrder",c.readingOrder(h.readingOrder)),u.closeNode(),f?u.commit():u.rollback()}parseOpen(u){const h={};let f=!1;function m(b,y,g){b&&(h[y]=g,f=!0)}m(u.attributes.horizontal,"horizontal",u.attributes.horizontal),m(u.attributes.vertical,"vertical",u.attributes.vertical==="center"?"middle":u.attributes.vertical),m(u.attributes.wrapText,"wrapText",o.parseBoolean(u.attributes.wrapText)),m(u.attributes.shrinkToFit,"shrinkToFit",o.parseBoolean(u.attributes.shrinkToFit)),m(u.attributes.indent,"indent",parseInt(u.attributes.indent,10)),m(u.attributes.textRotation,"textRotation",a.toModel(u.attributes.textRotation)),m(u.attributes.readingOrder,"readingOrder",u.attributes.readingOrder==="2"?"rtl":"ltr"),this.model=f?h:null}parseText(){}parseClose(){return!1}}},{"../../../doc/enums":7,"../../../utils/utils":27,"../base-xform":32}],127:[function(t,s,l){const i=t("../base-xform"),o=t("../../../utils/utils"),d=t("./color-xform");class c extends i{constructor(u){super(),this.name=u,this.map={color:new d}}get tag(){return this.name}render(u,h,f){const m=h&&h.color||f||this.defaultColor;u.openNode(this.name),h&&h.style&&(u.addAttribute("style",h.style),m&&this.map.color.render(u,m)),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case this.name:{const{style:h}=u.attributes;return this.model=h?{style:h}:void 0,!0}case"color":return this.parser=this.map.color,this.parser.parseOpen(u),!0;default:return!1}}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){return this.parser?(this.parser.parseClose(u)||(this.parser=void 0),!0):(u===this.name&&this.map.color.model&&(this.model||(this.model={}),this.model.color=this.map.color.model),!1)}validStyle(u){return c.validStyleValues[u]}}c.validStyleValues=["thin","dashed","dotted","dashDot","hair","dashDotDot","slantDashDot","mediumDashed","mediumDashDotDot","mediumDashDot","medium","double","thick"].reduce((a,u)=>(a[u]=!0,a),{}),s.exports=class extends i{constructor(){super(),this.map={top:new c("top"),left:new c("left"),bottom:new c("bottom"),right:new c("right"),diagonal:new c("diagonal")}}render(a,u){const{color:h}=u;function f(m,b){m&&!m.color&&u.color&&(m={...m,color:u.color}),b.render(a,m,h)}a.openNode("border"),u.diagonal&&u.diagonal.style&&(u.diagonal.up&&a.addAttribute("diagonalUp","1"),u.diagonal.down&&a.addAttribute("diagonalDown","1")),f(u.left,this.map.left),f(u.right,this.map.right),f(u.top,this.map.top),f(u.bottom,this.map.bottom),f(u.diagonal,this.map.diagonal),a.closeNode()}parseOpen(a){if(this.parser)return this.parser.parseOpen(a),!0;switch(a.name){case"border":return this.reset(),this.diagonalUp=o.parseBoolean(a.attributes.diagonalUp),this.diagonalDown=o.parseBoolean(a.attributes.diagonalDown),!0;default:return this.parser=this.map[a.name],!!this.parser&&(this.parser.parseOpen(a),!0)}}parseText(a){this.parser&&this.parser.parseText(a)}parseClose(a){if(this.parser)return this.parser.parseClose(a)||(this.parser=void 0),!0;if(a==="border"){const u=this.model={},h=function(f,m,b){m&&(b&&Object.assign(m,b),u[f]=m)};h("left",this.map.left.model),h("right",this.map.right.model),h("top",this.map.top.model),h("bottom",this.map.bottom.model),h("diagonal",this.map.diagonal.model,{up:this.diagonalUp,down:this.diagonalDown})}return!1}}},{"../../../utils/utils":27,"../base-xform":32,"./color-xform":128}],128:[function(t,s,l){const i=t("../base-xform");s.exports=class extends i{constructor(o){super(),this.name=o||"color"}get tag(){return this.name}render(o,d){return!!d&&(o.openNode(this.name),d.argb?o.addAttribute("rgb",d.argb):d.theme!==void 0?(o.addAttribute("theme",d.theme),d.tint!==void 0&&o.addAttribute("tint",d.tint)):d.indexed!==void 0?o.addAttribute("indexed",d.indexed):o.addAttribute("auto","1"),o.closeNode(),!0)}parseOpen(o){return o.name===this.name&&(o.attributes.rgb?this.model={argb:o.attributes.rgb}:o.attributes.theme?(this.model={theme:parseInt(o.attributes.theme,10)},o.attributes.tint&&(this.model.tint=parseFloat(o.attributes.tint))):o.attributes.indexed?this.model={indexed:parseInt(o.attributes.indexed,10)}:this.model=void 0,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],129:[function(t,s,l){const i=t("../base-xform"),o=t("./alignment-xform"),d=t("./border-xform"),c=t("./fill-xform"),a=t("./font-xform"),u=t("./numfmt-xform"),h=t("./protection-xform");s.exports=class extends i{constructor(){super(),this.map={alignment:new o,border:new d,fill:new c,font:new a,numFmt:new u,protection:new h}}get tag(){return"dxf"}render(f,m){if(f.openNode(this.tag),m.font&&this.map.font.render(f,m.font),m.numFmt&&m.numFmtId){const b={id:m.numFmtId,formatCode:m.numFmt};this.map.numFmt.render(f,b)}m.fill&&this.map.fill.render(f,m.fill),m.alignment&&this.map.alignment.render(f,m.alignment),m.border&&this.map.border.render(f,m.border),m.protection&&this.map.protection.render(f,m.protection),f.closeNode()}parseOpen(f){if(this.parser)return this.parser.parseOpen(f),!0;switch(f.name){case this.tag:return this.reset(),!0;default:return this.parser=this.map[f.name],this.parser&&this.parser.parseOpen(f),!0}}parseText(f){this.parser&&this.parser.parseText(f)}parseClose(f){return this.parser?(this.parser.parseClose(f)||(this.parser=void 0),!0):f!==this.tag||(this.model={alignment:this.map.alignment.model,border:this.map.border.model,fill:this.map.fill.model,font:this.map.font.model,numFmt:this.map.numFmt.model,protection:this.map.protection.model},!1)}}},{"../base-xform":32,"./alignment-xform":126,"./border-xform":127,"./fill-xform":130,"./font-xform":131,"./numfmt-xform":132,"./protection-xform":133}],130:[function(t,s,l){const i=t("../base-xform"),o=t("./color-xform");class d extends i{constructor(){super(),this.map={color:new o}}get tag(){return"stop"}render(f,m){f.openNode("stop"),f.addAttribute("position",m.position),this.map.color.render(f,m.color),f.closeNode()}parseOpen(f){if(this.parser)return this.parser.parseOpen(f),!0;switch(f.name){case"stop":return this.model={position:parseFloat(f.attributes.position)},!0;case"color":return this.parser=this.map.color,this.parser.parseOpen(f),!0;default:return!1}}parseText(){}parseClose(f){return!!this.parser&&(this.parser.parseClose(f)||(this.model.color=this.parser.model,this.parser=void 0),!0)}}class c extends i{constructor(){super(),this.map={fgColor:new o("fgColor"),bgColor:new o("bgColor")}}get name(){return"pattern"}get tag(){return"patternFill"}render(f,m){f.openNode("patternFill"),f.addAttribute("patternType",m.pattern),m.fgColor&&this.map.fgColor.render(f,m.fgColor),m.bgColor&&this.map.bgColor.render(f,m.bgColor),f.closeNode()}parseOpen(f){if(this.parser)return this.parser.parseOpen(f),!0;switch(f.name){case"patternFill":return this.model={type:"pattern",pattern:f.attributes.patternType},!0;default:return this.parser=this.map[f.name],!!this.parser&&(this.parser.parseOpen(f),!0)}}parseText(f){this.parser&&this.parser.parseText(f)}parseClose(f){return!!this.parser&&(this.parser.parseClose(f)||(this.parser.model&&(this.model[f]=this.parser.model),this.parser=void 0),!0)}}class a extends i{constructor(){super(),this.map={stop:new d}}get name(){return"gradient"}get tag(){return"gradientFill"}render(f,m){switch(f.openNode("gradientFill"),m.gradient){case"angle":f.addAttribute("degree",m.degree);break;case"path":f.addAttribute("type","path"),m.center.left&&(f.addAttribute("left",m.center.left),m.center.right===void 0&&f.addAttribute("right",m.center.left)),m.center.right&&f.addAttribute("right",m.center.right),m.center.top&&(f.addAttribute("top",m.center.top),m.center.bottom===void 0&&f.addAttribute("bottom",m.center.top)),m.center.bottom&&f.addAttribute("bottom",m.center.bottom)}const b=this.map.stop;m.stops.forEach(y=>{b.render(f,y)}),f.closeNode()}parseOpen(f){if(this.parser)return this.parser.parseOpen(f),!0;switch(f.name){case"gradientFill":{const m=this.model={stops:[]};return f.attributes.degree?(m.gradient="angle",m.degree=parseInt(f.attributes.degree,10)):f.attributes.type==="path"&&(m.gradient="path",m.center={left:f.attributes.left?parseFloat(f.attributes.left):0,top:f.attributes.top?parseFloat(f.attributes.top):0},f.attributes.right!==f.attributes.left&&(m.center.right=f.attributes.right?parseFloat(f.attributes.right):0),f.attributes.bottom!==f.attributes.top&&(m.center.bottom=f.attributes.bottom?parseFloat(f.attributes.bottom):0)),!0}case"stop":return this.parser=this.map.stop,this.parser.parseOpen(f),!0;default:return!1}}parseText(f){this.parser&&this.parser.parseText(f)}parseClose(f){return!!this.parser&&(this.parser.parseClose(f)||(this.model.stops.push(this.parser.model),this.parser=void 0),!0)}}class u extends i{constructor(){super(),this.map={patternFill:new c,gradientFill:new a}}get tag(){return"fill"}render(f,m){switch(f.addRollback(),f.openNode("fill"),m.type){case"pattern":this.map.patternFill.render(f,m);break;case"gradient":this.map.gradientFill.render(f,m);break;default:return void f.rollback()}f.closeNode(),f.commit()}parseOpen(f){if(this.parser)return this.parser.parseOpen(f),!0;switch(f.name){case"fill":return this.model={},!0;default:return this.parser=this.map[f.name],!!this.parser&&(this.parser.parseOpen(f),!0)}}parseText(f){this.parser&&this.parser.parseText(f)}parseClose(f){return!!this.parser&&(this.parser.parseClose(f)||(this.model=this.parser.model,this.model.type=this.parser.name,this.parser=void 0),!0)}validStyle(f){return u.validPatternValues[f]}}u.validPatternValues=["none","solid","darkVertical","darkGray","mediumGray","lightGray","gray125","gray0625","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","lightGrid"].reduce((h,f)=>(h[f]=!0,h),{}),u.StopXform=d,u.PatternFillXform=c,u.GradientFillXform=a,s.exports=u},{"../base-xform":32,"./color-xform":128}],131:[function(t,s,l){const i=t("./color-xform"),o=t("../simple/boolean-xform"),d=t("../simple/integer-xform"),c=t("../simple/string-xform"),a=t("./underline-xform"),u=t("../../../utils/under-dash"),h=t("../base-xform");class f extends h{constructor(b){super(),this.options=b||f.OPTIONS,this.map={b:{prop:"bold",xform:new o({tag:"b",attr:"val"})},i:{prop:"italic",xform:new o({tag:"i",attr:"val"})},u:{prop:"underline",xform:new a},charset:{prop:"charset",xform:new d({tag:"charset",attr:"val"})},color:{prop:"color",xform:new i},condense:{prop:"condense",xform:new o({tag:"condense",attr:"val"})},extend:{prop:"extend",xform:new o({tag:"extend",attr:"val"})},family:{prop:"family",xform:new d({tag:"family",attr:"val"})},outline:{prop:"outline",xform:new o({tag:"outline",attr:"val"})},vertAlign:{prop:"vertAlign",xform:new c({tag:"vertAlign",attr:"val"})},scheme:{prop:"scheme",xform:new c({tag:"scheme",attr:"val"})},shadow:{prop:"shadow",xform:new o({tag:"shadow",attr:"val"})},strike:{prop:"strike",xform:new o({tag:"strike",attr:"val"})},sz:{prop:"size",xform:new d({tag:"sz",attr:"val"})}},this.map[this.options.fontNameTag]={prop:"name",xform:new c({tag:this.options.fontNameTag,attr:"val"})}}get tag(){return this.options.tagName}render(b,y){const{map:g}=this;b.openNode(this.options.tagName),u.each(this.map,(w,x)=>{g[x].xform.render(b,y[w.prop])}),b.closeNode()}parseOpen(b){if(this.parser)return this.parser.parseOpen(b),!0;if(this.map[b.name])return this.parser=this.map[b.name].xform,this.parser.parseOpen(b);switch(b.name){case this.options.tagName:return this.model={},!0;default:return!1}}parseText(b){this.parser&&this.parser.parseText(b)}parseClose(b){if(this.parser&&!this.parser.parseClose(b)){const y=this.map[b];return this.parser.model&&(this.model[y.prop]=this.parser.model),this.parser=void 0,!0}switch(b){case this.options.tagName:return!1;default:return!0}}}f.OPTIONS={tagName:"font",fontNameTag:"name"},s.exports=f},{"../../../utils/under-dash":26,"../base-xform":32,"../simple/boolean-xform":116,"../simple/integer-xform":118,"../simple/string-xform":119,"./color-xform":128,"./underline-xform":136}],132:[function(t,s,l){const i=t("../../../utils/under-dash"),o=t("../../defaultnumformats"),d=t("../base-xform"),c=function(){const u={};return i.each(o,(h,f)=>{h.f&&(u[h.f]=parseInt(f,10))}),u}();class a extends d{constructor(h,f){super(),this.id=h,this.formatCode=f}get tag(){return"numFmt"}render(h,f){h.leafNode("numFmt",{numFmtId:f.id,formatCode:f.formatCode})}parseOpen(h){switch(h.name){case"numFmt":return this.model={id:parseInt(h.attributes.numFmtId,10),formatCode:h.attributes.formatCode.replace(/[\\](.)/g,"$1")},!0;default:return!1}}parseText(){}parseClose(){return!1}}a.getDefaultFmtId=function(u){return c[u]},a.getDefaultFmtCode=function(u){return o[u]&&o[u].f},s.exports=a},{"../../../utils/under-dash":26,"../../defaultnumformats":30,"../base-xform":32}],133:[function(t,s,l){const i=t("../base-xform"),o={boolean:(d,c)=>d===void 0?c:d};s.exports=class extends i{get tag(){return"protection"}render(d,c){d.addRollback(),d.openNode("protection");let a=!1;function u(h,f){f!==void 0&&(d.addAttribute(h,f),a=!0)}u("locked",o.boolean(c.locked,!0)?void 0:"0"),u("hidden",o.boolean(c.hidden,!1)?"1":void 0),d.closeNode(),a?d.commit():d.rollback()}parseOpen(d){const c={locked:d.attributes.locked!=="0",hidden:d.attributes.hidden==="1"},a=!c.locked||c.hidden;this.model=a?c:null}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],134:[function(t,s,l){const i=t("../base-xform"),o=t("./alignment-xform"),d=t("./protection-xform");s.exports=class extends i{constructor(c){super(),this.xfId=!(!c||!c.xfId),this.map={alignment:new o,protection:new d}}get tag(){return"xf"}render(c,a){c.openNode("xf",{numFmtId:a.numFmtId||0,fontId:a.fontId||0,fillId:a.fillId||0,borderId:a.borderId||0}),this.xfId&&c.addAttribute("xfId",a.xfId||0),a.numFmtId&&c.addAttribute("applyNumberFormat","1"),a.fontId&&c.addAttribute("applyFont","1"),a.fillId&&c.addAttribute("applyFill","1"),a.borderId&&c.addAttribute("applyBorder","1"),a.alignment&&c.addAttribute("applyAlignment","1"),a.protection&&c.addAttribute("applyProtection","1"),a.alignment&&this.map.alignment.render(c,a.alignment),a.protection&&this.map.protection.render(c,a.protection),c.closeNode()}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case"xf":return this.model={numFmtId:parseInt(c.attributes.numFmtId,10),fontId:parseInt(c.attributes.fontId,10),fillId:parseInt(c.attributes.fillId,10),borderId:parseInt(c.attributes.borderId,10)},this.xfId&&(this.model.xfId=parseInt(c.attributes.xfId,10)),!0;case"alignment":return this.parser=this.map.alignment,this.parser.parseOpen(c),!0;case"protection":return this.parser=this.map.protection,this.parser.parseOpen(c),!0;default:return!1}}parseText(c){this.parser&&this.parser.parseText(c)}parseClose(c){return this.parser?(this.parser.parseClose(c)||(this.map.protection===this.parser?this.model.protection=this.parser.model:this.model.alignment=this.parser.model,this.parser=void 0),!0):c!=="xf"}}},{"../base-xform":32,"./alignment-xform":126,"./protection-xform":133}],135:[function(t,s,l){const i=t("../../../doc/enums"),o=t("../../../utils/xml-stream"),d=t("../base-xform"),c=t("../static-xform"),a=t("../list-xform"),u=t("./font-xform"),h=t("./fill-xform"),f=t("./border-xform"),m=t("./numfmt-xform"),b=t("./style-xform"),y=t("./dxf-xform");class g extends d{constructor(x){super(),this.map={numFmts:new a({tag:"numFmts",count:!0,childXform:new m}),fonts:new a({tag:"fonts",count:!0,childXform:new u,$:{"x14ac:knownFonts":1}}),fills:new a({tag:"fills",count:!0,childXform:new h}),borders:new a({tag:"borders",count:!0,childXform:new f}),cellStyleXfs:new a({tag:"cellStyleXfs",count:!0,childXform:new b}),cellXfs:new a({tag:"cellXfs",count:!0,childXform:new b({xfId:!0})}),dxfs:new a({tag:"dxfs",always:!0,count:!0,childXform:new y}),numFmt:new m,font:new u,fill:new h,border:new f,style:new b({xfId:!0}),cellStyles:g.STATIC_XFORMS.cellStyles,tableStyles:g.STATIC_XFORMS.tableStyles,extLst:g.STATIC_XFORMS.extLst},x&&this.init()}initIndex(){this.index={style:{},numFmt:{},numFmtNextId:164,font:{},border:{},fill:{}}}init(){this.model={styles:[],numFmts:[],fonts:[],borders:[],fills:[],dxfs:[]},this.initIndex(),this._addBorder({}),this._addStyle({numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}),this._addFill({type:"pattern",pattern:"none"}),this._addFill({type:"pattern",pattern:"gray125"}),this.weakMap=new WeakMap}render(x,_){_=_||this.model,x.openXml(o.StdDocAttributes),x.openNode("styleSheet",g.STYLESHEET_ATTRIBUTES),this.index?(_.numFmts&&_.numFmts.length&&(x.openNode("numFmts",{count:_.numFmts.length}),_.numFmts.forEach(j=>{x.writeXml(j)}),x.closeNode()),_.fonts.length||this._addFont({size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}),x.openNode("fonts",{count:_.fonts.length,"x14ac:knownFonts":1}),_.fonts.forEach(j=>{x.writeXml(j)}),x.closeNode(),x.openNode("fills",{count:_.fills.length}),_.fills.forEach(j=>{x.writeXml(j)}),x.closeNode(),x.openNode("borders",{count:_.borders.length}),_.borders.forEach(j=>{x.writeXml(j)}),x.closeNode(),this.map.cellStyleXfs.render(x,[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}]),x.openNode("cellXfs",{count:_.styles.length}),_.styles.forEach(j=>{x.writeXml(j)}),x.closeNode()):(this.map.numFmts.render(x,_.numFmts),this.map.fonts.render(x,_.fonts),this.map.fills.render(x,_.fills),this.map.borders.render(x,_.borders),this.map.cellStyleXfs.render(x,[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}]),this.map.cellXfs.render(x,_.styles)),g.STATIC_XFORMS.cellStyles.render(x),this.map.dxfs.render(x,_.dxfs),g.STATIC_XFORMS.tableStyles.render(x),g.STATIC_XFORMS.extLst.render(x),x.closeNode()}parseOpen(x){if(this.parser)return this.parser.parseOpen(x),!0;switch(x.name){case"styleSheet":return this.initIndex(),!0;default:return this.parser=this.map[x.name],this.parser&&this.parser.parseOpen(x),!0}}parseText(x){this.parser&&this.parser.parseText(x)}parseClose(x){if(this.parser)return this.parser.parseClose(x)||(this.parser=void 0),!0;switch(x){case"styleSheet":{this.model={};const _=(j,R)=>{R.model&&R.model.length&&(this.model[j]=R.model)};if(_("numFmts",this.map.numFmts),_("fonts",this.map.fonts),_("fills",this.map.fills),_("borders",this.map.borders),_("styles",this.map.cellXfs),_("dxfs",this.map.dxfs),this.index={model:[],numFmt:[]},this.model.numFmts){const j=this.index.numFmt;this.model.numFmts.forEach(R=>{j[R.id]=R.formatCode})}return!1}default:return!0}}addStyleModel(x,_){if(!x)return 0;if(this.model.fonts.length||this._addFont({size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}),this.weakMap&&this.weakMap.has(x))return this.weakMap.get(x);const j={};if(_=_||i.ValueType.Number,x.numFmt)j.numFmtId=this._addNumFmtStr(x.numFmt);else switch(_){case i.ValueType.Number:j.numFmtId=this._addNumFmtStr("General");break;case i.ValueType.Date:j.numFmtId=this._addNumFmtStr("mm-dd-yy")}x.font&&(j.fontId=this._addFont(x.font)),x.border&&(j.borderId=this._addBorder(x.border)),x.fill&&(j.fillId=this._addFill(x.fill)),x.alignment&&(j.alignment=x.alignment),x.protection&&(j.protection=x.protection);const R=this._addStyle(j);return this.weakMap&&this.weakMap.set(x,R),R}getStyleModel(x){const _=this.model.styles[x];if(!_)return null;let j=this.index.model[x];if(j)return j;if(j=this.index.model[x]={},_.numFmtId){const M=this.index.numFmt[_.numFmtId]||m.getDefaultFmtCode(_.numFmtId);M&&(j.numFmt=M)}function R(M,I,F){if(F||F===0){const B=I[F];B&&(j[M]=B)}}return R("font",this.model.fonts,_.fontId),R("border",this.model.borders,_.borderId),R("fill",this.model.fills,_.fillId),_.alignment&&(j.alignment=_.alignment),_.protection&&(j.protection=_.protection),j}addDxfStyle(x){return x.numFmt&&(x.numFmtId=this._addNumFmtStr(x.numFmt)),this.model.dxfs.push(x),this.model.dxfs.length-1}getDxfStyle(x){return this.model.dxfs[x]}_addStyle(x){const _=this.map.style.toXml(x);let j=this.index.style[_];return j===void 0&&(j=this.index.style[_]=this.model.styles.length,this.model.styles.push(_)),j}_addNumFmtStr(x){let _=m.getDefaultFmtId(x);if(_!==void 0||(_=this.index.numFmt[x],_!==void 0))return _;_=this.index.numFmt[x]=164+this.model.numFmts.length;const j=this.map.numFmt.toXml({id:_,formatCode:x});return this.model.numFmts.push(j),_}_addFont(x){const _=this.map.font.toXml(x);let j=this.index.font[_];return j===void 0&&(j=this.index.font[_]=this.model.fonts.length,this.model.fonts.push(_)),j}_addBorder(x){const _=this.map.border.toXml(x);let j=this.index.border[_];return j===void 0&&(j=this.index.border[_]=this.model.borders.length,this.model.borders.push(_)),j}_addFill(x){const _=this.map.fill.toXml(x);let j=this.index.fill[_];return j===void 0&&(j=this.index.fill[_]=this.model.fills.length,this.model.fills.push(_)),j}}g.STYLESHEET_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x14ac x16r2","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac","xmlns:x16r2":"http://schemas.microsoft.com/office/spreadsheetml/2015/02/main"},g.STATIC_XFORMS={cellStyles:new c({tag:"cellStyles",$:{count:1},c:[{tag:"cellStyle",$:{name:"Normal",xfId:0,builtinId:0}}]}),dxfs:new c({tag:"dxfs",$:{count:0}}),tableStyles:new c({tag:"tableStyles",$:{count:0,defaultTableStyle:"TableStyleMedium2",defaultPivotStyle:"PivotStyleLight16"}}),extLst:new c({tag:"extLst",c:[{tag:"ext",$:{uri:"{EB79DEF2-80B8-43e5-95BD-54CBDDF9020C}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"},c:[{tag:"x14:slicerStyles",$:{defaultSlicerStyle:"SlicerStyleLight1"}}]},{tag:"ext",$:{uri:"{9260A510-F301-46a8-8635-F512D64BE5F5}","xmlns:x15":"http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"},c:[{tag:"x15:timelineStyles",$:{defaultTimelineStyle:"TimeSlicerStyleLight1"}}]}]})},g.Mock=class extends g{constructor(){super(),this.model={styles:[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}],numFmts:[],fonts:[{size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}],borders:[{}],fills:[{type:"pattern",pattern:"none"},{type:"pattern",pattern:"gray125"}]}}parseStream(w){return w.autodrain(),Promise.resolve()}addStyleModel(w,x){switch(x){case i.ValueType.Date:return this.dateStyleId;default:return 0}}get dateStyleId(){if(!this._dateStyleId){const w={numFmtId:m.getDefaultFmtId("mm-dd-yy")};this._dateStyleId=this.model.styles.length,this.model.styles.push(w)}return this._dateStyleId}getStyleModel(){return{}}},s.exports=g},{"../../../doc/enums":7,"../../../utils/xml-stream":28,"../base-xform":32,"../list-xform":71,"../static-xform":120,"./border-xform":127,"./dxf-xform":129,"./fill-xform":130,"./font-xform":131,"./numfmt-xform":132,"./style-xform":134}],136:[function(t,s,l){const i=t("../base-xform");class o extends i{constructor(c){super(),this.model=c}get tag(){return"u"}render(c,a){if((a=a||this.model)===!0)c.leafNode("u");else{const u=o.Attributes[a];u&&c.leafNode("u",u)}}parseOpen(c){c.name==="u"&&(this.model=c.attributes.val||!0)}parseText(){}parseClose(){return!1}}o.Attributes={single:{},double:{val:"double"},singleAccounting:{val:"singleAccounting"},doubleAccounting:{val:"doubleAccounting"}},s.exports=o},{"../base-xform":32}],137:[function(t,s,l){const i=t("../base-xform"),o=t("./filter-column-xform");s.exports=class extends i{constructor(){super(),this.map={filterColumn:new o}}get tag(){return"autoFilter"}prepare(d){d.columns.forEach((c,a)=>{this.map.filterColumn.prepare(c,{index:a})})}render(d,c){return d.openNode(this.tag,{ref:c.autoFilterRef}),c.columns.forEach(a=>{this.map.filterColumn.render(d,a)}),d.closeNode(),!0}parseOpen(d){if(this.parser)return this.parser.parseOpen(d),!0;switch(d.name){case this.tag:return this.model={autoFilterRef:d.attributes.ref,columns:[]},!0;default:if(this.parser=this.map[d.name],this.parser)return this.parseOpen(d),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(d))}}parseText(d){this.parser&&this.parser.parseText(d)}parseClose(d){if(this.parser)return this.parser.parseClose(d)||(this.model.columns.push(this.parser.model),this.parser=void 0),!0;switch(d){case this.tag:return!1;default:throw new Error("Unexpected xml node in parseClose: "+d)}}}},{"../base-xform":32,"./filter-column-xform":139}],138:[function(t,s,l){const i=t("../base-xform");s.exports=class extends i{get tag(){return"customFilter"}render(o,d){o.leafNode(this.tag,{val:d.val,operator:d.operator})}parseOpen(o){return o.name===this.tag&&(this.model={val:o.attributes.val,operator:o.attributes.operator},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],139:[function(t,s,l){const i=t("../base-xform"),o=t("../list-xform"),d=t("./custom-filter-xform"),c=t("./filter-xform");s.exports=class extends i{constructor(){super(),this.map={customFilters:new o({tag:"customFilters",count:!1,empty:!0,childXform:new d}),filters:new o({tag:"filters",count:!1,empty:!0,childXform:new c})}}get tag(){return"filterColumn"}prepare(a,u){a.colId=u.index.toString()}render(a,u){return u.customFilters?(a.openNode(this.tag,{colId:u.colId,hiddenButton:u.filterButton?"0":"1"}),this.map.customFilters.render(a,u.customFilters),a.closeNode(),!0):(a.leafNode(this.tag,{colId:u.colId,hiddenButton:u.filterButton?"0":"1"}),!0)}parseOpen(a){if(this.parser)return this.parser.parseOpen(a),!0;const{attributes:u}=a;switch(a.name){case this.tag:return this.model={filterButton:u.hiddenButton==="0"},!0;default:if(this.parser=this.map[a.name],this.parser)return this.parseOpen(a),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(a))}}parseText(){}parseClose(a){if(this.parser)return this.parser.parseClose(a)||(this.parser=void 0),!0;switch(a){case this.tag:return this.model.customFilters=this.map.customFilters.model,!1;default:return!0}}}},{"../base-xform":32,"../list-xform":71,"./custom-filter-xform":138,"./filter-xform":140}],140:[function(t,s,l){const i=t("../base-xform");s.exports=class extends i{get tag(){return"filter"}render(o,d){o.leafNode(this.tag,{val:d.val})}parseOpen(o){return o.name===this.tag&&(this.model={val:o.attributes.val},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],141:[function(t,s,l){const i=t("../base-xform");s.exports=class extends i{get tag(){return"tableColumn"}prepare(o,d){o.id=d.index+1}render(o,d){return o.leafNode(this.tag,{id:d.id.toString(),name:d.name,totalsRowLabel:d.totalsRowLabel,totalsRowFunction:d.totalsRowFunction,dxfId:d.dxfId}),!0}parseOpen(o){if(o.name===this.tag){const{attributes:d}=o;return this.model={name:d.name,totalsRowLabel:d.totalsRowLabel,totalsRowFunction:d.totalsRowFunction,dxfId:d.dxfId},!0}return!1}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],142:[function(t,s,l){const i=t("../base-xform");s.exports=class extends i{get tag(){return"tableStyleInfo"}render(o,d){return o.leafNode(this.tag,{name:d.theme?d.theme:void 0,showFirstColumn:d.showFirstColumn?"1":"0",showLastColumn:d.showLastColumn?"1":"0",showRowStripes:d.showRowStripes?"1":"0",showColumnStripes:d.showColumnStripes?"1":"0"}),!0}parseOpen(o){if(o.name===this.tag){const{attributes:d}=o;return this.model={theme:d.name?d.name:null,showFirstColumn:d.showFirstColumn==="1",showLastColumn:d.showLastColumn==="1",showRowStripes:d.showRowStripes==="1",showColumnStripes:d.showColumnStripes==="1"},!0}return!1}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],143:[function(t,s,l){const i=t("../../../utils/xml-stream"),o=t("../base-xform"),d=t("../list-xform"),c=t("./auto-filter-xform"),a=t("./table-column-xform"),u=t("./table-style-info-xform");class h extends o{constructor(){super(),this.map={autoFilter:new c,tableColumns:new d({tag:"tableColumns",count:!0,empty:!0,childXform:new a}),tableStyleInfo:new u}}prepare(m,b){this.map.autoFilter.prepare(m),this.map.tableColumns.prepare(m.columns,b)}get tag(){return"table"}render(m,b){m.openXml(i.StdDocAttributes),m.openNode(this.tag,{...h.TABLE_ATTRIBUTES,id:b.id,name:b.name,displayName:b.displayName||b.name,ref:b.tableRef,totalsRowCount:b.totalsRow?"1":void 0,totalsRowShown:b.totalsRow?void 0:"1",headerRowCount:b.headerRow?"1":"0"}),this.map.autoFilter.render(m,b),this.map.tableColumns.render(m,b.columns),this.map.tableStyleInfo.render(m,b.style),m.closeNode()}parseOpen(m){if(this.parser)return this.parser.parseOpen(m),!0;const{name:b,attributes:y}=m;switch(b){case this.tag:this.reset(),this.model={name:y.name,displayName:y.displayName||y.name,tableRef:y.ref,totalsRow:y.totalsRowCount==="1",headerRow:y.headerRowCount==="1"};break;default:this.parser=this.map[m.name],this.parser&&this.parser.parseOpen(m)}return!0}parseText(m){this.parser&&this.parser.parseText(m)}parseClose(m){if(this.parser)return this.parser.parseClose(m)||(this.parser=void 0),!0;switch(m){case this.tag:return this.model.columns=this.map.tableColumns.model,this.map.autoFilter.model&&(this.model.autoFilterRef=this.map.autoFilter.model.autoFilterRef,this.map.autoFilter.model.columns.forEach((b,y)=>{this.model.columns[y].filterButton=b.filterButton})),this.model.style=this.map.tableStyleInfo.model,!1;default:return!0}}reconcile(m,b){m.columns.forEach(y=>{y.dxfId!==void 0&&(y.style=b.styles.getDxfStyle(y.dxfId))})}}h.TABLE_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"xr xr3","xmlns:xr":"http://schemas.microsoft.com/office/spreadsheetml/2014/revision","xmlns:xr3":"http://schemas.microsoft.com/office/spreadsheetml/2016/revision3"},s.exports=h},{"../../../utils/xml-stream":28,"../base-xform":32,"../list-xform":71,"./auto-filter-xform":137,"./table-column-xform":141,"./table-style-info-xform":142}],144:[function(t,s,l){(function(i,o){(function(){const d=t("fs"),c=t("jszip"),{PassThrough:a}=t("readable-stream"),u=t("../utils/zip-stream"),h=t("../utils/stream-buf"),f=t("../utils/utils"),m=t("../utils/xml-stream"),{bufferToString:b}=t("../utils/browser-buffer-decode"),y=t("./xform/style/styles-xform"),g=t("./xform/core/core-xform"),w=t("./xform/strings/shared-strings-xform"),x=t("./xform/core/relationships-xform"),_=t("./xform/core/content-types-xform"),j=t("./xform/core/app-xform"),R=t("./xform/book/workbook-xform"),M=t("./xform/sheet/worksheet-xform"),I=t("./xform/drawing/drawing-xform"),F=t("./xform/table/table-xform"),B=t("./xform/comment/comments-xform"),U=t("./xform/comment/vml-notes-xform"),Q=t("./xml/theme1");class K{constructor(P){this.workbook=P}async readFile(P,A){if(!await f.fs.exists(P))throw new Error("File not found: "+P);const N=d.createReadStream(P);try{const k=await this.read(N,A);return N.close(),k}catch(k){throw N.close(),k}}parseRels(P){return new x().parseStream(P)}parseWorkbook(P){return new R().parseStream(P)}parseSharedStrings(P){return new w().parseStream(P)}reconcile(P,A){const N=new R,k=new M(A),S=new I,E=new F;N.reconcile(P);const O={media:P.media,mediaIndex:P.mediaIndex};Object.keys(P.drawings).forEach(G=>{const Z=P.drawings[G],ee=P.drawingRels[G];ee&&(O.rels=ee.reduce((W,J)=>(W[J.Id]=J,W),{}),(Z.anchors||[]).forEach(W=>{const J=W.picture&&W.picture.hyperlinks;J&&O.rels[J.rId]&&(J.hyperlink=O.rels[J.rId].Target,delete J.rId)}),S.reconcile(Z,O))});const L={styles:P.styles};Object.values(P.tables).forEach(G=>{E.reconcile(G,L)});const z={styles:P.styles,sharedStrings:P.sharedStrings,media:P.media,mediaIndex:P.mediaIndex,date1904:P.properties&&P.properties.date1904,drawings:P.drawings,comments:P.comments,tables:P.tables,vmlDrawings:P.vmlDrawings};P.worksheets.forEach(G=>{G.relationships=P.worksheetRels[G.sheetNo],k.reconcile(G,z)}),delete P.worksheetHash,delete P.worksheetRels,delete P.globalRels,delete P.sharedStrings,delete P.workbookRels,delete P.sheetDefs,delete P.styles,delete P.mediaIndex,delete P.drawings,delete P.drawingRels,delete P.vmlDrawings}async _processWorksheetEntry(P,A,N,k,S){const E=new M(k),O=await E.parseStream(P);O.sheetNo=N,A.worksheetHash[S]=O,A.worksheets.push(O)}async _processCommentEntry(P,A,N){const k=new B,S=await k.parseStream(P);A.comments[`../${N}.xml`]=S}async _processTableEntry(P,A,N){const k=new F,S=await k.parseStream(P);A.tables[`../tables/${N}.xml`]=S}async _processWorksheetRelsEntry(P,A,N){const k=new x,S=await k.parseStream(P);A.worksheetRels[N]=S}async _processMediaEntry(P,A,N){const k=N.lastIndexOf(".");if(k>=1){const S=N.substr(k+1),E=N.substr(0,k);await new Promise((O,L)=>{const z=new h;z.on("finish",()=>{A.mediaIndex[N]=A.media.length,A.mediaIndex[E]=A.media.length;const G={type:"image",name:E,extension:S,buffer:z.toBuffer()};A.media.push(G),O()}),P.on("error",G=>{L(G)}),P.pipe(z)})}}async _processDrawingEntry(P,A,N){const k=new I,S=await k.parseStream(P);A.drawings[N]=S}async _processDrawingRelsEntry(P,A,N){const k=new x,S=await k.parseStream(P);A.drawingRels[N]=S}async _processVmlDrawingEntry(P,A,N){const k=new U,S=await k.parseStream(P);A.vmlDrawings[`../drawings/${N}.vml`]=S}async _processThemeEntry(P,A,N){await new Promise((k,S)=>{const E=new h;P.on("error",S),E.on("error",S),E.on("finish",()=>{A.themes[N]=E.read().toString(),k()}),P.pipe(E)})}createInputStream(){throw new Error("`XLSX#createInputStream` is deprecated. You should use `XLSX#read` instead. This method will be removed in version 5.0. Please follow upgrade instruction: https://github.com/exceljs/exceljs/blob/master/UPGRADE-4.0.md")}async read(P,A){!P[Symbol.asyncIterator]&&P.pipe&&(P=P.pipe(new a));const N=[];for await(const k of P)N.push(k);return this.load(o.concat(N),A)}async load(P,A){let N;N=A&&A.base64?o.from(P.toString(),"base64"):P;const k={worksheets:[],worksheetHash:{},worksheetRels:[],themes:{},media:[],mediaIndex:{},drawings:{},drawingRels:{},comments:{},tables:{},vmlDrawings:{}},S=await c.loadAsync(N);for(const E of Object.values(S.files))if(!E.dir){let O,L=E.name;if(L[0]==="/"&&(L=L.substr(1)),L.match(/xl\/media\//)||L.match(/xl\/theme\/([a-zA-Z0-9]+)[.]xml/))O=new a,O.write(await E.async("nodebuffer"));else{let z;O=new a({writableObjectMode:!0,readableObjectMode:!0}),z=i.browser?b(await E.async("nodebuffer")):await E.async("string");const G=16384;for(let Z=0;Z<z.length;Z+=G)O.write(z.substring(Z,Z+G))}switch(O.end(),L){case"_rels/.rels":k.globalRels=await this.parseRels(O);break;case"xl/workbook.xml":{const z=await this.parseWorkbook(O);k.sheets=z.sheets,k.definedNames=z.definedNames,k.views=z.views,k.properties=z.properties,k.calcProperties=z.calcProperties;break}case"xl/_rels/workbook.xml.rels":k.workbookRels=await this.parseRels(O);break;case"xl/sharedStrings.xml":k.sharedStrings=new w,await k.sharedStrings.parseStream(O);break;case"xl/styles.xml":k.styles=new y,await k.styles.parseStream(O);break;case"docProps/app.xml":{const z=new j,G=await z.parseStream(O);k.company=G.company,k.manager=G.manager;break}case"docProps/core.xml":{const z=new g,G=await z.parseStream(O);Object.assign(k,G);break}default:{let z=L.match(/xl\/worksheets\/sheet(\d+)[.]xml/);if(z){await this._processWorksheetEntry(O,k,z[1],A,L);break}if(z=L.match(/xl\/worksheets\/_rels\/sheet(\d+)[.]xml.rels/),z){await this._processWorksheetRelsEntry(O,k,z[1]);break}if(z=L.match(/xl\/theme\/([a-zA-Z0-9]+)[.]xml/),z){await this._processThemeEntry(O,k,z[1]);break}if(z=L.match(/xl\/media\/([a-zA-Z0-9]+[.][a-zA-Z0-9]{3,4})$/),z){await this._processMediaEntry(O,k,z[1]);break}if(z=L.match(/xl\/drawings\/([a-zA-Z0-9]+)[.]xml/),z){await this._processDrawingEntry(O,k,z[1]);break}if(z=L.match(/xl\/(comments\d+)[.]xml/),z){await this._processCommentEntry(O,k,z[1]);break}if(z=L.match(/xl\/tables\/(table\d+)[.]xml/),z){await this._processTableEntry(O,k,z[1]);break}if(z=L.match(/xl\/drawings\/_rels\/([a-zA-Z0-9]+)[.]xml[.]rels/),z){await this._processDrawingRelsEntry(O,k,z[1]);break}if(z=L.match(/xl\/drawings\/(vmlDrawing\d+)[.]vml/),z){await this._processVmlDrawingEntry(O,k,z[1]);break}}}}return this.reconcile(k,A),this.workbook.model=k,this.workbook}async addMedia(P,A){await Promise.all(A.media.map(async N=>{if(N.type==="image"){const k=`xl/media/${N.name}.${N.extension}`;if(N.filename){const S=await function(E,O){return new Promise((L,z)=>{d.readFile(E,O,(G,Z)=>{G?z(G):L(Z)})})}(N.filename);return P.append(S,{name:k})}if(N.buffer)return P.append(N.buffer,{name:k});if(N.base64){const S=N.base64,E=S.substring(S.indexOf(",")+1);return P.append(E,{name:k,base64:!0})}}throw new Error("Unsupported media")}))}addDrawings(P,A){const N=new I,k=new x;A.worksheets.forEach(S=>{const{drawing:E}=S;if(E){N.prepare(E,{});let O=N.toXml(E);P.append(O,{name:`xl/drawings/${E.name}.xml`}),O=k.toXml(E.rels),P.append(O,{name:`xl/drawings/_rels/${E.name}.xml.rels`})}})}addTables(P,A){const N=new F;A.worksheets.forEach(k=>{const{tables:S}=k;S.forEach(E=>{N.prepare(E,{});const O=N.toXml(E);P.append(O,{name:"xl/tables/"+E.target})})})}async addContentTypes(P,A){const N=new _().toXml(A);P.append(N,{name:"[Content_Types].xml"})}async addApp(P,A){const N=new j().toXml(A);P.append(N,{name:"docProps/app.xml"})}async addCore(P,A){const N=new g;P.append(N.toXml(A),{name:"docProps/core.xml"})}async addThemes(P,A){const N=A.themes||{theme1:Q};Object.keys(N).forEach(k=>{const S=N[k],E=`xl/theme/${k}.xml`;P.append(S,{name:E})})}async addOfficeRels(P){const A=new x().toXml([{Id:"rId1",Type:K.RelType.OfficeDocument,Target:"xl/workbook.xml"},{Id:"rId2",Type:K.RelType.CoreProperties,Target:"docProps/core.xml"},{Id:"rId3",Type:K.RelType.ExtenderProperties,Target:"docProps/app.xml"}]);P.append(A,{name:"_rels/.rels"})}async addWorkbookRels(P,A){let N=1;const k=[{Id:"rId"+N++,Type:K.RelType.Styles,Target:"styles.xml"},{Id:"rId"+N++,Type:K.RelType.Theme,Target:"theme/theme1.xml"}];A.sharedStrings.count&&k.push({Id:"rId"+N++,Type:K.RelType.SharedStrings,Target:"sharedStrings.xml"}),A.worksheets.forEach(E=>{E.rId="rId"+N++,k.push({Id:E.rId,Type:K.RelType.Worksheet,Target:`worksheets/sheet${E.id}.xml`})});const S=new x().toXml(k);P.append(S,{name:"xl/_rels/workbook.xml.rels"})}async addSharedStrings(P,A){A.sharedStrings&&A.sharedStrings.count&&P.append(A.sharedStrings.xml,{name:"xl/sharedStrings.xml"})}async addStyles(P,A){const{xml:N}=A.styles;N&&P.append(N,{name:"xl/styles.xml"})}async addWorkbook(P,A){const N=new R;P.append(N.toXml(A),{name:"xl/workbook.xml"})}async addWorksheets(P,A){const N=new M,k=new x,S=new B,E=new U;A.worksheets.forEach(O=>{let L=new m;N.render(L,O),P.append(L.xml,{name:`xl/worksheets/sheet${O.id}.xml`}),O.rels&&O.rels.length&&(L=new m,k.render(L,O.rels),P.append(L.xml,{name:`xl/worksheets/_rels/sheet${O.id}.xml.rels`})),O.comments.length>0&&(L=new m,S.render(L,O),P.append(L.xml,{name:`xl/comments${O.id}.xml`}),L=new m,E.render(L,O),P.append(L.xml,{name:`xl/drawings/vmlDrawing${O.id}.vml`}))})}_finalize(P){return new Promise((A,N)=>{P.on("finish",()=>{A(this)}),P.on("error",N),P.finalize()})}prepareModel(P,A){P.creator=P.creator||"ExcelJS",P.lastModifiedBy=P.lastModifiedBy||"ExcelJS",P.created=P.created||new Date,P.modified=P.modified||new Date,P.useSharedStrings=A.useSharedStrings===void 0||A.useSharedStrings,P.useStyles=A.useStyles===void 0||A.useStyles,P.sharedStrings=new w,P.styles=P.useStyles?new y(!0):new y.Mock;const N=new R,k=new M;N.prepare(P);const S={sharedStrings:P.sharedStrings,styles:P.styles,date1904:P.properties.date1904,drawingsCount:0,media:P.media};S.drawings=P.drawings=[],S.commentRefs=P.commentRefs=[];let E=0;P.tables=[],P.worksheets.forEach(O=>{O.tables.forEach(L=>{E++,L.target=`table${E}.xml`,L.id=E,P.tables.push(L)}),k.prepare(O,S)})}async write(P,A){A=A||{};const{model:N}=this.workbook,k=new u.ZipWriter(A.zip);return k.pipe(P),this.prepareModel(N,A),await this.addContentTypes(k,N),await this.addOfficeRels(k,N),await this.addWorkbookRels(k,N),await this.addWorksheets(k,N),await this.addSharedStrings(k,N),await this.addDrawings(k,N),await this.addTables(k,N),await Promise.all([this.addThemes(k,N),this.addStyles(k,N)]),await this.addMedia(k,N),await Promise.all([this.addApp(k,N),this.addCore(k,N)]),await this.addWorkbook(k,N),this._finalize(k)}writeFile(P,A){const N=d.createWriteStream(P);return new Promise((k,S)=>{N.on("finish",()=>{k()}),N.on("error",E=>{S(E)}),this.write(N,A).then(()=>{N.end()}).catch(E=>{S(E)})})}async writeBuffer(P){const A=new h;return await this.write(A,P),A.read()}}K.RelType=t("./rel-type"),s.exports=K}).call(this)}).call(this,t("_process"),t("buffer").Buffer)},{"../utils/browser-buffer-decode":16,"../utils/stream-buf":24,"../utils/utils":27,"../utils/xml-stream":28,"../utils/zip-stream":29,"./rel-type":31,"./xform/book/workbook-xform":38,"./xform/comment/comments-xform":40,"./xform/comment/vml-notes-xform":45,"./xform/core/app-xform":51,"./xform/core/content-types-xform":52,"./xform/core/core-xform":53,"./xform/core/relationships-xform":55,"./xform/drawing/drawing-xform":62,"./xform/sheet/worksheet-xform":115,"./xform/strings/shared-strings-xform":124,"./xform/style/styles-xform":135,"./xform/table/table-xform":143,"./xml/theme1":145,_process:467,buffer:220,fs:216,jszip:441,"readable-stream":491}],145:[function(t,s,l){s.exports=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme"> <a:themeElements> <a:clrScheme name="Office"> <a:dk1> <a:sysClr val="windowText" lastClr="000000"/> </a:dk1> <a:lt1> <a:sysClr val="window" lastClr="FFFFFF"/> </a:lt1> <a:dk2> <a:srgbClr val="1F497D"/> </a:dk2> <a:lt2> <a:srgbClr val="EEECE1"/> </a:lt2> <a:accent1> <a:srgbClr val="4F81BD"/> </a:accent1> <a:accent2> <a:srgbClr val="C0504D"/> </a:accent2> <a:accent3> <a:srgbClr val="9BBB59"/> </a:accent3> <a:accent4> <a:srgbClr val="8064A2"/> </a:accent4> <a:accent5> <a:srgbClr val="4BACC6"/> </a:accent5> <a:accent6> <a:srgbClr val="F79646"/> </a:accent6> <a:hlink> <a:srgbClr val="0000FF"/> </a:hlink> <a:folHlink> <a:srgbClr val="800080"/> </a:folHlink> </a:clrScheme> <a:fontScheme name="Office"> <a:majorFont> <a:latin typeface="Cambria"/> <a:ea typeface=""/> <a:cs typeface=""/> <a:font script="Jpan" typeface=" "/> <a:font script="Hang" typeface=" "/> <a:font script="Hans" typeface=""/> <a:font script="Hant" typeface=""/> <a:font script="Arab" typeface="Times New Roman"/> <a:font script="Hebr" typeface="Times New Roman"/> <a:font script="Thai" typeface="Tahoma"/> <a:font script="Ethi" typeface="Nyala"/> <a:font script="Beng" typeface="Vrinda"/> <a:font script="Gujr" typeface="Shruti"/> <a:font script="Khmr" typeface="MoolBoran"/> <a:font script="Knda" typeface="Tunga"/> <a:font script="Guru" typeface="Raavi"/> <a:font script="Cans" typeface="Euphemia"/> <a:font script="Cher" typeface="Plantagenet Cherokee"/> <a:font script="Yiii" typeface="Microsoft Yi Baiti"/> <a:font script="Tibt" typeface="Microsoft Himalaya"/> <a:font script="Thaa" typeface="MV Boli"/> <a:font script="Deva" typeface="Mangal"/> <a:font script="Telu" typeface="Gautami"/> <a:font script="Taml" typeface="Latha"/> <a:font script="Syrc" typeface="Estrangelo Edessa"/> <a:font script="Orya" typeface="Kalinga"/> <a:font script="Mlym" typeface="Kartika"/> <a:font script="Laoo" typeface="DokChampa"/> <a:font script="Sinh" typeface="Iskoola Pota"/> <a:font script="Mong" typeface="Mongolian Baiti"/> <a:font script="Viet" typeface="Times New Roman"/> <a:font script="Uigh" typeface="Microsoft Uighur"/> <a:font script="Geor" typeface="Sylfaen"/> </a:majorFont> <a:minorFont> <a:latin typeface="Calibri"/> <a:ea typeface=""/> <a:cs typeface=""/> <a:font script="Jpan" typeface=" "/> <a:font script="Hang" typeface=" "/> <a:font script="Hans" typeface=""/> <a:font script="Hant" typeface=""/> <a:font script="Arab" typeface="Arial"/> <a:font script="Hebr" typeface="Arial"/> <a:font script="Thai" typeface="Tahoma"/> <a:font script="Ethi" typeface="Nyala"/> <a:font script="Beng" typeface="Vrinda"/> <a:font script="Gujr" typeface="Shruti"/> <a:font script="Khmr" typeface="DaunPenh"/> <a:font script="Knda" typeface="Tunga"/> <a:font script="Guru" typeface="Raavi"/> <a:font script="Cans" typeface="Euphemia"/> <a:font script="Cher" typeface="Plantagenet Cherokee"/> <a:font script="Yiii" typeface="Microsoft Yi Baiti"/> <a:font script="Tibt" typeface="Microsoft Himalaya"/> <a:font script="Thaa" typeface="MV Boli"/> <a:font script="Deva" typeface="Mangal"/> <a:font script="Telu" typeface="Gautami"/> <a:font script="Taml" typeface="Latha"/> <a:font script="Syrc" typeface="Estrangelo Edessa"/> <a:font script="Orya" typeface="Kalinga"/> <a:font script="Mlym" typeface="Kartika"/> <a:font script="Laoo" typeface="DokChampa"/> <a:font script="Sinh" typeface="Iskoola Pota"/> <a:font script="Mong" typeface="Mongolian Baiti"/> <a:font script="Viet" typeface="Arial"/> <a:font script="Uigh" typeface="Microsoft Uighur"/> <a:font script="Geor" typeface="Sylfaen"/> </a:minorFont> </a:fontScheme> <a:fmtScheme name="Office"> <a:fillStyleLst> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="50000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="35000"> <a:schemeClr val="phClr"> <a:tint val="37000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:tint val="15000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:lin ang="16200000" scaled="1"/> </a:gradFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="100000"/> <a:shade val="100000"/> <a:satMod val="130000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:tint val="50000"/> <a:shade val="100000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:lin ang="16200000" scaled="0"/> </a:gradFill> </a:fillStyleLst> <a:lnStyleLst> <a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"> <a:shade val="95000"/> <a:satMod val="105000"/> </a:schemeClr> </a:solidFill> <a:prstDash val="solid"/> </a:ln> <a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:prstDash val="solid"/> </a:ln> <a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:prstDash val="solid"/> </a:ln> </a:lnStyleLst> <a:effectStyleLst> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="38000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> </a:effectStyle> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="35000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> </a:effectStyle> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="35000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> <a:scene3d> <a:camera prst="orthographicFront"> <a:rot lat="0" lon="0" rev="0"/> </a:camera> <a:lightRig rig="threePt" dir="t"> <a:rot lat="0" lon="0" rev="1200000"/> </a:lightRig> </a:scene3d> <a:sp3d> <a:bevelT w="63500" h="25400"/> </a:sp3d> </a:effectStyle> </a:effectStyleLst> <a:bgFillStyleLst> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="40000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> <a:gs pos="40000"> <a:schemeClr val="phClr"> <a:tint val="45000"/> <a:shade val="99000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:shade val="20000"/> <a:satMod val="255000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:path path="circle"> <a:fillToRect l="50000" t="-80000" r="50000" b="180000"/> </a:path> </a:gradFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="80000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:shade val="30000"/> <a:satMod val="200000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:path path="circle"> <a:fillToRect l="50000" t="50000" r="50000" b="50000"/> </a:path> </a:gradFill> </a:bgFillStyleLst> </a:fmtScheme> </a:themeElements> <a:objectDefaults> <a:spDef> <a:spPr/> <a:bodyPr/> <a:lstStyle/> <a:style> <a:lnRef idx="1"> <a:schemeClr val="accent1"/> </a:lnRef> <a:fillRef idx="3"> <a:schemeClr val="accent1"/> </a:fillRef> <a:effectRef idx="2"> <a:schemeClr val="accent1"/> </a:effectRef> <a:fontRef idx="minor"> <a:schemeClr val="lt1"/> </a:fontRef> </a:style> </a:spDef> <a:lnDef> <a:spPr/> <a:bodyPr/> <a:lstStyle/> <a:style> <a:lnRef idx="2"> <a:schemeClr val="accent1"/> </a:lnRef> <a:fillRef idx="0"> <a:schemeClr val="accent1"/> </a:fillRef> <a:effectRef idx="1"> <a:schemeClr val="accent1"/> </a:effectRef> <a:fontRef idx="minor"> <a:schemeClr val="tx1"/> </a:fontRef> </a:style> </a:lnDef> </a:objectDefaults> <a:extraClrSchemeLst/> </a:theme>`},{}],146:[function(t,s,l){(function(i){(function(){Object.defineProperty(l,"__esModule",{value:!0}),l.CsvFormatterStream=void 0;const o=t("stream"),d=t("./formatter");class c extends o.Transform{constructor(u){super({writableObjectMode:u.objectMode}),this.hasWrittenBOM=!1,this.formatterOptions=u,this.rowFormatter=new d.RowFormatter(u),this.hasWrittenBOM=!u.writeBOM}transform(u){return this.rowFormatter.rowTransform=u,this}_transform(u,h,f){let m=!1;try{this.hasWrittenBOM||(this.push(this.formatterOptions.BOM),this.hasWrittenBOM=!0),this.rowFormatter.format(u,(b,y)=>b?(m=!0,f(b)):(y&&y.forEach(g=>{this.push(i.from(g,"utf8"))}),m=!0,f()))}catch(b){if(m)throw b;f(b)}}_flush(u){this.rowFormatter.finish((h,f)=>h?u(h):(f&&f.forEach(m=>{this.push(i.from(m,"utf8"))}),u()))}}l.CsvFormatterStream=c}).call(this)}).call(this,t("buffer").Buffer)},{"./formatter":150,buffer:220,stream:505}],147:[function(t,s,l){Object.defineProperty(l,"__esModule",{value:!0}),l.FormatterOptions=void 0,l.FormatterOptions=class{constructor(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};var o;this.objectMode=!0,this.delimiter=",",this.rowDelimiter=`
`,this.quote='"',this.escape=this.quote,this.quoteColumns=!1,this.quoteHeaders=this.quoteColumns,this.headers=null,this.includeEndRowDelimiter=!1,this.writeBOM=!1,this.BOM="\uFEFF",this.alwaysWriteHeaders=!1,Object.assign(this,i||{}),i?.quoteHeaders===void 0&&(this.quoteHeaders=this.quoteColumns),i?.quote===!0?this.quote='"':i?.quote===!1&&(this.quote=""),typeof i?.escape!="string"&&(this.escape=this.quote),this.shouldWriteHeaders=!!this.headers&&((o=i.writeHeaders)===null||o===void 0||o),this.headers=Array.isArray(this.headers)?this.headers:null,this.escapedQuote=`${this.escape}${this.quote}`}}},{}],148:[function(t,s,l){var i=function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0}),l.FieldFormatter=void 0;const o=i(t("lodash.isboolean")),d=i(t("lodash.isnil")),c=i(t("lodash.escaperegexp"));l.FieldFormatter=class{constructor(a){this._headers=null,this.formatterOptions=a,a.headers!==null&&(this.headers=a.headers),this.REPLACE_REGEXP=new RegExp(a.quote,"g");const u=`[${a.delimiter}${c.default(a.rowDelimiter)}|\r|
]`;this.ESCAPE_REGEXP=new RegExp(u)}set headers(a){this._headers=a}shouldQuote(a,u){const h=u?this.formatterOptions.quoteHeaders:this.formatterOptions.quoteColumns;return o.default(h)?h:Array.isArray(h)?h[a]:this._headers!==null&&h[this._headers[a]]}format(a,u,h){const f=(""+(d.default(a)?"":a)).replace(/\0/g,""),{formatterOptions:m}=this;return m.quote!==""&&f.indexOf(m.quote)!==-1?this.quoteField(f.replace(this.REPLACE_REGEXP,m.escapedQuote)):f.search(this.ESCAPE_REGEXP)!==-1||this.shouldQuote(u,h)?this.quoteField(f):f}quoteField(a){const{quote:u}=this.formatterOptions;return`${u}${a}${u}`}}},{"lodash.escaperegexp":442,"lodash.isboolean":444,"lodash.isnil":447}],149:[function(t,s,l){var i=function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(l,"__esModule",{value:!0}),l.RowFormatter=void 0;const o=i(t("lodash.isfunction")),d=i(t("lodash.isequal")),c=t("./FieldFormatter"),a=t("../types");class u{constructor(f){this.rowCount=0,this.formatterOptions=f,this.fieldFormatter=new c.FieldFormatter(f),this.headers=f.headers,this.shouldWriteHeaders=f.shouldWriteHeaders,this.hasWrittenHeaders=!1,this.headers!==null&&(this.fieldFormatter.headers=this.headers),f.transform&&(this.rowTransform=f.transform)}static isRowHashArray(f){return!!Array.isArray(f)&&Array.isArray(f[0])&&f[0].length===2}static isRowArray(f){return Array.isArray(f)&&!this.isRowHashArray(f)}static gatherHeaders(f){return u.isRowHashArray(f)?f.map(m=>m[0]):Array.isArray(f)?f:Object.keys(f)}static createTransform(f){return a.isSyncTransform(f)?(m,b)=>{let y=null;try{y=f(m)}catch(g){return b(g)}return b(null,y)}:(m,b)=>{f(m,b)}}set rowTransform(f){if(!o.default(f))throw new TypeError("The transform should be a function");this._rowTransform=u.createTransform(f)}format(f,m){this.callTransformer(f,(b,y)=>{if(b)return m(b);if(!f)return m(null);const g=[];if(y){const{shouldFormatColumns:w,headers:x}=this.checkHeaders(y);if(this.shouldWriteHeaders&&x&&!this.hasWrittenHeaders&&(g.push(this.formatColumns(x,!0)),this.hasWrittenHeaders=!0),w){const _=this.gatherColumns(y);g.push(this.formatColumns(_,!1))}}return m(null,g)})}finish(f){const m=[];if(this.formatterOptions.alwaysWriteHeaders&&this.rowCount===0){if(!this.headers)return f(new Error("`alwaysWriteHeaders` option is set to true but `headers` option not provided."));m.push(this.formatColumns(this.headers,!0))}return this.formatterOptions.includeEndRowDelimiter&&m.push(this.formatterOptions.rowDelimiter),f(null,m)}checkHeaders(f){if(this.headers)return{shouldFormatColumns:!0,headers:this.headers};const m=u.gatherHeaders(f);return this.headers=m,this.fieldFormatter.headers=m,this.shouldWriteHeaders?{shouldFormatColumns:!d.default(m,f),headers:m}:{shouldFormatColumns:!0,headers:null}}gatherColumns(f){if(this.headers===null)throw new Error("Headers is currently null");return Array.isArray(f)?u.isRowHashArray(f)?this.headers.map((m,b)=>{const y=f[b];return y?y[1]:""}):u.isRowArray(f)&&!this.shouldWriteHeaders?f:this.headers.map((m,b)=>f[b]):this.headers.map(m=>f[m])}callTransformer(f,m){return this._rowTransform?this._rowTransform(f,m):m(null,f)}formatColumns(f,m){const b=f.map((g,w)=>this.fieldFormatter.format(g,w,m)).join(this.formatterOptions.delimiter),{rowCount:y}=this;return this.rowCount+=1,y?[this.formatterOptions.rowDelimiter,b].join(""):b}}l.RowFormatter=u},{"../types":152,"./FieldFormatter":148,"lodash.isequal":445,"lodash.isfunction":446}],150:[function(t,s,l){Object.defineProperty(l,"__esModule",{value:!0}),l.FieldFormatter=l.RowFormatter=void 0;var i=t("./RowFormatter");Object.defineProperty(l,"RowFormatter",{enumerable:!0,get:function(){return i.RowFormatter}});var o=t("./FieldFormatter");Object.defineProperty(l,"FieldFormatter",{enumerable:!0,get:function(){return o.FieldFormatter}})},{"./FieldFormatter":148,"./RowFormatter":149}],151:[function(t,s,l){(function(i){(function(){var o=Object.create?function(w,x,_,j){j===void 0&&(j=_),Object.defineProperty(w,j,{enumerable:!0,get:function(){return x[_]}})}:function(w,x,_,j){j===void 0&&(j=_),w[j]=x[_]},d=Object.create?function(w,x){Object.defineProperty(w,"default",{enumerable:!0,value:x})}:function(w,x){w.default=x},c=function(w){if(w&&w.__esModule)return w;var x={};if(w!=null)for(var _ in w)_!=="default"&&Object.prototype.hasOwnProperty.call(w,_)&&o(x,w,_);return d(x,w),x},a=function(w,x){for(var _ in w)_==="default"||Object.prototype.hasOwnProperty.call(x,_)||o(x,w,_)};Object.defineProperty(l,"__esModule",{value:!0}),l.writeToPath=l.writeToString=l.writeToBuffer=l.writeToStream=l.write=l.format=l.FormatterOptions=l.CsvFormatterStream=void 0;const u=t("util"),h=t("stream"),f=c(t("fs")),m=t("./FormatterOptions"),b=t("./CsvFormatterStream");a(t("./types"),l);var y=t("./CsvFormatterStream");Object.defineProperty(l,"CsvFormatterStream",{enumerable:!0,get:function(){return y.CsvFormatterStream}});var g=t("./FormatterOptions");Object.defineProperty(l,"FormatterOptions",{enumerable:!0,get:function(){return g.FormatterOptions}}),l.format=w=>new b.CsvFormatterStream(new m.FormatterOptions(w)),l.write=(w,x)=>{const _=l.format(x),j=u.promisify((R,M)=>{_.write(R,void 0,M)});return w.reduce((R,M)=>R.then(()=>j(M)),Promise.resolve()).then(()=>_.end()).catch(R=>{_.emit("error",R)}),_},l.writeToStream=(w,x,_)=>l.write(x,_).pipe(w),l.writeToBuffer=function(w){let x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const _=[],j=new h.Writable({write(R,M,I){_.push(R),I()}});return new Promise((R,M)=>{j.on("error",M).on("finish",()=>R(i.concat(_))),l.write(w,x).pipe(j)})},l.writeToString=(w,x)=>l.writeToBuffer(w,x).then(_=>_.toString()),l.writeToPath=(w,x,_)=>{const j=f.createWriteStream(w,{encoding:"utf8"});return l.write(x,_).pipe(j)}}).call(this)}).call(this,t("buffer").Buffer)},{"./CsvFormatterStream":146,"./FormatterOptions":147,"./types":152,buffer:220,fs:216,stream:505,util:527}],152:[function(t,s,l){Object.defineProperty(l,"__esModule",{value:!0}),l.isSyncTransform=void 0,l.isSyncTransform=i=>i.length===1},{}],153:[function(t,s,l){(function(i){(function(){Object.defineProperty(l,"__esModule",{value:!0}),l.CsvParserStream=void 0;const o=t("string_decoder"),d=t("stream"),c=t("./transforms"),a=t("./parser");class u extends d.Transform{constructor(f){super({objectMode:f.objectMode}),this.lines="",this.rowCount=0,this.parsedRowCount=0,this.parsedLineCount=0,this.endEmitted=!1,this.headersEmitted=!1,this.parserOptions=f,this.parser=new a.Parser(f),this.headerTransformer=new c.HeaderTransformer(f),this.decoder=new o.StringDecoder(f.encoding),this.rowTransformerValidator=new c.RowTransformerValidator}get hasHitRowLimit(){return this.parserOptions.limitRows&&this.rowCount>=this.parserOptions.maxRows}get shouldEmitRows(){return this.parsedRowCount>this.parserOptions.skipRows}get shouldSkipLine(){return this.parsedLineCount<=this.parserOptions.skipLines}transform(f){return this.rowTransformerValidator.rowTransform=f,this}validate(f){return this.rowTransformerValidator.rowValidator=f,this}emit(f){if(f==="end")return this.endEmitted||(this.endEmitted=!0,super.emit("end",this.rowCount)),!1;for(var m=arguments.length,b=new Array(m>1?m-1:0),y=1;y<m;y++)b[y-1]=arguments[y];return super.emit(f,...b)}_transform(f,m,b){if(this.hasHitRowLimit)return b();const y=u.wrapDoneCallback(b);try{const{lines:g}=this,w=g+this.decoder.write(f),x=this.parse(w,!0);return this.processRows(x,y)}catch(g){return y(g)}}_flush(f){const m=u.wrapDoneCallback(f);if(this.hasHitRowLimit)return m();try{const b=this.lines+this.decoder.end(),y=this.parse(b,!1);return this.processRows(y,m)}catch(b){return m(b)}}parse(f,m){if(!f)return[];const{line:b,rows:y}=this.parser.parse(f,m);return this.lines=b,y}processRows(f,m){const b=f.length,y=g=>{const w=j=>j?m(j):g%100!=0?y(g+1):void i(()=>y(g+1));if(this.checkAndEmitHeaders(),g>=b||this.hasHitRowLimit)return m();if(this.parsedLineCount+=1,this.shouldSkipLine)return w();const x=f[g];this.rowCount+=1,this.parsedRowCount+=1;const _=this.rowCount;return this.transformRow(x,(j,R)=>{if(j)return this.rowCount-=1,w(j);if(!R)return w(new Error("expected transform result"));if(R.isValid){if(R.row)return this.pushRow(R.row,w)}else this.emit("data-invalid",R.row,_,R.reason);return w()})};y(0)}transformRow(f,m){try{this.headerTransformer.transform(f,(b,y)=>b?m(b):y?y.isValid?y.row?this.shouldEmitRows?this.rowTransformerValidator.transformAndValidate(y.row,m):this.skipRow(m):(this.rowCount-=1,this.parsedRowCount-=1,m(null,{row:null,isValid:!0})):this.shouldEmitRows?m(null,{isValid:!1,row:f}):this.skipRow(m):m(new Error("Expected result from header transform")))}catch(b){m(b)}}checkAndEmitHeaders(){!this.headersEmitted&&this.headerTransformer.headers&&(this.headersEmitted=!0,this.emit("headers",this.headerTransformer.headers))}skipRow(f){return this.rowCount-=1,f(null,{row:null,isValid:!0})}pushRow(f,m){try{this.parserOptions.objectMode?this.push(f):this.push(JSON.stringify(f)),m()}catch(b){m(b)}}static wrapDoneCallback(f){let m=!1;return function(b){if(b){if(m)throw b;return m=!0,void f(b)}for(var y=arguments.length,g=new Array(y>1?y-1:0),w=1;w<y;w++)g[w-1]=arguments[w];f(...g)}}}l.CsvParserStream=u}).call(this)}).call(this,t("timers").setImmediate)},{"./parser":165,"./transforms":168,stream:505,string_decoder:218,timers:523}],154:[function(t,s,l){var i=function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(l,"__esModule",{value:!0}),l.ParserOptions=void 0;const o=i(t("lodash.escaperegexp")),d=i(t("lodash.isnil"));l.ParserOptions=class{constructor(c){var a;if(this.objectMode=!0,this.delimiter=",",this.ignoreEmpty=!1,this.quote='"',this.escape=null,this.escapeChar=this.quote,this.comment=null,this.supportsComments=!1,this.ltrim=!1,this.rtrim=!1,this.trim=!1,this.headers=null,this.renameHeaders=!1,this.strictColumnHandling=!1,this.discardUnmappedColumns=!1,this.carriageReturn="\r",this.encoding="utf8",this.limitRows=!1,this.maxRows=0,this.skipLines=0,this.skipRows=0,Object.assign(this,c||{}),this.delimiter.length>1)throw new Error("delimiter option must be one character long");this.escapedDelimiter=o.default(this.delimiter),this.escapeChar=(a=this.escape)!==null&&a!==void 0?a:this.quote,this.supportsComments=!d.default(this.comment),this.NEXT_TOKEN_REGEXP=new RegExp(`([^\\s]|\\r\\n|\\n|\\r|${this.escapedDelimiter})`),this.maxRows>0&&(this.limitRows=!0)}}},{"lodash.escaperegexp":442,"lodash.isnil":447}],155:[function(t,s,l){var i=Object.create?function(y,g,w,x){x===void 0&&(x=w),Object.defineProperty(y,x,{enumerable:!0,get:function(){return g[w]}})}:function(y,g,w,x){x===void 0&&(x=w),y[x]=g[w]},o=Object.create?function(y,g){Object.defineProperty(y,"default",{enumerable:!0,value:g})}:function(y,g){y.default=g},d=function(y){if(y&&y.__esModule)return y;var g={};if(y!=null)for(var w in y)w!=="default"&&Object.prototype.hasOwnProperty.call(y,w)&&i(g,y,w);return o(g,y),g},c=function(y,g){for(var w in y)w==="default"||Object.prototype.hasOwnProperty.call(g,w)||i(g,y,w)};Object.defineProperty(l,"__esModule",{value:!0}),l.parseString=l.parseFile=l.parseStream=l.parse=l.ParserOptions=l.CsvParserStream=void 0;const a=d(t("fs")),u=t("stream"),h=t("./ParserOptions"),f=t("./CsvParserStream");c(t("./types"),l);var m=t("./CsvParserStream");Object.defineProperty(l,"CsvParserStream",{enumerable:!0,get:function(){return m.CsvParserStream}});var b=t("./ParserOptions");Object.defineProperty(l,"ParserOptions",{enumerable:!0,get:function(){return b.ParserOptions}}),l.parse=y=>new f.CsvParserStream(new h.ParserOptions(y)),l.parseStream=(y,g)=>y.pipe(new f.CsvParserStream(new h.ParserOptions(g))),l.parseFile=function(y){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return a.createReadStream(y).pipe(new f.CsvParserStream(new h.ParserOptions(g)))},l.parseString=(y,g)=>{const w=new u.Readable;return w.push(y),w.push(null),w.pipe(new f.CsvParserStream(new h.ParserOptions(g)))}},{"./CsvParserStream":153,"./ParserOptions":154,"./types":169,fs:216,stream:505}],156:[function(t,s,l){Object.defineProperty(l,"__esModule",{value:!0}),l.Parser=void 0;const i=t("./Scanner"),o=t("./RowParser"),d=t("./Token");class c{constructor(u){this.parserOptions=u,this.rowParser=new o.RowParser(this.parserOptions)}static removeBOM(u){return u&&u.charCodeAt(0)===65279?u.slice(1):u}parse(u,h){const f=new i.Scanner({line:c.removeBOM(u),parserOptions:this.parserOptions,hasMoreData:h});return this.parserOptions.supportsComments?this.parseWithComments(f):this.parseWithoutComments(f)}parseWithoutComments(u){const h=[];let f=!0;for(;f;)f=this.parseRow(u,h);return{line:u.line,rows:h}}parseWithComments(u){const{parserOptions:h}=this,f=[];for(let m=u.nextCharacterToken;m!==null;m=u.nextCharacterToken)if(d.Token.isTokenComment(m,h)){if(u.advancePastLine()===null)return{line:u.lineFromCursor,rows:f};if(!u.hasMoreCharacters)return{line:u.lineFromCursor,rows:f};u.truncateToCursor()}else if(!this.parseRow(u,f))break;return{line:u.line,rows:f}}parseRow(u,h){if(!u.nextNonSpaceToken)return!1;const f=this.rowParser.parse(u);return f!==null&&(this.parserOptions.ignoreEmpty&&o.RowParser.isEmptyRow(f)||h.push(f),!0)}}l.Parser=c},{"./RowParser":157,"./Scanner":158,"./Token":159}],157:[function(t,s,l){Object.defineProperty(l,"__esModule",{value:!0}),l.RowParser=void 0;const i=t("./column"),o=t("./Token");l.RowParser=class{constructor(d){this.parserOptions=d,this.columnParser=new i.ColumnParser(d)}static isEmptyRow(d){return d.join("").replace(/\s+/g,"")===""}parse(d){const{parserOptions:c}=this,{hasMoreData:a}=d,u=d,h=[];let f=this.getStartToken(u,h);for(;f;){if(o.Token.isTokenRowDelimiter(f))return u.advancePastToken(f),!u.hasMoreCharacters&&o.Token.isTokenCarriageReturn(f,c)&&a?null:(u.truncateToCursor(),h);if(!this.shouldSkipColumnParse(u,f,h)){const m=this.columnParser.parse(u);if(m===null)return null;h.push(m)}f=u.nextNonSpaceToken}return a?null:(u.truncateToCursor(),h)}getStartToken(d,c){const a=d.nextNonSpaceToken;return a!==null&&o.Token.isTokenDelimiter(a,this.parserOptions)?(c.push(""),d.nextNonSpaceToken):a}shouldSkipColumnParse(d,c,a){const{parserOptions:u}=this;if(o.Token.isTokenDelimiter(c,u)){d.advancePastToken(c);const h=d.nextCharacterToken;if(!d.hasMoreCharacters||h!==null&&o.Token.isTokenRowDelimiter(h)||h!==null&&o.Token.isTokenDelimiter(h,u))return a.push(""),!0}return!1}}},{"./Token":159,"./column":164}],158:[function(t,s,l){Object.defineProperty(l,"__esModule",{value:!0}),l.Scanner=void 0;const i=t("./Token"),o=/((?:\r\n)|\n|\r)/;l.Scanner=class{constructor(d){this.cursor=0,this.line=d.line,this.lineLength=this.line.length,this.parserOptions=d.parserOptions,this.hasMoreData=d.hasMoreData,this.cursor=d.cursor||0}get hasMoreCharacters(){return this.lineLength>this.cursor}get nextNonSpaceToken(){const{lineFromCursor:d}=this,c=this.parserOptions.NEXT_TOKEN_REGEXP;if(d.search(c)===-1)return null;const a=c.exec(d);if(a==null)return null;const u=a[1],h=this.cursor+(a.index||0);return new i.Token({token:u,startCursor:h,endCursor:h+u.length-1})}get nextCharacterToken(){const{cursor:d,lineLength:c}=this;return c<=d?null:new i.Token({token:this.line[d],startCursor:d,endCursor:d})}get lineFromCursor(){return this.line.substr(this.cursor)}advancePastLine(){const d=o.exec(this.lineFromCursor);return d?(this.cursor+=(d.index||0)+d[0].length,this):this.hasMoreData?null:(this.cursor=this.lineLength,this)}advanceTo(d){return this.cursor=d,this}advanceToToken(d){return this.cursor=d.startCursor,this}advancePastToken(d){return this.cursor=d.endCursor+1,this}truncateToCursor(){return this.line=this.lineFromCursor,this.lineLength=this.line.length,this.cursor=0,this}}},{"./Token":159}],159:[function(t,s,l){Object.defineProperty(l,"__esModule",{value:!0}),l.Token=void 0,l.Token=class{constructor(i){this.token=i.token,this.startCursor=i.startCursor,this.endCursor=i.endCursor}static isTokenRowDelimiter(i){const o=i.token;return o==="\r"||o===`
`||o===`\r
`}static isTokenCarriageReturn(i,o){return i.token===o.carriageReturn}static isTokenComment(i,o){return o.supportsComments&&!!i&&i.token===o.comment}static isTokenEscapeCharacter(i,o){return i.token===o.escapeChar}static isTokenQuote(i,o){return i.token===o.quote}static isTokenDelimiter(i,o){return i.token===o.delimiter}}},{}],160:[function(t,s,l){Object.defineProperty(l,"__esModule",{value:!0}),l.ColumnFormatter=void 0,l.ColumnFormatter=class{constructor(i){i.trim?this.format=o=>o.trim():i.ltrim?this.format=o=>o.trimLeft():i.rtrim?this.format=o=>o.trimRight():this.format=o=>o}}},{}],161:[function(t,s,l){Object.defineProperty(l,"__esModule",{value:!0}),l.ColumnParser=void 0;const i=t("./NonQuotedColumnParser"),o=t("./QuotedColumnParser"),d=t("../Token");l.ColumnParser=class{constructor(c){this.parserOptions=c,this.quotedColumnParser=new o.QuotedColumnParser(c),this.nonQuotedColumnParser=new i.NonQuotedColumnParser(c)}parse(c){const{nextNonSpaceToken:a}=c;return a!==null&&d.Token.isTokenQuote(a,this.parserOptions)?(c.advanceToToken(a),this.quotedColumnParser.parse(c)):this.nonQuotedColumnParser.parse(c)}}},{"../Token":159,"./NonQuotedColumnParser":162,"./QuotedColumnParser":163}],162:[function(t,s,l){Object.defineProperty(l,"__esModule",{value:!0}),l.NonQuotedColumnParser=void 0;const i=t("./ColumnFormatter"),o=t("../Token");l.NonQuotedColumnParser=class{constructor(d){this.parserOptions=d,this.columnFormatter=new i.ColumnFormatter(d)}parse(d){if(!d.hasMoreCharacters)return null;const{parserOptions:c}=this,a=[];let u=d.nextCharacterToken;for(;u&&!o.Token.isTokenDelimiter(u,c)&&!o.Token.isTokenRowDelimiter(u);u=d.nextCharacterToken)a.push(u.token),d.advancePastToken(u);return this.columnFormatter.format(a.join(""))}}},{"../Token":159,"./ColumnFormatter":160}],163:[function(t,s,l){Object.defineProperty(l,"__esModule",{value:!0}),l.QuotedColumnParser=void 0;const i=t("./ColumnFormatter"),o=t("../Token");l.QuotedColumnParser=class{constructor(d){this.parserOptions=d,this.columnFormatter=new i.ColumnFormatter(d)}parse(d){if(!d.hasMoreCharacters)return null;const c=d.cursor,{foundClosingQuote:a,col:u}=this.gatherDataBetweenQuotes(d);if(!a){if(d.advanceTo(c),!d.hasMoreData)throw new Error(`Parse Error: missing closing: '${this.parserOptions.quote||""}' in line: at '${d.lineFromCursor.replace(/[\r\n]/g,"\\n'")}'`);return null}return this.checkForMalformedColumn(d),u}gatherDataBetweenQuotes(d){const{parserOptions:c}=this;let a=!1,u=!1;const h=[];let f=d.nextCharacterToken;for(;!u&&f!==null;f=d.nextCharacterToken){const m=o.Token.isTokenQuote(f,c);if(!a&&m)a=!0;else if(a)if(o.Token.isTokenEscapeCharacter(f,c)){d.advancePastToken(f);const b=d.nextCharacterToken;b!==null&&(o.Token.isTokenQuote(b,c)||o.Token.isTokenEscapeCharacter(b,c))?(h.push(b.token),f=b):m?u=!0:h.push(f.token)}else m?u=!0:h.push(f.token);d.advancePastToken(f)}return{col:this.columnFormatter.format(h.join("")),foundClosingQuote:u}}checkForMalformedColumn(d){const{parserOptions:c}=this,{nextNonSpaceToken:a}=d;if(a){const u=o.Token.isTokenDelimiter(a,c),h=o.Token.isTokenRowDelimiter(a);if(!u&&!h){const f=d.lineFromCursor.substr(0,10).replace(/[\r\n]/g,"\\n'");throw new Error(`Parse Error: expected: '${c.escapedDelimiter}' OR new line got: '${a.token}'. at '${f}`)}d.advanceToToken(a)}else d.hasMoreData||d.advancePastLine()}}},{"../Token":159,"./ColumnFormatter":160}],164:[function(t,s,l){Object.defineProperty(l,"__esModule",{value:!0}),l.ColumnFormatter=l.QuotedColumnParser=l.NonQuotedColumnParser=l.ColumnParser=void 0;var i=t("./ColumnParser");Object.defineProperty(l,"ColumnParser",{enumerable:!0,get:function(){return i.ColumnParser}});var o=t("./NonQuotedColumnParser");Object.defineProperty(l,"NonQuotedColumnParser",{enumerable:!0,get:function(){return o.NonQuotedColumnParser}});var d=t("./QuotedColumnParser");Object.defineProperty(l,"QuotedColumnParser",{enumerable:!0,get:function(){return d.QuotedColumnParser}});var c=t("./ColumnFormatter");Object.defineProperty(l,"ColumnFormatter",{enumerable:!0,get:function(){return c.ColumnFormatter}})},{"./ColumnFormatter":160,"./ColumnParser":161,"./NonQuotedColumnParser":162,"./QuotedColumnParser":163}],165:[function(t,s,l){Object.defineProperty(l,"__esModule",{value:!0}),l.QuotedColumnParser=l.NonQuotedColumnParser=l.ColumnParser=l.Token=l.Scanner=l.RowParser=l.Parser=void 0;var i=t("./Parser");Object.defineProperty(l,"Parser",{enumerable:!0,get:function(){return i.Parser}});var o=t("./RowParser");Object.defineProperty(l,"RowParser",{enumerable:!0,get:function(){return o.RowParser}});var d=t("./Scanner");Object.defineProperty(l,"Scanner",{enumerable:!0,get:function(){return d.Scanner}});var c=t("./Token");Object.defineProperty(l,"Token",{enumerable:!0,get:function(){return c.Token}});var a=t("./column");Object.defineProperty(l,"ColumnParser",{enumerable:!0,get:function(){return a.ColumnParser}}),Object.defineProperty(l,"NonQuotedColumnParser",{enumerable:!0,get:function(){return a.NonQuotedColumnParser}}),Object.defineProperty(l,"QuotedColumnParser",{enumerable:!0,get:function(){return a.QuotedColumnParser}})},{"./Parser":156,"./RowParser":157,"./Scanner":158,"./Token":159,"./column":164}],166:[function(t,s,l){var i=function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(l,"__esModule",{value:!0}),l.HeaderTransformer=void 0;const o=i(t("lodash.isundefined")),d=i(t("lodash.isfunction")),c=i(t("lodash.uniq")),a=i(t("lodash.groupby"));l.HeaderTransformer=class{constructor(u){this.headers=null,this.receivedHeaders=!1,this.shouldUseFirstRow=!1,this.processedFirstRow=!1,this.headersLength=0,this.parserOptions=u,u.headers===!0?this.shouldUseFirstRow=!0:Array.isArray(u.headers)?this.setHeaders(u.headers):d.default(u.headers)&&(this.headersTransform=u.headers)}transform(u,h){return this.shouldMapRow(u)?h(null,this.processRow(u)):h(null,{row:null,isValid:!0})}shouldMapRow(u){const{parserOptions:h}=this;if(!this.headersTransform&&h.renameHeaders&&!this.processedFirstRow){if(!this.receivedHeaders)throw new Error("Error renaming headers: new headers must be provided in an array");return this.processedFirstRow=!0,!1}if(!this.receivedHeaders&&Array.isArray(u)){if(this.headersTransform)this.setHeaders(this.headersTransform(u));else{if(!this.shouldUseFirstRow)return!0;this.setHeaders(u)}return!1}return!0}processRow(u){if(!this.headers)return{row:u,isValid:!0};const{parserOptions:h}=this;if(!h.discardUnmappedColumns&&u.length>this.headersLength){if(!h.strictColumnHandling)throw new Error(`Unexpected Error: column header mismatch expected: ${this.headersLength} columns got: ${u.length}`);return{row:u,isValid:!1,reason:`Column header mismatch expected: ${this.headersLength} columns got: ${u.length}`}}return h.strictColumnHandling&&u.length<this.headersLength?{row:u,isValid:!1,reason:`Column header mismatch expected: ${this.headersLength} columns got: ${u.length}`}:{row:this.mapHeaders(u),isValid:!0}}mapHeaders(u){const h={},{headers:f,headersLength:m}=this;for(let b=0;b<m;b+=1){const y=f[b];if(!o.default(y)){const g=u[b];o.default(g)?h[y]="":h[y]=g}}return h}setHeaders(u){var h;const f=u.filter(m=>!!m);if(c.default(f).length!==f.length){const m=a.default(f),b=Object.keys(m).filter(y=>m[y].length>1);throw new Error("Duplicate headers found "+JSON.stringify(b))}this.headers=u,this.receivedHeaders=!0,this.headersLength=((h=this.headers)===null||h===void 0?void 0:h.length)||0}}},{"lodash.groupby":443,"lodash.isfunction":446,"lodash.isundefined":448,"lodash.uniq":449}],167:[function(t,s,l){var i=function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0}),l.RowTransformerValidator=void 0;const o=i(t("lodash.isfunction")),d=t("../types");class c{constructor(){this._rowTransform=null,this._rowValidator=null}static createTransform(u){return d.isSyncTransform(u)?(h,f)=>{let m=null;try{m=u(h)}catch(b){return f(b)}return f(null,m)}:u}static createValidator(u){return d.isSyncValidate(u)?(h,f)=>{f(null,{row:h,isValid:u(h)})}:(h,f)=>{u(h,(m,b,y)=>m?f(m):f(null,b?{row:h,isValid:b,reason:y}:{row:h,isValid:!1,reason:y}))}}set rowTransform(u){if(!o.default(u))throw new TypeError("The transform should be a function");this._rowTransform=c.createTransform(u)}set rowValidator(u){if(!o.default(u))throw new TypeError("The validate should be a function");this._rowValidator=c.createValidator(u)}transformAndValidate(u,h){return this.callTransformer(u,(f,m)=>f?h(f):m?this.callValidator(m,(b,y)=>b?h(b):y&&!y.isValid?h(null,{row:m,isValid:!1,reason:y.reason}):h(null,{row:m,isValid:!0})):h(null,{row:null,isValid:!0}))}callTransformer(u,h){return this._rowTransform?this._rowTransform(u,h):h(null,u)}callValidator(u,h){return this._rowValidator?this._rowValidator(u,h):h(null,{row:u,isValid:!0})}}l.RowTransformerValidator=c},{"../types":169,"lodash.isfunction":446}],168:[function(t,s,l){Object.defineProperty(l,"__esModule",{value:!0}),l.HeaderTransformer=l.RowTransformerValidator=void 0;var i=t("./RowTransformerValidator");Object.defineProperty(l,"RowTransformerValidator",{enumerable:!0,get:function(){return i.RowTransformerValidator}});var o=t("./HeaderTransformer");Object.defineProperty(l,"HeaderTransformer",{enumerable:!0,get:function(){return o.HeaderTransformer}})},{"./HeaderTransformer":166,"./RowTransformerValidator":167}],169:[function(t,s,l){Object.defineProperty(l,"__esModule",{value:!0}),l.isSyncValidate=l.isSyncTransform=void 0,l.isSyncTransform=i=>i.length===1,l.isSyncValidate=i=>i.length===1},{}],170:[function(t,s,l){const i=l;i.bignum=t("bn.js"),i.define=t("./asn1/api").define,i.base=t("./asn1/base"),i.constants=t("./asn1/constants"),i.decoders=t("./asn1/decoders"),i.encoders=t("./asn1/encoders")},{"./asn1/api":171,"./asn1/base":173,"./asn1/constants":177,"./asn1/decoders":179,"./asn1/encoders":182,"bn.js":184}],171:[function(t,s,l){const i=t("./encoders"),o=t("./decoders"),d=t("inherits");function c(a,u){this.name=a,this.body=u,this.decoders={},this.encoders={}}l.define=function(a,u){return new c(a,u)},c.prototype._createNamed=function(a){const u=this.name;function h(f){this._initNamed(f,u)}return d(h,a),h.prototype._initNamed=function(f,m){a.call(this,f,m)},new h(this)},c.prototype._getDecoder=function(a){return a=a||"der",this.decoders.hasOwnProperty(a)||(this.decoders[a]=this._createNamed(o[a])),this.decoders[a]},c.prototype.decode=function(a,u,h){return this._getDecoder(u).decode(a,h)},c.prototype._getEncoder=function(a){return a=a||"der",this.encoders.hasOwnProperty(a)||(this.encoders[a]=this._createNamed(i[a])),this.encoders[a]},c.prototype.encode=function(a,u,h){return this._getEncoder(u).encode(a,h)}},{"./decoders":179,"./encoders":182,inherits:440}],172:[function(t,s,l){const i=t("inherits"),o=t("../base/reporter").Reporter,d=t("safer-buffer").Buffer;function c(u,h){o.call(this,h),d.isBuffer(u)?(this.base=u,this.offset=0,this.length=u.length):this.error("Input not Buffer")}function a(u,h){if(Array.isArray(u))this.length=0,this.value=u.map(function(f){return a.isEncoderBuffer(f)||(f=new a(f,h)),this.length+=f.length,f},this);else if(typeof u=="number"){if(!(0<=u&&u<=255))return h.error("non-byte EncoderBuffer value");this.value=u,this.length=1}else if(typeof u=="string")this.value=u,this.length=d.byteLength(u);else{if(!d.isBuffer(u))return h.error("Unsupported type: "+typeof u);this.value=u,this.length=u.length}}i(c,o),l.DecoderBuffer=c,c.isDecoderBuffer=function(u){return u instanceof c?!0:typeof u=="object"&&d.isBuffer(u.base)&&u.constructor.name==="DecoderBuffer"&&typeof u.offset=="number"&&typeof u.length=="number"&&typeof u.save=="function"&&typeof u.restore=="function"&&typeof u.isEmpty=="function"&&typeof u.readUInt8=="function"&&typeof u.skip=="function"&&typeof u.raw=="function"},c.prototype.save=function(){return{offset:this.offset,reporter:o.prototype.save.call(this)}},c.prototype.restore=function(u){const h=new c(this.base);return h.offset=u.offset,h.length=this.offset,this.offset=u.offset,o.prototype.restore.call(this,u.reporter),h},c.prototype.isEmpty=function(){return this.offset===this.length},c.prototype.readUInt8=function(u){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(u||"DecoderBuffer overrun")},c.prototype.skip=function(u,h){if(!(this.offset+u<=this.length))return this.error(h||"DecoderBuffer overrun");const f=new c(this.base);return f._reporterState=this._reporterState,f.offset=this.offset,f.length=this.offset+u,this.offset+=u,f},c.prototype.raw=function(u){return this.base.slice(u?u.offset:this.offset,this.length)},l.EncoderBuffer=a,a.isEncoderBuffer=function(u){return u instanceof a?!0:typeof u=="object"&&u.constructor.name==="EncoderBuffer"&&typeof u.length=="number"&&typeof u.join=="function"},a.prototype.join=function(u,h){return u||(u=d.alloc(this.length)),h||(h=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(f){f.join(u,h),h+=f.length}):(typeof this.value=="number"?u[h]=this.value:typeof this.value=="string"?u.write(this.value,h):d.isBuffer(this.value)&&this.value.copy(u,h),h+=this.length)),u}},{"../base/reporter":175,inherits:440,"safer-buffer":495}],173:[function(t,s,l){const i=l;i.Reporter=t("./reporter").Reporter,i.DecoderBuffer=t("./buffer").DecoderBuffer,i.EncoderBuffer=t("./buffer").EncoderBuffer,i.Node=t("./node")},{"./buffer":172,"./node":174,"./reporter":175}],174:[function(t,s,l){const i=t("../base/reporter").Reporter,o=t("../base/buffer").EncoderBuffer,d=t("../base/buffer").DecoderBuffer,c=t("minimalistic-assert"),a=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],u=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(a);function h(m,b,y){const g={};this._baseState=g,g.name=y,g.enc=m,g.parent=b||null,g.children=null,g.tag=null,g.args=null,g.reverseArgs=null,g.choice=null,g.optional=!1,g.any=!1,g.obj=!1,g.use=null,g.useDecoder=null,g.key=null,g.default=null,g.explicit=null,g.implicit=null,g.contains=null,g.parent||(g.children=[],this._wrap())}s.exports=h;const f=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];h.prototype.clone=function(){const m=this._baseState,b={};f.forEach(function(g){b[g]=m[g]});const y=new this.constructor(b.parent);return y._baseState=b,y},h.prototype._wrap=function(){const m=this._baseState;u.forEach(function(b){this[b]=function(){const y=new this.constructor(this);return m.children.push(y),y[b].apply(y,arguments)}},this)},h.prototype._init=function(m){const b=this._baseState;c(b.parent===null),m.call(this),b.children=b.children.filter(function(y){return y._baseState.parent===this},this),c.equal(b.children.length,1,"Root node can have only one child")},h.prototype._useArgs=function(m){const b=this._baseState,y=m.filter(function(g){return g instanceof this.constructor},this);m=m.filter(function(g){return!(g instanceof this.constructor)},this),y.length!==0&&(c(b.children===null),b.children=y,y.forEach(function(g){g._baseState.parent=this},this)),m.length!==0&&(c(b.args===null),b.args=m,b.reverseArgs=m.map(function(g){if(typeof g!="object"||g.constructor!==Object)return g;const w={};return Object.keys(g).forEach(function(x){x==(0|x)&&(x|=0);const _=g[x];w[_]=x}),w}))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach(function(m){h.prototype[m]=function(){const b=this._baseState;throw new Error(m+" not implemented for encoding: "+b.enc)}}),a.forEach(function(m){h.prototype[m]=function(){const b=this._baseState,y=Array.prototype.slice.call(arguments);return c(b.tag===null),b.tag=m,this._useArgs(y),this}}),h.prototype.use=function(m){c(m);const b=this._baseState;return c(b.use===null),b.use=m,this},h.prototype.optional=function(){return this._baseState.optional=!0,this},h.prototype.def=function(m){const b=this._baseState;return c(b.default===null),b.default=m,b.optional=!0,this},h.prototype.explicit=function(m){const b=this._baseState;return c(b.explicit===null&&b.implicit===null),b.explicit=m,this},h.prototype.implicit=function(m){const b=this._baseState;return c(b.explicit===null&&b.implicit===null),b.implicit=m,this},h.prototype.obj=function(){const m=this._baseState,b=Array.prototype.slice.call(arguments);return m.obj=!0,b.length!==0&&this._useArgs(b),this},h.prototype.key=function(m){const b=this._baseState;return c(b.key===null),b.key=m,this},h.prototype.any=function(){return this._baseState.any=!0,this},h.prototype.choice=function(m){const b=this._baseState;return c(b.choice===null),b.choice=m,this._useArgs(Object.keys(m).map(function(y){return m[y]})),this},h.prototype.contains=function(m){const b=this._baseState;return c(b.use===null),b.contains=m,this},h.prototype._decode=function(m,b){const y=this._baseState;if(y.parent===null)return m.wrapResult(y.children[0]._decode(m,b));let g,w=y.default,x=!0,_=null;if(y.key!==null&&(_=m.enterKey(y.key)),y.optional){let j=null;if(y.explicit!==null?j=y.explicit:y.implicit!==null?j=y.implicit:y.tag!==null&&(j=y.tag),j!==null||y.any){if(x=this._peekTag(m,j,y.any),m.isError(x))return x}else{const R=m.save();try{y.choice===null?this._decodeGeneric(y.tag,m,b):this._decodeChoice(m,b),x=!0}catch{x=!1}m.restore(R)}}if(y.obj&&x&&(g=m.enterObject()),x){if(y.explicit!==null){const R=this._decodeTag(m,y.explicit);if(m.isError(R))return R;m=R}const j=m.offset;if(y.use===null&&y.choice===null){let R;y.any&&(R=m.save());const M=this._decodeTag(m,y.implicit!==null?y.implicit:y.tag,y.any);if(m.isError(M))return M;y.any?w=m.raw(R):m=M}if(b&&b.track&&y.tag!==null&&b.track(m.path(),j,m.length,"tagged"),b&&b.track&&y.tag!==null&&b.track(m.path(),m.offset,m.length,"content"),y.any||(w=y.choice===null?this._decodeGeneric(y.tag,m,b):this._decodeChoice(m,b)),m.isError(w))return w;if(y.any||y.choice!==null||y.children===null||y.children.forEach(function(R){R._decode(m,b)}),y.contains&&(y.tag==="octstr"||y.tag==="bitstr")){const R=new d(w);w=this._getUse(y.contains,m._reporterState.obj)._decode(R,b)}}return y.obj&&x&&(w=m.leaveObject(g)),y.key===null||w===null&&x!==!0?_!==null&&m.exitKey(_):m.leaveKey(_,y.key,w),w},h.prototype._decodeGeneric=function(m,b,y){const g=this._baseState;return m==="seq"||m==="set"?null:m==="seqof"||m==="setof"?this._decodeList(b,m,g.args[0],y):/str$/.test(m)?this._decodeStr(b,m,y):m==="objid"&&g.args?this._decodeObjid(b,g.args[0],g.args[1],y):m==="objid"?this._decodeObjid(b,null,null,y):m==="gentime"||m==="utctime"?this._decodeTime(b,m,y):m==="null_"?this._decodeNull(b,y):m==="bool"?this._decodeBool(b,y):m==="objDesc"?this._decodeStr(b,m,y):m==="int"||m==="enum"?this._decodeInt(b,g.args&&g.args[0],y):g.use!==null?this._getUse(g.use,b._reporterState.obj)._decode(b,y):b.error("unknown tag: "+m)},h.prototype._getUse=function(m,b){const y=this._baseState;return y.useDecoder=this._use(m,b),c(y.useDecoder._baseState.parent===null),y.useDecoder=y.useDecoder._baseState.children[0],y.implicit!==y.useDecoder._baseState.implicit&&(y.useDecoder=y.useDecoder.clone(),y.useDecoder._baseState.implicit=y.implicit),y.useDecoder},h.prototype._decodeChoice=function(m,b){const y=this._baseState;let g=null,w=!1;return Object.keys(y.choice).some(function(x){const _=m.save(),j=y.choice[x];try{const R=j._decode(m,b);if(m.isError(R))return!1;g={type:x,value:R},w=!0}catch{return m.restore(_),!1}return!0},this),w?g:m.error("Choice not matched")},h.prototype._createEncoderBuffer=function(m){return new o(m,this.reporter)},h.prototype._encode=function(m,b,y){const g=this._baseState;if(g.default!==null&&g.default===m)return;const w=this._encodeValue(m,b,y);return w===void 0||this._skipDefault(w,b,y)?void 0:w},h.prototype._encodeValue=function(m,b,y){const g=this._baseState;if(g.parent===null)return g.children[0]._encode(m,b||new i);let w=null;if(this.reporter=b,g.optional&&m===void 0){if(g.default===null)return;m=g.default}let x=null,_=!1;if(g.any)w=this._createEncoderBuffer(m);else if(g.choice)w=this._encodeChoice(m,b);else if(g.contains)x=this._getUse(g.contains,y)._encode(m,b),_=!0;else if(g.children)x=g.children.map(function(j){if(j._baseState.tag==="null_")return j._encode(null,b,m);if(j._baseState.key===null)return b.error("Child should have a key");const R=b.enterKey(j._baseState.key);if(typeof m!="object")return b.error("Child expected, but input is not object");const M=j._encode(m[j._baseState.key],b,m);return b.leaveKey(R),M},this).filter(function(j){return j}),x=this._createEncoderBuffer(x);else if(g.tag==="seqof"||g.tag==="setof"){if(!g.args||g.args.length!==1)return b.error("Too many args for : "+g.tag);if(!Array.isArray(m))return b.error("seqof/setof, but data is not Array");const j=this.clone();j._baseState.implicit=null,x=this._createEncoderBuffer(m.map(function(R){const M=this._baseState;return this._getUse(M.args[0],m)._encode(R,b)},j))}else g.use!==null?w=this._getUse(g.use,y)._encode(m,b):(x=this._encodePrimitive(g.tag,m),_=!0);if(!g.any&&g.choice===null){const j=g.implicit!==null?g.implicit:g.tag,R=g.implicit===null?"universal":"context";j===null?g.use===null&&b.error("Tag could be omitted only for .use()"):g.use===null&&(w=this._encodeComposite(j,_,R,x))}return g.explicit!==null&&(w=this._encodeComposite(g.explicit,!1,"context",w)),w},h.prototype._encodeChoice=function(m,b){const y=this._baseState,g=y.choice[m.type];return g||c(!1,m.type+" not found in "+JSON.stringify(Object.keys(y.choice))),g._encode(m.value,b)},h.prototype._encodePrimitive=function(m,b){const y=this._baseState;if(/str$/.test(m))return this._encodeStr(b,m);if(m==="objid"&&y.args)return this._encodeObjid(b,y.reverseArgs[0],y.args[1]);if(m==="objid")return this._encodeObjid(b,null,null);if(m==="gentime"||m==="utctime")return this._encodeTime(b,m);if(m==="null_")return this._encodeNull();if(m==="int"||m==="enum")return this._encodeInt(b,y.args&&y.reverseArgs[0]);if(m==="bool")return this._encodeBool(b);if(m==="objDesc")return this._encodeStr(b,m);throw new Error("Unsupported tag: "+m)},h.prototype._isNumstr=function(m){return/^[0-9 ]*$/.test(m)},h.prototype._isPrintstr=function(m){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(m)}},{"../base/buffer":172,"../base/reporter":175,"minimalistic-assert":453}],175:[function(t,s,l){const i=t("inherits");function o(c){this._reporterState={obj:null,path:[],options:c||{},errors:[]}}function d(c,a){this.path=c,this.rethrow(a)}l.Reporter=o,o.prototype.isError=function(c){return c instanceof d},o.prototype.save=function(){const c=this._reporterState;return{obj:c.obj,pathLen:c.path.length}},o.prototype.restore=function(c){const a=this._reporterState;a.obj=c.obj,a.path=a.path.slice(0,c.pathLen)},o.prototype.enterKey=function(c){return this._reporterState.path.push(c)},o.prototype.exitKey=function(c){const a=this._reporterState;a.path=a.path.slice(0,c-1)},o.prototype.leaveKey=function(c,a,u){const h=this._reporterState;this.exitKey(c),h.obj!==null&&(h.obj[a]=u)},o.prototype.path=function(){return this._reporterState.path.join("/")},o.prototype.enterObject=function(){const c=this._reporterState,a=c.obj;return c.obj={},a},o.prototype.leaveObject=function(c){const a=this._reporterState,u=a.obj;return a.obj=c,u},o.prototype.error=function(c){let a;const u=this._reporterState,h=c instanceof d;if(a=h?c:new d(u.path.map(function(f){return"["+JSON.stringify(f)+"]"}).join(""),c.message||c,c.stack),!u.options.partial)throw a;return h||u.errors.push(a),a},o.prototype.wrapResult=function(c){const a=this._reporterState;return a.options.partial?{result:this.isError(c)?null:c,errors:a.errors}:c},i(d,Error),d.prototype.rethrow=function(c){if(this.message=c+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,d),!this.stack)try{throw new Error(this.message)}catch(a){this.stack=a.stack}return this}},{inherits:440}],176:[function(t,s,l){function i(o){const d={};return Object.keys(o).forEach(function(c){(0|c)==c&&(c|=0);const a=o[c];d[a]=c}),d}l.tagClass={0:"universal",1:"application",2:"context",3:"private"},l.tagClassByName=i(l.tagClass),l.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},l.tagByName=i(l.tag)},{}],177:[function(t,s,l){const i=l;i._reverse=function(o){const d={};return Object.keys(o).forEach(function(c){(0|c)==c&&(c|=0);const a=o[c];d[a]=c}),d},i.der=t("./der")},{"./der":176}],178:[function(t,s,l){const i=t("inherits"),o=t("bn.js"),d=t("../base/buffer").DecoderBuffer,c=t("../base/node"),a=t("../constants/der");function u(b){this.enc="der",this.name=b.name,this.entity=b,this.tree=new h,this.tree._init(b.body)}function h(b){c.call(this,"der",b)}function f(b,y){let g=b.readUInt8(y);if(b.isError(g))return g;const w=a.tagClass[g>>6],x=(32&g)==0;if((31&g)==31){let _=g;for(g=0;(128&_)==128;){if(_=b.readUInt8(y),b.isError(_))return _;g<<=7,g|=127&_}}else g&=31;return{cls:w,primitive:x,tag:g,tagStr:a.tag[g]}}function m(b,y,g){let w=b.readUInt8(g);if(b.isError(w))return w;if(!y&&w===128)return null;if((128&w)==0)return w;const x=127&w;if(x>4)return b.error("length octect is too long");w=0;for(let _=0;_<x;_++){w<<=8;const j=b.readUInt8(g);if(b.isError(j))return j;w|=j}return w}s.exports=u,u.prototype.decode=function(b,y){return d.isDecoderBuffer(b)||(b=new d(b,y)),this.tree._decode(b,y)},i(h,c),h.prototype._peekTag=function(b,y,g){if(b.isEmpty())return!1;const w=b.save(),x=f(b,'Failed to peek tag: "'+y+'"');return b.isError(x)?x:(b.restore(w),x.tag===y||x.tagStr===y||x.tagStr+"of"===y||g)},h.prototype._decodeTag=function(b,y,g){const w=f(b,'Failed to decode tag of "'+y+'"');if(b.isError(w))return w;let x=m(b,w.primitive,'Failed to get length of "'+y+'"');if(b.isError(x))return x;if(!g&&w.tag!==y&&w.tagStr!==y&&w.tagStr+"of"!==y)return b.error('Failed to match tag: "'+y+'"');if(w.primitive||x!==null)return b.skip(x,'Failed to match body of: "'+y+'"');const _=b.save(),j=this._skipUntilEnd(b,'Failed to skip indefinite length body: "'+this.tag+'"');return b.isError(j)?j:(x=b.offset-_.offset,b.restore(_),b.skip(x,'Failed to match body of: "'+y+'"'))},h.prototype._skipUntilEnd=function(b,y){for(;;){const g=f(b,y);if(b.isError(g))return g;const w=m(b,g.primitive,y);if(b.isError(w))return w;let x;if(x=g.primitive||w!==null?b.skip(w):this._skipUntilEnd(b,y),b.isError(x))return x;if(g.tagStr==="end")break}},h.prototype._decodeList=function(b,y,g,w){const x=[];for(;!b.isEmpty();){const _=this._peekTag(b,"end");if(b.isError(_))return _;const j=g.decode(b,"der",w);if(b.isError(j)&&_)break;x.push(j)}return x},h.prototype._decodeStr=function(b,y){if(y==="bitstr"){const g=b.readUInt8();return b.isError(g)?g:{unused:g,data:b.raw()}}if(y==="bmpstr"){const g=b.raw();if(g.length%2==1)return b.error("Decoding of string type: bmpstr length mismatch");let w="";for(let x=0;x<g.length/2;x++)w+=String.fromCharCode(g.readUInt16BE(2*x));return w}if(y==="numstr"){const g=b.raw().toString("ascii");return this._isNumstr(g)?g:b.error("Decoding of string type: numstr unsupported characters")}if(y==="octstr"||y==="objDesc")return b.raw();if(y==="printstr"){const g=b.raw().toString("ascii");return this._isPrintstr(g)?g:b.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(y)?b.raw().toString():b.error("Decoding of string type: "+y+" unsupported")},h.prototype._decodeObjid=function(b,y,g){let w;const x=[];let _=0,j=0;for(;!b.isEmpty();)j=b.readUInt8(),_<<=7,_|=127&j,(128&j)==0&&(x.push(_),_=0);128&j&&x.push(_);const R=x[0]/40|0,M=x[0]%40;if(w=g?x:[R,M].concat(x.slice(1)),y){let I=y[w.join(" ")];I===void 0&&(I=y[w.join(".")]),I!==void 0&&(w=I)}return w},h.prototype._decodeTime=function(b,y){const g=b.raw().toString();let w,x,_,j,R,M;if(y==="gentime")w=0|g.slice(0,4),x=0|g.slice(4,6),_=0|g.slice(6,8),j=0|g.slice(8,10),R=0|g.slice(10,12),M=0|g.slice(12,14);else{if(y!=="utctime")return b.error("Decoding "+y+" time is not supported yet");w=0|g.slice(0,2),x=0|g.slice(2,4),_=0|g.slice(4,6),j=0|g.slice(6,8),R=0|g.slice(8,10),M=0|g.slice(10,12),w=w<70?2e3+w:1900+w}return Date.UTC(w,x-1,_,j,R,M,0)},h.prototype._decodeNull=function(){return null},h.prototype._decodeBool=function(b){const y=b.readUInt8();return b.isError(y)?y:y!==0},h.prototype._decodeInt=function(b,y){const g=b.raw();let w=new o(g);return y&&(w=y[w.toString(10)]||w),w},h.prototype._use=function(b,y){return typeof b=="function"&&(b=b(y)),b._getDecoder("der").tree}},{"../base/buffer":172,"../base/node":174,"../constants/der":176,"bn.js":184,inherits:440}],179:[function(t,s,l){const i=l;i.der=t("./der"),i.pem=t("./pem")},{"./der":178,"./pem":180}],180:[function(t,s,l){const i=t("inherits"),o=t("safer-buffer").Buffer,d=t("./der");function c(a){d.call(this,a),this.enc="pem"}i(c,d),s.exports=c,c.prototype.decode=function(a,u){const h=a.toString().split(/[\r\n]+/g),f=u.label.toUpperCase(),m=/^-----(BEGIN|END) ([^-]+)-----$/;let b=-1,y=-1;for(let x=0;x<h.length;x++){const _=h[x].match(m);if(_!==null&&_[2]===f){if(b!==-1){if(_[1]!=="END")break;y=x;break}if(_[1]!=="BEGIN")break;b=x}}if(b===-1||y===-1)throw new Error("PEM section not found for: "+f);const g=h.slice(b+1,y).join("");g.replace(/[^a-z0-9+/=]+/gi,"");const w=o.from(g,"base64");return d.prototype.decode.call(this,w,u)}},{"./der":178,inherits:440,"safer-buffer":495}],181:[function(t,s,l){const i=t("inherits"),o=t("safer-buffer").Buffer,d=t("../base/node"),c=t("../constants/der");function a(f){this.enc="der",this.name=f.name,this.entity=f,this.tree=new u,this.tree._init(f.body)}function u(f){d.call(this,"der",f)}function h(f){return f<10?"0"+f:f}s.exports=a,a.prototype.encode=function(f,m){return this.tree._encode(f,m).join()},i(u,d),u.prototype._encodeComposite=function(f,m,b,y){const g=function(_,j,R,M){let I;if(_==="seqof"?_="seq":_==="setof"&&(_="set"),c.tagByName.hasOwnProperty(_))I=c.tagByName[_];else{if(typeof _!="number"||(0|_)!==_)return M.error("Unknown tag: "+_);I=_}return I>=31?M.error("Multi-octet tag encoding unsupported"):(j||(I|=32),I|=c.tagClassByName[R||"universal"]<<6,I)}(f,m,b,this.reporter);if(y.length<128){const _=o.alloc(2);return _[0]=g,_[1]=y.length,this._createEncoderBuffer([_,y])}let w=1;for(let _=y.length;_>=256;_>>=8)w++;const x=o.alloc(2+w);x[0]=g,x[1]=128|w;for(let _=1+w,j=y.length;j>0;_--,j>>=8)x[_]=255&j;return this._createEncoderBuffer([x,y])},u.prototype._encodeStr=function(f,m){if(m==="bitstr")return this._createEncoderBuffer([0|f.unused,f.data]);if(m==="bmpstr"){const b=o.alloc(2*f.length);for(let y=0;y<f.length;y++)b.writeUInt16BE(f.charCodeAt(y),2*y);return this._createEncoderBuffer(b)}return m==="numstr"?this._isNumstr(f)?this._createEncoderBuffer(f):this.reporter.error("Encoding of string type: numstr supports only digits and space"):m==="printstr"?this._isPrintstr(f)?this._createEncoderBuffer(f):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(m)||m==="objDesc"?this._createEncoderBuffer(f):this.reporter.error("Encoding of string type: "+m+" unsupported")},u.prototype._encodeObjid=function(f,m,b){if(typeof f=="string"){if(!m)return this.reporter.error("string objid given, but no values map found");if(!m.hasOwnProperty(f))return this.reporter.error("objid not found in values map");f=m[f].split(/[\s.]+/g);for(let x=0;x<f.length;x++)f[x]|=0}else if(Array.isArray(f)){f=f.slice();for(let x=0;x<f.length;x++)f[x]|=0}if(!Array.isArray(f))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(f));if(!b){if(f[1]>=40)return this.reporter.error("Second objid identifier OOB");f.splice(0,2,40*f[0]+f[1])}let y=0;for(let x=0;x<f.length;x++){let _=f[x];for(y++;_>=128;_>>=7)y++}const g=o.alloc(y);let w=g.length-1;for(let x=f.length-1;x>=0;x--){let _=f[x];for(g[w--]=127&_;(_>>=7)>0;)g[w--]=128|127&_}return this._createEncoderBuffer(g)},u.prototype._encodeTime=function(f,m){let b;const y=new Date(f);return m==="gentime"?b=[h(y.getUTCFullYear()),h(y.getUTCMonth()+1),h(y.getUTCDate()),h(y.getUTCHours()),h(y.getUTCMinutes()),h(y.getUTCSeconds()),"Z"].join(""):m==="utctime"?b=[h(y.getUTCFullYear()%100),h(y.getUTCMonth()+1),h(y.getUTCDate()),h(y.getUTCHours()),h(y.getUTCMinutes()),h(y.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+m+" time is not supported yet"),this._encodeStr(b,"octstr")},u.prototype._encodeNull=function(){return this._createEncoderBuffer("")},u.prototype._encodeInt=function(f,m){if(typeof f=="string"){if(!m)return this.reporter.error("String int or enum given, but no values map");if(!m.hasOwnProperty(f))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(f));f=m[f]}if(typeof f!="number"&&!o.isBuffer(f)){const g=f.toArray();!f.sign&&128&g[0]&&g.unshift(0),f=o.from(g)}if(o.isBuffer(f)){let g=f.length;f.length===0&&g++;const w=o.alloc(g);return f.copy(w),f.length===0&&(w[0]=0),this._createEncoderBuffer(w)}if(f<128)return this._createEncoderBuffer(f);if(f<256)return this._createEncoderBuffer([0,f]);let b=1;for(let g=f;g>=256;g>>=8)b++;const y=new Array(b);for(let g=y.length-1;g>=0;g--)y[g]=255&f,f>>=8;return 128&y[0]&&y.unshift(0),this._createEncoderBuffer(o.from(y))},u.prototype._encodeBool=function(f){return this._createEncoderBuffer(f?255:0)},u.prototype._use=function(f,m){return typeof f=="function"&&(f=f(m)),f._getEncoder("der").tree},u.prototype._skipDefault=function(f,m,b){const y=this._baseState;let g;if(y.default===null)return!1;const w=f.join();if(y.defaultBuffer===void 0&&(y.defaultBuffer=this._encodeValue(y.default,m,b).join()),w.length!==y.defaultBuffer.length)return!1;for(g=0;g<w.length;g++)if(w[g]!==y.defaultBuffer[g])return!1;return!0}},{"../base/node":174,"../constants/der":176,inherits:440,"safer-buffer":495}],182:[function(t,s,l){const i=l;i.der=t("./der"),i.pem=t("./pem")},{"./der":181,"./pem":183}],183:[function(t,s,l){const i=t("inherits"),o=t("./der");function d(c){o.call(this,c),this.enc="pem"}i(d,o),s.exports=d,d.prototype.encode=function(c,a){const u=o.prototype.encode.call(this,c).toString("base64"),h=["-----BEGIN "+a.label+"-----"];for(let f=0;f<u.length;f+=64)h.push(u.slice(f,f+64));return h.push("-----END "+a.label+"-----"),h.join(`
`)}},{"./der":181,inherits:440}],184:[function(t,s,l){(function(i,o){function d(T,P){if(!T)throw new Error(P||"Assertion failed")}function c(T,P){T.super_=P;var A=function(){};A.prototype=P.prototype,T.prototype=new A,T.prototype.constructor=T}function a(T,P,A){if(a.isBN(T))return T;this.negative=0,this.words=null,this.length=0,this.red=null,T!==null&&(P!=="le"&&P!=="be"||(A=P,P=10),this._init(T||0,P||10,A||"be"))}var u;typeof i=="object"?i.exports=a:(void 0).BN=a,a.BN=a,a.wordSize=26;try{u=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:t("buffer").Buffer}catch{}function h(T,P){var A=T.charCodeAt(P);return A>=65&&A<=70?A-55:A>=97&&A<=102?A-87:A-48&15}function f(T,P,A){var N=h(T,A);return A-1>=P&&(N|=h(T,A-1)<<4),N}function m(T,P,A,N){for(var k=0,S=Math.min(T.length,A),E=P;E<S;E++){var O=T.charCodeAt(E)-48;k*=N,k+=O>=49?O-49+10:O>=17?O-17+10:O}return k}a.isBN=function(T){return T instanceof a||T!==null&&typeof T=="object"&&T.constructor.wordSize===a.wordSize&&Array.isArray(T.words)},a.max=function(T,P){return T.cmp(P)>0?T:P},a.min=function(T,P){return T.cmp(P)<0?T:P},a.prototype._init=function(T,P,A){if(typeof T=="number")return this._initNumber(T,P,A);if(typeof T=="object")return this._initArray(T,P,A);P==="hex"&&(P=16),d(P===(0|P)&&P>=2&&P<=36);var N=0;(T=T.toString().replace(/\s+/g,""))[0]==="-"&&(N++,this.negative=1),N<T.length&&(P===16?this._parseHex(T,N,A):(this._parseBase(T,P,N),A==="le"&&this._initArray(this.toArray(),P,A)))},a.prototype._initNumber=function(T,P,A){T<0&&(this.negative=1,T=-T),T<67108864?(this.words=[67108863&T],this.length=1):T<4503599627370496?(this.words=[67108863&T,T/67108864&67108863],this.length=2):(d(T<9007199254740992),this.words=[67108863&T,T/67108864&67108863,1],this.length=3),A==="le"&&this._initArray(this.toArray(),P,A)},a.prototype._initArray=function(T,P,A){if(d(typeof T.length=="number"),T.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(T.length/3),this.words=new Array(this.length);for(var N=0;N<this.length;N++)this.words[N]=0;var k,S,E=0;if(A==="be")for(N=T.length-1,k=0;N>=0;N-=3)S=T[N]|T[N-1]<<8|T[N-2]<<16,this.words[k]|=S<<E&67108863,this.words[k+1]=S>>>26-E&67108863,(E+=24)>=26&&(E-=26,k++);else if(A==="le")for(N=0,k=0;N<T.length;N+=3)S=T[N]|T[N+1]<<8|T[N+2]<<16,this.words[k]|=S<<E&67108863,this.words[k+1]=S>>>26-E&67108863,(E+=24)>=26&&(E-=26,k++);return this.strip()},a.prototype._parseHex=function(T,P,A){this.length=Math.ceil((T.length-P)/6),this.words=new Array(this.length);for(var N=0;N<this.length;N++)this.words[N]=0;var k,S=0,E=0;if(A==="be")for(N=T.length-1;N>=P;N-=2)k=f(T,P,N)<<S,this.words[E]|=67108863&k,S>=18?(S-=18,E+=1,this.words[E]|=k>>>26):S+=8;else for(N=(T.length-P)%2==0?P+1:P;N<T.length;N+=2)k=f(T,P,N)<<S,this.words[E]|=67108863&k,S>=18?(S-=18,E+=1,this.words[E]|=k>>>26):S+=8;this.strip()},a.prototype._parseBase=function(T,P,A){this.words=[0],this.length=1;for(var N=0,k=1;k<=67108863;k*=P)N++;N--,k=k/P|0;for(var S=T.length-A,E=S%N,O=Math.min(S,S-E)+A,L=0,z=A;z<O;z+=N)L=m(T,z,z+N,P),this.imuln(k),this.words[0]+L<67108864?this.words[0]+=L:this._iaddn(L);if(E!==0){var G=1;for(L=m(T,z,T.length,P),z=0;z<E;z++)G*=P;this.imuln(G),this.words[0]+L<67108864?this.words[0]+=L:this._iaddn(L)}this.strip()},a.prototype.copy=function(T){T.words=new Array(this.length);for(var P=0;P<this.length;P++)T.words[P]=this.words[P];T.length=this.length,T.negative=this.negative,T.red=this.red},a.prototype.clone=function(){var T=new a(null);return this.copy(T),T},a.prototype._expand=function(T){for(;this.length<T;)this.words[this.length++]=0;return this},a.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},a.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},a.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var b=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],y=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],g=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function w(T,P,A){A.negative=P.negative^T.negative;var N=T.length+P.length|0;A.length=N,N=N-1|0;var k=0|T.words[0],S=0|P.words[0],E=k*S,O=67108863&E,L=E/67108864|0;A.words[0]=O;for(var z=1;z<N;z++){for(var G=L>>>26,Z=67108863&L,ee=Math.min(z,P.length-1),W=Math.max(0,z-T.length+1);W<=ee;W++){var J=z-W|0;G+=(E=(k=0|T.words[J])*(S=0|P.words[W])+Z)/67108864|0,Z=67108863&E}A.words[z]=0|Z,L=0|G}return L!==0?A.words[z]=0|L:A.length--,A.strip()}a.prototype.toString=function(T,P){var A;if(P=0|P||1,(T=T||10)===16||T==="hex"){A="";for(var N=0,k=0,S=0;S<this.length;S++){var E=this.words[S],O=(16777215&(E<<N|k)).toString(16);A=(k=E>>>24-N&16777215)!==0||S!==this.length-1?b[6-O.length]+O+A:O+A,(N+=2)>=26&&(N-=26,S--)}for(k!==0&&(A=k.toString(16)+A);A.length%P!=0;)A="0"+A;return this.negative!==0&&(A="-"+A),A}if(T===(0|T)&&T>=2&&T<=36){var L=y[T],z=g[T];A="";var G=this.clone();for(G.negative=0;!G.isZero();){var Z=G.modn(z).toString(T);A=(G=G.idivn(z)).isZero()?Z+A:b[L-Z.length]+Z+A}for(this.isZero()&&(A="0"+A);A.length%P!=0;)A="0"+A;return this.negative!==0&&(A="-"+A),A}d(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var T=this.words[0];return this.length===2?T+=67108864*this.words[1]:this.length===3&&this.words[2]===1?T+=4503599627370496+67108864*this.words[1]:this.length>2&&d(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-T:T},a.prototype.toJSON=function(){return this.toString(16)},a.prototype.toBuffer=function(T,P){return d(u!==void 0),this.toArrayLike(u,T,P)},a.prototype.toArray=function(T,P){return this.toArrayLike(Array,T,P)},a.prototype.toArrayLike=function(T,P,A){var N=this.byteLength(),k=A||Math.max(1,N);d(N<=k,"byte array longer than desired length"),d(k>0,"Requested array length <= 0"),this.strip();var S,E,O=P==="le",L=new T(k),z=this.clone();if(O){for(E=0;!z.isZero();E++)S=z.andln(255),z.iushrn(8),L[E]=S;for(;E<k;E++)L[E]=0}else{for(E=0;E<k-N;E++)L[E]=0;for(E=0;!z.isZero();E++)S=z.andln(255),z.iushrn(8),L[k-E-1]=S}return L},Math.clz32?a.prototype._countBits=function(T){return 32-Math.clz32(T)}:a.prototype._countBits=function(T){var P=T,A=0;return P>=4096&&(A+=13,P>>>=13),P>=64&&(A+=7,P>>>=7),P>=8&&(A+=4,P>>>=4),P>=2&&(A+=2,P>>>=2),A+P},a.prototype._zeroBits=function(T){if(T===0)return 26;var P=T,A=0;return(8191&P)==0&&(A+=13,P>>>=13),(127&P)==0&&(A+=7,P>>>=7),(15&P)==0&&(A+=4,P>>>=4),(3&P)==0&&(A+=2,P>>>=2),(1&P)==0&&A++,A},a.prototype.bitLength=function(){var T=this.words[this.length-1],P=this._countBits(T);return 26*(this.length-1)+P},a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var T=0,P=0;P<this.length;P++){var A=this._zeroBits(this.words[P]);if(T+=A,A!==26)break}return T},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(T){return this.negative!==0?this.abs().inotn(T).iaddn(1):this.clone()},a.prototype.fromTwos=function(T){return this.testn(T-1)?this.notn(T).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return this.negative!==0},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(T){for(;this.length<T.length;)this.words[this.length++]=0;for(var P=0;P<T.length;P++)this.words[P]=this.words[P]|T.words[P];return this.strip()},a.prototype.ior=function(T){return d((this.negative|T.negative)==0),this.iuor(T)},a.prototype.or=function(T){return this.length>T.length?this.clone().ior(T):T.clone().ior(this)},a.prototype.uor=function(T){return this.length>T.length?this.clone().iuor(T):T.clone().iuor(this)},a.prototype.iuand=function(T){var P;P=this.length>T.length?T:this;for(var A=0;A<P.length;A++)this.words[A]=this.words[A]&T.words[A];return this.length=P.length,this.strip()},a.prototype.iand=function(T){return d((this.negative|T.negative)==0),this.iuand(T)},a.prototype.and=function(T){return this.length>T.length?this.clone().iand(T):T.clone().iand(this)},a.prototype.uand=function(T){return this.length>T.length?this.clone().iuand(T):T.clone().iuand(this)},a.prototype.iuxor=function(T){var P,A;this.length>T.length?(P=this,A=T):(P=T,A=this);for(var N=0;N<A.length;N++)this.words[N]=P.words[N]^A.words[N];if(this!==P)for(;N<P.length;N++)this.words[N]=P.words[N];return this.length=P.length,this.strip()},a.prototype.ixor=function(T){return d((this.negative|T.negative)==0),this.iuxor(T)},a.prototype.xor=function(T){return this.length>T.length?this.clone().ixor(T):T.clone().ixor(this)},a.prototype.uxor=function(T){return this.length>T.length?this.clone().iuxor(T):T.clone().iuxor(this)},a.prototype.inotn=function(T){d(typeof T=="number"&&T>=0);var P=0|Math.ceil(T/26),A=T%26;this._expand(P),A>0&&P--;for(var N=0;N<P;N++)this.words[N]=67108863&~this.words[N];return A>0&&(this.words[N]=~this.words[N]&67108863>>26-A),this.strip()},a.prototype.notn=function(T){return this.clone().inotn(T)},a.prototype.setn=function(T,P){d(typeof T=="number"&&T>=0);var A=T/26|0,N=T%26;return this._expand(A+1),this.words[A]=P?this.words[A]|1<<N:this.words[A]&~(1<<N),this.strip()},a.prototype.iadd=function(T){var P,A,N;if(this.negative!==0&&T.negative===0)return this.negative=0,P=this.isub(T),this.negative^=1,this._normSign();if(this.negative===0&&T.negative!==0)return T.negative=0,P=this.isub(T),T.negative=1,P._normSign();this.length>T.length?(A=this,N=T):(A=T,N=this);for(var k=0,S=0;S<N.length;S++)P=(0|A.words[S])+(0|N.words[S])+k,this.words[S]=67108863&P,k=P>>>26;for(;k!==0&&S<A.length;S++)P=(0|A.words[S])+k,this.words[S]=67108863&P,k=P>>>26;if(this.length=A.length,k!==0)this.words[this.length]=k,this.length++;else if(A!==this)for(;S<A.length;S++)this.words[S]=A.words[S];return this},a.prototype.add=function(T){var P;return T.negative!==0&&this.negative===0?(T.negative=0,P=this.sub(T),T.negative^=1,P):T.negative===0&&this.negative!==0?(this.negative=0,P=T.sub(this),this.negative=1,P):this.length>T.length?this.clone().iadd(T):T.clone().iadd(this)},a.prototype.isub=function(T){if(T.negative!==0){T.negative=0;var P=this.iadd(T);return T.negative=1,P._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(T),this.negative=1,this._normSign();var A,N,k=this.cmp(T);if(k===0)return this.negative=0,this.length=1,this.words[0]=0,this;k>0?(A=this,N=T):(A=T,N=this);for(var S=0,E=0;E<N.length;E++)S=(P=(0|A.words[E])-(0|N.words[E])+S)>>26,this.words[E]=67108863&P;for(;S!==0&&E<A.length;E++)S=(P=(0|A.words[E])+S)>>26,this.words[E]=67108863&P;if(S===0&&E<A.length&&A!==this)for(;E<A.length;E++)this.words[E]=A.words[E];return this.length=Math.max(this.length,E),A!==this&&(this.negative=1),this.strip()},a.prototype.sub=function(T){return this.clone().isub(T)};var x=function(T,P,A){var N,k,S,E=T.words,O=P.words,L=A.words,z=0,G=0|E[0],Z=8191&G,ee=G>>>13,W=0|E[1],J=8191&W,$=W>>>13,q=0|E[2],Y=8191&q,se=q>>>13,oe=0|E[3],ae=8191&oe,ce=oe>>>13,we=0|E[4],fe=8191&we,re=we>>>13,ge=0|E[5],le=8191&ge,te=ge>>>13,ie=0|E[6],ue=8191&ie,_e=ie>>>13,je=0|E[7],ke=8191&je,Le=je>>>13,Ue=0|E[8],Qe=8191&Ue,Be=Ue>>>13,ct=0|E[9],ft=8191&ct,_t=ct>>>13,ut=0|O[0],lt=8191&ut,ht=ut>>>13,jt=0|O[1],pt=8191&jt,Qt=jt>>>13,sr=0|O[2],Ot=8191&sr,Xt=sr>>>13,kt=0|O[3],Rt=8191&kt,$t=kt>>>13,Ht=0|O[4],xt=8191&Ht,Mt=Ht>>>13,be=0|O[5],xe=8191&be,Ee=be>>>13,qe=0|O[6],Oe=8191&qe,he=qe>>>13,ye=0|O[7],Te=8191&ye,Fe=ye>>>13,nt=0|O[8],me=8191&nt,He=nt>>>13,at=0|O[9],Ze=8191&at,Ce=at>>>13;A.negative=T.negative^P.negative,A.length=19;var vt=(z+(N=Math.imul(Z,lt))|0)+((8191&(k=(k=Math.imul(Z,ht))+Math.imul(ee,lt)|0))<<13)|0;z=((S=Math.imul(ee,ht))+(k>>>13)|0)+(vt>>>26)|0,vt&=67108863,N=Math.imul(J,lt),k=(k=Math.imul(J,ht))+Math.imul($,lt)|0,S=Math.imul($,ht);var mt=(z+(N=N+Math.imul(Z,pt)|0)|0)+((8191&(k=(k=k+Math.imul(Z,Qt)|0)+Math.imul(ee,pt)|0))<<13)|0;z=((S=S+Math.imul(ee,Qt)|0)+(k>>>13)|0)+(mt>>>26)|0,mt&=67108863,N=Math.imul(Y,lt),k=(k=Math.imul(Y,ht))+Math.imul(se,lt)|0,S=Math.imul(se,ht),N=N+Math.imul(J,pt)|0,k=(k=k+Math.imul(J,Qt)|0)+Math.imul($,pt)|0,S=S+Math.imul($,Qt)|0;var Ut=(z+(N=N+Math.imul(Z,Ot)|0)|0)+((8191&(k=(k=k+Math.imul(Z,Xt)|0)+Math.imul(ee,Ot)|0))<<13)|0;z=((S=S+Math.imul(ee,Xt)|0)+(k>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,N=Math.imul(ae,lt),k=(k=Math.imul(ae,ht))+Math.imul(ce,lt)|0,S=Math.imul(ce,ht),N=N+Math.imul(Y,pt)|0,k=(k=k+Math.imul(Y,Qt)|0)+Math.imul(se,pt)|0,S=S+Math.imul(se,Qt)|0,N=N+Math.imul(J,Ot)|0,k=(k=k+Math.imul(J,Xt)|0)+Math.imul($,Ot)|0,S=S+Math.imul($,Xt)|0;var dr=(z+(N=N+Math.imul(Z,Rt)|0)|0)+((8191&(k=(k=k+Math.imul(Z,$t)|0)+Math.imul(ee,Rt)|0))<<13)|0;z=((S=S+Math.imul(ee,$t)|0)+(k>>>13)|0)+(dr>>>26)|0,dr&=67108863,N=Math.imul(fe,lt),k=(k=Math.imul(fe,ht))+Math.imul(re,lt)|0,S=Math.imul(re,ht),N=N+Math.imul(ae,pt)|0,k=(k=k+Math.imul(ae,Qt)|0)+Math.imul(ce,pt)|0,S=S+Math.imul(ce,Qt)|0,N=N+Math.imul(Y,Ot)|0,k=(k=k+Math.imul(Y,Xt)|0)+Math.imul(se,Ot)|0,S=S+Math.imul(se,Xt)|0,N=N+Math.imul(J,Rt)|0,k=(k=k+Math.imul(J,$t)|0)+Math.imul($,Rt)|0,S=S+Math.imul($,$t)|0;var jr=(z+(N=N+Math.imul(Z,xt)|0)|0)+((8191&(k=(k=k+Math.imul(Z,Mt)|0)+Math.imul(ee,xt)|0))<<13)|0;z=((S=S+Math.imul(ee,Mt)|0)+(k>>>13)|0)+(jr>>>26)|0,jr&=67108863,N=Math.imul(le,lt),k=(k=Math.imul(le,ht))+Math.imul(te,lt)|0,S=Math.imul(te,ht),N=N+Math.imul(fe,pt)|0,k=(k=k+Math.imul(fe,Qt)|0)+Math.imul(re,pt)|0,S=S+Math.imul(re,Qt)|0,N=N+Math.imul(ae,Ot)|0,k=(k=k+Math.imul(ae,Xt)|0)+Math.imul(ce,Ot)|0,S=S+Math.imul(ce,Xt)|0,N=N+Math.imul(Y,Rt)|0,k=(k=k+Math.imul(Y,$t)|0)+Math.imul(se,Rt)|0,S=S+Math.imul(se,$t)|0,N=N+Math.imul(J,xt)|0,k=(k=k+Math.imul(J,Mt)|0)+Math.imul($,xt)|0,S=S+Math.imul($,Mt)|0;var ar=(z+(N=N+Math.imul(Z,xe)|0)|0)+((8191&(k=(k=k+Math.imul(Z,Ee)|0)+Math.imul(ee,xe)|0))<<13)|0;z=((S=S+Math.imul(ee,Ee)|0)+(k>>>13)|0)+(ar>>>26)|0,ar&=67108863,N=Math.imul(ue,lt),k=(k=Math.imul(ue,ht))+Math.imul(_e,lt)|0,S=Math.imul(_e,ht),N=N+Math.imul(le,pt)|0,k=(k=k+Math.imul(le,Qt)|0)+Math.imul(te,pt)|0,S=S+Math.imul(te,Qt)|0,N=N+Math.imul(fe,Ot)|0,k=(k=k+Math.imul(fe,Xt)|0)+Math.imul(re,Ot)|0,S=S+Math.imul(re,Xt)|0,N=N+Math.imul(ae,Rt)|0,k=(k=k+Math.imul(ae,$t)|0)+Math.imul(ce,Rt)|0,S=S+Math.imul(ce,$t)|0,N=N+Math.imul(Y,xt)|0,k=(k=k+Math.imul(Y,Mt)|0)+Math.imul(se,xt)|0,S=S+Math.imul(se,Mt)|0,N=N+Math.imul(J,xe)|0,k=(k=k+Math.imul(J,Ee)|0)+Math.imul($,xe)|0,S=S+Math.imul($,Ee)|0;var ur=(z+(N=N+Math.imul(Z,Oe)|0)|0)+((8191&(k=(k=k+Math.imul(Z,he)|0)+Math.imul(ee,Oe)|0))<<13)|0;z=((S=S+Math.imul(ee,he)|0)+(k>>>13)|0)+(ur>>>26)|0,ur&=67108863,N=Math.imul(ke,lt),k=(k=Math.imul(ke,ht))+Math.imul(Le,lt)|0,S=Math.imul(Le,ht),N=N+Math.imul(ue,pt)|0,k=(k=k+Math.imul(ue,Qt)|0)+Math.imul(_e,pt)|0,S=S+Math.imul(_e,Qt)|0,N=N+Math.imul(le,Ot)|0,k=(k=k+Math.imul(le,Xt)|0)+Math.imul(te,Ot)|0,S=S+Math.imul(te,Xt)|0,N=N+Math.imul(fe,Rt)|0,k=(k=k+Math.imul(fe,$t)|0)+Math.imul(re,Rt)|0,S=S+Math.imul(re,$t)|0,N=N+Math.imul(ae,xt)|0,k=(k=k+Math.imul(ae,Mt)|0)+Math.imul(ce,xt)|0,S=S+Math.imul(ce,Mt)|0,N=N+Math.imul(Y,xe)|0,k=(k=k+Math.imul(Y,Ee)|0)+Math.imul(se,xe)|0,S=S+Math.imul(se,Ee)|0,N=N+Math.imul(J,Oe)|0,k=(k=k+Math.imul(J,he)|0)+Math.imul($,Oe)|0,S=S+Math.imul($,he)|0;var pe=(z+(N=N+Math.imul(Z,Te)|0)|0)+((8191&(k=(k=k+Math.imul(Z,Fe)|0)+Math.imul(ee,Te)|0))<<13)|0;z=((S=S+Math.imul(ee,Fe)|0)+(k>>>13)|0)+(pe>>>26)|0,pe&=67108863,N=Math.imul(Qe,lt),k=(k=Math.imul(Qe,ht))+Math.imul(Be,lt)|0,S=Math.imul(Be,ht),N=N+Math.imul(ke,pt)|0,k=(k=k+Math.imul(ke,Qt)|0)+Math.imul(Le,pt)|0,S=S+Math.imul(Le,Qt)|0,N=N+Math.imul(ue,Ot)|0,k=(k=k+Math.imul(ue,Xt)|0)+Math.imul(_e,Ot)|0,S=S+Math.imul(_e,Xt)|0,N=N+Math.imul(le,Rt)|0,k=(k=k+Math.imul(le,$t)|0)+Math.imul(te,Rt)|0,S=S+Math.imul(te,$t)|0,N=N+Math.imul(fe,xt)|0,k=(k=k+Math.imul(fe,Mt)|0)+Math.imul(re,xt)|0,S=S+Math.imul(re,Mt)|0,N=N+Math.imul(ae,xe)|0,k=(k=k+Math.imul(ae,Ee)|0)+Math.imul(ce,xe)|0,S=S+Math.imul(ce,Ee)|0,N=N+Math.imul(Y,Oe)|0,k=(k=k+Math.imul(Y,he)|0)+Math.imul(se,Oe)|0,S=S+Math.imul(se,he)|0,N=N+Math.imul(J,Te)|0,k=(k=k+Math.imul(J,Fe)|0)+Math.imul($,Te)|0,S=S+Math.imul($,Fe)|0;var Ae=(z+(N=N+Math.imul(Z,me)|0)|0)+((8191&(k=(k=k+Math.imul(Z,He)|0)+Math.imul(ee,me)|0))<<13)|0;z=((S=S+Math.imul(ee,He)|0)+(k>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,N=Math.imul(ft,lt),k=(k=Math.imul(ft,ht))+Math.imul(_t,lt)|0,S=Math.imul(_t,ht),N=N+Math.imul(Qe,pt)|0,k=(k=k+Math.imul(Qe,Qt)|0)+Math.imul(Be,pt)|0,S=S+Math.imul(Be,Qt)|0,N=N+Math.imul(ke,Ot)|0,k=(k=k+Math.imul(ke,Xt)|0)+Math.imul(Le,Ot)|0,S=S+Math.imul(Le,Xt)|0,N=N+Math.imul(ue,Rt)|0,k=(k=k+Math.imul(ue,$t)|0)+Math.imul(_e,Rt)|0,S=S+Math.imul(_e,$t)|0,N=N+Math.imul(le,xt)|0,k=(k=k+Math.imul(le,Mt)|0)+Math.imul(te,xt)|0,S=S+Math.imul(te,Mt)|0,N=N+Math.imul(fe,xe)|0,k=(k=k+Math.imul(fe,Ee)|0)+Math.imul(re,xe)|0,S=S+Math.imul(re,Ee)|0,N=N+Math.imul(ae,Oe)|0,k=(k=k+Math.imul(ae,he)|0)+Math.imul(ce,Oe)|0,S=S+Math.imul(ce,he)|0,N=N+Math.imul(Y,Te)|0,k=(k=k+Math.imul(Y,Fe)|0)+Math.imul(se,Te)|0,S=S+Math.imul(se,Fe)|0,N=N+Math.imul(J,me)|0,k=(k=k+Math.imul(J,He)|0)+Math.imul($,me)|0,S=S+Math.imul($,He)|0;var Ge=(z+(N=N+Math.imul(Z,Ze)|0)|0)+((8191&(k=(k=k+Math.imul(Z,Ce)|0)+Math.imul(ee,Ze)|0))<<13)|0;z=((S=S+Math.imul(ee,Ce)|0)+(k>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,N=Math.imul(ft,pt),k=(k=Math.imul(ft,Qt))+Math.imul(_t,pt)|0,S=Math.imul(_t,Qt),N=N+Math.imul(Qe,Ot)|0,k=(k=k+Math.imul(Qe,Xt)|0)+Math.imul(Be,Ot)|0,S=S+Math.imul(Be,Xt)|0,N=N+Math.imul(ke,Rt)|0,k=(k=k+Math.imul(ke,$t)|0)+Math.imul(Le,Rt)|0,S=S+Math.imul(Le,$t)|0,N=N+Math.imul(ue,xt)|0,k=(k=k+Math.imul(ue,Mt)|0)+Math.imul(_e,xt)|0,S=S+Math.imul(_e,Mt)|0,N=N+Math.imul(le,xe)|0,k=(k=k+Math.imul(le,Ee)|0)+Math.imul(te,xe)|0,S=S+Math.imul(te,Ee)|0,N=N+Math.imul(fe,Oe)|0,k=(k=k+Math.imul(fe,he)|0)+Math.imul(re,Oe)|0,S=S+Math.imul(re,he)|0,N=N+Math.imul(ae,Te)|0,k=(k=k+Math.imul(ae,Fe)|0)+Math.imul(ce,Te)|0,S=S+Math.imul(ce,Fe)|0,N=N+Math.imul(Y,me)|0,k=(k=k+Math.imul(Y,He)|0)+Math.imul(se,me)|0,S=S+Math.imul(se,He)|0;var Je=(z+(N=N+Math.imul(J,Ze)|0)|0)+((8191&(k=(k=k+Math.imul(J,Ce)|0)+Math.imul($,Ze)|0))<<13)|0;z=((S=S+Math.imul($,Ce)|0)+(k>>>13)|0)+(Je>>>26)|0,Je&=67108863,N=Math.imul(ft,Ot),k=(k=Math.imul(ft,Xt))+Math.imul(_t,Ot)|0,S=Math.imul(_t,Xt),N=N+Math.imul(Qe,Rt)|0,k=(k=k+Math.imul(Qe,$t)|0)+Math.imul(Be,Rt)|0,S=S+Math.imul(Be,$t)|0,N=N+Math.imul(ke,xt)|0,k=(k=k+Math.imul(ke,Mt)|0)+Math.imul(Le,xt)|0,S=S+Math.imul(Le,Mt)|0,N=N+Math.imul(ue,xe)|0,k=(k=k+Math.imul(ue,Ee)|0)+Math.imul(_e,xe)|0,S=S+Math.imul(_e,Ee)|0,N=N+Math.imul(le,Oe)|0,k=(k=k+Math.imul(le,he)|0)+Math.imul(te,Oe)|0,S=S+Math.imul(te,he)|0,N=N+Math.imul(fe,Te)|0,k=(k=k+Math.imul(fe,Fe)|0)+Math.imul(re,Te)|0,S=S+Math.imul(re,Fe)|0,N=N+Math.imul(ae,me)|0,k=(k=k+Math.imul(ae,He)|0)+Math.imul(ce,me)|0,S=S+Math.imul(ce,He)|0;var Ct=(z+(N=N+Math.imul(Y,Ze)|0)|0)+((8191&(k=(k=k+Math.imul(Y,Ce)|0)+Math.imul(se,Ze)|0))<<13)|0;z=((S=S+Math.imul(se,Ce)|0)+(k>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,N=Math.imul(ft,Rt),k=(k=Math.imul(ft,$t))+Math.imul(_t,Rt)|0,S=Math.imul(_t,$t),N=N+Math.imul(Qe,xt)|0,k=(k=k+Math.imul(Qe,Mt)|0)+Math.imul(Be,xt)|0,S=S+Math.imul(Be,Mt)|0,N=N+Math.imul(ke,xe)|0,k=(k=k+Math.imul(ke,Ee)|0)+Math.imul(Le,xe)|0,S=S+Math.imul(Le,Ee)|0,N=N+Math.imul(ue,Oe)|0,k=(k=k+Math.imul(ue,he)|0)+Math.imul(_e,Oe)|0,S=S+Math.imul(_e,he)|0,N=N+Math.imul(le,Te)|0,k=(k=k+Math.imul(le,Fe)|0)+Math.imul(te,Te)|0,S=S+Math.imul(te,Fe)|0,N=N+Math.imul(fe,me)|0,k=(k=k+Math.imul(fe,He)|0)+Math.imul(re,me)|0,S=S+Math.imul(re,He)|0;var We=(z+(N=N+Math.imul(ae,Ze)|0)|0)+((8191&(k=(k=k+Math.imul(ae,Ce)|0)+Math.imul(ce,Ze)|0))<<13)|0;z=((S=S+Math.imul(ce,Ce)|0)+(k>>>13)|0)+(We>>>26)|0,We&=67108863,N=Math.imul(ft,xt),k=(k=Math.imul(ft,Mt))+Math.imul(_t,xt)|0,S=Math.imul(_t,Mt),N=N+Math.imul(Qe,xe)|0,k=(k=k+Math.imul(Qe,Ee)|0)+Math.imul(Be,xe)|0,S=S+Math.imul(Be,Ee)|0,N=N+Math.imul(ke,Oe)|0,k=(k=k+Math.imul(ke,he)|0)+Math.imul(Le,Oe)|0,S=S+Math.imul(Le,he)|0,N=N+Math.imul(ue,Te)|0,k=(k=k+Math.imul(ue,Fe)|0)+Math.imul(_e,Te)|0,S=S+Math.imul(_e,Fe)|0,N=N+Math.imul(le,me)|0,k=(k=k+Math.imul(le,He)|0)+Math.imul(te,me)|0,S=S+Math.imul(te,He)|0;var ot=(z+(N=N+Math.imul(fe,Ze)|0)|0)+((8191&(k=(k=k+Math.imul(fe,Ce)|0)+Math.imul(re,Ze)|0))<<13)|0;z=((S=S+Math.imul(re,Ce)|0)+(k>>>13)|0)+(ot>>>26)|0,ot&=67108863,N=Math.imul(ft,xe),k=(k=Math.imul(ft,Ee))+Math.imul(_t,xe)|0,S=Math.imul(_t,Ee),N=N+Math.imul(Qe,Oe)|0,k=(k=k+Math.imul(Qe,he)|0)+Math.imul(Be,Oe)|0,S=S+Math.imul(Be,he)|0,N=N+Math.imul(ke,Te)|0,k=(k=k+Math.imul(ke,Fe)|0)+Math.imul(Le,Te)|0,S=S+Math.imul(Le,Fe)|0,N=N+Math.imul(ue,me)|0,k=(k=k+Math.imul(ue,He)|0)+Math.imul(_e,me)|0,S=S+Math.imul(_e,He)|0;var Jt=(z+(N=N+Math.imul(le,Ze)|0)|0)+((8191&(k=(k=k+Math.imul(le,Ce)|0)+Math.imul(te,Ze)|0))<<13)|0;z=((S=S+Math.imul(te,Ce)|0)+(k>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,N=Math.imul(ft,Oe),k=(k=Math.imul(ft,he))+Math.imul(_t,Oe)|0,S=Math.imul(_t,he),N=N+Math.imul(Qe,Te)|0,k=(k=k+Math.imul(Qe,Fe)|0)+Math.imul(Be,Te)|0,S=S+Math.imul(Be,Fe)|0,N=N+Math.imul(ke,me)|0,k=(k=k+Math.imul(ke,He)|0)+Math.imul(Le,me)|0,S=S+Math.imul(Le,He)|0;var Ft=(z+(N=N+Math.imul(ue,Ze)|0)|0)+((8191&(k=(k=k+Math.imul(ue,Ce)|0)+Math.imul(_e,Ze)|0))<<13)|0;z=((S=S+Math.imul(_e,Ce)|0)+(k>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,N=Math.imul(ft,Te),k=(k=Math.imul(ft,Fe))+Math.imul(_t,Te)|0,S=Math.imul(_t,Fe),N=N+Math.imul(Qe,me)|0,k=(k=k+Math.imul(Qe,He)|0)+Math.imul(Be,me)|0,S=S+Math.imul(Be,He)|0;var Tt=(z+(N=N+Math.imul(ke,Ze)|0)|0)+((8191&(k=(k=k+Math.imul(ke,Ce)|0)+Math.imul(Le,Ze)|0))<<13)|0;z=((S=S+Math.imul(Le,Ce)|0)+(k>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,N=Math.imul(ft,me),k=(k=Math.imul(ft,He))+Math.imul(_t,me)|0,S=Math.imul(_t,He);var At=(z+(N=N+Math.imul(Qe,Ze)|0)|0)+((8191&(k=(k=k+Math.imul(Qe,Ce)|0)+Math.imul(Be,Ze)|0))<<13)|0;z=((S=S+Math.imul(Be,Ce)|0)+(k>>>13)|0)+(At>>>26)|0,At&=67108863;var xr=(z+(N=Math.imul(ft,Ze))|0)+((8191&(k=(k=Math.imul(ft,Ce))+Math.imul(_t,Ze)|0))<<13)|0;return z=((S=Math.imul(_t,Ce))+(k>>>13)|0)+(xr>>>26)|0,xr&=67108863,L[0]=vt,L[1]=mt,L[2]=Ut,L[3]=dr,L[4]=jr,L[5]=ar,L[6]=ur,L[7]=pe,L[8]=Ae,L[9]=Ge,L[10]=Je,L[11]=Ct,L[12]=We,L[13]=ot,L[14]=Jt,L[15]=Ft,L[16]=Tt,L[17]=At,L[18]=xr,z!==0&&(L[19]=z,A.length++),A};function _(T,P,A){return new j().mulp(T,P,A)}function j(T,P){this.x=T,this.y=P}Math.imul||(x=w),a.prototype.mulTo=function(T,P){var A=this.length+T.length;return this.length===10&&T.length===10?x(this,T,P):A<63?w(this,T,P):A<1024?function(N,k,S){S.negative=k.negative^N.negative,S.length=N.length+k.length;for(var E=0,O=0,L=0;L<S.length-1;L++){var z=O;O=0;for(var G=67108863&E,Z=Math.min(L,k.length-1),ee=Math.max(0,L-N.length+1);ee<=Z;ee++){var W=L-ee,J=(0|N.words[W])*(0|k.words[ee]),$=67108863&J;G=67108863&($=$+G|0),O+=(z=(z=z+(J/67108864|0)|0)+($>>>26)|0)>>>26,z&=67108863}S.words[L]=G,E=z,z=O}return E!==0?S.words[L]=E:S.length--,S.strip()}(this,T,P):_(this,T,P)},j.prototype.makeRBT=function(T){for(var P=new Array(T),A=a.prototype._countBits(T)-1,N=0;N<T;N++)P[N]=this.revBin(N,A,T);return P},j.prototype.revBin=function(T,P,A){if(T===0||T===A-1)return T;for(var N=0,k=0;k<P;k++)N|=(1&T)<<P-k-1,T>>=1;return N},j.prototype.permute=function(T,P,A,N,k,S){for(var E=0;E<S;E++)N[E]=P[T[E]],k[E]=A[T[E]]},j.prototype.transform=function(T,P,A,N,k,S){this.permute(S,T,P,A,N,k);for(var E=1;E<k;E<<=1)for(var O=E<<1,L=Math.cos(2*Math.PI/O),z=Math.sin(2*Math.PI/O),G=0;G<k;G+=O)for(var Z=L,ee=z,W=0;W<E;W++){var J=A[G+W],$=N[G+W],q=A[G+W+E],Y=N[G+W+E],se=Z*q-ee*Y;Y=Z*Y+ee*q,q=se,A[G+W]=J+q,N[G+W]=$+Y,A[G+W+E]=J-q,N[G+W+E]=$-Y,W!==O&&(se=L*Z-z*ee,ee=L*ee+z*Z,Z=se)}},j.prototype.guessLen13b=function(T,P){var A=1|Math.max(P,T),N=1&A,k=0;for(A=A/2|0;A;A>>>=1)k++;return 1<<k+1+N},j.prototype.conjugate=function(T,P,A){if(!(A<=1))for(var N=0;N<A/2;N++){var k=T[N];T[N]=T[A-N-1],T[A-N-1]=k,k=P[N],P[N]=-P[A-N-1],P[A-N-1]=-k}},j.prototype.normalize13b=function(T,P){for(var A=0,N=0;N<P/2;N++){var k=8192*Math.round(T[2*N+1]/P)+Math.round(T[2*N]/P)+A;T[N]=67108863&k,A=k<67108864?0:k/67108864|0}return T},j.prototype.convert13b=function(T,P,A,N){for(var k=0,S=0;S<P;S++)k+=0|T[S],A[2*S]=8191&k,k>>>=13,A[2*S+1]=8191&k,k>>>=13;for(S=2*P;S<N;++S)A[S]=0;d(k===0),d((-8192&k)==0)},j.prototype.stub=function(T){for(var P=new Array(T),A=0;A<T;A++)P[A]=0;return P},j.prototype.mulp=function(T,P,A){var N=2*this.guessLen13b(T.length,P.length),k=this.makeRBT(N),S=this.stub(N),E=new Array(N),O=new Array(N),L=new Array(N),z=new Array(N),G=new Array(N),Z=new Array(N),ee=A.words;ee.length=N,this.convert13b(T.words,T.length,E,N),this.convert13b(P.words,P.length,z,N),this.transform(E,S,O,L,N,k),this.transform(z,S,G,Z,N,k);for(var W=0;W<N;W++){var J=O[W]*G[W]-L[W]*Z[W];L[W]=O[W]*Z[W]+L[W]*G[W],O[W]=J}return this.conjugate(O,L,N),this.transform(O,L,ee,S,N,k),this.conjugate(ee,S,N),this.normalize13b(ee,N),A.negative=T.negative^P.negative,A.length=T.length+P.length,A.strip()},a.prototype.mul=function(T){var P=new a(null);return P.words=new Array(this.length+T.length),this.mulTo(T,P)},a.prototype.mulf=function(T){var P=new a(null);return P.words=new Array(this.length+T.length),_(this,T,P)},a.prototype.imul=function(T){return this.clone().mulTo(T,this)},a.prototype.imuln=function(T){d(typeof T=="number"),d(T<67108864);for(var P=0,A=0;A<this.length;A++){var N=(0|this.words[A])*T,k=(67108863&N)+(67108863&P);P>>=26,P+=N/67108864|0,P+=k>>>26,this.words[A]=67108863&k}return P!==0&&(this.words[A]=P,this.length++),this},a.prototype.muln=function(T){return this.clone().imuln(T)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(T){var P=function(S){for(var E=new Array(S.bitLength()),O=0;O<E.length;O++){var L=O/26|0,z=O%26;E[O]=(S.words[L]&1<<z)>>>z}return E}(T);if(P.length===0)return new a(1);for(var A=this,N=0;N<P.length&&P[N]===0;N++,A=A.sqr());if(++N<P.length)for(var k=A.sqr();N<P.length;N++,k=k.sqr())P[N]!==0&&(A=A.mul(k));return A},a.prototype.iushln=function(T){d(typeof T=="number"&&T>=0);var P,A=T%26,N=(T-A)/26,k=67108863>>>26-A<<26-A;if(A!==0){var S=0;for(P=0;P<this.length;P++){var E=this.words[P]&k,O=(0|this.words[P])-E<<A;this.words[P]=O|S,S=E>>>26-A}S&&(this.words[P]=S,this.length++)}if(N!==0){for(P=this.length-1;P>=0;P--)this.words[P+N]=this.words[P];for(P=0;P<N;P++)this.words[P]=0;this.length+=N}return this.strip()},a.prototype.ishln=function(T){return d(this.negative===0),this.iushln(T)},a.prototype.iushrn=function(T,P,A){var N;d(typeof T=="number"&&T>=0),N=P?(P-P%26)/26:0;var k=T%26,S=Math.min((T-k)/26,this.length),E=67108863^67108863>>>k<<k,O=A;if(N-=S,N=Math.max(0,N),O){for(var L=0;L<S;L++)O.words[L]=this.words[L];O.length=S}if(S!==0)if(this.length>S)for(this.length-=S,L=0;L<this.length;L++)this.words[L]=this.words[L+S];else this.words[0]=0,this.length=1;var z=0;for(L=this.length-1;L>=0&&(z!==0||L>=N);L--){var G=0|this.words[L];this.words[L]=z<<26-k|G>>>k,z=G&E}return O&&z!==0&&(O.words[O.length++]=z),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},a.prototype.ishrn=function(T,P,A){return d(this.negative===0),this.iushrn(T,P,A)},a.prototype.shln=function(T){return this.clone().ishln(T)},a.prototype.ushln=function(T){return this.clone().iushln(T)},a.prototype.shrn=function(T){return this.clone().ishrn(T)},a.prototype.ushrn=function(T){return this.clone().iushrn(T)},a.prototype.testn=function(T){d(typeof T=="number"&&T>=0);var P=T%26,A=(T-P)/26,N=1<<P;return!(this.length<=A)&&!!(this.words[A]&N)},a.prototype.imaskn=function(T){d(typeof T=="number"&&T>=0);var P=T%26,A=(T-P)/26;if(d(this.negative===0,"imaskn works only with positive numbers"),this.length<=A)return this;if(P!==0&&A++,this.length=Math.min(A,this.length),P!==0){var N=67108863^67108863>>>P<<P;this.words[this.length-1]&=N}return this.strip()},a.prototype.maskn=function(T){return this.clone().imaskn(T)},a.prototype.iaddn=function(T){return d(typeof T=="number"),d(T<67108864),T<0?this.isubn(-T):this.negative!==0?this.length===1&&(0|this.words[0])<T?(this.words[0]=T-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(T),this.negative=1,this):this._iaddn(T)},a.prototype._iaddn=function(T){this.words[0]+=T;for(var P=0;P<this.length&&this.words[P]>=67108864;P++)this.words[P]-=67108864,P===this.length-1?this.words[P+1]=1:this.words[P+1]++;return this.length=Math.max(this.length,P+1),this},a.prototype.isubn=function(T){if(d(typeof T=="number"),d(T<67108864),T<0)return this.iaddn(-T);if(this.negative!==0)return this.negative=0,this.iaddn(T),this.negative=1,this;if(this.words[0]-=T,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var P=0;P<this.length&&this.words[P]<0;P++)this.words[P]+=67108864,this.words[P+1]-=1;return this.strip()},a.prototype.addn=function(T){return this.clone().iaddn(T)},a.prototype.subn=function(T){return this.clone().isubn(T)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(T,P,A){var N,k,S=T.length+A;this._expand(S);var E=0;for(N=0;N<T.length;N++){k=(0|this.words[N+A])+E;var O=(0|T.words[N])*P;E=((k-=67108863&O)>>26)-(O/67108864|0),this.words[N+A]=67108863&k}for(;N<this.length-A;N++)E=(k=(0|this.words[N+A])+E)>>26,this.words[N+A]=67108863&k;if(E===0)return this.strip();for(d(E===-1),E=0,N=0;N<this.length;N++)E=(k=-(0|this.words[N])+E)>>26,this.words[N]=67108863&k;return this.negative=1,this.strip()},a.prototype._wordDiv=function(T,P){var A=(this.length,T.length),N=this.clone(),k=T,S=0|k.words[k.length-1];(A=26-this._countBits(S))!==0&&(k=k.ushln(A),N.iushln(A),S=0|k.words[k.length-1]);var E,O=N.length-k.length;if(P!=="mod"){(E=new a(null)).length=O+1,E.words=new Array(E.length);for(var L=0;L<E.length;L++)E.words[L]=0}var z=N.clone()._ishlnsubmul(k,1,O);z.negative===0&&(N=z,E&&(E.words[O]=1));for(var G=O-1;G>=0;G--){var Z=67108864*(0|N.words[k.length+G])+(0|N.words[k.length+G-1]);for(Z=Math.min(Z/S|0,67108863),N._ishlnsubmul(k,Z,G);N.negative!==0;)Z--,N.negative=0,N._ishlnsubmul(k,1,G),N.isZero()||(N.negative^=1);E&&(E.words[G]=Z)}return E&&E.strip(),N.strip(),P!=="div"&&A!==0&&N.iushrn(A),{div:E||null,mod:N}},a.prototype.divmod=function(T,P,A){return d(!T.isZero()),this.isZero()?{div:new a(0),mod:new a(0)}:this.negative!==0&&T.negative===0?(S=this.neg().divmod(T,P),P!=="mod"&&(N=S.div.neg()),P!=="div"&&(k=S.mod.neg(),A&&k.negative!==0&&k.iadd(T)),{div:N,mod:k}):this.negative===0&&T.negative!==0?(S=this.divmod(T.neg(),P),P!=="mod"&&(N=S.div.neg()),{div:N,mod:S.mod}):(this.negative&T.negative)!=0?(S=this.neg().divmod(T.neg(),P),P!=="div"&&(k=S.mod.neg(),A&&k.negative!==0&&k.isub(T)),{div:S.div,mod:k}):T.length>this.length||this.cmp(T)<0?{div:new a(0),mod:this}:T.length===1?P==="div"?{div:this.divn(T.words[0]),mod:null}:P==="mod"?{div:null,mod:new a(this.modn(T.words[0]))}:{div:this.divn(T.words[0]),mod:new a(this.modn(T.words[0]))}:this._wordDiv(T,P);var N,k,S},a.prototype.div=function(T){return this.divmod(T,"div",!1).div},a.prototype.mod=function(T){return this.divmod(T,"mod",!1).mod},a.prototype.umod=function(T){return this.divmod(T,"mod",!0).mod},a.prototype.divRound=function(T){var P=this.divmod(T);if(P.mod.isZero())return P.div;var A=P.div.negative!==0?P.mod.isub(T):P.mod,N=T.ushrn(1),k=T.andln(1),S=A.cmp(N);return S<0||k===1&&S===0?P.div:P.div.negative!==0?P.div.isubn(1):P.div.iaddn(1)},a.prototype.modn=function(T){d(T<=67108863);for(var P=(1<<26)%T,A=0,N=this.length-1;N>=0;N--)A=(P*A+(0|this.words[N]))%T;return A},a.prototype.idivn=function(T){d(T<=67108863);for(var P=0,A=this.length-1;A>=0;A--){var N=(0|this.words[A])+67108864*P;this.words[A]=N/T|0,P=N%T}return this.strip()},a.prototype.divn=function(T){return this.clone().idivn(T)},a.prototype.egcd=function(T){d(T.negative===0),d(!T.isZero());var P=this,A=T.clone();P=P.negative!==0?P.umod(T):P.clone();for(var N=new a(1),k=new a(0),S=new a(0),E=new a(1),O=0;P.isEven()&&A.isEven();)P.iushrn(1),A.iushrn(1),++O;for(var L=A.clone(),z=P.clone();!P.isZero();){for(var G=0,Z=1;(P.words[0]&Z)==0&&G<26;++G,Z<<=1);if(G>0)for(P.iushrn(G);G-- >0;)(N.isOdd()||k.isOdd())&&(N.iadd(L),k.isub(z)),N.iushrn(1),k.iushrn(1);for(var ee=0,W=1;(A.words[0]&W)==0&&ee<26;++ee,W<<=1);if(ee>0)for(A.iushrn(ee);ee-- >0;)(S.isOdd()||E.isOdd())&&(S.iadd(L),E.isub(z)),S.iushrn(1),E.iushrn(1);P.cmp(A)>=0?(P.isub(A),N.isub(S),k.isub(E)):(A.isub(P),S.isub(N),E.isub(k))}return{a:S,b:E,gcd:A.iushln(O)}},a.prototype._invmp=function(T){d(T.negative===0),d(!T.isZero());var P=this,A=T.clone();P=P.negative!==0?P.umod(T):P.clone();for(var N,k=new a(1),S=new a(0),E=A.clone();P.cmpn(1)>0&&A.cmpn(1)>0;){for(var O=0,L=1;(P.words[0]&L)==0&&O<26;++O,L<<=1);if(O>0)for(P.iushrn(O);O-- >0;)k.isOdd()&&k.iadd(E),k.iushrn(1);for(var z=0,G=1;(A.words[0]&G)==0&&z<26;++z,G<<=1);if(z>0)for(A.iushrn(z);z-- >0;)S.isOdd()&&S.iadd(E),S.iushrn(1);P.cmp(A)>=0?(P.isub(A),k.isub(S)):(A.isub(P),S.isub(k))}return(N=P.cmpn(1)===0?k:S).cmpn(0)<0&&N.iadd(T),N},a.prototype.gcd=function(T){if(this.isZero())return T.abs();if(T.isZero())return this.abs();var P=this.clone(),A=T.clone();P.negative=0,A.negative=0;for(var N=0;P.isEven()&&A.isEven();N++)P.iushrn(1),A.iushrn(1);for(;;){for(;P.isEven();)P.iushrn(1);for(;A.isEven();)A.iushrn(1);var k=P.cmp(A);if(k<0){var S=P;P=A,A=S}else if(k===0||A.cmpn(1)===0)break;P.isub(A)}return A.iushln(N)},a.prototype.invm=function(T){return this.egcd(T).a.umod(T)},a.prototype.isEven=function(){return(1&this.words[0])==0},a.prototype.isOdd=function(){return(1&this.words[0])==1},a.prototype.andln=function(T){return this.words[0]&T},a.prototype.bincn=function(T){d(typeof T=="number");var P=T%26,A=(T-P)/26,N=1<<P;if(this.length<=A)return this._expand(A+1),this.words[A]|=N,this;for(var k=N,S=A;k!==0&&S<this.length;S++){var E=0|this.words[S];k=(E+=k)>>>26,E&=67108863,this.words[S]=E}return k!==0&&(this.words[S]=k,this.length++),this},a.prototype.isZero=function(){return this.length===1&&this.words[0]===0},a.prototype.cmpn=function(T){var P,A=T<0;if(this.negative!==0&&!A)return-1;if(this.negative===0&&A)return 1;if(this.strip(),this.length>1)P=1;else{A&&(T=-T),d(T<=67108863,"Number is too big");var N=0|this.words[0];P=N===T?0:N<T?-1:1}return this.negative!==0?0|-P:P},a.prototype.cmp=function(T){if(this.negative!==0&&T.negative===0)return-1;if(this.negative===0&&T.negative!==0)return 1;var P=this.ucmp(T);return this.negative!==0?0|-P:P},a.prototype.ucmp=function(T){if(this.length>T.length)return 1;if(this.length<T.length)return-1;for(var P=0,A=this.length-1;A>=0;A--){var N=0|this.words[A],k=0|T.words[A];if(N!==k){N<k?P=-1:N>k&&(P=1);break}}return P},a.prototype.gtn=function(T){return this.cmpn(T)===1},a.prototype.gt=function(T){return this.cmp(T)===1},a.prototype.gten=function(T){return this.cmpn(T)>=0},a.prototype.gte=function(T){return this.cmp(T)>=0},a.prototype.ltn=function(T){return this.cmpn(T)===-1},a.prototype.lt=function(T){return this.cmp(T)===-1},a.prototype.lten=function(T){return this.cmpn(T)<=0},a.prototype.lte=function(T){return this.cmp(T)<=0},a.prototype.eqn=function(T){return this.cmpn(T)===0},a.prototype.eq=function(T){return this.cmp(T)===0},a.red=function(T){return new Q(T)},a.prototype.toRed=function(T){return d(!this.red,"Already a number in reduction context"),d(this.negative===0,"red works only with positives"),T.convertTo(this)._forceRed(T)},a.prototype.fromRed=function(){return d(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(T){return this.red=T,this},a.prototype.forceRed=function(T){return d(!this.red,"Already a number in reduction context"),this._forceRed(T)},a.prototype.redAdd=function(T){return d(this.red,"redAdd works only with red numbers"),this.red.add(this,T)},a.prototype.redIAdd=function(T){return d(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,T)},a.prototype.redSub=function(T){return d(this.red,"redSub works only with red numbers"),this.red.sub(this,T)},a.prototype.redISub=function(T){return d(this.red,"redISub works only with red numbers"),this.red.isub(this,T)},a.prototype.redShl=function(T){return d(this.red,"redShl works only with red numbers"),this.red.shl(this,T)},a.prototype.redMul=function(T){return d(this.red,"redMul works only with red numbers"),this.red._verify2(this,T),this.red.mul(this,T)},a.prototype.redIMul=function(T){return d(this.red,"redMul works only with red numbers"),this.red._verify2(this,T),this.red.imul(this,T)},a.prototype.redSqr=function(){return d(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return d(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return d(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return d(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return d(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(T){return d(this.red&&!T.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,T)};var R={k256:null,p224:null,p192:null,p25519:null};function M(T,P){this.name=T,this.p=new a(P,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function I(){M.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function F(){M.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function B(){M.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function U(){M.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function Q(T){if(typeof T=="string"){var P=a._prime(T);this.m=P.p,this.prime=P}else d(T.gtn(1),"modulus must be greater than 1"),this.m=T,this.prime=null}function K(T){Q.call(this,T),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}M.prototype._tmp=function(){var T=new a(null);return T.words=new Array(Math.ceil(this.n/13)),T},M.prototype.ireduce=function(T){var P,A=T;do this.split(A,this.tmp),P=(A=(A=this.imulK(A)).iadd(this.tmp)).bitLength();while(P>this.n);var N=P<this.n?-1:A.ucmp(this.p);return N===0?(A.words[0]=0,A.length=1):N>0?A.isub(this.p):A.strip!==void 0?A.strip():A._strip(),A},M.prototype.split=function(T,P){T.iushrn(this.n,0,P)},M.prototype.imulK=function(T){return T.imul(this.k)},c(I,M),I.prototype.split=function(T,P){for(var A=Math.min(T.length,9),N=0;N<A;N++)P.words[N]=T.words[N];if(P.length=A,T.length<=9)return T.words[0]=0,void(T.length=1);var k=T.words[9];for(P.words[P.length++]=4194303&k,N=10;N<T.length;N++){var S=0|T.words[N];T.words[N-10]=(4194303&S)<<4|k>>>22,k=S}k>>>=22,T.words[N-10]=k,k===0&&T.length>10?T.length-=10:T.length-=9},I.prototype.imulK=function(T){T.words[T.length]=0,T.words[T.length+1]=0,T.length+=2;for(var P=0,A=0;A<T.length;A++){var N=0|T.words[A];P+=977*N,T.words[A]=67108863&P,P=64*N+(P/67108864|0)}return T.words[T.length-1]===0&&(T.length--,T.words[T.length-1]===0&&T.length--),T},c(F,M),c(B,M),c(U,M),U.prototype.imulK=function(T){for(var P=0,A=0;A<T.length;A++){var N=19*(0|T.words[A])+P,k=67108863&N;N>>>=26,T.words[A]=k,P=N}return P!==0&&(T.words[T.length++]=P),T},a._prime=function(T){if(R[T])return R[T];var P;if(T==="k256")P=new I;else if(T==="p224")P=new F;else if(T==="p192")P=new B;else{if(T!=="p25519")throw new Error("Unknown prime "+T);P=new U}return R[T]=P,P},Q.prototype._verify1=function(T){d(T.negative===0,"red works only with positives"),d(T.red,"red works only with red numbers")},Q.prototype._verify2=function(T,P){d((T.negative|P.negative)==0,"red works only with positives"),d(T.red&&T.red===P.red,"red works only with red numbers")},Q.prototype.imod=function(T){return this.prime?this.prime.ireduce(T)._forceRed(this):T.umod(this.m)._forceRed(this)},Q.prototype.neg=function(T){return T.isZero()?T.clone():this.m.sub(T)._forceRed(this)},Q.prototype.add=function(T,P){this._verify2(T,P);var A=T.add(P);return A.cmp(this.m)>=0&&A.isub(this.m),A._forceRed(this)},Q.prototype.iadd=function(T,P){this._verify2(T,P);var A=T.iadd(P);return A.cmp(this.m)>=0&&A.isub(this.m),A},Q.prototype.sub=function(T,P){this._verify2(T,P);var A=T.sub(P);return A.cmpn(0)<0&&A.iadd(this.m),A._forceRed(this)},Q.prototype.isub=function(T,P){this._verify2(T,P);var A=T.isub(P);return A.cmpn(0)<0&&A.iadd(this.m),A},Q.prototype.shl=function(T,P){return this._verify1(T),this.imod(T.ushln(P))},Q.prototype.imul=function(T,P){return this._verify2(T,P),this.imod(T.imul(P))},Q.prototype.mul=function(T,P){return this._verify2(T,P),this.imod(T.mul(P))},Q.prototype.isqr=function(T){return this.imul(T,T.clone())},Q.prototype.sqr=function(T){return this.mul(T,T)},Q.prototype.sqrt=function(T){if(T.isZero())return T.clone();var P=this.m.andln(3);if(d(P%2==1),P===3){var A=this.m.add(new a(1)).iushrn(2);return this.pow(T,A)}for(var N=this.m.subn(1),k=0;!N.isZero()&&N.andln(1)===0;)k++,N.iushrn(1);d(!N.isZero());var S=new a(1).toRed(this),E=S.redNeg(),O=this.m.subn(1).iushrn(1),L=this.m.bitLength();for(L=new a(2*L*L).toRed(this);this.pow(L,O).cmp(E)!==0;)L.redIAdd(E);for(var z=this.pow(L,N),G=this.pow(T,N.addn(1).iushrn(1)),Z=this.pow(T,N),ee=k;Z.cmp(S)!==0;){for(var W=Z,J=0;W.cmp(S)!==0;J++)W=W.redSqr();d(J<ee);var $=this.pow(z,new a(1).iushln(ee-J-1));G=G.redMul($),z=$.redSqr(),Z=Z.redMul(z),ee=J}return G},Q.prototype.invm=function(T){var P=T._invmp(this.m);return P.negative!==0?(P.negative=0,this.imod(P).redNeg()):this.imod(P)},Q.prototype.pow=function(T,P){if(P.isZero())return new a(1).toRed(this);if(P.cmpn(1)===0)return T.clone();var A=new Array(16);A[0]=new a(1).toRed(this),A[1]=T;for(var N=2;N<A.length;N++)A[N]=this.mul(A[N-1],T);var k=A[0],S=0,E=0,O=P.bitLength()%26;for(O===0&&(O=26),N=P.length-1;N>=0;N--){for(var L=P.words[N],z=O-1;z>=0;z--){var G=L>>z&1;k!==A[0]&&(k=this.sqr(k)),G!==0||S!==0?(S<<=1,S|=G,(++E===4||N===0&&z===0)&&(k=this.mul(k,A[S]),E=0,S=0)):E=0}O=26}return k},Q.prototype.convertTo=function(T){var P=T.umod(this.m);return P===T?P.clone():P},Q.prototype.convertFrom=function(T){var P=T.clone();return P.red=null,P},a.mont=function(T){return new K(T)},c(K,Q),K.prototype.convertTo=function(T){return this.imod(T.ushln(this.shift))},K.prototype.convertFrom=function(T){var P=this.imod(T.mul(this.rinv));return P.red=null,P},K.prototype.imul=function(T,P){if(T.isZero()||P.isZero())return T.words[0]=0,T.length=1,T;var A=T.imul(P),N=A.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),k=A.isub(N).iushrn(this.shift),S=k;return k.cmp(this.m)>=0?S=k.isub(this.m):k.cmpn(0)<0&&(S=k.iadd(this.m)),S._forceRed(this)},K.prototype.mul=function(T,P){if(T.isZero()||P.isZero())return new a(0)._forceRed(this);var A=T.mul(P),N=A.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),k=A.isub(N).iushrn(this.shift),S=k;return k.cmp(this.m)>=0?S=k.isub(this.m):k.cmpn(0)<0&&(S=k.iadd(this.m)),S._forceRed(this)},K.prototype.invm=function(T){return this.imod(T._invmp(this.m).mul(this.r2))._forceRed(this)}})(s===void 0||s)},{buffer:188}],185:[function(t,s,l){l.byteLength=function(m){var b=h(m),y=b[0],g=b[1];return 3*(y+g)/4-g},l.toByteArray=function(m){var b,y,g=h(m),w=g[0],x=g[1],_=new d(function(M,I,F){return 3*(I+F)/4-F}(0,w,x)),j=0,R=x>0?w-4:w;for(y=0;y<R;y+=4)b=o[m.charCodeAt(y)]<<18|o[m.charCodeAt(y+1)]<<12|o[m.charCodeAt(y+2)]<<6|o[m.charCodeAt(y+3)],_[j++]=b>>16&255,_[j++]=b>>8&255,_[j++]=255&b;return x===2&&(b=o[m.charCodeAt(y)]<<2|o[m.charCodeAt(y+1)]>>4,_[j++]=255&b),x===1&&(b=o[m.charCodeAt(y)]<<10|o[m.charCodeAt(y+1)]<<4|o[m.charCodeAt(y+2)]>>2,_[j++]=b>>8&255,_[j++]=255&b),_},l.fromByteArray=function(m){for(var b,y=m.length,g=y%3,w=[],x=0,_=y-g;x<_;x+=16383)w.push(f(m,x,x+16383>_?_:x+16383));return g===1?(b=m[y-1],w.push(i[b>>2]+i[b<<4&63]+"==")):g===2&&(b=(m[y-2]<<8)+m[y-1],w.push(i[b>>10]+i[b>>4&63]+i[b<<2&63]+"=")),w.join("")};for(var i=[],o=[],d=typeof Uint8Array<"u"?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=c.length;a<u;++a)i[a]=c[a],o[c.charCodeAt(a)]=a;function h(m){var b=m.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var y=m.indexOf("=");return y===-1&&(y=b),[y,y===b?0:4-y%4]}function f(m,b,y){for(var g,w,x=[],_=b;_<y;_+=3)g=(m[_]<<16&16711680)+(m[_+1]<<8&65280)+(255&m[_+2]),x.push(i[(w=g)>>18&63]+i[w>>12&63]+i[w>>6&63]+i[63&w]);return x.join("")}o[45]=62,o[95]=63},{}],186:[function(t,s,l){(function(i,o){function d(A,N){if(!A)throw new Error(N||"Assertion failed")}function c(A,N){A.super_=N;var k=function(){};k.prototype=N.prototype,A.prototype=new k,A.prototype.constructor=A}function a(A,N,k){if(a.isBN(A))return A;this.negative=0,this.words=null,this.length=0,this.red=null,A!==null&&(N!=="le"&&N!=="be"||(k=N,N=10),this._init(A||0,N||10,k||"be"))}var u;typeof i=="object"?i.exports=a:(void 0).BN=a,a.BN=a,a.wordSize=26;try{u=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:t("buffer").Buffer}catch{}function h(A,N){var k=A.charCodeAt(N);return k>=48&&k<=57?k-48:k>=65&&k<=70?k-55:k>=97&&k<=102?k-87:void d(!1,"Invalid character in "+A)}function f(A,N,k){var S=h(A,k);return k-1>=N&&(S|=h(A,k-1)<<4),S}function m(A,N,k,S){for(var E=0,O=0,L=Math.min(A.length,k),z=N;z<L;z++){var G=A.charCodeAt(z)-48;E*=S,O=G>=49?G-49+10:G>=17?G-17+10:G,d(G>=0&&O<S,"Invalid character"),E+=O}return E}function b(A,N){A.words=N.words,A.length=N.length,A.negative=N.negative,A.red=N.red}if(a.isBN=function(A){return A instanceof a||A!==null&&typeof A=="object"&&A.constructor.wordSize===a.wordSize&&Array.isArray(A.words)},a.max=function(A,N){return A.cmp(N)>0?A:N},a.min=function(A,N){return A.cmp(N)<0?A:N},a.prototype._init=function(A,N,k){if(typeof A=="number")return this._initNumber(A,N,k);if(typeof A=="object")return this._initArray(A,N,k);N==="hex"&&(N=16),d(N===(0|N)&&N>=2&&N<=36);var S=0;(A=A.toString().replace(/\s+/g,""))[0]==="-"&&(S++,this.negative=1),S<A.length&&(N===16?this._parseHex(A,S,k):(this._parseBase(A,N,S),k==="le"&&this._initArray(this.toArray(),N,k)))},a.prototype._initNumber=function(A,N,k){A<0&&(this.negative=1,A=-A),A<67108864?(this.words=[67108863&A],this.length=1):A<4503599627370496?(this.words=[67108863&A,A/67108864&67108863],this.length=2):(d(A<9007199254740992),this.words=[67108863&A,A/67108864&67108863,1],this.length=3),k==="le"&&this._initArray(this.toArray(),N,k)},a.prototype._initArray=function(A,N,k){if(d(typeof A.length=="number"),A.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(A.length/3),this.words=new Array(this.length);for(var S=0;S<this.length;S++)this.words[S]=0;var E,O,L=0;if(k==="be")for(S=A.length-1,E=0;S>=0;S-=3)O=A[S]|A[S-1]<<8|A[S-2]<<16,this.words[E]|=O<<L&67108863,this.words[E+1]=O>>>26-L&67108863,(L+=24)>=26&&(L-=26,E++);else if(k==="le")for(S=0,E=0;S<A.length;S+=3)O=A[S]|A[S+1]<<8|A[S+2]<<16,this.words[E]|=O<<L&67108863,this.words[E+1]=O>>>26-L&67108863,(L+=24)>=26&&(L-=26,E++);return this._strip()},a.prototype._parseHex=function(A,N,k){this.length=Math.ceil((A.length-N)/6),this.words=new Array(this.length);for(var S=0;S<this.length;S++)this.words[S]=0;var E,O=0,L=0;if(k==="be")for(S=A.length-1;S>=N;S-=2)E=f(A,N,S)<<O,this.words[L]|=67108863&E,O>=18?(O-=18,L+=1,this.words[L]|=E>>>26):O+=8;else for(S=(A.length-N)%2==0?N+1:N;S<A.length;S+=2)E=f(A,N,S)<<O,this.words[L]|=67108863&E,O>=18?(O-=18,L+=1,this.words[L]|=E>>>26):O+=8;this._strip()},a.prototype._parseBase=function(A,N,k){this.words=[0],this.length=1;for(var S=0,E=1;E<=67108863;E*=N)S++;S--,E=E/N|0;for(var O=A.length-k,L=O%S,z=Math.min(O,O-L)+k,G=0,Z=k;Z<z;Z+=S)G=m(A,Z,Z+S,N),this.imuln(E),this.words[0]+G<67108864?this.words[0]+=G:this._iaddn(G);if(L!==0){var ee=1;for(G=m(A,Z,A.length,N),Z=0;Z<L;Z++)ee*=N;this.imuln(ee),this.words[0]+G<67108864?this.words[0]+=G:this._iaddn(G)}this._strip()},a.prototype.copy=function(A){A.words=new Array(this.length);for(var N=0;N<this.length;N++)A.words[N]=this.words[N];A.length=this.length,A.negative=this.negative,A.red=this.red},a.prototype._move=function(A){b(A,this)},a.prototype.clone=function(){var A=new a(null);return this.copy(A),A},a.prototype._expand=function(A){for(;this.length<A;)this.words[this.length++]=0;return this},a.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},a.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{a.prototype[Symbol.for("nodejs.util.inspect.custom")]=y}catch{a.prototype.inspect=y}else a.prototype.inspect=y;function y(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var g=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],w=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],x=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(A,N){var k;if(N=0|N||1,(A=A||10)===16||A==="hex"){k="";for(var S=0,E=0,O=0;O<this.length;O++){var L=this.words[O],z=(16777215&(L<<S|E)).toString(16);E=L>>>24-S&16777215,(S+=2)>=26&&(S-=26,O--),k=E!==0||O!==this.length-1?g[6-z.length]+z+k:z+k}for(E!==0&&(k=E.toString(16)+k);k.length%N!=0;)k="0"+k;return this.negative!==0&&(k="-"+k),k}if(A===(0|A)&&A>=2&&A<=36){var G=w[A],Z=x[A];k="";var ee=this.clone();for(ee.negative=0;!ee.isZero();){var W=ee.modrn(Z).toString(A);k=(ee=ee.idivn(Z)).isZero()?W+k:g[G-W.length]+W+k}for(this.isZero()&&(k="0"+k);k.length%N!=0;)k="0"+k;return this.negative!==0&&(k="-"+k),k}d(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var A=this.words[0];return this.length===2?A+=67108864*this.words[1]:this.length===3&&this.words[2]===1?A+=4503599627370496+67108864*this.words[1]:this.length>2&&d(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-A:A},a.prototype.toJSON=function(){return this.toString(16,2)},u&&(a.prototype.toBuffer=function(A,N){return this.toArrayLike(u,A,N)}),a.prototype.toArray=function(A,N){return this.toArrayLike(Array,A,N)};function _(A,N,k){k.negative=N.negative^A.negative;var S=A.length+N.length|0;k.length=S,S=S-1|0;var E=0|A.words[0],O=0|N.words[0],L=E*O,z=67108863&L,G=L/67108864|0;k.words[0]=z;for(var Z=1;Z<S;Z++){for(var ee=G>>>26,W=67108863&G,J=Math.min(Z,N.length-1),$=Math.max(0,Z-A.length+1);$<=J;$++){var q=Z-$|0;ee+=(L=(E=0|A.words[q])*(O=0|N.words[$])+W)/67108864|0,W=67108863&L}k.words[Z]=0|W,G=0|ee}return G!==0?k.words[Z]=0|G:k.length--,k._strip()}a.prototype.toArrayLike=function(A,N,k){this._strip();var S=this.byteLength(),E=k||Math.max(1,S);d(S<=E,"byte array longer than desired length"),d(E>0,"Requested array length <= 0");var O=function(L,z){return L.allocUnsafe?L.allocUnsafe(z):new L(z)}(A,E);return this["_toArrayLike"+(N==="le"?"LE":"BE")](O,S),O},a.prototype._toArrayLikeLE=function(A,N){for(var k=0,S=0,E=0,O=0;E<this.length;E++){var L=this.words[E]<<O|S;A[k++]=255&L,k<A.length&&(A[k++]=L>>8&255),k<A.length&&(A[k++]=L>>16&255),O===6?(k<A.length&&(A[k++]=L>>24&255),S=0,O=0):(S=L>>>24,O+=2)}if(k<A.length)for(A[k++]=S;k<A.length;)A[k++]=0},a.prototype._toArrayLikeBE=function(A,N){for(var k=A.length-1,S=0,E=0,O=0;E<this.length;E++){var L=this.words[E]<<O|S;A[k--]=255&L,k>=0&&(A[k--]=L>>8&255),k>=0&&(A[k--]=L>>16&255),O===6?(k>=0&&(A[k--]=L>>24&255),S=0,O=0):(S=L>>>24,O+=2)}if(k>=0)for(A[k--]=S;k>=0;)A[k--]=0},Math.clz32?a.prototype._countBits=function(A){return 32-Math.clz32(A)}:a.prototype._countBits=function(A){var N=A,k=0;return N>=4096&&(k+=13,N>>>=13),N>=64&&(k+=7,N>>>=7),N>=8&&(k+=4,N>>>=4),N>=2&&(k+=2,N>>>=2),k+N},a.prototype._zeroBits=function(A){if(A===0)return 26;var N=A,k=0;return(8191&N)==0&&(k+=13,N>>>=13),(127&N)==0&&(k+=7,N>>>=7),(15&N)==0&&(k+=4,N>>>=4),(3&N)==0&&(k+=2,N>>>=2),(1&N)==0&&k++,k},a.prototype.bitLength=function(){var A=this.words[this.length-1],N=this._countBits(A);return 26*(this.length-1)+N},a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var A=0,N=0;N<this.length;N++){var k=this._zeroBits(this.words[N]);if(A+=k,k!==26)break}return A},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(A){return this.negative!==0?this.abs().inotn(A).iaddn(1):this.clone()},a.prototype.fromTwos=function(A){return this.testn(A-1)?this.notn(A).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return this.negative!==0},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(A){for(;this.length<A.length;)this.words[this.length++]=0;for(var N=0;N<A.length;N++)this.words[N]=this.words[N]|A.words[N];return this._strip()},a.prototype.ior=function(A){return d((this.negative|A.negative)==0),this.iuor(A)},a.prototype.or=function(A){return this.length>A.length?this.clone().ior(A):A.clone().ior(this)},a.prototype.uor=function(A){return this.length>A.length?this.clone().iuor(A):A.clone().iuor(this)},a.prototype.iuand=function(A){var N;N=this.length>A.length?A:this;for(var k=0;k<N.length;k++)this.words[k]=this.words[k]&A.words[k];return this.length=N.length,this._strip()},a.prototype.iand=function(A){return d((this.negative|A.negative)==0),this.iuand(A)},a.prototype.and=function(A){return this.length>A.length?this.clone().iand(A):A.clone().iand(this)},a.prototype.uand=function(A){return this.length>A.length?this.clone().iuand(A):A.clone().iuand(this)},a.prototype.iuxor=function(A){var N,k;this.length>A.length?(N=this,k=A):(N=A,k=this);for(var S=0;S<k.length;S++)this.words[S]=N.words[S]^k.words[S];if(this!==N)for(;S<N.length;S++)this.words[S]=N.words[S];return this.length=N.length,this._strip()},a.prototype.ixor=function(A){return d((this.negative|A.negative)==0),this.iuxor(A)},a.prototype.xor=function(A){return this.length>A.length?this.clone().ixor(A):A.clone().ixor(this)},a.prototype.uxor=function(A){return this.length>A.length?this.clone().iuxor(A):A.clone().iuxor(this)},a.prototype.inotn=function(A){d(typeof A=="number"&&A>=0);var N=0|Math.ceil(A/26),k=A%26;this._expand(N),k>0&&N--;for(var S=0;S<N;S++)this.words[S]=67108863&~this.words[S];return k>0&&(this.words[S]=~this.words[S]&67108863>>26-k),this._strip()},a.prototype.notn=function(A){return this.clone().inotn(A)},a.prototype.setn=function(A,N){d(typeof A=="number"&&A>=0);var k=A/26|0,S=A%26;return this._expand(k+1),this.words[k]=N?this.words[k]|1<<S:this.words[k]&~(1<<S),this._strip()},a.prototype.iadd=function(A){var N,k,S;if(this.negative!==0&&A.negative===0)return this.negative=0,N=this.isub(A),this.negative^=1,this._normSign();if(this.negative===0&&A.negative!==0)return A.negative=0,N=this.isub(A),A.negative=1,N._normSign();this.length>A.length?(k=this,S=A):(k=A,S=this);for(var E=0,O=0;O<S.length;O++)N=(0|k.words[O])+(0|S.words[O])+E,this.words[O]=67108863&N,E=N>>>26;for(;E!==0&&O<k.length;O++)N=(0|k.words[O])+E,this.words[O]=67108863&N,E=N>>>26;if(this.length=k.length,E!==0)this.words[this.length]=E,this.length++;else if(k!==this)for(;O<k.length;O++)this.words[O]=k.words[O];return this},a.prototype.add=function(A){var N;return A.negative!==0&&this.negative===0?(A.negative=0,N=this.sub(A),A.negative^=1,N):A.negative===0&&this.negative!==0?(this.negative=0,N=A.sub(this),this.negative=1,N):this.length>A.length?this.clone().iadd(A):A.clone().iadd(this)},a.prototype.isub=function(A){if(A.negative!==0){A.negative=0;var N=this.iadd(A);return A.negative=1,N._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(A),this.negative=1,this._normSign();var k,S,E=this.cmp(A);if(E===0)return this.negative=0,this.length=1,this.words[0]=0,this;E>0?(k=this,S=A):(k=A,S=this);for(var O=0,L=0;L<S.length;L++)O=(N=(0|k.words[L])-(0|S.words[L])+O)>>26,this.words[L]=67108863&N;for(;O!==0&&L<k.length;L++)O=(N=(0|k.words[L])+O)>>26,this.words[L]=67108863&N;if(O===0&&L<k.length&&k!==this)for(;L<k.length;L++)this.words[L]=k.words[L];return this.length=Math.max(this.length,L),k!==this&&(this.negative=1),this._strip()},a.prototype.sub=function(A){return this.clone().isub(A)};var j=function(A,N,k){var S,E,O,L=A.words,z=N.words,G=k.words,Z=0,ee=0|L[0],W=8191&ee,J=ee>>>13,$=0|L[1],q=8191&$,Y=$>>>13,se=0|L[2],oe=8191&se,ae=se>>>13,ce=0|L[3],we=8191&ce,fe=ce>>>13,re=0|L[4],ge=8191&re,le=re>>>13,te=0|L[5],ie=8191&te,ue=te>>>13,_e=0|L[6],je=8191&_e,ke=_e>>>13,Le=0|L[7],Ue=8191&Le,Qe=Le>>>13,Be=0|L[8],ct=8191&Be,ft=Be>>>13,_t=0|L[9],ut=8191&_t,lt=_t>>>13,ht=0|z[0],jt=8191&ht,pt=ht>>>13,Qt=0|z[1],sr=8191&Qt,Ot=Qt>>>13,Xt=0|z[2],kt=8191&Xt,Rt=Xt>>>13,$t=0|z[3],Ht=8191&$t,xt=$t>>>13,Mt=0|z[4],be=8191&Mt,xe=Mt>>>13,Ee=0|z[5],qe=8191&Ee,Oe=Ee>>>13,he=0|z[6],ye=8191&he,Te=he>>>13,Fe=0|z[7],nt=8191&Fe,me=Fe>>>13,He=0|z[8],at=8191&He,Ze=He>>>13,Ce=0|z[9],vt=8191&Ce,mt=Ce>>>13;k.negative=A.negative^N.negative,k.length=19;var Ut=(Z+(S=Math.imul(W,jt))|0)+((8191&(E=(E=Math.imul(W,pt))+Math.imul(J,jt)|0))<<13)|0;Z=((O=Math.imul(J,pt))+(E>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,S=Math.imul(q,jt),E=(E=Math.imul(q,pt))+Math.imul(Y,jt)|0,O=Math.imul(Y,pt);var dr=(Z+(S=S+Math.imul(W,sr)|0)|0)+((8191&(E=(E=E+Math.imul(W,Ot)|0)+Math.imul(J,sr)|0))<<13)|0;Z=((O=O+Math.imul(J,Ot)|0)+(E>>>13)|0)+(dr>>>26)|0,dr&=67108863,S=Math.imul(oe,jt),E=(E=Math.imul(oe,pt))+Math.imul(ae,jt)|0,O=Math.imul(ae,pt),S=S+Math.imul(q,sr)|0,E=(E=E+Math.imul(q,Ot)|0)+Math.imul(Y,sr)|0,O=O+Math.imul(Y,Ot)|0;var jr=(Z+(S=S+Math.imul(W,kt)|0)|0)+((8191&(E=(E=E+Math.imul(W,Rt)|0)+Math.imul(J,kt)|0))<<13)|0;Z=((O=O+Math.imul(J,Rt)|0)+(E>>>13)|0)+(jr>>>26)|0,jr&=67108863,S=Math.imul(we,jt),E=(E=Math.imul(we,pt))+Math.imul(fe,jt)|0,O=Math.imul(fe,pt),S=S+Math.imul(oe,sr)|0,E=(E=E+Math.imul(oe,Ot)|0)+Math.imul(ae,sr)|0,O=O+Math.imul(ae,Ot)|0,S=S+Math.imul(q,kt)|0,E=(E=E+Math.imul(q,Rt)|0)+Math.imul(Y,kt)|0,O=O+Math.imul(Y,Rt)|0;var ar=(Z+(S=S+Math.imul(W,Ht)|0)|0)+((8191&(E=(E=E+Math.imul(W,xt)|0)+Math.imul(J,Ht)|0))<<13)|0;Z=((O=O+Math.imul(J,xt)|0)+(E>>>13)|0)+(ar>>>26)|0,ar&=67108863,S=Math.imul(ge,jt),E=(E=Math.imul(ge,pt))+Math.imul(le,jt)|0,O=Math.imul(le,pt),S=S+Math.imul(we,sr)|0,E=(E=E+Math.imul(we,Ot)|0)+Math.imul(fe,sr)|0,O=O+Math.imul(fe,Ot)|0,S=S+Math.imul(oe,kt)|0,E=(E=E+Math.imul(oe,Rt)|0)+Math.imul(ae,kt)|0,O=O+Math.imul(ae,Rt)|0,S=S+Math.imul(q,Ht)|0,E=(E=E+Math.imul(q,xt)|0)+Math.imul(Y,Ht)|0,O=O+Math.imul(Y,xt)|0;var ur=(Z+(S=S+Math.imul(W,be)|0)|0)+((8191&(E=(E=E+Math.imul(W,xe)|0)+Math.imul(J,be)|0))<<13)|0;Z=((O=O+Math.imul(J,xe)|0)+(E>>>13)|0)+(ur>>>26)|0,ur&=67108863,S=Math.imul(ie,jt),E=(E=Math.imul(ie,pt))+Math.imul(ue,jt)|0,O=Math.imul(ue,pt),S=S+Math.imul(ge,sr)|0,E=(E=E+Math.imul(ge,Ot)|0)+Math.imul(le,sr)|0,O=O+Math.imul(le,Ot)|0,S=S+Math.imul(we,kt)|0,E=(E=E+Math.imul(we,Rt)|0)+Math.imul(fe,kt)|0,O=O+Math.imul(fe,Rt)|0,S=S+Math.imul(oe,Ht)|0,E=(E=E+Math.imul(oe,xt)|0)+Math.imul(ae,Ht)|0,O=O+Math.imul(ae,xt)|0,S=S+Math.imul(q,be)|0,E=(E=E+Math.imul(q,xe)|0)+Math.imul(Y,be)|0,O=O+Math.imul(Y,xe)|0;var pe=(Z+(S=S+Math.imul(W,qe)|0)|0)+((8191&(E=(E=E+Math.imul(W,Oe)|0)+Math.imul(J,qe)|0))<<13)|0;Z=((O=O+Math.imul(J,Oe)|0)+(E>>>13)|0)+(pe>>>26)|0,pe&=67108863,S=Math.imul(je,jt),E=(E=Math.imul(je,pt))+Math.imul(ke,jt)|0,O=Math.imul(ke,pt),S=S+Math.imul(ie,sr)|0,E=(E=E+Math.imul(ie,Ot)|0)+Math.imul(ue,sr)|0,O=O+Math.imul(ue,Ot)|0,S=S+Math.imul(ge,kt)|0,E=(E=E+Math.imul(ge,Rt)|0)+Math.imul(le,kt)|0,O=O+Math.imul(le,Rt)|0,S=S+Math.imul(we,Ht)|0,E=(E=E+Math.imul(we,xt)|0)+Math.imul(fe,Ht)|0,O=O+Math.imul(fe,xt)|0,S=S+Math.imul(oe,be)|0,E=(E=E+Math.imul(oe,xe)|0)+Math.imul(ae,be)|0,O=O+Math.imul(ae,xe)|0,S=S+Math.imul(q,qe)|0,E=(E=E+Math.imul(q,Oe)|0)+Math.imul(Y,qe)|0,O=O+Math.imul(Y,Oe)|0;var Ae=(Z+(S=S+Math.imul(W,ye)|0)|0)+((8191&(E=(E=E+Math.imul(W,Te)|0)+Math.imul(J,ye)|0))<<13)|0;Z=((O=O+Math.imul(J,Te)|0)+(E>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,S=Math.imul(Ue,jt),E=(E=Math.imul(Ue,pt))+Math.imul(Qe,jt)|0,O=Math.imul(Qe,pt),S=S+Math.imul(je,sr)|0,E=(E=E+Math.imul(je,Ot)|0)+Math.imul(ke,sr)|0,O=O+Math.imul(ke,Ot)|0,S=S+Math.imul(ie,kt)|0,E=(E=E+Math.imul(ie,Rt)|0)+Math.imul(ue,kt)|0,O=O+Math.imul(ue,Rt)|0,S=S+Math.imul(ge,Ht)|0,E=(E=E+Math.imul(ge,xt)|0)+Math.imul(le,Ht)|0,O=O+Math.imul(le,xt)|0,S=S+Math.imul(we,be)|0,E=(E=E+Math.imul(we,xe)|0)+Math.imul(fe,be)|0,O=O+Math.imul(fe,xe)|0,S=S+Math.imul(oe,qe)|0,E=(E=E+Math.imul(oe,Oe)|0)+Math.imul(ae,qe)|0,O=O+Math.imul(ae,Oe)|0,S=S+Math.imul(q,ye)|0,E=(E=E+Math.imul(q,Te)|0)+Math.imul(Y,ye)|0,O=O+Math.imul(Y,Te)|0;var Ge=(Z+(S=S+Math.imul(W,nt)|0)|0)+((8191&(E=(E=E+Math.imul(W,me)|0)+Math.imul(J,nt)|0))<<13)|0;Z=((O=O+Math.imul(J,me)|0)+(E>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,S=Math.imul(ct,jt),E=(E=Math.imul(ct,pt))+Math.imul(ft,jt)|0,O=Math.imul(ft,pt),S=S+Math.imul(Ue,sr)|0,E=(E=E+Math.imul(Ue,Ot)|0)+Math.imul(Qe,sr)|0,O=O+Math.imul(Qe,Ot)|0,S=S+Math.imul(je,kt)|0,E=(E=E+Math.imul(je,Rt)|0)+Math.imul(ke,kt)|0,O=O+Math.imul(ke,Rt)|0,S=S+Math.imul(ie,Ht)|0,E=(E=E+Math.imul(ie,xt)|0)+Math.imul(ue,Ht)|0,O=O+Math.imul(ue,xt)|0,S=S+Math.imul(ge,be)|0,E=(E=E+Math.imul(ge,xe)|0)+Math.imul(le,be)|0,O=O+Math.imul(le,xe)|0,S=S+Math.imul(we,qe)|0,E=(E=E+Math.imul(we,Oe)|0)+Math.imul(fe,qe)|0,O=O+Math.imul(fe,Oe)|0,S=S+Math.imul(oe,ye)|0,E=(E=E+Math.imul(oe,Te)|0)+Math.imul(ae,ye)|0,O=O+Math.imul(ae,Te)|0,S=S+Math.imul(q,nt)|0,E=(E=E+Math.imul(q,me)|0)+Math.imul(Y,nt)|0,O=O+Math.imul(Y,me)|0;var Je=(Z+(S=S+Math.imul(W,at)|0)|0)+((8191&(E=(E=E+Math.imul(W,Ze)|0)+Math.imul(J,at)|0))<<13)|0;Z=((O=O+Math.imul(J,Ze)|0)+(E>>>13)|0)+(Je>>>26)|0,Je&=67108863,S=Math.imul(ut,jt),E=(E=Math.imul(ut,pt))+Math.imul(lt,jt)|0,O=Math.imul(lt,pt),S=S+Math.imul(ct,sr)|0,E=(E=E+Math.imul(ct,Ot)|0)+Math.imul(ft,sr)|0,O=O+Math.imul(ft,Ot)|0,S=S+Math.imul(Ue,kt)|0,E=(E=E+Math.imul(Ue,Rt)|0)+Math.imul(Qe,kt)|0,O=O+Math.imul(Qe,Rt)|0,S=S+Math.imul(je,Ht)|0,E=(E=E+Math.imul(je,xt)|0)+Math.imul(ke,Ht)|0,O=O+Math.imul(ke,xt)|0,S=S+Math.imul(ie,be)|0,E=(E=E+Math.imul(ie,xe)|0)+Math.imul(ue,be)|0,O=O+Math.imul(ue,xe)|0,S=S+Math.imul(ge,qe)|0,E=(E=E+Math.imul(ge,Oe)|0)+Math.imul(le,qe)|0,O=O+Math.imul(le,Oe)|0,S=S+Math.imul(we,ye)|0,E=(E=E+Math.imul(we,Te)|0)+Math.imul(fe,ye)|0,O=O+Math.imul(fe,Te)|0,S=S+Math.imul(oe,nt)|0,E=(E=E+Math.imul(oe,me)|0)+Math.imul(ae,nt)|0,O=O+Math.imul(ae,me)|0,S=S+Math.imul(q,at)|0,E=(E=E+Math.imul(q,Ze)|0)+Math.imul(Y,at)|0,O=O+Math.imul(Y,Ze)|0;var Ct=(Z+(S=S+Math.imul(W,vt)|0)|0)+((8191&(E=(E=E+Math.imul(W,mt)|0)+Math.imul(J,vt)|0))<<13)|0;Z=((O=O+Math.imul(J,mt)|0)+(E>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,S=Math.imul(ut,sr),E=(E=Math.imul(ut,Ot))+Math.imul(lt,sr)|0,O=Math.imul(lt,Ot),S=S+Math.imul(ct,kt)|0,E=(E=E+Math.imul(ct,Rt)|0)+Math.imul(ft,kt)|0,O=O+Math.imul(ft,Rt)|0,S=S+Math.imul(Ue,Ht)|0,E=(E=E+Math.imul(Ue,xt)|0)+Math.imul(Qe,Ht)|0,O=O+Math.imul(Qe,xt)|0,S=S+Math.imul(je,be)|0,E=(E=E+Math.imul(je,xe)|0)+Math.imul(ke,be)|0,O=O+Math.imul(ke,xe)|0,S=S+Math.imul(ie,qe)|0,E=(E=E+Math.imul(ie,Oe)|0)+Math.imul(ue,qe)|0,O=O+Math.imul(ue,Oe)|0,S=S+Math.imul(ge,ye)|0,E=(E=E+Math.imul(ge,Te)|0)+Math.imul(le,ye)|0,O=O+Math.imul(le,Te)|0,S=S+Math.imul(we,nt)|0,E=(E=E+Math.imul(we,me)|0)+Math.imul(fe,nt)|0,O=O+Math.imul(fe,me)|0,S=S+Math.imul(oe,at)|0,E=(E=E+Math.imul(oe,Ze)|0)+Math.imul(ae,at)|0,O=O+Math.imul(ae,Ze)|0;var We=(Z+(S=S+Math.imul(q,vt)|0)|0)+((8191&(E=(E=E+Math.imul(q,mt)|0)+Math.imul(Y,vt)|0))<<13)|0;Z=((O=O+Math.imul(Y,mt)|0)+(E>>>13)|0)+(We>>>26)|0,We&=67108863,S=Math.imul(ut,kt),E=(E=Math.imul(ut,Rt))+Math.imul(lt,kt)|0,O=Math.imul(lt,Rt),S=S+Math.imul(ct,Ht)|0,E=(E=E+Math.imul(ct,xt)|0)+Math.imul(ft,Ht)|0,O=O+Math.imul(ft,xt)|0,S=S+Math.imul(Ue,be)|0,E=(E=E+Math.imul(Ue,xe)|0)+Math.imul(Qe,be)|0,O=O+Math.imul(Qe,xe)|0,S=S+Math.imul(je,qe)|0,E=(E=E+Math.imul(je,Oe)|0)+Math.imul(ke,qe)|0,O=O+Math.imul(ke,Oe)|0,S=S+Math.imul(ie,ye)|0,E=(E=E+Math.imul(ie,Te)|0)+Math.imul(ue,ye)|0,O=O+Math.imul(ue,Te)|0,S=S+Math.imul(ge,nt)|0,E=(E=E+Math.imul(ge,me)|0)+Math.imul(le,nt)|0,O=O+Math.imul(le,me)|0,S=S+Math.imul(we,at)|0,E=(E=E+Math.imul(we,Ze)|0)+Math.imul(fe,at)|0,O=O+Math.imul(fe,Ze)|0;var ot=(Z+(S=S+Math.imul(oe,vt)|0)|0)+((8191&(E=(E=E+Math.imul(oe,mt)|0)+Math.imul(ae,vt)|0))<<13)|0;Z=((O=O+Math.imul(ae,mt)|0)+(E>>>13)|0)+(ot>>>26)|0,ot&=67108863,S=Math.imul(ut,Ht),E=(E=Math.imul(ut,xt))+Math.imul(lt,Ht)|0,O=Math.imul(lt,xt),S=S+Math.imul(ct,be)|0,E=(E=E+Math.imul(ct,xe)|0)+Math.imul(ft,be)|0,O=O+Math.imul(ft,xe)|0,S=S+Math.imul(Ue,qe)|0,E=(E=E+Math.imul(Ue,Oe)|0)+Math.imul(Qe,qe)|0,O=O+Math.imul(Qe,Oe)|0,S=S+Math.imul(je,ye)|0,E=(E=E+Math.imul(je,Te)|0)+Math.imul(ke,ye)|0,O=O+Math.imul(ke,Te)|0,S=S+Math.imul(ie,nt)|0,E=(E=E+Math.imul(ie,me)|0)+Math.imul(ue,nt)|0,O=O+Math.imul(ue,me)|0,S=S+Math.imul(ge,at)|0,E=(E=E+Math.imul(ge,Ze)|0)+Math.imul(le,at)|0,O=O+Math.imul(le,Ze)|0;var Jt=(Z+(S=S+Math.imul(we,vt)|0)|0)+((8191&(E=(E=E+Math.imul(we,mt)|0)+Math.imul(fe,vt)|0))<<13)|0;Z=((O=O+Math.imul(fe,mt)|0)+(E>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,S=Math.imul(ut,be),E=(E=Math.imul(ut,xe))+Math.imul(lt,be)|0,O=Math.imul(lt,xe),S=S+Math.imul(ct,qe)|0,E=(E=E+Math.imul(ct,Oe)|0)+Math.imul(ft,qe)|0,O=O+Math.imul(ft,Oe)|0,S=S+Math.imul(Ue,ye)|0,E=(E=E+Math.imul(Ue,Te)|0)+Math.imul(Qe,ye)|0,O=O+Math.imul(Qe,Te)|0,S=S+Math.imul(je,nt)|0,E=(E=E+Math.imul(je,me)|0)+Math.imul(ke,nt)|0,O=O+Math.imul(ke,me)|0,S=S+Math.imul(ie,at)|0,E=(E=E+Math.imul(ie,Ze)|0)+Math.imul(ue,at)|0,O=O+Math.imul(ue,Ze)|0;var Ft=(Z+(S=S+Math.imul(ge,vt)|0)|0)+((8191&(E=(E=E+Math.imul(ge,mt)|0)+Math.imul(le,vt)|0))<<13)|0;Z=((O=O+Math.imul(le,mt)|0)+(E>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,S=Math.imul(ut,qe),E=(E=Math.imul(ut,Oe))+Math.imul(lt,qe)|0,O=Math.imul(lt,Oe),S=S+Math.imul(ct,ye)|0,E=(E=E+Math.imul(ct,Te)|0)+Math.imul(ft,ye)|0,O=O+Math.imul(ft,Te)|0,S=S+Math.imul(Ue,nt)|0,E=(E=E+Math.imul(Ue,me)|0)+Math.imul(Qe,nt)|0,O=O+Math.imul(Qe,me)|0,S=S+Math.imul(je,at)|0,E=(E=E+Math.imul(je,Ze)|0)+Math.imul(ke,at)|0,O=O+Math.imul(ke,Ze)|0;var Tt=(Z+(S=S+Math.imul(ie,vt)|0)|0)+((8191&(E=(E=E+Math.imul(ie,mt)|0)+Math.imul(ue,vt)|0))<<13)|0;Z=((O=O+Math.imul(ue,mt)|0)+(E>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,S=Math.imul(ut,ye),E=(E=Math.imul(ut,Te))+Math.imul(lt,ye)|0,O=Math.imul(lt,Te),S=S+Math.imul(ct,nt)|0,E=(E=E+Math.imul(ct,me)|0)+Math.imul(ft,nt)|0,O=O+Math.imul(ft,me)|0,S=S+Math.imul(Ue,at)|0,E=(E=E+Math.imul(Ue,Ze)|0)+Math.imul(Qe,at)|0,O=O+Math.imul(Qe,Ze)|0;var At=(Z+(S=S+Math.imul(je,vt)|0)|0)+((8191&(E=(E=E+Math.imul(je,mt)|0)+Math.imul(ke,vt)|0))<<13)|0;Z=((O=O+Math.imul(ke,mt)|0)+(E>>>13)|0)+(At>>>26)|0,At&=67108863,S=Math.imul(ut,nt),E=(E=Math.imul(ut,me))+Math.imul(lt,nt)|0,O=Math.imul(lt,me),S=S+Math.imul(ct,at)|0,E=(E=E+Math.imul(ct,Ze)|0)+Math.imul(ft,at)|0,O=O+Math.imul(ft,Ze)|0;var xr=(Z+(S=S+Math.imul(Ue,vt)|0)|0)+((8191&(E=(E=E+Math.imul(Ue,mt)|0)+Math.imul(Qe,vt)|0))<<13)|0;Z=((O=O+Math.imul(Qe,mt)|0)+(E>>>13)|0)+(xr>>>26)|0,xr&=67108863,S=Math.imul(ut,at),E=(E=Math.imul(ut,Ze))+Math.imul(lt,at)|0,O=Math.imul(lt,Ze);var vr=(Z+(S=S+Math.imul(ct,vt)|0)|0)+((8191&(E=(E=E+Math.imul(ct,mt)|0)+Math.imul(ft,vt)|0))<<13)|0;Z=((O=O+Math.imul(ft,mt)|0)+(E>>>13)|0)+(vr>>>26)|0,vr&=67108863;var rr=(Z+(S=Math.imul(ut,vt))|0)+((8191&(E=(E=Math.imul(ut,mt))+Math.imul(lt,vt)|0))<<13)|0;return Z=((O=Math.imul(lt,mt))+(E>>>13)|0)+(rr>>>26)|0,rr&=67108863,G[0]=Ut,G[1]=dr,G[2]=jr,G[3]=ar,G[4]=ur,G[5]=pe,G[6]=Ae,G[7]=Ge,G[8]=Je,G[9]=Ct,G[10]=We,G[11]=ot,G[12]=Jt,G[13]=Ft,G[14]=Tt,G[15]=At,G[16]=xr,G[17]=vr,G[18]=rr,Z!==0&&(G[19]=Z,k.length++),k};function R(A,N,k){k.negative=N.negative^A.negative,k.length=A.length+N.length;for(var S=0,E=0,O=0;O<k.length-1;O++){var L=E;E=0;for(var z=67108863&S,G=Math.min(O,N.length-1),Z=Math.max(0,O-A.length+1);Z<=G;Z++){var ee=O-Z,W=(0|A.words[ee])*(0|N.words[Z]),J=67108863&W;z=67108863&(J=J+z|0),E+=(L=(L=L+(W/67108864|0)|0)+(J>>>26)|0)>>>26,L&=67108863}k.words[O]=z,S=L,L=E}return S!==0?k.words[O]=S:k.length--,k._strip()}function M(A,N,k){return R(A,N,k)}Math.imul||(j=_),a.prototype.mulTo=function(A,N){var k=this.length+A.length;return this.length===10&&A.length===10?j(this,A,N):k<63?_(this,A,N):k<1024?R(this,A,N):M(this,A,N)},a.prototype.mul=function(A){var N=new a(null);return N.words=new Array(this.length+A.length),this.mulTo(A,N)},a.prototype.mulf=function(A){var N=new a(null);return N.words=new Array(this.length+A.length),M(this,A,N)},a.prototype.imul=function(A){return this.clone().mulTo(A,this)},a.prototype.imuln=function(A){var N=A<0;N&&(A=-A),d(typeof A=="number"),d(A<67108864);for(var k=0,S=0;S<this.length;S++){var E=(0|this.words[S])*A,O=(67108863&E)+(67108863&k);k>>=26,k+=E/67108864|0,k+=O>>>26,this.words[S]=67108863&O}return k!==0&&(this.words[S]=k,this.length++),N?this.ineg():this},a.prototype.muln=function(A){return this.clone().imuln(A)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(A){var N=function(O){for(var L=new Array(O.bitLength()),z=0;z<L.length;z++){var G=z/26|0,Z=z%26;L[z]=O.words[G]>>>Z&1}return L}(A);if(N.length===0)return new a(1);for(var k=this,S=0;S<N.length&&N[S]===0;S++,k=k.sqr());if(++S<N.length)for(var E=k.sqr();S<N.length;S++,E=E.sqr())N[S]!==0&&(k=k.mul(E));return k},a.prototype.iushln=function(A){d(typeof A=="number"&&A>=0);var N,k=A%26,S=(A-k)/26,E=67108863>>>26-k<<26-k;if(k!==0){var O=0;for(N=0;N<this.length;N++){var L=this.words[N]&E,z=(0|this.words[N])-L<<k;this.words[N]=z|O,O=L>>>26-k}O&&(this.words[N]=O,this.length++)}if(S!==0){for(N=this.length-1;N>=0;N--)this.words[N+S]=this.words[N];for(N=0;N<S;N++)this.words[N]=0;this.length+=S}return this._strip()},a.prototype.ishln=function(A){return d(this.negative===0),this.iushln(A)},a.prototype.iushrn=function(A,N,k){var S;d(typeof A=="number"&&A>=0),S=N?(N-N%26)/26:0;var E=A%26,O=Math.min((A-E)/26,this.length),L=67108863^67108863>>>E<<E,z=k;if(S-=O,S=Math.max(0,S),z){for(var G=0;G<O;G++)z.words[G]=this.words[G];z.length=O}if(O!==0)if(this.length>O)for(this.length-=O,G=0;G<this.length;G++)this.words[G]=this.words[G+O];else this.words[0]=0,this.length=1;var Z=0;for(G=this.length-1;G>=0&&(Z!==0||G>=S);G--){var ee=0|this.words[G];this.words[G]=Z<<26-E|ee>>>E,Z=ee&L}return z&&Z!==0&&(z.words[z.length++]=Z),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},a.prototype.ishrn=function(A,N,k){return d(this.negative===0),this.iushrn(A,N,k)},a.prototype.shln=function(A){return this.clone().ishln(A)},a.prototype.ushln=function(A){return this.clone().iushln(A)},a.prototype.shrn=function(A){return this.clone().ishrn(A)},a.prototype.ushrn=function(A){return this.clone().iushrn(A)},a.prototype.testn=function(A){d(typeof A=="number"&&A>=0);var N=A%26,k=(A-N)/26,S=1<<N;return!(this.length<=k)&&!!(this.words[k]&S)},a.prototype.imaskn=function(A){d(typeof A=="number"&&A>=0);var N=A%26,k=(A-N)/26;if(d(this.negative===0,"imaskn works only with positive numbers"),this.length<=k)return this;if(N!==0&&k++,this.length=Math.min(k,this.length),N!==0){var S=67108863^67108863>>>N<<N;this.words[this.length-1]&=S}return this._strip()},a.prototype.maskn=function(A){return this.clone().imaskn(A)},a.prototype.iaddn=function(A){return d(typeof A=="number"),d(A<67108864),A<0?this.isubn(-A):this.negative!==0?this.length===1&&(0|this.words[0])<=A?(this.words[0]=A-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(A),this.negative=1,this):this._iaddn(A)},a.prototype._iaddn=function(A){this.words[0]+=A;for(var N=0;N<this.length&&this.words[N]>=67108864;N++)this.words[N]-=67108864,N===this.length-1?this.words[N+1]=1:this.words[N+1]++;return this.length=Math.max(this.length,N+1),this},a.prototype.isubn=function(A){if(d(typeof A=="number"),d(A<67108864),A<0)return this.iaddn(-A);if(this.negative!==0)return this.negative=0,this.iaddn(A),this.negative=1,this;if(this.words[0]-=A,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var N=0;N<this.length&&this.words[N]<0;N++)this.words[N]+=67108864,this.words[N+1]-=1;return this._strip()},a.prototype.addn=function(A){return this.clone().iaddn(A)},a.prototype.subn=function(A){return this.clone().isubn(A)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(A,N,k){var S,E,O=A.length+k;this._expand(O);var L=0;for(S=0;S<A.length;S++){E=(0|this.words[S+k])+L;var z=(0|A.words[S])*N;L=((E-=67108863&z)>>26)-(z/67108864|0),this.words[S+k]=67108863&E}for(;S<this.length-k;S++)L=(E=(0|this.words[S+k])+L)>>26,this.words[S+k]=67108863&E;if(L===0)return this._strip();for(d(L===-1),L=0,S=0;S<this.length;S++)L=(E=-(0|this.words[S])+L)>>26,this.words[S]=67108863&E;return this.negative=1,this._strip()},a.prototype._wordDiv=function(A,N){var k=(this.length,A.length),S=this.clone(),E=A,O=0|E.words[E.length-1];(k=26-this._countBits(O))!==0&&(E=E.ushln(k),S.iushln(k),O=0|E.words[E.length-1]);var L,z=S.length-E.length;if(N!=="mod"){(L=new a(null)).length=z+1,L.words=new Array(L.length);for(var G=0;G<L.length;G++)L.words[G]=0}var Z=S.clone()._ishlnsubmul(E,1,z);Z.negative===0&&(S=Z,L&&(L.words[z]=1));for(var ee=z-1;ee>=0;ee--){var W=67108864*(0|S.words[E.length+ee])+(0|S.words[E.length+ee-1]);for(W=Math.min(W/O|0,67108863),S._ishlnsubmul(E,W,ee);S.negative!==0;)W--,S.negative=0,S._ishlnsubmul(E,1,ee),S.isZero()||(S.negative^=1);L&&(L.words[ee]=W)}return L&&L._strip(),S._strip(),N!=="div"&&k!==0&&S.iushrn(k),{div:L||null,mod:S}},a.prototype.divmod=function(A,N,k){return d(!A.isZero()),this.isZero()?{div:new a(0),mod:new a(0)}:this.negative!==0&&A.negative===0?(O=this.neg().divmod(A,N),N!=="mod"&&(S=O.div.neg()),N!=="div"&&(E=O.mod.neg(),k&&E.negative!==0&&E.iadd(A)),{div:S,mod:E}):this.negative===0&&A.negative!==0?(O=this.divmod(A.neg(),N),N!=="mod"&&(S=O.div.neg()),{div:S,mod:O.mod}):(this.negative&A.negative)!=0?(O=this.neg().divmod(A.neg(),N),N!=="div"&&(E=O.mod.neg(),k&&E.negative!==0&&E.isub(A)),{div:O.div,mod:E}):A.length>this.length||this.cmp(A)<0?{div:new a(0),mod:this}:A.length===1?N==="div"?{div:this.divn(A.words[0]),mod:null}:N==="mod"?{div:null,mod:new a(this.modrn(A.words[0]))}:{div:this.divn(A.words[0]),mod:new a(this.modrn(A.words[0]))}:this._wordDiv(A,N);var S,E,O},a.prototype.div=function(A){return this.divmod(A,"div",!1).div},a.prototype.mod=function(A){return this.divmod(A,"mod",!1).mod},a.prototype.umod=function(A){return this.divmod(A,"mod",!0).mod},a.prototype.divRound=function(A){var N=this.divmod(A);if(N.mod.isZero())return N.div;var k=N.div.negative!==0?N.mod.isub(A):N.mod,S=A.ushrn(1),E=A.andln(1),O=k.cmp(S);return O<0||E===1&&O===0?N.div:N.div.negative!==0?N.div.isubn(1):N.div.iaddn(1)},a.prototype.modrn=function(A){var N=A<0;N&&(A=-A),d(A<=67108863);for(var k=(1<<26)%A,S=0,E=this.length-1;E>=0;E--)S=(k*S+(0|this.words[E]))%A;return N?-S:S},a.prototype.modn=function(A){return this.modrn(A)},a.prototype.idivn=function(A){var N=A<0;N&&(A=-A),d(A<=67108863);for(var k=0,S=this.length-1;S>=0;S--){var E=(0|this.words[S])+67108864*k;this.words[S]=E/A|0,k=E%A}return this._strip(),N?this.ineg():this},a.prototype.divn=function(A){return this.clone().idivn(A)},a.prototype.egcd=function(A){d(A.negative===0),d(!A.isZero());var N=this,k=A.clone();N=N.negative!==0?N.umod(A):N.clone();for(var S=new a(1),E=new a(0),O=new a(0),L=new a(1),z=0;N.isEven()&&k.isEven();)N.iushrn(1),k.iushrn(1),++z;for(var G=k.clone(),Z=N.clone();!N.isZero();){for(var ee=0,W=1;(N.words[0]&W)==0&&ee<26;++ee,W<<=1);if(ee>0)for(N.iushrn(ee);ee-- >0;)(S.isOdd()||E.isOdd())&&(S.iadd(G),E.isub(Z)),S.iushrn(1),E.iushrn(1);for(var J=0,$=1;(k.words[0]&$)==0&&J<26;++J,$<<=1);if(J>0)for(k.iushrn(J);J-- >0;)(O.isOdd()||L.isOdd())&&(O.iadd(G),L.isub(Z)),O.iushrn(1),L.iushrn(1);N.cmp(k)>=0?(N.isub(k),S.isub(O),E.isub(L)):(k.isub(N),O.isub(S),L.isub(E))}return{a:O,b:L,gcd:k.iushln(z)}},a.prototype._invmp=function(A){d(A.negative===0),d(!A.isZero());var N=this,k=A.clone();N=N.negative!==0?N.umod(A):N.clone();for(var S,E=new a(1),O=new a(0),L=k.clone();N.cmpn(1)>0&&k.cmpn(1)>0;){for(var z=0,G=1;(N.words[0]&G)==0&&z<26;++z,G<<=1);if(z>0)for(N.iushrn(z);z-- >0;)E.isOdd()&&E.iadd(L),E.iushrn(1);for(var Z=0,ee=1;(k.words[0]&ee)==0&&Z<26;++Z,ee<<=1);if(Z>0)for(k.iushrn(Z);Z-- >0;)O.isOdd()&&O.iadd(L),O.iushrn(1);N.cmp(k)>=0?(N.isub(k),E.isub(O)):(k.isub(N),O.isub(E))}return(S=N.cmpn(1)===0?E:O).cmpn(0)<0&&S.iadd(A),S},a.prototype.gcd=function(A){if(this.isZero())return A.abs();if(A.isZero())return this.abs();var N=this.clone(),k=A.clone();N.negative=0,k.negative=0;for(var S=0;N.isEven()&&k.isEven();S++)N.iushrn(1),k.iushrn(1);for(;;){for(;N.isEven();)N.iushrn(1);for(;k.isEven();)k.iushrn(1);var E=N.cmp(k);if(E<0){var O=N;N=k,k=O}else if(E===0||k.cmpn(1)===0)break;N.isub(k)}return k.iushln(S)},a.prototype.invm=function(A){return this.egcd(A).a.umod(A)},a.prototype.isEven=function(){return(1&this.words[0])==0},a.prototype.isOdd=function(){return(1&this.words[0])==1},a.prototype.andln=function(A){return this.words[0]&A},a.prototype.bincn=function(A){d(typeof A=="number");var N=A%26,k=(A-N)/26,S=1<<N;if(this.length<=k)return this._expand(k+1),this.words[k]|=S,this;for(var E=S,O=k;E!==0&&O<this.length;O++){var L=0|this.words[O];E=(L+=E)>>>26,L&=67108863,this.words[O]=L}return E!==0&&(this.words[O]=E,this.length++),this},a.prototype.isZero=function(){return this.length===1&&this.words[0]===0},a.prototype.cmpn=function(A){var N,k=A<0;if(this.negative!==0&&!k)return-1;if(this.negative===0&&k)return 1;if(this._strip(),this.length>1)N=1;else{k&&(A=-A),d(A<=67108863,"Number is too big");var S=0|this.words[0];N=S===A?0:S<A?-1:1}return this.negative!==0?0|-N:N},a.prototype.cmp=function(A){if(this.negative!==0&&A.negative===0)return-1;if(this.negative===0&&A.negative!==0)return 1;var N=this.ucmp(A);return this.negative!==0?0|-N:N},a.prototype.ucmp=function(A){if(this.length>A.length)return 1;if(this.length<A.length)return-1;for(var N=0,k=this.length-1;k>=0;k--){var S=0|this.words[k],E=0|A.words[k];if(S!==E){S<E?N=-1:S>E&&(N=1);break}}return N},a.prototype.gtn=function(A){return this.cmpn(A)===1},a.prototype.gt=function(A){return this.cmp(A)===1},a.prototype.gten=function(A){return this.cmpn(A)>=0},a.prototype.gte=function(A){return this.cmp(A)>=0},a.prototype.ltn=function(A){return this.cmpn(A)===-1},a.prototype.lt=function(A){return this.cmp(A)===-1},a.prototype.lten=function(A){return this.cmpn(A)<=0},a.prototype.lte=function(A){return this.cmp(A)<=0},a.prototype.eqn=function(A){return this.cmpn(A)===0},a.prototype.eq=function(A){return this.cmp(A)===0},a.red=function(A){return new T(A)},a.prototype.toRed=function(A){return d(!this.red,"Already a number in reduction context"),d(this.negative===0,"red works only with positives"),A.convertTo(this)._forceRed(A)},a.prototype.fromRed=function(){return d(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(A){return this.red=A,this},a.prototype.forceRed=function(A){return d(!this.red,"Already a number in reduction context"),this._forceRed(A)},a.prototype.redAdd=function(A){return d(this.red,"redAdd works only with red numbers"),this.red.add(this,A)},a.prototype.redIAdd=function(A){return d(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,A)},a.prototype.redSub=function(A){return d(this.red,"redSub works only with red numbers"),this.red.sub(this,A)},a.prototype.redISub=function(A){return d(this.red,"redISub works only with red numbers"),this.red.isub(this,A)},a.prototype.redShl=function(A){return d(this.red,"redShl works only with red numbers"),this.red.shl(this,A)},a.prototype.redMul=function(A){return d(this.red,"redMul works only with red numbers"),this.red._verify2(this,A),this.red.mul(this,A)},a.prototype.redIMul=function(A){return d(this.red,"redMul works only with red numbers"),this.red._verify2(this,A),this.red.imul(this,A)},a.prototype.redSqr=function(){return d(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return d(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return d(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return d(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return d(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(A){return d(this.red&&!A.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,A)};var I={k256:null,p224:null,p192:null,p25519:null};function F(A,N){this.name=A,this.p=new a(N,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function B(){F.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function U(){F.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function Q(){F.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function K(){F.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function T(A){if(typeof A=="string"){var N=a._prime(A);this.m=N.p,this.prime=N}else d(A.gtn(1),"modulus must be greater than 1"),this.m=A,this.prime=null}function P(A){T.call(this,A),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}F.prototype._tmp=function(){var A=new a(null);return A.words=new Array(Math.ceil(this.n/13)),A},F.prototype.ireduce=function(A){var N,k=A;do this.split(k,this.tmp),N=(k=(k=this.imulK(k)).iadd(this.tmp)).bitLength();while(N>this.n);var S=N<this.n?-1:k.ucmp(this.p);return S===0?(k.words[0]=0,k.length=1):S>0?k.isub(this.p):k.strip!==void 0?k.strip():k._strip(),k},F.prototype.split=function(A,N){A.iushrn(this.n,0,N)},F.prototype.imulK=function(A){return A.imul(this.k)},c(B,F),B.prototype.split=function(A,N){for(var k=Math.min(A.length,9),S=0;S<k;S++)N.words[S]=A.words[S];if(N.length=k,A.length<=9)return A.words[0]=0,void(A.length=1);var E=A.words[9];for(N.words[N.length++]=4194303&E,S=10;S<A.length;S++){var O=0|A.words[S];A.words[S-10]=(4194303&O)<<4|E>>>22,E=O}E>>>=22,A.words[S-10]=E,E===0&&A.length>10?A.length-=10:A.length-=9},B.prototype.imulK=function(A){A.words[A.length]=0,A.words[A.length+1]=0,A.length+=2;for(var N=0,k=0;k<A.length;k++){var S=0|A.words[k];N+=977*S,A.words[k]=67108863&N,N=64*S+(N/67108864|0)}return A.words[A.length-1]===0&&(A.length--,A.words[A.length-1]===0&&A.length--),A},c(U,F),c(Q,F),c(K,F),K.prototype.imulK=function(A){for(var N=0,k=0;k<A.length;k++){var S=19*(0|A.words[k])+N,E=67108863&S;S>>>=26,A.words[k]=E,N=S}return N!==0&&(A.words[A.length++]=N),A},a._prime=function(A){if(I[A])return I[A];var N;if(A==="k256")N=new B;else if(A==="p224")N=new U;else if(A==="p192")N=new Q;else{if(A!=="p25519")throw new Error("Unknown prime "+A);N=new K}return I[A]=N,N},T.prototype._verify1=function(A){d(A.negative===0,"red works only with positives"),d(A.red,"red works only with red numbers")},T.prototype._verify2=function(A,N){d((A.negative|N.negative)==0,"red works only with positives"),d(A.red&&A.red===N.red,"red works only with red numbers")},T.prototype.imod=function(A){return this.prime?this.prime.ireduce(A)._forceRed(this):(b(A,A.umod(this.m)._forceRed(this)),A)},T.prototype.neg=function(A){return A.isZero()?A.clone():this.m.sub(A)._forceRed(this)},T.prototype.add=function(A,N){this._verify2(A,N);var k=A.add(N);return k.cmp(this.m)>=0&&k.isub(this.m),k._forceRed(this)},T.prototype.iadd=function(A,N){this._verify2(A,N);var k=A.iadd(N);return k.cmp(this.m)>=0&&k.isub(this.m),k},T.prototype.sub=function(A,N){this._verify2(A,N);var k=A.sub(N);return k.cmpn(0)<0&&k.iadd(this.m),k._forceRed(this)},T.prototype.isub=function(A,N){this._verify2(A,N);var k=A.isub(N);return k.cmpn(0)<0&&k.iadd(this.m),k},T.prototype.shl=function(A,N){return this._verify1(A),this.imod(A.ushln(N))},T.prototype.imul=function(A,N){return this._verify2(A,N),this.imod(A.imul(N))},T.prototype.mul=function(A,N){return this._verify2(A,N),this.imod(A.mul(N))},T.prototype.isqr=function(A){return this.imul(A,A.clone())},T.prototype.sqr=function(A){return this.mul(A,A)},T.prototype.sqrt=function(A){if(A.isZero())return A.clone();var N=this.m.andln(3);if(d(N%2==1),N===3){var k=this.m.add(new a(1)).iushrn(2);return this.pow(A,k)}for(var S=this.m.subn(1),E=0;!S.isZero()&&S.andln(1)===0;)E++,S.iushrn(1);d(!S.isZero());var O=new a(1).toRed(this),L=O.redNeg(),z=this.m.subn(1).iushrn(1),G=this.m.bitLength();for(G=new a(2*G*G).toRed(this);this.pow(G,z).cmp(L)!==0;)G.redIAdd(L);for(var Z=this.pow(G,S),ee=this.pow(A,S.addn(1).iushrn(1)),W=this.pow(A,S),J=E;W.cmp(O)!==0;){for(var $=W,q=0;$.cmp(O)!==0;q++)$=$.redSqr();d(q<J);var Y=this.pow(Z,new a(1).iushln(J-q-1));ee=ee.redMul(Y),Z=Y.redSqr(),W=W.redMul(Z),J=q}return ee},T.prototype.invm=function(A){var N=A._invmp(this.m);return N.negative!==0?(N.negative=0,this.imod(N).redNeg()):this.imod(N)},T.prototype.pow=function(A,N){if(N.isZero())return new a(1).toRed(this);if(N.cmpn(1)===0)return A.clone();var k=new Array(16);k[0]=new a(1).toRed(this),k[1]=A;for(var S=2;S<k.length;S++)k[S]=this.mul(k[S-1],A);var E=k[0],O=0,L=0,z=N.bitLength()%26;for(z===0&&(z=26),S=N.length-1;S>=0;S--){for(var G=N.words[S],Z=z-1;Z>=0;Z--){var ee=G>>Z&1;E!==k[0]&&(E=this.sqr(E)),ee!==0||O!==0?(O<<=1,O|=ee,(++L===4||S===0&&Z===0)&&(E=this.mul(E,k[O]),L=0,O=0)):L=0}z=26}return E},T.prototype.convertTo=function(A){var N=A.umod(this.m);return N===A?N.clone():N},T.prototype.convertFrom=function(A){var N=A.clone();return N.red=null,N},a.mont=function(A){return new P(A)},c(P,T),P.prototype.convertTo=function(A){return this.imod(A.ushln(this.shift))},P.prototype.convertFrom=function(A){var N=this.imod(A.mul(this.rinv));return N.red=null,N},P.prototype.imul=function(A,N){if(A.isZero()||N.isZero())return A.words[0]=0,A.length=1,A;var k=A.imul(N),S=k.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),E=k.isub(S).iushrn(this.shift),O=E;return E.cmp(this.m)>=0?O=E.isub(this.m):E.cmpn(0)<0&&(O=E.iadd(this.m)),O._forceRed(this)},P.prototype.mul=function(A,N){if(A.isZero()||N.isZero())return new a(0)._forceRed(this);var k=A.mul(N),S=k.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),E=k.isub(S).iushrn(this.shift),O=E;return E.cmp(this.m)>=0?O=E.isub(this.m):E.cmpn(0)<0&&(O=E.iadd(this.m)),O._forceRed(this)},P.prototype.invm=function(A){return this.imod(A._invmp(this.m).mul(this.r2))._forceRed(this)}})(s===void 0||s)},{buffer:188}],187:[function(t,s,l){var i;function o(c){this.rand=c}if(s.exports=function(c){return i||(i=new o(null)),i.generate(c)},s.exports.Rand=o,o.prototype.generate=function(c){return this._rand(c)},o.prototype._rand=function(c){if(this.rand.getBytes)return this.rand.getBytes(c);for(var a=new Uint8Array(c),u=0;u<a.length;u++)a[u]=this.rand.getByte();return a},typeof self=="object")self.crypto&&self.crypto.getRandomValues?o.prototype._rand=function(c){var a=new Uint8Array(c);return self.crypto.getRandomValues(a),a}:self.msCrypto&&self.msCrypto.getRandomValues?o.prototype._rand=function(c){var a=new Uint8Array(c);return self.msCrypto.getRandomValues(a),a}:typeof window=="object"&&(o.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var d=t("crypto");if(typeof d.randomBytes!="function")throw new Error("Not supported");o.prototype._rand=function(c){return d.randomBytes(c)}}catch{}},{crypto:188}],188:[function(t,s,l){},{}],189:[function(t,s,l){var i=t("safe-buffer").Buffer;function o(f){i.isBuffer(f)||(f=i.from(f));for(var m=f.length/4|0,b=new Array(m),y=0;y<m;y++)b[y]=f.readUInt32BE(4*y);return b}function d(f){for(;0<f.length;f++)f[0]=0}function c(f,m,b,y,g){for(var w,x,_,j,R=b[0],M=b[1],I=b[2],F=b[3],B=f[0]^m[0],U=f[1]^m[1],Q=f[2]^m[2],K=f[3]^m[3],T=4,P=1;P<g;P++)w=R[B>>>24]^M[U>>>16&255]^I[Q>>>8&255]^F[255&K]^m[T++],x=R[U>>>24]^M[Q>>>16&255]^I[K>>>8&255]^F[255&B]^m[T++],_=R[Q>>>24]^M[K>>>16&255]^I[B>>>8&255]^F[255&U]^m[T++],j=R[K>>>24]^M[B>>>16&255]^I[U>>>8&255]^F[255&Q]^m[T++],B=w,U=x,Q=_,K=j;return w=(y[B>>>24]<<24|y[U>>>16&255]<<16|y[Q>>>8&255]<<8|y[255&K])^m[T++],x=(y[U>>>24]<<24|y[Q>>>16&255]<<16|y[K>>>8&255]<<8|y[255&B])^m[T++],_=(y[Q>>>24]<<24|y[K>>>16&255]<<16|y[B>>>8&255]<<8|y[255&U])^m[T++],j=(y[K>>>24]<<24|y[B>>>16&255]<<16|y[U>>>8&255]<<8|y[255&Q])^m[T++],[w>>>=0,x>>>=0,_>>>=0,j>>>=0]}var a=[0,1,2,4,8,16,32,64,128,27,54],u=function(){for(var f=new Array(256),m=0;m<256;m++)f[m]=m<128?m<<1:m<<1^283;for(var b=[],y=[],g=[[],[],[],[]],w=[[],[],[],[]],x=0,_=0,j=0;j<256;++j){var R=_^_<<1^_<<2^_<<3^_<<4;R=R>>>8^255&R^99,b[x]=R,y[R]=x;var M=f[x],I=f[M],F=f[I],B=257*f[R]^16843008*R;g[0][x]=B<<24|B>>>8,g[1][x]=B<<16|B>>>16,g[2][x]=B<<8|B>>>24,g[3][x]=B,B=16843009*F^65537*I^257*M^16843008*x,w[0][R]=B<<24|B>>>8,w[1][R]=B<<16|B>>>16,w[2][R]=B<<8|B>>>24,w[3][R]=B,x===0?x=_=1:(x=M^f[f[f[F^M]]],_^=f[f[_]])}return{SBOX:b,INV_SBOX:y,SUB_MIX:g,INV_SUB_MIX:w}}();function h(f){this._key=o(f),this._reset()}h.blockSize=16,h.keySize=32,h.prototype.blockSize=h.blockSize,h.prototype.keySize=h.keySize,h.prototype._reset=function(){for(var f=this._key,m=f.length,b=m+6,y=4*(b+1),g=[],w=0;w<m;w++)g[w]=f[w];for(w=m;w<y;w++){var x=g[w-1];w%m==0?(x=x<<8|x>>>24,x=u.SBOX[x>>>24]<<24|u.SBOX[x>>>16&255]<<16|u.SBOX[x>>>8&255]<<8|u.SBOX[255&x],x^=a[w/m|0]<<24):m>6&&w%m==4&&(x=u.SBOX[x>>>24]<<24|u.SBOX[x>>>16&255]<<16|u.SBOX[x>>>8&255]<<8|u.SBOX[255&x]),g[w]=g[w-m]^x}for(var _=[],j=0;j<y;j++){var R=y-j,M=g[R-(j%4?0:4)];_[j]=j<4||R<=4?M:u.INV_SUB_MIX[0][u.SBOX[M>>>24]]^u.INV_SUB_MIX[1][u.SBOX[M>>>16&255]]^u.INV_SUB_MIX[2][u.SBOX[M>>>8&255]]^u.INV_SUB_MIX[3][u.SBOX[255&M]]}this._nRounds=b,this._keySchedule=g,this._invKeySchedule=_},h.prototype.encryptBlockRaw=function(f){return c(f=o(f),this._keySchedule,u.SUB_MIX,u.SBOX,this._nRounds)},h.prototype.encryptBlock=function(f){var m=this.encryptBlockRaw(f),b=i.allocUnsafe(16);return b.writeUInt32BE(m[0],0),b.writeUInt32BE(m[1],4),b.writeUInt32BE(m[2],8),b.writeUInt32BE(m[3],12),b},h.prototype.decryptBlock=function(f){var m=(f=o(f))[1];f[1]=f[3],f[3]=m;var b=c(f,this._invKeySchedule,u.INV_SUB_MIX,u.INV_SBOX,this._nRounds),y=i.allocUnsafe(16);return y.writeUInt32BE(b[0],0),y.writeUInt32BE(b[3],4),y.writeUInt32BE(b[2],8),y.writeUInt32BE(b[1],12),y},h.prototype.scrub=function(){d(this._keySchedule),d(this._invKeySchedule),d(this._key)},s.exports.AES=h},{"safe-buffer":494}],190:[function(t,s,l){var i=t("./aes"),o=t("safe-buffer").Buffer,d=t("cipher-base"),c=t("inherits"),a=t("./ghash"),u=t("buffer-xor"),h=t("./incr32");function f(m,b,y,g){d.call(this);var w=o.alloc(4,0);this._cipher=new i.AES(b);var x=this._cipher.encryptBlock(w);this._ghash=new a(x),y=function(_,j,R){if(j.length===12)return _._finID=o.concat([j,o.from([0,0,0,1])]),o.concat([j,o.from([0,0,0,2])]);var M=new a(R),I=j.length,F=I%16;M.update(j),F&&(F=16-F,M.update(o.alloc(F,0))),M.update(o.alloc(8,0));var B=8*I,U=o.alloc(8);U.writeUIntBE(B,0,8),M.update(U),_._finID=M.state;var Q=o.from(_._finID);return h(Q),Q}(this,y,x),this._prev=o.from(y),this._cache=o.allocUnsafe(0),this._secCache=o.allocUnsafe(0),this._decrypt=g,this._alen=0,this._len=0,this._mode=m,this._authTag=null,this._called=!1}c(f,d),f.prototype._update=function(m){if(!this._called&&this._alen){var b=16-this._alen%16;b<16&&(b=o.alloc(b,0),this._ghash.update(b))}this._called=!0;var y=this._mode.encrypt(this,m);return this._decrypt?this._ghash.update(m):this._ghash.update(y),this._len+=m.length,y},f.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var m=u(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(b,y){var g=0;b.length!==y.length&&g++;for(var w=Math.min(b.length,y.length),x=0;x<w;++x)g+=b[x]^y[x];return g}(m,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=m,this._cipher.scrub()},f.prototype.getAuthTag=function(){if(this._decrypt||!o.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},f.prototype.setAuthTag=function(m){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=m},f.prototype.setAAD=function(m){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(m),this._alen+=m.length},s.exports=f},{"./aes":189,"./ghash":194,"./incr32":195,"buffer-xor":219,"cipher-base":221,inherits:440,"safe-buffer":494}],191:[function(t,s,l){var i=t("./encrypter"),o=t("./decrypter"),d=t("./modes/list.json");l.createCipher=l.Cipher=i.createCipher,l.createCipheriv=l.Cipheriv=i.createCipheriv,l.createDecipher=l.Decipher=o.createDecipher,l.createDecipheriv=l.Decipheriv=o.createDecipheriv,l.listCiphers=l.getCiphers=function(){return Object.keys(d)}},{"./decrypter":192,"./encrypter":193,"./modes/list.json":203}],192:[function(t,s,l){var i=t("./authCipher"),o=t("safe-buffer").Buffer,d=t("./modes"),c=t("./streamCipher"),a=t("cipher-base"),u=t("./aes"),h=t("evp_bytestokey");function f(y,g,w){a.call(this),this._cache=new m,this._last=void 0,this._cipher=new u.AES(g),this._prev=o.from(w),this._mode=y,this._autopadding=!0}function m(){this.cache=o.allocUnsafe(0)}function b(y,g,w){var x=d[y.toLowerCase()];if(!x)throw new TypeError("invalid suite type");if(typeof w=="string"&&(w=o.from(w)),x.mode!=="GCM"&&w.length!==x.iv)throw new TypeError("invalid iv length "+w.length);if(typeof g=="string"&&(g=o.from(g)),g.length!==x.key/8)throw new TypeError("invalid key length "+g.length);return x.type==="stream"?new c(x.module,g,w,!0):x.type==="auth"?new i(x.module,g,w,!0):new f(x.module,g,w)}t("inherits")(f,a),f.prototype._update=function(y){var g,w;this._cache.add(y);for(var x=[];g=this._cache.get(this._autopadding);)w=this._mode.decrypt(this,g),x.push(w);return o.concat(x)},f.prototype._final=function(){var y=this._cache.flush();if(this._autopadding)return function(g){var w=g[15];if(w<1||w>16)throw new Error("unable to decrypt data");for(var x=-1;++x<w;)if(g[x+(16-w)]!==w)throw new Error("unable to decrypt data");if(w!==16)return g.slice(0,16-w)}(this._mode.decrypt(this,y));if(y)throw new Error("data not multiple of block length")},f.prototype.setAutoPadding=function(y){return this._autopadding=!!y,this},m.prototype.add=function(y){this.cache=o.concat([this.cache,y])},m.prototype.get=function(y){var g;if(y){if(this.cache.length>16)return g=this.cache.slice(0,16),this.cache=this.cache.slice(16),g}else if(this.cache.length>=16)return g=this.cache.slice(0,16),this.cache=this.cache.slice(16),g;return null},m.prototype.flush=function(){if(this.cache.length)return this.cache},l.createDecipher=function(y,g){var w=d[y.toLowerCase()];if(!w)throw new TypeError("invalid suite type");var x=h(g,!1,w.key,w.iv);return b(y,x.key,x.iv)},l.createDecipheriv=b},{"./aes":189,"./authCipher":190,"./modes":202,"./streamCipher":205,"cipher-base":221,evp_bytestokey:423,inherits:440,"safe-buffer":494}],193:[function(t,s,l){var i=t("./modes"),o=t("./authCipher"),d=t("safe-buffer").Buffer,c=t("./streamCipher"),a=t("cipher-base"),u=t("./aes"),h=t("evp_bytestokey");function f(g,w,x){a.call(this),this._cache=new b,this._cipher=new u.AES(w),this._prev=d.from(x),this._mode=g,this._autopadding=!0}t("inherits")(f,a),f.prototype._update=function(g){var w,x;this._cache.add(g);for(var _=[];w=this._cache.get();)x=this._mode.encrypt(this,w),_.push(x);return d.concat(_)};var m=d.alloc(16,16);function b(){this.cache=d.allocUnsafe(0)}function y(g,w,x){var _=i[g.toLowerCase()];if(!_)throw new TypeError("invalid suite type");if(typeof w=="string"&&(w=d.from(w)),w.length!==_.key/8)throw new TypeError("invalid key length "+w.length);if(typeof x=="string"&&(x=d.from(x)),_.mode!=="GCM"&&x.length!==_.iv)throw new TypeError("invalid iv length "+x.length);return _.type==="stream"?new c(_.module,w,x):_.type==="auth"?new o(_.module,w,x):new f(_.module,w,x)}f.prototype._final=function(){var g=this._cache.flush();if(this._autopadding)return g=this._mode.encrypt(this,g),this._cipher.scrub(),g;if(!g.equals(m))throw this._cipher.scrub(),new Error("data not multiple of block length")},f.prototype.setAutoPadding=function(g){return this._autopadding=!!g,this},b.prototype.add=function(g){this.cache=d.concat([this.cache,g])},b.prototype.get=function(){if(this.cache.length>15){var g=this.cache.slice(0,16);return this.cache=this.cache.slice(16),g}return null},b.prototype.flush=function(){for(var g=16-this.cache.length,w=d.allocUnsafe(g),x=-1;++x<g;)w.writeUInt8(g,x);return d.concat([this.cache,w])},l.createCipheriv=y,l.createCipher=function(g,w){var x=i[g.toLowerCase()];if(!x)throw new TypeError("invalid suite type");var _=h(w,!1,x.key,x.iv);return y(g,_.key,_.iv)}},{"./aes":189,"./authCipher":190,"./modes":202,"./streamCipher":205,"cipher-base":221,evp_bytestokey:423,inherits:440,"safe-buffer":494}],194:[function(t,s,l){var i=t("safe-buffer").Buffer,o=i.alloc(16,0);function d(a){var u=i.allocUnsafe(16);return u.writeUInt32BE(a[0]>>>0,0),u.writeUInt32BE(a[1]>>>0,4),u.writeUInt32BE(a[2]>>>0,8),u.writeUInt32BE(a[3]>>>0,12),u}function c(a){this.h=a,this.state=i.alloc(16,0),this.cache=i.allocUnsafe(0)}c.prototype.ghash=function(a){for(var u=-1;++u<a.length;)this.state[u]^=a[u];this._multiply()},c.prototype._multiply=function(){for(var a,u,h,f=[(a=this.h).readUInt32BE(0),a.readUInt32BE(4),a.readUInt32BE(8),a.readUInt32BE(12)],m=[0,0,0,0],b=-1;++b<128;){for((this.state[~~(b/8)]&1<<7-b%8)!=0&&(m[0]^=f[0],m[1]^=f[1],m[2]^=f[2],m[3]^=f[3]),h=(1&f[3])!=0,u=3;u>0;u--)f[u]=f[u]>>>1|(1&f[u-1])<<31;f[0]=f[0]>>>1,h&&(f[0]=f[0]^225<<24)}this.state=d(m)},c.prototype.update=function(a){var u;for(this.cache=i.concat([this.cache,a]);this.cache.length>=16;)u=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(u)},c.prototype.final=function(a,u){return this.cache.length&&this.ghash(i.concat([this.cache,o],16)),this.ghash(d([0,a,0,u])),this.state},s.exports=c},{"safe-buffer":494}],195:[function(t,s,l){s.exports=function(i){for(var o,d=i.length;d--;){if((o=i.readUInt8(d))!==255){o++,i.writeUInt8(o,d);break}i.writeUInt8(0,d)}}},{}],196:[function(t,s,l){var i=t("buffer-xor");l.encrypt=function(o,d){var c=i(d,o._prev);return o._prev=o._cipher.encryptBlock(c),o._prev},l.decrypt=function(o,d){var c=o._prev;o._prev=d;var a=o._cipher.decryptBlock(d);return i(a,c)}},{"buffer-xor":219}],197:[function(t,s,l){var i=t("safe-buffer").Buffer,o=t("buffer-xor");function d(c,a,u){var h=a.length,f=o(a,c._cache);return c._cache=c._cache.slice(h),c._prev=i.concat([c._prev,u?a:f]),f}l.encrypt=function(c,a,u){for(var h,f=i.allocUnsafe(0);a.length;){if(c._cache.length===0&&(c._cache=c._cipher.encryptBlock(c._prev),c._prev=i.allocUnsafe(0)),!(c._cache.length<=a.length)){f=i.concat([f,d(c,a,u)]);break}h=c._cache.length,f=i.concat([f,d(c,a.slice(0,h),u)]),a=a.slice(h)}return f}},{"buffer-xor":219,"safe-buffer":494}],198:[function(t,s,l){var i=t("safe-buffer").Buffer;function o(c,a,u){for(var h,f,m=-1,b=0;++m<8;)h=a&1<<7-m?128:0,b+=(128&(f=c._cipher.encryptBlock(c._prev)[0]^h))>>m%8,c._prev=d(c._prev,u?h:f);return b}function d(c,a){var u=c.length,h=-1,f=i.allocUnsafe(c.length);for(c=i.concat([c,i.from([a])]);++h<u;)f[h]=c[h]<<1|c[h+1]>>7;return f}l.encrypt=function(c,a,u){for(var h=a.length,f=i.allocUnsafe(h),m=-1;++m<h;)f[m]=o(c,a[m],u);return f}},{"safe-buffer":494}],199:[function(t,s,l){var i=t("safe-buffer").Buffer;function o(d,c,a){var u=d._cipher.encryptBlock(d._prev)[0]^c;return d._prev=i.concat([d._prev.slice(1),i.from([a?c:u])]),u}l.encrypt=function(d,c,a){for(var u=c.length,h=i.allocUnsafe(u),f=-1;++f<u;)h[f]=o(d,c[f],a);return h}},{"safe-buffer":494}],200:[function(t,s,l){var i=t("buffer-xor"),o=t("safe-buffer").Buffer,d=t("../incr32");function c(a){var u=a._cipher.encryptBlockRaw(a._prev);return d(a._prev),u}l.encrypt=function(a,u){var h=Math.ceil(u.length/16),f=a._cache.length;a._cache=o.concat([a._cache,o.allocUnsafe(16*h)]);for(var m=0;m<h;m++){var b=c(a),y=f+16*m;a._cache.writeUInt32BE(b[0],y+0),a._cache.writeUInt32BE(b[1],y+4),a._cache.writeUInt32BE(b[2],y+8),a._cache.writeUInt32BE(b[3],y+12)}var g=a._cache.slice(0,u.length);return a._cache=a._cache.slice(u.length),i(u,g)}},{"../incr32":195,"buffer-xor":219,"safe-buffer":494}],201:[function(t,s,l){l.encrypt=function(i,o){return i._cipher.encryptBlock(o)},l.decrypt=function(i,o){return i._cipher.decryptBlock(o)}},{}],202:[function(t,s,l){var i={ECB:t("./ecb"),CBC:t("./cbc"),CFB:t("./cfb"),CFB8:t("./cfb8"),CFB1:t("./cfb1"),OFB:t("./ofb"),CTR:t("./ctr"),GCM:t("./ctr")},o=t("./list.json");for(var d in o)o[d].module=i[o[d].mode];s.exports=o},{"./cbc":196,"./cfb":197,"./cfb1":198,"./cfb8":199,"./ctr":200,"./ecb":201,"./list.json":203,"./ofb":204}],203:[function(t,s,l){s.exports={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}}},{}],204:[function(t,s,l){(function(i){(function(){var o=t("buffer-xor");function d(c){return c._prev=c._cipher.encryptBlock(c._prev),c._prev}l.encrypt=function(c,a){for(;c._cache.length<a.length;)c._cache=i.concat([c._cache,d(c)]);var u=c._cache.slice(0,a.length);return c._cache=c._cache.slice(a.length),o(a,u)}}).call(this)}).call(this,t("buffer").Buffer)},{buffer:220,"buffer-xor":219}],205:[function(t,s,l){var i=t("./aes"),o=t("safe-buffer").Buffer,d=t("cipher-base");function c(a,u,h,f){d.call(this),this._cipher=new i.AES(u),this._prev=o.from(h),this._cache=o.allocUnsafe(0),this._secCache=o.allocUnsafe(0),this._decrypt=f,this._mode=a}t("inherits")(c,d),c.prototype._update=function(a){return this._mode.encrypt(this,a,this._decrypt)},c.prototype._final=function(){this._cipher.scrub()},s.exports=c},{"./aes":189,"cipher-base":221,inherits:440,"safe-buffer":494}],206:[function(t,s,l){var i=t("browserify-des"),o=t("browserify-aes/browser"),d=t("browserify-aes/modes"),c=t("browserify-des/modes"),a=t("evp_bytestokey");function u(f,m,b){if(f=f.toLowerCase(),d[f])return o.createCipheriv(f,m,b);if(c[f])return new i({key:m,iv:b,mode:f});throw new TypeError("invalid suite type")}function h(f,m,b){if(f=f.toLowerCase(),d[f])return o.createDecipheriv(f,m,b);if(c[f])return new i({key:m,iv:b,mode:f,decrypt:!0});throw new TypeError("invalid suite type")}l.createCipher=l.Cipher=function(f,m){var b,y;if(f=f.toLowerCase(),d[f])b=d[f].key,y=d[f].iv;else{if(!c[f])throw new TypeError("invalid suite type");b=8*c[f].key,y=c[f].iv}var g=a(m,!1,b,y);return u(f,g.key,g.iv)},l.createCipheriv=l.Cipheriv=u,l.createDecipher=l.Decipher=function(f,m){var b,y;if(f=f.toLowerCase(),d[f])b=d[f].key,y=d[f].iv;else{if(!c[f])throw new TypeError("invalid suite type");b=8*c[f].key,y=c[f].iv}var g=a(m,!1,b,y);return h(f,g.key,g.iv)},l.createDecipheriv=l.Decipheriv=h,l.listCiphers=l.getCiphers=function(){return Object.keys(c).concat(o.getCiphers())}},{"browserify-aes/browser":191,"browserify-aes/modes":202,"browserify-des":207,"browserify-des/modes":208,evp_bytestokey:423}],207:[function(t,s,l){var i=t("cipher-base"),o=t("des.js"),d=t("inherits"),c=t("safe-buffer").Buffer,a={"des-ede3-cbc":o.CBC.instantiate(o.EDE),"des-ede3":o.EDE,"des-ede-cbc":o.CBC.instantiate(o.EDE),"des-ede":o.EDE,"des-cbc":o.CBC.instantiate(o.DES),"des-ecb":o.DES};function u(h){i.call(this);var f,m=h.mode.toLowerCase(),b=a[m];f=h.decrypt?"decrypt":"encrypt";var y=h.key;c.isBuffer(y)||(y=c.from(y)),m!=="des-ede"&&m!=="des-ede-cbc"||(y=c.concat([y,y.slice(0,8)]));var g=h.iv;c.isBuffer(g)||(g=c.from(g)),this._des=b.create({key:y,iv:g,type:f})}a.des=a["des-cbc"],a.des3=a["des-ede3-cbc"],s.exports=u,d(u,i),u.prototype._update=function(h){return c.from(this._des.update(h))},u.prototype._final=function(){return c.from(this._des.final())}},{"cipher-base":221,"des.js":394,inherits:440,"safe-buffer":494}],208:[function(t,s,l){l["des-ecb"]={key:8,iv:0},l["des-cbc"]=l.des={key:8,iv:8},l["des-ede3-cbc"]=l.des3={key:24,iv:8},l["des-ede3"]={key:24,iv:0},l["des-ede-cbc"]={key:16,iv:8},l["des-ede"]={key:16,iv:0}},{}],209:[function(t,s,l){(function(i){(function(){var o=t("bn.js"),d=t("randombytes");function c(u){var h,f=u.modulus.byteLength();do h=new o(d(f));while(h.cmp(u.modulus)>=0||!h.umod(u.prime1)||!h.umod(u.prime2));return h}function a(u,h){var f=function(I){var F=c(I);return{blinder:F.toRed(o.mont(I.modulus)).redPow(new o(I.publicExponent)).fromRed(),unblinder:F.invm(I.modulus)}}(h),m=h.modulus.byteLength(),b=new o(u).mul(f.blinder).umod(h.modulus),y=b.toRed(o.mont(h.prime1)),g=b.toRed(o.mont(h.prime2)),w=h.coefficient,x=h.prime1,_=h.prime2,j=y.redPow(h.exponent1).fromRed(),R=g.redPow(h.exponent2).fromRed(),M=j.isub(R).imul(w).umod(x).imul(_);return R.iadd(M).imul(f.unblinder).umod(h.modulus).toArrayLike(i,"be",m)}a.getr=c,s.exports=a}).call(this)}).call(this,t("buffer").Buffer)},{"bn.js":186,buffer:220,randombytes:475}],210:[function(t,s,l){s.exports=t("./browser/algorithms.json")},{"./browser/algorithms.json":211}],211:[function(t,s,l){s.exports={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}}},{}],212:[function(t,s,l){s.exports={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}},{}],213:[function(t,s,l){var i=t("safe-buffer").Buffer,o=t("create-hash"),d=t("readable-stream"),c=t("inherits"),a=t("./sign"),u=t("./verify"),h=t("./algorithms.json");function f(g){d.Writable.call(this);var w=h[g];if(!w)throw new Error("Unknown message digest");this._hashType=w.hash,this._hash=o(w.hash),this._tag=w.id,this._signType=w.sign}function m(g){d.Writable.call(this);var w=h[g];if(!w)throw new Error("Unknown message digest");this._hash=o(w.hash),this._tag=w.id,this._signType=w.sign}function b(g){return new f(g)}function y(g){return new m(g)}Object.keys(h).forEach(function(g){h[g].id=i.from(h[g].id,"hex"),h[g.toLowerCase()]=h[g]}),c(f,d.Writable),f.prototype._write=function(g,w,x){this._hash.update(g),x()},f.prototype.update=function(g,w){return typeof g=="string"&&(g=i.from(g,w)),this._hash.update(g),this},f.prototype.sign=function(g,w){this.end();var x=this._hash.digest(),_=a(x,g,this._hashType,this._signType,this._tag);return w?_.toString(w):_},c(m,d.Writable),m.prototype._write=function(g,w,x){this._hash.update(g),x()},m.prototype.update=function(g,w){return typeof g=="string"&&(g=i.from(g,w)),this._hash.update(g),this},m.prototype.verify=function(g,w,x){typeof w=="string"&&(w=i.from(w,x)),this.end();var _=this._hash.digest();return u(w,_,g,this._signType,this._tag)},s.exports={Sign:b,Verify:y,createSign:b,createVerify:y}},{"./algorithms.json":211,"./sign":214,"./verify":215,"create-hash":386,inherits:440,"readable-stream":491,"safe-buffer":494}],214:[function(t,s,l){var i=t("safe-buffer").Buffer,o=t("create-hmac"),d=t("browserify-rsa"),c=t("elliptic").ec,a=t("bn.js"),u=t("parse-asn1"),h=t("./curves.json");function f(g,w,x,_){if((g=i.from(g.toArray())).length<w.byteLength()){var j=i.alloc(w.byteLength()-g.length);g=i.concat([j,g])}var R=x.length,M=function(B,U){B=(B=m(B,U)).mod(U);var Q=i.from(B.toArray());if(Q.length<U.byteLength()){var K=i.alloc(U.byteLength()-Q.length);Q=i.concat([K,Q])}return Q}(x,w),I=i.alloc(R);I.fill(1);var F=i.alloc(R);return F=o(_,F).update(I).update(i.from([0])).update(g).update(M).digest(),I=o(_,F).update(I).digest(),{k:F=o(_,F).update(I).update(i.from([1])).update(g).update(M).digest(),v:I=o(_,F).update(I).digest()}}function m(g,w){var x=new a(g),_=(g.length<<3)-w.bitLength();return _>0&&x.ishrn(_),x}function b(g,w,x){var _,j;do{for(_=i.alloc(0);8*_.length<g.bitLength();)w.v=o(x,w.k).update(w.v).digest(),_=i.concat([_,w.v]);j=m(_,g),w.k=o(x,w.k).update(w.v).update(i.from([0])).digest(),w.v=o(x,w.k).update(w.v).digest()}while(j.cmp(g)!==-1);return j}function y(g,w,x,_){return g.toRed(a.mont(x)).redPow(w).fromRed().mod(_)}s.exports=function(g,w,x,_,j){var R=u(w);if(R.curve){if(_!=="ecdsa"&&_!=="ecdsa/rsa")throw new Error("wrong private key type");return function(B,U){var Q=h[U.curve.join(".")];if(!Q)throw new Error("unknown curve "+U.curve.join("."));var K=new c(Q).keyFromPrivate(U.privateKey).sign(B);return i.from(K.toDER())}(g,R)}if(R.type==="dsa"){if(_!=="dsa")throw new Error("wrong private key type");return function(B,U,Q){for(var K,T=U.params.priv_key,P=U.params.p,A=U.params.q,N=U.params.g,k=new a(0),S=m(B,A).mod(A),E=!1,O=f(T,A,B,Q);E===!1;)K=b(A,O,Q),k=y(N,K,P,A),(E=K.invm(A).imul(S.add(T.mul(k))).mod(A)).cmpn(0)===0&&(E=!1,k=new a(0));return function(L,z){L=L.toArray(),z=z.toArray(),128&L[0]&&(L=[0].concat(L)),128&z[0]&&(z=[0].concat(z));var G=[48,L.length+z.length+4,2,L.length];return G=G.concat(L,[2,z.length],z),i.from(G)}(k,E)}(g,R,x)}if(_!=="rsa"&&_!=="ecdsa/rsa")throw new Error("wrong private key type");g=i.concat([j,g]);for(var M=R.modulus.byteLength(),I=[0,1];g.length+I.length+1<M;)I.push(255);I.push(0);for(var F=-1;++F<g.length;)I.push(g[F]);return d(I,R)},s.exports.getKey=f,s.exports.makeKey=b},{"./curves.json":212,"bn.js":186,"browserify-rsa":209,"create-hmac":388,elliptic:405,"parse-asn1":459,"safe-buffer":494}],215:[function(t,s,l){var i=t("safe-buffer").Buffer,o=t("bn.js"),d=t("elliptic").ec,c=t("parse-asn1"),a=t("./curves.json");function u(h,f){if(h.cmpn(0)<=0)throw new Error("invalid sig");if(h.cmp(f)>=f)throw new Error("invalid sig")}s.exports=function(h,f,m,b,y){var g=c(m);if(g.type==="ec"){if(b!=="ecdsa"&&b!=="ecdsa/rsa")throw new Error("wrong public key type");return function(I,F,B){var U=a[B.data.algorithm.curve.join(".")];if(!U)throw new Error("unknown curve "+B.data.algorithm.curve.join("."));var Q=new d(U),K=B.data.subjectPrivateKey.data;return Q.verify(F,I,K)}(h,f,g)}if(g.type==="dsa"){if(b!=="dsa")throw new Error("wrong public key type");return function(I,F,B){var U=B.data.p,Q=B.data.q,K=B.data.g,T=B.data.pub_key,P=c.signature.decode(I,"der"),A=P.s,N=P.r;u(A,Q),u(N,Q);var k=o.mont(U),S=A.invm(Q);return K.toRed(k).redPow(new o(F).mul(S).mod(Q)).fromRed().mul(T.toRed(k).redPow(N.mul(S).mod(Q)).fromRed()).mod(U).mod(Q).cmp(N)===0}(h,f,g)}if(b!=="rsa"&&b!=="ecdsa/rsa")throw new Error("wrong public key type");f=i.concat([y,f]);for(var w=g.modulus.byteLength(),x=[1],_=0;f.length+x.length+2<w;)x.push(255),_++;x.push(0);for(var j=-1;++j<f.length;)x.push(f[j]);x=i.from(x);var R=o.mont(g.modulus);h=(h=new o(h).toRed(R)).redPow(new o(g.publicExponent)),h=i.from(h.fromRed().toArray());var M=_<8?1:0;for(w=Math.min(h.length,x.length),h.length!==x.length&&(M=1),j=-1;++j<w;)M|=h[j]^x[j];return M===0}},{"./curves.json":212,"bn.js":186,elliptic:405,"parse-asn1":459,"safe-buffer":494}],216:[function(t,s,l){},{}],217:[function(t,s,l){var i=t("buffer"),o=i.Buffer;function d(a,u){for(var h in a)u[h]=a[h]}function c(a,u,h){return o(a,u,h)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?s.exports=i:(d(i,l),l.Buffer=c),d(o,c),c.from=function(a,u,h){if(typeof a=="number")throw new TypeError("Argument must not be a number");return o(a,u,h)},c.alloc=function(a,u,h){if(typeof a!="number")throw new TypeError("Argument must be a number");var f=o(a);return u!==void 0?typeof h=="string"?f.fill(u,h):f.fill(u):f.fill(0),f},c.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return o(a)},c.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return i.SlowBuffer(a)}},{buffer:220}],218:[function(t,s,l){var i=t("safe-buffer").Buffer,o=i.isEncoding||function(g){switch((g=""+g)&&g.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function d(g){var w;switch(this.encoding=function(x){var _=function(j){if(!j)return"utf8";for(var R;;)switch(j){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return j;default:if(R)return;j=(""+j).toLowerCase(),R=!0}}(x);if(typeof _!="string"&&(i.isEncoding===o||!o(x)))throw new Error("Unknown encoding: "+x);return _||x}(g),this.encoding){case"utf16le":this.text=u,this.end=h,w=4;break;case"utf8":this.fillLast=a,w=4;break;case"base64":this.text=f,this.end=m,w=3;break;default:return this.write=b,void(this.end=y)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(w)}function c(g){return g<=127?0:g>>5==6?2:g>>4==14?3:g>>3==30?4:g>>6==2?-1:-2}function a(g){var w=this.lastTotal-this.lastNeed,x=function(_,j,R){if((192&j[0])!=128)return _.lastNeed=0,"";if(_.lastNeed>1&&j.length>1){if((192&j[1])!=128)return _.lastNeed=1,"";if(_.lastNeed>2&&j.length>2&&(192&j[2])!=128)return _.lastNeed=2,""}}(this,g);return x!==void 0?x:this.lastNeed<=g.length?(g.copy(this.lastChar,w,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(g.copy(this.lastChar,w,0,g.length),void(this.lastNeed-=g.length))}function u(g,w){if((g.length-w)%2==0){var x=g.toString("utf16le",w);if(x){var _=x.charCodeAt(x.length-1);if(_>=55296&&_<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=g[g.length-2],this.lastChar[1]=g[g.length-1],x.slice(0,-1)}return x}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=g[g.length-1],g.toString("utf16le",w,g.length-1)}function h(g){var w=g&&g.length?this.write(g):"";if(this.lastNeed){var x=this.lastTotal-this.lastNeed;return w+this.lastChar.toString("utf16le",0,x)}return w}function f(g,w){var x=(g.length-w)%3;return x===0?g.toString("base64",w):(this.lastNeed=3-x,this.lastTotal=3,x===1?this.lastChar[0]=g[g.length-1]:(this.lastChar[0]=g[g.length-2],this.lastChar[1]=g[g.length-1]),g.toString("base64",w,g.length-x))}function m(g){var w=g&&g.length?this.write(g):"";return this.lastNeed?w+this.lastChar.toString("base64",0,3-this.lastNeed):w}function b(g){return g.toString(this.encoding)}function y(g){return g&&g.length?this.write(g):""}l.StringDecoder=d,d.prototype.write=function(g){if(g.length===0)return"";var w,x;if(this.lastNeed){if((w=this.fillLast(g))===void 0)return"";x=this.lastNeed,this.lastNeed=0}else x=0;return x<g.length?w?w+this.text(g,x):this.text(g,x):w||""},d.prototype.end=function(g){var w=g&&g.length?this.write(g):"";return this.lastNeed?w+"":w},d.prototype.text=function(g,w){var x=function(j,R,M){var I=R.length-1;if(I<M)return 0;var F=c(R[I]);return F>=0?(F>0&&(j.lastNeed=F-1),F):--I<M||F===-2?0:(F=c(R[I]))>=0?(F>0&&(j.lastNeed=F-2),F):--I<M||F===-2?0:(F=c(R[I]))>=0?(F>0&&(F===2?F=0:j.lastNeed=F-3),F):0}(this,g,w);if(!this.lastNeed)return g.toString("utf8",w);this.lastTotal=x;var _=g.length-(x-this.lastNeed);return g.copy(this.lastChar,0,_),g.toString("utf8",w,_)},d.prototype.fillLast=function(g){if(this.lastNeed<=g.length)return g.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);g.copy(this.lastChar,this.lastTotal-this.lastNeed,0,g.length),this.lastNeed-=g.length}},{"safe-buffer":217}],219:[function(t,s,l){(function(i){(function(){s.exports=function(o,d){for(var c=Math.min(o.length,d.length),a=new i(c),u=0;u<c;++u)a[u]=o[u]^d[u];return a}}).call(this)}).call(this,t("buffer").Buffer)},{buffer:220}],220:[function(t,s,l){(function(i){(function(){var o=t("base64-js"),d=t("ieee754");l.Buffer=a,l.SlowBuffer=function($){return+$!=$&&($=0),a.alloc(+$)},l.INSPECT_MAX_BYTES=50;function c($){if($>2147483647)throw new RangeError('The value "'+$+'" is invalid for option "size"');var q=new Uint8Array($);return q.__proto__=a.prototype,q}function a($,q,Y){if(typeof $=="number"){if(typeof q=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f($)}return u($,q,Y)}function u($,q,Y){if(typeof $=="string")return function(ae,ce){if(typeof ce=="string"&&ce!==""||(ce="utf8"),!a.isEncoding(ce))throw new TypeError("Unknown encoding: "+ce);var we=0|y(ae,ce),fe=c(we),re=fe.write(ae,ce);return re!==we&&(fe=fe.slice(0,re)),fe}($,q);if(ArrayBuffer.isView($))return m($);if($==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof $);if(W($,ArrayBuffer)||$&&W($.buffer,ArrayBuffer))return function(ae,ce,we){if(ce<0||ae.byteLength<ce)throw new RangeError('"offset" is outside of buffer bounds');if(ae.byteLength<ce+(we||0))throw new RangeError('"length" is outside of buffer bounds');var fe;return fe=ce===void 0&&we===void 0?new Uint8Array(ae):we===void 0?new Uint8Array(ae,ce):new Uint8Array(ae,ce,we),fe.__proto__=a.prototype,fe}($,q,Y);if(typeof $=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var se=$.valueOf&&$.valueOf();if(se!=null&&se!==$)return a.from(se,q,Y);var oe=function(ae){if(a.isBuffer(ae)){var ce=0|b(ae.length),we=c(ce);return we.length===0||ae.copy(we,0,0,ce),we}if(ae.length!==void 0)return typeof ae.length!="number"||J(ae.length)?c(0):m(ae);if(ae.type==="Buffer"&&Array.isArray(ae.data))return m(ae.data)}($);if(oe)return oe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof $[Symbol.toPrimitive]=="function")return a.from($[Symbol.toPrimitive]("string"),q,Y);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof $)}function h($){if(typeof $!="number")throw new TypeError('"size" argument must be of type number');if($<0)throw new RangeError('The value "'+$+'" is invalid for option "size"')}function f($){return h($),c($<0?0:0|b($))}function m($){for(var q=$.length<0?0:0|b($.length),Y=c(q),se=0;se<q;se+=1)Y[se]=255&$[se];return Y}function b($){if($>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|$}function y($,q){if(a.isBuffer($))return $.length;if(ArrayBuffer.isView($)||W($,ArrayBuffer))return $.byteLength;if(typeof $!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof $);var Y=$.length,se=arguments.length>2&&arguments[2]===!0;if(!se&&Y===0)return 0;for(var oe=!1;;)switch(q){case"ascii":case"latin1":case"binary":return Y;case"utf8":case"utf-8":return G($).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*Y;case"hex":return Y>>>1;case"base64":return Z($).length;default:if(oe)return se?-1:G($).length;q=(""+q).toLowerCase(),oe=!0}}function g($,q,Y){var se=!1;if((q===void 0||q<0)&&(q=0),q>this.length||((Y===void 0||Y>this.length)&&(Y=this.length),Y<=0)||(Y>>>=0)<=(q>>>=0))return"";for($||($="utf8");;)switch($){case"hex":return P(this,q,Y);case"utf8":case"utf-8":return Q(this,q,Y);case"ascii":return K(this,q,Y);case"latin1":case"binary":return T(this,q,Y);case"base64":return U(this,q,Y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,q,Y);default:if(se)throw new TypeError("Unknown encoding: "+$);$=($+"").toLowerCase(),se=!0}}function w($,q,Y){var se=$[q];$[q]=$[Y],$[Y]=se}function x($,q,Y,se,oe){if($.length===0)return-1;if(typeof Y=="string"?(se=Y,Y=0):Y>2147483647?Y=2147483647:Y<-2147483648&&(Y=-2147483648),J(Y=+Y)&&(Y=oe?0:$.length-1),Y<0&&(Y=$.length+Y),Y>=$.length){if(oe)return-1;Y=$.length-1}else if(Y<0){if(!oe)return-1;Y=0}if(typeof q=="string"&&(q=a.from(q,se)),a.isBuffer(q))return q.length===0?-1:_($,q,Y,se,oe);if(typeof q=="number")return q&=255,typeof Uint8Array.prototype.indexOf=="function"?oe?Uint8Array.prototype.indexOf.call($,q,Y):Uint8Array.prototype.lastIndexOf.call($,q,Y):_($,[q],Y,se,oe);throw new TypeError("val must be string, number or Buffer")}function _($,q,Y,se,oe){var ae,ce=1,we=$.length,fe=q.length;if(se!==void 0&&((se=String(se).toLowerCase())==="ucs2"||se==="ucs-2"||se==="utf16le"||se==="utf-16le")){if($.length<2||q.length<2)return-1;ce=2,we/=2,fe/=2,Y/=2}function re(ie,ue){return ce===1?ie[ue]:ie.readUInt16BE(ue*ce)}if(oe){var ge=-1;for(ae=Y;ae<we;ae++)if(re($,ae)===re(q,ge===-1?0:ae-ge)){if(ge===-1&&(ge=ae),ae-ge+1===fe)return ge*ce}else ge!==-1&&(ae-=ae-ge),ge=-1}else for(Y+fe>we&&(Y=we-fe),ae=Y;ae>=0;ae--){for(var le=!0,te=0;te<fe;te++)if(re($,ae+te)!==re(q,te)){le=!1;break}if(le)return ae}return-1}function j($,q,Y,se){Y=Number(Y)||0;var oe=$.length-Y;se?(se=Number(se))>oe&&(se=oe):se=oe;var ae=q.length;se>ae/2&&(se=ae/2);for(var ce=0;ce<se;++ce){var we=parseInt(q.substr(2*ce,2),16);if(J(we))return ce;$[Y+ce]=we}return ce}function R($,q,Y,se){return ee(G(q,$.length-Y),$,Y,se)}function M($,q,Y,se){return ee(function(oe){for(var ae=[],ce=0;ce<oe.length;++ce)ae.push(255&oe.charCodeAt(ce));return ae}(q),$,Y,se)}function I($,q,Y,se){return M($,q,Y,se)}function F($,q,Y,se){return ee(Z(q),$,Y,se)}function B($,q,Y,se){return ee(function(oe,ae){for(var ce,we,fe,re=[],ge=0;ge<oe.length&&!((ae-=2)<0);++ge)ce=oe.charCodeAt(ge),we=ce>>8,fe=ce%256,re.push(fe),re.push(we);return re}(q,$.length-Y),$,Y,se)}function U($,q,Y){return q===0&&Y===$.length?o.fromByteArray($):o.fromByteArray($.slice(q,Y))}function Q($,q,Y){Y=Math.min($.length,Y);for(var se=[],oe=q;oe<Y;){var ae,ce,we,fe,re=$[oe],ge=null,le=re>239?4:re>223?3:re>191?2:1;if(oe+le<=Y)switch(le){case 1:re<128&&(ge=re);break;case 2:(192&(ae=$[oe+1]))==128&&(fe=(31&re)<<6|63&ae)>127&&(ge=fe);break;case 3:ae=$[oe+1],ce=$[oe+2],(192&ae)==128&&(192&ce)==128&&(fe=(15&re)<<12|(63&ae)<<6|63&ce)>2047&&(fe<55296||fe>57343)&&(ge=fe);break;case 4:ae=$[oe+1],ce=$[oe+2],we=$[oe+3],(192&ae)==128&&(192&ce)==128&&(192&we)==128&&(fe=(15&re)<<18|(63&ae)<<12|(63&ce)<<6|63&we)>65535&&fe<1114112&&(ge=fe)}ge===null?(ge=65533,le=1):ge>65535&&(ge-=65536,se.push(ge>>>10&1023|55296),ge=56320|1023&ge),se.push(ge),oe+=le}return function(te){var ie=te.length;if(ie<=4096)return String.fromCharCode.apply(String,te);for(var ue="",_e=0;_e<ie;)ue+=String.fromCharCode.apply(String,te.slice(_e,_e+=4096));return ue}(se)}l.kMaxLength=2147483647,a.TYPED_ARRAY_SUPPORT=function(){try{var $=new Uint8Array(1);return $.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},$.foo()===42}catch{return!1}}(),a.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),a.poolSize=8192,a.from=function($,q,Y){return u($,q,Y)},a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,a.alloc=function($,q,Y){return function(se,oe,ae){return h(se),se<=0?c(se):oe!==void 0?typeof ae=="string"?c(se).fill(oe,ae):c(se).fill(oe):c(se)}($,q,Y)},a.allocUnsafe=function($){return f($)},a.allocUnsafeSlow=function($){return f($)},a.isBuffer=function($){return $!=null&&$._isBuffer===!0&&$!==a.prototype},a.compare=function($,q){if(W($,Uint8Array)&&($=a.from($,$.offset,$.byteLength)),W(q,Uint8Array)&&(q=a.from(q,q.offset,q.byteLength)),!a.isBuffer($)||!a.isBuffer(q))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if($===q)return 0;for(var Y=$.length,se=q.length,oe=0,ae=Math.min(Y,se);oe<ae;++oe)if($[oe]!==q[oe]){Y=$[oe],se=q[oe];break}return Y<se?-1:se<Y?1:0},a.isEncoding=function($){switch(String($).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function($,q){if(!Array.isArray($))throw new TypeError('"list" argument must be an Array of Buffers');if($.length===0)return a.alloc(0);var Y;if(q===void 0)for(q=0,Y=0;Y<$.length;++Y)q+=$[Y].length;var se=a.allocUnsafe(q),oe=0;for(Y=0;Y<$.length;++Y){var ae=$[Y];if(W(ae,Uint8Array)&&(ae=a.from(ae)),!a.isBuffer(ae))throw new TypeError('"list" argument must be an Array of Buffers');ae.copy(se,oe),oe+=ae.length}return se},a.byteLength=y,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var $=this.length;if($%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var q=0;q<$;q+=2)w(this,q,q+1);return this},a.prototype.swap32=function(){var $=this.length;if($%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var q=0;q<$;q+=4)w(this,q,q+3),w(this,q+1,q+2);return this},a.prototype.swap64=function(){var $=this.length;if($%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var q=0;q<$;q+=8)w(this,q,q+7),w(this,q+1,q+6),w(this,q+2,q+5),w(this,q+3,q+4);return this},a.prototype.toString=function(){var $=this.length;return $===0?"":arguments.length===0?Q(this,0,$):g.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function($){if(!a.isBuffer($))throw new TypeError("Argument must be a Buffer");return this===$||a.compare(this,$)===0},a.prototype.inspect=function(){var $="",q=l.INSPECT_MAX_BYTES;return $=this.toString("hex",0,q).replace(/(.{2})/g,"$1 ").trim(),this.length>q&&($+=" ... "),"<Buffer "+$+">"},a.prototype.compare=function($,q,Y,se,oe){if(W($,Uint8Array)&&($=a.from($,$.offset,$.byteLength)),!a.isBuffer($))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof $);if(q===void 0&&(q=0),Y===void 0&&(Y=$?$.length:0),se===void 0&&(se=0),oe===void 0&&(oe=this.length),q<0||Y>$.length||se<0||oe>this.length)throw new RangeError("out of range index");if(se>=oe&&q>=Y)return 0;if(se>=oe)return-1;if(q>=Y)return 1;if(this===$)return 0;for(var ae=(oe>>>=0)-(se>>>=0),ce=(Y>>>=0)-(q>>>=0),we=Math.min(ae,ce),fe=this.slice(se,oe),re=$.slice(q,Y),ge=0;ge<we;++ge)if(fe[ge]!==re[ge]){ae=fe[ge],ce=re[ge];break}return ae<ce?-1:ce<ae?1:0},a.prototype.includes=function($,q,Y){return this.indexOf($,q,Y)!==-1},a.prototype.indexOf=function($,q,Y){return x(this,$,q,Y,!0)},a.prototype.lastIndexOf=function($,q,Y){return x(this,$,q,Y,!1)},a.prototype.write=function($,q,Y,se){if(q===void 0)se="utf8",Y=this.length,q=0;else if(Y===void 0&&typeof q=="string")se=q,Y=this.length,q=0;else{if(!isFinite(q))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");q>>>=0,isFinite(Y)?(Y>>>=0,se===void 0&&(se="utf8")):(se=Y,Y=void 0)}var oe=this.length-q;if((Y===void 0||Y>oe)&&(Y=oe),$.length>0&&(Y<0||q<0)||q>this.length)throw new RangeError("Attempt to write outside buffer bounds");se||(se="utf8");for(var ae=!1;;)switch(se){case"hex":return j(this,$,q,Y);case"utf8":case"utf-8":return R(this,$,q,Y);case"ascii":return M(this,$,q,Y);case"latin1":case"binary":return I(this,$,q,Y);case"base64":return F(this,$,q,Y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,$,q,Y);default:if(ae)throw new TypeError("Unknown encoding: "+se);se=(""+se).toLowerCase(),ae=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function K($,q,Y){var se="";Y=Math.min($.length,Y);for(var oe=q;oe<Y;++oe)se+=String.fromCharCode(127&$[oe]);return se}function T($,q,Y){var se="";Y=Math.min($.length,Y);for(var oe=q;oe<Y;++oe)se+=String.fromCharCode($[oe]);return se}function P($,q,Y){var se=$.length;(!q||q<0)&&(q=0),(!Y||Y<0||Y>se)&&(Y=se);for(var oe="",ae=q;ae<Y;++ae)oe+=z($[ae]);return oe}function A($,q,Y){for(var se=$.slice(q,Y),oe="",ae=0;ae<se.length;ae+=2)oe+=String.fromCharCode(se[ae]+256*se[ae+1]);return oe}function N($,q,Y){if($%1!=0||$<0)throw new RangeError("offset is not uint");if($+q>Y)throw new RangeError("Trying to access beyond buffer length")}function k($,q,Y,se,oe,ae){if(!a.isBuffer($))throw new TypeError('"buffer" argument must be a Buffer instance');if(q>oe||q<ae)throw new RangeError('"value" argument is out of bounds');if(Y+se>$.length)throw new RangeError("Index out of range")}function S($,q,Y,se,oe,ae){if(Y+se>$.length)throw new RangeError("Index out of range");if(Y<0)throw new RangeError("Index out of range")}function E($,q,Y,se,oe){return q=+q,Y>>>=0,oe||S($,0,Y,4),d.write($,q,Y,se,23,4),Y+4}function O($,q,Y,se,oe){return q=+q,Y>>>=0,oe||S($,0,Y,8),d.write($,q,Y,se,52,8),Y+8}a.prototype.slice=function($,q){var Y=this.length;($=~~$)<0?($+=Y)<0&&($=0):$>Y&&($=Y),(q=q===void 0?Y:~~q)<0?(q+=Y)<0&&(q=0):q>Y&&(q=Y),q<$&&(q=$);var se=this.subarray($,q);return se.__proto__=a.prototype,se},a.prototype.readUIntLE=function($,q,Y){$>>>=0,q>>>=0,Y||N($,q,this.length);for(var se=this[$],oe=1,ae=0;++ae<q&&(oe*=256);)se+=this[$+ae]*oe;return se},a.prototype.readUIntBE=function($,q,Y){$>>>=0,q>>>=0,Y||N($,q,this.length);for(var se=this[$+--q],oe=1;q>0&&(oe*=256);)se+=this[$+--q]*oe;return se},a.prototype.readUInt8=function($,q){return $>>>=0,q||N($,1,this.length),this[$]},a.prototype.readUInt16LE=function($,q){return $>>>=0,q||N($,2,this.length),this[$]|this[$+1]<<8},a.prototype.readUInt16BE=function($,q){return $>>>=0,q||N($,2,this.length),this[$]<<8|this[$+1]},a.prototype.readUInt32LE=function($,q){return $>>>=0,q||N($,4,this.length),(this[$]|this[$+1]<<8|this[$+2]<<16)+16777216*this[$+3]},a.prototype.readUInt32BE=function($,q){return $>>>=0,q||N($,4,this.length),16777216*this[$]+(this[$+1]<<16|this[$+2]<<8|this[$+3])},a.prototype.readIntLE=function($,q,Y){$>>>=0,q>>>=0,Y||N($,q,this.length);for(var se=this[$],oe=1,ae=0;++ae<q&&(oe*=256);)se+=this[$+ae]*oe;return se>=(oe*=128)&&(se-=Math.pow(2,8*q)),se},a.prototype.readIntBE=function($,q,Y){$>>>=0,q>>>=0,Y||N($,q,this.length);for(var se=q,oe=1,ae=this[$+--se];se>0&&(oe*=256);)ae+=this[$+--se]*oe;return ae>=(oe*=128)&&(ae-=Math.pow(2,8*q)),ae},a.prototype.readInt8=function($,q){return $>>>=0,q||N($,1,this.length),128&this[$]?-1*(255-this[$]+1):this[$]},a.prototype.readInt16LE=function($,q){$>>>=0,q||N($,2,this.length);var Y=this[$]|this[$+1]<<8;return 32768&Y?4294901760|Y:Y},a.prototype.readInt16BE=function($,q){$>>>=0,q||N($,2,this.length);var Y=this[$+1]|this[$]<<8;return 32768&Y?4294901760|Y:Y},a.prototype.readInt32LE=function($,q){return $>>>=0,q||N($,4,this.length),this[$]|this[$+1]<<8|this[$+2]<<16|this[$+3]<<24},a.prototype.readInt32BE=function($,q){return $>>>=0,q||N($,4,this.length),this[$]<<24|this[$+1]<<16|this[$+2]<<8|this[$+3]},a.prototype.readFloatLE=function($,q){return $>>>=0,q||N($,4,this.length),d.read(this,$,!0,23,4)},a.prototype.readFloatBE=function($,q){return $>>>=0,q||N($,4,this.length),d.read(this,$,!1,23,4)},a.prototype.readDoubleLE=function($,q){return $>>>=0,q||N($,8,this.length),d.read(this,$,!0,52,8)},a.prototype.readDoubleBE=function($,q){return $>>>=0,q||N($,8,this.length),d.read(this,$,!1,52,8)},a.prototype.writeUIntLE=function($,q,Y,se){$=+$,q>>>=0,Y>>>=0,se||k(this,$,q,Y,Math.pow(2,8*Y)-1,0);var oe=1,ae=0;for(this[q]=255&$;++ae<Y&&(oe*=256);)this[q+ae]=$/oe&255;return q+Y},a.prototype.writeUIntBE=function($,q,Y,se){$=+$,q>>>=0,Y>>>=0,se||k(this,$,q,Y,Math.pow(2,8*Y)-1,0);var oe=Y-1,ae=1;for(this[q+oe]=255&$;--oe>=0&&(ae*=256);)this[q+oe]=$/ae&255;return q+Y},a.prototype.writeUInt8=function($,q,Y){return $=+$,q>>>=0,Y||k(this,$,q,1,255,0),this[q]=255&$,q+1},a.prototype.writeUInt16LE=function($,q,Y){return $=+$,q>>>=0,Y||k(this,$,q,2,65535,0),this[q]=255&$,this[q+1]=$>>>8,q+2},a.prototype.writeUInt16BE=function($,q,Y){return $=+$,q>>>=0,Y||k(this,$,q,2,65535,0),this[q]=$>>>8,this[q+1]=255&$,q+2},a.prototype.writeUInt32LE=function($,q,Y){return $=+$,q>>>=0,Y||k(this,$,q,4,4294967295,0),this[q+3]=$>>>24,this[q+2]=$>>>16,this[q+1]=$>>>8,this[q]=255&$,q+4},a.prototype.writeUInt32BE=function($,q,Y){return $=+$,q>>>=0,Y||k(this,$,q,4,4294967295,0),this[q]=$>>>24,this[q+1]=$>>>16,this[q+2]=$>>>8,this[q+3]=255&$,q+4},a.prototype.writeIntLE=function($,q,Y,se){if($=+$,q>>>=0,!se){var oe=Math.pow(2,8*Y-1);k(this,$,q,Y,oe-1,-oe)}var ae=0,ce=1,we=0;for(this[q]=255&$;++ae<Y&&(ce*=256);)$<0&&we===0&&this[q+ae-1]!==0&&(we=1),this[q+ae]=($/ce>>0)-we&255;return q+Y},a.prototype.writeIntBE=function($,q,Y,se){if($=+$,q>>>=0,!se){var oe=Math.pow(2,8*Y-1);k(this,$,q,Y,oe-1,-oe)}var ae=Y-1,ce=1,we=0;for(this[q+ae]=255&$;--ae>=0&&(ce*=256);)$<0&&we===0&&this[q+ae+1]!==0&&(we=1),this[q+ae]=($/ce>>0)-we&255;return q+Y},a.prototype.writeInt8=function($,q,Y){return $=+$,q>>>=0,Y||k(this,$,q,1,127,-128),$<0&&($=255+$+1),this[q]=255&$,q+1},a.prototype.writeInt16LE=function($,q,Y){return $=+$,q>>>=0,Y||k(this,$,q,2,32767,-32768),this[q]=255&$,this[q+1]=$>>>8,q+2},a.prototype.writeInt16BE=function($,q,Y){return $=+$,q>>>=0,Y||k(this,$,q,2,32767,-32768),this[q]=$>>>8,this[q+1]=255&$,q+2},a.prototype.writeInt32LE=function($,q,Y){return $=+$,q>>>=0,Y||k(this,$,q,4,2147483647,-2147483648),this[q]=255&$,this[q+1]=$>>>8,this[q+2]=$>>>16,this[q+3]=$>>>24,q+4},a.prototype.writeInt32BE=function($,q,Y){return $=+$,q>>>=0,Y||k(this,$,q,4,2147483647,-2147483648),$<0&&($=4294967295+$+1),this[q]=$>>>24,this[q+1]=$>>>16,this[q+2]=$>>>8,this[q+3]=255&$,q+4},a.prototype.writeFloatLE=function($,q,Y){return E(this,$,q,!0,Y)},a.prototype.writeFloatBE=function($,q,Y){return E(this,$,q,!1,Y)},a.prototype.writeDoubleLE=function($,q,Y){return O(this,$,q,!0,Y)},a.prototype.writeDoubleBE=function($,q,Y){return O(this,$,q,!1,Y)},a.prototype.copy=function($,q,Y,se){if(!a.isBuffer($))throw new TypeError("argument should be a Buffer");if(Y||(Y=0),se||se===0||(se=this.length),q>=$.length&&(q=$.length),q||(q=0),se>0&&se<Y&&(se=Y),se===Y||$.length===0||this.length===0)return 0;if(q<0)throw new RangeError("targetStart out of bounds");if(Y<0||Y>=this.length)throw new RangeError("Index out of range");if(se<0)throw new RangeError("sourceEnd out of bounds");se>this.length&&(se=this.length),$.length-q<se-Y&&(se=$.length-q+Y);var oe=se-Y;if(this===$&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(q,Y,se);else if(this===$&&Y<q&&q<se)for(var ae=oe-1;ae>=0;--ae)$[ae+q]=this[ae+Y];else Uint8Array.prototype.set.call($,this.subarray(Y,se),q);return oe},a.prototype.fill=function($,q,Y,se){if(typeof $=="string"){if(typeof q=="string"?(se=q,q=0,Y=this.length):typeof Y=="string"&&(se=Y,Y=this.length),se!==void 0&&typeof se!="string")throw new TypeError("encoding must be a string");if(typeof se=="string"&&!a.isEncoding(se))throw new TypeError("Unknown encoding: "+se);if($.length===1){var oe=$.charCodeAt(0);(se==="utf8"&&oe<128||se==="latin1")&&($=oe)}}else typeof $=="number"&&($&=255);if(q<0||this.length<q||this.length<Y)throw new RangeError("Out of range index");if(Y<=q)return this;var ae;if(q>>>=0,Y=Y===void 0?this.length:Y>>>0,$||($=0),typeof $=="number")for(ae=q;ae<Y;++ae)this[ae]=$;else{var ce=a.isBuffer($)?$:a.from($,se),we=ce.length;if(we===0)throw new TypeError('The value "'+$+'" is invalid for argument "value"');for(ae=0;ae<Y-q;++ae)this[ae+q]=ce[ae%we]}return this};var L=/[^+/0-9A-Za-z-_]/g;function z($){return $<16?"0"+$.toString(16):$.toString(16)}function G($,q){var Y;q=q||1/0;for(var se=$.length,oe=null,ae=[],ce=0;ce<se;++ce){if((Y=$.charCodeAt(ce))>55295&&Y<57344){if(!oe){if(Y>56319){(q-=3)>-1&&ae.push(239,191,189);continue}if(ce+1===se){(q-=3)>-1&&ae.push(239,191,189);continue}oe=Y;continue}if(Y<56320){(q-=3)>-1&&ae.push(239,191,189),oe=Y;continue}Y=65536+(oe-55296<<10|Y-56320)}else oe&&(q-=3)>-1&&ae.push(239,191,189);if(oe=null,Y<128){if((q-=1)<0)break;ae.push(Y)}else if(Y<2048){if((q-=2)<0)break;ae.push(Y>>6|192,63&Y|128)}else if(Y<65536){if((q-=3)<0)break;ae.push(Y>>12|224,Y>>6&63|128,63&Y|128)}else{if(!(Y<1114112))throw new Error("Invalid code point");if((q-=4)<0)break;ae.push(Y>>18|240,Y>>12&63|128,Y>>6&63|128,63&Y|128)}}return ae}function Z($){return o.toByteArray(function(q){if((q=(q=q.split("=")[0]).trim().replace(L,"")).length<2)return"";for(;q.length%4!=0;)q+="=";return q}($))}function ee($,q,Y,se){for(var oe=0;oe<se&&!(oe+Y>=q.length||oe>=$.length);++oe)q[oe+Y]=$[oe];return oe}function W($,q){return $ instanceof q||$!=null&&$.constructor!=null&&$.constructor.name!=null&&$.constructor.name===q.name}function J($){return $!=$}}).call(this)}).call(this,t("buffer").Buffer)},{"base64-js":185,buffer:220,ieee754:439}],221:[function(t,s,l){var i=t("safe-buffer").Buffer,o=t("stream").Transform,d=t("string_decoder").StringDecoder;function c(a){o.call(this),this.hashMode=typeof a=="string",this.hashMode?this[a]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}t("inherits")(c,o),c.prototype.update=function(a,u,h){typeof a=="string"&&(a=i.from(a,u));var f=this._update(a);return this.hashMode?this:(h&&(f=this._toString(f,h)),f)},c.prototype.setAutoPadding=function(){},c.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},c.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},c.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},c.prototype._transform=function(a,u,h){var f;try{this.hashMode?this._update(a):this.push(this._update(a))}catch(m){f=m}finally{h(f)}},c.prototype._flush=function(a){var u;try{this.push(this.__final())}catch(h){u=h}a(u)},c.prototype._finalOrDigest=function(a){var u=this.__final()||i.alloc(0);return a&&(u=this._toString(u,a,!0)),u},c.prototype._toString=function(a,u,h){if(this._decoder||(this._decoder=new d(u),this._encoding=u),this._encoding!==u)throw new Error("can't switch encodings");var f=this._decoder.write(a);return h&&(f+=this._decoder.end()),f},s.exports=c},{inherits:440,"safe-buffer":494,stream:505,string_decoder:218}],222:[function(t,s,l){var i=t("../internals/is-callable"),o=t("../internals/try-to-string"),d=TypeError;s.exports=function(c){if(i(c))return c;throw new d(o(c)+" is not a function")}},{"../internals/is-callable":285,"../internals/try-to-string":349}],223:[function(t,s,l){var i=t("../internals/is-constructor"),o=t("../internals/try-to-string"),d=TypeError;s.exports=function(c){if(i(c))return c;throw new d(o(c)+" is not a constructor")}},{"../internals/is-constructor":286,"../internals/try-to-string":349}],224:[function(t,s,l){var i=t("../internals/is-callable"),o=String,d=TypeError;s.exports=function(c){if(typeof c=="object"||i(c))return c;throw new d("Can't set "+o(c)+" as a prototype")}},{"../internals/is-callable":285}],225:[function(t,s,l){var i=t("../internals/well-known-symbol"),o=t("../internals/object-create"),d=t("../internals/object-define-property").f,c=i("unscopables"),a=Array.prototype;a[c]===void 0&&d(a,c,{configurable:!0,value:o(null)}),s.exports=function(u){a[c][u]=!0}},{"../internals/object-create":306,"../internals/object-define-property":308,"../internals/well-known-symbol":357}],226:[function(t,s,l){var i=t("../internals/object-is-prototype-of"),o=TypeError;s.exports=function(d,c){if(i(c,d))return d;throw new o("Incorrect invocation")}},{"../internals/object-is-prototype-of":314}],227:[function(t,s,l){var i=t("../internals/is-object"),o=String,d=TypeError;s.exports=function(c){if(i(c))return c;throw new d(o(c)+" is not an object")}},{"../internals/is-object":289}],228:[function(t,s,l){var i=t("../internals/to-indexed-object"),o=t("../internals/to-absolute-index"),d=t("../internals/length-of-array-like"),c=function(a){return function(u,h,f){var m,b=i(u),y=d(b),g=o(f,y);if(a&&h!=h){for(;y>g;)if((m=b[g++])!=m)return!0}else for(;y>g;g++)if((a||g in b)&&b[g]===h)return a||g||0;return!a&&-1}};s.exports={includes:c(!0),indexOf:c(!1)}},{"../internals/length-of-array-like":299,"../internals/to-absolute-index":340,"../internals/to-indexed-object":341}],229:[function(t,s,l){var i=t("../internals/function-bind-context"),o=t("../internals/function-uncurry-this"),d=t("../internals/indexed-object"),c=t("../internals/to-object"),a=t("../internals/length-of-array-like"),u=t("../internals/array-species-create"),h=o([].push),f=function(m){var b=m===1,y=m===2,g=m===3,w=m===4,x=m===6,_=m===7,j=m===5||x;return function(R,M,I,F){for(var B,U,Q=c(R),K=d(Q),T=i(M,I),P=a(K),A=0,N=F||u,k=b?N(R,P):y||_?N(R,0):void 0;P>A;A++)if((j||A in K)&&(U=T(B=K[A],A,Q),m))if(b)k[A]=U;else if(U)switch(m){case 3:return!0;case 5:return B;case 6:return A;case 2:h(k,B)}else switch(m){case 4:return!1;case 7:h(k,B)}return x?-1:g||w?w:k}};s.exports={forEach:f(0),map:f(1),filter:f(2),some:f(3),every:f(4),find:f(5),findIndex:f(6),filterReject:f(7)}},{"../internals/array-species-create":233,"../internals/function-bind-context":262,"../internals/function-uncurry-this":268,"../internals/indexed-object":280,"../internals/length-of-array-like":299,"../internals/to-object":344}],230:[function(t,s,l){var i=t("../internals/to-absolute-index"),o=t("../internals/length-of-array-like"),d=t("../internals/create-property"),c=Array,a=Math.max;s.exports=function(u,h,f){for(var m=o(u),b=i(h,m),y=i(f===void 0?m:f,m),g=c(a(y-b,0)),w=0;b<y;b++,w++)d(g,w,u[b]);return g.length=w,g}},{"../internals/create-property":243,"../internals/length-of-array-like":299,"../internals/to-absolute-index":340}],231:[function(t,s,l){var i=t("../internals/function-uncurry-this");s.exports=i([].slice)},{"../internals/function-uncurry-this":268}],232:[function(t,s,l){var i=t("../internals/is-array"),o=t("../internals/is-constructor"),d=t("../internals/is-object"),c=t("../internals/well-known-symbol")("species"),a=Array;s.exports=function(u){var h;return i(u)&&(h=u.constructor,(o(h)&&(h===a||i(h.prototype))||d(h)&&(h=h[c])===null)&&(h=void 0)),h===void 0?a:h}},{"../internals/is-array":284,"../internals/is-constructor":286,"../internals/is-object":289,"../internals/well-known-symbol":357}],233:[function(t,s,l){var i=t("../internals/array-species-constructor");s.exports=function(o,d){return new(i(o))(d===0?0:d)}},{"../internals/array-species-constructor":232}],234:[function(t,s,l){var i=t("../internals/well-known-symbol")("iterator"),o=!1;try{var d=0,c={next:function(){return{done:!!d++}},return:function(){o=!0}};c[i]=function(){return this},Array.from(c,function(){throw 2})}catch{}s.exports=function(a,u){try{if(!u&&!o)return!1}catch{return!1}var h=!1;try{var f={};f[i]=function(){return{next:function(){return{done:h=!0}}}},a(f)}catch{}return h}},{"../internals/well-known-symbol":357}],235:[function(t,s,l){var i=t("../internals/function-uncurry-this"),o=i({}.toString),d=i("".slice);s.exports=function(c){return d(o(c),8,-1)}},{"../internals/function-uncurry-this":268}],236:[function(t,s,l){var i=t("../internals/to-string-tag-support"),o=t("../internals/is-callable"),d=t("../internals/classof-raw"),c=t("../internals/well-known-symbol")("toStringTag"),a=Object,u=d(function(){return arguments}())==="Arguments";s.exports=i?d:function(h){var f,m,b;return h===void 0?"Undefined":h===null?"Null":typeof(m=function(y,g){try{return y[g]}catch{}}(f=a(h),c))=="string"?m:u?d(f):(b=d(f))==="Object"&&o(f.callee)?"Arguments":b}},{"../internals/classof-raw":235,"../internals/is-callable":285,"../internals/to-string-tag-support":347,"../internals/well-known-symbol":357}],237:[function(t,s,l){var i=t("../internals/has-own-property"),o=t("../internals/own-keys"),d=t("../internals/object-get-own-property-descriptor"),c=t("../internals/object-define-property");s.exports=function(a,u,h){for(var f=o(u),m=c.f,b=d.f,y=0;y<f.length;y++){var g=f[y];i(a,g)||h&&i(h,g)||m(a,g,b(u,g))}}},{"../internals/has-own-property":275,"../internals/object-define-property":308,"../internals/object-get-own-property-descriptor":309,"../internals/own-keys":321}],238:[function(t,s,l){var i=t("../internals/well-known-symbol")("match");s.exports=function(o){var d=/./;try{"/./"[o](d)}catch{try{return d[i]=!1,"/./"[o](d)}catch{}}return!1}},{"../internals/well-known-symbol":357}],239:[function(t,s,l){var i=t("../internals/fails");s.exports=!i(function(){function o(){}return o.prototype.constructor=null,Object.getPrototypeOf(new o)!==o.prototype})},{"../internals/fails":260}],240:[function(t,s,l){s.exports=function(i,o){return{value:i,done:o}}},{}],241:[function(t,s,l){var i=t("../internals/descriptors"),o=t("../internals/object-define-property"),d=t("../internals/create-property-descriptor");s.exports=i?function(c,a,u){return o.f(c,a,d(1,u))}:function(c,a,u){return c[a]=u,c}},{"../internals/create-property-descriptor":242,"../internals/descriptors":247,"../internals/object-define-property":308}],242:[function(t,s,l){s.exports=function(i,o){return{enumerable:!(1&i),configurable:!(2&i),writable:!(4&i),value:o}}},{}],243:[function(t,s,l){var i=t("../internals/to-property-key"),o=t("../internals/object-define-property"),d=t("../internals/create-property-descriptor");s.exports=function(c,a,u){var h=i(a);h in c?o.f(c,h,d(0,u)):c[h]=u}},{"../internals/create-property-descriptor":242,"../internals/object-define-property":308,"../internals/to-property-key":346}],244:[function(t,s,l){var i=t("../internals/make-built-in"),o=t("../internals/object-define-property");s.exports=function(d,c,a){return a.get&&i(a.get,c,{getter:!0}),a.set&&i(a.set,c,{setter:!0}),o.f(d,c,a)}},{"../internals/make-built-in":300,"../internals/object-define-property":308}],245:[function(t,s,l){var i=t("../internals/is-callable"),o=t("../internals/object-define-property"),d=t("../internals/make-built-in"),c=t("../internals/define-global-property");s.exports=function(a,u,h,f){f||(f={});var m=f.enumerable,b=f.name!==void 0?f.name:u;if(i(h)&&d(h,b,f),f.global)m?a[u]=h:c(u,h);else{try{f.unsafe?a[u]&&(m=!0):delete a[u]}catch{}m?a[u]=h:o.f(a,u,{value:h,enumerable:!1,configurable:!f.nonConfigurable,writable:!f.nonWritable})}return a}},{"../internals/define-global-property":246,"../internals/is-callable":285,"../internals/make-built-in":300,"../internals/object-define-property":308}],246:[function(t,s,l){var i=t("../internals/global"),o=Object.defineProperty;s.exports=function(d,c){try{o(i,d,{value:c,configurable:!0,writable:!0})}catch{i[d]=c}return c}},{"../internals/global":274}],247:[function(t,s,l){var i=t("../internals/fails");s.exports=!i(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})},{"../internals/fails":260}],248:[function(t,s,l){var i=typeof document=="object"&&document.all,o=i===void 0&&i!==void 0;s.exports={all:i,IS_HTMLDDA:o}},{}],249:[function(t,s,l){var i=t("../internals/global"),o=t("../internals/is-object"),d=i.document,c=o(d)&&o(d.createElement);s.exports=function(a){return c?d.createElement(a):{}}},{"../internals/global":274,"../internals/is-object":289}],250:[function(t,s,l){var i=t("../internals/engine-is-deno"),o=t("../internals/engine-is-node");s.exports=!i&&!o&&typeof window=="object"&&typeof document=="object"},{"../internals/engine-is-deno":251,"../internals/engine-is-node":254}],251:[function(t,s,l){s.exports=typeof Deno=="object"&&Deno&&typeof Deno.version=="object"},{}],252:[function(t,s,l){var i=t("../internals/engine-user-agent");s.exports=/ipad|iphone|ipod/i.test(i)&&typeof Pebble<"u"},{"../internals/engine-user-agent":256}],253:[function(t,s,l){var i=t("../internals/engine-user-agent");s.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(i)},{"../internals/engine-user-agent":256}],254:[function(t,s,l){var i=t("../internals/global"),o=t("../internals/classof-raw");s.exports=o(i.process)==="process"},{"../internals/classof-raw":235,"../internals/global":274}],255:[function(t,s,l){var i=t("../internals/engine-user-agent");s.exports=/web0s(?!.*chrome)/i.test(i)},{"../internals/engine-user-agent":256}],256:[function(t,s,l){s.exports=typeof navigator<"u"&&String(navigator.userAgent)||""},{}],257:[function(t,s,l){var i,o,d=t("../internals/global"),c=t("../internals/engine-user-agent"),a=d.process,u=d.Deno,h=a&&a.versions||u&&u.version,f=h&&h.v8;f&&(o=(i=f.split("."))[0]>0&&i[0]<4?1:+(i[0]+i[1])),!o&&c&&(!(i=c.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=c.match(/Chrome\/(\d+)/))&&(o=+i[1]),s.exports=o},{"../internals/engine-user-agent":256,"../internals/global":274}],258:[function(t,s,l){s.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],259:[function(t,s,l){var i=t("../internals/global"),o=t("../internals/object-get-own-property-descriptor").f,d=t("../internals/create-non-enumerable-property"),c=t("../internals/define-built-in"),a=t("../internals/define-global-property"),u=t("../internals/copy-constructor-properties"),h=t("../internals/is-forced");s.exports=function(f,m){var b,y,g,w,x,_=f.target,j=f.global,R=f.stat;if(b=j?i:R?i[_]||a(_,{}):(i[_]||{}).prototype)for(y in m){if(w=m[y],g=f.dontCallGetSet?(x=o(b,y))&&x.value:b[y],!h(j?y:_+(R?".":"#")+y,f.forced)&&g!==void 0){if(typeof w==typeof g)continue;u(w,g)}(f.sham||g&&g.sham)&&d(w,"sham",!0),c(b,y,w,f)}}},{"../internals/copy-constructor-properties":237,"../internals/create-non-enumerable-property":241,"../internals/define-built-in":245,"../internals/define-global-property":246,"../internals/global":274,"../internals/is-forced":287,"../internals/object-get-own-property-descriptor":309}],260:[function(t,s,l){s.exports=function(i){try{return!!i()}catch{return!0}}},{}],261:[function(t,s,l){var i=t("../internals/function-bind-native"),o=Function.prototype,d=o.apply,c=o.call;s.exports=typeof Reflect=="object"&&Reflect.apply||(i?c.bind(d):function(){return c.apply(d,arguments)})},{"../internals/function-bind-native":263}],262:[function(t,s,l){var i=t("../internals/function-uncurry-this-clause"),o=t("../internals/a-callable"),d=t("../internals/function-bind-native"),c=i(i.bind);s.exports=function(a,u){return o(a),u===void 0?a:d?c(a,u):function(){return a.apply(u,arguments)}}},{"../internals/a-callable":222,"../internals/function-bind-native":263,"../internals/function-uncurry-this-clause":267}],263:[function(t,s,l){var i=t("../internals/fails");s.exports=!i(function(){var o=(function(){}).bind();return typeof o!="function"||o.hasOwnProperty("prototype")})},{"../internals/fails":260}],264:[function(t,s,l){var i=t("../internals/function-bind-native"),o=Function.prototype.call;s.exports=i?o.bind(o):function(){return o.apply(o,arguments)}},{"../internals/function-bind-native":263}],265:[function(t,s,l){var i=t("../internals/descriptors"),o=t("../internals/has-own-property"),d=Function.prototype,c=i&&Object.getOwnPropertyDescriptor,a=o(d,"name"),u=a&&(function(){}).name==="something",h=a&&(!i||i&&c(d,"name").configurable);s.exports={EXISTS:a,PROPER:u,CONFIGURABLE:h}},{"../internals/descriptors":247,"../internals/has-own-property":275}],266:[function(t,s,l){var i=t("../internals/function-uncurry-this"),o=t("../internals/a-callable");s.exports=function(d,c,a){try{return i(o(Object.getOwnPropertyDescriptor(d,c)[a]))}catch{}}},{"../internals/a-callable":222,"../internals/function-uncurry-this":268}],267:[function(t,s,l){var i=t("../internals/classof-raw"),o=t("../internals/function-uncurry-this");s.exports=function(d){if(i(d)==="Function")return o(d)}},{"../internals/classof-raw":235,"../internals/function-uncurry-this":268}],268:[function(t,s,l){var i=t("../internals/function-bind-native"),o=Function.prototype,d=o.call,c=i&&o.bind.bind(d,d);s.exports=i?c:function(a){return function(){return d.apply(a,arguments)}}},{"../internals/function-bind-native":263}],269:[function(t,s,l){var i=t("../internals/global"),o=t("../internals/is-callable"),d=function(c){return o(c)?c:void 0};s.exports=function(c,a){return arguments.length<2?d(i[c]):i[c]&&i[c][a]}},{"../internals/global":274,"../internals/is-callable":285}],270:[function(t,s,l){var i=t("../internals/classof"),o=t("../internals/get-method"),d=t("../internals/is-null-or-undefined"),c=t("../internals/iterators"),a=t("../internals/well-known-symbol")("iterator");s.exports=function(u){if(!d(u))return o(u,a)||o(u,"@@iterator")||c[i(u)]}},{"../internals/classof":236,"../internals/get-method":273,"../internals/is-null-or-undefined":288,"../internals/iterators":298,"../internals/well-known-symbol":357}],271:[function(t,s,l){var i=t("../internals/function-call"),o=t("../internals/a-callable"),d=t("../internals/an-object"),c=t("../internals/try-to-string"),a=t("../internals/get-iterator-method"),u=TypeError;s.exports=function(h,f){var m=arguments.length<2?a(h):f;if(o(m))return d(i(m,h));throw new u(c(h)+" is not iterable")}},{"../internals/a-callable":222,"../internals/an-object":227,"../internals/function-call":264,"../internals/get-iterator-method":270,"../internals/try-to-string":349}],272:[function(t,s,l){var i=t("../internals/function-uncurry-this"),o=t("../internals/is-array"),d=t("../internals/is-callable"),c=t("../internals/classof-raw"),a=t("../internals/to-string"),u=i([].push);s.exports=function(h){if(d(h))return h;if(o(h)){for(var f=h.length,m=[],b=0;b<f;b++){var y=h[b];typeof y=="string"?u(m,y):typeof y!="number"&&c(y)!=="Number"&&c(y)!=="String"||u(m,a(y))}var g=m.length,w=!0;return function(x,_){if(w)return w=!1,_;if(o(this))return _;for(var j=0;j<g;j++)if(m[j]===x)return _}}}},{"../internals/classof-raw":235,"../internals/function-uncurry-this":268,"../internals/is-array":284,"../internals/is-callable":285,"../internals/to-string":348}],273:[function(t,s,l){var i=t("../internals/a-callable"),o=t("../internals/is-null-or-undefined");s.exports=function(d,c){var a=d[c];return o(a)?void 0:i(a)}},{"../internals/a-callable":222,"../internals/is-null-or-undefined":288}],274:[function(t,s,l){(function(i){(function(){var o=function(d){return d&&d.Math===Math&&d};s.exports=o(typeof globalThis=="object"&&globalThis)||o(typeof window=="object"&&window)||o(typeof self=="object"&&self)||o(typeof i=="object"&&i)||function(){return this}()||this||Function("return this")()}).call(this)}).call(this,typeof mr<"u"?mr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],275:[function(t,s,l){var i=t("../internals/function-uncurry-this"),o=t("../internals/to-object"),d=i({}.hasOwnProperty);s.exports=Object.hasOwn||function(c,a){return d(o(c),a)}},{"../internals/function-uncurry-this":268,"../internals/to-object":344}],276:[function(t,s,l){s.exports={}},{}],277:[function(t,s,l){s.exports=function(i,o){try{arguments.length===1?console.error(i):console.error(i,o)}catch{}}},{}],278:[function(t,s,l){var i=t("../internals/get-built-in");s.exports=i("document","documentElement")},{"../internals/get-built-in":269}],279:[function(t,s,l){var i=t("../internals/descriptors"),o=t("../internals/fails"),d=t("../internals/document-create-element");s.exports=!i&&!o(function(){return Object.defineProperty(d("div"),"a",{get:function(){return 7}}).a!==7})},{"../internals/descriptors":247,"../internals/document-create-element":249,"../internals/fails":260}],280:[function(t,s,l){var i=t("../internals/function-uncurry-this"),o=t("../internals/fails"),d=t("../internals/classof-raw"),c=Object,a=i("".split);s.exports=o(function(){return!c("z").propertyIsEnumerable(0)})?function(u){return d(u)==="String"?a(u,""):c(u)}:c},{"../internals/classof-raw":235,"../internals/fails":260,"../internals/function-uncurry-this":268}],281:[function(t,s,l){var i=t("../internals/function-uncurry-this"),o=t("../internals/is-callable"),d=t("../internals/shared-store"),c=i(Function.toString);o(d.inspectSource)||(d.inspectSource=function(a){return c(a)}),s.exports=d.inspectSource},{"../internals/function-uncurry-this":268,"../internals/is-callable":285,"../internals/shared-store":333}],282:[function(t,s,l){var i,o,d,c=t("../internals/weak-map-basic-detection"),a=t("../internals/global"),u=t("../internals/is-object"),h=t("../internals/create-non-enumerable-property"),f=t("../internals/has-own-property"),m=t("../internals/shared-store"),b=t("../internals/shared-key"),y=t("../internals/hidden-keys"),g=a.TypeError,w=a.WeakMap;if(c||m.state){var x=m.state||(m.state=new w);x.get=x.get,x.has=x.has,x.set=x.set,i=function(j,R){if(x.has(j))throw new g("Object already initialized");return R.facade=j,x.set(j,R),R},o=function(j){return x.get(j)||{}},d=function(j){return x.has(j)}}else{var _=b("state");y[_]=!0,i=function(j,R){if(f(j,_))throw new g("Object already initialized");return R.facade=j,h(j,_,R),R},o=function(j){return f(j,_)?j[_]:{}},d=function(j){return f(j,_)}}s.exports={set:i,get:o,has:d,enforce:function(j){return d(j)?o(j):i(j,{})},getterFor:function(j){return function(R){var M;if(!u(R)||(M=o(R)).type!==j)throw new g("Incompatible receiver, "+j+" required");return M}}}},{"../internals/create-non-enumerable-property":241,"../internals/global":274,"../internals/has-own-property":275,"../internals/hidden-keys":276,"../internals/is-object":289,"../internals/shared-key":332,"../internals/shared-store":333,"../internals/weak-map-basic-detection":354}],283:[function(t,s,l){var i=t("../internals/well-known-symbol"),o=t("../internals/iterators"),d=i("iterator"),c=Array.prototype;s.exports=function(a){return a!==void 0&&(o.Array===a||c[d]===a)}},{"../internals/iterators":298,"../internals/well-known-symbol":357}],284:[function(t,s,l){var i=t("../internals/classof-raw");s.exports=Array.isArray||function(o){return i(o)==="Array"}},{"../internals/classof-raw":235}],285:[function(t,s,l){var i=t("../internals/document-all"),o=i.all;s.exports=i.IS_HTMLDDA?function(d){return typeof d=="function"||d===o}:function(d){return typeof d=="function"}},{"../internals/document-all":248}],286:[function(t,s,l){var i=t("../internals/function-uncurry-this"),o=t("../internals/fails"),d=t("../internals/is-callable"),c=t("../internals/classof"),a=t("../internals/get-built-in"),u=t("../internals/inspect-source"),h=function(){},f=[],m=a("Reflect","construct"),b=/^\s*(?:class|function)\b/,y=i(b.exec),g=!b.test(h),w=function(_){if(!d(_))return!1;try{return m(h,f,_),!0}catch{return!1}},x=function(_){if(!d(_))return!1;switch(c(_)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return g||!!y(b,u(_))}catch{return!0}};x.sham=!0,s.exports=!m||o(function(){var _;return w(w.call)||!w(Object)||!w(function(){_=!0})||_})?x:w},{"../internals/classof":236,"../internals/fails":260,"../internals/function-uncurry-this":268,"../internals/get-built-in":269,"../internals/inspect-source":281,"../internals/is-callable":285}],287:[function(t,s,l){var i=t("../internals/fails"),o=t("../internals/is-callable"),d=/#|\.prototype\./,c=function(m,b){var y=u[a(m)];return y===f||y!==h&&(o(b)?i(b):!!b)},a=c.normalize=function(m){return String(m).replace(d,".").toLowerCase()},u=c.data={},h=c.NATIVE="N",f=c.POLYFILL="P";s.exports=c},{"../internals/fails":260,"../internals/is-callable":285}],288:[function(t,s,l){s.exports=function(i){return i==null}},{}],289:[function(t,s,l){var i=t("../internals/is-callable"),o=t("../internals/document-all"),d=o.all;s.exports=o.IS_HTMLDDA?function(c){return typeof c=="object"?c!==null:i(c)||c===d}:function(c){return typeof c=="object"?c!==null:i(c)}},{"../internals/document-all":248,"../internals/is-callable":285}],290:[function(t,s,l){s.exports=!1},{}],291:[function(t,s,l){var i=t("../internals/is-object"),o=t("../internals/classof-raw"),d=t("../internals/well-known-symbol")("match");s.exports=function(c){var a;return i(c)&&((a=c[d])!==void 0?!!a:o(c)==="RegExp")}},{"../internals/classof-raw":235,"../internals/is-object":289,"../internals/well-known-symbol":357}],292:[function(t,s,l){var i=t("../internals/get-built-in"),o=t("../internals/is-callable"),d=t("../internals/object-is-prototype-of"),c=t("../internals/use-symbol-as-uid"),a=Object;s.exports=c?function(u){return typeof u=="symbol"}:function(u){var h=i("Symbol");return o(h)&&d(h.prototype,a(u))}},{"../internals/get-built-in":269,"../internals/is-callable":285,"../internals/object-is-prototype-of":314,"../internals/use-symbol-as-uid":351}],293:[function(t,s,l){var i=t("../internals/function-bind-context"),o=t("../internals/function-call"),d=t("../internals/an-object"),c=t("../internals/try-to-string"),a=t("../internals/is-array-iterator-method"),u=t("../internals/length-of-array-like"),h=t("../internals/object-is-prototype-of"),f=t("../internals/get-iterator"),m=t("../internals/get-iterator-method"),b=t("../internals/iterator-close"),y=TypeError,g=function(x,_){this.stopped=x,this.result=_},w=g.prototype;s.exports=function(x,_,j){var R,M,I,F,B,U,Q,K=j&&j.that,T=!(!j||!j.AS_ENTRIES),P=!(!j||!j.IS_RECORD),A=!(!j||!j.IS_ITERATOR),N=!(!j||!j.INTERRUPTED),k=i(_,K),S=function(O){return R&&b(R,"normal",O),new g(!0,O)},E=function(O){return T?(d(O),N?k(O[0],O[1],S):k(O[0],O[1])):N?k(O,S):k(O)};if(P)R=x.iterator;else if(A)R=x;else{if(!(M=m(x)))throw new y(c(x)+" is not iterable");if(a(M)){for(I=0,F=u(x);F>I;I++)if((B=E(x[I]))&&h(w,B))return B;return new g(!1)}R=f(x,M)}for(U=P?x.next:R.next;!(Q=o(U,R)).done;){try{B=E(Q.value)}catch(O){b(R,"throw",O)}if(typeof B=="object"&&B&&h(w,B))return B}return new g(!1)}},{"../internals/an-object":227,"../internals/function-bind-context":262,"../internals/function-call":264,"../internals/get-iterator":271,"../internals/get-iterator-method":270,"../internals/is-array-iterator-method":283,"../internals/iterator-close":294,"../internals/length-of-array-like":299,"../internals/object-is-prototype-of":314,"../internals/try-to-string":349}],294:[function(t,s,l){var i=t("../internals/function-call"),o=t("../internals/an-object"),d=t("../internals/get-method");s.exports=function(c,a,u){var h,f;o(c);try{if(!(h=d(c,"return"))){if(a==="throw")throw u;return u}h=i(h,c)}catch(m){f=!0,h=m}if(a==="throw")throw u;if(f)throw h;return o(h),u}},{"../internals/an-object":227,"../internals/function-call":264,"../internals/get-method":273}],295:[function(t,s,l){var i=t("../internals/iterators-core").IteratorPrototype,o=t("../internals/object-create"),d=t("../internals/create-property-descriptor"),c=t("../internals/set-to-string-tag"),a=t("../internals/iterators"),u=function(){return this};s.exports=function(h,f,m,b){var y=f+" Iterator";return h.prototype=o(i,{next:d(+!b,m)}),c(h,y,!1,!0),a[y]=u,h}},{"../internals/create-property-descriptor":242,"../internals/iterators":298,"../internals/iterators-core":297,"../internals/object-create":306,"../internals/set-to-string-tag":331}],296:[function(t,s,l){var i=t("../internals/export"),o=t("../internals/function-call"),d=t("../internals/is-pure"),c=t("../internals/function-name"),a=t("../internals/is-callable"),u=t("../internals/iterator-create-constructor"),h=t("../internals/object-get-prototype-of"),f=t("../internals/object-set-prototype-of"),m=t("../internals/set-to-string-tag"),b=t("../internals/create-non-enumerable-property"),y=t("../internals/define-built-in"),g=t("../internals/well-known-symbol"),w=t("../internals/iterators"),x=t("../internals/iterators-core"),_=c.PROPER,j=c.CONFIGURABLE,R=x.IteratorPrototype,M=x.BUGGY_SAFARI_ITERATORS,I=g("iterator"),F=function(){return this};s.exports=function(B,U,Q,K,T,P,A){u(Q,U,K);var N,k,S,E=function(W){if(W===T&&Z)return Z;if(!M&&W&&W in z)return z[W];switch(W){case"keys":case"values":case"entries":return function(){return new Q(this,W)}}return function(){return new Q(this)}},O=U+" Iterator",L=!1,z=B.prototype,G=z[I]||z["@@iterator"]||T&&z[T],Z=!M&&G||E(T),ee=U==="Array"&&z.entries||G;if(ee&&(N=h(ee.call(new B)))!==Object.prototype&&N.next&&(d||h(N)===R||(f?f(N,R):a(N[I])||y(N,I,F)),m(N,O,!0,!0),d&&(w[O]=F)),_&&T==="values"&&G&&G.name!=="values"&&(!d&&j?b(z,"name","values"):(L=!0,Z=function(){return o(G,this)})),T)if(k={values:E("values"),keys:P?Z:E("keys"),entries:E("entries")},A)for(S in k)(M||L||!(S in z))&&y(z,S,k[S]);else i({target:U,proto:!0,forced:M||L},k);return d&&!A||z[I]===Z||y(z,I,Z,{name:T}),w[U]=Z,k}},{"../internals/create-non-enumerable-property":241,"../internals/define-built-in":245,"../internals/export":259,"../internals/function-call":264,"../internals/function-name":265,"../internals/is-callable":285,"../internals/is-pure":290,"../internals/iterator-create-constructor":295,"../internals/iterators":298,"../internals/iterators-core":297,"../internals/object-get-prototype-of":313,"../internals/object-set-prototype-of":318,"../internals/set-to-string-tag":331,"../internals/well-known-symbol":357}],297:[function(t,s,l){var i,o,d,c=t("../internals/fails"),a=t("../internals/is-callable"),u=t("../internals/is-object"),h=t("../internals/object-create"),f=t("../internals/object-get-prototype-of"),m=t("../internals/define-built-in"),b=t("../internals/well-known-symbol"),y=t("../internals/is-pure"),g=b("iterator"),w=!1;[].keys&&("next"in(d=[].keys())?(o=f(f(d)))!==Object.prototype&&(i=o):w=!0),!u(i)||c(function(){var x={};return i[g].call(x)!==x})?i={}:y&&(i=h(i)),a(i[g])||m(i,g,function(){return this}),s.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:w}},{"../internals/define-built-in":245,"../internals/fails":260,"../internals/is-callable":285,"../internals/is-object":289,"../internals/is-pure":290,"../internals/object-create":306,"../internals/object-get-prototype-of":313,"../internals/well-known-symbol":357}],298:[function(t,s,l){arguments[4][276][0].apply(l,arguments)},{dup:276}],299:[function(t,s,l){var i=t("../internals/to-length");s.exports=function(o){return i(o.length)}},{"../internals/to-length":343}],300:[function(t,s,l){var i=t("../internals/function-uncurry-this"),o=t("../internals/fails"),d=t("../internals/is-callable"),c=t("../internals/has-own-property"),a=t("../internals/descriptors"),u=t("../internals/function-name").CONFIGURABLE,h=t("../internals/inspect-source"),f=t("../internals/internal-state"),m=f.enforce,b=f.get,y=String,g=Object.defineProperty,w=i("".slice),x=i("".replace),_=i([].join),j=a&&!o(function(){return g(function(){},"length",{value:8}).length!==8}),R=String(String).split("String"),M=s.exports=function(I,F,B){w(y(F),0,7)==="Symbol("&&(F="["+x(y(F),/^Symbol\(([^)]*)\)/,"$1")+"]"),B&&B.getter&&(F="get "+F),B&&B.setter&&(F="set "+F),(!c(I,"name")||u&&I.name!==F)&&(a?g(I,"name",{value:F,configurable:!0}):I.name=F),j&&B&&c(B,"arity")&&I.length!==B.arity&&g(I,"length",{value:B.arity});try{B&&c(B,"constructor")&&B.constructor?a&&g(I,"prototype",{writable:!1}):I.prototype&&(I.prototype=void 0)}catch{}var U=m(I);return c(U,"source")||(U.source=_(R,typeof F=="string"?F:"")),I};Function.prototype.toString=M(function(){return d(this)&&b(this).source||h(this)},"toString")},{"../internals/descriptors":247,"../internals/fails":260,"../internals/function-name":265,"../internals/function-uncurry-this":268,"../internals/has-own-property":275,"../internals/inspect-source":281,"../internals/internal-state":282,"../internals/is-callable":285}],301:[function(t,s,l){var i=Math.ceil,o=Math.floor;s.exports=Math.trunc||function(d){var c=+d;return(c>0?o:i)(c)}},{}],302:[function(t,s,l){var i,o,d,c,a,u=t("../internals/global"),h=t("../internals/function-bind-context"),f=t("../internals/object-get-own-property-descriptor").f,m=t("../internals/task").set,b=t("../internals/queue"),y=t("../internals/engine-is-ios"),g=t("../internals/engine-is-ios-pebble"),w=t("../internals/engine-is-webos-webkit"),x=t("../internals/engine-is-node"),_=u.MutationObserver||u.WebKitMutationObserver,j=u.document,R=u.process,M=u.Promise,I=f(u,"queueMicrotask"),F=I&&I.value;if(!F){var B=new b,U=function(){var Q,K;for(x&&(Q=R.domain)&&Q.exit();K=B.get();)try{K()}catch(T){throw B.head&&i(),T}Q&&Q.enter()};y||x||w||!_||!j?!g&&M&&M.resolve?((c=M.resolve(void 0)).constructor=M,a=h(c.then,c),i=function(){a(U)}):x?i=function(){R.nextTick(U)}:(m=h(m,u),i=function(){m(U)}):(o=!0,d=j.createTextNode(""),new _(U).observe(d,{characterData:!0}),i=function(){d.data=o=!o}),F=function(Q){B.head||i(),B.add(Q)}}s.exports=F},{"../internals/engine-is-ios":253,"../internals/engine-is-ios-pebble":252,"../internals/engine-is-node":254,"../internals/engine-is-webos-webkit":255,"../internals/function-bind-context":262,"../internals/global":274,"../internals/object-get-own-property-descriptor":309,"../internals/queue":328,"../internals/task":339}],303:[function(t,s,l){var i=t("../internals/a-callable"),o=TypeError,d=function(c){var a,u;this.promise=new c(function(h,f){if(a!==void 0||u!==void 0)throw new o("Bad Promise constructor");a=h,u=f}),this.resolve=i(a),this.reject=i(u)};s.exports.f=function(c){return new d(c)}},{"../internals/a-callable":222}],304:[function(t,s,l){var i=t("../internals/is-regexp"),o=TypeError;s.exports=function(d){if(i(d))throw new o("The method doesn't accept regular expressions");return d}},{"../internals/is-regexp":291}],305:[function(t,s,l){var i=t("../internals/descriptors"),o=t("../internals/function-uncurry-this"),d=t("../internals/function-call"),c=t("../internals/fails"),a=t("../internals/object-keys"),u=t("../internals/object-get-own-property-symbols"),h=t("../internals/object-property-is-enumerable"),f=t("../internals/to-object"),m=t("../internals/indexed-object"),b=Object.assign,y=Object.defineProperty,g=o([].concat);s.exports=!b||c(function(){if(i&&b({b:1},b(y({},"a",{enumerable:!0,get:function(){y(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var w={},x={},_=Symbol("assign detection");return w[_]=7,"abcdefghijklmnopqrst".split("").forEach(function(j){x[j]=j}),b({},w)[_]!==7||a(b({},x)).join("")!=="abcdefghijklmnopqrst"})?function(w,x){for(var _=f(w),j=arguments.length,R=1,M=u.f,I=h.f;j>R;)for(var F,B=m(arguments[R++]),U=M?g(a(B),M(B)):a(B),Q=U.length,K=0;Q>K;)F=U[K++],i&&!d(I,B,F)||(_[F]=B[F]);return _}:b},{"../internals/descriptors":247,"../internals/fails":260,"../internals/function-call":264,"../internals/function-uncurry-this":268,"../internals/indexed-object":280,"../internals/object-get-own-property-symbols":312,"../internals/object-keys":316,"../internals/object-property-is-enumerable":317,"../internals/to-object":344}],306:[function(t,s,l){var i,o=t("../internals/an-object"),d=t("../internals/object-define-properties"),c=t("../internals/enum-bug-keys"),a=t("../internals/hidden-keys"),u=t("../internals/html"),h=t("../internals/document-create-element"),f=t("../internals/shared-key"),m=f("IE_PROTO"),b=function(){},y=function(x){return"<script>"+x+"<\/script>"},g=function(x){x.write(y("")),x.close();var _=x.parentWindow.Object;return x=null,_},w=function(){try{i=new ActiveXObject("htmlfile")}catch{}var x,_;w=typeof document<"u"?document.domain&&i?g(i):((_=h("iframe")).style.display="none",u.appendChild(_),_.src="javascript:",(x=_.contentWindow.document).open(),x.write(y("document.F=Object")),x.close(),x.F):g(i);for(var j=c.length;j--;)delete w.prototype[c[j]];return w()};a[m]=!0,s.exports=Object.create||function(x,_){var j;return x!==null?(b.prototype=o(x),j=new b,b.prototype=null,j[m]=x):j=w(),_===void 0?j:d.f(j,_)}},{"../internals/an-object":227,"../internals/document-create-element":249,"../internals/enum-bug-keys":258,"../internals/hidden-keys":276,"../internals/html":278,"../internals/object-define-properties":307,"../internals/shared-key":332}],307:[function(t,s,l){var i=t("../internals/descriptors"),o=t("../internals/v8-prototype-define-bug"),d=t("../internals/object-define-property"),c=t("../internals/an-object"),a=t("../internals/to-indexed-object"),u=t("../internals/object-keys");l.f=i&&!o?Object.defineProperties:function(h,f){c(h);for(var m,b=a(f),y=u(f),g=y.length,w=0;g>w;)d.f(h,m=y[w++],b[m]);return h}},{"../internals/an-object":227,"../internals/descriptors":247,"../internals/object-define-property":308,"../internals/object-keys":316,"../internals/to-indexed-object":341,"../internals/v8-prototype-define-bug":352}],308:[function(t,s,l){var i=t("../internals/descriptors"),o=t("../internals/ie8-dom-define"),d=t("../internals/v8-prototype-define-bug"),c=t("../internals/an-object"),a=t("../internals/to-property-key"),u=TypeError,h=Object.defineProperty,f=Object.getOwnPropertyDescriptor;l.f=i?d?function(m,b,y){if(c(m),b=a(b),c(y),typeof m=="function"&&b==="prototype"&&"value"in y&&"writable"in y&&!y.writable){var g=f(m,b);g&&g.writable&&(m[b]=y.value,y={configurable:"configurable"in y?y.configurable:g.configurable,enumerable:"enumerable"in y?y.enumerable:g.enumerable,writable:!1})}return h(m,b,y)}:h:function(m,b,y){if(c(m),b=a(b),c(y),o)try{return h(m,b,y)}catch{}if("get"in y||"set"in y)throw new u("Accessors not supported");return"value"in y&&(m[b]=y.value),m}},{"../internals/an-object":227,"../internals/descriptors":247,"../internals/ie8-dom-define":279,"../internals/to-property-key":346,"../internals/v8-prototype-define-bug":352}],309:[function(t,s,l){var i=t("../internals/descriptors"),o=t("../internals/function-call"),d=t("../internals/object-property-is-enumerable"),c=t("../internals/create-property-descriptor"),a=t("../internals/to-indexed-object"),u=t("../internals/to-property-key"),h=t("../internals/has-own-property"),f=t("../internals/ie8-dom-define"),m=Object.getOwnPropertyDescriptor;l.f=i?m:function(b,y){if(b=a(b),y=u(y),f)try{return m(b,y)}catch{}if(h(b,y))return c(!o(d.f,b,y),b[y])}},{"../internals/create-property-descriptor":242,"../internals/descriptors":247,"../internals/function-call":264,"../internals/has-own-property":275,"../internals/ie8-dom-define":279,"../internals/object-property-is-enumerable":317,"../internals/to-indexed-object":341,"../internals/to-property-key":346}],310:[function(t,s,l){var i=t("../internals/classof-raw"),o=t("../internals/to-indexed-object"),d=t("../internals/object-get-own-property-names").f,c=t("../internals/array-slice-simple"),a=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];s.exports.f=function(u){return a&&i(u)==="Window"?function(h){try{return d(h)}catch{return c(a)}}(u):d(o(u))}},{"../internals/array-slice-simple":230,"../internals/classof-raw":235,"../internals/object-get-own-property-names":311,"../internals/to-indexed-object":341}],311:[function(t,s,l){var i=t("../internals/object-keys-internal"),o=t("../internals/enum-bug-keys").concat("length","prototype");l.f=Object.getOwnPropertyNames||function(d){return i(d,o)}},{"../internals/enum-bug-keys":258,"../internals/object-keys-internal":315}],312:[function(t,s,l){l.f=Object.getOwnPropertySymbols},{}],313:[function(t,s,l){var i=t("../internals/has-own-property"),o=t("../internals/is-callable"),d=t("../internals/to-object"),c=t("../internals/shared-key"),a=t("../internals/correct-prototype-getter"),u=c("IE_PROTO"),h=Object,f=h.prototype;s.exports=a?h.getPrototypeOf:function(m){var b=d(m);if(i(b,u))return b[u];var y=b.constructor;return o(y)&&b instanceof y?y.prototype:b instanceof h?f:null}},{"../internals/correct-prototype-getter":239,"../internals/has-own-property":275,"../internals/is-callable":285,"../internals/shared-key":332,"../internals/to-object":344}],314:[function(t,s,l){var i=t("../internals/function-uncurry-this");s.exports=i({}.isPrototypeOf)},{"../internals/function-uncurry-this":268}],315:[function(t,s,l){var i=t("../internals/function-uncurry-this"),o=t("../internals/has-own-property"),d=t("../internals/to-indexed-object"),c=t("../internals/array-includes").indexOf,a=t("../internals/hidden-keys"),u=i([].push);s.exports=function(h,f){var m,b=d(h),y=0,g=[];for(m in b)!o(a,m)&&o(b,m)&&u(g,m);for(;f.length>y;)o(b,m=f[y++])&&(~c(g,m)||u(g,m));return g}},{"../internals/array-includes":228,"../internals/function-uncurry-this":268,"../internals/has-own-property":275,"../internals/hidden-keys":276,"../internals/to-indexed-object":341}],316:[function(t,s,l){var i=t("../internals/object-keys-internal"),o=t("../internals/enum-bug-keys");s.exports=Object.keys||function(d){return i(d,o)}},{"../internals/enum-bug-keys":258,"../internals/object-keys-internal":315}],317:[function(t,s,l){var i={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,d=o&&!i.call({1:2},1);l.f=d?function(c){var a=o(this,c);return!!a&&a.enumerable}:i},{}],318:[function(t,s,l){var i=t("../internals/function-uncurry-this-accessor"),o=t("../internals/an-object"),d=t("../internals/a-possible-prototype");s.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var c,a=!1,u={};try{(c=i(Object.prototype,"__proto__","set"))(u,[]),a=u instanceof Array}catch{}return function(h,f){return o(h),d(f),a?c(h,f):h.__proto__=f,h}}():void 0)},{"../internals/a-possible-prototype":224,"../internals/an-object":227,"../internals/function-uncurry-this-accessor":266}],319:[function(t,s,l){var i=t("../internals/descriptors"),o=t("../internals/fails"),d=t("../internals/function-uncurry-this"),c=t("../internals/object-get-prototype-of"),a=t("../internals/object-keys"),u=t("../internals/to-indexed-object"),h=d(t("../internals/object-property-is-enumerable").f),f=d([].push),m=i&&o(function(){var y=Object.create(null);return y[2]=2,!h(y,2)}),b=function(y){return function(g){for(var w,x=u(g),_=a(x),j=m&&c(x)===null,R=_.length,M=0,I=[];R>M;)w=_[M++],i&&!(j?w in x:h(x,w))||f(I,y?[w,x[w]]:x[w]);return I}};s.exports={entries:b(!0),values:b(!1)}},{"../internals/descriptors":247,"../internals/fails":260,"../internals/function-uncurry-this":268,"../internals/object-get-prototype-of":313,"../internals/object-keys":316,"../internals/object-property-is-enumerable":317,"../internals/to-indexed-object":341}],320:[function(t,s,l){var i=t("../internals/function-call"),o=t("../internals/is-callable"),d=t("../internals/is-object"),c=TypeError;s.exports=function(a,u){var h,f;if(u==="string"&&o(h=a.toString)&&!d(f=i(h,a))||o(h=a.valueOf)&&!d(f=i(h,a))||u!=="string"&&o(h=a.toString)&&!d(f=i(h,a)))return f;throw new c("Can't convert object to primitive value")}},{"../internals/function-call":264,"../internals/is-callable":285,"../internals/is-object":289}],321:[function(t,s,l){var i=t("../internals/get-built-in"),o=t("../internals/function-uncurry-this"),d=t("../internals/object-get-own-property-names"),c=t("../internals/object-get-own-property-symbols"),a=t("../internals/an-object"),u=o([].concat);s.exports=i("Reflect","ownKeys")||function(h){var f=d.f(a(h)),m=c.f;return m?u(f,m(h)):f}},{"../internals/an-object":227,"../internals/function-uncurry-this":268,"../internals/get-built-in":269,"../internals/object-get-own-property-names":311,"../internals/object-get-own-property-symbols":312}],322:[function(t,s,l){var i=t("../internals/global");s.exports=i},{"../internals/global":274}],323:[function(t,s,l){s.exports=function(i){try{return{error:!1,value:i()}}catch(o){return{error:!0,value:o}}}},{}],324:[function(t,s,l){var i=t("../internals/global"),o=t("../internals/promise-native-constructor"),d=t("../internals/is-callable"),c=t("../internals/is-forced"),a=t("../internals/inspect-source"),u=t("../internals/well-known-symbol"),h=t("../internals/engine-is-browser"),f=t("../internals/engine-is-deno"),m=t("../internals/is-pure"),b=t("../internals/engine-v8-version"),y=o&&o.prototype,g=u("species"),w=!1,x=d(i.PromiseRejectionEvent),_=c("Promise",function(){var j=a(o),R=j!==String(o);if(!R&&b===66||m&&(!y.catch||!y.finally))return!0;if(!b||b<51||!/native code/.test(j)){var M=new o(function(F){F(1)}),I=function(F){F(function(){},function(){})};if((M.constructor={})[g]=I,!(w=M.then(function(){})instanceof I))return!0}return!R&&(h||f)&&!x});s.exports={CONSTRUCTOR:_,REJECTION_EVENT:x,SUBCLASSING:w}},{"../internals/engine-is-browser":250,"../internals/engine-is-deno":251,"../internals/engine-v8-version":257,"../internals/global":274,"../internals/inspect-source":281,"../internals/is-callable":285,"../internals/is-forced":287,"../internals/is-pure":290,"../internals/promise-native-constructor":325,"../internals/well-known-symbol":357}],325:[function(t,s,l){var i=t("../internals/global");s.exports=i.Promise},{"../internals/global":274}],326:[function(t,s,l){var i=t("../internals/an-object"),o=t("../internals/is-object"),d=t("../internals/new-promise-capability");s.exports=function(c,a){if(i(c),o(a)&&a.constructor===c)return a;var u=d.f(c);return(0,u.resolve)(a),u.promise}},{"../internals/an-object":227,"../internals/is-object":289,"../internals/new-promise-capability":303}],327:[function(t,s,l){var i=t("../internals/promise-native-constructor"),o=t("../internals/check-correctness-of-iteration"),d=t("../internals/promise-constructor-detection").CONSTRUCTOR;s.exports=d||!o(function(c){i.all(c).then(void 0,function(){})})},{"../internals/check-correctness-of-iteration":234,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325}],328:[function(t,s,l){var i=function(){this.head=null,this.tail=null};i.prototype={add:function(o){var d={item:o,next:null},c=this.tail;c?c.next=d:this.head=d,this.tail=d},get:function(){var o=this.head;if(o)return(this.head=o.next)===null&&(this.tail=null),o.item}},s.exports=i},{}],329:[function(t,s,l){var i=t("../internals/is-null-or-undefined"),o=TypeError;s.exports=function(d){if(i(d))throw new o("Can't call method on "+d);return d}},{"../internals/is-null-or-undefined":288}],330:[function(t,s,l){var i=t("../internals/get-built-in"),o=t("../internals/define-built-in-accessor"),d=t("../internals/well-known-symbol"),c=t("../internals/descriptors"),a=d("species");s.exports=function(u){var h=i(u);c&&h&&!h[a]&&o(h,a,{configurable:!0,get:function(){return this}})}},{"../internals/define-built-in-accessor":244,"../internals/descriptors":247,"../internals/get-built-in":269,"../internals/well-known-symbol":357}],331:[function(t,s,l){var i=t("../internals/object-define-property").f,o=t("../internals/has-own-property"),d=t("../internals/well-known-symbol")("toStringTag");s.exports=function(c,a,u){c&&!u&&(c=c.prototype),c&&!o(c,d)&&i(c,d,{configurable:!0,value:a})}},{"../internals/has-own-property":275,"../internals/object-define-property":308,"../internals/well-known-symbol":357}],332:[function(t,s,l){var i=t("../internals/shared"),o=t("../internals/uid"),d=i("keys");s.exports=function(c){return d[c]||(d[c]=o(c))}},{"../internals/shared":334,"../internals/uid":350}],333:[function(t,s,l){var i=t("../internals/global"),o=t("../internals/define-global-property"),d=i["__core-js_shared__"]||o("__core-js_shared__",{});s.exports=d},{"../internals/define-global-property":246,"../internals/global":274}],334:[function(t,s,l){var i=t("../internals/is-pure"),o=t("../internals/shared-store");(s.exports=function(d,c){return o[d]||(o[d]=c!==void 0?c:{})})("versions",[]).push({version:"3.33.0",mode:i?"pure":"global",copyright:" 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.33.0/LICENSE",source:"https://github.com/zloirock/core-js"})},{"../internals/is-pure":290,"../internals/shared-store":333}],335:[function(t,s,l){var i=t("../internals/an-object"),o=t("../internals/a-constructor"),d=t("../internals/is-null-or-undefined"),c=t("../internals/well-known-symbol")("species");s.exports=function(a,u){var h,f=i(a).constructor;return f===void 0||d(h=i(f)[c])?u:o(h)}},{"../internals/a-constructor":223,"../internals/an-object":227,"../internals/is-null-or-undefined":288,"../internals/well-known-symbol":357}],336:[function(t,s,l){var i=t("../internals/engine-v8-version"),o=t("../internals/fails"),d=t("../internals/global").String;s.exports=!!Object.getOwnPropertySymbols&&!o(function(){var c=Symbol("symbol detection");return!d(c)||!(Object(c)instanceof Symbol)||!Symbol.sham&&i&&i<41})},{"../internals/engine-v8-version":257,"../internals/fails":260,"../internals/global":274}],337:[function(t,s,l){var i=t("../internals/function-call"),o=t("../internals/get-built-in"),d=t("../internals/well-known-symbol"),c=t("../internals/define-built-in");s.exports=function(){var a=o("Symbol"),u=a&&a.prototype,h=u&&u.valueOf,f=d("toPrimitive");u&&!u[f]&&c(u,f,function(m){return i(h,this)},{arity:1})}},{"../internals/define-built-in":245,"../internals/function-call":264,"../internals/get-built-in":269,"../internals/well-known-symbol":357}],338:[function(t,s,l){var i=t("../internals/symbol-constructor-detection");s.exports=i&&!!Symbol.for&&!!Symbol.keyFor},{"../internals/symbol-constructor-detection":336}],339:[function(t,s,l){var i,o,d,c,a=t("../internals/global"),u=t("../internals/function-apply"),h=t("../internals/function-bind-context"),f=t("../internals/is-callable"),m=t("../internals/has-own-property"),b=t("../internals/fails"),y=t("../internals/html"),g=t("../internals/array-slice"),w=t("../internals/document-create-element"),x=t("../internals/validate-arguments-length"),_=t("../internals/engine-is-ios"),j=t("../internals/engine-is-node"),R=a.setImmediate,M=a.clearImmediate,I=a.process,F=a.Dispatch,B=a.Function,U=a.MessageChannel,Q=a.String,K=0,T={};b(function(){i=a.location});var P=function(S){if(m(T,S)){var E=T[S];delete T[S],E()}},A=function(S){return function(){P(S)}},N=function(S){P(S.data)},k=function(S){a.postMessage(Q(S),i.protocol+"//"+i.host)};R&&M||(R=function(S){x(arguments.length,1);var E=f(S)?S:B(S),O=g(arguments,1);return T[++K]=function(){u(E,void 0,O)},o(K),K},M=function(S){delete T[S]},j?o=function(S){I.nextTick(A(S))}:F&&F.now?o=function(S){F.now(A(S))}:U&&!_?(c=(d=new U).port2,d.port1.onmessage=N,o=h(c.postMessage,c)):a.addEventListener&&f(a.postMessage)&&!a.importScripts&&i&&i.protocol!=="file:"&&!b(k)?(o=k,a.addEventListener("message",N,!1)):o="onreadystatechange"in w("script")?function(S){y.appendChild(w("script")).onreadystatechange=function(){y.removeChild(this),P(S)}}:function(S){setTimeout(A(S),0)}),s.exports={set:R,clear:M}},{"../internals/array-slice":231,"../internals/document-create-element":249,"../internals/engine-is-ios":253,"../internals/engine-is-node":254,"../internals/fails":260,"../internals/function-apply":261,"../internals/function-bind-context":262,"../internals/global":274,"../internals/has-own-property":275,"../internals/html":278,"../internals/is-callable":285,"../internals/validate-arguments-length":353}],340:[function(t,s,l){var i=t("../internals/to-integer-or-infinity"),o=Math.max,d=Math.min;s.exports=function(c,a){var u=i(c);return u<0?o(u+a,0):d(u,a)}},{"../internals/to-integer-or-infinity":342}],341:[function(t,s,l){var i=t("../internals/indexed-object"),o=t("../internals/require-object-coercible");s.exports=function(d){return i(o(d))}},{"../internals/indexed-object":280,"../internals/require-object-coercible":329}],342:[function(t,s,l){var i=t("../internals/math-trunc");s.exports=function(o){var d=+o;return d!=d||d===0?0:i(d)}},{"../internals/math-trunc":301}],343:[function(t,s,l){var i=t("../internals/to-integer-or-infinity"),o=Math.min;s.exports=function(d){return d>0?o(i(d),9007199254740991):0}},{"../internals/to-integer-or-infinity":342}],344:[function(t,s,l){var i=t("../internals/require-object-coercible"),o=Object;s.exports=function(d){return o(i(d))}},{"../internals/require-object-coercible":329}],345:[function(t,s,l){var i=t("../internals/function-call"),o=t("../internals/is-object"),d=t("../internals/is-symbol"),c=t("../internals/get-method"),a=t("../internals/ordinary-to-primitive"),u=t("../internals/well-known-symbol"),h=TypeError,f=u("toPrimitive");s.exports=function(m,b){if(!o(m)||d(m))return m;var y,g=c(m,f);if(g){if(b===void 0&&(b="default"),y=i(g,m,b),!o(y)||d(y))return y;throw new h("Can't convert object to primitive value")}return b===void 0&&(b="number"),a(m,b)}},{"../internals/function-call":264,"../internals/get-method":273,"../internals/is-object":289,"../internals/is-symbol":292,"../internals/ordinary-to-primitive":320,"../internals/well-known-symbol":357}],346:[function(t,s,l){var i=t("../internals/to-primitive"),o=t("../internals/is-symbol");s.exports=function(d){var c=i(d,"string");return o(c)?c:c+""}},{"../internals/is-symbol":292,"../internals/to-primitive":345}],347:[function(t,s,l){var i={};i[t("../internals/well-known-symbol")("toStringTag")]="z",s.exports=String(i)==="[object z]"},{"../internals/well-known-symbol":357}],348:[function(t,s,l){var i=t("../internals/classof"),o=String;s.exports=function(d){if(i(d)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return o(d)}},{"../internals/classof":236}],349:[function(t,s,l){var i=String;s.exports=function(o){try{return i(o)}catch{return"Object"}}},{}],350:[function(t,s,l){var i=t("../internals/function-uncurry-this"),o=0,d=Math.random(),c=i(1 .toString);s.exports=function(a){return"Symbol("+(a===void 0?"":a)+")_"+c(++o+d,36)}},{"../internals/function-uncurry-this":268}],351:[function(t,s,l){var i=t("../internals/symbol-constructor-detection");s.exports=i&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},{"../internals/symbol-constructor-detection":336}],352:[function(t,s,l){var i=t("../internals/descriptors"),o=t("../internals/fails");s.exports=i&&o(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})},{"../internals/descriptors":247,"../internals/fails":260}],353:[function(t,s,l){var i=TypeError;s.exports=function(o,d){if(o<d)throw new i("Not enough arguments");return o}},{}],354:[function(t,s,l){var i=t("../internals/global"),o=t("../internals/is-callable"),d=i.WeakMap;s.exports=o(d)&&/native code/.test(String(d))},{"../internals/global":274,"../internals/is-callable":285}],355:[function(t,s,l){var i=t("../internals/path"),o=t("../internals/has-own-property"),d=t("../internals/well-known-symbol-wrapped"),c=t("../internals/object-define-property").f;s.exports=function(a){var u=i.Symbol||(i.Symbol={});o(u,a)||c(u,a,{value:d.f(a)})}},{"../internals/has-own-property":275,"../internals/object-define-property":308,"../internals/path":322,"../internals/well-known-symbol-wrapped":356}],356:[function(t,s,l){var i=t("../internals/well-known-symbol");l.f=i},{"../internals/well-known-symbol":357}],357:[function(t,s,l){var i=t("../internals/global"),o=t("../internals/shared"),d=t("../internals/has-own-property"),c=t("../internals/uid"),a=t("../internals/symbol-constructor-detection"),u=t("../internals/use-symbol-as-uid"),h=i.Symbol,f=o("wks"),m=u?h.for||h:h&&h.withoutSetter||c;s.exports=function(b){return d(f,b)||(f[b]=a&&d(h,b)?h[b]:m("Symbol."+b)),f[b]}},{"../internals/global":274,"../internals/has-own-property":275,"../internals/shared":334,"../internals/symbol-constructor-detection":336,"../internals/uid":350,"../internals/use-symbol-as-uid":351}],358:[function(t,s,l){var i=t("../internals/export"),o=t("../internals/array-iteration").findIndex,d=t("../internals/add-to-unscopables"),c=!0;"findIndex"in[]&&Array(1).findIndex(function(){c=!1}),i({target:"Array",proto:!0,forced:c},{findIndex:function(a){return o(this,a,arguments.length>1?arguments[1]:void 0)}}),d("findIndex")},{"../internals/add-to-unscopables":225,"../internals/array-iteration":229,"../internals/export":259}],359:[function(t,s,l){var i=t("../internals/export"),o=t("../internals/array-iteration").find,d=t("../internals/add-to-unscopables"),c=!0;"find"in[]&&Array(1).find(function(){c=!1}),i({target:"Array",proto:!0,forced:c},{find:function(a){return o(this,a,arguments.length>1?arguments[1]:void 0)}}),d("find")},{"../internals/add-to-unscopables":225,"../internals/array-iteration":229,"../internals/export":259}],360:[function(t,s,l){var i=t("../internals/export"),o=t("../internals/array-includes").includes,d=t("../internals/fails"),c=t("../internals/add-to-unscopables");i({target:"Array",proto:!0,forced:d(function(){return!Array(1).includes()})},{includes:function(a){return o(this,a,arguments.length>1?arguments[1]:void 0)}}),c("includes")},{"../internals/add-to-unscopables":225,"../internals/array-includes":228,"../internals/export":259,"../internals/fails":260}],361:[function(t,s,l){var i=t("../internals/to-indexed-object"),o=t("../internals/add-to-unscopables"),d=t("../internals/iterators"),c=t("../internals/internal-state"),a=t("../internals/object-define-property").f,u=t("../internals/iterator-define"),h=t("../internals/create-iter-result-object"),f=t("../internals/is-pure"),m=t("../internals/descriptors"),b=c.set,y=c.getterFor("Array Iterator");s.exports=u(Array,"Array",function(w,x){b(this,{type:"Array Iterator",target:i(w),index:0,kind:x})},function(){var w=y(this),x=w.target,_=w.kind,j=w.index++;if(!x||j>=x.length)return w.target=void 0,h(void 0,!0);switch(_){case"keys":return h(j,!1);case"values":return h(x[j],!1)}return h([j,x[j]],!1)},"values");var g=d.Arguments=d.Array;if(o("keys"),o("values"),o("entries"),!f&&m&&g.name!=="values")try{a(g,"name",{value:"values"})}catch{}},{"../internals/add-to-unscopables":225,"../internals/create-iter-result-object":240,"../internals/descriptors":247,"../internals/internal-state":282,"../internals/is-pure":290,"../internals/iterator-define":296,"../internals/iterators":298,"../internals/object-define-property":308,"../internals/to-indexed-object":341}],362:[function(t,s,l){var i=t("../internals/export"),o=t("../internals/get-built-in"),d=t("../internals/function-apply"),c=t("../internals/function-call"),a=t("../internals/function-uncurry-this"),u=t("../internals/fails"),h=t("../internals/is-callable"),f=t("../internals/is-symbol"),m=t("../internals/array-slice"),b=t("../internals/get-json-replacer-function"),y=t("../internals/symbol-constructor-detection"),g=String,w=o("JSON","stringify"),x=a(/./.exec),_=a("".charAt),j=a("".charCodeAt),R=a("".replace),M=a(1 .toString),I=/[\uD800-\uDFFF]/g,F=/^[\uD800-\uDBFF]$/,B=/^[\uDC00-\uDFFF]$/,U=!y||u(function(){var P=o("Symbol")("stringify detection");return w([P])!=="[null]"||w({a:P})!=="{}"||w(Object(P))!=="{}"}),Q=u(function(){return w("\uDF06\uD834")!=='"\\udf06\\ud834"'||w("\uDEAD")!=='"\\udead"'}),K=function(P,A){var N=m(arguments),k=b(A);if(h(k)||P!==void 0&&!f(P))return N[1]=function(S,E){if(h(k)&&(E=c(k,this,g(S),E)),!f(E))return E},d(w,null,N)},T=function(P,A,N){var k=_(N,A-1),S=_(N,A+1);return x(F,P)&&!x(B,S)||x(B,P)&&!x(F,k)?"\\u"+M(j(P,0),16):P};w&&i({target:"JSON",stat:!0,arity:3,forced:U||Q},{stringify:function(P,A,N){var k=m(arguments),S=d(U?K:w,null,k);return Q&&typeof S=="string"?R(S,I,T):S}})},{"../internals/array-slice":231,"../internals/export":259,"../internals/fails":260,"../internals/function-apply":261,"../internals/function-call":264,"../internals/function-uncurry-this":268,"../internals/get-built-in":269,"../internals/get-json-replacer-function":272,"../internals/is-callable":285,"../internals/is-symbol":292,"../internals/symbol-constructor-detection":336}],363:[function(t,s,l){t("../internals/export")({target:"Number",stat:!0},{isNaN:function(i){return i!=i}})},{"../internals/export":259}],364:[function(t,s,l){var i=t("../internals/export"),o=t("../internals/object-assign");i({target:"Object",stat:!0,arity:2,forced:Object.assign!==o},{assign:o})},{"../internals/export":259,"../internals/object-assign":305}],365:[function(t,s,l){var i=t("../internals/export"),o=t("../internals/symbol-constructor-detection"),d=t("../internals/fails"),c=t("../internals/object-get-own-property-symbols"),a=t("../internals/to-object");i({target:"Object",stat:!0,forced:!o||d(function(){c.f(1)})},{getOwnPropertySymbols:function(u){var h=c.f;return h?h(a(u)):[]}})},{"../internals/export":259,"../internals/fails":260,"../internals/object-get-own-property-symbols":312,"../internals/symbol-constructor-detection":336,"../internals/to-object":344}],366:[function(t,s,l){var i=t("../internals/export"),o=t("../internals/to-object"),d=t("../internals/object-keys");i({target:"Object",stat:!0,forced:t("../internals/fails")(function(){d(1)})},{keys:function(c){return d(o(c))}})},{"../internals/export":259,"../internals/fails":260,"../internals/object-keys":316,"../internals/to-object":344}],367:[function(t,s,l){var i=t("../internals/export"),o=t("../internals/object-to-array").values;i({target:"Object",stat:!0},{values:function(d){return o(d)}})},{"../internals/export":259,"../internals/object-to-array":319}],368:[function(t,s,l){var i=t("../internals/export"),o=t("../internals/function-call"),d=t("../internals/a-callable"),c=t("../internals/new-promise-capability"),a=t("../internals/perform"),u=t("../internals/iterate");i({target:"Promise",stat:!0,forced:t("../internals/promise-statics-incorrect-iteration")},{all:function(h){var f=this,m=c.f(f),b=m.resolve,y=m.reject,g=a(function(){var w=d(f.resolve),x=[],_=0,j=1;u(h,function(R){var M=_++,I=!1;j++,o(w,f,R).then(function(F){I||(I=!0,x[M]=F,--j||b(x))},y)}),--j||b(x)});return g.error&&y(g.value),m.promise}})},{"../internals/a-callable":222,"../internals/export":259,"../internals/function-call":264,"../internals/iterate":293,"../internals/new-promise-capability":303,"../internals/perform":323,"../internals/promise-statics-incorrect-iteration":327}],369:[function(t,s,l){var i=t("../internals/export"),o=t("../internals/is-pure"),d=t("../internals/promise-constructor-detection").CONSTRUCTOR,c=t("../internals/promise-native-constructor"),a=t("../internals/get-built-in"),u=t("../internals/is-callable"),h=t("../internals/define-built-in"),f=c&&c.prototype;if(i({target:"Promise",proto:!0,forced:d,real:!0},{catch:function(b){return this.then(void 0,b)}}),!o&&u(c)){var m=a("Promise").prototype.catch;f.catch!==m&&h(f,"catch",m,{unsafe:!0})}},{"../internals/define-built-in":245,"../internals/export":259,"../internals/get-built-in":269,"../internals/is-callable":285,"../internals/is-pure":290,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325}],370:[function(t,s,l){var i,o,d,c=t("../internals/export"),a=t("../internals/is-pure"),u=t("../internals/engine-is-node"),h=t("../internals/global"),f=t("../internals/function-call"),m=t("../internals/define-built-in"),b=t("../internals/object-set-prototype-of"),y=t("../internals/set-to-string-tag"),g=t("../internals/set-species"),w=t("../internals/a-callable"),x=t("../internals/is-callable"),_=t("../internals/is-object"),j=t("../internals/an-instance"),R=t("../internals/species-constructor"),M=t("../internals/task").set,I=t("../internals/microtask"),F=t("../internals/host-report-errors"),B=t("../internals/perform"),U=t("../internals/queue"),Q=t("../internals/internal-state"),K=t("../internals/promise-native-constructor"),T=t("../internals/promise-constructor-detection"),P=t("../internals/new-promise-capability"),A=T.CONSTRUCTOR,N=T.REJECTION_EVENT,k=T.SUBCLASSING,S=Q.getterFor("Promise"),E=Q.set,O=K&&K.prototype,L=K,z=O,G=h.TypeError,Z=h.document,ee=h.process,W=P.f,J=W,$=!!(Z&&Z.createEvent&&h.dispatchEvent),q=function(le){var te;return!(!_(le)||!x(te=le.then))&&te},Y=function(le,te){var ie,ue,_e,je=te.value,ke=te.state===1,Le=ke?le.ok:le.fail,Ue=le.resolve,Qe=le.reject,Be=le.domain;try{Le?(ke||(te.rejection===2&&we(te),te.rejection=1),Le===!0?ie=je:(Be&&Be.enter(),ie=Le(je),Be&&(Be.exit(),_e=!0)),ie===le.promise?Qe(new G("Promise-chain cycle")):(ue=q(ie))?f(ue,ie,Ue,Qe):Ue(ie)):Qe(je)}catch(ct){Be&&!_e&&Be.exit(),Qe(ct)}},se=function(le,te){le.notified||(le.notified=!0,I(function(){for(var ie,ue=le.reactions;ie=ue.get();)Y(ie,le);le.notified=!1,te&&!le.rejection&&ae(le)}))},oe=function(le,te,ie){var ue,_e;$?((ue=Z.createEvent("Event")).promise=te,ue.reason=ie,ue.initEvent(le,!1,!0),h.dispatchEvent(ue)):ue={promise:te,reason:ie},!N&&(_e=h["on"+le])?_e(ue):le==="unhandledrejection"&&F("Unhandled promise rejection",ie)},ae=function(le){f(M,h,function(){var te,ie=le.facade,ue=le.value;if(ce(le)&&(te=B(function(){u?ee.emit("unhandledRejection",ue,ie):oe("unhandledrejection",ie,ue)}),le.rejection=u||ce(le)?2:1,te.error))throw te.value})},ce=function(le){return le.rejection!==1&&!le.parent},we=function(le){f(M,h,function(){var te=le.facade;u?ee.emit("rejectionHandled",te):oe("rejectionhandled",te,le.value)})},fe=function(le,te,ie){return function(ue){le(te,ue,ie)}},re=function(le,te,ie){le.done||(le.done=!0,ie&&(le=ie),le.value=te,le.state=2,se(le,!0))},ge=function(le,te,ie){if(!le.done){le.done=!0,ie&&(le=ie);try{if(le.facade===te)throw new G("Promise can't be resolved itself");var ue=q(te);ue?I(function(){var _e={done:!1};try{f(ue,te,fe(ge,_e,le),fe(re,_e,le))}catch(je){re(_e,je,le)}}):(le.value=te,le.state=1,se(le,!1))}catch(_e){re({done:!1},_e,le)}}};if(A&&(z=(L=function(le){j(this,z),w(le),f(i,this);var te=S(this);try{le(fe(ge,te),fe(re,te))}catch(ie){re(te,ie)}}).prototype,(i=function(le){E(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new U,rejection:!1,state:0,value:void 0})}).prototype=m(z,"then",function(le,te){var ie=S(this),ue=W(R(this,L));return ie.parent=!0,ue.ok=!x(le)||le,ue.fail=x(te)&&te,ue.domain=u?ee.domain:void 0,ie.state===0?ie.reactions.add(ue):I(function(){Y(ue,ie)}),ue.promise}),o=function(){var le=new i,te=S(le);this.promise=le,this.resolve=fe(ge,te),this.reject=fe(re,te)},P.f=W=function(le){return le===L||le===void 0?new o(le):J(le)},!a&&x(K)&&O!==Object.prototype)){d=O.then,k||m(O,"then",function(le,te){var ie=this;return new L(function(ue,_e){f(d,ie,ue,_e)}).then(le,te)},{unsafe:!0});try{delete O.constructor}catch{}b&&b(O,z)}c({global:!0,constructor:!0,wrap:!0,forced:A},{Promise:L}),y(L,"Promise",!1,!0),g("Promise")},{"../internals/a-callable":222,"../internals/an-instance":226,"../internals/define-built-in":245,"../internals/engine-is-node":254,"../internals/export":259,"../internals/function-call":264,"../internals/global":274,"../internals/host-report-errors":277,"../internals/internal-state":282,"../internals/is-callable":285,"../internals/is-object":289,"../internals/is-pure":290,"../internals/microtask":302,"../internals/new-promise-capability":303,"../internals/object-set-prototype-of":318,"../internals/perform":323,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325,"../internals/queue":328,"../internals/set-species":330,"../internals/set-to-string-tag":331,"../internals/species-constructor":335,"../internals/task":339}],371:[function(t,s,l){var i=t("../internals/export"),o=t("../internals/is-pure"),d=t("../internals/promise-native-constructor"),c=t("../internals/fails"),a=t("../internals/get-built-in"),u=t("../internals/is-callable"),h=t("../internals/species-constructor"),f=t("../internals/promise-resolve"),m=t("../internals/define-built-in"),b=d&&d.prototype;if(i({target:"Promise",proto:!0,real:!0,forced:!!d&&c(function(){b.finally.call({then:function(){}},function(){})})},{finally:function(g){var w=h(this,a("Promise")),x=u(g);return this.then(x?function(_){return f(w,g()).then(function(){return _})}:g,x?function(_){return f(w,g()).then(function(){throw _})}:g)}}),!o&&u(d)){var y=a("Promise").prototype.finally;b.finally!==y&&m(b,"finally",y,{unsafe:!0})}},{"../internals/define-built-in":245,"../internals/export":259,"../internals/fails":260,"../internals/get-built-in":269,"../internals/is-callable":285,"../internals/is-pure":290,"../internals/promise-native-constructor":325,"../internals/promise-resolve":326,"../internals/species-constructor":335}],372:[function(t,s,l){t("../modules/es.promise.constructor"),t("../modules/es.promise.all"),t("../modules/es.promise.catch"),t("../modules/es.promise.race"),t("../modules/es.promise.reject"),t("../modules/es.promise.resolve")},{"../modules/es.promise.all":368,"../modules/es.promise.catch":369,"../modules/es.promise.constructor":370,"../modules/es.promise.race":373,"../modules/es.promise.reject":374,"../modules/es.promise.resolve":375}],373:[function(t,s,l){var i=t("../internals/export"),o=t("../internals/function-call"),d=t("../internals/a-callable"),c=t("../internals/new-promise-capability"),a=t("../internals/perform"),u=t("../internals/iterate");i({target:"Promise",stat:!0,forced:t("../internals/promise-statics-incorrect-iteration")},{race:function(h){var f=this,m=c.f(f),b=m.reject,y=a(function(){var g=d(f.resolve);u(h,function(w){o(g,f,w).then(m.resolve,b)})});return y.error&&b(y.value),m.promise}})},{"../internals/a-callable":222,"../internals/export":259,"../internals/function-call":264,"../internals/iterate":293,"../internals/new-promise-capability":303,"../internals/perform":323,"../internals/promise-statics-incorrect-iteration":327}],374:[function(t,s,l){var i=t("../internals/export"),o=t("../internals/function-call"),d=t("../internals/new-promise-capability");i({target:"Promise",stat:!0,forced:t("../internals/promise-constructor-detection").CONSTRUCTOR},{reject:function(c){var a=d.f(this);return o(a.reject,void 0,c),a.promise}})},{"../internals/export":259,"../internals/function-call":264,"../internals/new-promise-capability":303,"../internals/promise-constructor-detection":324}],375:[function(t,s,l){var i=t("../internals/export"),o=t("../internals/get-built-in"),d=t("../internals/is-pure"),c=t("../internals/promise-native-constructor"),a=t("../internals/promise-constructor-detection").CONSTRUCTOR,u=t("../internals/promise-resolve"),h=o("Promise"),f=d&&!a;i({target:"Promise",stat:!0,forced:d||a},{resolve:function(m){return u(f&&this===h?c:this,m)}})},{"../internals/export":259,"../internals/get-built-in":269,"../internals/is-pure":290,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325,"../internals/promise-resolve":326}],376:[function(t,s,l){var i=t("../internals/export"),o=t("../internals/function-uncurry-this"),d=t("../internals/to-absolute-index"),c=RangeError,a=String.fromCharCode,u=String.fromCodePoint,h=o([].join);i({target:"String",stat:!0,arity:1,forced:!!u&&u.length!==1},{fromCodePoint:function(f){for(var m,b=[],y=arguments.length,g=0;y>g;){if(m=+arguments[g++],d(m,1114111)!==m)throw new c(m+" is not a valid code point");b[g]=m<65536?a(m):a(55296+((m-=65536)>>10),m%1024+56320)}return h(b,"")}})},{"../internals/export":259,"../internals/function-uncurry-this":268,"../internals/to-absolute-index":340}],377:[function(t,s,l){var i=t("../internals/export"),o=t("../internals/function-uncurry-this"),d=t("../internals/not-a-regexp"),c=t("../internals/require-object-coercible"),a=t("../internals/to-string"),u=t("../internals/correct-is-regexp-logic"),h=o("".indexOf);i({target:"String",proto:!0,forced:!u("includes")},{includes:function(f){return!!~h(a(c(this)),a(d(f)),arguments.length>1?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":238,"../internals/export":259,"../internals/function-uncurry-this":268,"../internals/not-a-regexp":304,"../internals/require-object-coercible":329,"../internals/to-string":348}],378:[function(t,s,l){t("../internals/well-known-symbol-define")("asyncIterator")},{"../internals/well-known-symbol-define":355}],379:[function(t,s,l){var i=t("../internals/export"),o=t("../internals/global"),d=t("../internals/function-call"),c=t("../internals/function-uncurry-this"),a=t("../internals/is-pure"),u=t("../internals/descriptors"),h=t("../internals/symbol-constructor-detection"),f=t("../internals/fails"),m=t("../internals/has-own-property"),b=t("../internals/object-is-prototype-of"),y=t("../internals/an-object"),g=t("../internals/to-indexed-object"),w=t("../internals/to-property-key"),x=t("../internals/to-string"),_=t("../internals/create-property-descriptor"),j=t("../internals/object-create"),R=t("../internals/object-keys"),M=t("../internals/object-get-own-property-names"),I=t("../internals/object-get-own-property-names-external"),F=t("../internals/object-get-own-property-symbols"),B=t("../internals/object-get-own-property-descriptor"),U=t("../internals/object-define-property"),Q=t("../internals/object-define-properties"),K=t("../internals/object-property-is-enumerable"),T=t("../internals/define-built-in"),P=t("../internals/define-built-in-accessor"),A=t("../internals/shared"),N=t("../internals/shared-key"),k=t("../internals/hidden-keys"),S=t("../internals/uid"),E=t("../internals/well-known-symbol"),O=t("../internals/well-known-symbol-wrapped"),L=t("../internals/well-known-symbol-define"),z=t("../internals/symbol-define-to-primitive"),G=t("../internals/set-to-string-tag"),Z=t("../internals/internal-state"),ee=t("../internals/array-iteration").forEach,W=N("hidden"),J=Z.set,$=Z.getterFor("Symbol"),q=Object.prototype,Y=o.Symbol,se=Y&&Y.prototype,oe=o.RangeError,ae=o.TypeError,ce=o.QObject,we=B.f,fe=U.f,re=I.f,ge=K.f,le=c([].push),te=A("symbols"),ie=A("op-symbols"),ue=A("wks"),_e=!ce||!ce.prototype||!ce.prototype.findChild,je=function(ut,lt,ht){var jt=we(q,lt);jt&&delete q[lt],fe(ut,lt,ht),jt&&ut!==q&&fe(q,lt,jt)},ke=u&&f(function(){return j(fe({},"a",{get:function(){return fe(this,"a",{value:7}).a}})).a!==7})?je:fe,Le=function(ut,lt){var ht=te[ut]=j(se);return J(ht,{type:"Symbol",tag:ut,description:lt}),u||(ht.description=lt),ht},Ue=function(ut,lt,ht){ut===q&&Ue(ie,lt,ht),y(ut);var jt=w(lt);return y(ht),m(te,jt)?(ht.enumerable?(m(ut,W)&&ut[W][jt]&&(ut[W][jt]=!1),ht=j(ht,{enumerable:_(0,!1)})):(m(ut,W)||fe(ut,W,_(1,{})),ut[W][jt]=!0),ke(ut,jt,ht)):fe(ut,jt,ht)},Qe=function(ut,lt){y(ut);var ht=g(lt),jt=R(ht).concat(_t(ht));return ee(jt,function(pt){u&&!d(Be,ht,pt)||Ue(ut,pt,ht[pt])}),ut},Be=function(ut){var lt=w(ut),ht=d(ge,this,lt);return!(this===q&&m(te,lt)&&!m(ie,lt))&&(!(ht||!m(this,lt)||!m(te,lt)||m(this,W)&&this[W][lt])||ht)},ct=function(ut,lt){var ht=g(ut),jt=w(lt);if(ht!==q||!m(te,jt)||m(ie,jt)){var pt=we(ht,jt);return!pt||!m(te,jt)||m(ht,W)&&ht[W][jt]||(pt.enumerable=!0),pt}},ft=function(ut){var lt=re(g(ut)),ht=[];return ee(lt,function(jt){m(te,jt)||m(k,jt)||le(ht,jt)}),ht},_t=function(ut){var lt=ut===q,ht=re(lt?ie:g(ut)),jt=[];return ee(ht,function(pt){!m(te,pt)||lt&&!m(q,pt)||le(jt,te[pt])}),jt};h||(T(se=(Y=function(){if(b(se,this))throw new ae("Symbol is not a constructor");var ut=arguments.length&&arguments[0]!==void 0?x(arguments[0]):void 0,lt=S(ut),ht=function(jt){this===q&&d(ht,ie,jt),m(this,W)&&m(this[W],lt)&&(this[W][lt]=!1);var pt=_(1,jt);try{ke(this,lt,pt)}catch(Qt){if(!(Qt instanceof oe))throw Qt;je(this,lt,pt)}};return u&&_e&&ke(q,lt,{configurable:!0,set:ht}),Le(lt,ut)}).prototype,"toString",function(){return $(this).tag}),T(Y,"withoutSetter",function(ut){return Le(S(ut),ut)}),K.f=Be,U.f=Ue,Q.f=Qe,B.f=ct,M.f=I.f=ft,F.f=_t,O.f=function(ut){return Le(E(ut),ut)},u&&(P(se,"description",{configurable:!0,get:function(){return $(this).description}}),a||T(q,"propertyIsEnumerable",Be,{unsafe:!0}))),i({global:!0,constructor:!0,wrap:!0,forced:!h,sham:!h},{Symbol:Y}),ee(R(ue),function(ut){L(ut)}),i({target:"Symbol",stat:!0,forced:!h},{useSetter:function(){_e=!0},useSimple:function(){_e=!1}}),i({target:"Object",stat:!0,forced:!h,sham:!u},{create:function(ut,lt){return lt===void 0?j(ut):Qe(j(ut),lt)},defineProperty:Ue,defineProperties:Qe,getOwnPropertyDescriptor:ct}),i({target:"Object",stat:!0,forced:!h},{getOwnPropertyNames:ft}),z(),G(Y,"Symbol"),k[W]=!0},{"../internals/an-object":227,"../internals/array-iteration":229,"../internals/create-property-descriptor":242,"../internals/define-built-in":245,"../internals/define-built-in-accessor":244,"../internals/descriptors":247,"../internals/export":259,"../internals/fails":260,"../internals/function-call":264,"../internals/function-uncurry-this":268,"../internals/global":274,"../internals/has-own-property":275,"../internals/hidden-keys":276,"../internals/internal-state":282,"../internals/is-pure":290,"../internals/object-create":306,"../internals/object-define-properties":307,"../internals/object-define-property":308,"../internals/object-get-own-property-descriptor":309,"../internals/object-get-own-property-names":311,"../internals/object-get-own-property-names-external":310,"../internals/object-get-own-property-symbols":312,"../internals/object-is-prototype-of":314,"../internals/object-keys":316,"../internals/object-property-is-enumerable":317,"../internals/set-to-string-tag":331,"../internals/shared":334,"../internals/shared-key":332,"../internals/symbol-constructor-detection":336,"../internals/symbol-define-to-primitive":337,"../internals/to-indexed-object":341,"../internals/to-property-key":346,"../internals/to-string":348,"../internals/uid":350,"../internals/well-known-symbol":357,"../internals/well-known-symbol-define":355,"../internals/well-known-symbol-wrapped":356}],380:[function(t,s,l){var i=t("../internals/export"),o=t("../internals/get-built-in"),d=t("../internals/has-own-property"),c=t("../internals/to-string"),a=t("../internals/shared"),u=t("../internals/symbol-registry-detection"),h=a("string-to-symbol-registry"),f=a("symbol-to-string-registry");i({target:"Symbol",stat:!0,forced:!u},{for:function(m){var b=c(m);if(d(h,b))return h[b];var y=o("Symbol")(b);return h[b]=y,f[y]=b,y}})},{"../internals/export":259,"../internals/get-built-in":269,"../internals/has-own-property":275,"../internals/shared":334,"../internals/symbol-registry-detection":338,"../internals/to-string":348}],381:[function(t,s,l){t("../modules/es.symbol.constructor"),t("../modules/es.symbol.for"),t("../modules/es.symbol.key-for"),t("../modules/es.json.stringify"),t("../modules/es.object.get-own-property-symbols")},{"../modules/es.json.stringify":362,"../modules/es.object.get-own-property-symbols":365,"../modules/es.symbol.constructor":379,"../modules/es.symbol.for":380,"../modules/es.symbol.key-for":382}],382:[function(t,s,l){var i=t("../internals/export"),o=t("../internals/has-own-property"),d=t("../internals/is-symbol"),c=t("../internals/try-to-string"),a=t("../internals/shared"),u=t("../internals/symbol-registry-detection"),h=a("symbol-to-string-registry");i({target:"Symbol",stat:!0,forced:!u},{keyFor:function(f){if(!d(f))throw new TypeError(c(f)+" is not a symbol");if(o(h,f))return h[f]}})},{"../internals/export":259,"../internals/has-own-property":275,"../internals/is-symbol":292,"../internals/shared":334,"../internals/symbol-registry-detection":338,"../internals/try-to-string":349}],383:[function(t,s,l){function i(o){return Object.prototype.toString.call(o)}l.isArray=function(o){return Array.isArray?Array.isArray(o):i(o)==="[object Array]"},l.isBoolean=function(o){return typeof o=="boolean"},l.isNull=function(o){return o===null},l.isNullOrUndefined=function(o){return o==null},l.isNumber=function(o){return typeof o=="number"},l.isString=function(o){return typeof o=="string"},l.isSymbol=function(o){return typeof o=="symbol"},l.isUndefined=function(o){return o===void 0},l.isRegExp=function(o){return i(o)==="[object RegExp]"},l.isObject=function(o){return typeof o=="object"&&o!==null},l.isDate=function(o){return i(o)==="[object Date]"},l.isError=function(o){return i(o)==="[object Error]"||o instanceof Error},l.isFunction=function(o){return typeof o=="function"},l.isPrimitive=function(o){return o===null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||typeof o=="symbol"||o===void 0},l.isBuffer=t("buffer").Buffer.isBuffer},{buffer:220}],384:[function(t,s,l){(function(i){(function(){var o=t("elliptic"),d=t("bn.js");s.exports=function(h){return new a(h)};var c={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function a(h){this.curveType=c[h],this.curveType||(this.curveType={name:h}),this.curve=new o.ec(this.curveType.name),this.keys=void 0}function u(h,f,m){Array.isArray(h)||(h=h.toArray());var b=new i(h);if(m&&b.length<m){var y=new i(m-b.length);y.fill(0),b=i.concat([y,b])}return f?b.toString(f):b}c.p224=c.secp224r1,c.p256=c.secp256r1=c.prime256v1,c.p192=c.secp192r1=c.prime192v1,c.p384=c.secp384r1,c.p521=c.secp521r1,a.prototype.generateKeys=function(h,f){return this.keys=this.curve.genKeyPair(),this.getPublicKey(h,f)},a.prototype.computeSecret=function(h,f,m){return f=f||"utf8",i.isBuffer(h)||(h=new i(h,f)),u(this.curve.keyFromPublic(h).getPublic().mul(this.keys.getPrivate()).getX(),m,this.curveType.byteLength)},a.prototype.getPublicKey=function(h,f){var m=this.keys.getPublic(f==="compressed",!0);return f==="hybrid"&&(m[m.length-1]%2?m[0]=7:m[0]=6),u(m,h)},a.prototype.getPrivateKey=function(h){return u(this.keys.getPrivate(),h)},a.prototype.setPublicKey=function(h,f){return f=f||"utf8",i.isBuffer(h)||(h=new i(h,f)),this.keys._importPublic(h),this},a.prototype.setPrivateKey=function(h,f){f=f||"utf8",i.isBuffer(h)||(h=new i(h,f));var m=new d(h);return m=m.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(m),this}}).call(this)}).call(this,t("buffer").Buffer)},{"bn.js":385,buffer:220,elliptic:405}],385:[function(t,s,l){arguments[4][184][0].apply(l,arguments)},{buffer:188,dup:184}],386:[function(t,s,l){var i=t("inherits"),o=t("md5.js"),d=t("ripemd160"),c=t("sha.js"),a=t("cipher-base");function u(h){a.call(this,"digest"),this._hash=h}i(u,a),u.prototype._update=function(h){this._hash.update(h)},u.prototype._final=function(){return this._hash.digest()},s.exports=function(h){return(h=h.toLowerCase())==="md5"?new o:h==="rmd160"||h==="ripemd160"?new d:new u(c(h))}},{"cipher-base":221,inherits:440,"md5.js":450,ripemd160:493,"sha.js":498}],387:[function(t,s,l){var i=t("md5.js");s.exports=function(o){return new i().update(o).digest()}},{"md5.js":450}],388:[function(t,s,l){var i=t("inherits"),o=t("./legacy"),d=t("cipher-base"),c=t("safe-buffer").Buffer,a=t("create-hash/md5"),u=t("ripemd160"),h=t("sha.js"),f=c.alloc(128);function m(b,y){d.call(this,"digest"),typeof y=="string"&&(y=c.from(y));var g=b==="sha512"||b==="sha384"?128:64;this._alg=b,this._key=y,y.length>g?y=(b==="rmd160"?new u:h(b)).update(y).digest():y.length<g&&(y=c.concat([y,f],g));for(var w=this._ipad=c.allocUnsafe(g),x=this._opad=c.allocUnsafe(g),_=0;_<g;_++)w[_]=54^y[_],x[_]=92^y[_];this._hash=b==="rmd160"?new u:h(b),this._hash.update(w)}i(m,d),m.prototype._update=function(b){this._hash.update(b)},m.prototype._final=function(){var b=this._hash.digest();return(this._alg==="rmd160"?new u:h(this._alg)).update(this._opad).update(b).digest()},s.exports=function(b,y){return(b=b.toLowerCase())==="rmd160"||b==="ripemd160"?new m("rmd160",y):b==="md5"?new o(a,y):new m(b,y)}},{"./legacy":389,"cipher-base":221,"create-hash/md5":387,inherits:440,ripemd160:493,"safe-buffer":494,"sha.js":498}],389:[function(t,s,l){var i=t("inherits"),o=t("safe-buffer").Buffer,d=t("cipher-base"),c=o.alloc(128);function a(u,h){d.call(this,"digest"),typeof h=="string"&&(h=o.from(h)),this._alg=u,this._key=h,h.length>64?h=u(h):h.length<64&&(h=o.concat([h,c],64));for(var f=this._ipad=o.allocUnsafe(64),m=this._opad=o.allocUnsafe(64),b=0;b<64;b++)f[b]=54^h[b],m[b]=92^h[b];this._hash=[f]}i(a,d),a.prototype._update=function(u){this._hash.push(u)},a.prototype._final=function(){var u=this._alg(o.concat(this._hash));return this._alg(o.concat([this._opad,u]))},s.exports=a},{"cipher-base":221,inherits:440,"safe-buffer":494}],390:[function(t,s,l){l.randomBytes=l.rng=l.pseudoRandomBytes=l.prng=t("randombytes"),l.createHash=l.Hash=t("create-hash"),l.createHmac=l.Hmac=t("create-hmac");var i=t("browserify-sign/algos"),o=Object.keys(i),d=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(o);l.getHashes=function(){return d};var c=t("pbkdf2");l.pbkdf2=c.pbkdf2,l.pbkdf2Sync=c.pbkdf2Sync;var a=t("browserify-cipher");l.Cipher=a.Cipher,l.createCipher=a.createCipher,l.Cipheriv=a.Cipheriv,l.createCipheriv=a.createCipheriv,l.Decipher=a.Decipher,l.createDecipher=a.createDecipher,l.Decipheriv=a.Decipheriv,l.createDecipheriv=a.createDecipheriv,l.getCiphers=a.getCiphers,l.listCiphers=a.listCiphers;var u=t("diffie-hellman");l.DiffieHellmanGroup=u.DiffieHellmanGroup,l.createDiffieHellmanGroup=u.createDiffieHellmanGroup,l.getDiffieHellman=u.getDiffieHellman,l.createDiffieHellman=u.createDiffieHellman,l.DiffieHellman=u.DiffieHellman;var h=t("browserify-sign");l.createSign=h.createSign,l.Sign=h.Sign,l.createVerify=h.createVerify,l.Verify=h.Verify,l.createECDH=t("create-ecdh");var f=t("public-encrypt");l.publicEncrypt=f.publicEncrypt,l.privateEncrypt=f.privateEncrypt,l.publicDecrypt=f.publicDecrypt,l.privateDecrypt=f.privateDecrypt;var m=t("randomfill");l.randomFill=m.randomFill,l.randomFillSync=m.randomFillSync,l.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join(`
`))},l.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},{"browserify-cipher":206,"browserify-sign":213,"browserify-sign/algos":210,"create-ecdh":384,"create-hash":386,"create-hmac":388,"diffie-hellman":400,pbkdf2:460,"public-encrypt":468,randombytes:475,randomfill:476}],391:[function(t,s,l){(function(i,o){typeof l=="object"&&s!==void 0?s.exports=o():(i=typeof globalThis<"u"?globalThis:i||self).dayjs=o()})(void 0,function(){var i=6e4,o=36e5,d="millisecond",c="second",a="minute",u="hour",h="day",f="week",m="month",b="quarter",y="year",g="date",w="Invalid Date",x=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,_=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,j={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(N){var k=["th","st","nd","rd"],S=N%100;return"["+N+(k[(S-20)%10]||k[S]||k[0])+"]"}},R=function(N,k,S){var E=String(N);return!E||E.length>=k?N:""+Array(k+1-E.length).join(S)+N},M={s:R,z:function(N){var k=-N.utcOffset(),S=Math.abs(k),E=Math.floor(S/60),O=S%60;return(k<=0?"+":"-")+R(E,2,"0")+":"+R(O,2,"0")},m:function N(k,S){if(k.date()<S.date())return-N(S,k);var E=12*(S.year()-k.year())+(S.month()-k.month()),O=k.clone().add(E,m),L=S-O<0,z=k.clone().add(E+(L?-1:1),m);return+(-(E+(S-O)/(L?O-z:z-O))||0)},a:function(N){return N<0?Math.ceil(N)||0:Math.floor(N)},p:function(N){return{M:m,y,w:f,d:h,D:g,h:u,m:a,s:c,ms:d,Q:b}[N]||String(N||"").toLowerCase().replace(/s$/,"")},u:function(N){return N===void 0}},I="en",F={};F[I]=j;var B="$isDayjsObject",U=function(N){return N instanceof P||!(!N||!N[B])},Q=function N(k,S,E){var O;if(!k)return I;if(typeof k=="string"){var L=k.toLowerCase();F[L]&&(O=L),S&&(F[L]=S,O=L);var z=k.split("-");if(!O&&z.length>1)return N(z[0])}else{var G=k.name;F[G]=k,O=G}return!E&&O&&(I=O),O||!E&&I},K=function(N,k){if(U(N))return N.clone();var S=typeof k=="object"?k:{};return S.date=N,S.args=arguments,new P(S)},T=M;T.l=Q,T.i=U,T.w=function(N,k){return K(N,{locale:k.$L,utc:k.$u,x:k.$x,$offset:k.$offset})};var P=function(){function N(S){this.$L=Q(S.locale,null,!0),this.parse(S),this.$x=this.$x||S.x||{},this[B]=!0}var k=N.prototype;return k.parse=function(S){this.$d=function(E){var O=E.date,L=E.utc;if(O===null)return new Date(NaN);if(T.u(O))return new Date;if(O instanceof Date)return new Date(O);if(typeof O=="string"&&!/Z$/i.test(O)){var z=O.match(x);if(z){var G=z[2]-1||0,Z=(z[7]||"0").substring(0,3);return L?new Date(Date.UTC(z[1],G,z[3]||1,z[4]||0,z[5]||0,z[6]||0,Z)):new Date(z[1],G,z[3]||1,z[4]||0,z[5]||0,z[6]||0,Z)}}return new Date(O)}(S),this.init()},k.init=function(){var S=this.$d;this.$y=S.getFullYear(),this.$M=S.getMonth(),this.$D=S.getDate(),this.$W=S.getDay(),this.$H=S.getHours(),this.$m=S.getMinutes(),this.$s=S.getSeconds(),this.$ms=S.getMilliseconds()},k.$utils=function(){return T},k.isValid=function(){return this.$d.toString()!==w},k.isSame=function(S,E){var O=K(S);return this.startOf(E)<=O&&O<=this.endOf(E)},k.isAfter=function(S,E){return K(S)<this.startOf(E)},k.isBefore=function(S,E){return this.endOf(E)<K(S)},k.$g=function(S,E,O){return T.u(S)?this[E]:this.set(O,S)},k.unix=function(){return Math.floor(this.valueOf()/1e3)},k.valueOf=function(){return this.$d.getTime()},k.startOf=function(S,E){var O=this,L=!!T.u(E)||E,z=T.p(S),G=function(se,oe){var ae=T.w(O.$u?Date.UTC(O.$y,oe,se):new Date(O.$y,oe,se),O);return L?ae:ae.endOf(h)},Z=function(se,oe){return T.w(O.toDate()[se].apply(O.toDate("s"),(L?[0,0,0,0]:[23,59,59,999]).slice(oe)),O)},ee=this.$W,W=this.$M,J=this.$D,$="set"+(this.$u?"UTC":"");switch(z){case y:return L?G(1,0):G(31,11);case m:return L?G(1,W):G(0,W+1);case f:var q=this.$locale().weekStart||0,Y=(ee<q?ee+7:ee)-q;return G(L?J-Y:J+(6-Y),W);case h:case g:return Z($+"Hours",0);case u:return Z($+"Minutes",1);case a:return Z($+"Seconds",2);case c:return Z($+"Milliseconds",3);default:return this.clone()}},k.endOf=function(S){return this.startOf(S,!1)},k.$set=function(S,E){var O,L=T.p(S),z="set"+(this.$u?"UTC":""),G=(O={},O[h]=z+"Date",O[g]=z+"Date",O[m]=z+"Month",O[y]=z+"FullYear",O[u]=z+"Hours",O[a]=z+"Minutes",O[c]=z+"Seconds",O[d]=z+"Milliseconds",O)[L],Z=L===h?this.$D+(E-this.$W):E;if(L===m||L===y){var ee=this.clone().set(g,1);ee.$d[G](Z),ee.init(),this.$d=ee.set(g,Math.min(this.$D,ee.daysInMonth())).$d}else G&&this.$d[G](Z);return this.init(),this},k.set=function(S,E){return this.clone().$set(S,E)},k.get=function(S){return this[T.p(S)]()},k.add=function(S,E){var O,L=this;S=Number(S);var z=T.p(E),G=function(W){var J=K(L);return T.w(J.date(J.date()+Math.round(W*S)),L)};if(z===m)return this.set(m,this.$M+S);if(z===y)return this.set(y,this.$y+S);if(z===h)return G(1);if(z===f)return G(7);var Z=(O={},O[a]=i,O[u]=o,O[c]=1e3,O)[z]||1,ee=this.$d.getTime()+S*Z;return T.w(ee,this)},k.subtract=function(S,E){return this.add(-1*S,E)},k.format=function(S){var E=this,O=this.$locale();if(!this.isValid())return O.invalidDate||w;var L=S||"YYYY-MM-DDTHH:mm:ssZ",z=T.z(this),G=this.$H,Z=this.$m,ee=this.$M,W=O.weekdays,J=O.months,$=O.meridiem,q=function(oe,ae,ce,we){return oe&&(oe[ae]||oe(E,L))||ce[ae].slice(0,we)},Y=function(oe){return T.s(G%12||12,oe,"0")},se=$||function(oe,ae,ce){var we=oe<12?"AM":"PM";return ce?we.toLowerCase():we};return L.replace(_,function(oe,ae){return ae||function(ce){switch(ce){case"YY":return String(E.$y).slice(-2);case"YYYY":return T.s(E.$y,4,"0");case"M":return ee+1;case"MM":return T.s(ee+1,2,"0");case"MMM":return q(O.monthsShort,ee,J,3);case"MMMM":return q(J,ee);case"D":return E.$D;case"DD":return T.s(E.$D,2,"0");case"d":return String(E.$W);case"dd":return q(O.weekdaysMin,E.$W,W,2);case"ddd":return q(O.weekdaysShort,E.$W,W,3);case"dddd":return W[E.$W];case"H":return String(G);case"HH":return T.s(G,2,"0");case"h":return Y(1);case"hh":return Y(2);case"a":return se(G,Z,!0);case"A":return se(G,Z,!1);case"m":return String(Z);case"mm":return T.s(Z,2,"0");case"s":return String(E.$s);case"ss":return T.s(E.$s,2,"0");case"SSS":return T.s(E.$ms,3,"0");case"Z":return z}return null}(oe)||z.replace(":","")})},k.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},k.diff=function(S,E,O){var L,z=this,G=T.p(E),Z=K(S),ee=(Z.utcOffset()-this.utcOffset())*i,W=this-Z,J=function(){return T.m(z,Z)};switch(G){case y:L=J()/12;break;case m:L=J();break;case b:L=J()/3;break;case f:L=(W-ee)/6048e5;break;case h:L=(W-ee)/864e5;break;case u:L=W/o;break;case a:L=W/i;break;case c:L=W/1e3;break;default:L=W}return O?L:T.a(L)},k.daysInMonth=function(){return this.endOf(m).$D},k.$locale=function(){return F[this.$L]},k.locale=function(S,E){if(!S)return this.$L;var O=this.clone(),L=Q(S,E,!0);return L&&(O.$L=L),O},k.clone=function(){return T.w(this.$d,this)},k.toDate=function(){return new Date(this.valueOf())},k.toJSON=function(){return this.isValid()?this.toISOString():null},k.toISOString=function(){return this.$d.toISOString()},k.toString=function(){return this.$d.toUTCString()},N}(),A=P.prototype;return K.prototype=A,[["$ms",d],["$s",c],["$m",a],["$H",u],["$W",h],["$M",m],["$y",y],["$D",g]].forEach(function(N){A[N[1]]=function(k){return this.$g(k,N[0],N[1])}}),K.extend=function(N,k){return N.$i||(N(k,P,K),N.$i=!0),K},K.locale=Q,K.isDayjs=U,K.unix=function(N){return K(1e3*N)},K.en=F[I],K.Ls=F,K.p={},K})},{}],392:[function(t,s,l){(function(i,o){typeof l=="object"&&s!==void 0?s.exports=o():(i=typeof globalThis<"u"?globalThis:i||self).dayjs_plugin_customParseFormat=o()})(void 0,function(){var i={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},o=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,d=/\d\d/,c=/\d\d?/,a=/\d*[^-_:/,()\s\d]+/,u={},h=function(x){return(x=+x)+(x>68?1900:2e3)},f=function(x){return function(_){this[x]=+_}},m=[/[+-]\d\d:?(\d\d)?|Z/,function(x){(this.zone||(this.zone={})).offset=function(_){if(!_||_==="Z")return 0;var j=_.match(/([+-]|\d\d)/g),R=60*j[1]+(+j[2]||0);return R===0?0:j[0]==="+"?-R:R}(x)}],b=function(x){var _=u[x];return _&&(_.indexOf?_:_.s.concat(_.f))},y=function(x,_){var j,R=u.meridiem;if(R){for(var M=1;M<=24;M+=1)if(x.indexOf(R(M,0,_))>-1){j=M>12;break}}else j=x===(_?"pm":"PM");return j},g={A:[a,function(x){this.afternoon=y(x,!1)}],a:[a,function(x){this.afternoon=y(x,!0)}],S:[/\d/,function(x){this.milliseconds=100*+x}],SS:[d,function(x){this.milliseconds=10*+x}],SSS:[/\d{3}/,function(x){this.milliseconds=+x}],s:[c,f("seconds")],ss:[c,f("seconds")],m:[c,f("minutes")],mm:[c,f("minutes")],H:[c,f("hours")],h:[c,f("hours")],HH:[c,f("hours")],hh:[c,f("hours")],D:[c,f("day")],DD:[d,f("day")],Do:[a,function(x){var _=u.ordinal,j=x.match(/\d+/);if(this.day=j[0],_)for(var R=1;R<=31;R+=1)_(R).replace(/\[|\]/g,"")===x&&(this.day=R)}],M:[c,f("month")],MM:[d,f("month")],MMM:[a,function(x){var _=b("months"),j=(b("monthsShort")||_.map(function(R){return R.slice(0,3)})).indexOf(x)+1;if(j<1)throw new Error;this.month=j%12||j}],MMMM:[a,function(x){var _=b("months").indexOf(x)+1;if(_<1)throw new Error;this.month=_%12||_}],Y:[/[+-]?\d+/,f("year")],YY:[d,function(x){this.year=h(x)}],YYYY:[/\d{4}/,f("year")],Z:m,ZZ:m};function w(x){var _,j;_=x,j=u&&u.formats;for(var R=(x=_.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(K,T,P){var A=P&&P.toUpperCase();return T||j[P]||i[P]||j[A].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(N,k,S){return k||S.slice(1)})})).match(o),M=R.length,I=0;I<M;I+=1){var F=R[I],B=g[F],U=B&&B[0],Q=B&&B[1];R[I]=Q?{regex:U,parser:Q}:F.replace(/^\[|\]$/g,"")}return function(K){for(var T={},P=0,A=0;P<M;P+=1){var N=R[P];if(typeof N=="string")A+=N.length;else{var k=N.regex,S=N.parser,E=K.slice(A),O=k.exec(E)[0];S.call(T,O),K=K.replace(O,"")}}return function(L){var z=L.afternoon;if(z!==void 0){var G=L.hours;z?G<12&&(L.hours+=12):G===12&&(L.hours=0),delete L.afternoon}}(T),T}}return function(x,_,j){j.p.customParseFormat=!0,x&&x.parseTwoDigitYear&&(h=x.parseTwoDigitYear);var R=_.prototype,M=R.parse;R.parse=function(I){var F=I.date,B=I.utc,U=I.args;this.$u=B;var Q=U[1];if(typeof Q=="string"){var K=U[2]===!0,T=U[3]===!0,P=K||T,A=U[2];T&&(A=U[2]),u=this.$locale(),!K&&A&&(u=j.Ls[A]),this.$d=function(E,O,L){try{if(["x","X"].indexOf(O)>-1)return new Date((O==="X"?1e3:1)*E);var z=w(O)(E),G=z.year,Z=z.month,ee=z.day,W=z.hours,J=z.minutes,$=z.seconds,q=z.milliseconds,Y=z.zone,se=new Date,oe=ee||(G||Z?1:se.getDate()),ae=G||se.getFullYear(),ce=0;G&&!Z||(ce=Z>0?Z-1:se.getMonth());var we=W||0,fe=J||0,re=$||0,ge=q||0;return Y?new Date(Date.UTC(ae,ce,oe,we,fe,re,ge+60*Y.offset*1e3)):L?new Date(Date.UTC(ae,ce,oe,we,fe,re,ge)):new Date(ae,ce,oe,we,fe,re,ge)}catch{return new Date("")}}(F,Q,B),this.init(),A&&A!==!0&&(this.$L=this.locale(A).$L),P&&F!=this.format(Q)&&(this.$d=new Date("")),u={}}else if(Q instanceof Array)for(var N=Q.length,k=1;k<=N;k+=1){U[1]=Q[k-1];var S=j.apply(this,U);if(S.isValid()){this.$d=S.$d,this.$L=S.$L,this.init();break}k===N&&(this.$d=new Date(""))}else M.call(this,I)}}})},{}],393:[function(t,s,l){(function(i,o){typeof l=="object"&&s!==void 0?s.exports=o():(i=typeof globalThis<"u"?globalThis:i||self).dayjs_plugin_utc=o()})(void 0,function(){var i="minute",o=/[+-]\d\d(?::?\d\d)?/g,d=/([+-]|\d\d)/g;return function(c,a,u){var h=a.prototype;u.utc=function(x){var _={date:x,utc:!0,args:arguments};return new a(_)},h.utc=function(x){var _=u(this.toDate(),{locale:this.$L,utc:!0});return x?_.add(this.utcOffset(),i):_},h.local=function(){return u(this.toDate(),{locale:this.$L,utc:!1})};var f=h.parse;h.parse=function(x){x.utc&&(this.$u=!0),this.$utils().u(x.$offset)||(this.$offset=x.$offset),f.call(this,x)};var m=h.init;h.init=function(){if(this.$u){var x=this.$d;this.$y=x.getUTCFullYear(),this.$M=x.getUTCMonth(),this.$D=x.getUTCDate(),this.$W=x.getUTCDay(),this.$H=x.getUTCHours(),this.$m=x.getUTCMinutes(),this.$s=x.getUTCSeconds(),this.$ms=x.getUTCMilliseconds()}else m.call(this)};var b=h.utcOffset;h.utcOffset=function(x,_){var j=this.$utils().u;if(j(x))return this.$u?0:j(this.$offset)?b.call(this):this.$offset;if(typeof x=="string"&&(x=function(F){F===void 0&&(F="");var B=F.match(o);if(!B)return null;var U=(""+B[0]).match(d)||["-",0,0],Q=U[0],K=60*+U[1]+ +U[2];return K===0?0:Q==="+"?K:-K}(x))===null)return this;var R=Math.abs(x)<=16?60*x:x,M=this;if(_)return M.$offset=R,M.$u=x===0,M;if(x!==0){var I=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(M=this.local().add(R+I,i)).$offset=R,M.$x.$localOffset=I}else M=this.utc();return M};var y=h.format;h.format=function(x){var _=x||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return y.call(this,_)},h.valueOf=function(){var x=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*x},h.isUTC=function(){return!!this.$u},h.toISOString=function(){return this.toDate().toISOString()},h.toString=function(){return this.toDate().toUTCString()};var g=h.toDate;h.toDate=function(x){return x==="s"&&this.$offset?u(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():g.call(this)};var w=h.diff;h.diff=function(x,_,j){if(x&&this.$u===x.$u)return w.call(this,x,_,j);var R=this.local(),M=u(x).local();return w.call(R,M,_,j)}}})},{}],394:[function(t,s,l){l.utils=t("./des/utils"),l.Cipher=t("./des/cipher"),l.DES=t("./des/des"),l.CBC=t("./des/cbc"),l.EDE=t("./des/ede")},{"./des/cbc":395,"./des/cipher":396,"./des/des":397,"./des/ede":398,"./des/utils":399}],395:[function(t,s,l){var i=t("minimalistic-assert"),o=t("inherits"),d={};function c(a){i.equal(a.length,8,"Invalid IV length"),this.iv=new Array(8);for(var u=0;u<this.iv.length;u++)this.iv[u]=a[u]}l.instantiate=function(a){function u(b){a.call(this,b),this._cbcInit()}o(u,a);for(var h=Object.keys(d),f=0;f<h.length;f++){var m=h[f];u.prototype[m]=d[m]}return u.create=function(b){return new u(b)},u},d._cbcInit=function(){var a=new c(this.options.iv);this._cbcState=a},d._update=function(a,u,h,f){var m=this._cbcState,b=this.constructor.super_.prototype,y=m.iv;if(this.type==="encrypt"){for(var g=0;g<this.blockSize;g++)y[g]^=a[u+g];for(b._update.call(this,y,0,h,f),g=0;g<this.blockSize;g++)y[g]=h[f+g]}else{for(b._update.call(this,a,u,h,f),g=0;g<this.blockSize;g++)h[f+g]^=y[g];for(g=0;g<this.blockSize;g++)y[g]=a[u+g]}}},{inherits:440,"minimalistic-assert":453}],396:[function(t,s,l){var i=t("minimalistic-assert");function o(d){this.options=d,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=d.padding!==!1}s.exports=o,o.prototype._init=function(){},o.prototype.update=function(d){return d.length===0?[]:this.type==="decrypt"?this._updateDecrypt(d):this._updateEncrypt(d)},o.prototype._buffer=function(d,c){for(var a=Math.min(this.buffer.length-this.bufferOff,d.length-c),u=0;u<a;u++)this.buffer[this.bufferOff+u]=d[c+u];return this.bufferOff+=a,a},o.prototype._flushBuffer=function(d,c){return this._update(this.buffer,0,d,c),this.bufferOff=0,this.blockSize},o.prototype._updateEncrypt=function(d){var c=0,a=0,u=(this.bufferOff+d.length)/this.blockSize|0,h=new Array(u*this.blockSize);this.bufferOff!==0&&(c+=this._buffer(d,c),this.bufferOff===this.buffer.length&&(a+=this._flushBuffer(h,a)));for(var f=d.length-(d.length-c)%this.blockSize;c<f;c+=this.blockSize)this._update(d,c,h,a),a+=this.blockSize;for(;c<d.length;c++,this.bufferOff++)this.buffer[this.bufferOff]=d[c];return h},o.prototype._updateDecrypt=function(d){for(var c=0,a=0,u=Math.ceil((this.bufferOff+d.length)/this.blockSize)-1,h=new Array(u*this.blockSize);u>0;u--)c+=this._buffer(d,c),a+=this._flushBuffer(h,a);return c+=this._buffer(d,c),h},o.prototype.final=function(d){var c,a;return d&&(c=this.update(d)),a=this.type==="encrypt"?this._finalEncrypt():this._finalDecrypt(),c?c.concat(a):a},o.prototype._pad=function(d,c){if(c===0)return!1;for(;c<d.length;)d[c++]=0;return!0},o.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var d=new Array(this.blockSize);return this._update(this.buffer,0,d,0),d},o.prototype._unpad=function(d){return d},o.prototype._finalDecrypt=function(){i.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var d=new Array(this.blockSize);return this._flushBuffer(d,0),this._unpad(d)}},{"minimalistic-assert":453}],397:[function(t,s,l){var i=t("minimalistic-assert"),o=t("inherits"),d=t("./utils"),c=t("./cipher");function a(){this.tmp=new Array(2),this.keys=null}function u(f){c.call(this,f);var m=new a;this._desState=m,this.deriveKeys(m,f.key)}o(u,c),s.exports=u,u.create=function(f){return new u(f)};var h=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];u.prototype.deriveKeys=function(f,m){f.keys=new Array(32),i.equal(m.length,this.blockSize,"Invalid key length");var b=d.readUInt32BE(m,0),y=d.readUInt32BE(m,4);d.pc1(b,y,f.tmp,0),b=f.tmp[0],y=f.tmp[1];for(var g=0;g<f.keys.length;g+=2){var w=h[g>>>1];b=d.r28shl(b,w),y=d.r28shl(y,w),d.pc2(b,y,f.keys,g)}},u.prototype._update=function(f,m,b,y){var g=this._desState,w=d.readUInt32BE(f,m),x=d.readUInt32BE(f,m+4);d.ip(w,x,g.tmp,0),w=g.tmp[0],x=g.tmp[1],this.type==="encrypt"?this._encrypt(g,w,x,g.tmp,0):this._decrypt(g,w,x,g.tmp,0),w=g.tmp[0],x=g.tmp[1],d.writeUInt32BE(b,w,y),d.writeUInt32BE(b,x,y+4)},u.prototype._pad=function(f,m){if(this.padding===!1)return!1;for(var b=f.length-m,y=m;y<f.length;y++)f[y]=b;return!0},u.prototype._unpad=function(f){if(this.padding===!1)return f;for(var m=f[f.length-1],b=f.length-m;b<f.length;b++)i.equal(f[b],m);return f.slice(0,f.length-m)},u.prototype._encrypt=function(f,m,b,y,g){for(var w=m,x=b,_=0;_<f.keys.length;_+=2){var j=f.keys[_],R=f.keys[_+1];d.expand(x,f.tmp,0),j^=f.tmp[0],R^=f.tmp[1];var M=d.substitute(j,R),I=x;x=(w^d.permute(M))>>>0,w=I}d.rip(x,w,y,g)},u.prototype._decrypt=function(f,m,b,y,g){for(var w=b,x=m,_=f.keys.length-2;_>=0;_-=2){var j=f.keys[_],R=f.keys[_+1];d.expand(w,f.tmp,0),j^=f.tmp[0],R^=f.tmp[1];var M=d.substitute(j,R),I=w;w=(x^d.permute(M))>>>0,x=I}d.rip(w,x,y,g)}},{"./cipher":396,"./utils":399,inherits:440,"minimalistic-assert":453}],398:[function(t,s,l){var i=t("minimalistic-assert"),o=t("inherits"),d=t("./cipher"),c=t("./des");function a(h,f){i.equal(f.length,24,"Invalid key length");var m=f.slice(0,8),b=f.slice(8,16),y=f.slice(16,24);this.ciphers=h==="encrypt"?[c.create({type:"encrypt",key:m}),c.create({type:"decrypt",key:b}),c.create({type:"encrypt",key:y})]:[c.create({type:"decrypt",key:y}),c.create({type:"encrypt",key:b}),c.create({type:"decrypt",key:m})]}function u(h){d.call(this,h);var f=new a(this.type,this.options.key);this._edeState=f}o(u,d),s.exports=u,u.create=function(h){return new u(h)},u.prototype._update=function(h,f,m,b){var y=this._edeState;y.ciphers[0]._update(h,f,m,b),y.ciphers[1]._update(m,b,m,b),y.ciphers[2]._update(m,b,m,b)},u.prototype._pad=c.prototype._pad,u.prototype._unpad=c.prototype._unpad},{"./cipher":396,"./des":397,inherits:440,"minimalistic-assert":453}],399:[function(t,s,l){l.readUInt32BE=function(c,a){return(c[0+a]<<24|c[1+a]<<16|c[2+a]<<8|c[3+a])>>>0},l.writeUInt32BE=function(c,a,u){c[0+u]=a>>>24,c[1+u]=a>>>16&255,c[2+u]=a>>>8&255,c[3+u]=255&a},l.ip=function(c,a,u,h){for(var f=0,m=0,b=6;b>=0;b-=2){for(var y=0;y<=24;y+=8)f<<=1,f|=a>>>y+b&1;for(y=0;y<=24;y+=8)f<<=1,f|=c>>>y+b&1}for(b=6;b>=0;b-=2){for(y=1;y<=25;y+=8)m<<=1,m|=a>>>y+b&1;for(y=1;y<=25;y+=8)m<<=1,m|=c>>>y+b&1}u[h+0]=f>>>0,u[h+1]=m>>>0},l.rip=function(c,a,u,h){for(var f=0,m=0,b=0;b<4;b++)for(var y=24;y>=0;y-=8)f<<=1,f|=a>>>y+b&1,f<<=1,f|=c>>>y+b&1;for(b=4;b<8;b++)for(y=24;y>=0;y-=8)m<<=1,m|=a>>>y+b&1,m<<=1,m|=c>>>y+b&1;u[h+0]=f>>>0,u[h+1]=m>>>0},l.pc1=function(c,a,u,h){for(var f=0,m=0,b=7;b>=5;b--){for(var y=0;y<=24;y+=8)f<<=1,f|=a>>y+b&1;for(y=0;y<=24;y+=8)f<<=1,f|=c>>y+b&1}for(y=0;y<=24;y+=8)f<<=1,f|=a>>y+b&1;for(b=1;b<=3;b++){for(y=0;y<=24;y+=8)m<<=1,m|=a>>y+b&1;for(y=0;y<=24;y+=8)m<<=1,m|=c>>y+b&1}for(y=0;y<=24;y+=8)m<<=1,m|=c>>y+b&1;u[h+0]=f>>>0,u[h+1]=m>>>0},l.r28shl=function(c,a){return c<<a&268435455|c>>>28-a};var i=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];l.pc2=function(c,a,u,h){for(var f=0,m=0,b=i.length>>>1,y=0;y<b;y++)f<<=1,f|=c>>>i[y]&1;for(y=b;y<i.length;y++)m<<=1,m|=a>>>i[y]&1;u[h+0]=f>>>0,u[h+1]=m>>>0},l.expand=function(c,a,u){var h=0,f=0;h=(1&c)<<5|c>>>27;for(var m=23;m>=15;m-=4)h<<=6,h|=c>>>m&63;for(m=11;m>=3;m-=4)f|=c>>>m&63,f<<=6;f|=(31&c)<<1|c>>>31,a[u+0]=h>>>0,a[u+1]=f>>>0};var o=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];l.substitute=function(c,a){for(var u=0,h=0;h<4;h++)u<<=4,u|=o[64*h+(c>>>18-6*h&63)];for(h=0;h<4;h++)u<<=4,u|=o[256+64*h+(a>>>18-6*h&63)];return u>>>0};var d=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];l.permute=function(c){for(var a=0,u=0;u<d.length;u++)a<<=1,a|=c>>>d[u]&1;return a>>>0},l.padSplit=function(c,a,u){for(var h=c.toString(2);h.length<a;)h="0"+h;for(var f=[],m=0;m<a;m+=u)f.push(h.slice(m,m+u));return f.join(" ")}},{}],400:[function(t,s,l){(function(i){(function(){var o=t("./lib/generatePrime"),d=t("./lib/primes.json"),c=t("./lib/dh"),a={binary:!0,hex:!0,base64:!0};l.DiffieHellmanGroup=l.createDiffieHellmanGroup=l.getDiffieHellman=function(u){var h=new i(d[u].prime,"hex"),f=new i(d[u].gen,"hex");return new c(h,f)},l.createDiffieHellman=l.DiffieHellman=function u(h,f,m,b){return i.isBuffer(f)||a[f]===void 0?u(h,"binary",f,m):(f=f||"binary",b=b||"binary",m=m||new i([2]),i.isBuffer(m)||(m=new i(m,b)),typeof h=="number"?new c(o(h,m),m,!0):(i.isBuffer(h)||(h=new i(h,f)),new c(h,m,!0)))}}).call(this)}).call(this,t("buffer").Buffer)},{"./lib/dh":401,"./lib/generatePrime":402,"./lib/primes.json":403,buffer:220}],401:[function(t,s,l){(function(i){(function(){var o=t("bn.js"),d=new(t("miller-rabin")),c=new o(24),a=new o(11),u=new o(10),h=new o(3),f=new o(7),m=t("./generatePrime"),b=t("randombytes");function y(j,R){return R=R||"utf8",i.isBuffer(j)||(j=new i(j,R)),this._pub=new o(j),this}function g(j,R){return R=R||"utf8",i.isBuffer(j)||(j=new i(j,R)),this._priv=new o(j),this}s.exports=x;var w={};function x(j,R,M){this.setGenerator(R),this.__prime=new o(j),this._prime=o.mont(this.__prime),this._primeLen=j.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,M?(this.setPublicKey=y,this.setPrivateKey=g):this._primeCode=8}function _(j,R){var M=new i(j.toArray());return R?M.toString(R):M}Object.defineProperty(x.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=function(j,R){var M=R.toString("hex"),I=[M,j.toString(16)].join("_");if(I in w)return w[I];var F,B=0;if(j.isEven()||!m.simpleSieve||!m.fermatTest(j)||!d.test(j))return B+=1,B+=M==="02"||M==="05"?8:4,w[I]=B,B;switch(d.test(j.shrn(1))||(B+=2),M){case"02":j.mod(c).cmp(a)&&(B+=8);break;case"05":(F=j.mod(u)).cmp(h)&&F.cmp(f)&&(B+=8);break;default:B+=4}return w[I]=B,B}(this.__prime,this.__gen)),this._primeCode}}),x.prototype.generateKeys=function(){return this._priv||(this._priv=new o(b(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},x.prototype.computeSecret=function(j){var R=(j=(j=new o(j)).toRed(this._prime)).redPow(this._priv).fromRed(),M=new i(R.toArray()),I=this.getPrime();if(M.length<I.length){var F=new i(I.length-M.length);F.fill(0),M=i.concat([F,M])}return M},x.prototype.getPublicKey=function(j){return _(this._pub,j)},x.prototype.getPrivateKey=function(j){return _(this._priv,j)},x.prototype.getPrime=function(j){return _(this.__prime,j)},x.prototype.getGenerator=function(j){return _(this._gen,j)},x.prototype.setGenerator=function(j,R){return R=R||"utf8",i.isBuffer(j)||(j=new i(j,R)),this.__gen=j,this._gen=new o(j),this}}).call(this)}).call(this,t("buffer").Buffer)},{"./generatePrime":402,"bn.js":404,buffer:220,"miller-rabin":451,randombytes:475}],402:[function(t,s,l){var i=t("randombytes");s.exports=j,j.simpleSieve=x,j.fermatTest=_;var o=t("bn.js"),d=new o(24),c=new(t("miller-rabin")),a=new o(1),u=new o(2),h=new o(5),f=(new o(16),new o(8),new o(10)),m=new o(3),b=(new o(7),new o(11)),y=new o(4),g=(new o(12),null);function w(){if(g!==null)return g;var R=[];R[0]=2;for(var M=1,I=3;I<1048576;I+=2){for(var F=Math.ceil(Math.sqrt(I)),B=0;B<M&&R[B]<=F&&I%R[B]!=0;B++);M!==B&&R[B]<=F||(R[M++]=I)}return g=R,R}function x(R){for(var M=w(),I=0;I<M.length;I++)if(R.modn(M[I])===0)return R.cmpn(M[I])===0;return!0}function _(R){var M=o.mont(R);return u.toRed(M).redPow(R.subn(1)).fromRed().cmpn(1)===0}function j(R,M){if(R<16)return new o(M===2||M===5?[140,123]:[140,39]);var I,F;for(M=new o(M);;){for(I=new o(i(Math.ceil(R/8)));I.bitLength()>R;)I.ishrn(1);if(I.isEven()&&I.iadd(a),I.testn(1)||I.iadd(u),M.cmp(u)){if(!M.cmp(h))for(;I.mod(f).cmp(m);)I.iadd(y)}else for(;I.mod(d).cmp(b);)I.iadd(y);if(x(F=I.shrn(1))&&x(I)&&_(F)&&_(I)&&c.test(F)&&c.test(I))return I}}},{"bn.js":404,"miller-rabin":451,randombytes:475}],403:[function(t,s,l){s.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}},{}],404:[function(t,s,l){arguments[4][184][0].apply(l,arguments)},{buffer:188,dup:184}],405:[function(t,s,l){var i=l;i.version=t("../package.json").version,i.utils=t("./elliptic/utils"),i.rand=t("brorand"),i.curve=t("./elliptic/curve"),i.curves=t("./elliptic/curves"),i.ec=t("./elliptic/ec"),i.eddsa=t("./elliptic/eddsa")},{"../package.json":421,"./elliptic/curve":408,"./elliptic/curves":411,"./elliptic/ec":412,"./elliptic/eddsa":415,"./elliptic/utils":419,brorand:187}],406:[function(t,s,l){var i=t("bn.js"),o=t("../utils"),d=o.getNAF,c=o.getJSF,a=o.assert;function u(f,m){this.type=f,this.p=new i(m.p,16),this.red=m.prime?i.red(m.prime):i.mont(this.p),this.zero=new i(0).toRed(this.red),this.one=new i(1).toRed(this.red),this.two=new i(2).toRed(this.red),this.n=m.n&&new i(m.n,16),this.g=m.g&&this.pointFromJSON(m.g,m.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var b=this.n&&this.p.div(this.n);!b||b.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function h(f,m){this.curve=f,this.type=m,this.precomputed=null}s.exports=u,u.prototype.point=function(){throw new Error("Not implemented")},u.prototype.validate=function(){throw new Error("Not implemented")},u.prototype._fixedNafMul=function(f,m){a(f.precomputed);var b=f._getDoubles(),y=d(m,1,this._bitLength),g=(1<<b.step+1)-(b.step%2==0?2:1);g/=3;var w,x,_=[];for(w=0;w<y.length;w+=b.step){x=0;for(var j=w+b.step-1;j>=w;j--)x=(x<<1)+y[j];_.push(x)}for(var R=this.jpoint(null,null,null),M=this.jpoint(null,null,null),I=g;I>0;I--){for(w=0;w<_.length;w++)(x=_[w])===I?M=M.mixedAdd(b.points[w]):x===-I&&(M=M.mixedAdd(b.points[w].neg()));R=R.add(M)}return R.toP()},u.prototype._wnafMul=function(f,m){var b=4,y=f._getNAFPoints(b);b=y.wnd;for(var g=y.points,w=d(m,b,this._bitLength),x=this.jpoint(null,null,null),_=w.length-1;_>=0;_--){for(var j=0;_>=0&&w[_]===0;_--)j++;if(_>=0&&j++,x=x.dblp(j),_<0)break;var R=w[_];a(R!==0),x=f.type==="affine"?R>0?x.mixedAdd(g[R-1>>1]):x.mixedAdd(g[-R-1>>1].neg()):R>0?x.add(g[R-1>>1]):x.add(g[-R-1>>1].neg())}return f.type==="affine"?x.toP():x},u.prototype._wnafMulAdd=function(f,m,b,y,g){var w,x,_,j=this._wnafT1,R=this._wnafT2,M=this._wnafT3,I=0;for(w=0;w<y;w++){var F=(_=m[w])._getNAFPoints(f);j[w]=F.wnd,R[w]=F.points}for(w=y-1;w>=1;w-=2){var B=w-1,U=w;if(j[B]===1&&j[U]===1){var Q=[m[B],null,null,m[U]];m[B].y.cmp(m[U].y)===0?(Q[1]=m[B].add(m[U]),Q[2]=m[B].toJ().mixedAdd(m[U].neg())):m[B].y.cmp(m[U].y.redNeg())===0?(Q[1]=m[B].toJ().mixedAdd(m[U]),Q[2]=m[B].add(m[U].neg())):(Q[1]=m[B].toJ().mixedAdd(m[U]),Q[2]=m[B].toJ().mixedAdd(m[U].neg()));var K=[-3,-1,-5,-7,0,7,5,1,3],T=c(b[B],b[U]);for(I=Math.max(T[0].length,I),M[B]=new Array(I),M[U]=new Array(I),x=0;x<I;x++){var P=0|T[0][x],A=0|T[1][x];M[B][x]=K[3*(P+1)+(A+1)],M[U][x]=0,R[B]=Q}}else M[B]=d(b[B],j[B],this._bitLength),M[U]=d(b[U],j[U],this._bitLength),I=Math.max(M[B].length,I),I=Math.max(M[U].length,I)}var N=this.jpoint(null,null,null),k=this._wnafT4;for(w=I;w>=0;w--){for(var S=0;w>=0;){var E=!0;for(x=0;x<y;x++)k[x]=0|M[x][w],k[x]!==0&&(E=!1);if(!E)break;S++,w--}if(w>=0&&S++,N=N.dblp(S),w<0)break;for(x=0;x<y;x++){var O=k[x];O!==0&&(O>0?_=R[x][O-1>>1]:O<0&&(_=R[x][-O-1>>1].neg()),N=_.type==="affine"?N.mixedAdd(_):N.add(_))}}for(w=0;w<y;w++)R[w]=null;return g?N:N.toP()},u.BasePoint=h,h.prototype.eq=function(){throw new Error("Not implemented")},h.prototype.validate=function(){return this.curve.validate(this)},u.prototype.decodePoint=function(f,m){f=o.toArray(f,m);var b=this.p.byteLength();if((f[0]===4||f[0]===6||f[0]===7)&&f.length-1==2*b)return f[0]===6?a(f[f.length-1]%2==0):f[0]===7&&a(f[f.length-1]%2==1),this.point(f.slice(1,1+b),f.slice(1+b,1+2*b));if((f[0]===2||f[0]===3)&&f.length-1===b)return this.pointFromX(f.slice(1,1+b),f[0]===3);throw new Error("Unknown point format")},h.prototype.encodeCompressed=function(f){return this.encode(f,!0)},h.prototype._encode=function(f){var m=this.curve.p.byteLength(),b=this.getX().toArray("be",m);return f?[this.getY().isEven()?2:3].concat(b):[4].concat(b,this.getY().toArray("be",m))},h.prototype.encode=function(f,m){return o.encode(this._encode(m),f)},h.prototype.precompute=function(f){if(this.precomputed)return this;var m={doubles:null,naf:null,beta:null};return m.naf=this._getNAFPoints(8),m.doubles=this._getDoubles(4,f),m.beta=this._getBeta(),this.precomputed=m,this},h.prototype._hasDoubles=function(f){if(!this.precomputed)return!1;var m=this.precomputed.doubles;return!!m&&m.points.length>=Math.ceil((f.bitLength()+1)/m.step)},h.prototype._getDoubles=function(f,m){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var b=[this],y=this,g=0;g<m;g+=f){for(var w=0;w<f;w++)y=y.dbl();b.push(y)}return{step:f,points:b}},h.prototype._getNAFPoints=function(f){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var m=[this],b=(1<<f)-1,y=b===1?null:this.dbl(),g=1;g<b;g++)m[g]=m[g-1].add(y);return{wnd:f,points:m}},h.prototype._getBeta=function(){return null},h.prototype.dblp=function(f){for(var m=this,b=0;b<f;b++)m=m.dbl();return m}},{"../utils":419,"bn.js":420}],407:[function(t,s,l){var i=t("../utils"),o=t("bn.js"),d=t("inherits"),c=t("./base"),a=i.assert;function u(f){this.twisted=(0|f.a)!=1,this.mOneA=this.twisted&&(0|f.a)==-1,this.extended=this.mOneA,c.call(this,"edwards",f),this.a=new o(f.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new o(f.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new o(f.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),a(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(0|f.c)==1}function h(f,m,b,y,g){c.BasePoint.call(this,f,"projective"),m===null&&b===null&&y===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new o(m,16),this.y=new o(b,16),this.z=y?new o(y,16):this.curve.one,this.t=g&&new o(g,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}d(u,c),s.exports=u,u.prototype._mulA=function(f){return this.mOneA?f.redNeg():this.a.redMul(f)},u.prototype._mulC=function(f){return this.oneC?f:this.c.redMul(f)},u.prototype.jpoint=function(f,m,b,y){return this.point(f,m,b,y)},u.prototype.pointFromX=function(f,m){(f=new o(f,16)).red||(f=f.toRed(this.red));var b=f.redSqr(),y=this.c2.redSub(this.a.redMul(b)),g=this.one.redSub(this.c2.redMul(this.d).redMul(b)),w=y.redMul(g.redInvm()),x=w.redSqrt();if(x.redSqr().redSub(w).cmp(this.zero)!==0)throw new Error("invalid point");var _=x.fromRed().isOdd();return(m&&!_||!m&&_)&&(x=x.redNeg()),this.point(f,x)},u.prototype.pointFromY=function(f,m){(f=new o(f,16)).red||(f=f.toRed(this.red));var b=f.redSqr(),y=b.redSub(this.c2),g=b.redMul(this.d).redMul(this.c2).redSub(this.a),w=y.redMul(g.redInvm());if(w.cmp(this.zero)===0){if(m)throw new Error("invalid point");return this.point(this.zero,f)}var x=w.redSqrt();if(x.redSqr().redSub(w).cmp(this.zero)!==0)throw new Error("invalid point");return x.fromRed().isOdd()!==m&&(x=x.redNeg()),this.point(x,f)},u.prototype.validate=function(f){if(f.isInfinity())return!0;f.normalize();var m=f.x.redSqr(),b=f.y.redSqr(),y=m.redMul(this.a).redAdd(b),g=this.c2.redMul(this.one.redAdd(this.d.redMul(m).redMul(b)));return y.cmp(g)===0},d(h,c.BasePoint),u.prototype.pointFromJSON=function(f){return h.fromJSON(this,f)},u.prototype.point=function(f,m,b,y){return new h(this,f,m,b,y)},h.fromJSON=function(f,m){return new h(f,m[0],m[1],m[2])},h.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},h.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},h.prototype._extDbl=function(){var f=this.x.redSqr(),m=this.y.redSqr(),b=this.z.redSqr();b=b.redIAdd(b);var y=this.curve._mulA(f),g=this.x.redAdd(this.y).redSqr().redISub(f).redISub(m),w=y.redAdd(m),x=w.redSub(b),_=y.redSub(m),j=g.redMul(x),R=w.redMul(_),M=g.redMul(_),I=x.redMul(w);return this.curve.point(j,R,I,M)},h.prototype._projDbl=function(){var f,m,b,y,g,w,x=this.x.redAdd(this.y).redSqr(),_=this.x.redSqr(),j=this.y.redSqr();if(this.curve.twisted){var R=(y=this.curve._mulA(_)).redAdd(j);this.zOne?(f=x.redSub(_).redSub(j).redMul(R.redSub(this.curve.two)),m=R.redMul(y.redSub(j)),b=R.redSqr().redSub(R).redSub(R)):(g=this.z.redSqr(),w=R.redSub(g).redISub(g),f=x.redSub(_).redISub(j).redMul(w),m=R.redMul(y.redSub(j)),b=R.redMul(w))}else y=_.redAdd(j),g=this.curve._mulC(this.z).redSqr(),w=y.redSub(g).redSub(g),f=this.curve._mulC(x.redISub(y)).redMul(w),m=this.curve._mulC(y).redMul(_.redISub(j)),b=y.redMul(w);return this.curve.point(f,m,b)},h.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},h.prototype._extAdd=function(f){var m=this.y.redSub(this.x).redMul(f.y.redSub(f.x)),b=this.y.redAdd(this.x).redMul(f.y.redAdd(f.x)),y=this.t.redMul(this.curve.dd).redMul(f.t),g=this.z.redMul(f.z.redAdd(f.z)),w=b.redSub(m),x=g.redSub(y),_=g.redAdd(y),j=b.redAdd(m),R=w.redMul(x),M=_.redMul(j),I=w.redMul(j),F=x.redMul(_);return this.curve.point(R,M,F,I)},h.prototype._projAdd=function(f){var m,b,y=this.z.redMul(f.z),g=y.redSqr(),w=this.x.redMul(f.x),x=this.y.redMul(f.y),_=this.curve.d.redMul(w).redMul(x),j=g.redSub(_),R=g.redAdd(_),M=this.x.redAdd(this.y).redMul(f.x.redAdd(f.y)).redISub(w).redISub(x),I=y.redMul(j).redMul(M);return this.curve.twisted?(m=y.redMul(R).redMul(x.redSub(this.curve._mulA(w))),b=j.redMul(R)):(m=y.redMul(R).redMul(x.redSub(w)),b=this.curve._mulC(j).redMul(R)),this.curve.point(I,m,b)},h.prototype.add=function(f){return this.isInfinity()?f:f.isInfinity()?this:this.curve.extended?this._extAdd(f):this._projAdd(f)},h.prototype.mul=function(f){return this._hasDoubles(f)?this.curve._fixedNafMul(this,f):this.curve._wnafMul(this,f)},h.prototype.mulAdd=function(f,m,b){return this.curve._wnafMulAdd(1,[this,m],[f,b],2,!1)},h.prototype.jmulAdd=function(f,m,b){return this.curve._wnafMulAdd(1,[this,m],[f,b],2,!0)},h.prototype.normalize=function(){if(this.zOne)return this;var f=this.z.redInvm();return this.x=this.x.redMul(f),this.y=this.y.redMul(f),this.t&&(this.t=this.t.redMul(f)),this.z=this.curve.one,this.zOne=!0,this},h.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},h.prototype.getX=function(){return this.normalize(),this.x.fromRed()},h.prototype.getY=function(){return this.normalize(),this.y.fromRed()},h.prototype.eq=function(f){return this===f||this.getX().cmp(f.getX())===0&&this.getY().cmp(f.getY())===0},h.prototype.eqXToP=function(f){var m=f.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(m)===0)return!0;for(var b=f.clone(),y=this.curve.redN.redMul(this.z);;){if(b.iadd(this.curve.n),b.cmp(this.curve.p)>=0)return!1;if(m.redIAdd(y),this.x.cmp(m)===0)return!0}},h.prototype.toP=h.prototype.normalize,h.prototype.mixedAdd=h.prototype.add},{"../utils":419,"./base":406,"bn.js":420,inherits:440}],408:[function(t,s,l){var i=l;i.base=t("./base"),i.short=t("./short"),i.mont=t("./mont"),i.edwards=t("./edwards")},{"./base":406,"./edwards":407,"./mont":409,"./short":410}],409:[function(t,s,l){var i=t("bn.js"),o=t("inherits"),d=t("./base"),c=t("../utils");function a(h){d.call(this,"mont",h),this.a=new i(h.a,16).toRed(this.red),this.b=new i(h.b,16).toRed(this.red),this.i4=new i(4).toRed(this.red).redInvm(),this.two=new i(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function u(h,f,m){d.BasePoint.call(this,h,"projective"),f===null&&m===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new i(f,16),this.z=new i(m,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}o(a,d),s.exports=a,a.prototype.validate=function(h){var f=h.normalize().x,m=f.redSqr(),b=m.redMul(f).redAdd(m.redMul(this.a)).redAdd(f);return b.redSqrt().redSqr().cmp(b)===0},o(u,d.BasePoint),a.prototype.decodePoint=function(h,f){return this.point(c.toArray(h,f),1)},a.prototype.point=function(h,f){return new u(this,h,f)},a.prototype.pointFromJSON=function(h){return u.fromJSON(this,h)},u.prototype.precompute=function(){},u.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},u.fromJSON=function(h,f){return new u(h,f[0],f[1]||h.one)},u.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},u.prototype.isInfinity=function(){return this.z.cmpn(0)===0},u.prototype.dbl=function(){var h=this.x.redAdd(this.z).redSqr(),f=this.x.redSub(this.z).redSqr(),m=h.redSub(f),b=h.redMul(f),y=m.redMul(f.redAdd(this.curve.a24.redMul(m)));return this.curve.point(b,y)},u.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.diffAdd=function(h,f){var m=this.x.redAdd(this.z),b=this.x.redSub(this.z),y=h.x.redAdd(h.z),g=h.x.redSub(h.z).redMul(m),w=y.redMul(b),x=f.z.redMul(g.redAdd(w).redSqr()),_=f.x.redMul(g.redISub(w).redSqr());return this.curve.point(x,_)},u.prototype.mul=function(h){for(var f=h.clone(),m=this,b=this.curve.point(null,null),y=[];f.cmpn(0)!==0;f.iushrn(1))y.push(f.andln(1));for(var g=y.length-1;g>=0;g--)y[g]===0?(m=m.diffAdd(b,this),b=b.dbl()):(b=m.diffAdd(b,this),m=m.dbl());return b},u.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.eq=function(h){return this.getX().cmp(h.getX())===0},u.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},u.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},{"../utils":419,"./base":406,"bn.js":420,inherits:440}],410:[function(t,s,l){var i=t("../utils"),o=t("bn.js"),d=t("inherits"),c=t("./base"),a=i.assert;function u(m){c.call(this,"short",m),this.a=new o(m.a,16).toRed(this.red),this.b=new o(m.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(m),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function h(m,b,y,g){c.BasePoint.call(this,m,"affine"),b===null&&y===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new o(b,16),this.y=new o(y,16),g&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function f(m,b,y,g){c.BasePoint.call(this,m,"jacobian"),b===null&&y===null&&g===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new o(0)):(this.x=new o(b,16),this.y=new o(y,16),this.z=new o(g,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}d(u,c),s.exports=u,u.prototype._getEndomorphism=function(m){if(this.zeroA&&this.g&&this.n&&this.p.modn(3)===1){var b,y;if(m.beta)b=new o(m.beta,16).toRed(this.red);else{var g=this._getEndoRoots(this.p);b=(b=g[0].cmp(g[1])<0?g[0]:g[1]).toRed(this.red)}if(m.lambda)y=new o(m.lambda,16);else{var w=this._getEndoRoots(this.n);this.g.mul(w[0]).x.cmp(this.g.x.redMul(b))===0?y=w[0]:(y=w[1],a(this.g.mul(y).x.cmp(this.g.x.redMul(b))===0))}return{beta:b,lambda:y,basis:m.basis?m.basis.map(function(x){return{a:new o(x.a,16),b:new o(x.b,16)}}):this._getEndoBasis(y)}}},u.prototype._getEndoRoots=function(m){var b=m===this.p?this.red:o.mont(m),y=new o(2).toRed(b).redInvm(),g=y.redNeg(),w=new o(3).toRed(b).redNeg().redSqrt().redMul(y);return[g.redAdd(w).fromRed(),g.redSub(w).fromRed()]},u.prototype._getEndoBasis=function(m){for(var b,y,g,w,x,_,j,R,M,I=this.n.ushrn(Math.floor(this.n.bitLength()/2)),F=m,B=this.n.clone(),U=new o(1),Q=new o(0),K=new o(0),T=new o(1),P=0;F.cmpn(0)!==0;){var A=B.div(F);R=B.sub(A.mul(F)),M=K.sub(A.mul(U));var N=T.sub(A.mul(Q));if(!g&&R.cmp(I)<0)b=j.neg(),y=U,g=R.neg(),w=M;else if(g&&++P==2)break;j=R,B=F,F=R,K=U,U=M,T=Q,Q=N}x=R.neg(),_=M;var k=g.sqr().add(w.sqr());return x.sqr().add(_.sqr()).cmp(k)>=0&&(x=b,_=y),g.negative&&(g=g.neg(),w=w.neg()),x.negative&&(x=x.neg(),_=_.neg()),[{a:g,b:w},{a:x,b:_}]},u.prototype._endoSplit=function(m){var b=this.endo.basis,y=b[0],g=b[1],w=g.b.mul(m).divRound(this.n),x=y.b.neg().mul(m).divRound(this.n),_=w.mul(y.a),j=x.mul(g.a),R=w.mul(y.b),M=x.mul(g.b);return{k1:m.sub(_).sub(j),k2:R.add(M).neg()}},u.prototype.pointFromX=function(m,b){(m=new o(m,16)).red||(m=m.toRed(this.red));var y=m.redSqr().redMul(m).redIAdd(m.redMul(this.a)).redIAdd(this.b),g=y.redSqrt();if(g.redSqr().redSub(y).cmp(this.zero)!==0)throw new Error("invalid point");var w=g.fromRed().isOdd();return(b&&!w||!b&&w)&&(g=g.redNeg()),this.point(m,g)},u.prototype.validate=function(m){if(m.inf)return!0;var b=m.x,y=m.y,g=this.a.redMul(b),w=b.redSqr().redMul(b).redIAdd(g).redIAdd(this.b);return y.redSqr().redISub(w).cmpn(0)===0},u.prototype._endoWnafMulAdd=function(m,b,y){for(var g=this._endoWnafT1,w=this._endoWnafT2,x=0;x<m.length;x++){var _=this._endoSplit(b[x]),j=m[x],R=j._getBeta();_.k1.negative&&(_.k1.ineg(),j=j.neg(!0)),_.k2.negative&&(_.k2.ineg(),R=R.neg(!0)),g[2*x]=j,g[2*x+1]=R,w[2*x]=_.k1,w[2*x+1]=_.k2}for(var M=this._wnafMulAdd(1,g,w,2*x,y),I=0;I<2*x;I++)g[I]=null,w[I]=null;return M},d(h,c.BasePoint),u.prototype.point=function(m,b,y){return new h(this,m,b,y)},u.prototype.pointFromJSON=function(m,b){return h.fromJSON(this,m,b)},h.prototype._getBeta=function(){if(this.curve.endo){var m=this.precomputed;if(m&&m.beta)return m.beta;var b=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(m){var y=this.curve,g=function(w){return y.point(w.x.redMul(y.endo.beta),w.y)};m.beta=b,b.precomputed={beta:null,naf:m.naf&&{wnd:m.naf.wnd,points:m.naf.points.map(g)},doubles:m.doubles&&{step:m.doubles.step,points:m.doubles.points.map(g)}}}return b}},h.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},h.fromJSON=function(m,b,y){typeof b=="string"&&(b=JSON.parse(b));var g=m.point(b[0],b[1],y);if(!b[2])return g;function w(_){return m.point(_[0],_[1],y)}var x=b[2];return g.precomputed={beta:null,doubles:x.doubles&&{step:x.doubles.step,points:[g].concat(x.doubles.points.map(w))},naf:x.naf&&{wnd:x.naf.wnd,points:[g].concat(x.naf.points.map(w))}},g},h.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},h.prototype.isInfinity=function(){return this.inf},h.prototype.add=function(m){if(this.inf)return m;if(m.inf)return this;if(this.eq(m))return this.dbl();if(this.neg().eq(m))return this.curve.point(null,null);if(this.x.cmp(m.x)===0)return this.curve.point(null,null);var b=this.y.redSub(m.y);b.cmpn(0)!==0&&(b=b.redMul(this.x.redSub(m.x).redInvm()));var y=b.redSqr().redISub(this.x).redISub(m.x),g=b.redMul(this.x.redSub(y)).redISub(this.y);return this.curve.point(y,g)},h.prototype.dbl=function(){if(this.inf)return this;var m=this.y.redAdd(this.y);if(m.cmpn(0)===0)return this.curve.point(null,null);var b=this.curve.a,y=this.x.redSqr(),g=m.redInvm(),w=y.redAdd(y).redIAdd(y).redIAdd(b).redMul(g),x=w.redSqr().redISub(this.x.redAdd(this.x)),_=w.redMul(this.x.redSub(x)).redISub(this.y);return this.curve.point(x,_)},h.prototype.getX=function(){return this.x.fromRed()},h.prototype.getY=function(){return this.y.fromRed()},h.prototype.mul=function(m){return m=new o(m,16),this.isInfinity()?this:this._hasDoubles(m)?this.curve._fixedNafMul(this,m):this.curve.endo?this.curve._endoWnafMulAdd([this],[m]):this.curve._wnafMul(this,m)},h.prototype.mulAdd=function(m,b,y){var g=[this,b],w=[m,y];return this.curve.endo?this.curve._endoWnafMulAdd(g,w):this.curve._wnafMulAdd(1,g,w,2)},h.prototype.jmulAdd=function(m,b,y){var g=[this,b],w=[m,y];return this.curve.endo?this.curve._endoWnafMulAdd(g,w,!0):this.curve._wnafMulAdd(1,g,w,2,!0)},h.prototype.eq=function(m){return this===m||this.inf===m.inf&&(this.inf||this.x.cmp(m.x)===0&&this.y.cmp(m.y)===0)},h.prototype.neg=function(m){if(this.inf)return this;var b=this.curve.point(this.x,this.y.redNeg());if(m&&this.precomputed){var y=this.precomputed,g=function(w){return w.neg()};b.precomputed={naf:y.naf&&{wnd:y.naf.wnd,points:y.naf.points.map(g)},doubles:y.doubles&&{step:y.doubles.step,points:y.doubles.points.map(g)}}}return b},h.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},d(f,c.BasePoint),u.prototype.jpoint=function(m,b,y){return new f(this,m,b,y)},f.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var m=this.z.redInvm(),b=m.redSqr(),y=this.x.redMul(b),g=this.y.redMul(b).redMul(m);return this.curve.point(y,g)},f.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},f.prototype.add=function(m){if(this.isInfinity())return m;if(m.isInfinity())return this;var b=m.z.redSqr(),y=this.z.redSqr(),g=this.x.redMul(b),w=m.x.redMul(y),x=this.y.redMul(b.redMul(m.z)),_=m.y.redMul(y.redMul(this.z)),j=g.redSub(w),R=x.redSub(_);if(j.cmpn(0)===0)return R.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var M=j.redSqr(),I=M.redMul(j),F=g.redMul(M),B=R.redSqr().redIAdd(I).redISub(F).redISub(F),U=R.redMul(F.redISub(B)).redISub(x.redMul(I)),Q=this.z.redMul(m.z).redMul(j);return this.curve.jpoint(B,U,Q)},f.prototype.mixedAdd=function(m){if(this.isInfinity())return m.toJ();if(m.isInfinity())return this;var b=this.z.redSqr(),y=this.x,g=m.x.redMul(b),w=this.y,x=m.y.redMul(b).redMul(this.z),_=y.redSub(g),j=w.redSub(x);if(_.cmpn(0)===0)return j.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var R=_.redSqr(),M=R.redMul(_),I=y.redMul(R),F=j.redSqr().redIAdd(M).redISub(I).redISub(I),B=j.redMul(I.redISub(F)).redISub(w.redMul(M)),U=this.z.redMul(_);return this.curve.jpoint(F,B,U)},f.prototype.dblp=function(m){if(m===0)return this;if(this.isInfinity())return this;if(!m)return this.dbl();var b;if(this.curve.zeroA||this.curve.threeA){var y=this;for(b=0;b<m;b++)y=y.dbl();return y}var g=this.curve.a,w=this.curve.tinv,x=this.x,_=this.y,j=this.z,R=j.redSqr().redSqr(),M=_.redAdd(_);for(b=0;b<m;b++){var I=x.redSqr(),F=M.redSqr(),B=F.redSqr(),U=I.redAdd(I).redIAdd(I).redIAdd(g.redMul(R)),Q=x.redMul(F),K=U.redSqr().redISub(Q.redAdd(Q)),T=Q.redISub(K),P=U.redMul(T);P=P.redIAdd(P).redISub(B);var A=M.redMul(j);b+1<m&&(R=R.redMul(B)),x=K,j=A,M=P}return this.curve.jpoint(x,M.redMul(w),j)},f.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},f.prototype._zeroDbl=function(){var m,b,y;if(this.zOne){var g=this.x.redSqr(),w=this.y.redSqr(),x=w.redSqr(),_=this.x.redAdd(w).redSqr().redISub(g).redISub(x);_=_.redIAdd(_);var j=g.redAdd(g).redIAdd(g),R=j.redSqr().redISub(_).redISub(_),M=x.redIAdd(x);M=(M=M.redIAdd(M)).redIAdd(M),m=R,b=j.redMul(_.redISub(R)).redISub(M),y=this.y.redAdd(this.y)}else{var I=this.x.redSqr(),F=this.y.redSqr(),B=F.redSqr(),U=this.x.redAdd(F).redSqr().redISub(I).redISub(B);U=U.redIAdd(U);var Q=I.redAdd(I).redIAdd(I),K=Q.redSqr(),T=B.redIAdd(B);T=(T=T.redIAdd(T)).redIAdd(T),m=K.redISub(U).redISub(U),b=Q.redMul(U.redISub(m)).redISub(T),y=(y=this.y.redMul(this.z)).redIAdd(y)}return this.curve.jpoint(m,b,y)},f.prototype._threeDbl=function(){var m,b,y;if(this.zOne){var g=this.x.redSqr(),w=this.y.redSqr(),x=w.redSqr(),_=this.x.redAdd(w).redSqr().redISub(g).redISub(x);_=_.redIAdd(_);var j=g.redAdd(g).redIAdd(g).redIAdd(this.curve.a),R=j.redSqr().redISub(_).redISub(_);m=R;var M=x.redIAdd(x);M=(M=M.redIAdd(M)).redIAdd(M),b=j.redMul(_.redISub(R)).redISub(M),y=this.y.redAdd(this.y)}else{var I=this.z.redSqr(),F=this.y.redSqr(),B=this.x.redMul(F),U=this.x.redSub(I).redMul(this.x.redAdd(I));U=U.redAdd(U).redIAdd(U);var Q=B.redIAdd(B),K=(Q=Q.redIAdd(Q)).redAdd(Q);m=U.redSqr().redISub(K),y=this.y.redAdd(this.z).redSqr().redISub(F).redISub(I);var T=F.redSqr();T=(T=(T=T.redIAdd(T)).redIAdd(T)).redIAdd(T),b=U.redMul(Q.redISub(m)).redISub(T)}return this.curve.jpoint(m,b,y)},f.prototype._dbl=function(){var m=this.curve.a,b=this.x,y=this.y,g=this.z,w=g.redSqr().redSqr(),x=b.redSqr(),_=y.redSqr(),j=x.redAdd(x).redIAdd(x).redIAdd(m.redMul(w)),R=b.redAdd(b),M=(R=R.redIAdd(R)).redMul(_),I=j.redSqr().redISub(M.redAdd(M)),F=M.redISub(I),B=_.redSqr();B=(B=(B=B.redIAdd(B)).redIAdd(B)).redIAdd(B);var U=j.redMul(F).redISub(B),Q=y.redAdd(y).redMul(g);return this.curve.jpoint(I,U,Q)},f.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var m=this.x.redSqr(),b=this.y.redSqr(),y=this.z.redSqr(),g=b.redSqr(),w=m.redAdd(m).redIAdd(m),x=w.redSqr(),_=this.x.redAdd(b).redSqr().redISub(m).redISub(g),j=(_=(_=(_=_.redIAdd(_)).redAdd(_).redIAdd(_)).redISub(x)).redSqr(),R=g.redIAdd(g);R=(R=(R=R.redIAdd(R)).redIAdd(R)).redIAdd(R);var M=w.redIAdd(_).redSqr().redISub(x).redISub(j).redISub(R),I=b.redMul(M);I=(I=I.redIAdd(I)).redIAdd(I);var F=this.x.redMul(j).redISub(I);F=(F=F.redIAdd(F)).redIAdd(F);var B=this.y.redMul(M.redMul(R.redISub(M)).redISub(_.redMul(j)));B=(B=(B=B.redIAdd(B)).redIAdd(B)).redIAdd(B);var U=this.z.redAdd(_).redSqr().redISub(y).redISub(j);return this.curve.jpoint(F,B,U)},f.prototype.mul=function(m,b){return m=new o(m,b),this.curve._wnafMul(this,m)},f.prototype.eq=function(m){if(m.type==="affine")return this.eq(m.toJ());if(this===m)return!0;var b=this.z.redSqr(),y=m.z.redSqr();if(this.x.redMul(y).redISub(m.x.redMul(b)).cmpn(0)!==0)return!1;var g=b.redMul(this.z),w=y.redMul(m.z);return this.y.redMul(w).redISub(m.y.redMul(g)).cmpn(0)===0},f.prototype.eqXToP=function(m){var b=this.z.redSqr(),y=m.toRed(this.curve.red).redMul(b);if(this.x.cmp(y)===0)return!0;for(var g=m.clone(),w=this.curve.redN.redMul(b);;){if(g.iadd(this.curve.n),g.cmp(this.curve.p)>=0)return!1;if(y.redIAdd(w),this.x.cmp(y)===0)return!0}},f.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},f.prototype.isInfinity=function(){return this.z.cmpn(0)===0}},{"../utils":419,"./base":406,"bn.js":420,inherits:440}],411:[function(t,s,l){var i,o=l,d=t("hash.js"),c=t("./curve"),a=t("./utils").assert;function u(f){f.type==="short"?this.curve=new c.short(f):f.type==="edwards"?this.curve=new c.edwards(f):this.curve=new c.mont(f),this.g=this.curve.g,this.n=this.curve.n,this.hash=f.hash,a(this.g.validate(),"Invalid curve"),a(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function h(f,m){Object.defineProperty(o,f,{configurable:!0,enumerable:!0,get:function(){var b=new u(m);return Object.defineProperty(o,f,{configurable:!0,enumerable:!0,value:b}),b}})}o.PresetCurve=u,h("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:d.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),h("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:d.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),h("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:d.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),h("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:d.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),h("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:d.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),h("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:d.sha256,gRed:!1,g:["9"]}),h("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:d.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{i=t("./precomputed/secp256k1")}catch{i=void 0}h("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:d.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",i]})},{"./curve":408,"./precomputed/secp256k1":418,"./utils":419,"hash.js":426}],412:[function(t,s,l){var i=t("bn.js"),o=t("hmac-drbg"),d=t("../utils"),c=t("../curves"),a=t("brorand"),u=d.assert,h=t("./key"),f=t("./signature");function m(b){if(!(this instanceof m))return new m(b);typeof b=="string"&&(u(Object.prototype.hasOwnProperty.call(c,b),"Unknown curve "+b),b=c[b]),b instanceof c.PresetCurve&&(b={curve:b}),this.curve=b.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=b.curve.g,this.g.precompute(b.curve.n.bitLength()+1),this.hash=b.hash||b.curve.hash}s.exports=m,m.prototype.keyPair=function(b){return new h(this,b)},m.prototype.keyFromPrivate=function(b,y){return h.fromPrivate(this,b,y)},m.prototype.keyFromPublic=function(b,y){return h.fromPublic(this,b,y)},m.prototype.genKeyPair=function(b){b||(b={});for(var y=new o({hash:this.hash,pers:b.pers,persEnc:b.persEnc||"utf8",entropy:b.entropy||a(this.hash.hmacStrength),entropyEnc:b.entropy&&b.entropyEnc||"utf8",nonce:this.n.toArray()}),g=this.n.byteLength(),w=this.n.sub(new i(2));;){var x=new i(y.generate(g));if(!(x.cmp(w)>0))return x.iaddn(1),this.keyFromPrivate(x)}},m.prototype._truncateToN=function(b,y){var g=8*b.byteLength()-this.n.bitLength();return g>0&&(b=b.ushrn(g)),!y&&b.cmp(this.n)>=0?b.sub(this.n):b},m.prototype.sign=function(b,y,g,w){typeof g=="object"&&(w=g,g=null),w||(w={}),y=this.keyFromPrivate(y,g),b=this._truncateToN(new i(b,16));for(var x=this.n.byteLength(),_=y.getPrivate().toArray("be",x),j=b.toArray("be",x),R=new o({hash:this.hash,entropy:_,nonce:j,pers:w.pers,persEnc:w.persEnc||"utf8"}),M=this.n.sub(new i(1)),I=0;;I++){var F=w.k?w.k(I):new i(R.generate(this.n.byteLength()));if(!((F=this._truncateToN(F,!0)).cmpn(1)<=0||F.cmp(M)>=0)){var B=this.g.mul(F);if(!B.isInfinity()){var U=B.getX(),Q=U.umod(this.n);if(Q.cmpn(0)!==0){var K=F.invm(this.n).mul(Q.mul(y.getPrivate()).iadd(b));if((K=K.umod(this.n)).cmpn(0)!==0){var T=(B.getY().isOdd()?1:0)|(U.cmp(Q)!==0?2:0);return w.canonical&&K.cmp(this.nh)>0&&(K=this.n.sub(K),T^=1),new f({r:Q,s:K,recoveryParam:T})}}}}}},m.prototype.verify=function(b,y,g,w){b=this._truncateToN(new i(b,16)),g=this.keyFromPublic(g,w);var x=(y=new f(y,"hex")).r,_=y.s;if(x.cmpn(1)<0||x.cmp(this.n)>=0||_.cmpn(1)<0||_.cmp(this.n)>=0)return!1;var j,R=_.invm(this.n),M=R.mul(b).umod(this.n),I=R.mul(x).umod(this.n);return this.curve._maxwellTrick?!(j=this.g.jmulAdd(M,g.getPublic(),I)).isInfinity()&&j.eqXToP(x):!(j=this.g.mulAdd(M,g.getPublic(),I)).isInfinity()&&j.getX().umod(this.n).cmp(x)===0},m.prototype.recoverPubKey=function(b,y,g,w){u((3&g)===g,"The recovery param is more than two bits"),y=new f(y,w);var x=this.n,_=new i(b),j=y.r,R=y.s,M=1&g,I=g>>1;if(j.cmp(this.curve.p.umod(this.curve.n))>=0&&I)throw new Error("Unable to find sencond key candinate");j=I?this.curve.pointFromX(j.add(this.curve.n),M):this.curve.pointFromX(j,M);var F=y.r.invm(x),B=x.sub(_).mul(F).umod(x),U=R.mul(F).umod(x);return this.g.mulAdd(B,j,U)},m.prototype.getKeyRecoveryParam=function(b,y,g,w){if((y=new f(y,w)).recoveryParam!==null)return y.recoveryParam;for(var x=0;x<4;x++){var _;try{_=this.recoverPubKey(b,y,x)}catch{continue}if(_.eq(g))return x}throw new Error("Unable to find valid recovery factor")}},{"../curves":411,"../utils":419,"./key":413,"./signature":414,"bn.js":420,brorand:187,"hmac-drbg":438}],413:[function(t,s,l){var i=t("bn.js"),o=t("../utils").assert;function d(c,a){this.ec=c,this.priv=null,this.pub=null,a.priv&&this._importPrivate(a.priv,a.privEnc),a.pub&&this._importPublic(a.pub,a.pubEnc)}s.exports=d,d.fromPublic=function(c,a,u){return a instanceof d?a:new d(c,{pub:a,pubEnc:u})},d.fromPrivate=function(c,a,u){return a instanceof d?a:new d(c,{priv:a,privEnc:u})},d.prototype.validate=function(){var c=this.getPublic();return c.isInfinity()?{result:!1,reason:"Invalid public key"}:c.validate()?c.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},d.prototype.getPublic=function(c,a){return typeof c=="string"&&(a=c,c=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),a?this.pub.encode(a,c):this.pub},d.prototype.getPrivate=function(c){return c==="hex"?this.priv.toString(16,2):this.priv},d.prototype._importPrivate=function(c,a){this.priv=new i(c,a||16),this.priv=this.priv.umod(this.ec.curve.n)},d.prototype._importPublic=function(c,a){if(c.x||c.y)return this.ec.curve.type==="mont"?o(c.x,"Need x coordinate"):this.ec.curve.type!=="short"&&this.ec.curve.type!=="edwards"||o(c.x&&c.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(c.x,c.y));this.pub=this.ec.curve.decodePoint(c,a)},d.prototype.derive=function(c){return c.validate()||o(c.validate(),"public point not validated"),c.mul(this.priv).getX()},d.prototype.sign=function(c,a,u){return this.ec.sign(c,this,a,u)},d.prototype.verify=function(c,a){return this.ec.verify(c,a,this)},d.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},{"../utils":419,"bn.js":420}],414:[function(t,s,l){var i=t("bn.js"),o=t("../utils"),d=o.assert;function c(m,b){if(m instanceof c)return m;this._importDER(m,b)||(d(m.r&&m.s,"Signature without r or s"),this.r=new i(m.r,16),this.s=new i(m.s,16),m.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=m.recoveryParam)}function a(){this.place=0}function u(m,b){var y=m[b.place++];if(!(128&y))return y;var g=15&y;if(g===0||g>4)return!1;for(var w=0,x=0,_=b.place;x<g;x++,_++)w<<=8,w|=m[_],w>>>=0;return!(w<=127)&&(b.place=_,w)}function h(m){for(var b=0,y=m.length-1;!m[b]&&!(128&m[b+1])&&b<y;)b++;return b===0?m:m.slice(b)}function f(m,b){if(b<128)m.push(b);else{var y=1+(Math.log(b)/Math.LN2>>>3);for(m.push(128|y);--y;)m.push(b>>>(y<<3)&255);m.push(b)}}s.exports=c,c.prototype._importDER=function(m,b){m=o.toArray(m,b);var y=new a;if(m[y.place++]!==48)return!1;var g=u(m,y);if(g===!1||g+y.place!==m.length||m[y.place++]!==2)return!1;var w=u(m,y);if(w===!1)return!1;var x=m.slice(y.place,w+y.place);if(y.place+=w,m[y.place++]!==2)return!1;var _=u(m,y);if(_===!1||m.length!==_+y.place)return!1;var j=m.slice(y.place,_+y.place);if(x[0]===0){if(!(128&x[1]))return!1;x=x.slice(1)}if(j[0]===0){if(!(128&j[1]))return!1;j=j.slice(1)}return this.r=new i(x),this.s=new i(j),this.recoveryParam=null,!0},c.prototype.toDER=function(m){var b=this.r.toArray(),y=this.s.toArray();for(128&b[0]&&(b=[0].concat(b)),128&y[0]&&(y=[0].concat(y)),b=h(b),y=h(y);!(y[0]||128&y[1]);)y=y.slice(1);var g=[2];f(g,b.length),(g=g.concat(b)).push(2),f(g,y.length);var w=g.concat(y),x=[48];return f(x,w.length),x=x.concat(w),o.encode(x,m)}},{"../utils":419,"bn.js":420}],415:[function(t,s,l){var i=t("hash.js"),o=t("../curves"),d=t("../utils"),c=d.assert,a=d.parseBytes,u=t("./key"),h=t("./signature");function f(m){if(c(m==="ed25519","only tested with ed25519 so far"),!(this instanceof f))return new f(m);m=o[m].curve,this.curve=m,this.g=m.g,this.g.precompute(m.n.bitLength()+1),this.pointClass=m.point().constructor,this.encodingLength=Math.ceil(m.n.bitLength()/8),this.hash=i.sha512}s.exports=f,f.prototype.sign=function(m,b){m=a(m);var y=this.keyFromSecret(b),g=this.hashInt(y.messagePrefix(),m),w=this.g.mul(g),x=this.encodePoint(w),_=this.hashInt(x,y.pubBytes(),m).mul(y.priv()),j=g.add(_).umod(this.curve.n);return this.makeSignature({R:w,S:j,Rencoded:x})},f.prototype.verify=function(m,b,y){m=a(m),b=this.makeSignature(b);var g=this.keyFromPublic(y),w=this.hashInt(b.Rencoded(),g.pubBytes(),m),x=this.g.mul(b.S());return b.R().add(g.pub().mul(w)).eq(x)},f.prototype.hashInt=function(){for(var m=this.hash(),b=0;b<arguments.length;b++)m.update(arguments[b]);return d.intFromLE(m.digest()).umod(this.curve.n)},f.prototype.keyFromPublic=function(m){return u.fromPublic(this,m)},f.prototype.keyFromSecret=function(m){return u.fromSecret(this,m)},f.prototype.makeSignature=function(m){return m instanceof h?m:new h(this,m)},f.prototype.encodePoint=function(m){var b=m.getY().toArray("le",this.encodingLength);return b[this.encodingLength-1]|=m.getX().isOdd()?128:0,b},f.prototype.decodePoint=function(m){var b=(m=d.parseBytes(m)).length-1,y=m.slice(0,b).concat(-129&m[b]),g=(128&m[b])!=0,w=d.intFromLE(y);return this.curve.pointFromY(w,g)},f.prototype.encodeInt=function(m){return m.toArray("le",this.encodingLength)},f.prototype.decodeInt=function(m){return d.intFromLE(m)},f.prototype.isPoint=function(m){return m instanceof this.pointClass}},{"../curves":411,"../utils":419,"./key":416,"./signature":417,"hash.js":426}],416:[function(t,s,l){var i=t("../utils"),o=i.assert,d=i.parseBytes,c=i.cachedProperty;function a(u,h){this.eddsa=u,this._secret=d(h.secret),u.isPoint(h.pub)?this._pub=h.pub:this._pubBytes=d(h.pub)}a.fromPublic=function(u,h){return h instanceof a?h:new a(u,{pub:h})},a.fromSecret=function(u,h){return h instanceof a?h:new a(u,{secret:h})},a.prototype.secret=function(){return this._secret},c(a,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),c(a,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),c(a,"privBytes",function(){var u=this.eddsa,h=this.hash(),f=u.encodingLength-1,m=h.slice(0,u.encodingLength);return m[0]&=248,m[f]&=127,m[f]|=64,m}),c(a,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),c(a,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),c(a,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),a.prototype.sign=function(u){return o(this._secret,"KeyPair can only verify"),this.eddsa.sign(u,this)},a.prototype.verify=function(u,h){return this.eddsa.verify(u,h,this)},a.prototype.getSecret=function(u){return o(this._secret,"KeyPair is public only"),i.encode(this.secret(),u)},a.prototype.getPublic=function(u){return i.encode(this.pubBytes(),u)},s.exports=a},{"../utils":419}],417:[function(t,s,l){var i=t("bn.js"),o=t("../utils"),d=o.assert,c=o.cachedProperty,a=o.parseBytes;function u(h,f){this.eddsa=h,typeof f!="object"&&(f=a(f)),Array.isArray(f)&&(f={R:f.slice(0,h.encodingLength),S:f.slice(h.encodingLength)}),d(f.R&&f.S,"Signature without R or S"),h.isPoint(f.R)&&(this._R=f.R),f.S instanceof i&&(this._S=f.S),this._Rencoded=Array.isArray(f.R)?f.R:f.Rencoded,this._Sencoded=Array.isArray(f.S)?f.S:f.Sencoded}c(u,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),c(u,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),c(u,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),c(u,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),u.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},u.prototype.toHex=function(){return o.encode(this.toBytes(),"hex").toUpperCase()},s.exports=u},{"../utils":419,"bn.js":420}],418:[function(t,s,l){s.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},{}],419:[function(t,s,l){var i=l,o=t("bn.js"),d=t("minimalistic-assert"),c=t("minimalistic-crypto-utils");i.assert=d,i.toArray=c.toArray,i.zero2=c.zero2,i.toHex=c.toHex,i.encode=c.encode,i.getNAF=function(a,u,h){var f=new Array(Math.max(a.bitLength(),h)+1);f.fill(0);for(var m=1<<u+1,b=a.clone(),y=0;y<f.length;y++){var g,w=b.andln(m-1);b.isOdd()?(g=w>(m>>1)-1?(m>>1)-w:w,b.isubn(g)):g=0,f[y]=g,b.iushrn(1)}return f},i.getJSF=function(a,u){var h=[[],[]];a=a.clone(),u=u.clone();for(var f,m=0,b=0;a.cmpn(-m)>0||u.cmpn(-b)>0;){var y,g,w=a.andln(3)+m&3,x=u.andln(3)+b&3;w===3&&(w=-1),x===3&&(x=-1),y=(1&w)==0?0:(f=a.andln(7)+m&7)!==3&&f!==5||x!==2?w:-w,h[0].push(y),g=(1&x)==0?0:(f=u.andln(7)+b&7)!==3&&f!==5||w!==2?x:-x,h[1].push(g),2*m===y+1&&(m=1-m),2*b===g+1&&(b=1-b),a.iushrn(1),u.iushrn(1)}return h},i.cachedProperty=function(a,u,h){var f="_"+u;a.prototype[u]=function(){return this[f]!==void 0?this[f]:this[f]=h.call(this)}},i.parseBytes=function(a){return typeof a=="string"?i.toArray(a,"hex"):a},i.intFromLE=function(a){return new o(a,"hex","le")}},{"bn.js":420,"minimalistic-assert":453,"minimalistic-crypto-utils":454}],420:[function(t,s,l){arguments[4][184][0].apply(l,arguments)},{buffer:188,dup:184}],421:[function(t,s,l){s.exports={name:"elliptic",version:"6.5.4",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:"Fedor Indutny <fedor@indutny.com>",license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies:{"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}}},{}],422:[function(t,s,l){var i=Object.create||function(F){var B=function(){};return B.prototype=F,new B},o=Object.keys||function(F){var B=[];for(var U in F)Object.prototype.hasOwnProperty.call(F,U)&&B.push(U);return U},d=Function.prototype.bind||function(F){var B=this;return function(){return B.apply(F,arguments)}};function c(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=i(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}s.exports=c,c.EventEmitter=c,c.prototype._events=void 0,c.prototype._maxListeners=void 0;var a,u=10;try{var h={};Object.defineProperty&&Object.defineProperty(h,"x",{value:0}),a=h.x===0}catch{a=!1}function f(F){return F._maxListeners===void 0?c.defaultMaxListeners:F._maxListeners}function m(F,B,U){if(B)F.call(U);else for(var Q=F.length,K=I(F,Q),T=0;T<Q;++T)K[T].call(U)}function b(F,B,U,Q){if(B)F.call(U,Q);else for(var K=F.length,T=I(F,K),P=0;P<K;++P)T[P].call(U,Q)}function y(F,B,U,Q,K){if(B)F.call(U,Q,K);else for(var T=F.length,P=I(F,T),A=0;A<T;++A)P[A].call(U,Q,K)}function g(F,B,U,Q,K,T){if(B)F.call(U,Q,K,T);else for(var P=F.length,A=I(F,P),N=0;N<P;++N)A[N].call(U,Q,K,T)}function w(F,B,U,Q){if(B)F.apply(U,Q);else for(var K=F.length,T=I(F,K),P=0;P<K;++P)T[P].apply(U,Q)}function x(F,B,U,Q){var K,T,P;if(typeof U!="function")throw new TypeError('"listener" argument must be a function');if((T=F._events)?(T.newListener&&(F.emit("newListener",B,U.listener?U.listener:U),T=F._events),P=T[B]):(T=F._events=i(null),F._eventsCount=0),P){if(typeof P=="function"?P=T[B]=Q?[U,P]:[P,U]:Q?P.unshift(U):P.push(U),!P.warned&&(K=f(F))&&K>0&&P.length>K){P.warned=!0;var A=new Error("Possible EventEmitter memory leak detected. "+P.length+' "'+String(B)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');A.name="MaxListenersExceededWarning",A.emitter=F,A.type=B,A.count=P.length,typeof console=="object"&&console.warn&&console.warn("%s: %s",A.name,A.message)}}else P=T[B]=U,++F._eventsCount;return F}function _(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var F=new Array(arguments.length),B=0;B<F.length;++B)F[B]=arguments[B];this.listener.apply(this.target,F)}}function j(F,B,U){var Q={fired:!1,wrapFn:void 0,target:F,type:B,listener:U},K=d.call(_,Q);return K.listener=U,Q.wrapFn=K,K}function R(F,B,U){var Q=F._events;if(!Q)return[];var K=Q[B];return K?typeof K=="function"?U?[K.listener||K]:[K]:U?function(T){for(var P=new Array(T.length),A=0;A<P.length;++A)P[A]=T[A].listener||T[A];return P}(K):I(K,K.length):[]}function M(F){var B=this._events;if(B){var U=B[F];if(typeof U=="function")return 1;if(U)return U.length}return 0}function I(F,B){for(var U=new Array(B),Q=0;Q<B;++Q)U[Q]=F[Q];return U}a?Object.defineProperty(c,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(F){if(typeof F!="number"||F<0||F!=F)throw new TypeError('"defaultMaxListeners" must be a positive number');u=F}}):c.defaultMaxListeners=u,c.prototype.setMaxListeners=function(F){if(typeof F!="number"||F<0||isNaN(F))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=F,this},c.prototype.getMaxListeners=function(){return f(this)},c.prototype.emit=function(F){var B,U,Q,K,T,P,A=F==="error";if(P=this._events)A=A&&P.error==null;else if(!A)return!1;if(A){if(arguments.length>1&&(B=arguments[1]),B instanceof Error)throw B;var N=new Error('Unhandled "error" event. ('+B+")");throw N.context=B,N}if(!(U=P[F]))return!1;var k=typeof U=="function";switch(Q=arguments.length){case 1:m(U,k,this);break;case 2:b(U,k,this,arguments[1]);break;case 3:y(U,k,this,arguments[1],arguments[2]);break;case 4:g(U,k,this,arguments[1],arguments[2],arguments[3]);break;default:for(K=new Array(Q-1),T=1;T<Q;T++)K[T-1]=arguments[T];w(U,k,this,K)}return!0},c.prototype.addListener=function(F,B){return x(this,F,B,!1)},c.prototype.on=c.prototype.addListener,c.prototype.prependListener=function(F,B){return x(this,F,B,!0)},c.prototype.once=function(F,B){if(typeof B!="function")throw new TypeError('"listener" argument must be a function');return this.on(F,j(this,F,B)),this},c.prototype.prependOnceListener=function(F,B){if(typeof B!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(F,j(this,F,B)),this},c.prototype.removeListener=function(F,B){var U,Q,K,T,P;if(typeof B!="function")throw new TypeError('"listener" argument must be a function');if(!(Q=this._events))return this;if(!(U=Q[F]))return this;if(U===B||U.listener===B)--this._eventsCount==0?this._events=i(null):(delete Q[F],Q.removeListener&&this.emit("removeListener",F,U.listener||B));else if(typeof U!="function"){for(K=-1,T=U.length-1;T>=0;T--)if(U[T]===B||U[T].listener===B){P=U[T].listener,K=T;break}if(K<0)return this;K===0?U.shift():function(A,N){for(var k=N,S=k+1,E=A.length;S<E;k+=1,S+=1)A[k]=A[S];A.pop()}(U,K),U.length===1&&(Q[F]=U[0]),Q.removeListener&&this.emit("removeListener",F,P||B)}return this},c.prototype.removeAllListeners=function(F){var B,U,Q;if(!(U=this._events))return this;if(!U.removeListener)return arguments.length===0?(this._events=i(null),this._eventsCount=0):U[F]&&(--this._eventsCount==0?this._events=i(null):delete U[F]),this;if(arguments.length===0){var K,T=o(U);for(Q=0;Q<T.length;++Q)(K=T[Q])!=="removeListener"&&this.removeAllListeners(K);return this.removeAllListeners("removeListener"),this._events=i(null),this._eventsCount=0,this}if(typeof(B=U[F])=="function")this.removeListener(F,B);else if(B)for(Q=B.length-1;Q>=0;Q--)this.removeListener(F,B[Q]);return this},c.prototype.listeners=function(F){return R(this,F,!0)},c.prototype.rawListeners=function(F){return R(this,F,!1)},c.listenerCount=function(F,B){return typeof F.listenerCount=="function"?F.listenerCount(B):M.call(F,B)},c.prototype.listenerCount=M,c.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],423:[function(t,s,l){var i=t("safe-buffer").Buffer,o=t("md5.js");s.exports=function(d,c,a,u){if(i.isBuffer(d)||(d=i.from(d,"binary")),c&&(i.isBuffer(c)||(c=i.from(c,"binary")),c.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var h=a/8,f=i.alloc(h),m=i.alloc(u||0),b=i.alloc(0);h>0||u>0;){var y=new o;y.update(b),y.update(d),c&&y.update(c),b=y.digest();var g=0;if(h>0){var w=f.length-h;g=Math.min(h,b.length),b.copy(f,w,0,g),h-=g}if(g<b.length&&u>0){var x=m.length-u,_=Math.min(u,b.length-g);b.copy(m,x,g,g+_),u-=_}}return b.fill(0),{key:f,iv:m}}},{"md5.js":450,"safe-buffer":494}],424:[function(t,s,l){Object.defineProperty(l,"__esModule",{value:!0}),l.CsvParserStream=l.ParserOptions=l.parseFile=l.parseStream=l.parseString=l.parse=l.FormatterOptions=l.CsvFormatterStream=l.writeToPath=l.writeToString=l.writeToBuffer=l.writeToStream=l.write=l.format=void 0;var i=t("@fast-csv/format");Object.defineProperty(l,"format",{enumerable:!0,get:function(){return i.format}}),Object.defineProperty(l,"write",{enumerable:!0,get:function(){return i.write}}),Object.defineProperty(l,"writeToStream",{enumerable:!0,get:function(){return i.writeToStream}}),Object.defineProperty(l,"writeToBuffer",{enumerable:!0,get:function(){return i.writeToBuffer}}),Object.defineProperty(l,"writeToString",{enumerable:!0,get:function(){return i.writeToString}}),Object.defineProperty(l,"writeToPath",{enumerable:!0,get:function(){return i.writeToPath}}),Object.defineProperty(l,"CsvFormatterStream",{enumerable:!0,get:function(){return i.CsvFormatterStream}}),Object.defineProperty(l,"FormatterOptions",{enumerable:!0,get:function(){return i.FormatterOptions}});var o=t("@fast-csv/parse");Object.defineProperty(l,"parse",{enumerable:!0,get:function(){return o.parse}}),Object.defineProperty(l,"parseString",{enumerable:!0,get:function(){return o.parseString}}),Object.defineProperty(l,"parseStream",{enumerable:!0,get:function(){return o.parseStream}}),Object.defineProperty(l,"parseFile",{enumerable:!0,get:function(){return o.parseFile}}),Object.defineProperty(l,"ParserOptions",{enumerable:!0,get:function(){return o.ParserOptions}}),Object.defineProperty(l,"CsvParserStream",{enumerable:!0,get:function(){return o.CsvParserStream}})},{"@fast-csv/format":151,"@fast-csv/parse":155}],425:[function(t,s,l){var i=t("safe-buffer").Buffer,o=t("readable-stream").Transform;function d(c){o.call(this),this._block=i.allocUnsafe(c),this._blockSize=c,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}t("inherits")(d,o),d.prototype._transform=function(c,a,u){var h=null;try{this.update(c,a)}catch(f){h=f}u(h)},d.prototype._flush=function(c){var a=null;try{this.push(this.digest())}catch(u){a=u}c(a)},d.prototype.update=function(c,a){if(function(y,g){if(!i.isBuffer(y)&&typeof y!="string")throw new TypeError(g+" must be a string or a buffer")}(c,"Data"),this._finalized)throw new Error("Digest already called");i.isBuffer(c)||(c=i.from(c,a));for(var u=this._block,h=0;this._blockOffset+c.length-h>=this._blockSize;){for(var f=this._blockOffset;f<this._blockSize;)u[f++]=c[h++];this._update(),this._blockOffset=0}for(;h<c.length;)u[this._blockOffset++]=c[h++];for(var m=0,b=8*c.length;b>0;++m)this._length[m]+=b,(b=this._length[m]/4294967296|0)>0&&(this._length[m]-=4294967296*b);return this},d.prototype._update=function(){throw new Error("_update is not implemented")},d.prototype.digest=function(c){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var a=this._digest();c!==void 0&&(a=a.toString(c)),this._block.fill(0),this._blockOffset=0;for(var u=0;u<4;++u)this._length[u]=0;return a},d.prototype._digest=function(){throw new Error("_digest is not implemented")},s.exports=d},{inherits:440,"readable-stream":491,"safe-buffer":494}],426:[function(t,s,l){var i=l;i.utils=t("./hash/utils"),i.common=t("./hash/common"),i.sha=t("./hash/sha"),i.ripemd=t("./hash/ripemd"),i.hmac=t("./hash/hmac"),i.sha1=i.sha.sha1,i.sha256=i.sha.sha256,i.sha224=i.sha.sha224,i.sha384=i.sha.sha384,i.sha512=i.sha.sha512,i.ripemd160=i.ripemd.ripemd160},{"./hash/common":427,"./hash/hmac":428,"./hash/ripemd":429,"./hash/sha":430,"./hash/utils":437}],427:[function(t,s,l){var i=t("./utils"),o=t("minimalistic-assert");function d(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}l.BlockHash=d,d.prototype.update=function(c,a){if(c=i.toArray(c,a),this.pending?this.pending=this.pending.concat(c):this.pending=c,this.pendingTotal+=c.length,this.pending.length>=this._delta8){var u=(c=this.pending).length%this._delta8;this.pending=c.slice(c.length-u,c.length),this.pending.length===0&&(this.pending=null),c=i.join32(c,0,c.length-u,this.endian);for(var h=0;h<c.length;h+=this._delta32)this._update(c,h,h+this._delta32)}return this},d.prototype.digest=function(c){return this.update(this._pad()),o(this.pending===null),this._digest(c)},d.prototype._pad=function(){var c=this.pendingTotal,a=this._delta8,u=a-(c+this.padLength)%a,h=new Array(u+this.padLength);h[0]=128;for(var f=1;f<u;f++)h[f]=0;if(c<<=3,this.endian==="big"){for(var m=8;m<this.padLength;m++)h[f++]=0;h[f++]=0,h[f++]=0,h[f++]=0,h[f++]=0,h[f++]=c>>>24&255,h[f++]=c>>>16&255,h[f++]=c>>>8&255,h[f++]=255&c}else for(h[f++]=255&c,h[f++]=c>>>8&255,h[f++]=c>>>16&255,h[f++]=c>>>24&255,h[f++]=0,h[f++]=0,h[f++]=0,h[f++]=0,m=8;m<this.padLength;m++)h[f++]=0;return h}},{"./utils":437,"minimalistic-assert":453}],428:[function(t,s,l){var i=t("./utils"),o=t("minimalistic-assert");function d(c,a,u){if(!(this instanceof d))return new d(c,a,u);this.Hash=c,this.blockSize=c.blockSize/8,this.outSize=c.outSize/8,this.inner=null,this.outer=null,this._init(i.toArray(a,u))}s.exports=d,d.prototype._init=function(c){c.length>this.blockSize&&(c=new this.Hash().update(c).digest()),o(c.length<=this.blockSize);for(var a=c.length;a<this.blockSize;a++)c.push(0);for(a=0;a<c.length;a++)c[a]^=54;for(this.inner=new this.Hash().update(c),a=0;a<c.length;a++)c[a]^=106;this.outer=new this.Hash().update(c)},d.prototype.update=function(c,a){return this.inner.update(c,a),this},d.prototype.digest=function(c){return this.outer.update(this.inner.digest()),this.outer.digest(c)}},{"./utils":437,"minimalistic-assert":453}],429:[function(t,s,l){var i=t("./utils"),o=t("./common"),d=i.rotl32,c=i.sum32,a=i.sum32_3,u=i.sum32_4,h=o.BlockHash;function f(){if(!(this instanceof f))return new f;h.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function m(j,R,M,I){return j<=15?R^M^I:j<=31?R&M|~R&I:j<=47?(R|~M)^I:j<=63?R&I|M&~I:R^(M|~I)}function b(j){return j<=15?0:j<=31?1518500249:j<=47?1859775393:j<=63?2400959708:2840853838}function y(j){return j<=15?1352829926:j<=31?1548603684:j<=47?1836072691:j<=63?2053994217:0}i.inherits(f,h),l.ripemd160=f,f.blockSize=512,f.outSize=160,f.hmacStrength=192,f.padLength=64,f.prototype._update=function(j,R){for(var M=this.h[0],I=this.h[1],F=this.h[2],B=this.h[3],U=this.h[4],Q=M,K=I,T=F,P=B,A=U,N=0;N<80;N++){var k=c(d(u(M,m(N,I,F,B),j[g[N]+R],b(N)),x[N]),U);M=U,U=B,B=d(F,10),F=I,I=k,k=c(d(u(Q,m(79-N,K,T,P),j[w[N]+R],y(N)),_[N]),A),Q=A,A=P,P=d(T,10),T=K,K=k}k=a(this.h[1],F,P),this.h[1]=a(this.h[2],B,A),this.h[2]=a(this.h[3],U,Q),this.h[3]=a(this.h[4],M,K),this.h[4]=a(this.h[0],I,T),this.h[0]=k},f.prototype._digest=function(j){return j==="hex"?i.toHex32(this.h,"little"):i.split32(this.h,"little")};var g=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],w=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],x=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],_=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},{"./common":427,"./utils":437}],430:[function(t,s,l){l.sha1=t("./sha/1"),l.sha224=t("./sha/224"),l.sha256=t("./sha/256"),l.sha384=t("./sha/384"),l.sha512=t("./sha/512")},{"./sha/1":431,"./sha/224":432,"./sha/256":433,"./sha/384":434,"./sha/512":435}],431:[function(t,s,l){var i=t("../utils"),o=t("../common"),d=t("./common"),c=i.rotl32,a=i.sum32,u=i.sum32_5,h=d.ft_1,f=o.BlockHash,m=[1518500249,1859775393,2400959708,3395469782];function b(){if(!(this instanceof b))return new b;f.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}i.inherits(b,f),s.exports=b,b.blockSize=512,b.outSize=160,b.hmacStrength=80,b.padLength=64,b.prototype._update=function(y,g){for(var w=this.W,x=0;x<16;x++)w[x]=y[g+x];for(;x<w.length;x++)w[x]=c(w[x-3]^w[x-8]^w[x-14]^w[x-16],1);var _=this.h[0],j=this.h[1],R=this.h[2],M=this.h[3],I=this.h[4];for(x=0;x<w.length;x++){var F=~~(x/20),B=u(c(_,5),h(F,j,R,M),I,w[x],m[F]);I=M,M=R,R=c(j,30),j=_,_=B}this.h[0]=a(this.h[0],_),this.h[1]=a(this.h[1],j),this.h[2]=a(this.h[2],R),this.h[3]=a(this.h[3],M),this.h[4]=a(this.h[4],I)},b.prototype._digest=function(y){return y==="hex"?i.toHex32(this.h,"big"):i.split32(this.h,"big")}},{"../common":427,"../utils":437,"./common":436}],432:[function(t,s,l){var i=t("../utils"),o=t("./256");function d(){if(!(this instanceof d))return new d;o.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}i.inherits(d,o),s.exports=d,d.blockSize=512,d.outSize=224,d.hmacStrength=192,d.padLength=64,d.prototype._digest=function(c){return c==="hex"?i.toHex32(this.h.slice(0,7),"big"):i.split32(this.h.slice(0,7),"big")}},{"../utils":437,"./256":433}],433:[function(t,s,l){var i=t("../utils"),o=t("../common"),d=t("./common"),c=t("minimalistic-assert"),a=i.sum32,u=i.sum32_4,h=i.sum32_5,f=d.ch32,m=d.maj32,b=d.s0_256,y=d.s1_256,g=d.g0_256,w=d.g1_256,x=o.BlockHash,_=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function j(){if(!(this instanceof j))return new j;x.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=_,this.W=new Array(64)}i.inherits(j,x),s.exports=j,j.blockSize=512,j.outSize=256,j.hmacStrength=192,j.padLength=64,j.prototype._update=function(R,M){for(var I=this.W,F=0;F<16;F++)I[F]=R[M+F];for(;F<I.length;F++)I[F]=u(w(I[F-2]),I[F-7],g(I[F-15]),I[F-16]);var B=this.h[0],U=this.h[1],Q=this.h[2],K=this.h[3],T=this.h[4],P=this.h[5],A=this.h[6],N=this.h[7];for(c(this.k.length===I.length),F=0;F<I.length;F++){var k=h(N,y(T),f(T,P,A),this.k[F],I[F]),S=a(b(B),m(B,U,Q));N=A,A=P,P=T,T=a(K,k),K=Q,Q=U,U=B,B=a(k,S)}this.h[0]=a(this.h[0],B),this.h[1]=a(this.h[1],U),this.h[2]=a(this.h[2],Q),this.h[3]=a(this.h[3],K),this.h[4]=a(this.h[4],T),this.h[5]=a(this.h[5],P),this.h[6]=a(this.h[6],A),this.h[7]=a(this.h[7],N)},j.prototype._digest=function(R){return R==="hex"?i.toHex32(this.h,"big"):i.split32(this.h,"big")}},{"../common":427,"../utils":437,"./common":436,"minimalistic-assert":453}],434:[function(t,s,l){var i=t("../utils"),o=t("./512");function d(){if(!(this instanceof d))return new d;o.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}i.inherits(d,o),s.exports=d,d.blockSize=1024,d.outSize=384,d.hmacStrength=192,d.padLength=128,d.prototype._digest=function(c){return c==="hex"?i.toHex32(this.h.slice(0,12),"big"):i.split32(this.h.slice(0,12),"big")}},{"../utils":437,"./512":435}],435:[function(t,s,l){var i=t("../utils"),o=t("../common"),d=t("minimalistic-assert"),c=i.rotr64_hi,a=i.rotr64_lo,u=i.shr64_hi,h=i.shr64_lo,f=i.sum64,m=i.sum64_hi,b=i.sum64_lo,y=i.sum64_4_hi,g=i.sum64_4_lo,w=i.sum64_5_hi,x=i.sum64_5_lo,_=o.BlockHash,j=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function R(){if(!(this instanceof R))return new R;_.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=j,this.W=new Array(160)}function M(S,E,O,L,z){var G=S&O^~S&z;return G<0&&(G+=4294967296),G}function I(S,E,O,L,z,G){var Z=E&L^~E&G;return Z<0&&(Z+=4294967296),Z}function F(S,E,O,L,z){var G=S&O^S&z^O&z;return G<0&&(G+=4294967296),G}function B(S,E,O,L,z,G){var Z=E&L^E&G^L&G;return Z<0&&(Z+=4294967296),Z}function U(S,E){var O=c(S,E,28)^c(E,S,2)^c(E,S,7);return O<0&&(O+=4294967296),O}function Q(S,E){var O=a(S,E,28)^a(E,S,2)^a(E,S,7);return O<0&&(O+=4294967296),O}function K(S,E){var O=c(S,E,14)^c(S,E,18)^c(E,S,9);return O<0&&(O+=4294967296),O}function T(S,E){var O=a(S,E,14)^a(S,E,18)^a(E,S,9);return O<0&&(O+=4294967296),O}function P(S,E){var O=c(S,E,1)^c(S,E,8)^u(S,E,7);return O<0&&(O+=4294967296),O}function A(S,E){var O=a(S,E,1)^a(S,E,8)^h(S,E,7);return O<0&&(O+=4294967296),O}function N(S,E){var O=c(S,E,19)^c(E,S,29)^u(S,E,6);return O<0&&(O+=4294967296),O}function k(S,E){var O=a(S,E,19)^a(E,S,29)^h(S,E,6);return O<0&&(O+=4294967296),O}i.inherits(R,_),s.exports=R,R.blockSize=1024,R.outSize=512,R.hmacStrength=192,R.padLength=128,R.prototype._prepareBlock=function(S,E){for(var O=this.W,L=0;L<32;L++)O[L]=S[E+L];for(;L<O.length;L+=2){var z=N(O[L-4],O[L-3]),G=k(O[L-4],O[L-3]),Z=O[L-14],ee=O[L-13],W=P(O[L-30],O[L-29]),J=A(O[L-30],O[L-29]),$=O[L-32],q=O[L-31];O[L]=y(z,G,Z,ee,W,J,$,q),O[L+1]=g(z,G,Z,ee,W,J,$,q)}},R.prototype._update=function(S,E){this._prepareBlock(S,E);var O=this.W,L=this.h[0],z=this.h[1],G=this.h[2],Z=this.h[3],ee=this.h[4],W=this.h[5],J=this.h[6],$=this.h[7],q=this.h[8],Y=this.h[9],se=this.h[10],oe=this.h[11],ae=this.h[12],ce=this.h[13],we=this.h[14],fe=this.h[15];d(this.k.length===O.length);for(var re=0;re<O.length;re+=2){var ge=we,le=fe,te=K(q,Y),ie=T(q,Y),ue=M(q,Y,se,oe,ae),_e=I(q,Y,se,oe,ae,ce),je=this.k[re],ke=this.k[re+1],Le=O[re],Ue=O[re+1],Qe=w(ge,le,te,ie,ue,_e,je,ke,Le,Ue),Be=x(ge,le,te,ie,ue,_e,je,ke,Le,Ue);ge=U(L,z),le=Q(L,z),te=F(L,z,G,Z,ee),ie=B(L,z,G,Z,ee,W);var ct=m(ge,le,te,ie),ft=b(ge,le,te,ie);we=ae,fe=ce,ae=se,ce=oe,se=q,oe=Y,q=m(J,$,Qe,Be),Y=b($,$,Qe,Be),J=ee,$=W,ee=G,W=Z,G=L,Z=z,L=m(Qe,Be,ct,ft),z=b(Qe,Be,ct,ft)}f(this.h,0,L,z),f(this.h,2,G,Z),f(this.h,4,ee,W),f(this.h,6,J,$),f(this.h,8,q,Y),f(this.h,10,se,oe),f(this.h,12,ae,ce),f(this.h,14,we,fe)},R.prototype._digest=function(S){return S==="hex"?i.toHex32(this.h,"big"):i.split32(this.h,"big")}},{"../common":427,"../utils":437,"minimalistic-assert":453}],436:[function(t,s,l){var i=t("../utils").rotr32;function o(a,u,h){return a&u^~a&h}function d(a,u,h){return a&u^a&h^u&h}function c(a,u,h){return a^u^h}l.ft_1=function(a,u,h,f){return a===0?o(u,h,f):a===1||a===3?c(u,h,f):a===2?d(u,h,f):void 0},l.ch32=o,l.maj32=d,l.p32=c,l.s0_256=function(a){return i(a,2)^i(a,13)^i(a,22)},l.s1_256=function(a){return i(a,6)^i(a,11)^i(a,25)},l.g0_256=function(a){return i(a,7)^i(a,18)^a>>>3},l.g1_256=function(a){return i(a,17)^i(a,19)^a>>>10}},{"../utils":437}],437:[function(t,s,l){var i=t("minimalistic-assert"),o=t("inherits");function d(h,f){return(64512&h.charCodeAt(f))==55296&&!(f<0||f+1>=h.length)&&(64512&h.charCodeAt(f+1))==56320}function c(h){return(h>>>24|h>>>8&65280|h<<8&16711680|(255&h)<<24)>>>0}function a(h){return h.length===1?"0"+h:h}function u(h){return h.length===7?"0"+h:h.length===6?"00"+h:h.length===5?"000"+h:h.length===4?"0000"+h:h.length===3?"00000"+h:h.length===2?"000000"+h:h.length===1?"0000000"+h:h}l.inherits=o,l.toArray=function(h,f){if(Array.isArray(h))return h.slice();if(!h)return[];var m=[];if(typeof h=="string")if(f){if(f==="hex")for((h=h.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(h="0"+h),y=0;y<h.length;y+=2)m.push(parseInt(h[y]+h[y+1],16))}else for(var b=0,y=0;y<h.length;y++){var g=h.charCodeAt(y);g<128?m[b++]=g:g<2048?(m[b++]=g>>6|192,m[b++]=63&g|128):d(h,y)?(g=65536+((1023&g)<<10)+(1023&h.charCodeAt(++y)),m[b++]=g>>18|240,m[b++]=g>>12&63|128,m[b++]=g>>6&63|128,m[b++]=63&g|128):(m[b++]=g>>12|224,m[b++]=g>>6&63|128,m[b++]=63&g|128)}else for(y=0;y<h.length;y++)m[y]=0|h[y];return m},l.toHex=function(h){for(var f="",m=0;m<h.length;m++)f+=a(h[m].toString(16));return f},l.htonl=c,l.toHex32=function(h,f){for(var m="",b=0;b<h.length;b++){var y=h[b];f==="little"&&(y=c(y)),m+=u(y.toString(16))}return m},l.zero2=a,l.zero8=u,l.join32=function(h,f,m,b){var y=m-f;i(y%4==0);for(var g=new Array(y/4),w=0,x=f;w<g.length;w++,x+=4){var _;_=b==="big"?h[x]<<24|h[x+1]<<16|h[x+2]<<8|h[x+3]:h[x+3]<<24|h[x+2]<<16|h[x+1]<<8|h[x],g[w]=_>>>0}return g},l.split32=function(h,f){for(var m=new Array(4*h.length),b=0,y=0;b<h.length;b++,y+=4){var g=h[b];f==="big"?(m[y]=g>>>24,m[y+1]=g>>>16&255,m[y+2]=g>>>8&255,m[y+3]=255&g):(m[y+3]=g>>>24,m[y+2]=g>>>16&255,m[y+1]=g>>>8&255,m[y]=255&g)}return m},l.rotr32=function(h,f){return h>>>f|h<<32-f},l.rotl32=function(h,f){return h<<f|h>>>32-f},l.sum32=function(h,f){return h+f>>>0},l.sum32_3=function(h,f,m){return h+f+m>>>0},l.sum32_4=function(h,f,m,b){return h+f+m+b>>>0},l.sum32_5=function(h,f,m,b,y){return h+f+m+b+y>>>0},l.sum64=function(h,f,m,b){var y=h[f],g=b+h[f+1]>>>0,w=(g<b?1:0)+m+y;h[f]=w>>>0,h[f+1]=g},l.sum64_hi=function(h,f,m,b){return(f+b>>>0<f?1:0)+h+m>>>0},l.sum64_lo=function(h,f,m,b){return f+b>>>0},l.sum64_4_hi=function(h,f,m,b,y,g,w,x){var _=0,j=f;return _+=(j=j+b>>>0)<f?1:0,_+=(j=j+g>>>0)<g?1:0,h+m+y+w+(_+=(j=j+x>>>0)<x?1:0)>>>0},l.sum64_4_lo=function(h,f,m,b,y,g,w,x){return f+b+g+x>>>0},l.sum64_5_hi=function(h,f,m,b,y,g,w,x,_,j){var R=0,M=f;return R+=(M=M+b>>>0)<f?1:0,R+=(M=M+g>>>0)<g?1:0,R+=(M=M+x>>>0)<x?1:0,h+m+y+w+_+(R+=(M=M+j>>>0)<j?1:0)>>>0},l.sum64_5_lo=function(h,f,m,b,y,g,w,x,_,j){return f+b+g+x+j>>>0},l.rotr64_hi=function(h,f,m){return(f<<32-m|h>>>m)>>>0},l.rotr64_lo=function(h,f,m){return(h<<32-m|f>>>m)>>>0},l.shr64_hi=function(h,f,m){return h>>>m},l.shr64_lo=function(h,f,m){return(h<<32-m|f>>>m)>>>0}},{inherits:440,"minimalistic-assert":453}],438:[function(t,s,l){var i=t("hash.js"),o=t("minimalistic-crypto-utils"),d=t("minimalistic-assert");function c(a){if(!(this instanceof c))return new c(a);this.hash=a.hash,this.predResist=!!a.predResist,this.outLen=this.hash.outSize,this.minEntropy=a.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var u=o.toArray(a.entropy,a.entropyEnc||"hex"),h=o.toArray(a.nonce,a.nonceEnc||"hex"),f=o.toArray(a.pers,a.persEnc||"hex");d(u.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(u,h,f)}s.exports=c,c.prototype._init=function(a,u,h){var f=a.concat(u).concat(h);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var m=0;m<this.V.length;m++)this.K[m]=0,this.V[m]=1;this._update(f),this._reseed=1,this.reseedInterval=281474976710656},c.prototype._hmac=function(){return new i.hmac(this.hash,this.K)},c.prototype._update=function(a){var u=this._hmac().update(this.V).update([0]);a&&(u=u.update(a)),this.K=u.digest(),this.V=this._hmac().update(this.V).digest(),a&&(this.K=this._hmac().update(this.V).update([1]).update(a).digest(),this.V=this._hmac().update(this.V).digest())},c.prototype.reseed=function(a,u,h,f){typeof u!="string"&&(f=h,h=u,u=null),a=o.toArray(a,u),h=o.toArray(h,f),d(a.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(a.concat(h||[])),this._reseed=1},c.prototype.generate=function(a,u,h,f){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof u!="string"&&(f=h,h=u,u=null),h&&(h=o.toArray(h,f||"hex"),this._update(h));for(var m=[];m.length<a;)this.V=this._hmac().update(this.V).digest(),m=m.concat(this.V);var b=m.slice(0,a);return this._update(h),this._reseed++,o.encode(b,u)}},{"hash.js":426,"minimalistic-assert":453,"minimalistic-crypto-utils":454}],439:[function(t,s,l){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */l.read=function(i,o,d,c,a){var u,h,f=8*a-c-1,m=(1<<f)-1,b=m>>1,y=-7,g=d?a-1:0,w=d?-1:1,x=i[o+g];for(g+=w,u=x&(1<<-y)-1,x>>=-y,y+=f;y>0;u=256*u+i[o+g],g+=w,y-=8);for(h=u&(1<<-y)-1,u>>=-y,y+=c;y>0;h=256*h+i[o+g],g+=w,y-=8);if(u===0)u=1-b;else{if(u===m)return h?NaN:1/0*(x?-1:1);h+=Math.pow(2,c),u-=b}return(x?-1:1)*h*Math.pow(2,u-c)},l.write=function(i,o,d,c,a,u){var h,f,m,b=8*u-a-1,y=(1<<b)-1,g=y>>1,w=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,x=c?0:u-1,_=c?1:-1,j=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(f=isNaN(o)?1:0,h=y):(h=Math.floor(Math.log(o)/Math.LN2),o*(m=Math.pow(2,-h))<1&&(h--,m*=2),(o+=h+g>=1?w/m:w*Math.pow(2,1-g))*m>=2&&(h++,m/=2),h+g>=y?(f=0,h=y):h+g>=1?(f=(o*m-1)*Math.pow(2,a),h+=g):(f=o*Math.pow(2,g-1)*Math.pow(2,a),h=0));a>=8;i[d+x]=255&f,x+=_,f/=256,a-=8);for(h=h<<a|f,b+=a;b>0;i[d+x]=255&h,x+=_,h/=256,b-=8);i[d+x-_]|=128*j}},{}],440:[function(t,s,l){typeof Object.create=="function"?s.exports=function(i,o){o&&(i.super_=o,i.prototype=Object.create(o.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}))}:s.exports=function(i,o){if(o){i.super_=o;var d=function(){};d.prototype=o.prototype,i.prototype=new d,i.prototype.constructor=i}}},{}],441:[function(t,s,l){(function(i,o,d,c,a,u,h,f){(function(){/*!

		JSZip v3.10.1 - A JavaScript class for generating and reading zip files
		<http://stuartk.com/jszip>

		(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
		Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

		JSZip uses the library pako released under the MIT license :
		https://github.com/nodeca/pako/blob/main/LICENSE
		*/(function(m){typeof l=="object"&&s!==void 0?s.exports=m():(typeof window<"u"?window:o!==void 0?o:typeof self<"u"?self:this).JSZip=m()})(function(){return function m(b,y,g){function w(j,R){if(!y[j]){if(!b[j]){var M=typeof t=="function"&&t;if(!R&&M)return M(j,!0);if(x)return x(j,!0);var I=new Error("Cannot find module '"+j+"'");throw I.code="MODULE_NOT_FOUND",I}var F=y[j]={exports:{}};b[j][0].call(F.exports,function(B){return w(b[j][1][B]||B)},F,F.exports,m,b,y,g)}return y[j].exports}for(var x=typeof t=="function"&&t,_=0;_<g.length;_++)w(g[_]);return w}({1:[function(m,b,y){var g=m("./utils"),w=m("./support"),x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";y.encode=function(_){for(var j,R,M,I,F,B,U,Q=[],K=0,T=_.length,P=T,A=g.getTypeOf(_)!=="string";K<_.length;)P=T-K,M=A?(j=_[K++],R=K<T?_[K++]:0,K<T?_[K++]:0):(j=_.charCodeAt(K++),R=K<T?_.charCodeAt(K++):0,K<T?_.charCodeAt(K++):0),I=j>>2,F=(3&j)<<4|R>>4,B=1<P?(15&R)<<2|M>>6:64,U=2<P?63&M:64,Q.push(x.charAt(I)+x.charAt(F)+x.charAt(B)+x.charAt(U));return Q.join("")},y.decode=function(_){var j,R,M,I,F,B,U=0,Q=0,K="data:";if(_.substr(0,K.length)===K)throw new Error("Invalid base64 input, it looks like a data url.");var T,P=3*(_=_.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(_.charAt(_.length-1)===x.charAt(64)&&P--,_.charAt(_.length-2)===x.charAt(64)&&P--,P%1!=0)throw new Error("Invalid base64 input, bad content length.");for(T=w.uint8array?new Uint8Array(0|P):new Array(0|P);U<_.length;)j=x.indexOf(_.charAt(U++))<<2|(I=x.indexOf(_.charAt(U++)))>>4,R=(15&I)<<4|(F=x.indexOf(_.charAt(U++)))>>2,M=(3&F)<<6|(B=x.indexOf(_.charAt(U++))),T[Q++]=j,F!==64&&(T[Q++]=R),B!==64&&(T[Q++]=M);return T}},{"./support":30,"./utils":32}],2:[function(m,b,y){var g=m("./external"),w=m("./stream/DataWorker"),x=m("./stream/Crc32Probe"),_=m("./stream/DataLengthProbe");function j(R,M,I,F,B){this.compressedSize=R,this.uncompressedSize=M,this.crc32=I,this.compression=F,this.compressedContent=B}j.prototype={getContentWorker:function(){var R=new w(g.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new _("data_length")),M=this;return R.on("end",function(){if(this.streamInfo.data_length!==M.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),R},getCompressedWorker:function(){return new w(g.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},j.createWorkerFrom=function(R,M,I){return R.pipe(new x).pipe(new _("uncompressedSize")).pipe(M.compressWorker(I)).pipe(new _("compressedSize")).withStreamInfo("compression",M)},b.exports=j},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(m,b,y){var g=m("./stream/GenericWorker");y.STORE={magic:"\0\0",compressWorker:function(){return new g("STORE compression")},uncompressWorker:function(){return new g("STORE decompression")}},y.DEFLATE=m("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(m,b,y){var g=m("./utils"),w=function(){for(var x,_=[],j=0;j<256;j++){x=j;for(var R=0;R<8;R++)x=1&x?3988292384^x>>>1:x>>>1;_[j]=x}return _}();b.exports=function(x,_){return x!==void 0&&x.length?g.getTypeOf(x)!=="string"?function(j,R,M,I){var F=w,B=0+M;j^=-1;for(var U=0;U<B;U++)j=j>>>8^F[255&(j^R[U])];return-1^j}(0|_,x,x.length):function(j,R,M,I){var F=w,B=0+M;j^=-1;for(var U=0;U<B;U++)j=j>>>8^F[255&(j^R.charCodeAt(U))];return-1^j}(0|_,x,x.length):0}},{"./utils":32}],5:[function(m,b,y){y.base64=!1,y.binary=!1,y.dir=!1,y.createFolders=!0,y.date=null,y.compression=null,y.compressionOptions=null,y.comment=null,y.unixPermissions=null,y.dosPermissions=null},{}],6:[function(m,b,y){var g;g=typeof Promise<"u"?Promise:m("lie"),b.exports={Promise:g}},{lie:37}],7:[function(m,b,y){var g=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",w=m("pako"),x=m("./utils"),_=m("./stream/GenericWorker"),j=g?"uint8array":"array";function R(M,I){_.call(this,"FlateWorker/"+M),this._pako=null,this._pakoAction=M,this._pakoOptions=I,this.meta={}}y.magic="\b\0",x.inherits(R,_),R.prototype.processChunk=function(M){this.meta=M.meta,this._pako===null&&this._createPako(),this._pako.push(x.transformTo(j,M.data),!1)},R.prototype.flush=function(){_.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},R.prototype.cleanUp=function(){_.prototype.cleanUp.call(this),this._pako=null},R.prototype._createPako=function(){this._pako=new w[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var M=this;this._pako.onData=function(I){M.push({data:I,meta:M.meta})}},y.compressWorker=function(M){return new R("Deflate",M)},y.uncompressWorker=function(){return new R("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(m,b,y){function g(F,B){var U,Q="";for(U=0;U<B;U++)Q+=String.fromCharCode(255&F),F>>>=8;return Q}function w(F,B,U,Q,K,T){var P,A,N=F.file,k=F.compression,S=T!==j.utf8encode,E=x.transformTo("string",T(N.name)),O=x.transformTo("string",j.utf8encode(N.name)),L=N.comment,z=x.transformTo("string",T(L)),G=x.transformTo("string",j.utf8encode(L)),Z=O.length!==N.name.length,ee=G.length!==L.length,W="",J="",$="",q=N.dir,Y=N.date,se={crc32:0,compressedSize:0,uncompressedSize:0};B&&!U||(se.crc32=F.crc32,se.compressedSize=F.compressedSize,se.uncompressedSize=F.uncompressedSize);var oe=0;B&&(oe|=8),S||!Z&&!ee||(oe|=2048);var ae=0,ce=0;q&&(ae|=16),K==="UNIX"?(ce=798,ae|=function(fe,re){var ge=fe;return fe||(ge=re?16893:33204),(65535&ge)<<16}(N.unixPermissions,q)):(ce=20,ae|=function(fe){return 63&(fe||0)}(N.dosPermissions)),P=Y.getUTCHours(),P<<=6,P|=Y.getUTCMinutes(),P<<=5,P|=Y.getUTCSeconds()/2,A=Y.getUTCFullYear()-1980,A<<=4,A|=Y.getUTCMonth()+1,A<<=5,A|=Y.getUTCDate(),Z&&(J=g(1,1)+g(R(E),4)+O,W+="up"+g(J.length,2)+J),ee&&($=g(1,1)+g(R(z),4)+G,W+="uc"+g($.length,2)+$);var we="";return we+=`
\0`,we+=g(oe,2),we+=k.magic,we+=g(P,2),we+=g(A,2),we+=g(se.crc32,4),we+=g(se.compressedSize,4),we+=g(se.uncompressedSize,4),we+=g(E.length,2),we+=g(W.length,2),{fileRecord:M.LOCAL_FILE_HEADER+we+E+W,dirRecord:M.CENTRAL_FILE_HEADER+g(ce,2)+we+g(z.length,2)+"\0\0\0\0"+g(ae,4)+g(Q,4)+E+W+z}}var x=m("../utils"),_=m("../stream/GenericWorker"),j=m("../utf8"),R=m("../crc32"),M=m("../signature");function I(F,B,U,Q){_.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=B,this.zipPlatform=U,this.encodeFileName=Q,this.streamFiles=F,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}x.inherits(I,_),I.prototype.push=function(F){var B=F.meta.percent||0,U=this.entriesCount,Q=this._sources.length;this.accumulate?this.contentBuffer.push(F):(this.bytesWritten+=F.data.length,_.prototype.push.call(this,{data:F.data,meta:{currentFile:this.currentFile,percent:U?(B+100*(U-Q-1))/U:100}}))},I.prototype.openedSource=function(F){this.currentSourceOffset=this.bytesWritten,this.currentFile=F.file.name;var B=this.streamFiles&&!F.file.dir;if(B){var U=w(F,B,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:U.fileRecord,meta:{percent:0}})}else this.accumulate=!0},I.prototype.closedSource=function(F){this.accumulate=!1;var B=this.streamFiles&&!F.file.dir,U=w(F,B,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(U.dirRecord),B)this.push({data:function(Q){return M.DATA_DESCRIPTOR+g(Q.crc32,4)+g(Q.compressedSize,4)+g(Q.uncompressedSize,4)}(F),meta:{percent:100}});else for(this.push({data:U.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},I.prototype.flush=function(){for(var F=this.bytesWritten,B=0;B<this.dirRecords.length;B++)this.push({data:this.dirRecords[B],meta:{percent:100}});var U=this.bytesWritten-F,Q=function(K,T,P,A,N){var k=x.transformTo("string",N(A));return M.CENTRAL_DIRECTORY_END+"\0\0\0\0"+g(K,2)+g(K,2)+g(T,4)+g(P,4)+g(k.length,2)+k}(this.dirRecords.length,U,F,this.zipComment,this.encodeFileName);this.push({data:Q,meta:{percent:100}})},I.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},I.prototype.registerPrevious=function(F){this._sources.push(F);var B=this;return F.on("data",function(U){B.processChunk(U)}),F.on("end",function(){B.closedSource(B.previous.streamInfo),B._sources.length?B.prepareNextSource():B.end()}),F.on("error",function(U){B.error(U)}),this},I.prototype.resume=function(){return!!_.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},I.prototype.error=function(F){var B=this._sources;if(!_.prototype.error.call(this,F))return!1;for(var U=0;U<B.length;U++)try{B[U].error(F)}catch{}return!0},I.prototype.lock=function(){_.prototype.lock.call(this);for(var F=this._sources,B=0;B<F.length;B++)F[B].lock()},b.exports=I},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(m,b,y){var g=m("../compressions"),w=m("./ZipFileWorker");y.generateWorker=function(x,_,j){var R=new w(_.streamFiles,j,_.platform,_.encodeFileName),M=0;try{x.forEach(function(I,F){M++;var B=function(T,P){var A=T||P,N=g[A];if(!N)throw new Error(A+" is not a valid compression method !");return N}(F.options.compression,_.compression),U=F.options.compressionOptions||_.compressionOptions||{},Q=F.dir,K=F.date;F._compressWorker(B,U).withStreamInfo("file",{name:I,dir:Q,date:K,comment:F.comment||"",unixPermissions:F.unixPermissions,dosPermissions:F.dosPermissions}).pipe(R)}),R.entriesCount=M}catch(I){R.error(I)}return R}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(m,b,y){function g(){if(!(this instanceof g))return new g;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var w=new g;for(var x in this)typeof this[x]!="function"&&(w[x]=this[x]);return w}}(g.prototype=m("./object")).loadAsync=m("./load"),g.support=m("./support"),g.defaults=m("./defaults"),g.version="3.10.1",g.loadAsync=function(w,x){return new g().loadAsync(w,x)},g.external=m("./external"),b.exports=g},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(m,b,y){var g=m("./utils"),w=m("./external"),x=m("./utf8"),_=m("./zipEntries"),j=m("./stream/Crc32Probe"),R=m("./nodejsUtils");function M(I){return new w.Promise(function(F,B){var U=I.decompressed.getContentWorker().pipe(new j);U.on("error",function(Q){B(Q)}).on("end",function(){U.streamInfo.crc32!==I.decompressed.crc32?B(new Error("Corrupted zip : CRC32 mismatch")):F()}).resume()})}b.exports=function(I,F){var B=this;return F=g.extend(F||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:x.utf8decode}),R.isNode&&R.isStream(I)?w.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):g.prepareContent("the loaded zip file",I,!0,F.optimizedBinaryString,F.base64).then(function(U){var Q=new _(F);return Q.load(U),Q}).then(function(U){var Q=[w.Promise.resolve(U)],K=U.files;if(F.checkCRC32)for(var T=0;T<K.length;T++)Q.push(M(K[T]));return w.Promise.all(Q)}).then(function(U){for(var Q=U.shift(),K=Q.files,T=0;T<K.length;T++){var P=K[T],A=P.fileNameStr,N=g.resolve(P.fileNameStr);B.file(N,P.decompressed,{binary:!0,optimizedBinaryString:!0,date:P.date,dir:P.dir,comment:P.fileCommentStr.length?P.fileCommentStr:null,unixPermissions:P.unixPermissions,dosPermissions:P.dosPermissions,createFolders:F.createFolders}),P.dir||(B.file(N).unsafeOriginalName=A)}return Q.zipComment.length&&(B.comment=Q.zipComment),B})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(m,b,y){var g=m("../utils"),w=m("../stream/GenericWorker");function x(_,j){w.call(this,"Nodejs stream input adapter for "+_),this._upstreamEnded=!1,this._bindStream(j)}g.inherits(x,w),x.prototype._bindStream=function(_){var j=this;(this._stream=_).pause(),_.on("data",function(R){j.push({data:R,meta:{percent:0}})}).on("error",function(R){j.isPaused?this.generatedError=R:j.error(R)}).on("end",function(){j.isPaused?j._upstreamEnded=!0:j.end()})},x.prototype.pause=function(){return!!w.prototype.pause.call(this)&&(this._stream.pause(),!0)},x.prototype.resume=function(){return!!w.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},b.exports=x},{"../stream/GenericWorker":28,"../utils":32}],13:[function(m,b,y){var g=m("readable-stream").Readable;function w(x,_,j){g.call(this,_),this._helper=x;var R=this;x.on("data",function(M,I){R.push(M)||R._helper.pause(),j&&j(I)}).on("error",function(M){R.emit("error",M)}).on("end",function(){R.push(null)})}m("../utils").inherits(w,g),w.prototype._read=function(){this._helper.resume()},b.exports=w},{"../utils":32,"readable-stream":16}],14:[function(m,b,y){b.exports={isNode:d!==void 0,newBufferFrom:function(g,w){if(d.from&&d.from!==Uint8Array.from)return d.from(g,w);if(typeof g=="number")throw new Error('The "data" argument must not be a number');return new d(g,w)},allocBuffer:function(g){if(d.alloc)return d.alloc(g);var w=new d(g);return w.fill(0),w},isBuffer:function(g){return d.isBuffer(g)},isStream:function(g){return g&&typeof g.on=="function"&&typeof g.pause=="function"&&typeof g.resume=="function"}}},{}],15:[function(m,b,y){function g(N,k,S){var E,O=x.getTypeOf(k),L=x.extend(S||{},R);L.date=L.date||new Date,L.compression!==null&&(L.compression=L.compression.toUpperCase()),typeof L.unixPermissions=="string"&&(L.unixPermissions=parseInt(L.unixPermissions,8)),L.unixPermissions&&16384&L.unixPermissions&&(L.dir=!0),L.dosPermissions&&16&L.dosPermissions&&(L.dir=!0),L.dir&&(N=K(N)),L.createFolders&&(E=Q(N))&&T.call(this,E,!0);var z=O==="string"&&L.binary===!1&&L.base64===!1;S&&S.binary!==void 0||(L.binary=!z),(k instanceof M&&k.uncompressedSize===0||L.dir||!k||k.length===0)&&(L.base64=!1,L.binary=!0,k="",L.compression="STORE",O="string");var G;G=k instanceof M||k instanceof _?k:B.isNode&&B.isStream(k)?new U(N,k):x.prepareContent(N,k,L.binary,L.optimizedBinaryString,L.base64);var Z=new I(N,G,L);this.files[N]=Z}var w=m("./utf8"),x=m("./utils"),_=m("./stream/GenericWorker"),j=m("./stream/StreamHelper"),R=m("./defaults"),M=m("./compressedObject"),I=m("./zipObject"),F=m("./generate"),B=m("./nodejsUtils"),U=m("./nodejs/NodejsStreamInputAdapter"),Q=function(N){N.slice(-1)==="/"&&(N=N.substring(0,N.length-1));var k=N.lastIndexOf("/");return 0<k?N.substring(0,k):""},K=function(N){return N.slice(-1)!=="/"&&(N+="/"),N},T=function(N,k){return k=k!==void 0?k:R.createFolders,N=K(N),this.files[N]||g.call(this,N,null,{dir:!0,createFolders:k}),this.files[N]};function P(N){return Object.prototype.toString.call(N)==="[object RegExp]"}var A={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(N){var k,S,E;for(k in this.files)E=this.files[k],(S=k.slice(this.root.length,k.length))&&k.slice(0,this.root.length)===this.root&&N(S,E)},filter:function(N){var k=[];return this.forEach(function(S,E){N(S,E)&&k.push(E)}),k},file:function(N,k,S){if(arguments.length!==1)return N=this.root+N,g.call(this,N,k,S),this;if(P(N)){var E=N;return this.filter(function(L,z){return!z.dir&&E.test(L)})}var O=this.files[this.root+N];return O&&!O.dir?O:null},folder:function(N){if(!N)return this;if(P(N))return this.filter(function(O,L){return L.dir&&N.test(O)});var k=this.root+N,S=T.call(this,k),E=this.clone();return E.root=S.name,E},remove:function(N){N=this.root+N;var k=this.files[N];if(k||(N.slice(-1)!=="/"&&(N+="/"),k=this.files[N]),k&&!k.dir)delete this.files[N];else for(var S=this.filter(function(O,L){return L.name.slice(0,N.length)===N}),E=0;E<S.length;E++)delete this.files[S[E].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(N){var k,S={};try{if((S=x.extend(N||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:w.utf8encode})).type=S.type.toLowerCase(),S.compression=S.compression.toUpperCase(),S.type==="binarystring"&&(S.type="string"),!S.type)throw new Error("No output type specified.");x.checkSupport(S.type),S.platform!=="darwin"&&S.platform!=="freebsd"&&S.platform!=="linux"&&S.platform!=="sunos"||(S.platform="UNIX"),S.platform==="win32"&&(S.platform="DOS");var E=S.comment||this.comment||"";k=F.generateWorker(this,S,E)}catch(O){(k=new _("error")).error(O)}return new j(k,S.type||"string",S.mimeType)},generateAsync:function(N,k){return this.generateInternalStream(N).accumulate(k)},generateNodeStream:function(N,k){return(N=N||{}).type||(N.type="nodebuffer"),this.generateInternalStream(N).toNodejsStream(k)}};b.exports=A},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(m,b,y){b.exports=m("stream")},{stream:void 0}],17:[function(m,b,y){var g=m("./DataReader");function w(x){g.call(this,x);for(var _=0;_<this.data.length;_++)x[_]=255&x[_]}m("../utils").inherits(w,g),w.prototype.byteAt=function(x){return this.data[this.zero+x]},w.prototype.lastIndexOfSignature=function(x){for(var _=x.charCodeAt(0),j=x.charCodeAt(1),R=x.charCodeAt(2),M=x.charCodeAt(3),I=this.length-4;0<=I;--I)if(this.data[I]===_&&this.data[I+1]===j&&this.data[I+2]===R&&this.data[I+3]===M)return I-this.zero;return-1},w.prototype.readAndCheckSignature=function(x){var _=x.charCodeAt(0),j=x.charCodeAt(1),R=x.charCodeAt(2),M=x.charCodeAt(3),I=this.readData(4);return _===I[0]&&j===I[1]&&R===I[2]&&M===I[3]},w.prototype.readData=function(x){if(this.checkOffset(x),x===0)return[];var _=this.data.slice(this.zero+this.index,this.zero+this.index+x);return this.index+=x,_},b.exports=w},{"../utils":32,"./DataReader":18}],18:[function(m,b,y){var g=m("../utils");function w(x){this.data=x,this.length=x.length,this.index=0,this.zero=0}w.prototype={checkOffset:function(x){this.checkIndex(this.index+x)},checkIndex:function(x){if(this.length<this.zero+x||x<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+x+"). Corrupted zip ?")},setIndex:function(x){this.checkIndex(x),this.index=x},skip:function(x){this.setIndex(this.index+x)},byteAt:function(){},readInt:function(x){var _,j=0;for(this.checkOffset(x),_=this.index+x-1;_>=this.index;_--)j=(j<<8)+this.byteAt(_);return this.index+=x,j},readString:function(x){return g.transformTo("string",this.readData(x))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var x=this.readInt(4);return new Date(Date.UTC(1980+(x>>25&127),(x>>21&15)-1,x>>16&31,x>>11&31,x>>5&63,(31&x)<<1))}},b.exports=w},{"../utils":32}],19:[function(m,b,y){var g=m("./Uint8ArrayReader");function w(x){g.call(this,x)}m("../utils").inherits(w,g),w.prototype.readData=function(x){this.checkOffset(x);var _=this.data.slice(this.zero+this.index,this.zero+this.index+x);return this.index+=x,_},b.exports=w},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(m,b,y){var g=m("./DataReader");function w(x){g.call(this,x)}m("../utils").inherits(w,g),w.prototype.byteAt=function(x){return this.data.charCodeAt(this.zero+x)},w.prototype.lastIndexOfSignature=function(x){return this.data.lastIndexOf(x)-this.zero},w.prototype.readAndCheckSignature=function(x){return x===this.readData(4)},w.prototype.readData=function(x){this.checkOffset(x);var _=this.data.slice(this.zero+this.index,this.zero+this.index+x);return this.index+=x,_},b.exports=w},{"../utils":32,"./DataReader":18}],21:[function(m,b,y){var g=m("./ArrayReader");function w(x){g.call(this,x)}m("../utils").inherits(w,g),w.prototype.readData=function(x){if(this.checkOffset(x),x===0)return new Uint8Array(0);var _=this.data.subarray(this.zero+this.index,this.zero+this.index+x);return this.index+=x,_},b.exports=w},{"../utils":32,"./ArrayReader":17}],22:[function(m,b,y){var g=m("../utils"),w=m("../support"),x=m("./ArrayReader"),_=m("./StringReader"),j=m("./NodeBufferReader"),R=m("./Uint8ArrayReader");b.exports=function(M){var I=g.getTypeOf(M);return g.checkSupport(I),I!=="string"||w.uint8array?I==="nodebuffer"?new j(M):w.uint8array?new R(g.transformTo("uint8array",M)):new x(g.transformTo("array",M)):new _(M)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(m,b,y){y.LOCAL_FILE_HEADER="PK",y.CENTRAL_FILE_HEADER="PK",y.CENTRAL_DIRECTORY_END="PK",y.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",y.ZIP64_CENTRAL_DIRECTORY_END="PK",y.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(m,b,y){var g=m("./GenericWorker"),w=m("../utils");function x(_){g.call(this,"ConvertWorker to "+_),this.destType=_}w.inherits(x,g),x.prototype.processChunk=function(_){this.push({data:w.transformTo(this.destType,_.data),meta:_.meta})},b.exports=x},{"../utils":32,"./GenericWorker":28}],25:[function(m,b,y){var g=m("./GenericWorker"),w=m("../crc32");function x(){g.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}m("../utils").inherits(x,g),x.prototype.processChunk=function(_){this.streamInfo.crc32=w(_.data,this.streamInfo.crc32||0),this.push(_)},b.exports=x},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(m,b,y){var g=m("../utils"),w=m("./GenericWorker");function x(_){w.call(this,"DataLengthProbe for "+_),this.propName=_,this.withStreamInfo(_,0)}g.inherits(x,w),x.prototype.processChunk=function(_){if(_){var j=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=j+_.data.length}w.prototype.processChunk.call(this,_)},b.exports=x},{"../utils":32,"./GenericWorker":28}],27:[function(m,b,y){var g=m("../utils"),w=m("./GenericWorker");function x(_){w.call(this,"DataWorker");var j=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,_.then(function(R){j.dataIsReady=!0,j.data=R,j.max=R&&R.length||0,j.type=g.getTypeOf(R),j.isPaused||j._tickAndRepeat()},function(R){j.error(R)})}g.inherits(x,w),x.prototype.cleanUp=function(){w.prototype.cleanUp.call(this),this.data=null},x.prototype.resume=function(){return!!w.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,g.delay(this._tickAndRepeat,[],this)),!0)},x.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(g.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},x.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var _=null,j=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":_=this.data.substring(this.index,j);break;case"uint8array":_=this.data.subarray(this.index,j);break;case"array":case"nodebuffer":_=this.data.slice(this.index,j)}return this.index=j,this.push({data:_,meta:{percent:this.max?this.index/this.max*100:0}})},b.exports=x},{"../utils":32,"./GenericWorker":28}],28:[function(m,b,y){function g(w){this.name=w||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}g.prototype={push:function(w){this.emit("data",w)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(w){this.emit("error",w)}return!0},error:function(w){return!this.isFinished&&(this.isPaused?this.generatedError=w:(this.isFinished=!0,this.emit("error",w),this.previous&&this.previous.error(w),this.cleanUp()),!0)},on:function(w,x){return this._listeners[w].push(x),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(w,x){if(this._listeners[w])for(var _=0;_<this._listeners[w].length;_++)this._listeners[w][_].call(this,x)},pipe:function(w){return w.registerPrevious(this)},registerPrevious:function(w){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=w.streamInfo,this.mergeStreamInfo(),this.previous=w;var x=this;return w.on("data",function(_){x.processChunk(_)}),w.on("end",function(){x.end()}),w.on("error",function(_){x.error(_)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var w=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),w=!0),this.previous&&this.previous.resume(),!w},flush:function(){},processChunk:function(w){this.push(w)},withStreamInfo:function(w,x){return this.extraStreamInfo[w]=x,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var w in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,w)&&(this.streamInfo[w]=this.extraStreamInfo[w])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var w="Worker "+this.name;return this.previous?this.previous+" -> "+w:w}},b.exports=g},{}],29:[function(m,b,y){var g=m("../utils"),w=m("./ConvertWorker"),x=m("./GenericWorker"),_=m("../base64"),j=m("../support"),R=m("../external"),M=null;if(j.nodestream)try{M=m("../nodejs/NodejsStreamOutputAdapter")}catch{}function I(F,B,U){var Q=B;switch(B){case"blob":case"arraybuffer":Q="uint8array";break;case"base64":Q="string"}try{this._internalType=Q,this._outputType=B,this._mimeType=U,g.checkSupport(Q),this._worker=F.pipe(new w(Q)),F.lock()}catch(K){this._worker=new x("error"),this._worker.error(K)}}I.prototype={accumulate:function(F){return function(B,U){return new R.Promise(function(Q,K){var T=[],P=B._internalType,A=B._outputType,N=B._mimeType;B.on("data",function(k,S){T.push(k),U&&U(S)}).on("error",function(k){T=[],K(k)}).on("end",function(){try{var k=function(S,E,O){switch(S){case"blob":return g.newBlob(g.transformTo("arraybuffer",E),O);case"base64":return _.encode(E);default:return g.transformTo(S,E)}}(A,function(S,E){var O,L=0,z=null,G=0;for(O=0;O<E.length;O++)G+=E[O].length;switch(S){case"string":return E.join("");case"array":return Array.prototype.concat.apply([],E);case"uint8array":for(z=new Uint8Array(G),O=0;O<E.length;O++)z.set(E[O],L),L+=E[O].length;return z;case"nodebuffer":return d.concat(E);default:throw new Error("concat : unsupported type '"+S+"'")}}(P,T),N);Q(k)}catch(S){K(S)}T=[]}).resume()})}(this,F)},on:function(F,B){var U=this;return F==="data"?this._worker.on(F,function(Q){B.call(U,Q.data,Q.meta)}):this._worker.on(F,function(){g.delay(B,arguments,U)}),this},resume:function(){return g.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(F){if(g.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new M(this,{objectMode:this._outputType!=="nodebuffer"},F)}},b.exports=I},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(m,b,y){if(y.base64=!0,y.array=!0,y.string=!0,y.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",y.nodebuffer=d!==void 0,y.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")y.blob=!1;else{var g=new ArrayBuffer(0);try{y.blob=new Blob([g],{type:"application/zip"}).size===0}catch{try{var w=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);w.append(g),y.blob=w.getBlob("application/zip").size===0}catch{y.blob=!1}}}try{y.nodestream=!!m("readable-stream").Readable}catch{y.nodestream=!1}},{"readable-stream":16}],31:[function(m,b,y){for(var g=m("./utils"),w=m("./support"),x=m("./nodejsUtils"),_=m("./stream/GenericWorker"),j=new Array(256),R=0;R<256;R++)j[R]=252<=R?6:248<=R?5:240<=R?4:224<=R?3:192<=R?2:1;function M(){_.call(this,"utf-8 decode"),this.leftOver=null}function I(){_.call(this,"utf-8 encode")}j[254]=j[254]=1,y.utf8encode=function(F){return w.nodebuffer?x.newBufferFrom(F,"utf-8"):function(B){var U,Q,K,T,P,A=B.length,N=0;for(T=0;T<A;T++)(64512&(Q=B.charCodeAt(T)))==55296&&T+1<A&&(64512&(K=B.charCodeAt(T+1)))==56320&&(Q=65536+(Q-55296<<10)+(K-56320),T++),N+=Q<128?1:Q<2048?2:Q<65536?3:4;for(U=w.uint8array?new Uint8Array(N):new Array(N),T=P=0;P<N;T++)(64512&(Q=B.charCodeAt(T)))==55296&&T+1<A&&(64512&(K=B.charCodeAt(T+1)))==56320&&(Q=65536+(Q-55296<<10)+(K-56320),T++),Q<128?U[P++]=Q:(Q<2048?U[P++]=192|Q>>>6:(Q<65536?U[P++]=224|Q>>>12:(U[P++]=240|Q>>>18,U[P++]=128|Q>>>12&63),U[P++]=128|Q>>>6&63),U[P++]=128|63&Q);return U}(F)},y.utf8decode=function(F){return w.nodebuffer?g.transformTo("nodebuffer",F).toString("utf-8"):function(B){var U,Q,K,T,P=B.length,A=new Array(2*P);for(U=Q=0;U<P;)if((K=B[U++])<128)A[Q++]=K;else if(4<(T=j[K]))A[Q++]=65533,U+=T-1;else{for(K&=T===2?31:T===3?15:7;1<T&&U<P;)K=K<<6|63&B[U++],T--;1<T?A[Q++]=65533:K<65536?A[Q++]=K:(K-=65536,A[Q++]=55296|K>>10&1023,A[Q++]=56320|1023&K)}return A.length!==Q&&(A.subarray?A=A.subarray(0,Q):A.length=Q),g.applyFromCharCode(A)}(F=g.transformTo(w.uint8array?"uint8array":"array",F))},g.inherits(M,_),M.prototype.processChunk=function(F){var B=g.transformTo(w.uint8array?"uint8array":"array",F.data);if(this.leftOver&&this.leftOver.length){if(w.uint8array){var U=B;(B=new Uint8Array(U.length+this.leftOver.length)).set(this.leftOver,0),B.set(U,this.leftOver.length)}else B=this.leftOver.concat(B);this.leftOver=null}var Q=function(T,P){var A;for((P=P||T.length)>T.length&&(P=T.length),A=P-1;0<=A&&(192&T[A])==128;)A--;return A<0||A===0?P:A+j[T[A]]>P?A:P}(B),K=B;Q!==B.length&&(w.uint8array?(K=B.subarray(0,Q),this.leftOver=B.subarray(Q,B.length)):(K=B.slice(0,Q),this.leftOver=B.slice(Q,B.length))),this.push({data:y.utf8decode(K),meta:F.meta})},M.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:y.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},y.Utf8DecodeWorker=M,g.inherits(I,_),I.prototype.processChunk=function(F){this.push({data:y.utf8encode(F.data),meta:F.meta})},y.Utf8EncodeWorker=I},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(m,b,y){var g=m("./support"),w=m("./base64"),x=m("./nodejsUtils"),_=m("./external");function j(U){return U}function R(U,Q){for(var K=0;K<U.length;++K)Q[K]=255&U.charCodeAt(K);return Q}m("setimmediate"),y.newBlob=function(U,Q){y.checkSupport("blob");try{return new Blob([U],{type:Q})}catch{try{var K=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return K.append(U),K.getBlob(Q)}catch{throw new Error("Bug : can't construct the Blob.")}}};var M={stringifyByChunk:function(U,Q,K){var T=[],P=0,A=U.length;if(A<=K)return String.fromCharCode.apply(null,U);for(;P<A;)Q==="array"||Q==="nodebuffer"?T.push(String.fromCharCode.apply(null,U.slice(P,Math.min(P+K,A)))):T.push(String.fromCharCode.apply(null,U.subarray(P,Math.min(P+K,A)))),P+=K;return T.join("")},stringifyByChar:function(U){for(var Q="",K=0;K<U.length;K++)Q+=String.fromCharCode(U[K]);return Q},applyCanBeUsed:{uint8array:function(){try{return g.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return g.nodebuffer&&String.fromCharCode.apply(null,x.allocBuffer(1)).length===1}catch{return!1}}()}};function I(U){var Q=65536,K=y.getTypeOf(U),T=!0;if(K==="uint8array"?T=M.applyCanBeUsed.uint8array:K==="nodebuffer"&&(T=M.applyCanBeUsed.nodebuffer),T)for(;1<Q;)try{return M.stringifyByChunk(U,K,Q)}catch{Q=Math.floor(Q/2)}return M.stringifyByChar(U)}function F(U,Q){for(var K=0;K<U.length;K++)Q[K]=U[K];return Q}y.applyFromCharCode=I;var B={};B.string={string:j,array:function(U){return R(U,new Array(U.length))},arraybuffer:function(U){return B.string.uint8array(U).buffer},uint8array:function(U){return R(U,new Uint8Array(U.length))},nodebuffer:function(U){return R(U,x.allocBuffer(U.length))}},B.array={string:I,array:j,arraybuffer:function(U){return new Uint8Array(U).buffer},uint8array:function(U){return new Uint8Array(U)},nodebuffer:function(U){return x.newBufferFrom(U)}},B.arraybuffer={string:function(U){return I(new Uint8Array(U))},array:function(U){return F(new Uint8Array(U),new Array(U.byteLength))},arraybuffer:j,uint8array:function(U){return new Uint8Array(U)},nodebuffer:function(U){return x.newBufferFrom(new Uint8Array(U))}},B.uint8array={string:I,array:function(U){return F(U,new Array(U.length))},arraybuffer:function(U){return U.buffer},uint8array:j,nodebuffer:function(U){return x.newBufferFrom(U)}},B.nodebuffer={string:I,array:function(U){return F(U,new Array(U.length))},arraybuffer:function(U){return B.nodebuffer.uint8array(U).buffer},uint8array:function(U){return F(U,new Uint8Array(U.length))},nodebuffer:j},y.transformTo=function(U,Q){if(Q=Q||"",!U)return Q;y.checkSupport(U);var K=y.getTypeOf(Q);return B[K][U](Q)},y.resolve=function(U){for(var Q=U.split("/"),K=[],T=0;T<Q.length;T++){var P=Q[T];P==="."||P===""&&T!==0&&T!==Q.length-1||(P===".."?K.pop():K.push(P))}return K.join("/")},y.getTypeOf=function(U){return typeof U=="string"?"string":Object.prototype.toString.call(U)==="[object Array]"?"array":g.nodebuffer&&x.isBuffer(U)?"nodebuffer":g.uint8array&&U instanceof Uint8Array?"uint8array":g.arraybuffer&&U instanceof ArrayBuffer?"arraybuffer":void 0},y.checkSupport=function(U){if(!g[U.toLowerCase()])throw new Error(U+" is not supported by this platform")},y.MAX_VALUE_16BITS=65535,y.MAX_VALUE_32BITS=-1,y.pretty=function(U){var Q,K,T="";for(K=0;K<(U||"").length;K++)T+="\\x"+((Q=U.charCodeAt(K))<16?"0":"")+Q.toString(16).toUpperCase();return T},y.delay=function(U,Q,K){f(function(){U.apply(K||null,Q||[])})},y.inherits=function(U,Q){function K(){}K.prototype=Q.prototype,U.prototype=new K},y.extend=function(){var U,Q,K={};for(U=0;U<arguments.length;U++)for(Q in arguments[U])Object.prototype.hasOwnProperty.call(arguments[U],Q)&&K[Q]===void 0&&(K[Q]=arguments[U][Q]);return K},y.prepareContent=function(U,Q,K,T,P){return _.Promise.resolve(Q).then(function(A){return g.blob&&(A instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(A))!==-1)&&typeof FileReader<"u"?new _.Promise(function(N,k){var S=new FileReader;S.onload=function(E){N(E.target.result)},S.onerror=function(E){k(E.target.error)},S.readAsArrayBuffer(A)}):A}).then(function(A){var N=y.getTypeOf(A);return N?(N==="arraybuffer"?A=y.transformTo("uint8array",A):N==="string"&&(P?A=w.decode(A):K&&T!==!0&&(A=function(k){return R(k,g.uint8array?new Uint8Array(k.length):new Array(k.length))}(A))),A):_.Promise.reject(new Error("Can't read the data of '"+U+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(m,b,y){var g=m("./reader/readerFor"),w=m("./utils"),x=m("./signature"),_=m("./zipEntry"),j=m("./support");function R(M){this.files=[],this.loadOptions=M}R.prototype={checkSignature:function(M){if(!this.reader.readAndCheckSignature(M)){this.reader.index-=4;var I=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+w.pretty(I)+", expected "+w.pretty(M)+")")}},isSignature:function(M,I){var F=this.reader.index;this.reader.setIndex(M);var B=this.reader.readString(4)===I;return this.reader.setIndex(F),B},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var M=this.reader.readData(this.zipCommentLength),I=j.uint8array?"uint8array":"array",F=w.transformTo(I,M);this.zipComment=this.loadOptions.decodeFileName(F)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var M,I,F,B=this.zip64EndOfCentralSize-44;0<B;)M=this.reader.readInt(2),I=this.reader.readInt(4),F=this.reader.readData(I),this.zip64ExtensibleData[M]={id:M,length:I,value:F}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var M,I;for(M=0;M<this.files.length;M++)I=this.files[M],this.reader.setIndex(I.localHeaderOffset),this.checkSignature(x.LOCAL_FILE_HEADER),I.readLocalPart(this.reader),I.handleUTF8(),I.processAttributes()},readCentralDir:function(){var M;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(x.CENTRAL_FILE_HEADER);)(M=new _({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(M);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var M=this.reader.lastIndexOfSignature(x.CENTRAL_DIRECTORY_END);if(M<0)throw this.isSignature(0,x.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(M);var I=M;if(this.checkSignature(x.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===w.MAX_VALUE_16BITS||this.diskWithCentralDirStart===w.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===w.MAX_VALUE_16BITS||this.centralDirRecords===w.MAX_VALUE_16BITS||this.centralDirSize===w.MAX_VALUE_32BITS||this.centralDirOffset===w.MAX_VALUE_32BITS){if(this.zip64=!0,(M=this.reader.lastIndexOfSignature(x.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(M),this.checkSignature(x.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,x.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(x.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(x.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var F=this.centralDirOffset+this.centralDirSize;this.zip64&&(F+=20,F+=12+this.zip64EndOfCentralSize);var B=I-F;if(0<B)this.isSignature(I,x.CENTRAL_FILE_HEADER)||(this.reader.zero=B);else if(B<0)throw new Error("Corrupted zip: missing "+Math.abs(B)+" bytes.")},prepareReader:function(M){this.reader=g(M)},load:function(M){this.prepareReader(M),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},b.exports=R},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(m,b,y){var g=m("./reader/readerFor"),w=m("./utils"),x=m("./compressedObject"),_=m("./crc32"),j=m("./utf8"),R=m("./compressions"),M=m("./support");function I(F,B){this.options=F,this.loadOptions=B}I.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(F){var B,U;if(F.skip(22),this.fileNameLength=F.readInt(2),U=F.readInt(2),this.fileName=F.readData(this.fileNameLength),F.skip(U),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((B=function(Q){for(var K in R)if(Object.prototype.hasOwnProperty.call(R,K)&&R[K].magic===Q)return R[K];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+w.pretty(this.compressionMethod)+" unknown (inner file : "+w.transformTo("string",this.fileName)+")");this.decompressed=new x(this.compressedSize,this.uncompressedSize,this.crc32,B,F.readData(this.compressedSize))},readCentralPart:function(F){this.versionMadeBy=F.readInt(2),F.skip(2),this.bitFlag=F.readInt(2),this.compressionMethod=F.readString(2),this.date=F.readDate(),this.crc32=F.readInt(4),this.compressedSize=F.readInt(4),this.uncompressedSize=F.readInt(4);var B=F.readInt(2);if(this.extraFieldsLength=F.readInt(2),this.fileCommentLength=F.readInt(2),this.diskNumberStart=F.readInt(2),this.internalFileAttributes=F.readInt(2),this.externalFileAttributes=F.readInt(4),this.localHeaderOffset=F.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");F.skip(B),this.readExtraFields(F),this.parseZIP64ExtraField(F),this.fileComment=F.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var F=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),F==0&&(this.dosPermissions=63&this.externalFileAttributes),F==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var F=g(this.extraFields[1].value);this.uncompressedSize===w.MAX_VALUE_32BITS&&(this.uncompressedSize=F.readInt(8)),this.compressedSize===w.MAX_VALUE_32BITS&&(this.compressedSize=F.readInt(8)),this.localHeaderOffset===w.MAX_VALUE_32BITS&&(this.localHeaderOffset=F.readInt(8)),this.diskNumberStart===w.MAX_VALUE_32BITS&&(this.diskNumberStart=F.readInt(4))}},readExtraFields:function(F){var B,U,Q,K=F.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});F.index+4<K;)B=F.readInt(2),U=F.readInt(2),Q=F.readData(U),this.extraFields[B]={id:B,length:U,value:Q};F.setIndex(K)},handleUTF8:function(){var F=M.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=j.utf8decode(this.fileName),this.fileCommentStr=j.utf8decode(this.fileComment);else{var B=this.findExtraFieldUnicodePath();if(B!==null)this.fileNameStr=B;else{var U=w.transformTo(F,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(U)}var Q=this.findExtraFieldUnicodeComment();if(Q!==null)this.fileCommentStr=Q;else{var K=w.transformTo(F,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(K)}}},findExtraFieldUnicodePath:function(){var F=this.extraFields[28789];if(F){var B=g(F.value);return B.readInt(1)!==1||_(this.fileName)!==B.readInt(4)?null:j.utf8decode(B.readData(F.length-5))}return null},findExtraFieldUnicodeComment:function(){var F=this.extraFields[25461];if(F){var B=g(F.value);return B.readInt(1)!==1||_(this.fileComment)!==B.readInt(4)?null:j.utf8decode(B.readData(F.length-5))}return null}},b.exports=I},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(m,b,y){function g(B,U,Q){this.name=B,this.dir=Q.dir,this.date=Q.date,this.comment=Q.comment,this.unixPermissions=Q.unixPermissions,this.dosPermissions=Q.dosPermissions,this._data=U,this._dataBinary=Q.binary,this.options={compression:Q.compression,compressionOptions:Q.compressionOptions}}var w=m("./stream/StreamHelper"),x=m("./stream/DataWorker"),_=m("./utf8"),j=m("./compressedObject"),R=m("./stream/GenericWorker");g.prototype={internalStream:function(B){var U=null,Q="string";try{if(!B)throw new Error("No output type specified.");var K=(Q=B.toLowerCase())==="string"||Q==="text";Q!=="binarystring"&&Q!=="text"||(Q="string"),U=this._decompressWorker();var T=!this._dataBinary;T&&!K&&(U=U.pipe(new _.Utf8EncodeWorker)),!T&&K&&(U=U.pipe(new _.Utf8DecodeWorker))}catch(P){(U=new R("error")).error(P)}return new w(U,Q,"")},async:function(B,U){return this.internalStream(B).accumulate(U)},nodeStream:function(B,U){return this.internalStream(B||"nodebuffer").toNodejsStream(U)},_compressWorker:function(B,U){if(this._data instanceof j&&this._data.compression.magic===B.magic)return this._data.getCompressedWorker();var Q=this._decompressWorker();return this._dataBinary||(Q=Q.pipe(new _.Utf8EncodeWorker)),j.createWorkerFrom(Q,B,U)},_decompressWorker:function(){return this._data instanceof j?this._data.getContentWorker():this._data instanceof R?this._data:new x(this._data)}};for(var M=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],I=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},F=0;F<M.length;F++)g.prototype[M[F]]=I;b.exports=g},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(m,b,y){(function(g){var w,x,_=g.MutationObserver||g.WebKitMutationObserver;if(_){var j=0,R=new _(B),M=g.document.createTextNode("");R.observe(M,{characterData:!0}),w=function(){M.data=j=++j%2}}else if(g.setImmediate||g.MessageChannel===void 0)w="document"in g&&"onreadystatechange"in g.document.createElement("script")?function(){var U=g.document.createElement("script");U.onreadystatechange=function(){B(),U.onreadystatechange=null,U.parentNode.removeChild(U),U=null},g.document.documentElement.appendChild(U)}:function(){setTimeout(B,0)};else{var I=new g.MessageChannel;I.port1.onmessage=B,w=function(){I.port2.postMessage(0)}}var F=[];function B(){var U,Q;x=!0;for(var K=F.length;K;){for(Q=F,F=[],U=-1;++U<K;)Q[U]();K=F.length}x=!1}b.exports=function(U){F.push(U)!==1||x||w()}}).call(this,o!==void 0?o:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(m,b,y){var g=m("immediate");function w(){}var x={},_=["REJECTED"],j=["FULFILLED"],R=["PENDING"];function M(K){if(typeof K!="function")throw new TypeError("resolver must be a function");this.state=R,this.queue=[],this.outcome=void 0,K!==w&&U(this,K)}function I(K,T,P){this.promise=K,typeof T=="function"&&(this.onFulfilled=T,this.callFulfilled=this.otherCallFulfilled),typeof P=="function"&&(this.onRejected=P,this.callRejected=this.otherCallRejected)}function F(K,T,P){g(function(){var A;try{A=T(P)}catch(N){return x.reject(K,N)}A===K?x.reject(K,new TypeError("Cannot resolve promise with itself")):x.resolve(K,A)})}function B(K){var T=K&&K.then;if(K&&(typeof K=="object"||typeof K=="function")&&typeof T=="function")return function(){T.apply(K,arguments)}}function U(K,T){var P=!1;function A(S){P||(P=!0,x.reject(K,S))}function N(S){P||(P=!0,x.resolve(K,S))}var k=Q(function(){T(N,A)});k.status==="error"&&A(k.value)}function Q(K,T){var P={};try{P.value=K(T),P.status="success"}catch(A){P.status="error",P.value=A}return P}(b.exports=M).prototype.finally=function(K){if(typeof K!="function")return this;var T=this.constructor;return this.then(function(P){return T.resolve(K()).then(function(){return P})},function(P){return T.resolve(K()).then(function(){throw P})})},M.prototype.catch=function(K){return this.then(null,K)},M.prototype.then=function(K,T){if(typeof K!="function"&&this.state===j||typeof T!="function"&&this.state===_)return this;var P=new this.constructor(w);return this.state!==R?F(P,this.state===j?K:T,this.outcome):this.queue.push(new I(P,K,T)),P},I.prototype.callFulfilled=function(K){x.resolve(this.promise,K)},I.prototype.otherCallFulfilled=function(K){F(this.promise,this.onFulfilled,K)},I.prototype.callRejected=function(K){x.reject(this.promise,K)},I.prototype.otherCallRejected=function(K){F(this.promise,this.onRejected,K)},x.resolve=function(K,T){var P=Q(B,T);if(P.status==="error")return x.reject(K,P.value);var A=P.value;if(A)U(K,A);else{K.state=j,K.outcome=T;for(var N=-1,k=K.queue.length;++N<k;)K.queue[N].callFulfilled(T)}return K},x.reject=function(K,T){K.state=_,K.outcome=T;for(var P=-1,A=K.queue.length;++P<A;)K.queue[P].callRejected(T);return K},M.resolve=function(K){return K instanceof this?K:x.resolve(new this(w),K)},M.reject=function(K){var T=new this(w);return x.reject(T,K)},M.all=function(K){var T=this;if(Object.prototype.toString.call(K)!=="[object Array]")return this.reject(new TypeError("must be an array"));var P=K.length,A=!1;if(!P)return this.resolve([]);for(var N=new Array(P),k=0,S=-1,E=new this(w);++S<P;)O(K[S],S);return E;function O(L,z){T.resolve(L).then(function(G){N[z]=G,++k!==P||A||(A=!0,x.resolve(E,N))},function(G){A||(A=!0,x.reject(E,G))})}},M.race=function(K){if(Object.prototype.toString.call(K)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=K.length,P=!1;if(!T)return this.resolve([]);for(var A,N=-1,k=new this(w);++N<T;)A=K[N],this.resolve(A).then(function(S){P||(P=!0,x.resolve(k,S))},function(S){P||(P=!0,x.reject(k,S))});return k}},{immediate:36}],38:[function(m,b,y){var g={};(0,m("./lib/utils/common").assign)(g,m("./lib/deflate"),m("./lib/inflate"),m("./lib/zlib/constants")),b.exports=g},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(m,b,y){var g=m("./zlib/deflate"),w=m("./utils/common"),x=m("./utils/strings"),_=m("./zlib/messages"),j=m("./zlib/zstream"),R=Object.prototype.toString;function M(F){if(!(this instanceof M))return new M(F);this.options=w.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},F||{});var B=this.options;B.raw&&0<B.windowBits?B.windowBits=-B.windowBits:B.gzip&&0<B.windowBits&&B.windowBits<16&&(B.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new j,this.strm.avail_out=0;var U=g.deflateInit2(this.strm,B.level,B.method,B.windowBits,B.memLevel,B.strategy);if(U!==0)throw new Error(_[U]);if(B.header&&g.deflateSetHeader(this.strm,B.header),B.dictionary){var Q;if(Q=typeof B.dictionary=="string"?x.string2buf(B.dictionary):R.call(B.dictionary)==="[object ArrayBuffer]"?new Uint8Array(B.dictionary):B.dictionary,(U=g.deflateSetDictionary(this.strm,Q))!==0)throw new Error(_[U]);this._dict_set=!0}}function I(F,B){var U=new M(B);if(U.push(F,!0),U.err)throw U.msg||_[U.err];return U.result}M.prototype.push=function(F,B){var U,Q,K=this.strm,T=this.options.chunkSize;if(this.ended)return!1;Q=B===~~B?B:B===!0?4:0,typeof F=="string"?K.input=x.string2buf(F):R.call(F)==="[object ArrayBuffer]"?K.input=new Uint8Array(F):K.input=F,K.next_in=0,K.avail_in=K.input.length;do{if(K.avail_out===0&&(K.output=new w.Buf8(T),K.next_out=0,K.avail_out=T),(U=g.deflate(K,Q))!==1&&U!==0)return this.onEnd(U),!(this.ended=!0);K.avail_out!==0&&(K.avail_in!==0||Q!==4&&Q!==2)||(this.options.to==="string"?this.onData(x.buf2binstring(w.shrinkBuf(K.output,K.next_out))):this.onData(w.shrinkBuf(K.output,K.next_out)))}while((0<K.avail_in||K.avail_out===0)&&U!==1);return Q===4?(U=g.deflateEnd(this.strm),this.onEnd(U),this.ended=!0,U===0):Q!==2||(this.onEnd(0),!(K.avail_out=0))},M.prototype.onData=function(F){this.chunks.push(F)},M.prototype.onEnd=function(F){F===0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=w.flattenChunks(this.chunks)),this.chunks=[],this.err=F,this.msg=this.strm.msg},y.Deflate=M,y.deflate=I,y.deflateRaw=function(F,B){return(B=B||{}).raw=!0,I(F,B)},y.gzip=function(F,B){return(B=B||{}).gzip=!0,I(F,B)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(m,b,y){var g=m("./zlib/inflate"),w=m("./utils/common"),x=m("./utils/strings"),_=m("./zlib/constants"),j=m("./zlib/messages"),R=m("./zlib/zstream"),M=m("./zlib/gzheader"),I=Object.prototype.toString;function F(U){if(!(this instanceof F))return new F(U);this.options=w.assign({chunkSize:16384,windowBits:0,to:""},U||{});var Q=this.options;Q.raw&&0<=Q.windowBits&&Q.windowBits<16&&(Q.windowBits=-Q.windowBits,Q.windowBits===0&&(Q.windowBits=-15)),!(0<=Q.windowBits&&Q.windowBits<16)||U&&U.windowBits||(Q.windowBits+=32),15<Q.windowBits&&Q.windowBits<48&&(15&Q.windowBits)==0&&(Q.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new R,this.strm.avail_out=0;var K=g.inflateInit2(this.strm,Q.windowBits);if(K!==_.Z_OK)throw new Error(j[K]);this.header=new M,g.inflateGetHeader(this.strm,this.header)}function B(U,Q){var K=new F(Q);if(K.push(U,!0),K.err)throw K.msg||j[K.err];return K.result}F.prototype.push=function(U,Q){var K,T,P,A,N,k,S=this.strm,E=this.options.chunkSize,O=this.options.dictionary,L=!1;if(this.ended)return!1;T=Q===~~Q?Q:Q===!0?_.Z_FINISH:_.Z_NO_FLUSH,typeof U=="string"?S.input=x.binstring2buf(U):I.call(U)==="[object ArrayBuffer]"?S.input=new Uint8Array(U):S.input=U,S.next_in=0,S.avail_in=S.input.length;do{if(S.avail_out===0&&(S.output=new w.Buf8(E),S.next_out=0,S.avail_out=E),(K=g.inflate(S,_.Z_NO_FLUSH))===_.Z_NEED_DICT&&O&&(k=typeof O=="string"?x.string2buf(O):I.call(O)==="[object ArrayBuffer]"?new Uint8Array(O):O,K=g.inflateSetDictionary(this.strm,k)),K===_.Z_BUF_ERROR&&L===!0&&(K=_.Z_OK,L=!1),K!==_.Z_STREAM_END&&K!==_.Z_OK)return this.onEnd(K),!(this.ended=!0);S.next_out&&(S.avail_out!==0&&K!==_.Z_STREAM_END&&(S.avail_in!==0||T!==_.Z_FINISH&&T!==_.Z_SYNC_FLUSH)||(this.options.to==="string"?(P=x.utf8border(S.output,S.next_out),A=S.next_out-P,N=x.buf2string(S.output,P),S.next_out=A,S.avail_out=E-A,A&&w.arraySet(S.output,S.output,P,A,0),this.onData(N)):this.onData(w.shrinkBuf(S.output,S.next_out)))),S.avail_in===0&&S.avail_out===0&&(L=!0)}while((0<S.avail_in||S.avail_out===0)&&K!==_.Z_STREAM_END);return K===_.Z_STREAM_END&&(T=_.Z_FINISH),T===_.Z_FINISH?(K=g.inflateEnd(this.strm),this.onEnd(K),this.ended=!0,K===_.Z_OK):T!==_.Z_SYNC_FLUSH||(this.onEnd(_.Z_OK),!(S.avail_out=0))},F.prototype.onData=function(U){this.chunks.push(U)},F.prototype.onEnd=function(U){U===_.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=w.flattenChunks(this.chunks)),this.chunks=[],this.err=U,this.msg=this.strm.msg},y.Inflate=F,y.inflate=B,y.inflateRaw=function(U,Q){return(Q=Q||{}).raw=!0,B(U,Q)},y.ungzip=B},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(m,b,y){var g=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";y.assign=function(_){for(var j=Array.prototype.slice.call(arguments,1);j.length;){var R=j.shift();if(R){if(typeof R!="object")throw new TypeError(R+"must be non-object");for(var M in R)R.hasOwnProperty(M)&&(_[M]=R[M])}}return _},y.shrinkBuf=function(_,j){return _.length===j?_:_.subarray?_.subarray(0,j):(_.length=j,_)};var w={arraySet:function(_,j,R,M,I){if(j.subarray&&_.subarray)_.set(j.subarray(R,R+M),I);else for(var F=0;F<M;F++)_[I+F]=j[R+F]},flattenChunks:function(_){var j,R,M,I,F,B;for(j=M=0,R=_.length;j<R;j++)M+=_[j].length;for(B=new Uint8Array(M),j=I=0,R=_.length;j<R;j++)F=_[j],B.set(F,I),I+=F.length;return B}},x={arraySet:function(_,j,R,M,I){for(var F=0;F<M;F++)_[I+F]=j[R+F]},flattenChunks:function(_){return[].concat.apply([],_)}};y.setTyped=function(_){_?(y.Buf8=Uint8Array,y.Buf16=Uint16Array,y.Buf32=Int32Array,y.assign(y,w)):(y.Buf8=Array,y.Buf16=Array,y.Buf32=Array,y.assign(y,x))},y.setTyped(g)},{}],42:[function(m,b,y){var g=m("./common"),w=!0,x=!0;try{String.fromCharCode.apply(null,[0])}catch{w=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{x=!1}for(var _=new g.Buf8(256),j=0;j<256;j++)_[j]=252<=j?6:248<=j?5:240<=j?4:224<=j?3:192<=j?2:1;function R(M,I){if(I<65537&&(M.subarray&&x||!M.subarray&&w))return String.fromCharCode.apply(null,g.shrinkBuf(M,I));for(var F="",B=0;B<I;B++)F+=String.fromCharCode(M[B]);return F}_[254]=_[254]=1,y.string2buf=function(M){var I,F,B,U,Q,K=M.length,T=0;for(U=0;U<K;U++)(64512&(F=M.charCodeAt(U)))==55296&&U+1<K&&(64512&(B=M.charCodeAt(U+1)))==56320&&(F=65536+(F-55296<<10)+(B-56320),U++),T+=F<128?1:F<2048?2:F<65536?3:4;for(I=new g.Buf8(T),U=Q=0;Q<T;U++)(64512&(F=M.charCodeAt(U)))==55296&&U+1<K&&(64512&(B=M.charCodeAt(U+1)))==56320&&(F=65536+(F-55296<<10)+(B-56320),U++),F<128?I[Q++]=F:(F<2048?I[Q++]=192|F>>>6:(F<65536?I[Q++]=224|F>>>12:(I[Q++]=240|F>>>18,I[Q++]=128|F>>>12&63),I[Q++]=128|F>>>6&63),I[Q++]=128|63&F);return I},y.buf2binstring=function(M){return R(M,M.length)},y.binstring2buf=function(M){for(var I=new g.Buf8(M.length),F=0,B=I.length;F<B;F++)I[F]=M.charCodeAt(F);return I},y.buf2string=function(M,I){var F,B,U,Q,K=I||M.length,T=new Array(2*K);for(F=B=0;F<K;)if((U=M[F++])<128)T[B++]=U;else if(4<(Q=_[U]))T[B++]=65533,F+=Q-1;else{for(U&=Q===2?31:Q===3?15:7;1<Q&&F<K;)U=U<<6|63&M[F++],Q--;1<Q?T[B++]=65533:U<65536?T[B++]=U:(U-=65536,T[B++]=55296|U>>10&1023,T[B++]=56320|1023&U)}return R(T,B)},y.utf8border=function(M,I){var F;for((I=I||M.length)>M.length&&(I=M.length),F=I-1;0<=F&&(192&M[F])==128;)F--;return F<0||F===0?I:F+_[M[F]]>I?F:I}},{"./common":41}],43:[function(m,b,y){b.exports=function(g,w,x,_){for(var j=65535&g|0,R=g>>>16&65535|0,M=0;x!==0;){for(x-=M=2e3<x?2e3:x;R=R+(j=j+w[_++]|0)|0,--M;);j%=65521,R%=65521}return j|R<<16|0}},{}],44:[function(m,b,y){b.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(m,b,y){var g=function(){for(var w,x=[],_=0;_<256;_++){w=_;for(var j=0;j<8;j++)w=1&w?3988292384^w>>>1:w>>>1;x[_]=w}return x}();b.exports=function(w,x,_,j){var R=g,M=j+_;w^=-1;for(var I=j;I<M;I++)w=w>>>8^R[255&(w^x[I])];return-1^w}},{}],46:[function(m,b,y){var g,w=m("../utils/common"),x=m("./trees"),_=m("./adler32"),j=m("./crc32"),R=m("./messages"),M=-2,I=258,F=262,B=113;function U(W,J){return W.msg=R[J],J}function Q(W){return(W<<1)-(4<W?9:0)}function K(W){for(var J=W.length;0<=--J;)W[J]=0}function T(W){var J=W.state,$=J.pending;$>W.avail_out&&($=W.avail_out),$!==0&&(w.arraySet(W.output,J.pending_buf,J.pending_out,$,W.next_out),W.next_out+=$,J.pending_out+=$,W.total_out+=$,W.avail_out-=$,J.pending-=$,J.pending===0&&(J.pending_out=0))}function P(W,J){x._tr_flush_block(W,0<=W.block_start?W.block_start:-1,W.strstart-W.block_start,J),W.block_start=W.strstart,T(W.strm)}function A(W,J){W.pending_buf[W.pending++]=J}function N(W,J){W.pending_buf[W.pending++]=J>>>8&255,W.pending_buf[W.pending++]=255&J}function k(W,J){var $,q,Y=W.max_chain_length,se=W.strstart,oe=W.prev_length,ae=W.nice_match,ce=W.strstart>W.w_size-F?W.strstart-(W.w_size-F):0,we=W.window,fe=W.w_mask,re=W.prev,ge=W.strstart+I,le=we[se+oe-1],te=we[se+oe];W.prev_length>=W.good_match&&(Y>>=2),ae>W.lookahead&&(ae=W.lookahead);do if(we[($=J)+oe]===te&&we[$+oe-1]===le&&we[$]===we[se]&&we[++$]===we[se+1]){se+=2,$++;do;while(we[++se]===we[++$]&&we[++se]===we[++$]&&we[++se]===we[++$]&&we[++se]===we[++$]&&we[++se]===we[++$]&&we[++se]===we[++$]&&we[++se]===we[++$]&&we[++se]===we[++$]&&se<ge);if(q=I-(ge-se),se=ge-I,oe<q){if(W.match_start=J,ae<=(oe=q))break;le=we[se+oe-1],te=we[se+oe]}}while((J=re[J&fe])>ce&&--Y!=0);return oe<=W.lookahead?oe:W.lookahead}function S(W){var J,$,q,Y,se,oe,ae,ce,we,fe,re=W.w_size;do{if(Y=W.window_size-W.lookahead-W.strstart,W.strstart>=re+(re-F)){for(w.arraySet(W.window,W.window,re,re,0),W.match_start-=re,W.strstart-=re,W.block_start-=re,J=$=W.hash_size;q=W.head[--J],W.head[J]=re<=q?q-re:0,--$;);for(J=$=re;q=W.prev[--J],W.prev[J]=re<=q?q-re:0,--$;);Y+=re}if(W.strm.avail_in===0)break;if(oe=W.strm,ae=W.window,ce=W.strstart+W.lookahead,fe=void 0,(we=Y)<(fe=oe.avail_in)&&(fe=we),$=fe===0?0:(oe.avail_in-=fe,w.arraySet(ae,oe.input,oe.next_in,fe,ce),oe.state.wrap===1?oe.adler=_(oe.adler,ae,fe,ce):oe.state.wrap===2&&(oe.adler=j(oe.adler,ae,fe,ce)),oe.next_in+=fe,oe.total_in+=fe,fe),W.lookahead+=$,W.lookahead+W.insert>=3)for(se=W.strstart-W.insert,W.ins_h=W.window[se],W.ins_h=(W.ins_h<<W.hash_shift^W.window[se+1])&W.hash_mask;W.insert&&(W.ins_h=(W.ins_h<<W.hash_shift^W.window[se+3-1])&W.hash_mask,W.prev[se&W.w_mask]=W.head[W.ins_h],W.head[W.ins_h]=se,se++,W.insert--,!(W.lookahead+W.insert<3)););}while(W.lookahead<F&&W.strm.avail_in!==0)}function E(W,J){for(var $,q;;){if(W.lookahead<F){if(S(W),W.lookahead<F&&J===0)return 1;if(W.lookahead===0)break}if($=0,W.lookahead>=3&&(W.ins_h=(W.ins_h<<W.hash_shift^W.window[W.strstart+3-1])&W.hash_mask,$=W.prev[W.strstart&W.w_mask]=W.head[W.ins_h],W.head[W.ins_h]=W.strstart),$!==0&&W.strstart-$<=W.w_size-F&&(W.match_length=k(W,$)),W.match_length>=3)if(q=x._tr_tally(W,W.strstart-W.match_start,W.match_length-3),W.lookahead-=W.match_length,W.match_length<=W.max_lazy_match&&W.lookahead>=3){for(W.match_length--;W.strstart++,W.ins_h=(W.ins_h<<W.hash_shift^W.window[W.strstart+3-1])&W.hash_mask,$=W.prev[W.strstart&W.w_mask]=W.head[W.ins_h],W.head[W.ins_h]=W.strstart,--W.match_length!=0;);W.strstart++}else W.strstart+=W.match_length,W.match_length=0,W.ins_h=W.window[W.strstart],W.ins_h=(W.ins_h<<W.hash_shift^W.window[W.strstart+1])&W.hash_mask;else q=x._tr_tally(W,0,W.window[W.strstart]),W.lookahead--,W.strstart++;if(q&&(P(W,!1),W.strm.avail_out===0))return 1}return W.insert=W.strstart<2?W.strstart:2,J===4?(P(W,!0),W.strm.avail_out===0?3:4):W.last_lit&&(P(W,!1),W.strm.avail_out===0)?1:2}function O(W,J){for(var $,q,Y;;){if(W.lookahead<F){if(S(W),W.lookahead<F&&J===0)return 1;if(W.lookahead===0)break}if($=0,W.lookahead>=3&&(W.ins_h=(W.ins_h<<W.hash_shift^W.window[W.strstart+3-1])&W.hash_mask,$=W.prev[W.strstart&W.w_mask]=W.head[W.ins_h],W.head[W.ins_h]=W.strstart),W.prev_length=W.match_length,W.prev_match=W.match_start,W.match_length=2,$!==0&&W.prev_length<W.max_lazy_match&&W.strstart-$<=W.w_size-F&&(W.match_length=k(W,$),W.match_length<=5&&(W.strategy===1||W.match_length===3&&4096<W.strstart-W.match_start)&&(W.match_length=2)),W.prev_length>=3&&W.match_length<=W.prev_length){for(Y=W.strstart+W.lookahead-3,q=x._tr_tally(W,W.strstart-1-W.prev_match,W.prev_length-3),W.lookahead-=W.prev_length-1,W.prev_length-=2;++W.strstart<=Y&&(W.ins_h=(W.ins_h<<W.hash_shift^W.window[W.strstart+3-1])&W.hash_mask,$=W.prev[W.strstart&W.w_mask]=W.head[W.ins_h],W.head[W.ins_h]=W.strstart),--W.prev_length!=0;);if(W.match_available=0,W.match_length=2,W.strstart++,q&&(P(W,!1),W.strm.avail_out===0))return 1}else if(W.match_available){if((q=x._tr_tally(W,0,W.window[W.strstart-1]))&&P(W,!1),W.strstart++,W.lookahead--,W.strm.avail_out===0)return 1}else W.match_available=1,W.strstart++,W.lookahead--}return W.match_available&&(q=x._tr_tally(W,0,W.window[W.strstart-1]),W.match_available=0),W.insert=W.strstart<2?W.strstart:2,J===4?(P(W,!0),W.strm.avail_out===0?3:4):W.last_lit&&(P(W,!1),W.strm.avail_out===0)?1:2}function L(W,J,$,q,Y){this.good_length=W,this.max_lazy=J,this.nice_length=$,this.max_chain=q,this.func=Y}function z(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new w.Buf16(1146),this.dyn_dtree=new w.Buf16(122),this.bl_tree=new w.Buf16(78),K(this.dyn_ltree),K(this.dyn_dtree),K(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new w.Buf16(16),this.heap=new w.Buf16(573),K(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new w.Buf16(573),K(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function G(W){var J;return W&&W.state?(W.total_in=W.total_out=0,W.data_type=2,(J=W.state).pending=0,J.pending_out=0,J.wrap<0&&(J.wrap=-J.wrap),J.status=J.wrap?42:B,W.adler=J.wrap===2?0:1,J.last_flush=0,x._tr_init(J),0):U(W,M)}function Z(W){var J=G(W);return J===0&&function($){$.window_size=2*$.w_size,K($.head),$.max_lazy_match=g[$.level].max_lazy,$.good_match=g[$.level].good_length,$.nice_match=g[$.level].nice_length,$.max_chain_length=g[$.level].max_chain,$.strstart=0,$.block_start=0,$.lookahead=0,$.insert=0,$.match_length=$.prev_length=2,$.match_available=0,$.ins_h=0}(W.state),J}function ee(W,J,$,q,Y,se){if(!W)return M;var oe=1;if(J===-1&&(J=6),q<0?(oe=0,q=-q):15<q&&(oe=2,q-=16),Y<1||9<Y||$!==8||q<8||15<q||J<0||9<J||se<0||4<se)return U(W,M);q===8&&(q=9);var ae=new z;return(W.state=ae).strm=W,ae.wrap=oe,ae.gzhead=null,ae.w_bits=q,ae.w_size=1<<ae.w_bits,ae.w_mask=ae.w_size-1,ae.hash_bits=Y+7,ae.hash_size=1<<ae.hash_bits,ae.hash_mask=ae.hash_size-1,ae.hash_shift=~~((ae.hash_bits+3-1)/3),ae.window=new w.Buf8(2*ae.w_size),ae.head=new w.Buf16(ae.hash_size),ae.prev=new w.Buf16(ae.w_size),ae.lit_bufsize=1<<Y+6,ae.pending_buf_size=4*ae.lit_bufsize,ae.pending_buf=new w.Buf8(ae.pending_buf_size),ae.d_buf=1*ae.lit_bufsize,ae.l_buf=3*ae.lit_bufsize,ae.level=J,ae.strategy=se,ae.method=$,Z(W)}g=[new L(0,0,0,0,function(W,J){var $=65535;for($>W.pending_buf_size-5&&($=W.pending_buf_size-5);;){if(W.lookahead<=1){if(S(W),W.lookahead===0&&J===0)return 1;if(W.lookahead===0)break}W.strstart+=W.lookahead,W.lookahead=0;var q=W.block_start+$;if((W.strstart===0||W.strstart>=q)&&(W.lookahead=W.strstart-q,W.strstart=q,P(W,!1),W.strm.avail_out===0)||W.strstart-W.block_start>=W.w_size-F&&(P(W,!1),W.strm.avail_out===0))return 1}return W.insert=0,J===4?(P(W,!0),W.strm.avail_out===0?3:4):(W.strstart>W.block_start&&(P(W,!1),W.strm.avail_out),1)}),new L(4,4,8,4,E),new L(4,5,16,8,E),new L(4,6,32,32,E),new L(4,4,16,16,O),new L(8,16,32,32,O),new L(8,16,128,128,O),new L(8,32,128,256,O),new L(32,128,258,1024,O),new L(32,258,258,4096,O)],y.deflateInit=function(W,J){return ee(W,J,8,15,8,0)},y.deflateInit2=ee,y.deflateReset=Z,y.deflateResetKeep=G,y.deflateSetHeader=function(W,J){return W&&W.state?W.state.wrap!==2?M:(W.state.gzhead=J,0):M},y.deflate=function(W,J){var $,q,Y,se;if(!W||!W.state||5<J||J<0)return W?U(W,M):M;if(q=W.state,!W.output||!W.input&&W.avail_in!==0||q.status===666&&J!==4)return U(W,W.avail_out===0?-5:M);if(q.strm=W,$=q.last_flush,q.last_flush=J,q.status===42)if(q.wrap===2)W.adler=0,A(q,31),A(q,139),A(q,8),q.gzhead?(A(q,(q.gzhead.text?1:0)+(q.gzhead.hcrc?2:0)+(q.gzhead.extra?4:0)+(q.gzhead.name?8:0)+(q.gzhead.comment?16:0)),A(q,255&q.gzhead.time),A(q,q.gzhead.time>>8&255),A(q,q.gzhead.time>>16&255),A(q,q.gzhead.time>>24&255),A(q,q.level===9?2:2<=q.strategy||q.level<2?4:0),A(q,255&q.gzhead.os),q.gzhead.extra&&q.gzhead.extra.length&&(A(q,255&q.gzhead.extra.length),A(q,q.gzhead.extra.length>>8&255)),q.gzhead.hcrc&&(W.adler=j(W.adler,q.pending_buf,q.pending,0)),q.gzindex=0,q.status=69):(A(q,0),A(q,0),A(q,0),A(q,0),A(q,0),A(q,q.level===9?2:2<=q.strategy||q.level<2?4:0),A(q,3),q.status=B);else{var oe=8+(q.w_bits-8<<4)<<8;oe|=(2<=q.strategy||q.level<2?0:q.level<6?1:q.level===6?2:3)<<6,q.strstart!==0&&(oe|=32),oe+=31-oe%31,q.status=B,N(q,oe),q.strstart!==0&&(N(q,W.adler>>>16),N(q,65535&W.adler)),W.adler=1}if(q.status===69)if(q.gzhead.extra){for(Y=q.pending;q.gzindex<(65535&q.gzhead.extra.length)&&(q.pending!==q.pending_buf_size||(q.gzhead.hcrc&&q.pending>Y&&(W.adler=j(W.adler,q.pending_buf,q.pending-Y,Y)),T(W),Y=q.pending,q.pending!==q.pending_buf_size));)A(q,255&q.gzhead.extra[q.gzindex]),q.gzindex++;q.gzhead.hcrc&&q.pending>Y&&(W.adler=j(W.adler,q.pending_buf,q.pending-Y,Y)),q.gzindex===q.gzhead.extra.length&&(q.gzindex=0,q.status=73)}else q.status=73;if(q.status===73)if(q.gzhead.name){Y=q.pending;do{if(q.pending===q.pending_buf_size&&(q.gzhead.hcrc&&q.pending>Y&&(W.adler=j(W.adler,q.pending_buf,q.pending-Y,Y)),T(W),Y=q.pending,q.pending===q.pending_buf_size)){se=1;break}se=q.gzindex<q.gzhead.name.length?255&q.gzhead.name.charCodeAt(q.gzindex++):0,A(q,se)}while(se!==0);q.gzhead.hcrc&&q.pending>Y&&(W.adler=j(W.adler,q.pending_buf,q.pending-Y,Y)),se===0&&(q.gzindex=0,q.status=91)}else q.status=91;if(q.status===91)if(q.gzhead.comment){Y=q.pending;do{if(q.pending===q.pending_buf_size&&(q.gzhead.hcrc&&q.pending>Y&&(W.adler=j(W.adler,q.pending_buf,q.pending-Y,Y)),T(W),Y=q.pending,q.pending===q.pending_buf_size)){se=1;break}se=q.gzindex<q.gzhead.comment.length?255&q.gzhead.comment.charCodeAt(q.gzindex++):0,A(q,se)}while(se!==0);q.gzhead.hcrc&&q.pending>Y&&(W.adler=j(W.adler,q.pending_buf,q.pending-Y,Y)),se===0&&(q.status=103)}else q.status=103;if(q.status===103&&(q.gzhead.hcrc?(q.pending+2>q.pending_buf_size&&T(W),q.pending+2<=q.pending_buf_size&&(A(q,255&W.adler),A(q,W.adler>>8&255),W.adler=0,q.status=B)):q.status=B),q.pending!==0){if(T(W),W.avail_out===0)return q.last_flush=-1,0}else if(W.avail_in===0&&Q(J)<=Q($)&&J!==4)return U(W,-5);if(q.status===666&&W.avail_in!==0)return U(W,-5);if(W.avail_in!==0||q.lookahead!==0||J!==0&&q.status!==666){var ae=q.strategy===2?function(ce,we){for(var fe;;){if(ce.lookahead===0&&(S(ce),ce.lookahead===0)){if(we===0)return 1;break}if(ce.match_length=0,fe=x._tr_tally(ce,0,ce.window[ce.strstart]),ce.lookahead--,ce.strstart++,fe&&(P(ce,!1),ce.strm.avail_out===0))return 1}return ce.insert=0,we===4?(P(ce,!0),ce.strm.avail_out===0?3:4):ce.last_lit&&(P(ce,!1),ce.strm.avail_out===0)?1:2}(q,J):q.strategy===3?function(ce,we){for(var fe,re,ge,le,te=ce.window;;){if(ce.lookahead<=I){if(S(ce),ce.lookahead<=I&&we===0)return 1;if(ce.lookahead===0)break}if(ce.match_length=0,ce.lookahead>=3&&0<ce.strstart&&(re=te[ge=ce.strstart-1])===te[++ge]&&re===te[++ge]&&re===te[++ge]){le=ce.strstart+I;do;while(re===te[++ge]&&re===te[++ge]&&re===te[++ge]&&re===te[++ge]&&re===te[++ge]&&re===te[++ge]&&re===te[++ge]&&re===te[++ge]&&ge<le);ce.match_length=I-(le-ge),ce.match_length>ce.lookahead&&(ce.match_length=ce.lookahead)}if(ce.match_length>=3?(fe=x._tr_tally(ce,1,ce.match_length-3),ce.lookahead-=ce.match_length,ce.strstart+=ce.match_length,ce.match_length=0):(fe=x._tr_tally(ce,0,ce.window[ce.strstart]),ce.lookahead--,ce.strstart++),fe&&(P(ce,!1),ce.strm.avail_out===0))return 1}return ce.insert=0,we===4?(P(ce,!0),ce.strm.avail_out===0?3:4):ce.last_lit&&(P(ce,!1),ce.strm.avail_out===0)?1:2}(q,J):g[q.level].func(q,J);if(ae!==3&&ae!==4||(q.status=666),ae===1||ae===3)return W.avail_out===0&&(q.last_flush=-1),0;if(ae===2&&(J===1?x._tr_align(q):J!==5&&(x._tr_stored_block(q,0,0,!1),J===3&&(K(q.head),q.lookahead===0&&(q.strstart=0,q.block_start=0,q.insert=0))),T(W),W.avail_out===0))return q.last_flush=-1,0}return J!==4?0:q.wrap<=0?1:(q.wrap===2?(A(q,255&W.adler),A(q,W.adler>>8&255),A(q,W.adler>>16&255),A(q,W.adler>>24&255),A(q,255&W.total_in),A(q,W.total_in>>8&255),A(q,W.total_in>>16&255),A(q,W.total_in>>24&255)):(N(q,W.adler>>>16),N(q,65535&W.adler)),T(W),0<q.wrap&&(q.wrap=-q.wrap),q.pending!==0?0:1)},y.deflateEnd=function(W){var J;return W&&W.state?(J=W.state.status)!==42&&J!==69&&J!==73&&J!==91&&J!==103&&J!==B&&J!==666?U(W,M):(W.state=null,J===B?U(W,-3):0):M},y.deflateSetDictionary=function(W,J){var $,q,Y,se,oe,ae,ce,we,fe=J.length;if(!W||!W.state||(se=($=W.state).wrap)===2||se===1&&$.status!==42||$.lookahead)return M;for(se===1&&(W.adler=_(W.adler,J,fe,0)),$.wrap=0,fe>=$.w_size&&(se===0&&(K($.head),$.strstart=0,$.block_start=0,$.insert=0),we=new w.Buf8($.w_size),w.arraySet(we,J,fe-$.w_size,$.w_size,0),J=we,fe=$.w_size),oe=W.avail_in,ae=W.next_in,ce=W.input,W.avail_in=fe,W.next_in=0,W.input=J,S($);$.lookahead>=3;){for(q=$.strstart,Y=$.lookahead-2;$.ins_h=($.ins_h<<$.hash_shift^$.window[q+3-1])&$.hash_mask,$.prev[q&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=q,q++,--Y;);$.strstart=q,$.lookahead=2,S($)}return $.strstart+=$.lookahead,$.block_start=$.strstart,$.insert=$.lookahead,$.lookahead=0,$.match_length=$.prev_length=2,$.match_available=0,W.next_in=ae,W.input=ce,W.avail_in=oe,$.wrap=se,0},y.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(m,b,y){b.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(m,b,y){b.exports=function(g,w){var x,_,j,R,M,I,F,B,U,Q,K,T,P,A,N,k,S,E,O,L,z,G,Z,ee,W;x=g.state,_=g.next_in,ee=g.input,j=_+(g.avail_in-5),R=g.next_out,W=g.output,M=R-(w-g.avail_out),I=R+(g.avail_out-257),F=x.dmax,B=x.wsize,U=x.whave,Q=x.wnext,K=x.window,T=x.hold,P=x.bits,A=x.lencode,N=x.distcode,k=(1<<x.lenbits)-1,S=(1<<x.distbits)-1;e:do{P<15&&(T+=ee[_++]<<P,P+=8,T+=ee[_++]<<P,P+=8),E=A[T&k];t:for(;;){if(T>>>=O=E>>>24,P-=O,(O=E>>>16&255)==0)W[R++]=65535&E;else{if(!(16&O)){if((64&O)==0){E=A[(65535&E)+(T&(1<<O)-1)];continue t}if(32&O){x.mode=12;break e}g.msg="invalid literal/length code",x.mode=30;break e}L=65535&E,(O&=15)&&(P<O&&(T+=ee[_++]<<P,P+=8),L+=T&(1<<O)-1,T>>>=O,P-=O),P<15&&(T+=ee[_++]<<P,P+=8,T+=ee[_++]<<P,P+=8),E=N[T&S];r:for(;;){if(T>>>=O=E>>>24,P-=O,!(16&(O=E>>>16&255))){if((64&O)==0){E=N[(65535&E)+(T&(1<<O)-1)];continue r}g.msg="invalid distance code",x.mode=30;break e}if(z=65535&E,P<(O&=15)&&(T+=ee[_++]<<P,(P+=8)<O&&(T+=ee[_++]<<P,P+=8)),F<(z+=T&(1<<O)-1)){g.msg="invalid distance too far back",x.mode=30;break e}if(T>>>=O,P-=O,(O=R-M)<z){if(U<(O=z-O)&&x.sane){g.msg="invalid distance too far back",x.mode=30;break e}if(Z=K,(G=0)===Q){if(G+=B-O,O<L){for(L-=O;W[R++]=K[G++],--O;);G=R-z,Z=W}}else if(Q<O){if(G+=B+Q-O,(O-=Q)<L){for(L-=O;W[R++]=K[G++],--O;);if(G=0,Q<L){for(L-=O=Q;W[R++]=K[G++],--O;);G=R-z,Z=W}}}else if(G+=Q-O,O<L){for(L-=O;W[R++]=K[G++],--O;);G=R-z,Z=W}for(;2<L;)W[R++]=Z[G++],W[R++]=Z[G++],W[R++]=Z[G++],L-=3;L&&(W[R++]=Z[G++],1<L&&(W[R++]=Z[G++]))}else{for(G=R-z;W[R++]=W[G++],W[R++]=W[G++],W[R++]=W[G++],2<(L-=3););L&&(W[R++]=W[G++],1<L&&(W[R++]=W[G++]))}break}}break}}while(_<j&&R<I);_-=L=P>>3,T&=(1<<(P-=L<<3))-1,g.next_in=_,g.next_out=R,g.avail_in=_<j?j-_+5:5-(_-j),g.avail_out=R<I?I-R+257:257-(R-I),x.hold=T,x.bits=P}},{}],49:[function(m,b,y){var g=m("../utils/common"),w=m("./adler32"),x=m("./crc32"),_=m("./inffast"),j=m("./inftrees"),R=-2;function M(k){return(k>>>24&255)+(k>>>8&65280)+((65280&k)<<8)+((255&k)<<24)}function I(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new g.Buf16(320),this.work=new g.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function F(k){var S;return k&&k.state?(S=k.state,k.total_in=k.total_out=S.total=0,k.msg="",S.wrap&&(k.adler=1&S.wrap),S.mode=1,S.last=0,S.havedict=0,S.dmax=32768,S.head=null,S.hold=0,S.bits=0,S.lencode=S.lendyn=new g.Buf32(852),S.distcode=S.distdyn=new g.Buf32(592),S.sane=1,S.back=-1,0):R}function B(k){var S;return k&&k.state?((S=k.state).wsize=0,S.whave=0,S.wnext=0,F(k)):R}function U(k,S){var E,O;return k&&k.state?(O=k.state,S<0?(E=0,S=-S):(E=1+(S>>4),S<48&&(S&=15)),S&&(S<8||15<S)?R:(O.window!==null&&O.wbits!==S&&(O.window=null),O.wrap=E,O.wbits=S,B(k))):R}function Q(k,S){var E,O;return k?(O=new I,(k.state=O).window=null,(E=U(k,S))!==0&&(k.state=null),E):R}var K,T,P=!0;function A(k){if(P){var S;for(K=new g.Buf32(512),T=new g.Buf32(32),S=0;S<144;)k.lens[S++]=8;for(;S<256;)k.lens[S++]=9;for(;S<280;)k.lens[S++]=7;for(;S<288;)k.lens[S++]=8;for(j(1,k.lens,0,288,K,0,k.work,{bits:9}),S=0;S<32;)k.lens[S++]=5;j(2,k.lens,0,32,T,0,k.work,{bits:5}),P=!1}k.lencode=K,k.lenbits=9,k.distcode=T,k.distbits=5}function N(k,S,E,O){var L,z=k.state;return z.window===null&&(z.wsize=1<<z.wbits,z.wnext=0,z.whave=0,z.window=new g.Buf8(z.wsize)),O>=z.wsize?(g.arraySet(z.window,S,E-z.wsize,z.wsize,0),z.wnext=0,z.whave=z.wsize):(O<(L=z.wsize-z.wnext)&&(L=O),g.arraySet(z.window,S,E-O,L,z.wnext),(O-=L)?(g.arraySet(z.window,S,E-O,O,0),z.wnext=O,z.whave=z.wsize):(z.wnext+=L,z.wnext===z.wsize&&(z.wnext=0),z.whave<z.wsize&&(z.whave+=L))),0}y.inflateReset=B,y.inflateReset2=U,y.inflateResetKeep=F,y.inflateInit=function(k){return Q(k,15)},y.inflateInit2=Q,y.inflate=function(k,S){var E,O,L,z,G,Z,ee,W,J,$,q,Y,se,oe,ae,ce,we,fe,re,ge,le,te,ie,ue,_e=0,je=new g.Buf8(4),ke=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!k||!k.state||!k.output||!k.input&&k.avail_in!==0)return R;(E=k.state).mode===12&&(E.mode=13),G=k.next_out,L=k.output,ee=k.avail_out,z=k.next_in,O=k.input,Z=k.avail_in,W=E.hold,J=E.bits,$=Z,q=ee,te=0;e:for(;;)switch(E.mode){case 1:if(E.wrap===0){E.mode=13;break}for(;J<16;){if(Z===0)break e;Z--,W+=O[z++]<<J,J+=8}if(2&E.wrap&&W===35615){je[E.check=0]=255&W,je[1]=W>>>8&255,E.check=x(E.check,je,2,0),J=W=0,E.mode=2;break}if(E.flags=0,E.head&&(E.head.done=!1),!(1&E.wrap)||(((255&W)<<8)+(W>>8))%31){k.msg="incorrect header check",E.mode=30;break}if((15&W)!=8){k.msg="unknown compression method",E.mode=30;break}if(J-=4,le=8+(15&(W>>>=4)),E.wbits===0)E.wbits=le;else if(le>E.wbits){k.msg="invalid window size",E.mode=30;break}E.dmax=1<<le,k.adler=E.check=1,E.mode=512&W?10:12,J=W=0;break;case 2:for(;J<16;){if(Z===0)break e;Z--,W+=O[z++]<<J,J+=8}if(E.flags=W,(255&E.flags)!=8){k.msg="unknown compression method",E.mode=30;break}if(57344&E.flags){k.msg="unknown header flags set",E.mode=30;break}E.head&&(E.head.text=W>>8&1),512&E.flags&&(je[0]=255&W,je[1]=W>>>8&255,E.check=x(E.check,je,2,0)),J=W=0,E.mode=3;case 3:for(;J<32;){if(Z===0)break e;Z--,W+=O[z++]<<J,J+=8}E.head&&(E.head.time=W),512&E.flags&&(je[0]=255&W,je[1]=W>>>8&255,je[2]=W>>>16&255,je[3]=W>>>24&255,E.check=x(E.check,je,4,0)),J=W=0,E.mode=4;case 4:for(;J<16;){if(Z===0)break e;Z--,W+=O[z++]<<J,J+=8}E.head&&(E.head.xflags=255&W,E.head.os=W>>8),512&E.flags&&(je[0]=255&W,je[1]=W>>>8&255,E.check=x(E.check,je,2,0)),J=W=0,E.mode=5;case 5:if(1024&E.flags){for(;J<16;){if(Z===0)break e;Z--,W+=O[z++]<<J,J+=8}E.length=W,E.head&&(E.head.extra_len=W),512&E.flags&&(je[0]=255&W,je[1]=W>>>8&255,E.check=x(E.check,je,2,0)),J=W=0}else E.head&&(E.head.extra=null);E.mode=6;case 6:if(1024&E.flags&&(Z<(Y=E.length)&&(Y=Z),Y&&(E.head&&(le=E.head.extra_len-E.length,E.head.extra||(E.head.extra=new Array(E.head.extra_len)),g.arraySet(E.head.extra,O,z,Y,le)),512&E.flags&&(E.check=x(E.check,O,Y,z)),Z-=Y,z+=Y,E.length-=Y),E.length))break e;E.length=0,E.mode=7;case 7:if(2048&E.flags){if(Z===0)break e;for(Y=0;le=O[z+Y++],E.head&&le&&E.length<65536&&(E.head.name+=String.fromCharCode(le)),le&&Y<Z;);if(512&E.flags&&(E.check=x(E.check,O,Y,z)),Z-=Y,z+=Y,le)break e}else E.head&&(E.head.name=null);E.length=0,E.mode=8;case 8:if(4096&E.flags){if(Z===0)break e;for(Y=0;le=O[z+Y++],E.head&&le&&E.length<65536&&(E.head.comment+=String.fromCharCode(le)),le&&Y<Z;);if(512&E.flags&&(E.check=x(E.check,O,Y,z)),Z-=Y,z+=Y,le)break e}else E.head&&(E.head.comment=null);E.mode=9;case 9:if(512&E.flags){for(;J<16;){if(Z===0)break e;Z--,W+=O[z++]<<J,J+=8}if(W!==(65535&E.check)){k.msg="header crc mismatch",E.mode=30;break}J=W=0}E.head&&(E.head.hcrc=E.flags>>9&1,E.head.done=!0),k.adler=E.check=0,E.mode=12;break;case 10:for(;J<32;){if(Z===0)break e;Z--,W+=O[z++]<<J,J+=8}k.adler=E.check=M(W),J=W=0,E.mode=11;case 11:if(E.havedict===0)return k.next_out=G,k.avail_out=ee,k.next_in=z,k.avail_in=Z,E.hold=W,E.bits=J,2;k.adler=E.check=1,E.mode=12;case 12:if(S===5||S===6)break e;case 13:if(E.last){W>>>=7&J,J-=7&J,E.mode=27;break}for(;J<3;){if(Z===0)break e;Z--,W+=O[z++]<<J,J+=8}switch(E.last=1&W,J-=1,3&(W>>>=1)){case 0:E.mode=14;break;case 1:if(A(E),E.mode=20,S!==6)break;W>>>=2,J-=2;break e;case 2:E.mode=17;break;case 3:k.msg="invalid block type",E.mode=30}W>>>=2,J-=2;break;case 14:for(W>>>=7&J,J-=7&J;J<32;){if(Z===0)break e;Z--,W+=O[z++]<<J,J+=8}if((65535&W)!=(W>>>16^65535)){k.msg="invalid stored block lengths",E.mode=30;break}if(E.length=65535&W,J=W=0,E.mode=15,S===6)break e;case 15:E.mode=16;case 16:if(Y=E.length){if(Z<Y&&(Y=Z),ee<Y&&(Y=ee),Y===0)break e;g.arraySet(L,O,z,Y,G),Z-=Y,z+=Y,ee-=Y,G+=Y,E.length-=Y;break}E.mode=12;break;case 17:for(;J<14;){if(Z===0)break e;Z--,W+=O[z++]<<J,J+=8}if(E.nlen=257+(31&W),W>>>=5,J-=5,E.ndist=1+(31&W),W>>>=5,J-=5,E.ncode=4+(15&W),W>>>=4,J-=4,286<E.nlen||30<E.ndist){k.msg="too many length or distance symbols",E.mode=30;break}E.have=0,E.mode=18;case 18:for(;E.have<E.ncode;){for(;J<3;){if(Z===0)break e;Z--,W+=O[z++]<<J,J+=8}E.lens[ke[E.have++]]=7&W,W>>>=3,J-=3}for(;E.have<19;)E.lens[ke[E.have++]]=0;if(E.lencode=E.lendyn,E.lenbits=7,ie={bits:E.lenbits},te=j(0,E.lens,0,19,E.lencode,0,E.work,ie),E.lenbits=ie.bits,te){k.msg="invalid code lengths set",E.mode=30;break}E.have=0,E.mode=19;case 19:for(;E.have<E.nlen+E.ndist;){for(;ce=(_e=E.lencode[W&(1<<E.lenbits)-1])>>>16&255,we=65535&_e,!((ae=_e>>>24)<=J);){if(Z===0)break e;Z--,W+=O[z++]<<J,J+=8}if(we<16)W>>>=ae,J-=ae,E.lens[E.have++]=we;else{if(we===16){for(ue=ae+2;J<ue;){if(Z===0)break e;Z--,W+=O[z++]<<J,J+=8}if(W>>>=ae,J-=ae,E.have===0){k.msg="invalid bit length repeat",E.mode=30;break}le=E.lens[E.have-1],Y=3+(3&W),W>>>=2,J-=2}else if(we===17){for(ue=ae+3;J<ue;){if(Z===0)break e;Z--,W+=O[z++]<<J,J+=8}J-=ae,le=0,Y=3+(7&(W>>>=ae)),W>>>=3,J-=3}else{for(ue=ae+7;J<ue;){if(Z===0)break e;Z--,W+=O[z++]<<J,J+=8}J-=ae,le=0,Y=11+(127&(W>>>=ae)),W>>>=7,J-=7}if(E.have+Y>E.nlen+E.ndist){k.msg="invalid bit length repeat",E.mode=30;break}for(;Y--;)E.lens[E.have++]=le}}if(E.mode===30)break;if(E.lens[256]===0){k.msg="invalid code -- missing end-of-block",E.mode=30;break}if(E.lenbits=9,ie={bits:E.lenbits},te=j(1,E.lens,0,E.nlen,E.lencode,0,E.work,ie),E.lenbits=ie.bits,te){k.msg="invalid literal/lengths set",E.mode=30;break}if(E.distbits=6,E.distcode=E.distdyn,ie={bits:E.distbits},te=j(2,E.lens,E.nlen,E.ndist,E.distcode,0,E.work,ie),E.distbits=ie.bits,te){k.msg="invalid distances set",E.mode=30;break}if(E.mode=20,S===6)break e;case 20:E.mode=21;case 21:if(6<=Z&&258<=ee){k.next_out=G,k.avail_out=ee,k.next_in=z,k.avail_in=Z,E.hold=W,E.bits=J,_(k,q),G=k.next_out,L=k.output,ee=k.avail_out,z=k.next_in,O=k.input,Z=k.avail_in,W=E.hold,J=E.bits,E.mode===12&&(E.back=-1);break}for(E.back=0;ce=(_e=E.lencode[W&(1<<E.lenbits)-1])>>>16&255,we=65535&_e,!((ae=_e>>>24)<=J);){if(Z===0)break e;Z--,W+=O[z++]<<J,J+=8}if(ce&&(240&ce)==0){for(fe=ae,re=ce,ge=we;ce=(_e=E.lencode[ge+((W&(1<<fe+re)-1)>>fe)])>>>16&255,we=65535&_e,!(fe+(ae=_e>>>24)<=J);){if(Z===0)break e;Z--,W+=O[z++]<<J,J+=8}W>>>=fe,J-=fe,E.back+=fe}if(W>>>=ae,J-=ae,E.back+=ae,E.length=we,ce===0){E.mode=26;break}if(32&ce){E.back=-1,E.mode=12;break}if(64&ce){k.msg="invalid literal/length code",E.mode=30;break}E.extra=15&ce,E.mode=22;case 22:if(E.extra){for(ue=E.extra;J<ue;){if(Z===0)break e;Z--,W+=O[z++]<<J,J+=8}E.length+=W&(1<<E.extra)-1,W>>>=E.extra,J-=E.extra,E.back+=E.extra}E.was=E.length,E.mode=23;case 23:for(;ce=(_e=E.distcode[W&(1<<E.distbits)-1])>>>16&255,we=65535&_e,!((ae=_e>>>24)<=J);){if(Z===0)break e;Z--,W+=O[z++]<<J,J+=8}if((240&ce)==0){for(fe=ae,re=ce,ge=we;ce=(_e=E.distcode[ge+((W&(1<<fe+re)-1)>>fe)])>>>16&255,we=65535&_e,!(fe+(ae=_e>>>24)<=J);){if(Z===0)break e;Z--,W+=O[z++]<<J,J+=8}W>>>=fe,J-=fe,E.back+=fe}if(W>>>=ae,J-=ae,E.back+=ae,64&ce){k.msg="invalid distance code",E.mode=30;break}E.offset=we,E.extra=15&ce,E.mode=24;case 24:if(E.extra){for(ue=E.extra;J<ue;){if(Z===0)break e;Z--,W+=O[z++]<<J,J+=8}E.offset+=W&(1<<E.extra)-1,W>>>=E.extra,J-=E.extra,E.back+=E.extra}if(E.offset>E.dmax){k.msg="invalid distance too far back",E.mode=30;break}E.mode=25;case 25:if(ee===0)break e;if(Y=q-ee,E.offset>Y){if((Y=E.offset-Y)>E.whave&&E.sane){k.msg="invalid distance too far back",E.mode=30;break}se=Y>E.wnext?(Y-=E.wnext,E.wsize-Y):E.wnext-Y,Y>E.length&&(Y=E.length),oe=E.window}else oe=L,se=G-E.offset,Y=E.length;for(ee<Y&&(Y=ee),ee-=Y,E.length-=Y;L[G++]=oe[se++],--Y;);E.length===0&&(E.mode=21);break;case 26:if(ee===0)break e;L[G++]=E.length,ee--,E.mode=21;break;case 27:if(E.wrap){for(;J<32;){if(Z===0)break e;Z--,W|=O[z++]<<J,J+=8}if(q-=ee,k.total_out+=q,E.total+=q,q&&(k.adler=E.check=E.flags?x(E.check,L,q,G-q):w(E.check,L,q,G-q)),q=ee,(E.flags?W:M(W))!==E.check){k.msg="incorrect data check",E.mode=30;break}J=W=0}E.mode=28;case 28:if(E.wrap&&E.flags){for(;J<32;){if(Z===0)break e;Z--,W+=O[z++]<<J,J+=8}if(W!==(4294967295&E.total)){k.msg="incorrect length check",E.mode=30;break}J=W=0}E.mode=29;case 29:te=1;break e;case 30:te=-3;break e;case 31:return-4;case 32:default:return R}return k.next_out=G,k.avail_out=ee,k.next_in=z,k.avail_in=Z,E.hold=W,E.bits=J,(E.wsize||q!==k.avail_out&&E.mode<30&&(E.mode<27||S!==4))&&N(k,k.output,k.next_out,q-k.avail_out)?(E.mode=31,-4):($-=k.avail_in,q-=k.avail_out,k.total_in+=$,k.total_out+=q,E.total+=q,E.wrap&&q&&(k.adler=E.check=E.flags?x(E.check,L,q,k.next_out-q):w(E.check,L,q,k.next_out-q)),k.data_type=E.bits+(E.last?64:0)+(E.mode===12?128:0)+(E.mode===20||E.mode===15?256:0),($==0&&q===0||S===4)&&te===0&&(te=-5),te)},y.inflateEnd=function(k){if(!k||!k.state)return R;var S=k.state;return S.window&&(S.window=null),k.state=null,0},y.inflateGetHeader=function(k,S){var E;return k&&k.state?(2&(E=k.state).wrap)==0?R:((E.head=S).done=!1,0):R},y.inflateSetDictionary=function(k,S){var E,O=S.length;return k&&k.state?(E=k.state).wrap!==0&&E.mode!==11?R:E.mode===11&&w(1,S,O,0)!==E.check?-3:N(k,S,O,O)?(E.mode=31,-4):(E.havedict=1,0):R},y.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(m,b,y){var g=m("../utils/common"),w=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],x=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],_=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],j=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];b.exports=function(R,M,I,F,B,U,Q,K){var T,P,A,N,k,S,E,O,L,z=K.bits,G=0,Z=0,ee=0,W=0,J=0,$=0,q=0,Y=0,se=0,oe=0,ae=null,ce=0,we=new g.Buf16(16),fe=new g.Buf16(16),re=null,ge=0;for(G=0;G<=15;G++)we[G]=0;for(Z=0;Z<F;Z++)we[M[I+Z]]++;for(J=z,W=15;1<=W&&we[W]===0;W--);if(W<J&&(J=W),W===0)return B[U++]=20971520,B[U++]=20971520,K.bits=1,0;for(ee=1;ee<W&&we[ee]===0;ee++);for(J<ee&&(J=ee),G=Y=1;G<=15;G++)if(Y<<=1,(Y-=we[G])<0)return-1;if(0<Y&&(R===0||W!==1))return-1;for(fe[1]=0,G=1;G<15;G++)fe[G+1]=fe[G]+we[G];for(Z=0;Z<F;Z++)M[I+Z]!==0&&(Q[fe[M[I+Z]]++]=Z);if(S=R===0?(ae=re=Q,19):R===1?(ae=w,ce-=257,re=x,ge-=257,256):(ae=_,re=j,-1),G=ee,k=U,q=Z=oe=0,A=-1,N=(se=1<<($=J))-1,R===1&&852<se||R===2&&592<se)return 1;for(;;){for(E=G-q,L=Q[Z]<S?(O=0,Q[Z]):Q[Z]>S?(O=re[ge+Q[Z]],ae[ce+Q[Z]]):(O=96,0),T=1<<G-q,ee=P=1<<$;B[k+(oe>>q)+(P-=T)]=E<<24|O<<16|L|0,P!==0;);for(T=1<<G-1;oe&T;)T>>=1;if(T!==0?(oe&=T-1,oe+=T):oe=0,Z++,--we[G]==0){if(G===W)break;G=M[I+Q[Z]]}if(J<G&&(oe&N)!==A){for(q===0&&(q=J),k+=ee,Y=1<<($=G-q);$+q<W&&!((Y-=we[$+q])<=0);)$++,Y<<=1;if(se+=1<<$,R===1&&852<se||R===2&&592<se)return 1;B[A=oe&N]=J<<24|$<<16|k-U|0}}return oe!==0&&(B[k+oe]=G-q<<24|64<<16|0),K.bits=J,0}},{"../utils/common":41}],51:[function(m,b,y){b.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(m,b,y){var g=m("../utils/common");function w(re){for(var ge=re.length;0<=--ge;)re[ge]=0}var x=256,_=286,j=30,R=15,M=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],I=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],F=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],B=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],U=new Array(576);w(U);var Q=new Array(60);w(Q);var K=new Array(512);w(K);var T=new Array(256);w(T);var P=new Array(29);w(P);var A,N,k,S=new Array(j);function E(re,ge,le,te,ie){this.static_tree=re,this.extra_bits=ge,this.extra_base=le,this.elems=te,this.max_length=ie,this.has_stree=re&&re.length}function O(re,ge){this.dyn_tree=re,this.max_code=0,this.stat_desc=ge}function L(re){return re<256?K[re]:K[256+(re>>>7)]}function z(re,ge){re.pending_buf[re.pending++]=255&ge,re.pending_buf[re.pending++]=ge>>>8&255}function G(re,ge,le){re.bi_valid>16-le?(re.bi_buf|=ge<<re.bi_valid&65535,z(re,re.bi_buf),re.bi_buf=ge>>16-re.bi_valid,re.bi_valid+=le-16):(re.bi_buf|=ge<<re.bi_valid&65535,re.bi_valid+=le)}function Z(re,ge,le){G(re,le[2*ge],le[2*ge+1])}function ee(re,ge){for(var le=0;le|=1&re,re>>>=1,le<<=1,0<--ge;);return le>>>1}function W(re,ge,le){var te,ie,ue=new Array(16),_e=0;for(te=1;te<=R;te++)ue[te]=_e=_e+le[te-1]<<1;for(ie=0;ie<=ge;ie++){var je=re[2*ie+1];je!==0&&(re[2*ie]=ee(ue[je]++,je))}}function J(re){var ge;for(ge=0;ge<_;ge++)re.dyn_ltree[2*ge]=0;for(ge=0;ge<j;ge++)re.dyn_dtree[2*ge]=0;for(ge=0;ge<19;ge++)re.bl_tree[2*ge]=0;re.dyn_ltree[512]=1,re.opt_len=re.static_len=0,re.last_lit=re.matches=0}function $(re){8<re.bi_valid?z(re,re.bi_buf):0<re.bi_valid&&(re.pending_buf[re.pending++]=re.bi_buf),re.bi_buf=0,re.bi_valid=0}function q(re,ge,le,te){var ie=2*ge,ue=2*le;return re[ie]<re[ue]||re[ie]===re[ue]&&te[ge]<=te[le]}function Y(re,ge,le){for(var te=re.heap[le],ie=le<<1;ie<=re.heap_len&&(ie<re.heap_len&&q(ge,re.heap[ie+1],re.heap[ie],re.depth)&&ie++,!q(ge,te,re.heap[ie],re.depth));)re.heap[le]=re.heap[ie],le=ie,ie<<=1;re.heap[le]=te}function se(re,ge,le){var te,ie,ue,_e,je=0;if(re.last_lit!==0)for(;te=re.pending_buf[re.d_buf+2*je]<<8|re.pending_buf[re.d_buf+2*je+1],ie=re.pending_buf[re.l_buf+je],je++,te===0?Z(re,ie,ge):(Z(re,(ue=T[ie])+x+1,ge),(_e=M[ue])!==0&&G(re,ie-=P[ue],_e),Z(re,ue=L(--te),le),(_e=I[ue])!==0&&G(re,te-=S[ue],_e)),je<re.last_lit;);Z(re,256,ge)}function oe(re,ge){var le,te,ie,ue=ge.dyn_tree,_e=ge.stat_desc.static_tree,je=ge.stat_desc.has_stree,ke=ge.stat_desc.elems,Le=-1;for(re.heap_len=0,re.heap_max=573,le=0;le<ke;le++)ue[2*le]!==0?(re.heap[++re.heap_len]=Le=le,re.depth[le]=0):ue[2*le+1]=0;for(;re.heap_len<2;)ue[2*(ie=re.heap[++re.heap_len]=Le<2?++Le:0)]=1,re.depth[ie]=0,re.opt_len--,je&&(re.static_len-=_e[2*ie+1]);for(ge.max_code=Le,le=re.heap_len>>1;1<=le;le--)Y(re,ue,le);for(ie=ke;le=re.heap[1],re.heap[1]=re.heap[re.heap_len--],Y(re,ue,1),te=re.heap[1],re.heap[--re.heap_max]=le,re.heap[--re.heap_max]=te,ue[2*ie]=ue[2*le]+ue[2*te],re.depth[ie]=(re.depth[le]>=re.depth[te]?re.depth[le]:re.depth[te])+1,ue[2*le+1]=ue[2*te+1]=ie,re.heap[1]=ie++,Y(re,ue,1),2<=re.heap_len;);re.heap[--re.heap_max]=re.heap[1],function(Ue,Qe){var Be,ct,ft,_t,ut,lt,ht=Qe.dyn_tree,jt=Qe.max_code,pt=Qe.stat_desc.static_tree,Qt=Qe.stat_desc.has_stree,sr=Qe.stat_desc.extra_bits,Ot=Qe.stat_desc.extra_base,Xt=Qe.stat_desc.max_length,kt=0;for(_t=0;_t<=R;_t++)Ue.bl_count[_t]=0;for(ht[2*Ue.heap[Ue.heap_max]+1]=0,Be=Ue.heap_max+1;Be<573;Be++)Xt<(_t=ht[2*ht[2*(ct=Ue.heap[Be])+1]+1]+1)&&(_t=Xt,kt++),ht[2*ct+1]=_t,jt<ct||(Ue.bl_count[_t]++,ut=0,Ot<=ct&&(ut=sr[ct-Ot]),lt=ht[2*ct],Ue.opt_len+=lt*(_t+ut),Qt&&(Ue.static_len+=lt*(pt[2*ct+1]+ut)));if(kt!==0){do{for(_t=Xt-1;Ue.bl_count[_t]===0;)_t--;Ue.bl_count[_t]--,Ue.bl_count[_t+1]+=2,Ue.bl_count[Xt]--,kt-=2}while(0<kt);for(_t=Xt;_t!==0;_t--)for(ct=Ue.bl_count[_t];ct!==0;)jt<(ft=Ue.heap[--Be])||(ht[2*ft+1]!==_t&&(Ue.opt_len+=(_t-ht[2*ft+1])*ht[2*ft],ht[2*ft+1]=_t),ct--)}}(re,ge),W(ue,Le,re.bl_count)}function ae(re,ge,le){var te,ie,ue=-1,_e=ge[1],je=0,ke=7,Le=4;for(_e===0&&(ke=138,Le=3),ge[2*(le+1)+1]=65535,te=0;te<=le;te++)ie=_e,_e=ge[2*(te+1)+1],++je<ke&&ie===_e||(je<Le?re.bl_tree[2*ie]+=je:ie!==0?(ie!==ue&&re.bl_tree[2*ie]++,re.bl_tree[32]++):je<=10?re.bl_tree[34]++:re.bl_tree[36]++,ue=ie,Le=(je=0)===_e?(ke=138,3):ie===_e?(ke=6,3):(ke=7,4))}function ce(re,ge,le){var te,ie,ue=-1,_e=ge[1],je=0,ke=7,Le=4;for(_e===0&&(ke=138,Le=3),te=0;te<=le;te++)if(ie=_e,_e=ge[2*(te+1)+1],!(++je<ke&&ie===_e)){if(je<Le)for(;Z(re,ie,re.bl_tree),--je!=0;);else ie!==0?(ie!==ue&&(Z(re,ie,re.bl_tree),je--),Z(re,16,re.bl_tree),G(re,je-3,2)):je<=10?(Z(re,17,re.bl_tree),G(re,je-3,3)):(Z(re,18,re.bl_tree),G(re,je-11,7));ue=ie,Le=(je=0)===_e?(ke=138,3):ie===_e?(ke=6,3):(ke=7,4)}}w(S);var we=!1;function fe(re,ge,le,te){G(re,0+(te?1:0),3),function(ie,ue,_e,je){$(ie),z(ie,_e),z(ie,~_e),g.arraySet(ie.pending_buf,ie.window,ue,_e,ie.pending),ie.pending+=_e}(re,ge,le)}y._tr_init=function(re){we||(function(){var ge,le,te,ie,ue,_e=new Array(16);for(ie=te=0;ie<28;ie++)for(P[ie]=te,ge=0;ge<1<<M[ie];ge++)T[te++]=ie;for(T[te-1]=ie,ie=ue=0;ie<16;ie++)for(S[ie]=ue,ge=0;ge<1<<I[ie];ge++)K[ue++]=ie;for(ue>>=7;ie<j;ie++)for(S[ie]=ue<<7,ge=0;ge<1<<I[ie]-7;ge++)K[256+ue++]=ie;for(le=0;le<=R;le++)_e[le]=0;for(ge=0;ge<=143;)U[2*ge+1]=8,ge++,_e[8]++;for(;ge<=255;)U[2*ge+1]=9,ge++,_e[9]++;for(;ge<=279;)U[2*ge+1]=7,ge++,_e[7]++;for(;ge<=287;)U[2*ge+1]=8,ge++,_e[8]++;for(W(U,287,_e),ge=0;ge<j;ge++)Q[2*ge+1]=5,Q[2*ge]=ee(ge,5);A=new E(U,M,257,_,R),N=new E(Q,I,0,j,R),k=new E(new Array(0),F,0,19,7)}(),we=!0),re.l_desc=new O(re.dyn_ltree,A),re.d_desc=new O(re.dyn_dtree,N),re.bl_desc=new O(re.bl_tree,k),re.bi_buf=0,re.bi_valid=0,J(re)},y._tr_stored_block=fe,y._tr_flush_block=function(re,ge,le,te){var ie,ue,_e=0;0<re.level?(re.strm.data_type===2&&(re.strm.data_type=function(je){var ke,Le=4093624447;for(ke=0;ke<=31;ke++,Le>>>=1)if(1&Le&&je.dyn_ltree[2*ke]!==0)return 0;if(je.dyn_ltree[18]!==0||je.dyn_ltree[20]!==0||je.dyn_ltree[26]!==0)return 1;for(ke=32;ke<x;ke++)if(je.dyn_ltree[2*ke]!==0)return 1;return 0}(re)),oe(re,re.l_desc),oe(re,re.d_desc),_e=function(je){var ke;for(ae(je,je.dyn_ltree,je.l_desc.max_code),ae(je,je.dyn_dtree,je.d_desc.max_code),oe(je,je.bl_desc),ke=18;3<=ke&&je.bl_tree[2*B[ke]+1]===0;ke--);return je.opt_len+=3*(ke+1)+5+5+4,ke}(re),ie=re.opt_len+3+7>>>3,(ue=re.static_len+3+7>>>3)<=ie&&(ie=ue)):ie=ue=le+5,le+4<=ie&&ge!==-1?fe(re,ge,le,te):re.strategy===4||ue===ie?(G(re,2+(te?1:0),3),se(re,U,Q)):(G(re,4+(te?1:0),3),function(je,ke,Le,Ue){var Qe;for(G(je,ke-257,5),G(je,Le-1,5),G(je,Ue-4,4),Qe=0;Qe<Ue;Qe++)G(je,je.bl_tree[2*B[Qe]+1],3);ce(je,je.dyn_ltree,ke-1),ce(je,je.dyn_dtree,Le-1)}(re,re.l_desc.max_code+1,re.d_desc.max_code+1,_e+1),se(re,re.dyn_ltree,re.dyn_dtree)),J(re),te&&$(re)},y._tr_tally=function(re,ge,le){return re.pending_buf[re.d_buf+2*re.last_lit]=ge>>>8&255,re.pending_buf[re.d_buf+2*re.last_lit+1]=255&ge,re.pending_buf[re.l_buf+re.last_lit]=255&le,re.last_lit++,ge===0?re.dyn_ltree[2*le]++:(re.matches++,ge--,re.dyn_ltree[2*(T[le]+x+1)]++,re.dyn_dtree[2*L(ge)]++),re.last_lit===re.lit_bufsize-1},y._tr_align=function(re){G(re,2,3),Z(re,256,U),function(ge){ge.bi_valid===16?(z(ge,ge.bi_buf),ge.bi_buf=0,ge.bi_valid=0):8<=ge.bi_valid&&(ge.pending_buf[ge.pending++]=255&ge.bi_buf,ge.bi_buf>>=8,ge.bi_valid-=8)}(re)}},{"../utils/common":41}],53:[function(m,b,y){b.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(m,b,y){(function(g){(function(w,x){if(!w.setImmediate){var _,j,R,M,I=1,F={},B=!1,U=w.document,Q=Object.getPrototypeOf&&Object.getPrototypeOf(w);Q=Q&&Q.setTimeout?Q:w,_={}.toString.call(w.process)==="[object process]"?function(A){i.nextTick(function(){T(A)})}:function(){if(w.postMessage&&!w.importScripts){var A=!0,N=w.onmessage;return w.onmessage=function(){A=!1},w.postMessage("","*"),w.onmessage=N,A}}()?(M="setImmediate$"+Math.random()+"$",w.addEventListener?w.addEventListener("message",P,!1):w.attachEvent("onmessage",P),function(A){w.postMessage(M+A,"*")}):w.MessageChannel?((R=new MessageChannel).port1.onmessage=function(A){T(A.data)},function(A){R.port2.postMessage(A)}):U&&"onreadystatechange"in U.createElement("script")?(j=U.documentElement,function(A){var N=U.createElement("script");N.onreadystatechange=function(){T(A),N.onreadystatechange=null,j.removeChild(N),N=null},j.appendChild(N)}):function(A){setTimeout(T,0,A)},Q.setImmediate=function(A){typeof A!="function"&&(A=new Function(""+A));for(var N=new Array(arguments.length-1),k=0;k<N.length;k++)N[k]=arguments[k+1];var S={callback:A,args:N};return F[I]=S,_(I),I++},Q.clearImmediate=K}function K(A){delete F[A]}function T(A){if(B)setTimeout(T,0,A);else{var N=F[A];if(N){B=!0;try{(function(k){var S=k.callback,E=k.args;switch(E.length){case 0:S();break;case 1:S(E[0]);break;case 2:S(E[0],E[1]);break;case 3:S(E[0],E[1],E[2]);break;default:S.apply(void 0,E)}})(N)}finally{K(A),B=!1}}}}function P(A){A.source===w&&typeof A.data=="string"&&A.data.indexOf(M)===0&&T(+A.data.slice(M.length))}})(typeof self>"u"?g===void 0?this:g:self)}).call(this,o!==void 0?o:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}).call(this)}).call(this,t("_process"),typeof mr<"u"?mr:typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],t("timers").setImmediate)},{_process:467,buffer:220,timers:523}],442:[function(t,s,l){(function(i){(function(){var o=/[\\^$.*+?()[\]{}|]/g,d=RegExp(o.source),c=typeof i=="object"&&i&&i.Object===Object&&i,a=typeof self=="object"&&self&&self.Object===Object&&self,u=c||a||Function("return this")(),h=Object.prototype.toString,f=u.Symbol,m=f?f.prototype:void 0,b=m?m.toString:void 0;function y(g){if(typeof g=="string")return g;if(function(x){return typeof x=="symbol"||function(_){return!!_&&typeof _=="object"}(x)&&h.call(x)=="[object Symbol]"}(g))return b?b.call(g):"";var w=g+"";return w=="0"&&1/g==-1/0?"-0":w}s.exports=function(g){var w;return(g=(w=g)==null?"":y(w))&&d.test(g)?g.replace(o,"\\$&"):g}}).call(this)}).call(this,typeof mr<"u"?mr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],443:[function(t,s,l){(function(i){(function(){var o="[object Arguments]",d="[object Map]",c="[object Object]",a="[object Set]",u=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,h=/^\w*$/,f=/^\./,m=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,b=/\\(\\)?/g,y=/^\[object .+?Constructor\]$/,g=/^(?:0|[1-9]\d*)$/,w={};w["[object Float32Array]"]=w["[object Float64Array]"]=w["[object Int8Array]"]=w["[object Int16Array]"]=w["[object Int32Array]"]=w["[object Uint8Array]"]=w["[object Uint8ClampedArray]"]=w["[object Uint16Array]"]=w["[object Uint32Array]"]=!0,w[o]=w["[object Array]"]=w["[object ArrayBuffer]"]=w["[object Boolean]"]=w["[object DataView]"]=w["[object Date]"]=w["[object Error]"]=w["[object Function]"]=w[d]=w["[object Number]"]=w[c]=w["[object RegExp]"]=w[a]=w["[object String]"]=w["[object WeakMap]"]=!1;var x=typeof i=="object"&&i&&i.Object===Object&&i,_=typeof self=="object"&&self&&self.Object===Object&&self,j=x||_||Function("return this")(),R=typeof l=="object"&&l&&!l.nodeType&&l,M=R&&typeof s=="object"&&s&&!s.nodeType&&s,I=M&&M.exports===R&&x.process,F=function(){try{return I&&I.binding("util")}catch{}}(),B=F&&F.isTypedArray;function U(pe,Ae,Ge,Je){for(var Ct=-1,We=pe?pe.length:0;++Ct<We;){var ot=pe[Ct];Ae(Je,ot,Ge(ot),pe)}return Je}function Q(pe,Ae){for(var Ge=-1,Je=pe?pe.length:0;++Ge<Je;)if(Ae(pe[Ge],Ge,pe))return!0;return!1}function K(pe){var Ae=!1;if(pe!=null&&typeof pe.toString!="function")try{Ae=!!(pe+"")}catch{}return Ae}function T(pe){var Ae=-1,Ge=Array(pe.size);return pe.forEach(function(Je,Ct){Ge[++Ae]=[Ct,Je]}),Ge}function P(pe){var Ae=-1,Ge=Array(pe.size);return pe.forEach(function(Je){Ge[++Ae]=Je}),Ge}var A,N,k,S=Array.prototype,E=Function.prototype,O=Object.prototype,L=j["__core-js_shared__"],z=(A=/[^.]+$/.exec(L&&L.keys&&L.keys.IE_PROTO||""))?"Symbol(src)_1."+A:"",G=E.toString,Z=O.hasOwnProperty,ee=O.toString,W=RegExp("^"+G.call(Z).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),J=j.Symbol,$=j.Uint8Array,q=O.propertyIsEnumerable,Y=S.splice,se=(N=Object.keys,k=Object,function(pe){return N(k(pe))}),oe=xt(j,"DataView"),ae=xt(j,"Map"),ce=xt(j,"Promise"),we=xt(j,"Set"),fe=xt(j,"WeakMap"),re=xt(Object,"create"),ge=ye(oe),le=ye(ae),te=ye(ce),ie=ye(we),ue=ye(fe),_e=J?J.prototype:void 0,je=_e?_e.valueOf:void 0,ke=_e?_e.toString:void 0;function Le(pe){var Ae=-1,Ge=pe?pe.length:0;for(this.clear();++Ae<Ge;){var Je=pe[Ae];this.set(Je[0],Je[1])}}function Ue(pe){var Ae=-1,Ge=pe?pe.length:0;for(this.clear();++Ae<Ge;){var Je=pe[Ae];this.set(Je[0],Je[1])}}function Qe(pe){var Ae=-1,Ge=pe?pe.length:0;for(this.clear();++Ae<Ge;){var Je=pe[Ae];this.set(Je[0],Je[1])}}function Be(pe){var Ae=-1,Ge=pe?pe.length:0;for(this.__data__=new Qe;++Ae<Ge;)this.add(pe[Ae])}function ct(pe){this.__data__=new Ue(pe)}function ft(pe,Ae){var Ge=at(pe)||He(pe)?function(ot,Jt){for(var Ft=-1,Tt=Array(ot);++Ft<ot;)Tt[Ft]=Jt(Ft);return Tt}(pe.length,String):[],Je=Ge.length,Ct=!!Je;for(var We in pe)!Z.call(pe,We)||Ct&&(We=="length"||be(We,Je))||Ge.push(We);return Ge}function _t(pe,Ae){for(var Ge=pe.length;Ge--;)if(me(pe[Ge][0],Ae))return Ge;return-1}function ut(pe,Ae,Ge,Je){return ht(pe,function(Ct,We,ot){Ae(Je,Ct,Ge(Ct),ot)}),Je}Le.prototype.clear=function(){this.__data__=re?re(null):{}},Le.prototype.delete=function(pe){return this.has(pe)&&delete this.__data__[pe]},Le.prototype.get=function(pe){var Ae=this.__data__;if(re){var Ge=Ae[pe];return Ge==="__lodash_hash_undefined__"?void 0:Ge}return Z.call(Ae,pe)?Ae[pe]:void 0},Le.prototype.has=function(pe){var Ae=this.__data__;return re?Ae[pe]!==void 0:Z.call(Ae,pe)},Le.prototype.set=function(pe,Ae){return this.__data__[pe]=re&&Ae===void 0?"__lodash_hash_undefined__":Ae,this},Ue.prototype.clear=function(){this.__data__=[]},Ue.prototype.delete=function(pe){var Ae=this.__data__,Ge=_t(Ae,pe);return!(Ge<0)&&(Ge==Ae.length-1?Ae.pop():Y.call(Ae,Ge,1),!0)},Ue.prototype.get=function(pe){var Ae=this.__data__,Ge=_t(Ae,pe);return Ge<0?void 0:Ae[Ge][1]},Ue.prototype.has=function(pe){return _t(this.__data__,pe)>-1},Ue.prototype.set=function(pe,Ae){var Ge=this.__data__,Je=_t(Ge,pe);return Je<0?Ge.push([pe,Ae]):Ge[Je][1]=Ae,this},Qe.prototype.clear=function(){this.__data__={hash:new Le,map:new(ae||Ue),string:new Le}},Qe.prototype.delete=function(pe){return Ht(this,pe).delete(pe)},Qe.prototype.get=function(pe){return Ht(this,pe).get(pe)},Qe.prototype.has=function(pe){return Ht(this,pe).has(pe)},Qe.prototype.set=function(pe,Ae){return Ht(this,pe).set(pe,Ae),this},Be.prototype.add=Be.prototype.push=function(pe){return this.__data__.set(pe,"__lodash_hash_undefined__"),this},Be.prototype.has=function(pe){return this.__data__.has(pe)},ct.prototype.clear=function(){this.__data__=new Ue},ct.prototype.delete=function(pe){return this.__data__.delete(pe)},ct.prototype.get=function(pe){return this.__data__.get(pe)},ct.prototype.has=function(pe){return this.__data__.has(pe)},ct.prototype.set=function(pe,Ae){var Ge=this.__data__;if(Ge instanceof Ue){var Je=Ge.__data__;if(!ae||Je.length<199)return Je.push([pe,Ae]),this;Ge=this.__data__=new Qe(Je)}return Ge.set(pe,Ae),this};var lt,ht=(lt=function(pe,Ae){return pe&&jt(pe,Ae,ar)},function(pe,Ae){if(pe==null)return pe;if(!Ze(pe))return lt(pe,Ae);for(var Ge=pe.length,Je=-1,Ct=Object(pe);++Je<Ge&&Ae(Ct[Je],Je,Ct)!==!1;);return pe}),jt=function(pe){return function(Ae,Ge,Je){for(var Ct=-1,We=Object(Ae),ot=Je(Ae),Jt=ot.length;Jt--;){var Ft=ot[++Ct];if(Ge(We[Ft],Ft,We)===!1)break}return Ae}}();function pt(pe,Ae){for(var Ge=0,Je=(Ae=xe(Ae,pe)?[Ae]:Rt(Ae)).length;pe!=null&&Ge<Je;)pe=pe[he(Ae[Ge++])];return Ge&&Ge==Je?pe:void 0}function Qt(pe,Ae){return pe!=null&&Ae in Object(pe)}function sr(pe,Ae,Ge,Je,Ct){return pe===Ae||(pe==null||Ae==null||!mt(pe)&&!Ut(Ae)?pe!=pe&&Ae!=Ae:function(We,ot,Jt,Ft,Tt,At){var xr=at(We),vr=at(ot),rr="[object Array]",Dr="[object Array]";xr||(rr=(rr=Mt(We))==o?c:rr),vr||(Dr=(Dr=Mt(ot))==o?c:Dr);var Jr=rr==c&&!K(We),en=Dr==c&&!K(ot),Pn=rr==Dr;if(Pn&&!Jr)return At||(At=new ct),xr||jr(We)?$t(We,ot,Jt,Ft,Tt,At):function(rt,Ke,Dt,nr,bt,It,lr){switch(Dt){case"[object DataView]":if(rt.byteLength!=Ke.byteLength||rt.byteOffset!=Ke.byteOffset)return!1;rt=rt.buffer,Ke=Ke.buffer;case"[object ArrayBuffer]":return!(rt.byteLength!=Ke.byteLength||!nr(new $(rt),new $(Ke)));case"[object Boolean]":case"[object Date]":case"[object Number]":return me(+rt,+Ke);case"[object Error]":return rt.name==Ke.name&&rt.message==Ke.message;case"[object RegExp]":case"[object String]":return rt==Ke+"";case d:var zt=T;case a:var Nr=2&It;if(zt||(zt=P),rt.size!=Ke.size&&!Nr)return!1;var Sr=lr.get(rt);if(Sr)return Sr==Ke;It|=1,lr.set(rt,Ke);var tn=$t(zt(rt),zt(Ke),nr,bt,It,lr);return lr.delete(rt),tn;case"[object Symbol]":if(je)return je.call(rt)==je.call(Ke)}return!1}(We,ot,rr,Jt,Ft,Tt,At);if(!(2&Tt)){var ns=Jr&&Z.call(We,"__wrapped__"),In=en&&Z.call(ot,"__wrapped__");if(ns||In){var Se=ns?We.value():We,dt=In?ot.value():ot;return At||(At=new ct),Jt(Se,dt,Ft,Tt,At)}}return Pn?(At||(At=new ct),function(rt,Ke,Dt,nr,bt,It){var lr=2&bt,zt=ar(rt),Nr=zt.length,Sr=ar(Ke).length;if(Nr!=Sr&&!lr)return!1;for(var tn=Nr;tn--;){var Hr=zt[tn];if(!(lr?Hr in Ke:Z.call(Ke,Hr)))return!1}var cn=It.get(rt);if(cn&&It.get(Ke))return cn==Ke;var Xr=!0;It.set(rt,Ke),It.set(Ke,rt);for(var gn=lr;++tn<Nr;){Hr=zt[tn];var Qr=rt[Hr],ys=Ke[Hr];if(nr)var Rc=lr?nr(ys,Qr,Hr,Ke,rt,It):nr(Qr,ys,Hr,rt,Ke,It);if(!(Rc===void 0?Qr===ys||Dt(Qr,ys,nr,bt,It):Rc)){Xr=!1;break}gn||(gn=Hr=="constructor")}if(Xr&&!gn){var vi=rt.constructor,ho=Ke.constructor;vi==ho||!("constructor"in rt)||!("constructor"in Ke)||typeof vi=="function"&&vi instanceof vi&&typeof ho=="function"&&ho instanceof ho||(Xr=!1)}return It.delete(rt),It.delete(Ke),Xr}(We,ot,Jt,Ft,Tt,At)):!1}(pe,Ae,sr,Ge,Je,Ct))}function Ot(pe){return!(!mt(pe)||function(Ae){return!!z&&z in Ae}(pe))&&(Ce(pe)||K(pe)?W:y).test(ye(pe))}function Xt(pe){return typeof pe=="function"?pe:pe==null?ur:typeof pe=="object"?at(pe)?function(Je,Ct){return xe(Je)&&Ee(Ct)?qe(he(Je),Ct):function(We){var ot=function(Jt,Ft,Tt){var At=Jt==null?void 0:pt(Jt,Ft);return At===void 0?Tt:At}(We,Je);return ot===void 0&&ot===Ct?function(Jt,Ft){return Jt!=null&&function(Tt,At,xr){At=xe(At,Tt)?[At]:Rt(At);for(var vr,rr=-1,Dr=At.length;++rr<Dr;){var Jr=he(At[rr]);if(!(vr=Tt!=null&&xr(Tt,Jr)))break;Tt=Tt[Jr]}return vr||!!(Dr=Tt?Tt.length:0)&&vt(Dr)&&be(Jr,Dr)&&(at(Tt)||He(Tt))}(Jt,Ft,Qt)}(We,Je):sr(Ct,ot,void 0,3)}}(pe[0],pe[1]):function(Je){var Ct=function(We){for(var ot=ar(We),Jt=ot.length;Jt--;){var Ft=ot[Jt],Tt=We[Ft];ot[Jt]=[Ft,Tt,Ee(Tt)]}return ot}(Je);return Ct.length==1&&Ct[0][2]?qe(Ct[0][0],Ct[0][1]):function(We){return We===Je||function(ot,Jt,Ft,Tt){var At=Ft.length,xr=At;if(ot==null)return!xr;for(ot=Object(ot);At--;){var vr=Ft[At];if(vr[2]?vr[1]!==ot[vr[0]]:!(vr[0]in ot))return!1}for(;++At<xr;){var rr=(vr=Ft[At])[0],Dr=ot[rr],Jr=vr[1];if(vr[2]){if(Dr===void 0&&!(rr in ot))return!1}else{var en=new ct,Pn;if(!(Pn===void 0?sr(Jr,Dr,Tt,3,en):Pn))return!1}}return!0}(We,Je,Ct)}}(pe):xe(Ae=pe)?(Ge=he(Ae),function(Je){return Je?.[Ge]}):function(Je){return function(Ct){return pt(Ct,Je)}}(Ae);var Ae,Ge}function kt(pe){if(Ge=(Ae=pe)&&Ae.constructor,Je=typeof Ge=="function"&&Ge.prototype||O,Ae!==Je)return se(pe);var Ae,Ge,Je,Ct=[];for(var We in Object(pe))Z.call(pe,We)&&We!="constructor"&&Ct.push(We);return Ct}function Rt(pe){return at(pe)?pe:Oe(pe)}function $t(pe,Ae,Ge,Je,Ct,We){var ot=2&Ct,Jt=pe.length,Ft=Ae.length;if(Jt!=Ft&&!(ot&&Ft>Jt))return!1;var Tt=We.get(pe);if(Tt&&We.get(Ae))return Tt==Ae;var At=-1,xr=!0,vr=1&Ct?new Be:void 0;for(We.set(pe,Ae),We.set(Ae,pe);++At<Jt;){var rr=pe[At],Dr=Ae[At];if(Je)var Jr=ot?Je(Dr,rr,At,Ae,pe,We):Je(rr,Dr,At,pe,Ae,We);if(Jr!==void 0){if(Jr)continue;xr=!1;break}if(vr){if(!Q(Ae,function(en,Pn){if(!vr.has(Pn)&&(rr===en||Ge(rr,en,Je,Ct,We)))return vr.add(Pn)})){xr=!1;break}}else if(rr!==Dr&&!Ge(rr,Dr,Je,Ct,We)){xr=!1;break}}return We.delete(pe),We.delete(Ae),xr}function Ht(pe,Ae){var Ge,Je,Ct=pe.__data__;return((Je=typeof(Ge=Ae))=="string"||Je=="number"||Je=="symbol"||Je=="boolean"?Ge!=="__proto__":Ge===null)?Ct[typeof Ae=="string"?"string":"hash"]:Ct.map}function xt(pe,Ae){var Ge=function(Je,Ct){return Je?.[Ct]}(pe,Ae);return Ot(Ge)?Ge:void 0}var Mt=function(pe){return ee.call(pe)};function be(pe,Ae){return!!(Ae=Ae??9007199254740991)&&(typeof pe=="number"||g.test(pe))&&pe>-1&&pe%1==0&&pe<Ae}function xe(pe,Ae){if(at(pe))return!1;var Ge=typeof pe;return!(Ge!="number"&&Ge!="symbol"&&Ge!="boolean"&&pe!=null&&!dr(pe))||h.test(pe)||!u.test(pe)||Ae!=null&&pe in Object(Ae)}function Ee(pe){return pe==pe&&!mt(pe)}function qe(pe,Ae){return function(Ge){return Ge!=null&&Ge[pe]===Ae&&(Ae!==void 0||pe in Object(Ge))}}(oe&&Mt(new oe(new ArrayBuffer(1)))!="[object DataView]"||ae&&Mt(new ae)!=d||ce&&Mt(ce.resolve())!="[object Promise]"||we&&Mt(new we)!=a||fe&&Mt(new fe)!="[object WeakMap]")&&(Mt=function(pe){var Ae=ee.call(pe),Ge=Ae==c?pe.constructor:void 0,Je=Ge?ye(Ge):void 0;if(Je)switch(Je){case ge:return"[object DataView]";case le:return d;case te:return"[object Promise]";case ie:return a;case ue:return"[object WeakMap]"}return Ae});var Oe=nt(function(pe){var Ae;pe=(Ae=pe)==null?"":function(Je){if(typeof Je=="string")return Je;if(dr(Je))return ke?ke.call(Je):"";var Ct=Je+"";return Ct=="0"&&1/Je==-1/0?"-0":Ct}(Ae);var Ge=[];return f.test(pe)&&Ge.push(""),pe.replace(m,function(Je,Ct,We,ot){Ge.push(We?ot.replace(b,"$1"):Ct||Je)}),Ge});function he(pe){if(typeof pe=="string"||dr(pe))return pe;var Ae=pe+"";return Ae=="0"&&1/pe==-1/0?"-0":Ae}function ye(pe){if(pe!=null){try{return G.call(pe)}catch{}try{return pe+""}catch{}}return""}var Te,Fe=(Te=function(pe,Ae,Ge){Z.call(pe,Ge)?pe[Ge].push(Ae):pe[Ge]=[Ae]},function(pe,Ae){var Ge=at(pe)?U:ut,Je={};return Ge(pe,Te,Xt(Ae),Je)});function nt(pe,Ae){if(typeof pe!="function"||Ae&&typeof Ae!="function")throw new TypeError("Expected a function");var Ge=function(){var Je=arguments,Ct=Ae?Ae.apply(this,Je):Je[0],We=Ge.cache;if(We.has(Ct))return We.get(Ct);var ot=pe.apply(this,Je);return Ge.cache=We.set(Ct,ot),ot};return Ge.cache=new(nt.Cache||Qe),Ge}function me(pe,Ae){return pe===Ae||pe!=pe&&Ae!=Ae}function He(pe){return function(Ae){return Ut(Ae)&&Ze(Ae)}(pe)&&Z.call(pe,"callee")&&(!q.call(pe,"callee")||ee.call(pe)==o)}nt.Cache=Qe;var at=Array.isArray;function Ze(pe){return pe!=null&&vt(pe.length)&&!Ce(pe)}function Ce(pe){var Ae=mt(pe)?ee.call(pe):"";return Ae=="[object Function]"||Ae=="[object GeneratorFunction]"}function vt(pe){return typeof pe=="number"&&pe>-1&&pe%1==0&&pe<=9007199254740991}function mt(pe){var Ae=typeof pe;return!!pe&&(Ae=="object"||Ae=="function")}function Ut(pe){return!!pe&&typeof pe=="object"}function dr(pe){return typeof pe=="symbol"||Ut(pe)&&ee.call(pe)=="[object Symbol]"}var jr=B?function(pe){return function(Ae){return pe(Ae)}}(B):function(pe){return Ut(pe)&&vt(pe.length)&&!!w[ee.call(pe)]};function ar(pe){return Ze(pe)?ft(pe):kt(pe)}function ur(pe){return pe}s.exports=Fe}).call(this)}).call(this,typeof mr<"u"?mr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],444:[function(t,s,l){var i=Object.prototype.toString;s.exports=function(o){return o===!0||o===!1||function(d){return!!d&&typeof d=="object"}(o)&&i.call(o)=="[object Boolean]"}},{}],445:[function(t,s,l){(function(i){(function(){var o="[object Arguments]",d="[object Map]",c="[object Object]",a="[object Set]",u=/^\[object .+?Constructor\]$/,h=/^(?:0|[1-9]\d*)$/,f={};f["[object Float32Array]"]=f["[object Float64Array]"]=f["[object Int8Array]"]=f["[object Int16Array]"]=f["[object Int32Array]"]=f["[object Uint8Array]"]=f["[object Uint8ClampedArray]"]=f["[object Uint16Array]"]=f["[object Uint32Array]"]=!0,f[o]=f["[object Array]"]=f["[object ArrayBuffer]"]=f["[object Boolean]"]=f["[object DataView]"]=f["[object Date]"]=f["[object Error]"]=f["[object Function]"]=f[d]=f["[object Number]"]=f[c]=f["[object RegExp]"]=f[a]=f["[object String]"]=f["[object WeakMap]"]=!1;var m=typeof i=="object"&&i&&i.Object===Object&&i,b=typeof self=="object"&&self&&self.Object===Object&&self,y=m||b||Function("return this")(),g=typeof l=="object"&&l&&!l.nodeType&&l,w=g&&typeof s=="object"&&s&&!s.nodeType&&s,x=w&&w.exports===g,_=x&&m.process,j=function(){try{return _&&_.binding&&_.binding("util")}catch{}}(),R=j&&j.isTypedArray;function M(he,ye){for(var Te=-1,Fe=he==null?0:he.length;++Te<Fe;)if(ye(he[Te],Te,he))return!0;return!1}function I(he){var ye=-1,Te=Array(he.size);return he.forEach(function(Fe,nt){Te[++ye]=[nt,Fe]}),Te}function F(he){var ye=-1,Te=Array(he.size);return he.forEach(function(Fe){Te[++ye]=Fe}),Te}var B,U,Q,K=Array.prototype,T=Function.prototype,P=Object.prototype,A=y["__core-js_shared__"],N=T.toString,k=P.hasOwnProperty,S=(B=/[^.]+$/.exec(A&&A.keys&&A.keys.IE_PROTO||""))?"Symbol(src)_1."+B:"",E=P.toString,O=RegExp("^"+N.call(k).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),L=x?y.Buffer:void 0,z=y.Symbol,G=y.Uint8Array,Z=P.propertyIsEnumerable,ee=K.splice,W=z?z.toStringTag:void 0,J=Object.getOwnPropertySymbols,$=L?L.isBuffer:void 0,q=(U=Object.keys,Q=Object,function(he){return U(Q(he))}),Y=Qt(y,"DataView"),se=Qt(y,"Map"),oe=Qt(y,"Promise"),ae=Qt(y,"Set"),ce=Qt(y,"WeakMap"),we=Qt(Object,"create"),fe=kt(Y),re=kt(se),ge=kt(oe),le=kt(ae),te=kt(ce),ie=z?z.prototype:void 0,ue=ie?ie.valueOf:void 0;function _e(he){var ye=-1,Te=he==null?0:he.length;for(this.clear();++ye<Te;){var Fe=he[ye];this.set(Fe[0],Fe[1])}}function je(he){var ye=-1,Te=he==null?0:he.length;for(this.clear();++ye<Te;){var Fe=he[ye];this.set(Fe[0],Fe[1])}}function ke(he){var ye=-1,Te=he==null?0:he.length;for(this.clear();++ye<Te;){var Fe=he[ye];this.set(Fe[0],Fe[1])}}function Le(he){var ye=-1,Te=he==null?0:he.length;for(this.__data__=new ke;++ye<Te;)this.add(he[ye])}function Ue(he){var ye=this.__data__=new je(he);this.size=ye.size}function Qe(he,ye){var Te=Ht(he),Fe=!Te&&$t(he),nt=!Te&&!Fe&&xt(he),me=!Te&&!Fe&&!nt&&qe(he),He=Te||Fe||nt||me,at=He?function(vt,mt){for(var Ut=-1,dr=Array(vt);++Ut<vt;)dr[Ut]=mt(Ut);return dr}(he.length,String):[],Ze=at.length;for(var Ce in he)!k.call(he,Ce)||He&&(Ce=="length"||nt&&(Ce=="offset"||Ce=="parent")||me&&(Ce=="buffer"||Ce=="byteLength"||Ce=="byteOffset")||Xt(Ce,Ze))||at.push(Ce);return at}function Be(he,ye){for(var Te=he.length;Te--;)if(Rt(he[Te][0],ye))return Te;return-1}function ct(he){return he==null?he===void 0?"[object Undefined]":"[object Null]":W&&W in Object(he)?function(ye){var Te=k.call(ye,W),Fe=ye[W];try{ye[W]=void 0;var nt=!0}catch{}var me=E.call(ye);return nt&&(Te?ye[W]=Fe:delete ye[W]),me}(he):function(ye){return E.call(ye)}(he)}function ft(he){return Ee(he)&&ct(he)==o}function _t(he,ye,Te,Fe,nt){return he===ye||(he==null||ye==null||!Ee(he)&&!Ee(ye)?he!=he&&ye!=ye:function(me,He,at,Ze,Ce,vt){var mt=Ht(me),Ut=Ht(He),dr=mt?"[object Array]":Ot(me),jr=Ut?"[object Array]":Ot(He),ar=(dr=dr==o?c:dr)==c,ur=(jr=jr==o?c:jr)==c,pe=dr==jr;if(pe&&xt(me)){if(!xt(He))return!1;mt=!0,ar=!1}if(pe&&!ar)return vt||(vt=new Ue),mt||qe(me)?ht(me,He,at,Ze,Ce,vt):function(We,ot,Jt,Ft,Tt,At,xr){switch(Jt){case"[object DataView]":if(We.byteLength!=ot.byteLength||We.byteOffset!=ot.byteOffset)return!1;We=We.buffer,ot=ot.buffer;case"[object ArrayBuffer]":return!(We.byteLength!=ot.byteLength||!At(new G(We),new G(ot)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Rt(+We,+ot);case"[object Error]":return We.name==ot.name&&We.message==ot.message;case"[object RegExp]":case"[object String]":return We==ot+"";case d:var vr=I;case a:var rr=1&Ft;if(vr||(vr=F),We.size!=ot.size&&!rr)return!1;var Dr=xr.get(We);if(Dr)return Dr==ot;Ft|=2,xr.set(We,ot);var Jr=ht(vr(We),vr(ot),Ft,Tt,At,xr);return xr.delete(We),Jr;case"[object Symbol]":if(ue)return ue.call(We)==ue.call(ot)}return!1}(me,He,dr,at,Ze,Ce,vt);if(!(1&at)){var Ae=ar&&k.call(me,"__wrapped__"),Ge=ur&&k.call(He,"__wrapped__");if(Ae||Ge){var Je=Ae?me.value():me,Ct=Ge?He.value():He;return vt||(vt=new Ue),Ce(Je,Ct,at,Ze,vt)}}return pe?(vt||(vt=new Ue),function(We,ot,Jt,Ft,Tt,At){var xr=1&Jt,vr=jt(We),rr=vr.length,Dr=jt(ot).length;if(rr!=Dr&&!xr)return!1;for(var Jr=rr;Jr--;){var en=vr[Jr];if(!(xr?en in ot:k.call(ot,en)))return!1}var Pn=At.get(We);if(Pn&&At.get(ot))return Pn==ot;var ns=!0;At.set(We,ot),At.set(ot,We);for(var In=xr;++Jr<rr;){en=vr[Jr];var Se=We[en],dt=ot[en];if(Ft)var rt=xr?Ft(dt,Se,en,ot,We,At):Ft(Se,dt,en,We,ot,At);if(!(rt===void 0?Se===dt||Tt(Se,dt,Jt,Ft,At):rt)){ns=!1;break}In||(In=en=="constructor")}if(ns&&!In){var Ke=We.constructor,Dt=ot.constructor;Ke==Dt||!("constructor"in We)||!("constructor"in ot)||typeof Ke=="function"&&Ke instanceof Ke&&typeof Dt=="function"&&Dt instanceof Dt||(ns=!1)}return At.delete(We),At.delete(ot),ns}(me,He,at,Ze,Ce,vt)):!1}(he,ye,Te,Fe,_t,nt))}function ut(he){return!(!xe(he)||function(ye){return!!S&&S in ye}(he))&&(Mt(he)?O:u).test(kt(he))}function lt(he){if(Te=(ye=he)&&ye.constructor,Fe=typeof Te=="function"&&Te.prototype||P,ye!==Fe)return q(he);var ye,Te,Fe,nt=[];for(var me in Object(he))k.call(he,me)&&me!="constructor"&&nt.push(me);return nt}function ht(he,ye,Te,Fe,nt,me){var He=1&Te,at=he.length,Ze=ye.length;if(at!=Ze&&!(He&&Ze>at))return!1;var Ce=me.get(he);if(Ce&&me.get(ye))return Ce==ye;var vt=-1,mt=!0,Ut=2&Te?new Le:void 0;for(me.set(he,ye),me.set(ye,he);++vt<at;){var dr=he[vt],jr=ye[vt];if(Fe)var ar=He?Fe(jr,dr,vt,ye,he,me):Fe(dr,jr,vt,he,ye,me);if(ar!==void 0){if(ar)continue;mt=!1;break}if(Ut){if(!M(ye,function(ur,pe){if(Ae=pe,!Ut.has(Ae)&&(dr===ur||nt(dr,ur,Te,Fe,me)))return Ut.push(pe);var Ae})){mt=!1;break}}else if(dr!==jr&&!nt(dr,jr,Te,Fe,me)){mt=!1;break}}return me.delete(he),me.delete(ye),mt}function jt(he){return function(ye,Te,Fe){var nt=Te(ye);return Ht(ye)?nt:function(me,He){for(var at=-1,Ze=He.length,Ce=me.length;++at<Ze;)me[Ce+at]=He[at];return me}(nt,Fe(ye))}(he,Oe,sr)}function pt(he,ye){var Te,Fe,nt=he.__data__;return((Fe=typeof(Te=ye))=="string"||Fe=="number"||Fe=="symbol"||Fe=="boolean"?Te!=="__proto__":Te===null)?nt[typeof ye=="string"?"string":"hash"]:nt.map}function Qt(he,ye){var Te=function(Fe,nt){return Fe?.[nt]}(he,ye);return ut(Te)?Te:void 0}_e.prototype.clear=function(){this.__data__=we?we(null):{},this.size=0},_e.prototype.delete=function(he){var ye=this.has(he)&&delete this.__data__[he];return this.size-=ye?1:0,ye},_e.prototype.get=function(he){var ye=this.__data__;if(we){var Te=ye[he];return Te==="__lodash_hash_undefined__"?void 0:Te}return k.call(ye,he)?ye[he]:void 0},_e.prototype.has=function(he){var ye=this.__data__;return we?ye[he]!==void 0:k.call(ye,he)},_e.prototype.set=function(he,ye){var Te=this.__data__;return this.size+=this.has(he)?0:1,Te[he]=we&&ye===void 0?"__lodash_hash_undefined__":ye,this},je.prototype.clear=function(){this.__data__=[],this.size=0},je.prototype.delete=function(he){var ye=this.__data__,Te=Be(ye,he);return!(Te<0)&&(Te==ye.length-1?ye.pop():ee.call(ye,Te,1),--this.size,!0)},je.prototype.get=function(he){var ye=this.__data__,Te=Be(ye,he);return Te<0?void 0:ye[Te][1]},je.prototype.has=function(he){return Be(this.__data__,he)>-1},je.prototype.set=function(he,ye){var Te=this.__data__,Fe=Be(Te,he);return Fe<0?(++this.size,Te.push([he,ye])):Te[Fe][1]=ye,this},ke.prototype.clear=function(){this.size=0,this.__data__={hash:new _e,map:new(se||je),string:new _e}},ke.prototype.delete=function(he){var ye=pt(this,he).delete(he);return this.size-=ye?1:0,ye},ke.prototype.get=function(he){return pt(this,he).get(he)},ke.prototype.has=function(he){return pt(this,he).has(he)},ke.prototype.set=function(he,ye){var Te=pt(this,he),Fe=Te.size;return Te.set(he,ye),this.size+=Te.size==Fe?0:1,this},Le.prototype.add=Le.prototype.push=function(he){return this.__data__.set(he,"__lodash_hash_undefined__"),this},Le.prototype.has=function(he){return this.__data__.has(he)},Ue.prototype.clear=function(){this.__data__=new je,this.size=0},Ue.prototype.delete=function(he){var ye=this.__data__,Te=ye.delete(he);return this.size=ye.size,Te},Ue.prototype.get=function(he){return this.__data__.get(he)},Ue.prototype.has=function(he){return this.__data__.has(he)},Ue.prototype.set=function(he,ye){var Te=this.__data__;if(Te instanceof je){var Fe=Te.__data__;if(!se||Fe.length<199)return Fe.push([he,ye]),this.size=++Te.size,this;Te=this.__data__=new ke(Fe)}return Te.set(he,ye),this.size=Te.size,this};var sr=J?function(he){return he==null?[]:(he=Object(he),function(ye,Te){for(var Fe=-1,nt=ye==null?0:ye.length,me=0,He=[];++Fe<nt;){var at=ye[Fe];Te(at,Fe,ye)&&(He[me++]=at)}return He}(J(he),function(ye){return Z.call(he,ye)}))}:function(){return[]},Ot=ct;function Xt(he,ye){return!!(ye=ye??9007199254740991)&&(typeof he=="number"||h.test(he))&&he>-1&&he%1==0&&he<ye}function kt(he){if(he!=null){try{return N.call(he)}catch{}try{return he+""}catch{}}return""}function Rt(he,ye){return he===ye||he!=he&&ye!=ye}(Y&&Ot(new Y(new ArrayBuffer(1)))!="[object DataView]"||se&&Ot(new se)!=d||oe&&Ot(oe.resolve())!="[object Promise]"||ae&&Ot(new ae)!=a||ce&&Ot(new ce)!="[object WeakMap]")&&(Ot=function(he){var ye=ct(he),Te=ye==c?he.constructor:void 0,Fe=Te?kt(Te):"";if(Fe)switch(Fe){case fe:return"[object DataView]";case re:return d;case ge:return"[object Promise]";case le:return a;case te:return"[object WeakMap]"}return ye});var $t=ft(function(){return arguments}())?ft:function(he){return Ee(he)&&k.call(he,"callee")&&!Z.call(he,"callee")},Ht=Array.isArray,xt=$||function(){return!1};function Mt(he){if(!xe(he))return!1;var ye=ct(he);return ye=="[object Function]"||ye=="[object GeneratorFunction]"||ye=="[object AsyncFunction]"||ye=="[object Proxy]"}function be(he){return typeof he=="number"&&he>-1&&he%1==0&&he<=9007199254740991}function xe(he){var ye=typeof he;return he!=null&&(ye=="object"||ye=="function")}function Ee(he){return he!=null&&typeof he=="object"}var qe=R?function(he){return function(ye){return he(ye)}}(R):function(he){return Ee(he)&&be(he.length)&&!!f[ct(he)]};function Oe(he){return(ye=he)!=null&&be(ye.length)&&!Mt(ye)?Qe(he):lt(he);var ye}s.exports=function(he,ye){return _t(he,ye)}}).call(this)}).call(this,typeof mr<"u"?mr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],446:[function(t,s,l){(function(i){(function(){var o=typeof i=="object"&&i&&i.Object===Object&&i,d=typeof self=="object"&&self&&self.Object===Object&&self,c=o||d||Function("return this")(),a=Object.prototype,u=a.hasOwnProperty,h=a.toString,f=c.Symbol,m=f?f.toStringTag:void 0;function b(y){return y==null?y===void 0?"[object Undefined]":"[object Null]":m&&m in Object(y)?function(g){var w=u.call(g,m),x=g[m];try{g[m]=void 0;var _=!0}catch{}var j=h.call(g);return _&&(w?g[m]=x:delete g[m]),j}(y):function(g){return h.call(g)}(y)}s.exports=function(y){if(!function(w){var x=typeof w;return w!=null&&(x=="object"||x=="function")}(y))return!1;var g=b(y);return g=="[object Function]"||g=="[object GeneratorFunction]"||g=="[object AsyncFunction]"||g=="[object Proxy]"}}).call(this)}).call(this,typeof mr<"u"?mr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],447:[function(t,s,l){s.exports=function(i){return i==null}},{}],448:[function(t,s,l){s.exports=function(i){return i===void 0}},{}],449:[function(t,s,l){(function(i){(function(){var o=/^\[object .+?Constructor\]$/,d=typeof i=="object"&&i&&i.Object===Object&&i,c=typeof self=="object"&&self&&self.Object===Object&&self,a=d||c||Function("return this")();function u(z,G){return!!(z&&z.length)&&function(Z,ee,W){if(ee!=ee)return function(q,Y,se,oe){for(var ae=q.length,ce=se+-1;++ce<ae;)if(Y(q[ce],ce,q))return ce;return-1}(Z,h,W);for(var J=W-1,$=Z.length;++J<$;)if(Z[J]===ee)return J;return-1}(z,G,0)>-1}function h(z){return z!=z}function f(z,G){return z.has(G)}function m(z){var G=-1,Z=Array(z.size);return z.forEach(function(ee){Z[++G]=ee}),Z}var b,y=Array.prototype,g=Function.prototype,w=Object.prototype,x=a["__core-js_shared__"],_=(b=/[^.]+$/.exec(x&&x.keys&&x.keys.IE_PROTO||""))?"Symbol(src)_1."+b:"",j=g.toString,R=w.hasOwnProperty,M=w.toString,I=RegExp("^"+j.call(R).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),F=y.splice,B=O(a,"Map"),U=O(a,"Set"),Q=O(Object,"create");function K(z){var G=-1,Z=z?z.length:0;for(this.clear();++G<Z;){var ee=z[G];this.set(ee[0],ee[1])}}function T(z){var G=-1,Z=z?z.length:0;for(this.clear();++G<Z;){var ee=z[G];this.set(ee[0],ee[1])}}function P(z){var G=-1,Z=z?z.length:0;for(this.clear();++G<Z;){var ee=z[G];this.set(ee[0],ee[1])}}function A(z){var G=-1,Z=z?z.length:0;for(this.__data__=new P;++G<Z;)this.add(z[G])}function N(z,G){for(var Z,ee,W=z.length;W--;)if((Z=z[W][0])===(ee=G)||Z!=Z&&ee!=ee)return W;return-1}function k(z){return!(!L(z)||(G=z,_&&_ in G))&&(function(Z){var ee=L(Z)?M.call(Z):"";return ee=="[object Function]"||ee=="[object GeneratorFunction]"}(z)||function(Z){var ee=!1;if(Z!=null&&typeof Z.toString!="function")try{ee=!!(Z+"")}catch{}return ee}(z)?I:o).test(function(Z){if(Z!=null){try{return j.call(Z)}catch{}try{return Z+""}catch{}}return""}(z));var G}K.prototype.clear=function(){this.__data__=Q?Q(null):{}},K.prototype.delete=function(z){return this.has(z)&&delete this.__data__[z]},K.prototype.get=function(z){var G=this.__data__;if(Q){var Z=G[z];return Z==="__lodash_hash_undefined__"?void 0:Z}return R.call(G,z)?G[z]:void 0},K.prototype.has=function(z){var G=this.__data__;return Q?G[z]!==void 0:R.call(G,z)},K.prototype.set=function(z,G){return this.__data__[z]=Q&&G===void 0?"__lodash_hash_undefined__":G,this},T.prototype.clear=function(){this.__data__=[]},T.prototype.delete=function(z){var G=this.__data__,Z=N(G,z);return!(Z<0)&&(Z==G.length-1?G.pop():F.call(G,Z,1),!0)},T.prototype.get=function(z){var G=this.__data__,Z=N(G,z);return Z<0?void 0:G[Z][1]},T.prototype.has=function(z){return N(this.__data__,z)>-1},T.prototype.set=function(z,G){var Z=this.__data__,ee=N(Z,z);return ee<0?Z.push([z,G]):Z[ee][1]=G,this},P.prototype.clear=function(){this.__data__={hash:new K,map:new(B||T),string:new K}},P.prototype.delete=function(z){return E(this,z).delete(z)},P.prototype.get=function(z){return E(this,z).get(z)},P.prototype.has=function(z){return E(this,z).has(z)},P.prototype.set=function(z,G){return E(this,z).set(z,G),this},A.prototype.add=A.prototype.push=function(z){return this.__data__.set(z,"__lodash_hash_undefined__"),this},A.prototype.has=function(z){return this.__data__.has(z)};var S=U&&1/m(new U([,-0]))[1]==1/0?function(z){return new U(z)}:function(){};function E(z,G){var Z,ee,W=z.__data__;return((ee=typeof(Z=G))=="string"||ee=="number"||ee=="symbol"||ee=="boolean"?Z!=="__proto__":Z===null)?W[typeof G=="string"?"string":"hash"]:W.map}function O(z,G){var Z=function(ee,W){return ee?.[W]}(z,G);return k(Z)?Z:void 0}function L(z){var G=typeof z;return!!z&&(G=="object"||G=="function")}s.exports=function(z){return z&&z.length?function(G,Z,ee){var W=-1,J=u,$=G.length,q=!0,Y=[],se=Y;if($>=200){var oe=S(G);if(oe)return m(oe);q=!1,J=f,se=new A}else se=Y;e:for(;++W<$;){var ae=G[W],ce=ae;if(ae=ae!==0?ae:0,q&&ce==ce){for(var we=se.length;we--;)if(se[we]===ce)continue e;Y.push(ae)}else J(se,ce,ee)||(se!==Y&&se.push(ce),Y.push(ae))}return Y}(z):[]}}).call(this)}).call(this,typeof mr<"u"?mr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],450:[function(t,s,l){var i=t("inherits"),o=t("hash-base"),d=t("safe-buffer").Buffer,c=new Array(16);function a(){o.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function u(y,g){return y<<g|y>>>32-g}function h(y,g,w,x,_,j,R){return u(y+(g&w|~g&x)+_+j|0,R)+g|0}function f(y,g,w,x,_,j,R){return u(y+(g&x|w&~x)+_+j|0,R)+g|0}function m(y,g,w,x,_,j,R){return u(y+(g^w^x)+_+j|0,R)+g|0}function b(y,g,w,x,_,j,R){return u(y+(w^(g|~x))+_+j|0,R)+g|0}i(a,o),a.prototype._update=function(){for(var y=c,g=0;g<16;++g)y[g]=this._block.readInt32LE(4*g);var w=this._a,x=this._b,_=this._c,j=this._d;w=h(w,x,_,j,y[0],3614090360,7),j=h(j,w,x,_,y[1],3905402710,12),_=h(_,j,w,x,y[2],606105819,17),x=h(x,_,j,w,y[3],3250441966,22),w=h(w,x,_,j,y[4],4118548399,7),j=h(j,w,x,_,y[5],1200080426,12),_=h(_,j,w,x,y[6],2821735955,17),x=h(x,_,j,w,y[7],4249261313,22),w=h(w,x,_,j,y[8],1770035416,7),j=h(j,w,x,_,y[9],2336552879,12),_=h(_,j,w,x,y[10],4294925233,17),x=h(x,_,j,w,y[11],2304563134,22),w=h(w,x,_,j,y[12],1804603682,7),j=h(j,w,x,_,y[13],4254626195,12),_=h(_,j,w,x,y[14],2792965006,17),w=f(w,x=h(x,_,j,w,y[15],1236535329,22),_,j,y[1],4129170786,5),j=f(j,w,x,_,y[6],3225465664,9),_=f(_,j,w,x,y[11],643717713,14),x=f(x,_,j,w,y[0],3921069994,20),w=f(w,x,_,j,y[5],3593408605,5),j=f(j,w,x,_,y[10],38016083,9),_=f(_,j,w,x,y[15],3634488961,14),x=f(x,_,j,w,y[4],3889429448,20),w=f(w,x,_,j,y[9],568446438,5),j=f(j,w,x,_,y[14],3275163606,9),_=f(_,j,w,x,y[3],4107603335,14),x=f(x,_,j,w,y[8],1163531501,20),w=f(w,x,_,j,y[13],2850285829,5),j=f(j,w,x,_,y[2],4243563512,9),_=f(_,j,w,x,y[7],1735328473,14),w=m(w,x=f(x,_,j,w,y[12],2368359562,20),_,j,y[5],4294588738,4),j=m(j,w,x,_,y[8],2272392833,11),_=m(_,j,w,x,y[11],1839030562,16),x=m(x,_,j,w,y[14],4259657740,23),w=m(w,x,_,j,y[1],2763975236,4),j=m(j,w,x,_,y[4],1272893353,11),_=m(_,j,w,x,y[7],4139469664,16),x=m(x,_,j,w,y[10],3200236656,23),w=m(w,x,_,j,y[13],681279174,4),j=m(j,w,x,_,y[0],3936430074,11),_=m(_,j,w,x,y[3],3572445317,16),x=m(x,_,j,w,y[6],76029189,23),w=m(w,x,_,j,y[9],3654602809,4),j=m(j,w,x,_,y[12],3873151461,11),_=m(_,j,w,x,y[15],530742520,16),w=b(w,x=m(x,_,j,w,y[2],3299628645,23),_,j,y[0],4096336452,6),j=b(j,w,x,_,y[7],1126891415,10),_=b(_,j,w,x,y[14],2878612391,15),x=b(x,_,j,w,y[5],4237533241,21),w=b(w,x,_,j,y[12],1700485571,6),j=b(j,w,x,_,y[3],2399980690,10),_=b(_,j,w,x,y[10],4293915773,15),x=b(x,_,j,w,y[1],2240044497,21),w=b(w,x,_,j,y[8],1873313359,6),j=b(j,w,x,_,y[15],4264355552,10),_=b(_,j,w,x,y[6],2734768916,15),x=b(x,_,j,w,y[13],1309151649,21),w=b(w,x,_,j,y[4],4149444226,6),j=b(j,w,x,_,y[11],3174756917,10),_=b(_,j,w,x,y[2],718787259,15),x=b(x,_,j,w,y[9],3951481745,21),this._a=this._a+w|0,this._b=this._b+x|0,this._c=this._c+_|0,this._d=this._d+j|0},a.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var y=d.allocUnsafe(16);return y.writeInt32LE(this._a,0),y.writeInt32LE(this._b,4),y.writeInt32LE(this._c,8),y.writeInt32LE(this._d,12),y},s.exports=a},{"hash-base":425,inherits:440,"safe-buffer":494}],451:[function(t,s,l){var i=t("bn.js"),o=t("brorand");function d(c){this.rand=c||new o.Rand}s.exports=d,d.create=function(c){return new d(c)},d.prototype._randbelow=function(c){var a=c.bitLength(),u=Math.ceil(a/8);do var h=new i(this.rand.generate(u));while(h.cmp(c)>=0);return h},d.prototype._randrange=function(c,a){var u=a.sub(c);return c.add(this._randbelow(u))},d.prototype.test=function(c,a,u){var h=c.bitLength(),f=i.mont(c),m=new i(1).toRed(f);a||(a=Math.max(1,h/48|0));for(var b=c.subn(1),y=0;!b.testn(y);y++);for(var g=c.shrn(y),w=b.toRed(f);a>0;a--){var x=this._randrange(new i(2),b);u&&u(x);var _=x.toRed(f).redPow(g);if(_.cmp(m)!==0&&_.cmp(w)!==0){for(var j=1;j<y;j++){if((_=_.redSqr()).cmp(m)===0)return!1;if(_.cmp(w)===0)break}if(j===y)return!1}}return!0},d.prototype.getDivisor=function(c,a){var u=c.bitLength(),h=i.mont(c),f=new i(1).toRed(h);a||(a=Math.max(1,u/48|0));for(var m=c.subn(1),b=0;!m.testn(b);b++);for(var y=c.shrn(b),g=m.toRed(h);a>0;a--){var w=this._randrange(new i(2),m),x=c.gcd(w);if(x.cmpn(1)!==0)return x;var _=w.toRed(h).redPow(y);if(_.cmp(f)!==0&&_.cmp(g)!==0){for(var j=1;j<b;j++){if((_=_.redSqr()).cmp(f)===0)return _.fromRed().subn(1).gcd(c);if(_.cmp(g)===0)break}if(j===b)return(_=_.redSqr()).fromRed().subn(1).gcd(c)}}return!1}},{"bn.js":452,brorand:187}],452:[function(t,s,l){arguments[4][184][0].apply(l,arguments)},{buffer:188,dup:184}],453:[function(t,s,l){function i(o,d){if(!o)throw new Error(d||"Assertion failed")}s.exports=i,i.equal=function(o,d,c){if(o!=d)throw new Error(c||"Assertion failed: "+o+" != "+d)}},{}],454:[function(t,s,l){var i=l;function o(c){return c.length===1?"0"+c:c}function d(c){for(var a="",u=0;u<c.length;u++)a+=o(c[u].toString(16));return a}i.toArray=function(c,a){if(Array.isArray(c))return c.slice();if(!c)return[];var u=[];if(typeof c!="string"){for(var h=0;h<c.length;h++)u[h]=0|c[h];return u}if(a==="hex")for((c=c.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(c="0"+c),h=0;h<c.length;h+=2)u.push(parseInt(c[h]+c[h+1],16));else for(h=0;h<c.length;h++){var f=c.charCodeAt(h),m=f>>8,b=255&f;m?u.push(m,b):u.push(b)}return u},i.zero2=o,i.toHex=d,i.encode=function(c,a){return a==="hex"?d(c):c}},{}],455:[function(t,s,l){s.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}},{}],456:[function(t,s,l){var i=t("asn1.js");l.certificate=t("./certificate");var o=i.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});l.RSAPrivateKey=o;var d=i.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});l.RSAPublicKey=d;var c=i.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(a),this.key("subjectPublicKey").bitstr())});l.PublicKey=c;var a=i.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),u=i.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(a),this.key("subjectPrivateKey").octstr())});l.PrivateKey=u;var h=i.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});l.EncryptedPrivateKey=h;var f=i.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});l.DSAPrivateKey=f,l.DSAparam=i.define("DSAparam",function(){this.int()});var m=i.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(b),this.key("publicKey").optional().explicit(1).bitstr())});l.ECPrivateKey=m;var b=i.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});l.signature=i.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())})},{"./certificate":457,"asn1.js":170}],457:[function(t,s,l){var i=t("asn1.js"),o=i.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),d=i.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),c=i.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),a=i.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(c),this.key("subjectPublicKey").bitstr())}),u=i.define("RelativeDistinguishedName",function(){this.setof(d)}),h=i.define("RDNSequence",function(){this.seqof(u)}),f=i.define("Name",function(){this.choice({rdnSequence:this.use(h)})}),m=i.define("Validity",function(){this.seq().obj(this.key("notBefore").use(o),this.key("notAfter").use(o))}),b=i.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),y=i.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(c),this.key("issuer").use(f),this.key("validity").use(m),this.key("subject").use(f),this.key("subjectPublicKeyInfo").use(a),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(b).optional())}),g=i.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(y),this.key("signatureAlgorithm").use(c),this.key("signatureValue").bitstr())});s.exports=g},{"asn1.js":170}],458:[function(t,s,l){var i=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,o=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,d=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,c=t("evp_bytestokey"),a=t("browserify-aes"),u=t("safe-buffer").Buffer;s.exports=function(h,f){var m,b=h.toString(),y=b.match(i);if(y){var g="aes"+y[1],w=u.from(y[2],"hex"),x=u.from(y[3].replace(/[\r\n]/g,""),"base64"),_=c(f,w.slice(0,8),parseInt(y[1],10)).key,j=[],R=a.createDecipheriv(g,_,w);j.push(R.update(x)),j.push(R.final()),m=u.concat(j)}else{var M=b.match(d);m=u.from(M[2].replace(/[\r\n]/g,""),"base64")}return{tag:b.match(o)[1],data:m}}},{"browserify-aes":191,evp_bytestokey:423,"safe-buffer":494}],459:[function(t,s,l){var i=t("./asn1"),o=t("./aesid.json"),d=t("./fixProc"),c=t("browserify-aes"),a=t("pbkdf2"),u=t("safe-buffer").Buffer;function h(f){var m;typeof f!="object"||u.isBuffer(f)||(m=f.passphrase,f=f.key),typeof f=="string"&&(f=u.from(f));var b,y,g=d(f,m),w=g.tag,x=g.data;switch(w){case"CERTIFICATE":y=i.certificate.decode(x,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(y||(y=i.PublicKey.decode(x,"der")),b=y.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return i.RSAPublicKey.decode(y.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return y.subjectPrivateKey=y.subjectPublicKey,{type:"ec",data:y};case"1.2.840.10040.4.1":return y.algorithm.params.pub_key=i.DSAparam.decode(y.subjectPublicKey.data,"der"),{type:"dsa",data:y.algorithm.params};default:throw new Error("unknown key id "+b)}case"ENCRYPTED PRIVATE KEY":x=function(_,j){var R=_.algorithm.decrypt.kde.kdeparams.salt,M=parseInt(_.algorithm.decrypt.kde.kdeparams.iters.toString(),10),I=o[_.algorithm.decrypt.cipher.algo.join(".")],F=_.algorithm.decrypt.cipher.iv,B=_.subjectPrivateKey,U=parseInt(I.split("-")[1],10)/8,Q=a.pbkdf2Sync(j,R,M,U,"sha1"),K=c.createDecipheriv(I,Q,F),T=[];return T.push(K.update(B)),T.push(K.final()),u.concat(T)}(x=i.EncryptedPrivateKey.decode(x,"der"),m);case"PRIVATE KEY":switch(b=(y=i.PrivateKey.decode(x,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return i.RSAPrivateKey.decode(y.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:y.algorithm.curve,privateKey:i.ECPrivateKey.decode(y.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return y.algorithm.params.priv_key=i.DSAparam.decode(y.subjectPrivateKey,"der"),{type:"dsa",params:y.algorithm.params};default:throw new Error("unknown key id "+b)}case"RSA PUBLIC KEY":return i.RSAPublicKey.decode(x,"der");case"RSA PRIVATE KEY":return i.RSAPrivateKey.decode(x,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:i.DSAPrivateKey.decode(x,"der")};case"EC PRIVATE KEY":return{curve:(x=i.ECPrivateKey.decode(x,"der")).parameters.value,privateKey:x.privateKey};default:throw new Error("unknown key type "+w)}}s.exports=h,h.signature=i.signature},{"./aesid.json":455,"./asn1":456,"./fixProc":458,"browserify-aes":191,pbkdf2:460,"safe-buffer":494}],460:[function(t,s,l){l.pbkdf2=t("./lib/async"),l.pbkdf2Sync=t("./lib/sync")},{"./lib/async":461,"./lib/sync":464}],461:[function(t,s,l){(function(i){(function(){var o,d,c=t("safe-buffer").Buffer,a=t("./precondition"),u=t("./default-encoding"),h=t("./sync"),f=t("./to-buffer"),m=i.crypto&&i.crypto.subtle,b={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},y=[];function g(){return d||(d=i.process&&i.process.nextTick?i.process.nextTick:i.queueMicrotask?i.queueMicrotask:i.setImmediate?i.setImmediate:i.setTimeout)}function w(x,_,j,R,M){return m.importKey("raw",x,{name:"PBKDF2"},!1,["deriveBits"]).then(function(I){return m.deriveBits({name:"PBKDF2",salt:_,iterations:j,hash:{name:M}},I,R<<3)}).then(function(I){return c.from(I)})}s.exports=function(x,_,j,R,M,I){typeof M=="function"&&(I=M,M=void 0);var F=b[(M=M||"sha1").toLowerCase()];if(F&&typeof i.Promise=="function"){if(a(j,R),x=f(x,u,"Password"),_=f(_,u,"Salt"),typeof I!="function")throw new Error("No callback provided to pbkdf2");(function(B,U){B.then(function(Q){g()(function(){U(null,Q)})},function(Q){g()(function(){U(Q)})})})(function(B){if(i.process&&!i.process.browser||!m||!m.importKey||!m.deriveBits)return Promise.resolve(!1);if(y[B]!==void 0)return y[B];var U=w(o=o||c.alloc(8),o,10,128,B).then(function(){return!0}).catch(function(){return!1});return y[B]=U,U}(F).then(function(B){return B?w(x,_,j,R,F):h(x,_,j,R,M)}),I)}else g()(function(){var B;try{B=h(x,_,j,R,M)}catch(U){return I(U)}I(null,B)})}}).call(this)}).call(this,typeof mr<"u"?mr:typeof self<"u"?self:typeof window<"u"?window:{})},{"./default-encoding":462,"./precondition":463,"./sync":464,"./to-buffer":465,"safe-buffer":494}],462:[function(t,s,l){(function(i,o){(function(){var d;o.process&&o.process.browser?d="utf-8":o.process&&o.process.version?d=parseInt(i.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary":d="utf-8",s.exports=d}).call(this)}).call(this,t("_process"),typeof mr<"u"?mr:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:467}],463:[function(t,s,l){var i=Math.pow(2,30)-1;s.exports=function(o,d){if(typeof o!="number")throw new TypeError("Iterations not a number");if(o<0)throw new TypeError("Bad iterations");if(typeof d!="number")throw new TypeError("Key length not a number");if(d<0||d>i||d!=d)throw new TypeError("Bad key length")}},{}],464:[function(t,s,l){var i=t("create-hash/md5"),o=t("ripemd160"),d=t("sha.js"),c=t("safe-buffer").Buffer,a=t("./precondition"),u=t("./default-encoding"),h=t("./to-buffer"),f=c.alloc(128),m={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function b(y,g,w){var x=function(F){function B(U){return d(F).update(U).digest()}return F==="rmd160"||F==="ripemd160"?function(U){return new o().update(U).digest()}:F==="md5"?i:B}(y),_=y==="sha512"||y==="sha384"?128:64;g.length>_?g=x(g):g.length<_&&(g=c.concat([g,f],_));for(var j=c.allocUnsafe(_+m[y]),R=c.allocUnsafe(_+m[y]),M=0;M<_;M++)j[M]=54^g[M],R[M]=92^g[M];var I=c.allocUnsafe(_+w+4);j.copy(I,0,0,_),this.ipad1=I,this.ipad2=j,this.opad=R,this.alg=y,this.blocksize=_,this.hash=x,this.size=m[y]}b.prototype.run=function(y,g){return y.copy(g,this.blocksize),this.hash(g).copy(this.opad,this.blocksize),this.hash(this.opad)},s.exports=function(y,g,w,x,_){a(w,x);var j=new b(_=_||"sha1",y=h(y,u,"Password"),(g=h(g,u,"Salt")).length),R=c.allocUnsafe(x),M=c.allocUnsafe(g.length+4);g.copy(M,0,0,g.length);for(var I=0,F=m[_],B=Math.ceil(x/F),U=1;U<=B;U++){M.writeUInt32BE(U,g.length);for(var Q=j.run(M,j.ipad1),K=Q,T=1;T<w;T++){K=j.run(K,j.ipad2);for(var P=0;P<F;P++)Q[P]^=K[P]}Q.copy(R,I),I+=F}return R}},{"./default-encoding":462,"./precondition":463,"./to-buffer":465,"create-hash/md5":387,ripemd160:493,"safe-buffer":494,"sha.js":498}],465:[function(t,s,l){var i=t("safe-buffer").Buffer;s.exports=function(o,d,c){if(i.isBuffer(o))return o;if(typeof o=="string")return i.from(o,d);if(ArrayBuffer.isView(o))return i.from(o.buffer);throw new TypeError(c+" must be a string, a Buffer, a typed array or a DataView")}},{"safe-buffer":494}],466:[function(t,s,l){(function(i){(function(){i===void 0||!i.version||i.version.indexOf("v0.")===0||i.version.indexOf("v1.")===0&&i.version.indexOf("v1.8.")!==0?s.exports={nextTick:function(o,d,c,a){if(typeof o!="function")throw new TypeError('"callback" argument must be a function');var u,h,f=arguments.length;switch(f){case 0:case 1:return i.nextTick(o);case 2:return i.nextTick(function(){o.call(null,d)});case 3:return i.nextTick(function(){o.call(null,d,c)});case 4:return i.nextTick(function(){o.call(null,d,c,a)});default:for(u=new Array(f-1),h=0;h<u.length;)u[h++]=arguments[h];return i.nextTick(function(){o.apply(null,u)})}}}:s.exports=i}).call(this)}).call(this,t("_process"))},{_process:467}],467:[function(t,s,l){var i,o,d=s.exports={};function c(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(_){if(i===setTimeout)return setTimeout(_,0);if((i===c||!i)&&setTimeout)return i=setTimeout,setTimeout(_,0);try{return i(_,0)}catch{try{return i.call(null,_,0)}catch{return i.call(this,_,0)}}}(function(){try{i=typeof setTimeout=="function"?setTimeout:c}catch{i=c}try{o=typeof clearTimeout=="function"?clearTimeout:a}catch{o=a}})();var h,f=[],m=!1,b=-1;function y(){m&&h&&(m=!1,h.length?f=h.concat(f):b=-1,f.length&&g())}function g(){if(!m){var _=u(y);m=!0;for(var j=f.length;j;){for(h=f,f=[];++b<j;)h&&h[b].run();b=-1,j=f.length}h=null,m=!1,function(R){if(o===clearTimeout)return clearTimeout(R);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(R);try{o(R)}catch{try{return o.call(null,R)}catch{return o.call(this,R)}}}(_)}}function w(_,j){this.fun=_,this.array=j}function x(){}d.nextTick=function(_){var j=new Array(arguments.length-1);if(arguments.length>1)for(var R=1;R<arguments.length;R++)j[R-1]=arguments[R];f.push(new w(_,j)),f.length!==1||m||u(g)},w.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=x,d.addListener=x,d.once=x,d.off=x,d.removeListener=x,d.removeAllListeners=x,d.emit=x,d.prependListener=x,d.prependOnceListener=x,d.listeners=function(_){return[]},d.binding=function(_){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(_){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],468:[function(t,s,l){l.publicEncrypt=t("./publicEncrypt"),l.privateDecrypt=t("./privateDecrypt"),l.privateEncrypt=function(i,o){return l.publicEncrypt(i,o,!0)},l.publicDecrypt=function(i,o){return l.privateDecrypt(i,o,!0)}},{"./privateDecrypt":471,"./publicEncrypt":472}],469:[function(t,s,l){var i=t("create-hash"),o=t("safe-buffer").Buffer;function d(c){var a=o.allocUnsafe(4);return a.writeUInt32BE(c,0),a}s.exports=function(c,a){for(var u,h=o.alloc(0),f=0;h.length<a;)u=d(f++),h=o.concat([h,i("sha1").update(c).update(u).digest()]);return h.slice(0,a)}},{"create-hash":386,"safe-buffer":494}],470:[function(t,s,l){arguments[4][184][0].apply(l,arguments)},{buffer:188,dup:184}],471:[function(t,s,l){var i=t("parse-asn1"),o=t("./mgf"),d=t("./xor"),c=t("bn.js"),a=t("browserify-rsa"),u=t("create-hash"),h=t("./withPublic"),f=t("safe-buffer").Buffer;s.exports=function(m,b,y){var g;g=m.padding?m.padding:y?1:4;var w,x=i(m),_=x.modulus.byteLength();if(b.length>_||new c(b).cmp(x.modulus)>=0)throw new Error("decryption error");w=y?h(new c(b),x):a(b,x);var j=f.alloc(_-w.length);if(w=f.concat([j,w],_),g===4)return function(R,M){var I=R.modulus.byteLength(),F=u("sha1").update(f.alloc(0)).digest(),B=F.length;if(M[0]!==0)throw new Error("decryption error");var U=M.slice(1,B+1),Q=M.slice(B+1),K=d(U,o(Q,B)),T=d(Q,o(K,I-B-1));if(function(A,N){A=f.from(A),N=f.from(N);var k=0,S=A.length;A.length!==N.length&&(k++,S=Math.min(A.length,N.length));for(var E=-1;++E<S;)k+=A[E]^N[E];return k}(F,T.slice(0,B)))throw new Error("decryption error");for(var P=B;T[P]===0;)P++;if(T[P++]!==1)throw new Error("decryption error");return T.slice(P)}(x,w);if(g===1)return function(R,M,I){for(var F=M.slice(0,2),B=2,U=0;M[B++]!==0;)if(B>=M.length){U++;break}var Q=M.slice(2,B-1);if((F.toString("hex")!=="0002"&&!I||F.toString("hex")!=="0001"&&I)&&U++,Q.length<8&&U++,U)throw new Error("decryption error");return M.slice(B)}(0,w,y);if(g===3)return w;throw new Error("unknown padding")}},{"./mgf":469,"./withPublic":473,"./xor":474,"bn.js":470,"browserify-rsa":209,"create-hash":386,"parse-asn1":459,"safe-buffer":494}],472:[function(t,s,l){var i=t("parse-asn1"),o=t("randombytes"),d=t("create-hash"),c=t("./mgf"),a=t("./xor"),u=t("bn.js"),h=t("./withPublic"),f=t("browserify-rsa"),m=t("safe-buffer").Buffer;s.exports=function(b,y,g){var w;w=b.padding?b.padding:g?1:4;var x,_=i(b);if(w===4)x=function(j,R){var M=j.modulus.byteLength(),I=R.length,F=d("sha1").update(m.alloc(0)).digest(),B=F.length,U=2*B;if(I>M-U-2)throw new Error("message too long");var Q=m.alloc(M-I-U-2),K=M-B-1,T=o(B),P=a(m.concat([F,Q,m.alloc(1,1),R],K),c(T,K)),A=a(T,c(P,B));return new u(m.concat([m.alloc(1),A,P],M))}(_,y);else if(w===1)x=function(j,R,M){var I,F=R.length,B=j.modulus.byteLength();if(F>B-11)throw new Error("message too long");return I=M?m.alloc(B-F-3,255):function(U){for(var Q,K=m.allocUnsafe(U),T=0,P=o(2*U),A=0;T<U;)A===P.length&&(P=o(2*U),A=0),(Q=P[A++])&&(K[T++]=Q);return K}(B-F-3),new u(m.concat([m.from([0,M?1:2]),I,m.alloc(1),R],B))}(_,y,g);else{if(w!==3)throw new Error("unknown padding");if((x=new u(y)).cmp(_.modulus)>=0)throw new Error("data too long for modulus")}return g?f(x,_):h(x,_)}},{"./mgf":469,"./withPublic":473,"./xor":474,"bn.js":470,"browserify-rsa":209,"create-hash":386,"parse-asn1":459,randombytes:475,"safe-buffer":494}],473:[function(t,s,l){var i=t("bn.js"),o=t("safe-buffer").Buffer;s.exports=function(d,c){return o.from(d.toRed(i.mont(c.modulus)).redPow(new i(c.publicExponent)).fromRed().toArray())}},{"bn.js":470,"safe-buffer":494}],474:[function(t,s,l){s.exports=function(i,o){for(var d=i.length,c=-1;++c<d;)i[c]^=o[c];return i}},{}],475:[function(t,s,l){(function(i,o){(function(){var d=t("safe-buffer").Buffer,c=o.crypto||o.msCrypto;c&&c.getRandomValues?s.exports=function(a,u){if(a>4294967295)throw new RangeError("requested too many random bytes");var h=d.allocUnsafe(a);if(a>0)if(a>65536)for(var f=0;f<a;f+=65536)c.getRandomValues(h.slice(f,f+65536));else c.getRandomValues(h);return typeof u=="function"?i.nextTick(function(){u(null,h)}):h}:s.exports=function(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}}).call(this)}).call(this,t("_process"),typeof mr<"u"?mr:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:467,"safe-buffer":494}],476:[function(t,s,l){(function(i,o){(function(){function d(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var c=t("safe-buffer"),a=t("randombytes"),u=c.Buffer,h=c.kMaxLength,f=o.crypto||o.msCrypto,m=Math.pow(2,32)-1;function b(w,x){if(typeof w!="number"||w!=w)throw new TypeError("offset must be a number");if(w>m||w<0)throw new TypeError("offset must be a uint32");if(w>h||w>x)throw new RangeError("offset out of range")}function y(w,x,_){if(typeof w!="number"||w!=w)throw new TypeError("size must be a number");if(w>m||w<0)throw new TypeError("size must be a uint32");if(w+x>_||w>h)throw new RangeError("buffer too small")}function g(w,x,_,j){if(i.browser){var R=w.buffer,M=new Uint8Array(R,x,_);return f.getRandomValues(M),j?void i.nextTick(function(){j(null,w)}):w}if(!j)return a(_).copy(w,x),w;a(_,function(I,F){if(I)return j(I);F.copy(w,x),j(null,w)})}f&&f.getRandomValues||!i.browser?(l.randomFill=function(w,x,_,j){if(!(u.isBuffer(w)||w instanceof o.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof x=="function")j=x,x=0,_=w.length;else if(typeof _=="function")j=_,_=w.length-x;else if(typeof j!="function")throw new TypeError('"cb" argument must be a function');return b(x,w.length),y(_,x,w.length),g(w,x,_,j)},l.randomFillSync=function(w,x,_){if(x===void 0&&(x=0),!(u.isBuffer(w)||w instanceof o.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return b(x,w.length),_===void 0&&(_=w.length-x),y(_,x,w.length),g(w,x,_)}):(l.randomFill=d,l.randomFillSync=d)}).call(this)}).call(this,t("_process"),typeof mr<"u"?mr:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:467,randombytes:475,"safe-buffer":494}],477:[function(t,s,l){var i={};function o(c,a,u){u||(u=Error);var h=function(f){var m,b;function y(g,w,x){return f.call(this,function(_,j,R){return typeof a=="string"?a:a(_,j,R)}(g,w,x))||this}return b=f,(m=y).prototype=Object.create(b.prototype),m.prototype.constructor=m,m.__proto__=b,y}(u);h.prototype.name=u.name,h.prototype.code=c,i[c]=h}function d(c,a){if(Array.isArray(c)){var u=c.length;return c=c.map(function(h){return String(h)}),u>2?"one of ".concat(a," ").concat(c.slice(0,u-1).join(", "),", or ")+c[u-1]:u===2?"one of ".concat(a," ").concat(c[0]," or ").concat(c[1]):"of ".concat(a," ").concat(c[0])}return"of ".concat(a," ").concat(String(c))}o("ERR_INVALID_OPT_VALUE",function(c,a){return'The value "'+a+'" is invalid for option "'+c+'"'},TypeError),o("ERR_INVALID_ARG_TYPE",function(c,a,u){var h,f,m;if(typeof a=="string"&&(f="not ",a.substr(0,f.length)===f)?(h="must not be",a=a.replace(/^not /,"")):h="must be",function(y,g,w){return(w===void 0||w>y.length)&&(w=y.length),y.substring(w-g.length,w)===g}(c," argument"))m="The ".concat(c," ").concat(h," ").concat(d(a,"type"));else{var b=function(y,g,w){return typeof w!="number"&&(w=0),!(w+g.length>y.length)&&y.indexOf(g,w)!==-1}(c,".")?"property":"argument";m='The "'.concat(c,'" ').concat(b," ").concat(h," ").concat(d(a,"type"))}return m+=". Received type ".concat(typeof u)},TypeError),o("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),o("ERR_METHOD_NOT_IMPLEMENTED",function(c){return"The "+c+" method is not implemented"}),o("ERR_STREAM_PREMATURE_CLOSE","Premature close"),o("ERR_STREAM_DESTROYED",function(c){return"Cannot call "+c+" after a stream was destroyed"}),o("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),o("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),o("ERR_STREAM_WRITE_AFTER_END","write after end"),o("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),o("ERR_UNKNOWN_ENCODING",function(c){return"Unknown encoding: "+c},TypeError),o("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),s.exports.codes=i},{}],478:[function(t,s,l){(function(i){(function(){var o=Object.keys||function(y){var g=[];for(var w in y)g.push(w);return g};s.exports=f;var d=t("./_stream_readable"),c=t("./_stream_writable");t("inherits")(f,d);for(var a=o(c.prototype),u=0;u<a.length;u++){var h=a[u];f.prototype[h]||(f.prototype[h]=c.prototype[h])}function f(y){if(!(this instanceof f))return new f(y);d.call(this,y),c.call(this,y),this.allowHalfOpen=!0,y&&(y.readable===!1&&(this.readable=!1),y.writable===!1&&(this.writable=!1),y.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",m)))}function m(){this._writableState.ended||i.nextTick(b,this)}function b(y){y.end()}Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(f.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(f.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(f.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(y){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=y,this._writableState.destroyed=y)}})}).call(this)}).call(this,t("_process"))},{"./_stream_readable":480,"./_stream_writable":482,_process:467,inherits:440}],479:[function(t,s,l){s.exports=o;var i=t("./_stream_transform");function o(d){if(!(this instanceof o))return new o(d);i.call(this,d)}t("inherits")(o,i),o.prototype._transform=function(d,c,a){a(null,d)}},{"./_stream_transform":481,inherits:440}],480:[function(t,s,l){(function(i,o){(function(){var d;s.exports=K,K.ReadableState=Q,t("events").EventEmitter;var c=function($,q){return $.listeners(q).length},a=t("./internal/streams/stream"),u=t("buffer").Buffer,h=(o!==void 0?o:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},f,m=t("util");f=m&&m.debuglog?m.debuglog("stream"):function(){};var b,y,g,w=t("./internal/streams/buffer_list"),x=t("./internal/streams/destroy"),_=t("./internal/streams/state").getHighWaterMark,j=t("../errors").codes,R=j.ERR_INVALID_ARG_TYPE,M=j.ERR_STREAM_PUSH_AFTER_EOF,I=j.ERR_METHOD_NOT_IMPLEMENTED,F=j.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;t("inherits")(K,a);var B=x.errorOrDestroy,U=["error","close","destroy","pause","resume"];function Q($,q,Y){d=d||t("./_stream_duplex"),$=$||{},typeof Y!="boolean"&&(Y=q instanceof d),this.objectMode=!!$.objectMode,Y&&(this.objectMode=this.objectMode||!!$.readableObjectMode),this.highWaterMark=_(this,$,"readableHighWaterMark",Y),this.buffer=new w,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=$.emitClose!==!1,this.autoDestroy=!!$.autoDestroy,this.destroyed=!1,this.defaultEncoding=$.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,$.encoding&&(b||(b=t("string_decoder/").StringDecoder),this.decoder=new b($.encoding),this.encoding=$.encoding)}function K($){if(d=d||t("./_stream_duplex"),!(this instanceof K))return new K($);var q=this instanceof d;this._readableState=new Q($,this,q),this.readable=!0,$&&(typeof $.read=="function"&&(this._read=$.read),typeof $.destroy=="function"&&(this._destroy=$.destroy)),a.call(this)}function T($,q,Y,se,oe){f("readableAddChunk",q);var ae,ce=$._readableState;if(q===null)ce.reading=!1,function(we,fe){if(f("onEofChunk"),!fe.ended){if(fe.decoder){var re=fe.decoder.end();re&&re.length&&(fe.buffer.push(re),fe.length+=fe.objectMode?1:re.length)}fe.ended=!0,fe.sync?N(we):(fe.needReadable=!1,fe.emittedReadable||(fe.emittedReadable=!0,k(we)))}}($,ce);else if(oe||(ae=function(we,fe){var re;ge=fe,u.isBuffer(ge)||ge instanceof h||typeof fe=="string"||fe===void 0||we.objectMode||(re=new R("chunk",["string","Buffer","Uint8Array"],fe));var ge;return re}(ce,q)),ae)B($,ae);else if(ce.objectMode||q&&q.length>0)if(typeof q=="string"||ce.objectMode||Object.getPrototypeOf(q)===u.prototype||(q=function(we){return u.from(we)}(q)),se)ce.endEmitted?B($,new F):P($,ce,q,!0);else if(ce.ended)B($,new M);else{if(ce.destroyed)return!1;ce.reading=!1,ce.decoder&&!Y?(q=ce.decoder.write(q),ce.objectMode||q.length!==0?P($,ce,q,!1):S($,ce)):P($,ce,q,!1)}else se||(ce.reading=!1,S($,ce));return!ce.ended&&(ce.length<ce.highWaterMark||ce.length===0)}function P($,q,Y,se){q.flowing&&q.length===0&&!q.sync?(q.awaitDrain=0,$.emit("data",Y)):(q.length+=q.objectMode?1:Y.length,se?q.buffer.unshift(Y):q.buffer.push(Y),q.needReadable&&N($)),S($,q)}Object.defineProperty(K.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function($){this._readableState&&(this._readableState.destroyed=$)}}),K.prototype.destroy=x.destroy,K.prototype._undestroy=x.undestroy,K.prototype._destroy=function($,q){q($)},K.prototype.push=function($,q){var Y,se=this._readableState;return se.objectMode?Y=!0:typeof $=="string"&&((q=q||se.defaultEncoding)!==se.encoding&&($=u.from($,q),q=""),Y=!0),T(this,$,q,!1,Y)},K.prototype.unshift=function($){return T(this,$,null,!0,!1)},K.prototype.isPaused=function(){return this._readableState.flowing===!1},K.prototype.setEncoding=function($){b||(b=t("string_decoder/").StringDecoder);var q=new b($);this._readableState.decoder=q,this._readableState.encoding=this._readableState.decoder.encoding;for(var Y=this._readableState.buffer.head,se="";Y!==null;)se+=q.write(Y.data),Y=Y.next;return this._readableState.buffer.clear(),se!==""&&this._readableState.buffer.push(se),this._readableState.length=se.length,this};function A($,q){return $<=0||q.length===0&&q.ended?0:q.objectMode?1:$!=$?q.flowing&&q.length?q.buffer.head.data.length:q.length:($>q.highWaterMark&&(q.highWaterMark=function(Y){return Y>=1073741824?Y=1073741824:(Y--,Y|=Y>>>1,Y|=Y>>>2,Y|=Y>>>4,Y|=Y>>>8,Y|=Y>>>16,Y++),Y}($)),$<=q.length?$:q.ended?q.length:(q.needReadable=!0,0))}function N($){var q=$._readableState;f("emitReadable",q.needReadable,q.emittedReadable),q.needReadable=!1,q.emittedReadable||(f("emitReadable",q.flowing),q.emittedReadable=!0,i.nextTick(k,$))}function k($){var q=$._readableState;f("emitReadable_",q.destroyed,q.length,q.ended),q.destroyed||!q.length&&!q.ended||($.emit("readable"),q.emittedReadable=!1),q.needReadable=!q.flowing&&!q.ended&&q.length<=q.highWaterMark,G($)}function S($,q){q.readingMore||(q.readingMore=!0,i.nextTick(E,$,q))}function E($,q){for(;!q.reading&&!q.ended&&(q.length<q.highWaterMark||q.flowing&&q.length===0);){var Y=q.length;if(f("maybeReadMore read 0"),$.read(0),Y===q.length)break}q.readingMore=!1}function O($){var q=$._readableState;q.readableListening=$.listenerCount("readable")>0,q.resumeScheduled&&!q.paused?q.flowing=!0:$.listenerCount("data")>0&&$.resume()}function L($){f("readable nexttick read 0"),$.read(0)}function z($,q){f("resume",q.reading),q.reading||$.read(0),q.resumeScheduled=!1,$.emit("resume"),G($),q.flowing&&!q.reading&&$.read(0)}function G($){var q=$._readableState;for(f("flow",q.flowing);q.flowing&&$.read()!==null;);}function Z($,q){return q.length===0?null:(q.objectMode?Y=q.buffer.shift():!$||$>=q.length?(Y=q.decoder?q.buffer.join(""):q.buffer.length===1?q.buffer.first():q.buffer.concat(q.length),q.buffer.clear()):Y=q.buffer.consume($,q.decoder),Y);var Y}function ee($){var q=$._readableState;f("endReadable",q.endEmitted),q.endEmitted||(q.ended=!0,i.nextTick(W,q,$))}function W($,q){if(f("endReadableNT",$.endEmitted,$.length),!$.endEmitted&&$.length===0&&($.endEmitted=!0,q.readable=!1,q.emit("end"),$.autoDestroy)){var Y=q._writableState;(!Y||Y.autoDestroy&&Y.finished)&&q.destroy()}}function J($,q){for(var Y=0,se=$.length;Y<se;Y++)if($[Y]===q)return Y;return-1}K.prototype.read=function($){f("read",$),$=parseInt($,10);var q=this._readableState,Y=$;if($!==0&&(q.emittedReadable=!1),$===0&&q.needReadable&&((q.highWaterMark!==0?q.length>=q.highWaterMark:q.length>0)||q.ended))return f("read: emitReadable",q.length,q.ended),q.length===0&&q.ended?ee(this):N(this),null;if(($=A($,q))===0&&q.ended)return q.length===0&&ee(this),null;var se,oe=q.needReadable;return f("need readable",oe),(q.length===0||q.length-$<q.highWaterMark)&&f("length less than watermark",oe=!0),q.ended||q.reading?f("reading or ended",oe=!1):oe&&(f("do read"),q.reading=!0,q.sync=!0,q.length===0&&(q.needReadable=!0),this._read(q.highWaterMark),q.sync=!1,q.reading||($=A(Y,q))),(se=$>0?Z($,q):null)===null?(q.needReadable=q.length<=q.highWaterMark,$=0):(q.length-=$,q.awaitDrain=0),q.length===0&&(q.ended||(q.needReadable=!0),Y!==$&&q.ended&&ee(this)),se!==null&&this.emit("data",se),se},K.prototype._read=function($){B(this,new I("_read()"))},K.prototype.pipe=function($,q){var Y=this,se=this._readableState;switch(se.pipesCount){case 0:se.pipes=$;break;case 1:se.pipes=[se.pipes,$];break;default:se.pipes.push($)}se.pipesCount+=1,f("pipe count=%d opts=%j",se.pipesCount,q);var oe=(!q||q.end!==!1)&&$!==i.stdout&&$!==i.stderr?ce:ie;function ae(ue,_e){f("onunpipe"),ue===Y&&_e&&_e.hasUnpiped===!1&&(_e.hasUnpiped=!0,f("cleanup"),$.removeListener("close",le),$.removeListener("finish",te),$.removeListener("drain",we),$.removeListener("error",ge),$.removeListener("unpipe",ae),Y.removeListener("end",ce),Y.removeListener("end",ie),Y.removeListener("data",re),fe=!0,!se.awaitDrain||$._writableState&&!$._writableState.needDrain||we())}function ce(){f("onend"),$.end()}se.endEmitted?i.nextTick(oe):Y.once("end",oe),$.on("unpipe",ae);var we=function(ue){return function(){var _e=ue._readableState;f("pipeOnDrain",_e.awaitDrain),_e.awaitDrain&&_e.awaitDrain--,_e.awaitDrain===0&&c(ue,"data")&&(_e.flowing=!0,G(ue))}}(Y);$.on("drain",we);var fe=!1;function re(ue){f("ondata");var _e=$.write(ue);f("dest.write",_e),_e===!1&&((se.pipesCount===1&&se.pipes===$||se.pipesCount>1&&J(se.pipes,$)!==-1)&&!fe&&(f("false write response, pause",se.awaitDrain),se.awaitDrain++),Y.pause())}function ge(ue){f("onerror",ue),ie(),$.removeListener("error",ge),c($,"error")===0&&B($,ue)}function le(){$.removeListener("finish",te),ie()}function te(){f("onfinish"),$.removeListener("close",le),ie()}function ie(){f("unpipe"),Y.unpipe($)}return Y.on("data",re),function(ue,_e,je){if(typeof ue.prependListener=="function")return ue.prependListener(_e,je);ue._events&&ue._events[_e]?Array.isArray(ue._events[_e])?ue._events[_e].unshift(je):ue._events[_e]=[je,ue._events[_e]]:ue.on(_e,je)}($,"error",ge),$.once("close",le),$.once("finish",te),$.emit("pipe",Y),se.flowing||(f("pipe resume"),Y.resume()),$},K.prototype.unpipe=function($){var q=this._readableState,Y={hasUnpiped:!1};if(q.pipesCount===0)return this;if(q.pipesCount===1)return $&&$!==q.pipes||($||($=q.pipes),q.pipes=null,q.pipesCount=0,q.flowing=!1,$&&$.emit("unpipe",this,Y)),this;if(!$){var se=q.pipes,oe=q.pipesCount;q.pipes=null,q.pipesCount=0,q.flowing=!1;for(var ae=0;ae<oe;ae++)se[ae].emit("unpipe",this,{hasUnpiped:!1});return this}var ce=J(q.pipes,$);return ce===-1||(q.pipes.splice(ce,1),q.pipesCount-=1,q.pipesCount===1&&(q.pipes=q.pipes[0]),$.emit("unpipe",this,Y)),this},K.prototype.on=function($,q){var Y=a.prototype.on.call(this,$,q),se=this._readableState;return $==="data"?(se.readableListening=this.listenerCount("readable")>0,se.flowing!==!1&&this.resume()):$==="readable"&&(se.endEmitted||se.readableListening||(se.readableListening=se.needReadable=!0,se.flowing=!1,se.emittedReadable=!1,f("on readable",se.length,se.reading),se.length?N(this):se.reading||i.nextTick(L,this))),Y},K.prototype.addListener=K.prototype.on,K.prototype.removeListener=function($,q){var Y=a.prototype.removeListener.call(this,$,q);return $==="readable"&&i.nextTick(O,this),Y},K.prototype.removeAllListeners=function($){var q=a.prototype.removeAllListeners.apply(this,arguments);return $!=="readable"&&$!==void 0||i.nextTick(O,this),q},K.prototype.resume=function(){var $=this._readableState;return $.flowing||(f("resume"),$.flowing=!$.readableListening,function(q,Y){Y.resumeScheduled||(Y.resumeScheduled=!0,i.nextTick(z,q,Y))}(this,$)),$.paused=!1,this},K.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},K.prototype.wrap=function($){var q=this,Y=this._readableState,se=!1;for(var oe in $.on("end",function(){if(f("wrapped end"),Y.decoder&&!Y.ended){var ce=Y.decoder.end();ce&&ce.length&&q.push(ce)}q.push(null)}),$.on("data",function(ce){f("wrapped data"),Y.decoder&&(ce=Y.decoder.write(ce)),Y.objectMode&&ce==null||(Y.objectMode||ce&&ce.length)&&(q.push(ce)||(se=!0,$.pause()))}),$)this[oe]===void 0&&typeof $[oe]=="function"&&(this[oe]=function(ce){return function(){return $[ce].apply($,arguments)}}(oe));for(var ae=0;ae<U.length;ae++)$.on(U[ae],this.emit.bind(this,U[ae]));return this._read=function(ce){f("wrapped _read",ce),se&&(se=!1,$.resume())},this},typeof Symbol=="function"&&(K.prototype[Symbol.asyncIterator]=function(){return y===void 0&&(y=t("./internal/streams/async_iterator")),y(this)}),Object.defineProperty(K.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(K.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(K.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function($){this._readableState&&(this._readableState.flowing=$)}}),K._fromList=Z,Object.defineProperty(K.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(K.from=function($,q){return g===void 0&&(g=t("./internal/streams/from")),g(K,$,q)})}).call(this)}).call(this,t("_process"),typeof mr<"u"?mr:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":477,"./_stream_duplex":478,"./internal/streams/async_iterator":483,"./internal/streams/buffer_list":484,"./internal/streams/destroy":485,"./internal/streams/from":487,"./internal/streams/state":489,"./internal/streams/stream":490,_process:467,buffer:220,events:422,inherits:440,"string_decoder/":522,util:188}],481:[function(t,s,l){s.exports=f;var i=t("../errors").codes,o=i.ERR_METHOD_NOT_IMPLEMENTED,d=i.ERR_MULTIPLE_CALLBACK,c=i.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=i.ERR_TRANSFORM_WITH_LENGTH_0,u=t("./_stream_duplex");function h(y,g){var w=this._transformState;w.transforming=!1;var x=w.writecb;if(x===null)return this.emit("error",new d);w.writechunk=null,w.writecb=null,g!=null&&this.push(g),x(y);var _=this._readableState;_.reading=!1,(_.needReadable||_.length<_.highWaterMark)&&this._read(_.highWaterMark)}function f(y){if(!(this instanceof f))return new f(y);u.call(this,y),this._transformState={afterTransform:h.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,y&&(typeof y.transform=="function"&&(this._transform=y.transform),typeof y.flush=="function"&&(this._flush=y.flush)),this.on("prefinish",m)}function m(){var y=this;typeof this._flush!="function"||this._readableState.destroyed?b(this,null,null):this._flush(function(g,w){b(y,g,w)})}function b(y,g,w){if(g)return y.emit("error",g);if(w!=null&&y.push(w),y._writableState.length)throw new a;if(y._transformState.transforming)throw new c;return y.push(null)}t("inherits")(f,u),f.prototype.push=function(y,g){return this._transformState.needTransform=!1,u.prototype.push.call(this,y,g)},f.prototype._transform=function(y,g,w){w(new o("_transform()"))},f.prototype._write=function(y,g,w){var x=this._transformState;if(x.writecb=w,x.writechunk=y,x.writeencoding=g,!x.transforming){var _=this._readableState;(x.needTransform||_.needReadable||_.length<_.highWaterMark)&&this._read(_.highWaterMark)}},f.prototype._read=function(y){var g=this._transformState;g.writechunk===null||g.transforming?g.needTransform=!0:(g.transforming=!0,this._transform(g.writechunk,g.writeencoding,g.afterTransform))},f.prototype._destroy=function(y,g){u.prototype._destroy.call(this,y,function(w){g(w)})}},{"../errors":477,"./_stream_duplex":478,inherits:440}],482:[function(t,s,l){(function(i,o){(function(){function d(E){var O=this;this.next=null,this.entry=null,this.finish=function(){(function(L,z,G){var Z=L.entry;for(L.entry=null;Z;){var ee=Z.callback;z.pendingcb--,ee(G),Z=Z.next}z.corkedRequestsFree.next=L})(O,E)}}var c;s.exports=K,K.WritableState=Q;var a={deprecate:t("util-deprecate")},u=t("./internal/streams/stream"),h=t("buffer").Buffer,f=(o!==void 0?o:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},m,b=t("./internal/streams/destroy"),y=t("./internal/streams/state").getHighWaterMark,g=t("../errors").codes,w=g.ERR_INVALID_ARG_TYPE,x=g.ERR_METHOD_NOT_IMPLEMENTED,_=g.ERR_MULTIPLE_CALLBACK,j=g.ERR_STREAM_CANNOT_PIPE,R=g.ERR_STREAM_DESTROYED,M=g.ERR_STREAM_NULL_VALUES,I=g.ERR_STREAM_WRITE_AFTER_END,F=g.ERR_UNKNOWN_ENCODING,B=b.errorOrDestroy;function U(){}function Q(E,O,L){c=c||t("./_stream_duplex"),E=E||{},typeof L!="boolean"&&(L=O instanceof c),this.objectMode=!!E.objectMode,L&&(this.objectMode=this.objectMode||!!E.writableObjectMode),this.highWaterMark=y(this,E,"writableHighWaterMark",L),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var z=E.decodeStrings===!1;this.decodeStrings=!z,this.defaultEncoding=E.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(G){(function(Z,ee){var W=Z._writableState,J=W.sync,$=W.writecb;if(typeof $!="function")throw new _;if(function(Y){Y.writing=!1,Y.writecb=null,Y.length-=Y.writelen,Y.writelen=0}(W),ee)(function(Y,se,oe,ae,ce){--se.pendingcb,oe?(i.nextTick(ce,ae),i.nextTick(S,Y,se),Y._writableState.errorEmitted=!0,B(Y,ae)):(ce(ae),Y._writableState.errorEmitted=!0,B(Y,ae),S(Y,se))})(Z,W,J,ee,$);else{var q=N(W)||Z.destroyed;q||W.corked||W.bufferProcessing||!W.bufferedRequest||A(Z,W),J?i.nextTick(P,Z,W,q,$):P(Z,W,q,$)}})(O,G)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=E.emitClose!==!1,this.autoDestroy=!!E.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new d(this)}function K(E){var O=this instanceof(c=c||t("./_stream_duplex"));if(!O&&!m.call(K,this))return new K(E);this._writableState=new Q(E,this,O),this.writable=!0,E&&(typeof E.write=="function"&&(this._write=E.write),typeof E.writev=="function"&&(this._writev=E.writev),typeof E.destroy=="function"&&(this._destroy=E.destroy),typeof E.final=="function"&&(this._final=E.final)),u.call(this)}function T(E,O,L,z,G,Z,ee){O.writelen=z,O.writecb=ee,O.writing=!0,O.sync=!0,O.destroyed?O.onwrite(new R("write")):L?E._writev(G,O.onwrite):E._write(G,Z,O.onwrite),O.sync=!1}function P(E,O,L,z){L||function(G,Z){Z.length===0&&Z.needDrain&&(Z.needDrain=!1,G.emit("drain"))}(E,O),O.pendingcb--,z(),S(E,O)}function A(E,O){O.bufferProcessing=!0;var L=O.bufferedRequest;if(E._writev&&L&&L.next){var z=O.bufferedRequestCount,G=new Array(z),Z=O.corkedRequestsFree;Z.entry=L;for(var ee=0,W=!0;L;)G[ee]=L,L.isBuf||(W=!1),L=L.next,ee+=1;G.allBuffers=W,T(E,O,!0,O.length,G,"",Z.finish),O.pendingcb++,O.lastBufferedRequest=null,Z.next?(O.corkedRequestsFree=Z.next,Z.next=null):O.corkedRequestsFree=new d(O),O.bufferedRequestCount=0}else{for(;L;){var J=L.chunk,$=L.encoding,q=L.callback;if(T(E,O,!1,O.objectMode?1:J.length,J,$,q),L=L.next,O.bufferedRequestCount--,O.writing)break}L===null&&(O.lastBufferedRequest=null)}O.bufferedRequest=L,O.bufferProcessing=!1}function N(E){return E.ending&&E.length===0&&E.bufferedRequest===null&&!E.finished&&!E.writing}function k(E,O){E._final(function(L){O.pendingcb--,L&&B(E,L),O.prefinished=!0,E.emit("prefinish"),S(E,O)})}function S(E,O){var L=N(O);if(L&&(function(G,Z){Z.prefinished||Z.finalCalled||(typeof G._final!="function"||Z.destroyed?(Z.prefinished=!0,G.emit("prefinish")):(Z.pendingcb++,Z.finalCalled=!0,i.nextTick(k,G,Z)))}(E,O),O.pendingcb===0&&(O.finished=!0,E.emit("finish"),O.autoDestroy))){var z=E._readableState;(!z||z.autoDestroy&&z.endEmitted)&&E.destroy()}return L}t("inherits")(K,u),Q.prototype.getBuffer=function(){for(var E=this.bufferedRequest,O=[];E;)O.push(E),E=E.next;return O},function(){try{Object.defineProperty(Q.prototype,"buffer",{get:a.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(m=Function.prototype[Symbol.hasInstance],Object.defineProperty(K,Symbol.hasInstance,{value:function(E){return!!m.call(this,E)||this===K&&E&&E._writableState instanceof Q}})):m=function(E){return E instanceof this},K.prototype.pipe=function(){B(this,new j)},K.prototype.write=function(E,O,L){var z,G=this._writableState,Z=!1,ee=!G.objectMode&&(z=E,h.isBuffer(z)||z instanceof f);return ee&&!h.isBuffer(E)&&(E=function(W){return h.from(W)}(E)),typeof O=="function"&&(L=O,O=null),ee?O="buffer":O||(O=G.defaultEncoding),typeof L!="function"&&(L=U),G.ending?function(W,J){var $=new I;B(W,$),i.nextTick(J,$)}(this,L):(ee||function(W,J,$,q){var Y;return $===null?Y=new M:typeof $=="string"||J.objectMode||(Y=new w("chunk",["string","Buffer"],$)),!Y||(B(W,Y),i.nextTick(q,Y),!1)}(this,G,E,L))&&(G.pendingcb++,Z=function(W,J,$,q,Y,se){if(!$){var oe=function(fe,re,ge){return fe.objectMode||fe.decodeStrings===!1||typeof re!="string"||(re=h.from(re,ge)),re}(J,q,Y);q!==oe&&($=!0,Y="buffer",q=oe)}var ae=J.objectMode?1:q.length;J.length+=ae;var ce=J.length<J.highWaterMark;if(ce||(J.needDrain=!0),J.writing||J.corked){var we=J.lastBufferedRequest;J.lastBufferedRequest={chunk:q,encoding:Y,isBuf:$,callback:se,next:null},we?we.next=J.lastBufferedRequest:J.bufferedRequest=J.lastBufferedRequest,J.bufferedRequestCount+=1}else T(W,J,!1,ae,q,Y,se);return ce}(this,G,ee,E,O,L)),Z},K.prototype.cork=function(){this._writableState.corked++},K.prototype.uncork=function(){var E=this._writableState;E.corked&&(E.corked--,E.writing||E.corked||E.bufferProcessing||!E.bufferedRequest||A(this,E))},K.prototype.setDefaultEncoding=function(E){if(typeof E=="string"&&(E=E.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((E+"").toLowerCase())>-1))throw new F(E);return this._writableState.defaultEncoding=E,this},Object.defineProperty(K.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(K.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),K.prototype._write=function(E,O,L){L(new x("_write()"))},K.prototype._writev=null,K.prototype.end=function(E,O,L){var z=this._writableState;return typeof E=="function"?(L=E,E=null,O=null):typeof O=="function"&&(L=O,O=null),E!=null&&this.write(E,O),z.corked&&(z.corked=1,this.uncork()),z.ending||function(G,Z,ee){Z.ending=!0,S(G,Z),ee&&(Z.finished?i.nextTick(ee):G.once("finish",ee)),Z.ended=!0,G.writable=!1}(this,z,L),this},Object.defineProperty(K.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(K.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(E){this._writableState&&(this._writableState.destroyed=E)}}),K.prototype.destroy=b.destroy,K.prototype._undestroy=b.undestroy,K.prototype._destroy=function(E,O){O(E)}}).call(this)}).call(this,t("_process"),typeof mr<"u"?mr:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":477,"./_stream_duplex":478,"./internal/streams/destroy":485,"./internal/streams/state":489,"./internal/streams/stream":490,_process:467,buffer:220,inherits:440,"util-deprecate":524}],483:[function(t,s,l){(function(i){(function(){var o;function d(R,M,I){return(M=function(F){var B=function(U,Q){if(typeof U!="object"||U===null)return U;var K=U[Symbol.toPrimitive];if(K!==void 0){var T=K.call(U,Q);if(typeof T!="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Q==="string"?String:Number)(U)}(F,"string");return typeof B=="symbol"?B:String(B)}(M))in R?Object.defineProperty(R,M,{value:I,enumerable:!0,configurable:!0,writable:!0}):R[M]=I,R}var c=t("./end-of-stream"),a=Symbol("lastResolve"),u=Symbol("lastReject"),h=Symbol("error"),f=Symbol("ended"),m=Symbol("lastPromise"),b=Symbol("handlePromise"),y=Symbol("stream");function g(R,M){return{value:R,done:M}}function w(R){var M=R[a];if(M!==null){var I=R[y].read();I!==null&&(R[m]=null,R[a]=null,R[u]=null,M(g(I,!1)))}}function x(R){i.nextTick(w,R)}var _=Object.getPrototypeOf(function(){}),j=Object.setPrototypeOf((d(o={get stream(){return this[y]},next:function(){var R=this,M=this[h];if(M!==null)return Promise.reject(M);if(this[f])return Promise.resolve(g(void 0,!0));if(this[y].destroyed)return new Promise(function(U,Q){i.nextTick(function(){R[h]?Q(R[h]):U(g(void 0,!0))})});var I,F=this[m];if(F)I=new Promise(function(U,Q){return function(K,T){U.then(function(){Q[f]?K(g(void 0,!0)):Q[b](K,T)},T)}}(F,this));else{var B=this[y].read();if(B!==null)return Promise.resolve(g(B,!1));I=new Promise(this[b])}return this[m]=I,I}},Symbol.asyncIterator,function(){return this}),d(o,"return",function(){var R=this;return new Promise(function(M,I){R[y].destroy(null,function(F){F?I(F):M(g(void 0,!0))})})}),o),_);s.exports=function(R){var M,I=Object.create(j,(d(M={},y,{value:R,writable:!0}),d(M,a,{value:null,writable:!0}),d(M,u,{value:null,writable:!0}),d(M,h,{value:null,writable:!0}),d(M,f,{value:R._readableState.endEmitted,writable:!0}),d(M,b,{value:function(F,B){var U=I[y].read();U?(I[m]=null,I[a]=null,I[u]=null,F(g(U,!1))):(I[a]=F,I[u]=B)},writable:!0}),M));return I[m]=null,c(R,function(F){if(F&&F.code!=="ERR_STREAM_PREMATURE_CLOSE"){var B=I[u];return B!==null&&(I[m]=null,I[a]=null,I[u]=null,B(F)),void(I[h]=F)}var U=I[a];U!==null&&(I[m]=null,I[a]=null,I[u]=null,U(g(void 0,!0))),I[f]=!0}),R.on("readable",x.bind(null,I)),I}}).call(this)}).call(this,t("_process"))},{"./end-of-stream":486,_process:467}],484:[function(t,s,l){function i(m,b){var y=Object.keys(m);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(m);b&&(g=g.filter(function(w){return Object.getOwnPropertyDescriptor(m,w).enumerable})),y.push.apply(y,g)}return y}function o(m){for(var b=1;b<arguments.length;b++){var y=arguments[b]!=null?arguments[b]:{};b%2?i(Object(y),!0).forEach(function(g){d(m,g,y[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(y)):i(Object(y)).forEach(function(g){Object.defineProperty(m,g,Object.getOwnPropertyDescriptor(y,g))})}return m}function d(m,b,y){return(b=a(b))in m?Object.defineProperty(m,b,{value:y,enumerable:!0,configurable:!0,writable:!0}):m[b]=y,m}function c(m,b){for(var y=0;y<b.length;y++){var g=b[y];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(m,a(g.key),g)}}function a(m){var b=function(y,g){if(typeof y!="object"||y===null)return y;var w=y[Symbol.toPrimitive];if(w!==void 0){var x=w.call(y,g);if(typeof x!="object")return x;throw new TypeError("@@toPrimitive must return a primitive value.")}return(g==="string"?String:Number)(y)}(m,"string");return typeof b=="symbol"?b:String(b)}var u=t("buffer").Buffer,h=t("util").inspect,f=h&&h.custom||"inspect";s.exports=function(){function m(){(function(g,w){if(!(g instanceof w))throw new TypeError("Cannot call a class as a function")})(this,m),this.head=null,this.tail=null,this.length=0}var b,y;return b=m,(y=[{key:"push",value:function(g){var w={data:g,next:null};this.length>0?this.tail.next=w:this.head=w,this.tail=w,++this.length}},{key:"unshift",value:function(g){var w={data:g,next:this.head};this.length===0&&(this.tail=w),this.head=w,++this.length}},{key:"shift",value:function(){if(this.length!==0){var g=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,g}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(g){if(this.length===0)return"";for(var w=this.head,x=""+w.data;w=w.next;)x+=g+w.data;return x}},{key:"concat",value:function(g){if(this.length===0)return u.alloc(0);for(var w,x,_,j=u.allocUnsafe(g>>>0),R=this.head,M=0;R;)w=R.data,x=j,_=M,u.prototype.copy.call(w,x,_),M+=R.data.length,R=R.next;return j}},{key:"consume",value:function(g,w){var x;return g<this.head.data.length?(x=this.head.data.slice(0,g),this.head.data=this.head.data.slice(g)):x=g===this.head.data.length?this.shift():w?this._getString(g):this._getBuffer(g),x}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(g){var w=this.head,x=1,_=w.data;for(g-=_.length;w=w.next;){var j=w.data,R=g>j.length?j.length:g;if(R===j.length?_+=j:_+=j.slice(0,g),(g-=R)==0){R===j.length?(++x,w.next?this.head=w.next:this.head=this.tail=null):(this.head=w,w.data=j.slice(R));break}++x}return this.length-=x,_}},{key:"_getBuffer",value:function(g){var w=u.allocUnsafe(g),x=this.head,_=1;for(x.data.copy(w),g-=x.data.length;x=x.next;){var j=x.data,R=g>j.length?j.length:g;if(j.copy(w,w.length-g,0,R),(g-=R)==0){R===j.length?(++_,x.next?this.head=x.next:this.head=this.tail=null):(this.head=x,x.data=j.slice(R));break}++_}return this.length-=_,w}},{key:f,value:function(g,w){return h(this,o(o({},w),{},{depth:0,customInspect:!1}))}}])&&c(b.prototype,y),Object.defineProperty(b,"prototype",{writable:!1}),m}()},{buffer:220,util:188}],485:[function(t,s,l){(function(i){(function(){function o(a,u){c(a,u),d(a)}function d(a){a._writableState&&!a._writableState.emitClose||a._readableState&&!a._readableState.emitClose||a.emit("close")}function c(a,u){a.emit("error",u)}s.exports={destroy:function(a,u){var h=this,f=this._readableState&&this._readableState.destroyed,m=this._writableState&&this._writableState.destroyed;return f||m?(u?u(a):a&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,i.nextTick(c,this,a)):i.nextTick(c,this,a)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(a||null,function(b){!u&&b?h._writableState?h._writableState.errorEmitted?i.nextTick(d,h):(h._writableState.errorEmitted=!0,i.nextTick(o,h,b)):i.nextTick(o,h,b):u?(i.nextTick(d,h),u(b)):i.nextTick(d,h)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(a,u){var h=a._readableState,f=a._writableState;h&&h.autoDestroy||f&&f.autoDestroy?a.destroy(u):a.emit("error",u)}}}).call(this)}).call(this,t("_process"))},{_process:467}],486:[function(t,s,l){var i=t("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function o(){}s.exports=function d(c,a,u){if(typeof a=="function")return d(c,null,a);a||(a={}),u=function(R){var M=!1;return function(){if(!M){M=!0;for(var I=arguments.length,F=new Array(I),B=0;B<I;B++)F[B]=arguments[B];R.apply(this,F)}}}(u||o);var h=a.readable||a.readable!==!1&&c.readable,f=a.writable||a.writable!==!1&&c.writable,m=function(){c.writable||y()},b=c._writableState&&c._writableState.finished,y=function(){f=!1,b=!0,h||u.call(c)},g=c._readableState&&c._readableState.endEmitted,w=function(){h=!1,g=!0,f||u.call(c)},x=function(R){u.call(c,R)},_=function(){var R;return h&&!g?(c._readableState&&c._readableState.ended||(R=new i),u.call(c,R)):f&&!b?(c._writableState&&c._writableState.ended||(R=new i),u.call(c,R)):void 0},j=function(){c.req.on("finish",y)};return function(R){return R.setHeader&&typeof R.abort=="function"}(c)?(c.on("complete",y),c.on("abort",_),c.req?j():c.on("request",j)):f&&!c._writableState&&(c.on("end",m),c.on("close",m)),c.on("end",w),c.on("finish",y),a.error!==!1&&c.on("error",x),c.on("close",_),function(){c.removeListener("complete",y),c.removeListener("abort",_),c.removeListener("request",j),c.req&&c.req.removeListener("finish",y),c.removeListener("end",m),c.removeListener("close",m),c.removeListener("finish",y),c.removeListener("end",w),c.removeListener("error",x),c.removeListener("close",_)}}},{"../../../errors":477}],487:[function(t,s,l){s.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],488:[function(t,s,l){var i,o=t("../../../errors").codes,d=o.ERR_MISSING_ARGS,c=o.ERR_STREAM_DESTROYED;function a(b){if(b)throw b}function u(b,y,g,w){w=function(j){var R=!1;return function(){R||(R=!0,j.apply(void 0,arguments))}}(w);var x=!1;b.on("close",function(){x=!0}),i===void 0&&(i=t("./end-of-stream")),i(b,{readable:y,writable:g},function(j){if(j)return w(j);x=!0,w()});var _=!1;return function(j){if(!x&&!_)return _=!0,function(R){return R.setHeader&&typeof R.abort=="function"}(b)?b.abort():typeof b.destroy=="function"?b.destroy():void w(j||new c("pipe"))}}function h(b){b()}function f(b,y){return b.pipe(y)}function m(b){return b.length?typeof b[b.length-1]!="function"?a:b.pop():a}s.exports=function(){for(var b=arguments.length,y=new Array(b),g=0;g<b;g++)y[g]=arguments[g];var w,x=m(y);if(Array.isArray(y[0])&&(y=y[0]),y.length<2)throw new d("streams");var _=y.map(function(j,R){var M=R<y.length-1;return u(j,M,R>0,function(I){w||(w=I),I&&_.forEach(h),M||(_.forEach(h),x(w))})});return y.reduce(f)}},{"../../../errors":477,"./end-of-stream":486}],489:[function(t,s,l){var i=t("../../../errors").codes.ERR_INVALID_OPT_VALUE;s.exports={getHighWaterMark:function(o,d,c,a){var u=function(h,f,m){return h.highWaterMark!=null?h.highWaterMark:f?h[m]:null}(d,a,c);if(u!=null){if(!isFinite(u)||Math.floor(u)!==u||u<0)throw new i(a?c:"highWaterMark",u);return Math.floor(u)}return o.objectMode?16:16384}}},{"../../../errors":477}],490:[function(t,s,l){s.exports=t("events").EventEmitter},{events:422}],491:[function(t,s,l){(l=s.exports=t("./lib/_stream_readable.js")).Stream=l,l.Readable=l,l.Writable=t("./lib/_stream_writable.js"),l.Duplex=t("./lib/_stream_duplex.js"),l.Transform=t("./lib/_stream_transform.js"),l.PassThrough=t("./lib/_stream_passthrough.js"),l.finished=t("./lib/internal/streams/end-of-stream.js"),l.pipeline=t("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":478,"./lib/_stream_passthrough.js":479,"./lib/_stream_readable.js":480,"./lib/_stream_transform.js":481,"./lib/_stream_writable.js":482,"./lib/internal/streams/end-of-stream.js":486,"./lib/internal/streams/pipeline.js":488}],492:[function(t,s,l){var i=function(o){var d=Object.prototype,c=d.hasOwnProperty,a=Object.defineProperty||function(S,E,O){S[E]=O.value},u=typeof Symbol=="function"?Symbol:{},h=u.iterator||"@@iterator",f=u.asyncIterator||"@@asyncIterator",m=u.toStringTag||"@@toStringTag";function b(S,E,O){return Object.defineProperty(S,E,{value:O,enumerable:!0,configurable:!0,writable:!0}),S[E]}try{b({},"")}catch{b=function(E,O,L){return E[O]=L}}function y(S,E,O,L){var z=E&&E.prototype instanceof x?E:x,G=Object.create(z.prototype),Z=new A(L||[]);return a(G,"_invoke",{value:Q(S,O,Z)}),G}function g(S,E,O){try{return{type:"normal",arg:S.call(E,O)}}catch(L){return{type:"throw",arg:L}}}o.wrap=y;var w={};function x(){}function _(){}function j(){}var R={};b(R,h,function(){return this});var M=Object.getPrototypeOf,I=M&&M(M(N([])));I&&I!==d&&c.call(I,h)&&(R=I);var F=j.prototype=x.prototype=Object.create(R);function B(S){["next","throw","return"].forEach(function(E){b(S,E,function(O){return this._invoke(E,O)})})}function U(S,E){var O;a(this,"_invoke",{value:function(L,z){function G(){return new E(function(Z,ee){(function W(J,$,q,Y){var se=g(S[J],S,$);if(se.type!=="throw"){var oe=se.arg,ae=oe.value;return ae&&typeof ae=="object"&&c.call(ae,"__await")?E.resolve(ae.__await).then(function(ce){W("next",ce,q,Y)},function(ce){W("throw",ce,q,Y)}):E.resolve(ae).then(function(ce){oe.value=ce,q(oe)},function(ce){return W("throw",ce,q,Y)})}Y(se.arg)})(L,z,Z,ee)})}return O=O?O.then(G,G):G()}})}function Q(S,E,O){var L="suspendedStart";return function(z,G){if(L==="executing")throw new Error("Generator is already running");if(L==="completed"){if(z==="throw")throw G;return k()}for(O.method=z,O.arg=G;;){var Z=O.delegate;if(Z){var ee=K(Z,O);if(ee){if(ee===w)continue;return ee}}if(O.method==="next")O.sent=O._sent=O.arg;else if(O.method==="throw"){if(L==="suspendedStart")throw L="completed",O.arg;O.dispatchException(O.arg)}else O.method==="return"&&O.abrupt("return",O.arg);L="executing";var W=g(S,E,O);if(W.type==="normal"){if(L=O.done?"completed":"suspendedYield",W.arg===w)continue;return{value:W.arg,done:O.done}}W.type==="throw"&&(L="completed",O.method="throw",O.arg=W.arg)}}}function K(S,E){var O=E.method,L=S.iterator[O];if(L===void 0)return E.delegate=null,O==="throw"&&S.iterator.return&&(E.method="return",E.arg=void 0,K(S,E),E.method==="throw")||O!=="return"&&(E.method="throw",E.arg=new TypeError("The iterator does not provide a '"+O+"' method")),w;var z=g(L,S.iterator,E.arg);if(z.type==="throw")return E.method="throw",E.arg=z.arg,E.delegate=null,w;var G=z.arg;return G?G.done?(E[S.resultName]=G.value,E.next=S.nextLoc,E.method!=="return"&&(E.method="next",E.arg=void 0),E.delegate=null,w):G:(E.method="throw",E.arg=new TypeError("iterator result is not an object"),E.delegate=null,w)}function T(S){var E={tryLoc:S[0]};1 in S&&(E.catchLoc=S[1]),2 in S&&(E.finallyLoc=S[2],E.afterLoc=S[3]),this.tryEntries.push(E)}function P(S){var E=S.completion||{};E.type="normal",delete E.arg,S.completion=E}function A(S){this.tryEntries=[{tryLoc:"root"}],S.forEach(T,this),this.reset(!0)}function N(S){if(S){var E=S[h];if(E)return E.call(S);if(typeof S.next=="function")return S;if(!isNaN(S.length)){var O=-1,L=function z(){for(;++O<S.length;)if(c.call(S,O))return z.value=S[O],z.done=!1,z;return z.value=void 0,z.done=!0,z};return L.next=L}}return{next:k}}function k(){return{value:void 0,done:!0}}return _.prototype=j,a(F,"constructor",{value:j,configurable:!0}),a(j,"constructor",{value:_,configurable:!0}),_.displayName=b(j,m,"GeneratorFunction"),o.isGeneratorFunction=function(S){var E=typeof S=="function"&&S.constructor;return!!E&&(E===_||(E.displayName||E.name)==="GeneratorFunction")},o.mark=function(S){return Object.setPrototypeOf?Object.setPrototypeOf(S,j):(S.__proto__=j,b(S,m,"GeneratorFunction")),S.prototype=Object.create(F),S},o.awrap=function(S){return{__await:S}},B(U.prototype),b(U.prototype,f,function(){return this}),o.AsyncIterator=U,o.async=function(S,E,O,L,z){z===void 0&&(z=Promise);var G=new U(y(S,E,O,L),z);return o.isGeneratorFunction(E)?G:G.next().then(function(Z){return Z.done?Z.value:G.next()})},B(F),b(F,m,"Generator"),b(F,h,function(){return this}),b(F,"toString",function(){return"[object Generator]"}),o.keys=function(S){var E=Object(S),O=[];for(var L in E)O.push(L);return O.reverse(),function z(){for(;O.length;){var G=O.pop();if(G in E)return z.value=G,z.done=!1,z}return z.done=!0,z}},o.values=N,A.prototype={constructor:A,reset:function(S){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(P),!S)for(var E in this)E.charAt(0)==="t"&&c.call(this,E)&&!isNaN(+E.slice(1))&&(this[E]=void 0)},stop:function(){this.done=!0;var S=this.tryEntries[0].completion;if(S.type==="throw")throw S.arg;return this.rval},dispatchException:function(S){if(this.done)throw S;var E=this;function O(W,J){return G.type="throw",G.arg=S,E.next=W,J&&(E.method="next",E.arg=void 0),!!J}for(var L=this.tryEntries.length-1;L>=0;--L){var z=this.tryEntries[L],G=z.completion;if(z.tryLoc==="root")return O("end");if(z.tryLoc<=this.prev){var Z=c.call(z,"catchLoc"),ee=c.call(z,"finallyLoc");if(Z&&ee){if(this.prev<z.catchLoc)return O(z.catchLoc,!0);if(this.prev<z.finallyLoc)return O(z.finallyLoc)}else if(Z){if(this.prev<z.catchLoc)return O(z.catchLoc,!0)}else{if(!ee)throw new Error("try statement without catch or finally");if(this.prev<z.finallyLoc)return O(z.finallyLoc)}}}},abrupt:function(S,E){for(var O=this.tryEntries.length-1;O>=0;--O){var L=this.tryEntries[O];if(L.tryLoc<=this.prev&&c.call(L,"finallyLoc")&&this.prev<L.finallyLoc){var z=L;break}}z&&(S==="break"||S==="continue")&&z.tryLoc<=E&&E<=z.finallyLoc&&(z=null);var G=z?z.completion:{};return G.type=S,G.arg=E,z?(this.method="next",this.next=z.finallyLoc,w):this.complete(G)},complete:function(S,E){if(S.type==="throw")throw S.arg;return S.type==="break"||S.type==="continue"?this.next=S.arg:S.type==="return"?(this.rval=this.arg=S.arg,this.method="return",this.next="end"):S.type==="normal"&&E&&(this.next=E),w},finish:function(S){for(var E=this.tryEntries.length-1;E>=0;--E){var O=this.tryEntries[E];if(O.finallyLoc===S)return this.complete(O.completion,O.afterLoc),P(O),w}},catch:function(S){for(var E=this.tryEntries.length-1;E>=0;--E){var O=this.tryEntries[E];if(O.tryLoc===S){var L=O.completion;if(L.type==="throw"){var z=L.arg;P(O)}return z}}throw new Error("illegal catch attempt")},delegateYield:function(S,E,O){return this.delegate={iterator:N(S),resultName:E,nextLoc:O},this.method==="next"&&(this.arg=void 0),w}},o}(typeof s=="object"?s.exports:{});try{regeneratorRuntime=i}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=i:Function("r","regeneratorRuntime = r")(i)}},{}],493:[function(t,s,l){var i=t("buffer").Buffer,o=t("inherits"),d=t("hash-base"),c=new Array(16),a=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],u=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],h=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],f=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],m=[0,1518500249,1859775393,2400959708,2840853838],b=[1352829926,1548603684,1836072691,2053994217,0];function y(){d.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function g(M,I){return M<<I|M>>>32-I}function w(M,I,F,B,U,Q,K,T){return g(M+(I^F^B)+Q+K|0,T)+U|0}function x(M,I,F,B,U,Q,K,T){return g(M+(I&F|~I&B)+Q+K|0,T)+U|0}function _(M,I,F,B,U,Q,K,T){return g(M+((I|~F)^B)+Q+K|0,T)+U|0}function j(M,I,F,B,U,Q,K,T){return g(M+(I&B|F&~B)+Q+K|0,T)+U|0}function R(M,I,F,B,U,Q,K,T){return g(M+(I^(F|~B))+Q+K|0,T)+U|0}o(y,d),y.prototype._update=function(){for(var M=c,I=0;I<16;++I)M[I]=this._block.readInt32LE(4*I);for(var F=0|this._a,B=0|this._b,U=0|this._c,Q=0|this._d,K=0|this._e,T=0|this._a,P=0|this._b,A=0|this._c,N=0|this._d,k=0|this._e,S=0;S<80;S+=1){var E,O;S<16?(E=w(F,B,U,Q,K,M[a[S]],m[0],h[S]),O=R(T,P,A,N,k,M[u[S]],b[0],f[S])):S<32?(E=x(F,B,U,Q,K,M[a[S]],m[1],h[S]),O=j(T,P,A,N,k,M[u[S]],b[1],f[S])):S<48?(E=_(F,B,U,Q,K,M[a[S]],m[2],h[S]),O=_(T,P,A,N,k,M[u[S]],b[2],f[S])):S<64?(E=j(F,B,U,Q,K,M[a[S]],m[3],h[S]),O=x(T,P,A,N,k,M[u[S]],b[3],f[S])):(E=R(F,B,U,Q,K,M[a[S]],m[4],h[S]),O=w(T,P,A,N,k,M[u[S]],b[4],f[S])),F=K,K=Q,Q=g(U,10),U=B,B=E,T=k,k=N,N=g(A,10),A=P,P=O}var L=this._b+U+N|0;this._b=this._c+Q+k|0,this._c=this._d+K+T|0,this._d=this._e+F+P|0,this._e=this._a+B+A|0,this._a=L},y.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var M=i.alloc?i.alloc(20):new i(20);return M.writeInt32LE(this._a,0),M.writeInt32LE(this._b,4),M.writeInt32LE(this._c,8),M.writeInt32LE(this._d,12),M.writeInt32LE(this._e,16),M},s.exports=y},{buffer:220,"hash-base":425,inherits:440}],494:[function(t,s,l){/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var i=t("buffer"),o=i.Buffer;function d(a,u){for(var h in a)u[h]=a[h]}function c(a,u,h){return o(a,u,h)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?s.exports=i:(d(i,l),l.Buffer=c),c.prototype=Object.create(o.prototype),d(o,c),c.from=function(a,u,h){if(typeof a=="number")throw new TypeError("Argument must not be a number");return o(a,u,h)},c.alloc=function(a,u,h){if(typeof a!="number")throw new TypeError("Argument must be a number");var f=o(a);return u!==void 0?typeof h=="string"?f.fill(u,h):f.fill(u):f.fill(0),f},c.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return o(a)},c.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return i.SlowBuffer(a)}},{buffer:220}],495:[function(t,s,l){(function(i){(function(){var o,d=t("buffer"),c=d.Buffer,a={};for(o in d)d.hasOwnProperty(o)&&o!=="SlowBuffer"&&o!=="Buffer"&&(a[o]=d[o]);var u=a.Buffer={};for(o in c)c.hasOwnProperty(o)&&o!=="allocUnsafe"&&o!=="allocUnsafeSlow"&&(u[o]=c[o]);if(a.Buffer.prototype=c.prototype,u.from&&u.from!==Uint8Array.from||(u.from=function(h,f,m){if(typeof h=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof h);if(h&&h.length===void 0)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h);return c(h,f,m)}),u.alloc||(u.alloc=function(h,f,m){if(typeof h!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof h);if(h<0||h>=2*(1<<30))throw new RangeError('The value "'+h+'" is invalid for option "size"');var b=c(h);return f&&f.length!==0?typeof m=="string"?b.fill(f,m):b.fill(f):b.fill(0),b}),!a.kStringMaxLength)try{a.kStringMaxLength=i.binding("buffer").kStringMaxLength}catch{}a.constants||(a.constants={MAX_LENGTH:a.kMaxLength},a.kStringMaxLength&&(a.constants.MAX_STRING_LENGTH=a.kStringMaxLength)),s.exports=a}).call(this)}).call(this,t("_process"))},{_process:467,buffer:220}],496:[function(t,s,l){Object.defineProperty(l,"__esModule",{value:!0});const i=t("xmlchars/xml/1.0/ed5"),o=t("xmlchars/xml/1.1/ed2"),d=t("xmlchars/xmlns/1.0/ed3");var c=i.isS,a=i.isChar,u=i.isNameStartChar,h=i.isNameChar,f=i.S_LIST,m=i.NAME_RE,b=o.isChar,y=d.isNCNameStartChar,g=d.isNCNameChar,w=d.NC_NAME_RE;const x="http://www.w3.org/XML/1998/namespace",_="http://www.w3.org/2000/xmlns/",j={__proto__:null,xml:x,xmlns:_},R={__proto__:null,amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},M=N=>N===34||N===39,I=[34,39],F=[...I,91,62],B=[...I,60,93],U=[61,63,...f],Q=[...f,62,38,60];function K(N,k,S){switch(k){case"xml":S!==x&&N.fail(`xml prefix must be bound to ${x}.`);break;case"xmlns":S!==_&&N.fail(`xmlns prefix must be bound to ${_}.`)}switch(S){case _:N.fail(k===""?`the default namespace may not be set to ${S}.`:`may not assign a prefix (even "xmlns") to the URI ${_}.`);break;case x:switch(k){case"xml":break;case"":N.fail(`the default namespace may not be set to ${S}.`);break;default:N.fail("may not assign the xml namespace to another prefix.")}}}const T=N=>w.test(N),P=N=>m.test(N);l.EVENTS=["xmldecl","text","processinginstruction","doctype","comment","opentagstart","attribute","opentag","closetag","cdata","error","end","ready"];const A={xmldecl:"xmldeclHandler",text:"textHandler",processinginstruction:"piHandler",doctype:"doctypeHandler",comment:"commentHandler",opentagstart:"openTagStartHandler",attribute:"attributeHandler",opentag:"openTagHandler",closetag:"closeTagHandler",cdata:"cdataHandler",error:"errorHandler",end:"endHandler",ready:"readyHandler"};l.SaxesParser=class{constructor(N){this.opt=N??{},this.fragmentOpt=!!this.opt.fragment;const k=this.xmlnsOpt=!!this.opt.xmlns;if(this.trackPosition=this.opt.position!==!1,this.fileName=this.opt.fileName,k){this.nameStartCheck=y,this.nameCheck=g,this.isName=T,this.processAttribs=this.processAttribsNS,this.pushAttrib=this.pushAttribNS,this.ns=Object.assign({__proto__:null},j);const S=this.opt.additionalNamespaces;S!=null&&(function(E,O){for(const L of Object.keys(O))K(E,L,O[L])}(this,S),Object.assign(this.ns,S))}else this.nameStartCheck=u,this.nameCheck=h,this.isName=P,this.processAttribs=this.processAttribsPlain,this.pushAttrib=this.pushAttribPlain;this.stateTable=[this.sBegin,this.sBeginWhitespace,this.sDoctype,this.sDoctypeQuote,this.sDTD,this.sDTDQuoted,this.sDTDOpenWaka,this.sDTDOpenWakaBang,this.sDTDComment,this.sDTDCommentEnding,this.sDTDCommentEnded,this.sDTDPI,this.sDTDPIEnding,this.sText,this.sEntity,this.sOpenWaka,this.sOpenWakaBang,this.sComment,this.sCommentEnding,this.sCommentEnded,this.sCData,this.sCDataEnding,this.sCDataEnding2,this.sPIFirstChar,this.sPIRest,this.sPIBody,this.sPIEnding,this.sXMLDeclNameStart,this.sXMLDeclName,this.sXMLDeclEq,this.sXMLDeclValueStart,this.sXMLDeclValue,this.sXMLDeclSeparator,this.sXMLDeclEnding,this.sOpenTag,this.sOpenTagSlash,this.sAttrib,this.sAttribName,this.sAttribNameSawWhite,this.sAttribValue,this.sAttribValueQuoted,this.sAttribValueClosed,this.sAttribValueUnquoted,this.sCloseTag,this.sCloseTagSawWhite],this._init()}get closed(){return this._closed}_init(){var N;this.openWakaBang="",this.text="",this.name="",this.piTarget="",this.entity="",this.q=null,this.tags=[],this.tag=null,this.topNS=null,this.chunk="",this.chunkPosition=0,this.i=0,this.prevI=0,this.carriedFromPrevious=void 0,this.forbiddenState=0,this.attribList=[];const{fragmentOpt:k}=this;this.state=k?13:0,this.reportedTextBeforeRoot=this.reportedTextAfterRoot=this.closedRoot=this.sawRoot=k,this.xmlDeclPossible=!k,this.xmlDeclExpects=["version"],this.entityReturnState=void 0;let{defaultXMLVersion:S}=this.opt;if(S===void 0){if(this.opt.forceXMLVersion===!0)throw new Error("forceXMLVersion set but defaultXMLVersion is not set");S="1.0"}this.setXMLVersion(S),this.positionAtNewLine=0,this.doctype=!1,this._closed=!1,this.xmlDecl={version:void 0,encoding:void 0,standalone:void 0},this.line=1,this.column=0,this.ENTITIES=Object.create(R),(N=this.readyHandler)===null||N===void 0||N.call(this)}get position(){return this.chunkPosition+this.i}get columnIndex(){return this.position-this.positionAtNewLine}on(N,k){this[A[N]]=k}off(N){this[A[N]]=void 0}makeError(N){var k;let S=(k=this.fileName)!==null&&k!==void 0?k:"";return this.trackPosition&&(S.length>0&&(S+=":"),S+=`${this.line}:${this.column}`),S.length>0&&(S+=": "),new Error(S+N)}fail(N){const k=this.makeError(N),S=this.errorHandler;if(S===void 0)throw k;return S(k),this}write(N){if(this.closed)return this.fail("cannot write after close; assign an onready handler.");let k=!1;N===null?(k=!0,N=""):typeof N=="object"&&(N=N.toString()),this.carriedFromPrevious!==void 0&&(N=`${this.carriedFromPrevious}${N}`,this.carriedFromPrevious=void 0);let S=N.length;const E=N.charCodeAt(S-1);!k&&(E===13||E>=55296&&E<=56319)&&(this.carriedFromPrevious=N[S-1],S--,N=N.slice(0,S));const{stateTable:O}=this;for(this.chunk=N,this.i=0;this.i<S;)O[this.state].call(this);return this.chunkPosition+=S,k?this.end():this}close(){return this.write(null)}getCode10(){const{chunk:N,i:k}=this;if(this.prevI=k,this.i=k+1,k>=N.length)return-1;const S=N.charCodeAt(k);if(this.column++,S<55296){if(S>=32||S===9)return S;switch(S){case 10:return this.line++,this.column=0,this.positionAtNewLine=this.position,10;case 13:return N.charCodeAt(k+1)===10&&(this.i=k+2),this.line++,this.column=0,this.positionAtNewLine=this.position,-2;default:return this.fail("disallowed character."),S}}if(S>56319)return S>=57344&&S<=65533||this.fail("disallowed character."),S;const E=65536+1024*(S-55296)+(N.charCodeAt(k+1)-56320);return this.i=k+2,E>1114111&&this.fail("disallowed character."),E}getCode11(){const{chunk:N,i:k}=this;if(this.prevI=k,this.i=k+1,k>=N.length)return-1;const S=N.charCodeAt(k);if(this.column++,S<55296){if(S>31&&S<127||S>159&&S!==8232||S===9)return S;switch(S){case 10:return this.line++,this.column=0,this.positionAtNewLine=this.position,10;case 13:{const O=N.charCodeAt(k+1);O!==10&&O!==133||(this.i=k+2)}case 133:case 8232:return this.line++,this.column=0,this.positionAtNewLine=this.position,-2;default:return this.fail("disallowed character."),S}}if(S>56319)return S>=57344&&S<=65533||this.fail("disallowed character."),S;const E=65536+1024*(S-55296)+(N.charCodeAt(k+1)-56320);return this.i=k+2,E>1114111&&this.fail("disallowed character."),E}getCodeNorm(){const N=this.getCode();return N===-2?10:N}unget(){this.i=this.prevI,this.column--}captureTo(N){let{i:k}=this;const{chunk:S}=this;for(;;){const E=this.getCode(),O=E===-2,L=O?10:E;if(L===-1||N.includes(L))return this.text+=S.slice(k,this.prevI),L;O&&(this.text+=S.slice(k,this.prevI)+`
`,k=this.i)}}captureToChar(N){let{i:k}=this;const{chunk:S}=this;for(;;){let E=this.getCode();switch(E){case-2:this.text+=S.slice(k,this.prevI)+`
`,k=this.i,E=10;break;case-1:return this.text+=S.slice(k),!1}if(E===N)return this.text+=S.slice(k,this.prevI),!0}}captureNameChars(){const{chunk:N,i:k}=this;for(;;){const S=this.getCode();if(S===-1)return this.name+=N.slice(k),-1;if(!h(S))return this.name+=N.slice(k,this.prevI),S===-2?10:S}}skipSpaces(){for(;;){const N=this.getCodeNorm();if(N===-1||!c(N))return N}}setXMLVersion(N){this.currentXMLVersion=N,N==="1.0"?(this.isChar=a,this.getCode=this.getCode10):(this.isChar=b,this.getCode=this.getCode11)}sBegin(){this.chunk.charCodeAt(0)===65279&&(this.i++,this.column++),this.state=1}sBeginWhitespace(){const N=this.i,k=this.skipSpaces();switch(this.prevI!==N&&(this.xmlDeclPossible=!1),k){case 60:if(this.state=15,this.text.length!==0)throw new Error("no-empty text at start");break;case-1:break;default:this.unget(),this.state=13,this.xmlDeclPossible=!1}}sDoctype(){var N;const k=this.captureTo(F);switch(k){case 62:(N=this.doctypeHandler)===null||N===void 0||N.call(this,this.text),this.text="",this.state=13,this.doctype=!0;break;case-1:break;default:this.text+=String.fromCodePoint(k),k===91?this.state=4:M(k)&&(this.state=3,this.q=k)}}sDoctypeQuote(){const N=this.q;this.captureToChar(N)&&(this.text+=String.fromCodePoint(N),this.q=null,this.state=2)}sDTD(){const N=this.captureTo(B);N!==-1&&(this.text+=String.fromCodePoint(N),N===93?this.state=2:N===60?this.state=6:M(N)&&(this.state=5,this.q=N))}sDTDQuoted(){const N=this.q;this.captureToChar(N)&&(this.text+=String.fromCodePoint(N),this.state=4,this.q=null)}sDTDOpenWaka(){const N=this.getCodeNorm();switch(this.text+=String.fromCodePoint(N),N){case 33:this.state=7,this.openWakaBang="";break;case 63:this.state=11;break;default:this.state=4}}sDTDOpenWakaBang(){const N=String.fromCodePoint(this.getCodeNorm()),k=this.openWakaBang+=N;this.text+=N,k!=="-"&&(this.state=k==="--"?8:4,this.openWakaBang="")}sDTDComment(){this.captureToChar(45)&&(this.text+="-",this.state=9)}sDTDCommentEnding(){const N=this.getCodeNorm();this.text+=String.fromCodePoint(N),this.state=N===45?10:8}sDTDCommentEnded(){const N=this.getCodeNorm();this.text+=String.fromCodePoint(N),N===62?this.state=4:(this.fail("malformed comment."),this.state=8)}sDTDPI(){this.captureToChar(63)&&(this.text+="?",this.state=12)}sDTDPIEnding(){const N=this.getCodeNorm();this.text+=String.fromCodePoint(N),N===62&&(this.state=4)}sText(){this.tags.length!==0?this.handleTextInRoot():this.handleTextOutsideRoot()}sEntity(){let{i:N}=this;const{chunk:k}=this;e:for(;;)switch(this.getCode()){case-2:this.entity+=k.slice(N,this.prevI)+`
`,N=this.i;break;case 59:{const{entityReturnState:S}=this,E=this.entity+k.slice(N,this.prevI);let O;this.state=S,E===""?(this.fail("empty entity name."),O="&;"):(O=this.parseEntity(E),this.entity=""),S===13&&this.textHandler===void 0||(this.text+=O);break e}case-1:this.entity+=k.slice(N);break e}}sOpenWaka(){const N=this.getCode();if(u(N))this.state=34,this.unget(),this.xmlDeclPossible=!1;else switch(N){case 47:this.state=43,this.xmlDeclPossible=!1;break;case 33:this.state=16,this.openWakaBang="",this.xmlDeclPossible=!1;break;case 63:this.state=23;break;default:this.fail("disallowed character in tag name"),this.state=13,this.xmlDeclPossible=!1}}sOpenWakaBang(){switch(this.openWakaBang+=String.fromCodePoint(this.getCodeNorm()),this.openWakaBang){case"[CDATA[":this.sawRoot||this.reportedTextBeforeRoot||(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0),this.state=20,this.openWakaBang="";break;case"--":this.state=17,this.openWakaBang="";break;case"DOCTYPE":this.state=2,(this.doctype||this.sawRoot)&&this.fail("inappropriately located doctype declaration."),this.openWakaBang="";break;default:this.openWakaBang.length>=7&&this.fail("incorrect syntax.")}}sComment(){this.captureToChar(45)&&(this.state=18)}sCommentEnding(){var N;const k=this.getCodeNorm();k===45?(this.state=19,(N=this.commentHandler)===null||N===void 0||N.call(this,this.text),this.text=""):(this.text+="-"+String.fromCodePoint(k),this.state=17)}sCommentEnded(){const N=this.getCodeNorm();N!==62?(this.fail("malformed comment."),this.text+="--"+String.fromCodePoint(N),this.state=17):this.state=13}sCData(){this.captureToChar(93)&&(this.state=21)}sCDataEnding(){const N=this.getCodeNorm();N===93?this.state=22:(this.text+="]"+String.fromCodePoint(N),this.state=20)}sCDataEnding2(){var N;const k=this.getCodeNorm();switch(k){case 62:(N=this.cdataHandler)===null||N===void 0||N.call(this,this.text),this.text="",this.state=13;break;case 93:this.text+="]";break;default:this.text+="]]"+String.fromCodePoint(k),this.state=20}}sPIFirstChar(){const N=this.getCodeNorm();this.nameStartCheck(N)?(this.piTarget+=String.fromCodePoint(N),this.state=24):N===63||c(N)?(this.fail("processing instruction without a target."),this.state=N===63?26:25):(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(N),this.state=24)}sPIRest(){const{chunk:N,i:k}=this;for(;;){const S=this.getCodeNorm();if(S===-1)return void(this.piTarget+=N.slice(k));if(!this.nameCheck(S)){this.piTarget+=N.slice(k,this.prevI);const E=S===63;E||c(S)?this.piTarget==="xml"?(this.xmlDeclPossible||this.fail("an XML declaration must be at the start of the document."),this.state=E?33:27):this.state=E?26:25:(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(S));break}}}sPIBody(){if(this.text.length===0){const N=this.getCodeNorm();N===63?this.state=26:c(N)||(this.text=String.fromCodePoint(N))}else this.captureToChar(63)&&(this.state=26)}sPIEnding(){var N;const k=this.getCodeNorm();if(k===62){const{piTarget:S}=this;S.toLowerCase()==="xml"&&this.fail("the XML declaration must appear at the start of the document."),(N=this.piHandler)===null||N===void 0||N.call(this,{target:S,body:this.text}),this.piTarget=this.text="",this.state=13}else k===63?this.text+="?":(this.text+="?"+String.fromCodePoint(k),this.state=25);this.xmlDeclPossible=!1}sXMLDeclNameStart(){const N=this.skipSpaces();N!==63?N!==-1&&(this.state=28,this.name=String.fromCodePoint(N)):this.state=33}sXMLDeclName(){const N=this.captureTo(U);if(N===63)return this.state=33,this.name+=this.text,this.text="",void this.fail("XML declaration is incomplete.");if(c(N)||N===61){if(this.name+=this.text,this.text="",!this.xmlDeclExpects.includes(this.name))switch(this.name.length){case 0:this.fail("did not expect any more name/value pairs.");break;case 1:this.fail(`expected the name ${this.xmlDeclExpects[0]}.`);break;default:this.fail("expected one of "+this.xmlDeclExpects.join(", "))}this.state=N===61?30:29}}sXMLDeclEq(){const N=this.getCodeNorm();if(N===63)return this.state=33,void this.fail("XML declaration is incomplete.");c(N)||(N!==61&&this.fail("value required."),this.state=30)}sXMLDeclValueStart(){const N=this.getCodeNorm();if(N===63)return this.state=33,void this.fail("XML declaration is incomplete.");c(N)||(M(N)?this.q=N:(this.fail("value must be quoted."),this.q=32),this.state=31)}sXMLDeclValue(){const N=this.captureTo([this.q,63]);if(N===63)return this.state=33,this.text="",void this.fail("XML declaration is incomplete.");if(N===-1)return;const k=this.text;switch(this.text="",this.name){case"version":{this.xmlDeclExpects=["encoding","standalone"];const S=k;this.xmlDecl.version=S,/^1\.[0-9]+$/.test(S)?this.opt.forceXMLVersion||this.setXMLVersion(S):this.fail("version number must match /^1\\.[0-9]+$/.");break}case"encoding":/^[A-Za-z][A-Za-z0-9._-]*$/.test(k)||this.fail("encoding value must match /^[A-Za-z0-9][A-Za-z0-9._-]*$/."),this.xmlDeclExpects=["standalone"],this.xmlDecl.encoding=k;break;case"standalone":k!=="yes"&&k!=="no"&&this.fail('standalone value must match "yes" or "no".'),this.xmlDeclExpects=[],this.xmlDecl.standalone=k}this.name="",this.state=32}sXMLDeclSeparator(){const N=this.getCodeNorm();N!==63?(c(N)||(this.fail("whitespace required."),this.unget()),this.state=27):this.state=33}sXMLDeclEnding(){var N;this.getCodeNorm()===62?(this.piTarget!=="xml"?this.fail("processing instructions are not allowed before root."):this.name!=="version"&&this.xmlDeclExpects.includes("version")&&this.fail("XML declaration must contain a version."),(N=this.xmldeclHandler)===null||N===void 0||N.call(this,this.xmlDecl),this.name="",this.piTarget=this.text="",this.state=13):this.fail("The character ? is disallowed anywhere in XML declarations."),this.xmlDeclPossible=!1}sOpenTag(){var N;const k=this.captureNameChars();if(k===-1)return;const S=this.tag={name:this.name,attributes:Object.create(null)};switch(this.name="",this.xmlnsOpt&&(this.topNS=S.ns=Object.create(null)),(N=this.openTagStartHandler)===null||N===void 0||N.call(this,S),this.sawRoot=!0,!this.fragmentOpt&&this.closedRoot&&this.fail("documents may contain only one root."),k){case 62:this.openTag();break;case 47:this.state=35;break;default:c(k)||this.fail("disallowed character in tag name."),this.state=36}}sOpenTagSlash(){this.getCode()===62?this.openSelfClosingTag():(this.fail("forward-slash in opening tag not followed by >."),this.state=36)}sAttrib(){const N=this.skipSpaces();N!==-1&&(u(N)?(this.unget(),this.state=37):N===62?this.openTag():N===47?this.state=35:this.fail("disallowed character in attribute name."))}sAttribName(){const N=this.captureNameChars();N===61?this.state=39:c(N)?this.state=38:N===62?(this.fail("attribute without value."),this.pushAttrib(this.name,this.name),this.name=this.text="",this.openTag()):N!==-1&&this.fail("disallowed character in attribute name.")}sAttribNameSawWhite(){const N=this.skipSpaces();switch(N){case-1:return;case 61:this.state=39;break;default:this.fail("attribute without value."),this.text="",this.name="",N===62?this.openTag():u(N)?(this.unget(),this.state=37):(this.fail("disallowed character in attribute name."),this.state=36)}}sAttribValue(){const N=this.getCodeNorm();M(N)?(this.q=N,this.state=40):c(N)||(this.fail("unquoted attribute value."),this.state=42,this.unget())}sAttribValueQuoted(){const{q:N,chunk:k}=this;let{i:S}=this;for(;;)switch(this.getCode()){case N:return this.pushAttrib(this.name,this.text+k.slice(S,this.prevI)),this.name=this.text="",this.q=null,void(this.state=41);case 38:return this.text+=k.slice(S,this.prevI),this.state=14,void(this.entityReturnState=40);case 10:case-2:case 9:this.text+=k.slice(S,this.prevI)+" ",S=this.i;break;case 60:return this.text+=k.slice(S,this.prevI),void this.fail("disallowed character.");case-1:return void(this.text+=k.slice(S))}}sAttribValueClosed(){const N=this.getCodeNorm();c(N)?this.state=36:N===62?this.openTag():N===47?this.state=35:u(N)?(this.fail("no whitespace between attributes."),this.unget(),this.state=37):this.fail("disallowed character in attribute name.")}sAttribValueUnquoted(){const N=this.captureTo(Q);switch(N){case 38:this.state=14,this.entityReturnState=42;break;case 60:this.fail("disallowed character.");break;case-1:break;default:this.text.includes("]]>")&&this.fail('the string "]]>" is disallowed in char data.'),this.pushAttrib(this.name,this.text),this.name=this.text="",N===62?this.openTag():this.state=36}}sCloseTag(){const N=this.captureNameChars();N===62?this.closeTag():c(N)?this.state=44:N!==-1&&this.fail("disallowed character in closing tag.")}sCloseTagSawWhite(){switch(this.skipSpaces()){case 62:this.closeTag();break;case-1:break;default:this.fail("disallowed character in closing tag.")}}handleTextInRoot(){let{i:N,forbiddenState:k}=this;const{chunk:S,textHandler:E}=this;e:for(;;)switch(this.getCode()){case 60:if(this.state=15,E!==void 0){const{text:O}=this,L=S.slice(N,this.prevI);O.length!==0?(E(O+L),this.text=""):L.length!==0&&E(L)}k=0;break e;case 38:this.state=14,this.entityReturnState=13,E!==void 0&&(this.text+=S.slice(N,this.prevI)),k=0;break e;case 93:switch(k){case 0:k=1;break;case 1:k=2;break;case 2:break;default:throw new Error("impossible state")}break;case 62:k===2&&this.fail('the string "]]>" is disallowed in char data.'),k=0;break;case-2:E!==void 0&&(this.text+=S.slice(N,this.prevI)+`
`),N=this.i,k=0;break;case-1:E!==void 0&&(this.text+=S.slice(N));break e;default:k=0}this.forbiddenState=k}handleTextOutsideRoot(){let{i:N}=this;const{chunk:k,textHandler:S}=this;let E=!1;e:for(;;){const O=this.getCode();switch(O){case 60:if(this.state=15,S!==void 0){const{text:L}=this,z=k.slice(N,this.prevI);L.length!==0?(S(L+z),this.text=""):z.length!==0&&S(z)}break e;case 38:this.state=14,this.entityReturnState=13,S!==void 0&&(this.text+=k.slice(N,this.prevI)),E=!0;break e;case-2:S!==void 0&&(this.text+=k.slice(N,this.prevI)+`
`),N=this.i;break;case-1:S!==void 0&&(this.text+=k.slice(N));break e;default:c(O)||(E=!0)}}E&&(this.sawRoot||this.reportedTextBeforeRoot||(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0))}pushAttribNS(N,k){var S;const{prefix:E,local:O}=this.qname(N),L={name:N,prefix:E,local:O,value:k};if(this.attribList.push(L),(S=this.attributeHandler)===null||S===void 0||S.call(this,L),E==="xmlns"){const z=k.trim();this.currentXMLVersion==="1.0"&&z===""&&this.fail("invalid attempt to undefine prefix in XML 1.0"),this.topNS[O]=z,K(this,O,z)}else if(N==="xmlns"){const z=k.trim();this.topNS[""]=z,K(this,"",z)}}pushAttribPlain(N,k){var S;const E={name:N,value:k};this.attribList.push(E),(S=this.attributeHandler)===null||S===void 0||S.call(this,E)}end(){var N,k;this.sawRoot||this.fail("document must contain a root element.");const{tags:S}=this;for(;S.length>0;){const O=S.pop();this.fail("unclosed tag: "+O.name)}this.state!==0&&this.state!==13&&this.fail("unexpected end.");const{text:E}=this;return E.length!==0&&((N=this.textHandler)===null||N===void 0||N.call(this,E),this.text=""),this._closed=!0,(k=this.endHandler)===null||k===void 0||k.call(this),this._init(),this}resolve(N){var k,S;let E=this.topNS[N];if(E!==void 0)return E;const{tags:O}=this;for(let L=O.length-1;L>=0;L--)if(E=O[L].ns[N],E!==void 0)return E;return E=this.ns[N],E!==void 0?E:(S=(k=this.opt).resolvePrefix)===null||S===void 0?void 0:S.call(k,N)}qname(N){const k=N.indexOf(":");if(k===-1)return{prefix:"",local:N};const S=N.slice(k+1),E=N.slice(0,k);return(E===""||S===""||S.includes(":"))&&this.fail(`malformed name: ${N}.`),{prefix:E,local:S}}processAttribsNS(){var N;const{attribList:k}=this,S=this.tag;{const{prefix:L,local:z}=this.qname(S.name);S.prefix=L,S.local=z;const G=S.uri=(N=this.resolve(L))!==null&&N!==void 0?N:"";L!==""&&(L==="xmlns"&&this.fail('tags may not have "xmlns" as prefix.'),G===""&&(this.fail(`unbound namespace prefix: ${JSON.stringify(L)}.`),S.uri=L))}if(k.length===0)return;const{attributes:E}=S,O=new Set;for(const L of k){const{name:z,prefix:G,local:Z}=L;let ee,W;G===""?(ee=z==="xmlns"?_:"",W=z):(ee=this.resolve(G),ee===void 0&&(this.fail(`unbound namespace prefix: ${JSON.stringify(G)}.`),ee=G),W=`{${ee}}${Z}`),O.has(W)&&this.fail(`duplicate attribute: ${W}.`),O.add(W),L.uri=ee,E[z]=L}this.attribList=[]}processAttribsPlain(){const{attribList:N}=this,k=this.tag.attributes;for(const{name:S,value:E}of N)k[S]!==void 0&&this.fail(`duplicate attribute: ${S}.`),k[S]=E;this.attribList=[]}openTag(){var N;this.processAttribs();const{tags:k}=this,S=this.tag;S.isSelfClosing=!1,(N=this.openTagHandler)===null||N===void 0||N.call(this,S),k.push(S),this.state=13,this.name=""}openSelfClosingTag(){var N,k,S;this.processAttribs();const{tags:E}=this,O=this.tag;O.isSelfClosing=!0,(N=this.openTagHandler)===null||N===void 0||N.call(this,O),(k=this.closeTagHandler)===null||k===void 0||k.call(this,O),(this.tag=(S=E[E.length-1])!==null&&S!==void 0?S:null)===null&&(this.closedRoot=!0),this.state=13,this.name=""}closeTag(){const{tags:N,name:k}=this;if(this.state=13,this.name="",k==="")return this.fail("weird empty close tag."),void(this.text+="</>");const S=this.closeTagHandler;let E=N.length;for(;E-- >0;){const O=this.tag=N.pop();if(this.topNS=O.ns,S?.(O),O.name===k)break;this.fail("unexpected close tag.")}E===0?this.closedRoot=!0:E<0&&(this.fail(`unmatched closing tag: ${k}.`),this.text+=`</${k}>`)}parseEntity(N){if(N[0]!=="#"){const S=this.ENTITIES[N];return S!==void 0?S:(this.fail(this.isName(N)?"undefined entity.":"disallowed character in entity name."),`&${N};`)}let k=NaN;return N[1]==="x"&&/^#x[0-9a-f]+$/i.test(N)?k=parseInt(N.slice(2),16):/^#[0-9]+$/.test(N)&&(k=parseInt(N.slice(1),10)),this.isChar(k)?String.fromCodePoint(k):(this.fail("malformed character entity."),`&${N};`)}}},{"xmlchars/xml/1.0/ed5":543,"xmlchars/xml/1.1/ed2":544,"xmlchars/xmlns/1.0/ed3":545}],497:[function(t,s,l){var i=t("safe-buffer").Buffer;function o(d,c){this._block=i.alloc(d),this._finalSize=c,this._blockSize=d,this._len=0}o.prototype.update=function(d,c){typeof d=="string"&&(c=c||"utf8",d=i.from(d,c));for(var a=this._block,u=this._blockSize,h=d.length,f=this._len,m=0;m<h;){for(var b=f%u,y=Math.min(h-m,u-b),g=0;g<y;g++)a[b+g]=d[m+g];m+=y,(f+=y)%u==0&&this._update(a)}return this._len+=h,this},o.prototype.digest=function(d){var c=this._len%this._blockSize;this._block[c]=128,this._block.fill(0,c+1),c>=this._finalSize&&(this._update(this._block),this._block.fill(0));var a=8*this._len;if(a<=4294967295)this._block.writeUInt32BE(a,this._blockSize-4);else{var u=(4294967295&a)>>>0,h=(a-u)/4294967296;this._block.writeUInt32BE(h,this._blockSize-8),this._block.writeUInt32BE(u,this._blockSize-4)}this._update(this._block);var f=this._hash();return d?f.toString(d):f},o.prototype._update=function(){throw new Error("_update must be implemented by subclass")},s.exports=o},{"safe-buffer":494}],498:[function(t,s,l){var i=s.exports=function(o){o=o.toLowerCase();var d=i[o];if(!d)throw new Error(o+" is not supported (we accept pull requests)");return new d};i.sha=t("./sha"),i.sha1=t("./sha1"),i.sha224=t("./sha224"),i.sha256=t("./sha256"),i.sha384=t("./sha384"),i.sha512=t("./sha512")},{"./sha":499,"./sha1":500,"./sha224":501,"./sha256":502,"./sha384":503,"./sha512":504}],499:[function(t,s,l){var i=t("inherits"),o=t("./hash"),d=t("safe-buffer").Buffer,c=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function u(){this.init(),this._w=a,o.call(this,64,56)}function h(m){return m<<30|m>>>2}function f(m,b,y,g){return m===0?b&y|~b&g:m===2?b&y|b&g|y&g:b^y^g}i(u,o),u.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},u.prototype._update=function(m){for(var b,y=this._w,g=0|this._a,w=0|this._b,x=0|this._c,_=0|this._d,j=0|this._e,R=0;R<16;++R)y[R]=m.readInt32BE(4*R);for(;R<80;++R)y[R]=y[R-3]^y[R-8]^y[R-14]^y[R-16];for(var M=0;M<80;++M){var I=~~(M/20),F=0|((b=g)<<5|b>>>27)+f(I,w,x,_)+j+y[M]+c[I];j=_,_=x,x=h(w),w=g,g=F}this._a=g+this._a|0,this._b=w+this._b|0,this._c=x+this._c|0,this._d=_+this._d|0,this._e=j+this._e|0},u.prototype._hash=function(){var m=d.allocUnsafe(20);return m.writeInt32BE(0|this._a,0),m.writeInt32BE(0|this._b,4),m.writeInt32BE(0|this._c,8),m.writeInt32BE(0|this._d,12),m.writeInt32BE(0|this._e,16),m},s.exports=u},{"./hash":497,inherits:440,"safe-buffer":494}],500:[function(t,s,l){var i=t("inherits"),o=t("./hash"),d=t("safe-buffer").Buffer,c=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function u(){this.init(),this._w=a,o.call(this,64,56)}function h(b){return b<<5|b>>>27}function f(b){return b<<30|b>>>2}function m(b,y,g,w){return b===0?y&g|~y&w:b===2?y&g|y&w|g&w:y^g^w}i(u,o),u.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},u.prototype._update=function(b){for(var y,g=this._w,w=0|this._a,x=0|this._b,_=0|this._c,j=0|this._d,R=0|this._e,M=0;M<16;++M)g[M]=b.readInt32BE(4*M);for(;M<80;++M)g[M]=(y=g[M-3]^g[M-8]^g[M-14]^g[M-16])<<1|y>>>31;for(var I=0;I<80;++I){var F=~~(I/20),B=h(w)+m(F,x,_,j)+R+g[I]+c[F]|0;R=j,j=_,_=f(x),x=w,w=B}this._a=w+this._a|0,this._b=x+this._b|0,this._c=_+this._c|0,this._d=j+this._d|0,this._e=R+this._e|0},u.prototype._hash=function(){var b=d.allocUnsafe(20);return b.writeInt32BE(0|this._a,0),b.writeInt32BE(0|this._b,4),b.writeInt32BE(0|this._c,8),b.writeInt32BE(0|this._d,12),b.writeInt32BE(0|this._e,16),b},s.exports=u},{"./hash":497,inherits:440,"safe-buffer":494}],501:[function(t,s,l){var i=t("inherits"),o=t("./sha256"),d=t("./hash"),c=t("safe-buffer").Buffer,a=new Array(64);function u(){this.init(),this._w=a,d.call(this,64,56)}i(u,o),u.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},u.prototype._hash=function(){var h=c.allocUnsafe(28);return h.writeInt32BE(this._a,0),h.writeInt32BE(this._b,4),h.writeInt32BE(this._c,8),h.writeInt32BE(this._d,12),h.writeInt32BE(this._e,16),h.writeInt32BE(this._f,20),h.writeInt32BE(this._g,24),h},s.exports=u},{"./hash":497,"./sha256":502,inherits:440,"safe-buffer":494}],502:[function(t,s,l){var i=t("inherits"),o=t("./hash"),d=t("safe-buffer").Buffer,c=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],a=new Array(64);function u(){this.init(),this._w=a,o.call(this,64,56)}function h(g,w,x){return x^g&(w^x)}function f(g,w,x){return g&w|x&(g|w)}function m(g){return(g>>>2|g<<30)^(g>>>13|g<<19)^(g>>>22|g<<10)}function b(g){return(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7)}function y(g){return(g>>>7|g<<25)^(g>>>18|g<<14)^g>>>3}i(u,o),u.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},u.prototype._update=function(g){for(var w,x=this._w,_=0|this._a,j=0|this._b,R=0|this._c,M=0|this._d,I=0|this._e,F=0|this._f,B=0|this._g,U=0|this._h,Q=0;Q<16;++Q)x[Q]=g.readInt32BE(4*Q);for(;Q<64;++Q)x[Q]=0|(((w=x[Q-2])>>>17|w<<15)^(w>>>19|w<<13)^w>>>10)+x[Q-7]+y(x[Q-15])+x[Q-16];for(var K=0;K<64;++K){var T=U+b(I)+h(I,F,B)+c[K]+x[K]|0,P=m(_)+f(_,j,R)|0;U=B,B=F,F=I,I=M+T|0,M=R,R=j,j=_,_=T+P|0}this._a=_+this._a|0,this._b=j+this._b|0,this._c=R+this._c|0,this._d=M+this._d|0,this._e=I+this._e|0,this._f=F+this._f|0,this._g=B+this._g|0,this._h=U+this._h|0},u.prototype._hash=function(){var g=d.allocUnsafe(32);return g.writeInt32BE(this._a,0),g.writeInt32BE(this._b,4),g.writeInt32BE(this._c,8),g.writeInt32BE(this._d,12),g.writeInt32BE(this._e,16),g.writeInt32BE(this._f,20),g.writeInt32BE(this._g,24),g.writeInt32BE(this._h,28),g},s.exports=u},{"./hash":497,inherits:440,"safe-buffer":494}],503:[function(t,s,l){var i=t("inherits"),o=t("./sha512"),d=t("./hash"),c=t("safe-buffer").Buffer,a=new Array(160);function u(){this.init(),this._w=a,d.call(this,128,112)}i(u,o),u.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},u.prototype._hash=function(){var h=c.allocUnsafe(48);function f(m,b,y){h.writeInt32BE(m,y),h.writeInt32BE(b,y+4)}return f(this._ah,this._al,0),f(this._bh,this._bl,8),f(this._ch,this._cl,16),f(this._dh,this._dl,24),f(this._eh,this._el,32),f(this._fh,this._fl,40),h},s.exports=u},{"./hash":497,"./sha512":504,inherits:440,"safe-buffer":494}],504:[function(t,s,l){var i=t("inherits"),o=t("./hash"),d=t("safe-buffer").Buffer,c=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],a=new Array(160);function u(){this.init(),this._w=a,o.call(this,128,112)}function h(j,R,M){return M^j&(R^M)}function f(j,R,M){return j&R|M&(j|R)}function m(j,R){return(j>>>28|R<<4)^(R>>>2|j<<30)^(R>>>7|j<<25)}function b(j,R){return(j>>>14|R<<18)^(j>>>18|R<<14)^(R>>>9|j<<23)}function y(j,R){return(j>>>1|R<<31)^(j>>>8|R<<24)^j>>>7}function g(j,R){return(j>>>1|R<<31)^(j>>>8|R<<24)^(j>>>7|R<<25)}function w(j,R){return(j>>>19|R<<13)^(R>>>29|j<<3)^j>>>6}function x(j,R){return(j>>>19|R<<13)^(R>>>29|j<<3)^(j>>>6|R<<26)}function _(j,R){return j>>>0<R>>>0?1:0}i(u,o),u.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},u.prototype._update=function(j){for(var R=this._w,M=0|this._ah,I=0|this._bh,F=0|this._ch,B=0|this._dh,U=0|this._eh,Q=0|this._fh,K=0|this._gh,T=0|this._hh,P=0|this._al,A=0|this._bl,N=0|this._cl,k=0|this._dl,S=0|this._el,E=0|this._fl,O=0|this._gl,L=0|this._hl,z=0;z<32;z+=2)R[z]=j.readInt32BE(4*z),R[z+1]=j.readInt32BE(4*z+4);for(;z<160;z+=2){var G=R[z-30],Z=R[z-30+1],ee=y(G,Z),W=g(Z,G),J=w(G=R[z-4],Z=R[z-4+1]),$=x(Z,G),q=R[z-14],Y=R[z-14+1],se=R[z-32],oe=R[z-32+1],ae=W+Y|0,ce=ee+q+_(ae,W)|0;ce=(ce=ce+J+_(ae=ae+$|0,$)|0)+se+_(ae=ae+oe|0,oe)|0,R[z]=ce,R[z+1]=ae}for(var we=0;we<160;we+=2){ce=R[we],ae=R[we+1];var fe=f(M,I,F),re=f(P,A,N),ge=m(M,P),le=m(P,M),te=b(U,S),ie=b(S,U),ue=c[we],_e=c[we+1],je=h(U,Q,K),ke=h(S,E,O),Le=L+ie|0,Ue=T+te+_(Le,L)|0;Ue=(Ue=(Ue=Ue+je+_(Le=Le+ke|0,ke)|0)+ue+_(Le=Le+_e|0,_e)|0)+ce+_(Le=Le+ae|0,ae)|0;var Qe=le+re|0,Be=ge+fe+_(Qe,le)|0;T=K,L=O,K=Q,O=E,Q=U,E=S,U=B+Ue+_(S=k+Le|0,k)|0,B=F,k=N,F=I,N=A,I=M,A=P,M=Ue+Be+_(P=Le+Qe|0,Le)|0}this._al=this._al+P|0,this._bl=this._bl+A|0,this._cl=this._cl+N|0,this._dl=this._dl+k|0,this._el=this._el+S|0,this._fl=this._fl+E|0,this._gl=this._gl+O|0,this._hl=this._hl+L|0,this._ah=this._ah+M+_(this._al,P)|0,this._bh=this._bh+I+_(this._bl,A)|0,this._ch=this._ch+F+_(this._cl,N)|0,this._dh=this._dh+B+_(this._dl,k)|0,this._eh=this._eh+U+_(this._el,S)|0,this._fh=this._fh+Q+_(this._fl,E)|0,this._gh=this._gh+K+_(this._gl,O)|0,this._hh=this._hh+T+_(this._hl,L)|0},u.prototype._hash=function(){var j=d.allocUnsafe(64);function R(M,I,F){j.writeInt32BE(M,F),j.writeInt32BE(I,F+4)}return R(this._ah,this._al,0),R(this._bh,this._bl,8),R(this._ch,this._cl,16),R(this._dh,this._dl,24),R(this._eh,this._el,32),R(this._fh,this._fl,40),R(this._gh,this._gl,48),R(this._hh,this._hl,56),j},s.exports=u},{"./hash":497,inherits:440,"safe-buffer":494}],505:[function(t,s,l){s.exports=o;var i=t("events").EventEmitter;function o(){i.call(this)}t("inherits")(o,i),o.Readable=t("readable-stream/readable.js"),o.Writable=t("readable-stream/writable.js"),o.Duplex=t("readable-stream/duplex.js"),o.Transform=t("readable-stream/transform.js"),o.PassThrough=t("readable-stream/passthrough.js"),o.Stream=o,o.prototype.pipe=function(d,c){var a=this;function u(w){d.writable&&d.write(w)===!1&&a.pause&&a.pause()}function h(){a.readable&&a.resume&&a.resume()}a.on("data",u),d.on("drain",h),d._isStdio||c&&c.end===!1||(a.on("end",m),a.on("close",b));var f=!1;function m(){f||(f=!0,d.end())}function b(){f||(f=!0,typeof d.destroy=="function"&&d.destroy())}function y(w){if(g(),i.listenerCount(this,"error")===0)throw w}function g(){a.removeListener("data",u),d.removeListener("drain",h),a.removeListener("end",m),a.removeListener("close",b),a.removeListener("error",y),d.removeListener("error",y),a.removeListener("end",g),a.removeListener("close",g),d.removeListener("close",g)}return a.on("error",y),d.on("error",y),a.on("end",g),a.on("close",g),d.on("close",g),d.emit("pipe",a),d}},{events:422,inherits:440,"readable-stream/duplex.js":507,"readable-stream/passthrough.js":516,"readable-stream/readable.js":517,"readable-stream/transform.js":518,"readable-stream/writable.js":519}],506:[function(t,s,l){var i={}.toString;s.exports=Array.isArray||function(o){return i.call(o)=="[object Array]"}},{}],507:[function(t,s,l){s.exports=t("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":508}],508:[function(t,s,l){var i=t("process-nextick-args"),o=Object.keys||function(g){var w=[];for(var x in g)w.push(x);return w};s.exports=m;var d=Object.create(t("core-util-is"));d.inherits=t("inherits");var c=t("./_stream_readable"),a=t("./_stream_writable");d.inherits(m,c);for(var u=o(a.prototype),h=0;h<u.length;h++){var f=u[h];m.prototype[f]||(m.prototype[f]=a.prototype[f])}function m(g){if(!(this instanceof m))return new m(g);c.call(this,g),a.call(this,g),g&&g.readable===!1&&(this.readable=!1),g&&g.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,g&&g.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",b)}function b(){this.allowHalfOpen||this._writableState.ended||i.nextTick(y,this)}function y(g){g.end()}Object.defineProperty(m.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(m.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(g){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=g,this._writableState.destroyed=g)}}),m.prototype._destroy=function(g,w){this.push(null),this.end(),i.nextTick(w,g)}},{"./_stream_readable":510,"./_stream_writable":512,"core-util-is":383,inherits:440,"process-nextick-args":466}],509:[function(t,s,l){s.exports=d;var i=t("./_stream_transform"),o=Object.create(t("core-util-is"));function d(c){if(!(this instanceof d))return new d(c);i.call(this,c)}o.inherits=t("inherits"),o.inherits(d,i),d.prototype._transform=function(c,a,u){u(null,c)}},{"./_stream_transform":511,"core-util-is":383,inherits:440}],510:[function(t,s,l){(function(i,o){(function(){var d=t("process-nextick-args");s.exports=M;var c,a=t("isarray");M.ReadableState=R,t("events").EventEmitter;var u=function(L,z){return L.listeners(z).length},h=t("./internal/streams/stream"),f=t("safe-buffer").Buffer,m=(o!==void 0?o:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},b=Object.create(t("core-util-is"));b.inherits=t("inherits");var y=t("util"),g=void 0;g=y&&y.debuglog?y.debuglog("stream"):function(){};var w,x=t("./internal/streams/BufferList"),_=t("./internal/streams/destroy");b.inherits(M,h);var j=["error","close","destroy","pause","resume"];function R(L,z){L=L||{};var G=z instanceof(c=c||t("./_stream_duplex"));this.objectMode=!!L.objectMode,G&&(this.objectMode=this.objectMode||!!L.readableObjectMode);var Z=L.highWaterMark,ee=L.readableHighWaterMark,W=this.objectMode?16:16384;this.highWaterMark=Z||Z===0?Z:G&&(ee||ee===0)?ee:W,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new x,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=L.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,L.encoding&&(w||(w=t("string_decoder/").StringDecoder),this.decoder=new w(L.encoding),this.encoding=L.encoding)}function M(L){if(c=c||t("./_stream_duplex"),!(this instanceof M))return new M(L);this._readableState=new R(L,this),this.readable=!0,L&&(typeof L.read=="function"&&(this._read=L.read),typeof L.destroy=="function"&&(this._destroy=L.destroy)),h.call(this)}function I(L,z,G,Z,ee){var W,J=L._readableState;return z===null?(J.reading=!1,function($,q){if(!q.ended){if(q.decoder){var Y=q.decoder.end();Y&&Y.length&&(q.buffer.push(Y),q.length+=q.objectMode?1:Y.length)}q.ended=!0,U($)}}(L,J)):(ee||(W=function($,q){var Y;se=q,f.isBuffer(se)||se instanceof m||typeof q=="string"||q===void 0||$.objectMode||(Y=new TypeError("Invalid non-string/buffer chunk"));var se;return Y}(J,z)),W?L.emit("error",W):J.objectMode||z&&z.length>0?(typeof z=="string"||J.objectMode||Object.getPrototypeOf(z)===f.prototype||(z=function($){return f.from($)}(z)),Z?J.endEmitted?L.emit("error",new Error("stream.unshift() after end event")):F(L,J,z,!0):J.ended?L.emit("error",new Error("stream.push() after EOF")):(J.reading=!1,J.decoder&&!G?(z=J.decoder.write(z),J.objectMode||z.length!==0?F(L,J,z,!1):K(L,J)):F(L,J,z,!1))):Z||(J.reading=!1)),function($){return!$.ended&&($.needReadable||$.length<$.highWaterMark||$.length===0)}(J)}function F(L,z,G,Z){z.flowing&&z.length===0&&!z.sync?(L.emit("data",G),L.read(0)):(z.length+=z.objectMode?1:G.length,Z?z.buffer.unshift(G):z.buffer.push(G),z.needReadable&&U(L)),K(L,z)}Object.defineProperty(M.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(L){this._readableState&&(this._readableState.destroyed=L)}}),M.prototype.destroy=_.destroy,M.prototype._undestroy=_.undestroy,M.prototype._destroy=function(L,z){this.push(null),z(L)},M.prototype.push=function(L,z){var G,Z=this._readableState;return Z.objectMode?G=!0:typeof L=="string"&&((z=z||Z.defaultEncoding)!==Z.encoding&&(L=f.from(L,z),z=""),G=!0),I(this,L,z,!1,G)},M.prototype.unshift=function(L){return I(this,L,null,!0,!1)},M.prototype.isPaused=function(){return this._readableState.flowing===!1},M.prototype.setEncoding=function(L){return w||(w=t("string_decoder/").StringDecoder),this._readableState.decoder=new w(L),this._readableState.encoding=L,this};function B(L,z){return L<=0||z.length===0&&z.ended?0:z.objectMode?1:L!=L?z.flowing&&z.length?z.buffer.head.data.length:z.length:(L>z.highWaterMark&&(z.highWaterMark=function(G){return G>=8388608?G=8388608:(G--,G|=G>>>1,G|=G>>>2,G|=G>>>4,G|=G>>>8,G|=G>>>16,G++),G}(L)),L<=z.length?L:z.ended?z.length:(z.needReadable=!0,0))}function U(L){var z=L._readableState;z.needReadable=!1,z.emittedReadable||(g("emitReadable",z.flowing),z.emittedReadable=!0,z.sync?d.nextTick(Q,L):Q(L))}function Q(L){g("emit readable"),L.emit("readable"),N(L)}function K(L,z){z.readingMore||(z.readingMore=!0,d.nextTick(T,L,z))}function T(L,z){for(var G=z.length;!z.reading&&!z.flowing&&!z.ended&&z.length<z.highWaterMark&&(g("maybeReadMore read 0"),L.read(0),G!==z.length);)G=z.length;z.readingMore=!1}function P(L){g("readable nexttick read 0"),L.read(0)}function A(L,z){z.reading||(g("resume read 0"),L.read(0)),z.resumeScheduled=!1,z.awaitDrain=0,L.emit("resume"),N(L),z.flowing&&!z.reading&&L.read(0)}function N(L){var z=L._readableState;for(g("flow",z.flowing);z.flowing&&L.read()!==null;);}function k(L,z){return z.length===0?null:(z.objectMode?G=z.buffer.shift():!L||L>=z.length?(G=z.decoder?z.buffer.join(""):z.buffer.length===1?z.buffer.head.data:z.buffer.concat(z.length),z.buffer.clear()):G=function(Z,ee,W){var J;return Z<ee.head.data.length?(J=ee.head.data.slice(0,Z),ee.head.data=ee.head.data.slice(Z)):J=Z===ee.head.data.length?ee.shift():W?function($,q){var Y=q.head,se=1,oe=Y.data;for($-=oe.length;Y=Y.next;){var ae=Y.data,ce=$>ae.length?ae.length:$;if(ce===ae.length?oe+=ae:oe+=ae.slice(0,$),($-=ce)===0){ce===ae.length?(++se,Y.next?q.head=Y.next:q.head=q.tail=null):(q.head=Y,Y.data=ae.slice(ce));break}++se}return q.length-=se,oe}(Z,ee):function($,q){var Y=f.allocUnsafe($),se=q.head,oe=1;for(se.data.copy(Y),$-=se.data.length;se=se.next;){var ae=se.data,ce=$>ae.length?ae.length:$;if(ae.copy(Y,Y.length-$,0,ce),($-=ce)===0){ce===ae.length?(++oe,se.next?q.head=se.next:q.head=q.tail=null):(q.head=se,se.data=ae.slice(ce));break}++oe}return q.length-=oe,Y}(Z,ee),J}(L,z.buffer,z.decoder),G);var G}function S(L){var z=L._readableState;if(z.length>0)throw new Error('"endReadable()" called on non-empty stream');z.endEmitted||(z.ended=!0,d.nextTick(E,z,L))}function E(L,z){L.endEmitted||L.length!==0||(L.endEmitted=!0,z.readable=!1,z.emit("end"))}function O(L,z){for(var G=0,Z=L.length;G<Z;G++)if(L[G]===z)return G;return-1}M.prototype.read=function(L){g("read",L),L=parseInt(L,10);var z=this._readableState,G=L;if(L!==0&&(z.emittedReadable=!1),L===0&&z.needReadable&&(z.length>=z.highWaterMark||z.ended))return g("read: emitReadable",z.length,z.ended),z.length===0&&z.ended?S(this):U(this),null;if((L=B(L,z))===0&&z.ended)return z.length===0&&S(this),null;var Z,ee=z.needReadable;return g("need readable",ee),(z.length===0||z.length-L<z.highWaterMark)&&g("length less than watermark",ee=!0),z.ended||z.reading?g("reading or ended",ee=!1):ee&&(g("do read"),z.reading=!0,z.sync=!0,z.length===0&&(z.needReadable=!0),this._read(z.highWaterMark),z.sync=!1,z.reading||(L=B(G,z))),(Z=L>0?k(L,z):null)===null?(z.needReadable=!0,L=0):z.length-=L,z.length===0&&(z.ended||(z.needReadable=!0),G!==L&&z.ended&&S(this)),Z!==null&&this.emit("data",Z),Z},M.prototype._read=function(L){this.emit("error",new Error("_read() is not implemented"))},M.prototype.pipe=function(L,z){var G=this,Z=this._readableState;switch(Z.pipesCount){case 0:Z.pipes=L;break;case 1:Z.pipes=[Z.pipes,L];break;default:Z.pipes.push(L)}Z.pipesCount+=1,g("pipe count=%d opts=%j",Z.pipesCount,z);var ee=(!z||z.end!==!1)&&L!==i.stdout&&L!==i.stderr?J:we;function W(fe,re){g("onunpipe"),fe===G&&re&&re.hasUnpiped===!1&&(re.hasUnpiped=!0,g("cleanup"),L.removeListener("close",ae),L.removeListener("finish",ce),L.removeListener("drain",$),L.removeListener("error",oe),L.removeListener("unpipe",W),G.removeListener("end",J),G.removeListener("end",we),G.removeListener("data",se),q=!0,!Z.awaitDrain||L._writableState&&!L._writableState.needDrain||$())}function J(){g("onend"),L.end()}Z.endEmitted?d.nextTick(ee):G.once("end",ee),L.on("unpipe",W);var $=function(fe){return function(){var re=fe._readableState;g("pipeOnDrain",re.awaitDrain),re.awaitDrain&&re.awaitDrain--,re.awaitDrain===0&&u(fe,"data")&&(re.flowing=!0,N(fe))}}(G);L.on("drain",$);var q=!1,Y=!1;function se(fe){g("ondata"),Y=!1,L.write(fe)!==!1||Y||((Z.pipesCount===1&&Z.pipes===L||Z.pipesCount>1&&O(Z.pipes,L)!==-1)&&!q&&(g("false write response, pause",Z.awaitDrain),Z.awaitDrain++,Y=!0),G.pause())}function oe(fe){g("onerror",fe),we(),L.removeListener("error",oe),u(L,"error")===0&&L.emit("error",fe)}function ae(){L.removeListener("finish",ce),we()}function ce(){g("onfinish"),L.removeListener("close",ae),we()}function we(){g("unpipe"),G.unpipe(L)}return G.on("data",se),function(fe,re,ge){if(typeof fe.prependListener=="function")return fe.prependListener(re,ge);fe._events&&fe._events[re]?a(fe._events[re])?fe._events[re].unshift(ge):fe._events[re]=[ge,fe._events[re]]:fe.on(re,ge)}(L,"error",oe),L.once("close",ae),L.once("finish",ce),L.emit("pipe",G),Z.flowing||(g("pipe resume"),G.resume()),L},M.prototype.unpipe=function(L){var z=this._readableState,G={hasUnpiped:!1};if(z.pipesCount===0)return this;if(z.pipesCount===1)return L&&L!==z.pipes||(L||(L=z.pipes),z.pipes=null,z.pipesCount=0,z.flowing=!1,L&&L.emit("unpipe",this,G)),this;if(!L){var Z=z.pipes,ee=z.pipesCount;z.pipes=null,z.pipesCount=0,z.flowing=!1;for(var W=0;W<ee;W++)Z[W].emit("unpipe",this,{hasUnpiped:!1});return this}var J=O(z.pipes,L);return J===-1||(z.pipes.splice(J,1),z.pipesCount-=1,z.pipesCount===1&&(z.pipes=z.pipes[0]),L.emit("unpipe",this,G)),this},M.prototype.on=function(L,z){var G=h.prototype.on.call(this,L,z);if(L==="data")this._readableState.flowing!==!1&&this.resume();else if(L==="readable"){var Z=this._readableState;Z.endEmitted||Z.readableListening||(Z.readableListening=Z.needReadable=!0,Z.emittedReadable=!1,Z.reading?Z.length&&U(this):d.nextTick(P,this))}return G},M.prototype.addListener=M.prototype.on,M.prototype.resume=function(){var L=this._readableState;return L.flowing||(g("resume"),L.flowing=!0,function(z,G){G.resumeScheduled||(G.resumeScheduled=!0,d.nextTick(A,z,G))}(this,L)),this},M.prototype.pause=function(){return g("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(g("pause"),this._readableState.flowing=!1,this.emit("pause")),this},M.prototype.wrap=function(L){var z=this,G=this._readableState,Z=!1;for(var ee in L.on("end",function(){if(g("wrapped end"),G.decoder&&!G.ended){var J=G.decoder.end();J&&J.length&&z.push(J)}z.push(null)}),L.on("data",function(J){g("wrapped data"),G.decoder&&(J=G.decoder.write(J)),G.objectMode&&J==null||(G.objectMode||J&&J.length)&&(z.push(J)||(Z=!0,L.pause()))}),L)this[ee]===void 0&&typeof L[ee]=="function"&&(this[ee]=function(J){return function(){return L[J].apply(L,arguments)}}(ee));for(var W=0;W<j.length;W++)L.on(j[W],this.emit.bind(this,j[W]));return this._read=function(J){g("wrapped _read",J),Z&&(Z=!1,L.resume())},this},Object.defineProperty(M.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),M._fromList=k}).call(this)}).call(this,t("_process"),typeof mr<"u"?mr:typeof self<"u"?self:typeof window<"u"?window:{})},{"./_stream_duplex":508,"./internal/streams/BufferList":513,"./internal/streams/destroy":514,"./internal/streams/stream":515,_process:467,"core-util-is":383,events:422,inherits:440,isarray:506,"process-nextick-args":466,"safe-buffer":520,"string_decoder/":521,util:188}],511:[function(t,s,l){s.exports=c;var i=t("./_stream_duplex"),o=Object.create(t("core-util-is"));function d(h,f){var m=this._transformState;m.transforming=!1;var b=m.writecb;if(!b)return this.emit("error",new Error("write callback called multiple times"));m.writechunk=null,m.writecb=null,f!=null&&this.push(f),b(h);var y=this._readableState;y.reading=!1,(y.needReadable||y.length<y.highWaterMark)&&this._read(y.highWaterMark)}function c(h){if(!(this instanceof c))return new c(h);i.call(this,h),this._transformState={afterTransform:d.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,h&&(typeof h.transform=="function"&&(this._transform=h.transform),typeof h.flush=="function"&&(this._flush=h.flush)),this.on("prefinish",a)}function a(){var h=this;typeof this._flush=="function"?this._flush(function(f,m){u(h,f,m)}):u(this,null,null)}function u(h,f,m){if(f)return h.emit("error",f);if(m!=null&&h.push(m),h._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(h._transformState.transforming)throw new Error("Calling transform done when still transforming");return h.push(null)}o.inherits=t("inherits"),o.inherits(c,i),c.prototype.push=function(h,f){return this._transformState.needTransform=!1,i.prototype.push.call(this,h,f)},c.prototype._transform=function(h,f,m){throw new Error("_transform() is not implemented")},c.prototype._write=function(h,f,m){var b=this._transformState;if(b.writecb=m,b.writechunk=h,b.writeencoding=f,!b.transforming){var y=this._readableState;(b.needTransform||y.needReadable||y.length<y.highWaterMark)&&this._read(y.highWaterMark)}},c.prototype._read=function(h){var f=this._transformState;f.writechunk!==null&&f.writecb&&!f.transforming?(f.transforming=!0,this._transform(f.writechunk,f.writeencoding,f.afterTransform)):f.needTransform=!0},c.prototype._destroy=function(h,f){var m=this;i.prototype._destroy.call(this,h,function(b){f(b),m.emit("close")})}},{"./_stream_duplex":508,"core-util-is":383,inherits:440}],512:[function(t,s,l){(function(i,o,d){(function(){var c=t("process-nextick-args");function a(K){var T=this;this.next=null,this.entry=null,this.finish=function(){(function(P,A,N){var k=P.entry;for(P.entry=null;k;){var S=k.callback;A.pendingcb--,S(N),k=k.next}A.corkedRequestsFree.next=P})(T,K)}}s.exports=R;var u,h=!i.browser&&["v0.10","v0.9."].indexOf(i.version.slice(0,5))>-1?d:c.nextTick;R.WritableState=j;var f=Object.create(t("core-util-is"));f.inherits=t("inherits");var m={deprecate:t("util-deprecate")},b=t("./internal/streams/stream"),y=t("safe-buffer").Buffer,g=(o!==void 0?o:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},w,x=t("./internal/streams/destroy");function _(){}function j(K,T){u=u||t("./_stream_duplex"),K=K||{};var P=T instanceof u;this.objectMode=!!K.objectMode,P&&(this.objectMode=this.objectMode||!!K.writableObjectMode);var A=K.highWaterMark,N=K.writableHighWaterMark,k=this.objectMode?16:16384;this.highWaterMark=A||A===0?A:P&&(N||N===0)?N:k,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var S=K.decodeStrings===!1;this.decodeStrings=!S,this.defaultEncoding=K.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(E){(function(O,L){var z=O._writableState,G=z.sync,Z=z.writecb;if(function(W){W.writing=!1,W.writecb=null,W.length-=W.writelen,W.writelen=0}(z),L)(function(W,J,$,q,Y){--J.pendingcb,$?(c.nextTick(Y,q),c.nextTick(Q,W,J),W._writableState.errorEmitted=!0,W.emit("error",q)):(Y(q),W._writableState.errorEmitted=!0,W.emit("error",q),Q(W,J))})(O,z,G,L,Z);else{var ee=B(z);ee||z.corked||z.bufferProcessing||!z.bufferedRequest||F(O,z),G?h(I,O,z,ee,Z):I(O,z,ee,Z)}})(T,E)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function R(K){if(u=u||t("./_stream_duplex"),!(w.call(R,this)||this instanceof u))return new R(K);this._writableState=new j(K,this),this.writable=!0,K&&(typeof K.write=="function"&&(this._write=K.write),typeof K.writev=="function"&&(this._writev=K.writev),typeof K.destroy=="function"&&(this._destroy=K.destroy),typeof K.final=="function"&&(this._final=K.final)),b.call(this)}function M(K,T,P,A,N,k,S){T.writelen=A,T.writecb=S,T.writing=!0,T.sync=!0,P?K._writev(N,T.onwrite):K._write(N,k,T.onwrite),T.sync=!1}function I(K,T,P,A){P||function(N,k){k.length===0&&k.needDrain&&(k.needDrain=!1,N.emit("drain"))}(K,T),T.pendingcb--,A(),Q(K,T)}function F(K,T){T.bufferProcessing=!0;var P=T.bufferedRequest;if(K._writev&&P&&P.next){var A=T.bufferedRequestCount,N=new Array(A),k=T.corkedRequestsFree;k.entry=P;for(var S=0,E=!0;P;)N[S]=P,P.isBuf||(E=!1),P=P.next,S+=1;N.allBuffers=E,M(K,T,!0,T.length,N,"",k.finish),T.pendingcb++,T.lastBufferedRequest=null,k.next?(T.corkedRequestsFree=k.next,k.next=null):T.corkedRequestsFree=new a(T),T.bufferedRequestCount=0}else{for(;P;){var O=P.chunk,L=P.encoding,z=P.callback;if(M(K,T,!1,T.objectMode?1:O.length,O,L,z),P=P.next,T.bufferedRequestCount--,T.writing)break}P===null&&(T.lastBufferedRequest=null)}T.bufferedRequest=P,T.bufferProcessing=!1}function B(K){return K.ending&&K.length===0&&K.bufferedRequest===null&&!K.finished&&!K.writing}function U(K,T){K._final(function(P){T.pendingcb--,P&&K.emit("error",P),T.prefinished=!0,K.emit("prefinish"),Q(K,T)})}function Q(K,T){var P=B(T);return P&&(function(A,N){N.prefinished||N.finalCalled||(typeof A._final=="function"?(N.pendingcb++,N.finalCalled=!0,c.nextTick(U,A,N)):(N.prefinished=!0,A.emit("prefinish")))}(K,T),T.pendingcb===0&&(T.finished=!0,K.emit("finish"))),P}f.inherits(R,b),j.prototype.getBuffer=function(){for(var K=this.bufferedRequest,T=[];K;)T.push(K),K=K.next;return T},function(){try{Object.defineProperty(j.prototype,"buffer",{get:m.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(w=Function.prototype[Symbol.hasInstance],Object.defineProperty(R,Symbol.hasInstance,{value:function(K){return!!w.call(this,K)||this===R&&K&&K._writableState instanceof j}})):w=function(K){return K instanceof this},R.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},R.prototype.write=function(K,T,P){var A,N=this._writableState,k=!1,S=!N.objectMode&&(A=K,y.isBuffer(A)||A instanceof g);return S&&!y.isBuffer(K)&&(K=function(E){return y.from(E)}(K)),typeof T=="function"&&(P=T,T=null),S?T="buffer":T||(T=N.defaultEncoding),typeof P!="function"&&(P=_),N.ended?function(E,O){var L=new Error("write after end");E.emit("error",L),c.nextTick(O,L)}(this,P):(S||function(E,O,L,z){var G=!0,Z=!1;return L===null?Z=new TypeError("May not write null values to stream"):typeof L=="string"||L===void 0||O.objectMode||(Z=new TypeError("Invalid non-string/buffer chunk")),Z&&(E.emit("error",Z),c.nextTick(z,Z),G=!1),G}(this,N,K,P))&&(N.pendingcb++,k=function(E,O,L,z,G,Z){if(!L){var ee=function(q,Y,se){return q.objectMode||q.decodeStrings===!1||typeof Y!="string"||(Y=y.from(Y,se)),Y}(O,z,G);z!==ee&&(L=!0,G="buffer",z=ee)}var W=O.objectMode?1:z.length;O.length+=W;var J=O.length<O.highWaterMark;if(J||(O.needDrain=!0),O.writing||O.corked){var $=O.lastBufferedRequest;O.lastBufferedRequest={chunk:z,encoding:G,isBuf:L,callback:Z,next:null},$?$.next=O.lastBufferedRequest:O.bufferedRequest=O.lastBufferedRequest,O.bufferedRequestCount+=1}else M(E,O,!1,W,z,G,Z);return J}(this,N,S,K,T,P)),k},R.prototype.cork=function(){this._writableState.corked++},R.prototype.uncork=function(){var K=this._writableState;K.corked&&(K.corked--,K.writing||K.corked||K.bufferProcessing||!K.bufferedRequest||F(this,K))},R.prototype.setDefaultEncoding=function(K){if(typeof K=="string"&&(K=K.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((K+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+K);return this._writableState.defaultEncoding=K,this},Object.defineProperty(R.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),R.prototype._write=function(K,T,P){P(new Error("_write() is not implemented"))},R.prototype._writev=null,R.prototype.end=function(K,T,P){var A=this._writableState;typeof K=="function"?(P=K,K=null,T=null):typeof T=="function"&&(P=T,T=null),K!=null&&this.write(K,T),A.corked&&(A.corked=1,this.uncork()),A.ending||function(N,k,S){k.ending=!0,Q(N,k),S&&(k.finished?c.nextTick(S):N.once("finish",S)),k.ended=!0,N.writable=!1}(this,A,P)},Object.defineProperty(R.prototype,"destroyed",{get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(K){this._writableState&&(this._writableState.destroyed=K)}}),R.prototype.destroy=x.destroy,R.prototype._undestroy=x.undestroy,R.prototype._destroy=function(K,T){this.end(),T(K)}}).call(this)}).call(this,t("_process"),typeof mr<"u"?mr:typeof self<"u"?self:typeof window<"u"?window:{},t("timers").setImmediate)},{"./_stream_duplex":508,"./internal/streams/destroy":514,"./internal/streams/stream":515,_process:467,"core-util-is":383,inherits:440,"process-nextick-args":466,"safe-buffer":520,timers:523,"util-deprecate":524}],513:[function(t,s,l){var i=t("safe-buffer").Buffer,o=t("util");s.exports=function(){function d(){(function(c,a){if(!(c instanceof a))throw new TypeError("Cannot call a class as a function")})(this,d),this.head=null,this.tail=null,this.length=0}return d.prototype.push=function(c){var a={data:c,next:null};this.length>0?this.tail.next=a:this.head=a,this.tail=a,++this.length},d.prototype.unshift=function(c){var a={data:c,next:this.head};this.length===0&&(this.tail=a),this.head=a,++this.length},d.prototype.shift=function(){if(this.length!==0){var c=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,c}},d.prototype.clear=function(){this.head=this.tail=null,this.length=0},d.prototype.join=function(c){if(this.length===0)return"";for(var a=this.head,u=""+a.data;a=a.next;)u+=c+a.data;return u},d.prototype.concat=function(c){if(this.length===0)return i.alloc(0);for(var a,u,h,f=i.allocUnsafe(c>>>0),m=this.head,b=0;m;)a=m.data,u=f,h=b,a.copy(u,h),b+=m.data.length,m=m.next;return f},d}(),o&&o.inspect&&o.inspect.custom&&(s.exports.prototype[o.inspect.custom]=function(){var d=o.inspect({length:this.length});return this.constructor.name+" "+d})},{"safe-buffer":520,util:188}],514:[function(t,s,l){var i=t("process-nextick-args");function o(d,c){d.emit("error",c)}s.exports={destroy:function(d,c){var a=this,u=this._readableState&&this._readableState.destroyed,h=this._writableState&&this._writableState.destroyed;return u||h?(c?c(d):d&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,i.nextTick(o,this,d)):i.nextTick(o,this,d)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(d||null,function(f){!c&&f?a._writableState?a._writableState.errorEmitted||(a._writableState.errorEmitted=!0,i.nextTick(o,a,f)):i.nextTick(o,a,f):c&&c(f)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":466}],515:[function(t,s,l){arguments[4][490][0].apply(l,arguments)},{dup:490,events:422}],516:[function(t,s,l){s.exports=t("./readable").PassThrough},{"./readable":517}],517:[function(t,s,l){(l=s.exports=t("./lib/_stream_readable.js")).Stream=l,l.Readable=l,l.Writable=t("./lib/_stream_writable.js"),l.Duplex=t("./lib/_stream_duplex.js"),l.Transform=t("./lib/_stream_transform.js"),l.PassThrough=t("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":508,"./lib/_stream_passthrough.js":509,"./lib/_stream_readable.js":510,"./lib/_stream_transform.js":511,"./lib/_stream_writable.js":512}],518:[function(t,s,l){s.exports=t("./readable").Transform},{"./readable":517}],519:[function(t,s,l){s.exports=t("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":512}],520:[function(t,s,l){arguments[4][217][0].apply(l,arguments)},{buffer:220,dup:217}],521:[function(t,s,l){arguments[4][218][0].apply(l,arguments)},{dup:218,"safe-buffer":520}],522:[function(t,s,l){arguments[4][218][0].apply(l,arguments)},{dup:218,"safe-buffer":494}],523:[function(t,s,l){(function(i,o){(function(){var d=t("process/browser.js").nextTick,c=Function.prototype.apply,a=Array.prototype.slice,u={},h=0;function f(m,b){this._id=m,this._clearFn=b}l.setTimeout=function(){return new f(c.call(setTimeout,window,arguments),clearTimeout)},l.setInterval=function(){return new f(c.call(setInterval,window,arguments),clearInterval)},l.clearTimeout=l.clearInterval=function(m){m.close()},f.prototype.unref=f.prototype.ref=function(){},f.prototype.close=function(){this._clearFn.call(window,this._id)},l.enroll=function(m,b){clearTimeout(m._idleTimeoutId),m._idleTimeout=b},l.unenroll=function(m){clearTimeout(m._idleTimeoutId),m._idleTimeout=-1},l._unrefActive=l.active=function(m){clearTimeout(m._idleTimeoutId);var b=m._idleTimeout;b>=0&&(m._idleTimeoutId=setTimeout(function(){m._onTimeout&&m._onTimeout()},b))},l.setImmediate=typeof i=="function"?i:function(m){var b=h++,y=!(arguments.length<2)&&a.call(arguments,1);return u[b]=!0,d(function(){u[b]&&(y?m.apply(null,y):m.call(null),l.clearImmediate(b))}),b},l.clearImmediate=typeof o=="function"?o:function(m){delete u[m]}}).call(this)}).call(this,t("timers").setImmediate,t("timers").clearImmediate)},{"process/browser.js":467,timers:523}],524:[function(t,s,l){(function(i){(function(){function o(d){try{if(!i.localStorage)return!1}catch{return!1}var c=i.localStorage[d];return c!=null&&String(c).toLowerCase()==="true"}s.exports=function(d,c){if(o("noDeprecation"))return d;var a=!1;return function(){if(!a){if(o("throwDeprecation"))throw new Error(c);o("traceDeprecation")?console.trace(c):console.warn(c),a=!0}return d.apply(this,arguments)}}}).call(this)}).call(this,typeof mr<"u"?mr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],525:[function(t,s,l){typeof Object.create=="function"?s.exports=function(i,o){i.super_=o,i.prototype=Object.create(o.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}})}:s.exports=function(i,o){i.super_=o;var d=function(){};d.prototype=o.prototype,i.prototype=new d,i.prototype.constructor=i}},{}],526:[function(t,s,l){s.exports=function(i){return i&&typeof i=="object"&&typeof i.copy=="function"&&typeof i.fill=="function"&&typeof i.readUInt8=="function"}},{}],527:[function(t,s,l){(function(i,o){(function(){var d=/%[sdj%]/g;l.format=function(N){if(!j(N)){for(var k=[],S=0;S<arguments.length;S++)k.push(u(arguments[S]));return k.join(" ")}S=1;for(var E=arguments,O=E.length,L=String(N).replace(d,function(G){if(G==="%%")return"%";if(S>=O)return G;switch(G){case"%s":return String(E[S++]);case"%d":return Number(E[S++]);case"%j":try{return JSON.stringify(E[S++])}catch{return"[Circular]"}default:return G}}),z=E[S];S<O;z=E[++S])x(z)||!I(z)?L+=" "+z:L+=" "+u(z);return L},l.deprecate=function(N,k){if(R(o.process))return function(){return l.deprecate(N,k).apply(this,arguments)};if(i.noDeprecation===!0)return N;var S=!1;return function(){if(!S){if(i.throwDeprecation)throw new Error(k);i.traceDeprecation?console.trace(k):console.error(k),S=!0}return N.apply(this,arguments)}};var c,a={};function u(N,k){var S={seen:[],stylize:f};return arguments.length>=3&&(S.depth=arguments[2]),arguments.length>=4&&(S.colors=arguments[3]),w(k)?S.showHidden=k:k&&l._extend(S,k),R(S.showHidden)&&(S.showHidden=!1),R(S.depth)&&(S.depth=2),R(S.colors)&&(S.colors=!1),R(S.customInspect)&&(S.customInspect=!0),S.colors&&(S.stylize=h),m(S,N,S.depth)}function h(N,k){var S=u.styles[k];return S?"\x1B["+u.colors[S][0]+"m"+N+"\x1B["+u.colors[S][1]+"m":N}function f(N,k){return N}function m(N,k,S){if(N.customInspect&&k&&U(k.inspect)&&k.inspect!==l.inspect&&(!k.constructor||k.constructor.prototype!==k)){var E=k.inspect(S,N);return j(E)||(E=m(N,E,S)),E}var O=function($,q){if(R(q))return $.stylize("undefined","undefined");if(j(q)){var Y="'"+JSON.stringify(q).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return $.stylize(Y,"string")}if(_(q))return $.stylize(""+q,"number");if(w(q))return $.stylize(""+q,"boolean");if(x(q))return $.stylize("null","null")}(N,k);if(O)return O;var L=Object.keys(k),z=function($){var q={};return $.forEach(function(Y,se){q[Y]=!0}),q}(L);if(N.showHidden&&(L=Object.getOwnPropertyNames(k)),B(k)&&(L.indexOf("message")>=0||L.indexOf("description")>=0))return b(k);if(L.length===0){if(U(k)){var G=k.name?": "+k.name:"";return N.stylize("[Function"+G+"]","special")}if(M(k))return N.stylize(RegExp.prototype.toString.call(k),"regexp");if(F(k))return N.stylize(Date.prototype.toString.call(k),"date");if(B(k))return b(k)}var Z,ee="",W=!1,J=["{","}"];return g(k)&&(W=!0,J=["[","]"]),U(k)&&(ee=" [Function"+(k.name?": "+k.name:"")+"]"),M(k)&&(ee=" "+RegExp.prototype.toString.call(k)),F(k)&&(ee=" "+Date.prototype.toUTCString.call(k)),B(k)&&(ee=" "+b(k)),L.length!==0||W&&k.length!=0?S<0?M(k)?N.stylize(RegExp.prototype.toString.call(k),"regexp"):N.stylize("[Object]","special"):(N.seen.push(k),Z=W?function($,q,Y,se,oe){for(var ae=[],ce=0,we=q.length;ce<we;++ce)A(q,String(ce))?ae.push(y($,q,Y,se,String(ce),!0)):ae.push("");return oe.forEach(function(fe){fe.match(/^\d+$/)||ae.push(y($,q,Y,se,fe,!0))}),ae}(N,k,S,z,L):L.map(function($){return y(N,k,S,z,$,W)}),N.seen.pop(),function($,q,Y){return $.reduce(function(se,oe){return oe.indexOf(`
`)>=0,se+oe.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?Y[0]+(q===""?"":q+`
 `)+" "+$.join(`,
  `)+" "+Y[1]:Y[0]+q+" "+$.join(", ")+" "+Y[1]}(Z,ee,J)):J[0]+ee+J[1]}function b(N){return"["+Error.prototype.toString.call(N)+"]"}function y(N,k,S,E,O,L){var z,G,Z;if((Z=Object.getOwnPropertyDescriptor(k,O)||{value:k[O]}).get?G=Z.set?N.stylize("[Getter/Setter]","special"):N.stylize("[Getter]","special"):Z.set&&(G=N.stylize("[Setter]","special")),A(E,O)||(z="["+O+"]"),G||(N.seen.indexOf(Z.value)<0?(G=x(S)?m(N,Z.value,null):m(N,Z.value,S-1)).indexOf(`
`)>-1&&(G=L?G.split(`
`).map(function(ee){return"  "+ee}).join(`
`).substr(2):`
`+G.split(`
`).map(function(ee){return"   "+ee}).join(`
`)):G=N.stylize("[Circular]","special")),R(z)){if(L&&O.match(/^\d+$/))return G;(z=JSON.stringify(""+O)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(z=z.substr(1,z.length-2),z=N.stylize(z,"name")):(z=z.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),z=N.stylize(z,"string"))}return z+": "+G}function g(N){return Array.isArray(N)}function w(N){return typeof N=="boolean"}function x(N){return N===null}function _(N){return typeof N=="number"}function j(N){return typeof N=="string"}function R(N){return N===void 0}function M(N){return I(N)&&Q(N)==="[object RegExp]"}function I(N){return typeof N=="object"&&N!==null}function F(N){return I(N)&&Q(N)==="[object Date]"}function B(N){return I(N)&&(Q(N)==="[object Error]"||N instanceof Error)}function U(N){return typeof N=="function"}function Q(N){return Object.prototype.toString.call(N)}function K(N){return N<10?"0"+N.toString(10):N.toString(10)}l.debuglog=function(N){if(R(c)&&(c=i.env.NODE_DEBUG||""),N=N.toUpperCase(),!a[N])if(new RegExp("\\b"+N+"\\b","i").test(c)){var k=i.pid;a[N]=function(){var S=l.format.apply(l,arguments);console.error("%s %d: %s",N,k,S)}}else a[N]=function(){};return a[N]},l.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},l.isArray=g,l.isBoolean=w,l.isNull=x,l.isNullOrUndefined=function(N){return N==null},l.isNumber=_,l.isString=j,l.isSymbol=function(N){return typeof N=="symbol"},l.isUndefined=R,l.isRegExp=M,l.isObject=I,l.isDate=F,l.isError=B,l.isFunction=U,l.isPrimitive=function(N){return N===null||typeof N=="boolean"||typeof N=="number"||typeof N=="string"||typeof N=="symbol"||N===void 0},l.isBuffer=t("./support/isBuffer");var T=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function P(){var N=new Date,k=[K(N.getHours()),K(N.getMinutes()),K(N.getSeconds())].join(":");return[N.getDate(),T[N.getMonth()],k].join(" ")}function A(N,k){return Object.prototype.hasOwnProperty.call(N,k)}l.log=function(){console.log("%s - %s",P(),l.format.apply(l,arguments))},l.inherits=t("inherits"),l._extend=function(N,k){if(!k||!I(k))return N;for(var S=Object.keys(k),E=S.length;E--;)N[S[E]]=k[S[E]];return N}}).call(this)}).call(this,t("_process"),typeof mr<"u"?mr:typeof self<"u"?self:typeof window<"u"?window:{})},{"./support/isBuffer":526,_process:467,inherits:525}],528:[function(t,s,l){Object.defineProperty(l,"__esModule",{value:!0}),Object.defineProperty(l,"v1",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(l,"v3",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(l,"v4",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(l,"v5",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(l,"NIL",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(l,"version",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(l,"validate",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(l,"stringify",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(l,"parse",{enumerable:!0,get:function(){return m.default}});var i=b(t("./v1.js")),o=b(t("./v3.js")),d=b(t("./v4.js")),c=b(t("./v5.js")),a=b(t("./nil.js")),u=b(t("./version.js")),h=b(t("./validate.js")),f=b(t("./stringify.js")),m=b(t("./parse.js"));function b(y){return y&&y.__esModule?y:{default:y}}},{"./nil.js":530,"./parse.js":531,"./stringify.js":535,"./v1.js":536,"./v3.js":537,"./v4.js":539,"./v5.js":540,"./validate.js":541,"./version.js":542}],529:[function(t,s,l){function i(m){return 14+(m+64>>>9<<4)+1}function o(m,b){const y=(65535&m)+(65535&b);return(m>>16)+(b>>16)+(y>>16)<<16|65535&y}function d(m,b,y,g,w,x){return o((_=o(o(b,m),o(g,x)))<<(j=w)|_>>>32-j,y);var _,j}function c(m,b,y,g,w,x,_){return d(b&y|~b&g,m,b,w,x,_)}function a(m,b,y,g,w,x,_){return d(b&g|y&~g,m,b,w,x,_)}function u(m,b,y,g,w,x,_){return d(b^y^g,m,b,w,x,_)}function h(m,b,y,g,w,x,_){return d(y^(b|~g),m,b,w,x,_)}Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var f=function(m){if(typeof m=="string"){const b=unescape(encodeURIComponent(m));m=new Uint8Array(b.length);for(let y=0;y<b.length;++y)m[y]=b.charCodeAt(y)}return function(b){const y=[],g=32*b.length;for(let w=0;w<g;w+=8){const x=b[w>>5]>>>w%32&255,_=parseInt("0123456789abcdef".charAt(x>>>4&15)+"0123456789abcdef".charAt(15&x),16);y.push(_)}return y}(function(b,y){b[y>>5]|=128<<y%32,b[i(y)-1]=y;let g=1732584193,w=-271733879,x=-1732584194,_=271733878;for(let j=0;j<b.length;j+=16){const R=g,M=w,I=x,F=_;g=c(g,w,x,_,b[j],7,-680876936),_=c(_,g,w,x,b[j+1],12,-389564586),x=c(x,_,g,w,b[j+2],17,606105819),w=c(w,x,_,g,b[j+3],22,-1044525330),g=c(g,w,x,_,b[j+4],7,-176418897),_=c(_,g,w,x,b[j+5],12,1200080426),x=c(x,_,g,w,b[j+6],17,-1473231341),w=c(w,x,_,g,b[j+7],22,-45705983),g=c(g,w,x,_,b[j+8],7,1770035416),_=c(_,g,w,x,b[j+9],12,-1958414417),x=c(x,_,g,w,b[j+10],17,-42063),w=c(w,x,_,g,b[j+11],22,-1990404162),g=c(g,w,x,_,b[j+12],7,1804603682),_=c(_,g,w,x,b[j+13],12,-40341101),x=c(x,_,g,w,b[j+14],17,-1502002290),w=c(w,x,_,g,b[j+15],22,1236535329),g=a(g,w,x,_,b[j+1],5,-165796510),_=a(_,g,w,x,b[j+6],9,-1069501632),x=a(x,_,g,w,b[j+11],14,643717713),w=a(w,x,_,g,b[j],20,-373897302),g=a(g,w,x,_,b[j+5],5,-701558691),_=a(_,g,w,x,b[j+10],9,38016083),x=a(x,_,g,w,b[j+15],14,-660478335),w=a(w,x,_,g,b[j+4],20,-405537848),g=a(g,w,x,_,b[j+9],5,568446438),_=a(_,g,w,x,b[j+14],9,-1019803690),x=a(x,_,g,w,b[j+3],14,-187363961),w=a(w,x,_,g,b[j+8],20,1163531501),g=a(g,w,x,_,b[j+13],5,-1444681467),_=a(_,g,w,x,b[j+2],9,-51403784),x=a(x,_,g,w,b[j+7],14,1735328473),w=a(w,x,_,g,b[j+12],20,-1926607734),g=u(g,w,x,_,b[j+5],4,-378558),_=u(_,g,w,x,b[j+8],11,-2022574463),x=u(x,_,g,w,b[j+11],16,1839030562),w=u(w,x,_,g,b[j+14],23,-35309556),g=u(g,w,x,_,b[j+1],4,-1530992060),_=u(_,g,w,x,b[j+4],11,1272893353),x=u(x,_,g,w,b[j+7],16,-155497632),w=u(w,x,_,g,b[j+10],23,-1094730640),g=u(g,w,x,_,b[j+13],4,681279174),_=u(_,g,w,x,b[j],11,-358537222),x=u(x,_,g,w,b[j+3],16,-722521979),w=u(w,x,_,g,b[j+6],23,76029189),g=u(g,w,x,_,b[j+9],4,-640364487),_=u(_,g,w,x,b[j+12],11,-421815835),x=u(x,_,g,w,b[j+15],16,530742520),w=u(w,x,_,g,b[j+2],23,-995338651),g=h(g,w,x,_,b[j],6,-198630844),_=h(_,g,w,x,b[j+7],10,1126891415),x=h(x,_,g,w,b[j+14],15,-1416354905),w=h(w,x,_,g,b[j+5],21,-57434055),g=h(g,w,x,_,b[j+12],6,1700485571),_=h(_,g,w,x,b[j+3],10,-1894986606),x=h(x,_,g,w,b[j+10],15,-1051523),w=h(w,x,_,g,b[j+1],21,-2054922799),g=h(g,w,x,_,b[j+8],6,1873313359),_=h(_,g,w,x,b[j+15],10,-30611744),x=h(x,_,g,w,b[j+6],15,-1560198380),w=h(w,x,_,g,b[j+13],21,1309151649),g=h(g,w,x,_,b[j+4],6,-145523070),_=h(_,g,w,x,b[j+11],10,-1120210379),x=h(x,_,g,w,b[j+2],15,718787259),w=h(w,x,_,g,b[j+9],21,-343485551),g=o(g,R),w=o(w,M),x=o(x,I),_=o(_,F)}return[g,w,x,_]}(function(b){if(b.length===0)return[];const y=8*b.length,g=new Uint32Array(i(y));for(let w=0;w<y;w+=8)g[w>>5]|=(255&b[w/8])<<w%32;return g}(m),8*m.length))};l.default=f},{}],530:[function(t,s,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0,l.default="00000000-0000-0000-0000-000000000000"},{}],531:[function(t,s,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i,o=(i=t("./validate.js"))&&i.__esModule?i:{default:i},d=function(c){if(!(0,o.default)(c))throw TypeError("Invalid UUID");let a;const u=new Uint8Array(16);return u[0]=(a=parseInt(c.slice(0,8),16))>>>24,u[1]=a>>>16&255,u[2]=a>>>8&255,u[3]=255&a,u[4]=(a=parseInt(c.slice(9,13),16))>>>8,u[5]=255&a,u[6]=(a=parseInt(c.slice(14,18),16))>>>8,u[7]=255&a,u[8]=(a=parseInt(c.slice(19,23),16))>>>8,u[9]=255&a,u[10]=(a=parseInt(c.slice(24,36),16))/1099511627776&255,u[11]=a/4294967296&255,u[12]=a>>>24&255,u[13]=a>>>16&255,u[14]=a>>>8&255,u[15]=255&a,u};l.default=d},{"./validate.js":541}],532:[function(t,s,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0,l.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},{}],533:[function(t,s,l){let i;Object.defineProperty(l,"__esModule",{value:!0}),l.default=function(){if(!i&&(i=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!i))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(o)};const o=new Uint8Array(16)},{}],534:[function(t,s,l){function i(c,a,u,h){switch(c){case 0:return a&u^~a&h;case 1:return a^u^h;case 2:return a&u^a&h^u&h;case 3:return a^u^h}}function o(c,a){return c<<a|c>>>32-a}Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var d=function(c){const a=[1518500249,1859775393,2400959708,3395469782],u=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof c=="string"){const b=unescape(encodeURIComponent(c));c=[];for(let y=0;y<b.length;++y)c.push(b.charCodeAt(y))}else Array.isArray(c)||(c=Array.prototype.slice.call(c));c.push(128);const h=c.length/4+2,f=Math.ceil(h/16),m=new Array(f);for(let b=0;b<f;++b){const y=new Uint32Array(16);for(let g=0;g<16;++g)y[g]=c[64*b+4*g]<<24|c[64*b+4*g+1]<<16|c[64*b+4*g+2]<<8|c[64*b+4*g+3];m[b]=y}m[f-1][14]=8*(c.length-1)/Math.pow(2,32),m[f-1][14]=Math.floor(m[f-1][14]),m[f-1][15]=8*(c.length-1)&4294967295;for(let b=0;b<f;++b){const y=new Uint32Array(80);for(let R=0;R<16;++R)y[R]=m[b][R];for(let R=16;R<80;++R)y[R]=o(y[R-3]^y[R-8]^y[R-14]^y[R-16],1);let g=u[0],w=u[1],x=u[2],_=u[3],j=u[4];for(let R=0;R<80;++R){const M=Math.floor(R/20),I=o(g,5)+i(M,w,x,_)+j+a[M]+y[R]>>>0;j=_,_=x,x=o(w,30)>>>0,w=g,g=I}u[0]=u[0]+g>>>0,u[1]=u[1]+w>>>0,u[2]=u[2]+x>>>0,u[3]=u[3]+_>>>0,u[4]=u[4]+j>>>0}return[u[0]>>24&255,u[0]>>16&255,u[0]>>8&255,255&u[0],u[1]>>24&255,u[1]>>16&255,u[1]>>8&255,255&u[1],u[2]>>24&255,u[2]>>16&255,u[2]>>8&255,255&u[2],u[3]>>24&255,u[3]>>16&255,u[3]>>8&255,255&u[3],u[4]>>24&255,u[4]>>16&255,u[4]>>8&255,255&u[4]]};l.default=d},{}],535:[function(t,s,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i,o=(i=t("./validate.js"))&&i.__esModule?i:{default:i};const d=[];for(let a=0;a<256;++a)d.push((a+256).toString(16).substr(1));var c=function(a){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const h=(d[a[u+0]]+d[a[u+1]]+d[a[u+2]]+d[a[u+3]]+"-"+d[a[u+4]]+d[a[u+5]]+"-"+d[a[u+6]]+d[a[u+7]]+"-"+d[a[u+8]]+d[a[u+9]]+"-"+d[a[u+10]]+d[a[u+11]]+d[a[u+12]]+d[a[u+13]]+d[a[u+14]]+d[a[u+15]]).toLowerCase();if(!(0,o.default)(h))throw TypeError("Stringified UUID is invalid");return h};l.default=c},{"./validate.js":541}],536:[function(t,s,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=d(t("./rng.js")),o=d(t("./stringify.js"));function d(m){return m&&m.__esModule?m:{default:m}}let c,a,u=0,h=0;var f=function(m,b,y){let g=b&&y||0;const w=b||new Array(16);let x=(m=m||{}).node||c,_=m.clockseq!==void 0?m.clockseq:a;if(x==null||_==null){const B=m.random||(m.rng||i.default)();x==null&&(x=c=[1|B[0],B[1],B[2],B[3],B[4],B[5]]),_==null&&(_=a=16383&(B[6]<<8|B[7]))}let j=m.msecs!==void 0?m.msecs:Date.now(),R=m.nsecs!==void 0?m.nsecs:h+1;const M=j-u+(R-h)/1e4;if(M<0&&m.clockseq===void 0&&(_=_+1&16383),(M<0||j>u)&&m.nsecs===void 0&&(R=0),R>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");u=j,h=R,a=_,j+=122192928e5;const I=(1e4*(268435455&j)+R)%4294967296;w[g++]=I>>>24&255,w[g++]=I>>>16&255,w[g++]=I>>>8&255,w[g++]=255&I;const F=j/4294967296*1e4&268435455;w[g++]=F>>>8&255,w[g++]=255&F,w[g++]=F>>>24&15|16,w[g++]=F>>>16&255,w[g++]=_>>>8|128,w[g++]=255&_;for(let B=0;B<6;++B)w[g+B]=x[B];return b||(0,o.default)(w)};l.default=f},{"./rng.js":533,"./stringify.js":535}],537:[function(t,s,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=d(t("./v35.js")),o=d(t("./md5.js"));function d(a){return a&&a.__esModule?a:{default:a}}var c=(0,i.default)("v3",48,o.default);l.default=c},{"./md5.js":529,"./v35.js":538}],538:[function(t,s,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=function(u,h,f){function m(b,y,g,w){if(typeof b=="string"&&(b=function(_){_=unescape(encodeURIComponent(_));const j=[];for(let R=0;R<_.length;++R)j.push(_.charCodeAt(R));return j}(b)),typeof y=="string"&&(y=(0,o.default)(y)),y.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let x=new Uint8Array(16+b.length);if(x.set(y),x.set(b,y.length),x=f(x),x[6]=15&x[6]|h,x[8]=63&x[8]|128,g){w=w||0;for(let _=0;_<16;++_)g[w+_]=x[_];return g}return(0,i.default)(x)}try{m.name=u}catch{}return m.DNS=c,m.URL=a,m},l.URL=l.DNS=void 0;var i=d(t("./stringify.js")),o=d(t("./parse.js"));function d(u){return u&&u.__esModule?u:{default:u}}const c="6ba7b810-9dad-11d1-80b4-00c04fd430c8";l.DNS=c;const a="6ba7b811-9dad-11d1-80b4-00c04fd430c8";l.URL=a},{"./parse.js":531,"./stringify.js":535}],539:[function(t,s,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=d(t("./rng.js")),o=d(t("./stringify.js"));function d(a){return a&&a.__esModule?a:{default:a}}var c=function(a,u,h){const f=(a=a||{}).random||(a.rng||i.default)();if(f[6]=15&f[6]|64,f[8]=63&f[8]|128,u){h=h||0;for(let m=0;m<16;++m)u[h+m]=f[m];return u}return(0,o.default)(f)};l.default=c},{"./rng.js":533,"./stringify.js":535}],540:[function(t,s,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=d(t("./v35.js")),o=d(t("./sha1.js"));function d(a){return a&&a.__esModule?a:{default:a}}var c=(0,i.default)("v5",80,o.default);l.default=c},{"./sha1.js":534,"./v35.js":538}],541:[function(t,s,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i,o=(i=t("./regex.js"))&&i.__esModule?i:{default:i},d=function(c){return typeof c=="string"&&o.default.test(c)};l.default=d},{"./regex.js":532}],542:[function(t,s,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i,o=(i=t("./validate.js"))&&i.__esModule?i:{default:i},d=function(c){if(!(0,o.default)(c))throw TypeError("Invalid UUID");return parseInt(c.substr(14,1),16)};l.default=d},{"./validate.js":541}],543:[function(t,s,l){/**
* Character classes and associated utilities for the 5th edition of XML 1.0.
*
* @author Louis-Dominique Dubeau
* @license MIT
* @copyright Louis-Dominique Dubeau
*/Object.defineProperty(l,"__esModule",{value:!0}),l.CHAR=`	
\r ---`,l.S=` 	\r
`,l.NAME_START_CHAR=":A-Z_a-z-----------",l.NAME_CHAR="-"+l.NAME_START_CHAR+".0-9--",l.CHAR_RE=new RegExp("^["+l.CHAR+"]$","u"),l.S_RE=new RegExp("^["+l.S+"]+$","u"),l.NAME_START_CHAR_RE=new RegExp("^["+l.NAME_START_CHAR+"]$","u"),l.NAME_CHAR_RE=new RegExp("^["+l.NAME_CHAR+"]$","u"),l.NAME_RE=new RegExp("^["+l.NAME_START_CHAR+"]["+l.NAME_CHAR+"]*$","u"),l.NMTOKEN_RE=new RegExp("^["+l.NAME_CHAR+"]+$","u");function i(o){return o>=65&&o<=90||o>=97&&o<=122||o===58||o===95||o===8204||o===8205||o>=192&&o<=214||o>=216&&o<=246||o>=248&&o<=767||o>=880&&o<=893||o>=895&&o<=8191||o>=8304&&o<=8591||o>=11264&&o<=12271||o>=12289&&o<=55295||o>=63744&&o<=64975||o>=65008&&o<=65533||o>=65536&&o<=983039}l.S_LIST=[32,10,13,9],l.isChar=function(o){return o>=32&&o<=55295||o===10||o===13||o===9||o>=57344&&o<=65533||o>=65536&&o<=1114111},l.isS=function(o){return o===32||o===10||o===13||o===9},l.isNameStartChar=i,l.isNameChar=function(o){return i(o)||o>=48&&o<=57||o===45||o===46||o===183||o>=768&&o<=879||o>=8255&&o<=8256}},{}],544:[function(t,s,l){/**
* Character classes and associated utilities for the 2nd edition of XML 1.1.
*
* @author Louis-Dominique Dubeau
* @license MIT
* @copyright Louis-Dominique Dubeau
*/Object.defineProperty(l,"__esModule",{value:!0}),l.CHAR="---",l.RESTRICTED_CHAR="-\b\v\f---",l.S=` 	\r
`,l.NAME_START_CHAR=":A-Z_a-z-----------",l.NAME_CHAR="-"+l.NAME_START_CHAR+".0-9--",l.CHAR_RE=new RegExp("^["+l.CHAR+"]$","u"),l.RESTRICTED_CHAR_RE=new RegExp("^["+l.RESTRICTED_CHAR+"]$","u"),l.S_RE=new RegExp("^["+l.S+"]+$","u"),l.NAME_START_CHAR_RE=new RegExp("^["+l.NAME_START_CHAR+"]$","u"),l.NAME_CHAR_RE=new RegExp("^["+l.NAME_CHAR+"]$","u"),l.NAME_RE=new RegExp("^["+l.NAME_START_CHAR+"]["+l.NAME_CHAR+"]*$","u"),l.NMTOKEN_RE=new RegExp("^["+l.NAME_CHAR+"]+$","u");function i(o){return o>=65&&o<=90||o>=97&&o<=122||o===58||o===95||o===8204||o===8205||o>=192&&o<=214||o>=216&&o<=246||o>=248&&o<=767||o>=880&&o<=893||o>=895&&o<=8191||o>=8304&&o<=8591||o>=11264&&o<=12271||o>=12289&&o<=55295||o>=63744&&o<=64975||o>=65008&&o<=65533||o>=65536&&o<=983039}l.S_LIST=[32,10,13,9],l.isChar=function(o){return o>=1&&o<=55295||o>=57344&&o<=65533||o>=65536&&o<=1114111},l.isRestrictedChar=function(o){return o>=1&&o<=8||o===11||o===12||o>=14&&o<=31||o>=127&&o<=132||o>=134&&o<=159},l.isCharAndNotRestricted=function(o){return o===9||o===10||o===13||o>31&&o<127||o===133||o>159&&o<=55295||o>=57344&&o<=65533||o>=65536&&o<=1114111},l.isS=function(o){return o===32||o===10||o===13||o===9},l.isNameStartChar=i,l.isNameChar=function(o){return i(o)||o>=48&&o<=57||o===45||o===46||o===183||o>=768&&o<=879||o>=8255&&o<=8256}},{}],545:[function(t,s,l){/**
* Character class utilities for XML NS 1.0 edition 3.
*
* @author Louis-Dominique Dubeau
* @license MIT
* @copyright Louis-Dominique Dubeau
*/function i(o){return o>=65&&o<=90||o===95||o>=97&&o<=122||o>=192&&o<=214||o>=216&&o<=246||o>=248&&o<=767||o>=880&&o<=893||o>=895&&o<=8191||o>=8204&&o<=8205||o>=8304&&o<=8591||o>=11264&&o<=12271||o>=12289&&o<=55295||o>=63744&&o<=64975||o>=65008&&o<=65533||o>=65536&&o<=983039}Object.defineProperty(l,"__esModule",{value:!0}),l.NC_NAME_START_CHAR="A-Z_a-z------------",l.NC_NAME_CHAR="-"+l.NC_NAME_START_CHAR+".0-9--",l.NC_NAME_START_CHAR_RE=new RegExp("^["+l.NC_NAME_START_CHAR+"]$","u"),l.NC_NAME_CHAR_RE=new RegExp("^["+l.NC_NAME_CHAR+"]$","u"),l.NC_NAME_RE=new RegExp("^["+l.NC_NAME_START_CHAR+"]["+l.NC_NAME_CHAR+"]*$","u"),l.isNCNameStartChar=i,l.isNCNameChar=function(o){return i(o)||o===45||o===46||o>=48&&o<=57||o===183||o>=768&&o<=879||o>=8255&&o<=8256}},{}]},{},[15])(15)})}(hb)),hb.exports}var uK=dK();const Oo=cm(uK);var Ch={exports:{}},fK=Ch.exports,t4;function hK(){return t4||(t4=1,function(e,n){(function(t,s){s()})(fK,function(){function t(a,u){return typeof u>"u"?u={autoBom:!1}:typeof u!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}function s(a,u,h){var f=new XMLHttpRequest;f.open("GET",a),f.responseType="blob",f.onload=function(){c(f.response,u,h)},f.onerror=function(){console.error("could not download file")},f.send()}function l(a){var u=new XMLHttpRequest;u.open("HEAD",a,!1);try{u.send()}catch{}return 200<=u.status&&299>=u.status}function i(a){try{a.dispatchEvent(new MouseEvent("click"))}catch{var u=document.createEvent("MouseEvents");u.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(u)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof mr=="object"&&mr.global===mr?mr:void 0,d=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!d?function(a,u,h){var f=o.URL||o.webkitURL,m=document.createElement("a");u=u||a.name||"download",m.download=u,m.rel="noopener",typeof a=="string"?(m.href=a,m.origin===location.origin?i(m):l(m.href)?s(a,u,h):i(m,m.target="_blank")):(m.href=f.createObjectURL(a),setTimeout(function(){f.revokeObjectURL(m.href)},4e4),setTimeout(function(){i(m)},0))}:"msSaveOrOpenBlob"in navigator?function(a,u,h){if(u=u||a.name||"download",typeof a!="string")navigator.msSaveOrOpenBlob(t(a,h),u);else if(l(a))s(a,u,h);else{var f=document.createElement("a");f.href=a,f.target="_blank",setTimeout(function(){i(f)})}}:function(a,u,h,f){if(f=f||open("","_blank"),f&&(f.document.title=f.document.body.innerText="downloading..."),typeof a=="string")return s(a,u,h);var m=a.type==="application/octet-stream",b=/constructor/i.test(o.HTMLElement)||o.safari,y=/CriOS\/[\d]+/.test(navigator.userAgent);if((y||m&&b||d)&&typeof FileReader<"u"){var g=new FileReader;g.onloadend=function(){var _=g.result;_=y?_:_.replace(/^data:[^;]*;/,"data:attachment/file;"),f?f.location.href=_:location=_,f=null},g.readAsDataURL(a)}else{var w=o.URL||o.webkitURL,x=w.createObjectURL(a);f?f.location=x:location.href=x,f=null,setTimeout(function(){w.revokeObjectURL(x)},4e4)}});o.saveAs=c.saveAs=c,e.exports=c})}(Ch)),Ch.exports}var mK=hK();const Vt={headerBg:"FF4472C4",headerText:"FFFFFFFF",rowLight:"FFF2F2F2",border:"FFBFBFBF",summaryBg:"FFD9D9D9",creditBg:"FF9BC2E6",debitBg:"FFFFC7CE",balancedBg:"FFC6EFCE"},da={default:{name:"Calibri",size:11},header:{name:"Calibri",size:12,bold:!0},title:{name:"Calibri",size:14,bold:!0},large:{name:"Calibri",size:18,bold:!0}},it={reportTitle:{font:{...da.large,color:{argb:Vt.headerText}},alignment:{horizontal:"center",vertical:"middle"},fill:{type:"pattern",pattern:"solid",fgColor:{argb:Vt.headerBg}},border:{top:{style:"medium",color:{argb:Vt.border}},left:{style:"medium",color:{argb:Vt.border}},bottom:{style:"medium",color:{argb:Vt.border}},right:{style:"medium",color:{argb:Vt.border}}}},mainHeader:{font:{...da.header,color:{argb:Vt.headerText}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:Vt.headerBg}},alignment:{horizontal:"center",vertical:"middle"},border:{top:{style:"thin",color:{argb:Vt.headerText}},left:{style:"thin",color:{argb:Vt.headerText}},bottom:{style:"thin",color:{argb:Vt.headerText}},right:{style:"thin",color:{argb:Vt.headerText}}}},subHeader:{font:{...da.default,bold:!0,color:{argb:"FF000000"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FFEEEEEE"}},alignment:{horizontal:"center",vertical:"middle"},border:{top:{style:"thin",color:{argb:Vt.border}},left:{style:"thin",color:{argb:Vt.border}},bottom:{style:"thin",color:{argb:Vt.border}},right:{style:"thin",color:{argb:Vt.border}}}},totalLabel:{font:{...da.default,bold:!0},alignment:{horizontal:"right",vertical:"middle"},fill:{type:"pattern",pattern:"solid",fgColor:{argb:Vt.summaryBg}},border:{top:{style:"thin",color:{argb:Vt.border}},left:{style:"thin",color:{argb:Vt.border}},bottom:{style:"thin",color:{argb:Vt.border}},right:{style:"thin",color:{argb:Vt.border}}}},totalValue:(e="FF000000")=>({font:{...da.default,bold:!0,color:{argb:e}},numFmt:'"SAR" #,##0.00',alignment:{horizontal:"center",vertical:"middle"},fill:{type:"pattern",pattern:"solid",fgColor:{argb:Vt.summaryBg}},border:{top:{style:"thin",color:{argb:Vt.border}},left:{style:"thin",color:{argb:Vt.border}},bottom:{style:"thin",color:{argb:Vt.border}},right:{style:"thin",color:{argb:Vt.border}}}}),finalBalance:{font:{...da.title,color:{argb:Vt.headerText}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:Vt.headerBg}},alignment:{horizontal:"center",vertical:"middle"},border:{top:{style:"medium",color:{argb:Vt.border}},bottom:{style:"medium",color:{argb:Vt.border}},left:{style:"medium",color:{argb:Vt.border}},right:{style:"medium",color:{argb:Vt.border}}},numFmt:'"SAR" #,##0.00'},currency:{numFmt:'"SAR" #,##0.00',alignment:{horizontal:"center",vertical:"middle"}},dateFormat:{numFmt:"dd/mm/yyyy",alignment:{horizontal:"center",vertical:"middle"}},dataCell:(e=!1)=>({font:da.default,alignment:{vertical:"middle",horizontal:"right",wrapText:!0},border:{top:{style:"thin",color:{argb:Vt.border}},left:{style:"thin",color:{argb:Vt.border}},bottom:{style:"thin",color:{argb:Vt.border}},right:{style:"thin",color:{argb:Vt.border}}},fill:e?{type:"pattern",pattern:"solid",fgColor:{argb:Vt.rowLight}}:void 0}),dataCellCenter:(e=!1)=>({font:da.default,alignment:{vertical:"middle",horizontal:"center",wrapText:!0},border:{top:{style:"thin",color:{argb:Vt.border}},left:{style:"thin",color:{argb:Vt.border}},bottom:{style:"thin",color:{argb:Vt.border}},right:{style:"thin",color:{argb:Vt.border}}},fill:e?{type:"pattern",pattern:"solid",fgColor:{argb:Vt.rowLight}}:void 0})},lC={:{fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FFFF9C00"}},font:{color:{argb:"FF9C6500"}}},:{fill:{type:"pattern",pattern:"solid",fgColor:{argb:Vt.balancedBg}},font:{color:{argb:"FF006100"}}},:{fill:{type:"pattern",pattern:"solid",fgColor:{argb:Vt.creditBg}},font:{color:{argb:"FF0C4594"}}},:{fill:{type:"pattern",pattern:"solid",fgColor:{argb:Vt.debitBg}},font:{color:{argb:"FF9C0006"}}}},pK={active:{fill:{type:"pattern",pattern:"solid",fgColor:{argb:Vt.balancedBg}},font:{color:{argb:"FF006100"}}},expired:{fill:{type:"pattern",pattern:"solid",fgColor:{argb:Vt.debitBg}},font:{color:{argb:"FF9C0006"}}},used:{fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FFE2E2E2"}},font:{color:{argb:"FF666666"}}},suspended:{fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FFFFC000"}},font:{color:{argb:"FF996300"}}}},jc=e=>{e.views=[{rightToLeft:!0}],e.properties.defaultRowHeight=20,e.pageSetup={orientation:"landscape",margins:{left:.75,right:.75,top:.75,bottom:.75,header:.3,footer:.3}}},Nc=(e,n,t)=>{const s=e.addRow([n]);e.mergeCells(1,1,1,t),s.getCell(1).style=it.reportTitle,s.height=35;const l=e.addRow([` : ${new Date().toLocaleDateString("ar-SA")}`]);return e.mergeCells(2,1,2,t),l.getCell(1).style={font:{...da.default,italic:!0},alignment:{horizontal:"center",vertical:"middle"}},e.addRow([]),3},lc=(e,n)=>{let t,s;n>0?(t=Vt.debitBg,s="FF9C0006"):n===0?(t=Vt.balancedBg,s="FF006100"):(t=Vt.creditBg,s="FF0C4594"),e.style={...e.style,fill:{type:"pattern",pattern:"solid",fgColor:{argb:t}},font:{...e.font,color:{argb:s}}}},cC=(e,n,t)=>{const s=new Date;new Date(n)<s&&t!==""&&t!==""&&(e.style={...e.style,fill:{type:"pattern",pattern:"solid",fgColor:{argb:Vt.debitBg}},font:{...e.font,color:{argb:"FF9C0006"}}})},gK=(e,n,t)=>{const s=n,l=e.addRow([" "]);e.mergeCells(s,1,s,6),l.getCell(1).style={...it.reportTitle,font:{...da.title,color:{argb:Vt.headerText}}};let i=s+2;return Object.entries(t).forEach(([o,d])=>{const c=e.addRow(["",o,d]);c.getCell(2).style=it.totalLabel,typeof d=="number"&&o.includes("")?c.getCell(3).style=it.totalValue():c.getCell(3).style={font:{...da.default,bold:!0},alignment:{horizontal:"center"}},i++}),i+1},Do=async(e,n)=>{try{const t=await e.xlsx.writeBuffer(),s=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),l=new Date().toISOString().slice(0,19).replace(/[:]/g,"-"),i=`${n}_${l}.xlsx`;mK.saveAs(s,i)}catch(t){throw console.error("Error saving Excel file:",t),new Error("    Excel")}},Cc=e=>{e.columns.forEach(n=>{if(n.eachCell){let t=0;n.eachCell({includeEmpty:!1},s=>{const l=s.value?s.value.toString().length:0;l>t&&(t=l)}),n.width=Math.min(Math.max(t+2,10),50)}})};function bK(e,n,t){const{clients:s,summary:l}=n,i=e.addWorksheet(" - Clients");jc(i);const o=Nc(i,"  ",5);i.columns=[{header:" ",key:"clientName",width:25},{header:" ",key:"phoneNumber",width:15},{header:"",key:"clientRegion",width:15},{header:"",key:"notes",width:30},{header:"",key:"receivables",width:15}];const d=i.getRow(o);d.values=[" "," "," ","",""],d.eachCell(h=>{h.style=it.mainHeader}),d.height=25;let c=o+1;s.forEach((h,f)=>{const m=i.getRow(c);m.values=[h.name||"",h.phone?`+966${h.phone.replace(/^\+?966/,"")}`:"",h.region_name||" ",h.notes||"",h.balance||0];const b=f%2===1;m.getCell(1).style=it.dataCell(b),m.getCell(2).style=it.dataCellCenter(b),m.getCell(3).style=it.dataCellCenter(b),m.getCell(4).style={...it.dataCell(b),alignment:{...it.dataCell(b).alignment,wrapText:!0}},m.getCell(5).style={...it.dataCellCenter(b),...it.currency},lc(m.getCell(5),h.balance||0),m.height=20,c++}),i.addRow([]),c++;const a=i.addRow([" "]);return i.mergeCells(c,1,c,5),a.getCell(1).style=it.reportTitle,c++,[["  ",l.total_clients],[" ",l.total_receivables],[" ",l.total_paid],[" ",l.net_balance]].forEach(([h,f])=>{const m=i.addRow(["","","",h,f]);m.getCell(4).style=it.totalLabel,typeof f=="number"&&h.toString().includes("")||h.toString().includes("")||h.toString().includes("")?(m.getCell(5).style=it.totalValue(),h.toString().includes("")&&typeof f=="number"&&lc(m.getCell(5),f)):m.getCell(5).style={font:{bold:!0},alignment:{horizontal:"center"},border:{top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}},c++}),Cc(i),i}function yK(e,n,t){const{tasks:s,summary:l}=n,i=e.addWorksheet(" - Tasks");jc(i);const o=Nc(i,"  ",9);i.columns=[{header:"",key:"clientName",width:20},{header:" ",key:"clientPhone",width:15},{header:" ",key:"serviceName",width:25},{header:"",key:"taskType",width:15},{header:"",key:"notes",width:25},{header:"",key:"status",width:12},{header:"  ",key:"startDate",width:15},{header:" ",key:"endDate",width:15},{header:"",key:"amount",width:15}];const d=i.getRow(o);d.values=[""," "," ","","","","  "," ",""],d.eachCell(h=>{h.style=it.mainHeader}),d.height=25;let c=o+1;s.forEach((h,f)=>{const m=i.getRow(c),b=B5(h.status),y=q5(h.type);m.values=[h.client_name||"",h.client_phone?`+966${h.client_phone.replace(/^\+?966/,"")}`:"",h.task_name||h.service_name||"",y,h.notes||"",b,fa(h.start_date),h.end_date?fa(h.end_date):"",h.amount||0];const g=f%2===1;m.getCell(1).style=it.dataCell(g),m.getCell(2).style=it.dataCellCenter(g),m.getCell(3).style=it.dataCell(g),m.getCell(4).style=it.dataCellCenter(g),m.getCell(5).style={...it.dataCell(g),alignment:{...it.dataCell(g).alignment,wrapText:!0}};const w=m.getCell(6),x=lC[b];w.style={...it.dataCellCenter(g),...x||{}},m.getCell(7).style={...it.dataCellCenter(g),...it.dateFormat};const _=m.getCell(8);_.style={...it.dataCellCenter(g),...it.dateFormat},h.end_date&&h.is_overdue&&cC(_,h.end_date,h.status),m.getCell(9).style={...it.dataCellCenter(g),...it.currency},m.height=20,c++}),i.addRow([]),c++;const a=i.addRow([" "]);return i.mergeCells(c,1,c,9),a.getCell(1).style=it.reportTitle,c++,[[" ",l.total_tasks],[" ",l.tasks_new],["  ",l.tasks_in_progress],[" ",l.tasks_completed],[" ",l.tasks_cancelled],[" ",l.overdue_tasks],[" ",l.total_amount],[" ",l.total_paid],[" ",l.total_remaining]].forEach(([h,f])=>{const m=i.addRow(["","","","","","","",h,f]);m.getCell(8).style=it.totalLabel,typeof f=="number"&&(h.toString().includes("")||h.toString().includes("")||h.toString().includes(""))?m.getCell(9).style=it.totalValue():m.getCell(9).style={font:{bold:!0},alignment:{horizontal:"center"},border:{top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}},c++}),Cc(i),i}function xK(e,n,t){const{receivables:s,summary:l}=n,i=e.addWorksheet(" - Receivables");jc(i);const o=Nc(i,"  ",5);i.columns=[{header:"",key:"clientName",width:25},{header:" ",key:"clientPhone",width:15},{header:" ",key:"totalDebit",width:15},{header:" ",key:"totalCredit",width:15},{header:" ",key:"netReceivables",width:18}];const d=i.getRow(o);d.values=[""," "," "," "," "],d.eachCell(h=>{h.style=it.mainHeader}),d.height=25;let c=o+1;s.forEach((h,f)=>{const m=i.getRow(c);m.values=[h.client_name||"",h.client_phone?`+966${h.client_phone.replace(/^\+?966/,"")}`:"",h.total_debit||0,h.total_credit||0,h.net_receivables||0];const b=f%2===1;m.getCell(1).style=it.dataCell(b),m.getCell(2).style=it.dataCellCenter(b);const y=m.getCell(3);y.style={...it.dataCellCenter(b),...it.currency,font:{...it.currency.font,color:{argb:"FF9C0006"}}};const g=m.getCell(4);g.style={...it.dataCellCenter(b),...it.currency,font:{...it.currency.font,color:{argb:"FF006100"}}};const w=m.getCell(5);w.style={...it.dataCellCenter(b),...it.currency},lc(w,h.net_receivables||0),m.height=20,c++}),i.addRow([]),c++;const a=i.addRow([" "]);return i.mergeCells(c,1,c,5),a.getCell(1).style=it.reportTitle,c++,[[" ",l.total_debit],[" ",l.total_credit],[" ",l.net_receivables],["  ",l.clients_with_debt],["  ",l.clients_with_credit],[" ",l.balanced_clients]].forEach(([h,f])=>{const m=i.addRow(["","","",h,f]);m.getCell(4).style=it.totalLabel,typeof f=="number"&&(h.toString().includes("")||h.toString().includes("")||h.toString().includes(""))?(m.getCell(5).style=it.totalValue(),h.toString().includes("")&&lc(m.getCell(5),f)):m.getCell(5).style={font:{bold:!0},alignment:{horizontal:"center"},border:{top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}},c++}),Cc(i),i}function r4(e,n,t){const{clientName:s,clientPhone:l,statementItems:i,totals:o,period:d}=n,c=e.addWorksheet(`${s} - `);jc(c);const a=`  : ${s}`,u=Nc(c,a,6),h=c.addRow([" "]);c.mergeCells(u,1,u,6),h.getCell(1).style={font:{bold:!0,size:12},alignment:{horizontal:"center"},fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FFE7E6E6"}}},c.addRow(["",` : ${s}`,"",` : ${l||" "}`]),c.addRow(["",` :  ${fa(d.from)}  ${fa(d.to)}`]),c.addRow([]);const f=u+5;c.columns=[{header:"",key:"description",width:30},{header:"",key:"debit",width:15},{header:"",key:"credit",width:15},{header:" ",key:"balance",width:15},{header:" ",key:"date",width:15},{header:"",key:"type",width:15}];const m=c.getRow(f);m.values=["","",""," "," ",""],m.eachCell(_=>{_.style=it.mainHeader}),m.height=25;let b=f+1,y=0;[...i].sort((_,j)=>new Date(_.date).getTime()-new Date(j.date).getTime()).forEach((_,j)=>{y+=(_.debit||0)-(_.credit||0);const R=c.getRow(b);R.values=[_.description||"",_.debit||0,_.credit||0,y,fa(_.date),_.type||""];const M=j%2===1;R.getCell(1).style={...it.dataCell(M),alignment:{...it.dataCell(M).alignment,wrapText:!0}};const I=R.getCell(2);I.style={...it.dataCellCenter(M),...it.currency,font:{...it.currency.font,color:{argb:"FF9C0006"}}};const F=R.getCell(3);F.style={...it.dataCellCenter(M),...it.currency,font:{...it.currency.font,color:{argb:"FF006100"}}};const B=R.getCell(4);if(B.style={...it.dataCellCenter(M),...it.currency,font:{bold:!0}},lc(B,y),R.getCell(5).style={...it.dataCellCenter(M),...it.dateFormat},R.getCell(6).style=it.dataCellCenter(M),R.height=20,b++,t?.includeSubTables!==!1&&_.details){const{payments:U,allocations:Q}=_.details;if(U&&U.length>0||Q&&Q.length>0){c.addRow([]),b++;const K=c.addRow(["","  "]);c.mergeCells(b,2,b,6),K.getCell(2).style={font:{bold:!0,color:{argb:"FF6C757D"}},alignment:{horizontal:"center"},fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FFFAFAFA"}}},b++;const T=c.addRow(["","","","",""]);for(let P=2;P<=5;P++)T.getCell(P).style=it.subHeader;b++,U&&U.forEach(P=>{const A=c.addRow(["",P.amount,fa(P.allocated_at),P.payment_method?.name||"",P.note||"-"]);A.getCell(2).style={...it.currency,font:{...it.currency.font,color:{argb:"FF006100"}},border:{top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}};for(let N=3;N<=5;N++)A.getCell(N).style={font:{size:10},alignment:{horizontal:"center"},border:{top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}};b++}),Q&&Q.forEach(P=>{const A=c.addRow(["",P.amount,fa(P.allocated_at),"  ",P.description||"-"]);A.getCell(2).style={...it.currency,font:{...it.currency.font,color:{argb:"FF0D6EFD"}},border:{top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}};for(let N=3;N<=5;N++)A.getCell(N).style={font:{size:10},alignment:{horizontal:"center"},border:{top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}};b++}),c.addRow([]),b++}}}),c.addRow([]),b++;const w=c.addRow([" "]);return c.mergeCells(b,1,b,6),w.getCell(1).style=it.reportTitle,b++,[[" ",o.totalDebit],[" ",o.totalCredit],[" ",o.balance]].forEach(([_,j])=>{const R=c.addRow(["","","","",_,j]);R.getCell(5).style=it.totalLabel;const M=R.getCell(6);_.toString().includes(" ")?(M.style=it.finalBalance,lc(M,j)):(M.style=it.totalValue(),_.toString().includes("")?M.style={...M.style,font:{...M.font,color:{argb:"FF9C0006"}}}:_.toString().includes("")&&(M.style={...M.style,font:{...M.font,color:{argb:"FF006100"}}})),b++}),Cc(c),c}function n4(e,n,t){const{client:s,tasks:l,summary:i}=n,o=e.addWorksheet(`${s.name} - `);jc(o);const d=`  : ${s.name}`,c=Nc(o,d,10),a={" ":i.total_tasks," ":i.completed_tasks,"  ":i.in_progress_tasks," ":i.new_tasks," ":i.cancelled_tasks," ":i.total_amount," ":i.total_paid,:i.total_remaining,"  ":i.average_completion_days},u=gK(o,c,a);o.columns=[{header:" ",key:"taskNumber",width:12},{header:" ",key:"serviceName",width:25},{header:"",key:"taskType",width:15},{header:" ",key:"startDate",width:12},{header:" ",key:"endDate",width:12},{header:" ()",key:"durationDays",width:10},{header:"",key:"status",width:12},{header:"",key:"amount",width:15},{header:"",key:"amountPaid",width:15},{header:"",key:"amountRemaining",width:15}];const h=u+2,f=o.getRow(h);f.values=[" "," ",""," "," "," ()","","","",""],f.eachCell(g=>{g.style=it.mainHeader}),f.height=25;let m=h+1;l.forEach((g,w)=>{const x=o.getRow(m),_=B5(g.status),j=q5(g.type),R=g.end_date?Hz(g.start_date,g.end_date):null;x.values=[g.id,g.task_name||g.service_name||"",j,fa(g.start_date),g.end_date?fa(g.end_date):"",R,_,g.amount||0,g.amount_paid||0,g.amount_remaining||0];const M=w%2===1;x.getCell(1).style=it.dataCellCenter(M),x.getCell(2).style={...it.dataCell(M),alignment:{...it.dataCell(M).alignment,wrapText:!0}},x.getCell(3).style=it.dataCellCenter(M),x.getCell(4).style={...it.dataCellCenter(M),...it.dateFormat};const I=x.getCell(5);I.style={...it.dataCellCenter(M),...it.dateFormat},g.end_date&&g.is_overdue&&cC(I,g.end_date,g.status),x.getCell(6).style=it.dataCellCenter(M);const F=x.getCell(7),B=lC[_];F.style={...it.dataCellCenter(M),...B||{}},x.getCell(8).style={...it.dataCellCenter(M),...it.currency},x.getCell(9).style={...it.dataCellCenter(M),...it.currency,font:{...it.currency.font,color:{argb:"FF006100"}}},x.getCell(10).style={...it.dataCellCenter(M),...it.currency,font:{...it.currency.font,color:{argb:"FF9C0006"}}},x.height=20,m++}),o.addRow([]),m++;const b=o.addRow(["  "]);return o.mergeCells(m,1,m,10),b.getCell(1).style=it.reportTitle,m++,[["  ","","","","","","",i.total_tasks],[" ","","","","","","",i.total_amount],[" ","","","","","","",i.total_paid],[" ","","","","","","",i.total_remaining]].forEach(([g,,,,,,,w])=>{const x=o.addRow([g,"","","","","","",w]);x.getCell(1).style=it.totalLabel,typeof w=="number"&&g.toString().includes("")?x.getCell(8).style=it.totalValue():x.getCell(8).style={font:{bold:!0},alignment:{horizontal:"center"},border:{top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}},m++}),Cc(o),o}function s4(e,n,t){const{client:s,credits:l,summary:i}=n,o=e.addWorksheet(`${s.name} - `);jc(o);const d=`  : ${s.name}`,c=Nc(o,d,7);o.columns=[{header:" ",key:"creditDate",width:15},{header:" ",key:"amountGranted",width:15},{header:" ",key:"amountUsed",width:15},{header:" ",key:"amountAvailable",width:15},{header:" ",key:"dueDate",width:15},{header:"",key:"status",width:12},{header:" ",key:"creditType",width:15}];const a=o.getRow(c);a.values=[" "," "," "," "," ",""," "],a.eachCell(x=>{x.style=it.mainHeader}),a.height=25;let u=c+1;l.forEach((x,_)=>{const j=o.getRow(u),R={active:"",expired:" ",used:" ",suspended:""}[x.status]||x.status;j.values=[fa(x.credit_date),x.amount_granted||0,x.amount_used||0,x.amount_available||0,fa(x.due_date),R,x.credit_type||""];const M=_%2===1;j.getCell(1).style={...it.dataCellCenter(M),...it.dateFormat},j.getCell(5).style={...it.dataCellCenter(M),...it.dateFormat},j.getCell(2).style={...it.dataCellCenter(M),...it.currency},j.getCell(3).style={...it.dataCellCenter(M),...it.currency,font:{...it.currency.font,color:{argb:"FF9C0006"}}},j.getCell(4).style={...it.dataCellCenter(M),...it.currency,font:{...it.currency.font,color:{argb:"FF006100"}}};const I=j.getCell(6),F=pK[x.status];I.style={...it.dataCellCenter(M),...F||{}},j.getCell(7).style=it.dataCellCenter(M),j.height=20,u++});const h=c,f=9,m=o.getCell(h,f);m.value=" ",m.style={font:{bold:!0,size:12,color:{argb:"FFFFFFFF"}},alignment:{horizontal:"center"},fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FF4472C4"}},border:{top:{style:"medium"},left:{style:"medium"},bottom:{style:"medium"},right:{style:"medium"}}},o.mergeCells(h,f,h,f+1);const b=[["  ",i.total_granted],[" ",i.total_used],[" ",i.total_available],["  ",i.active_credits],["  ",i.expired_credits],[" ",`${D_(i.total_used,i.total_granted)}%`]];let y=h+2;b.forEach(([x,_])=>{const j=o.getCell(y,f),R=o.getCell(y,f+1);j.value=x,R.value=_,j.style={font:{bold:!0},alignment:{horizontal:"right"},border:{top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}},typeof _=="number"&&x.toString().includes("")?R.style={...it.currency,font:{bold:!0},alignment:{horizontal:"center"},border:{top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}}:R.style={font:{bold:!0},alignment:{horizontal:"center"},border:{top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}},y++}),o.addRow([]),u++;const g=o.addRow(["  "]);return o.mergeCells(u,1,u,7),g.getCell(1).style=it.reportTitle,u++,[["  ",i.total_granted],[" ",i.total_used],[" ",i.total_available],[" ",`${D_(i.total_used,i.total_granted)}%`]].forEach(([x,_])=>{const j=o.addRow(["","","","","",x,_]);j.getCell(6).style=it.totalLabel,typeof _=="number"?j.getCell(7).style=it.totalValue():j.getCell(7).style={font:{bold:!0},alignment:{horizontal:"center"},border:{top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}},u++}),Cc(o),o}class vK{async exportAllClients(n,t){try{const s=new Oo.Workbook;s.creator="  ",s.lastModifiedBy="  ",s.created=new Date,s.modified=new Date,bK(s,n,t);const l=t?.customFilename||"__";await Do(s,l)}catch(s){throw console.error("Error exporting all clients:",s),new Error("    ")}}async exportAllTasks(n,t){try{const s=new Oo.Workbook;s.creator="  ",s.lastModifiedBy="  ",s.created=new Date,s.modified=new Date,yK(s,n,t);const l=t?.customFilename||"__";await Do(s,l)}catch(s){throw console.error("Error exporting all tasks:",s),new Error("    ")}}async exportAllReceivables(n,t){try{const s=new Oo.Workbook;s.creator="  ",s.lastModifiedBy="  ",s.created=new Date,s.modified=new Date,xK(s,n,t);const l=t?.customFilename||"__";await Do(s,l)}catch(s){throw console.error("Error exporting all receivables:",s),new Error("    ")}}async exportClientStatement(n,t){try{const s=new Oo.Workbook;s.creator="  ",s.lastModifiedBy="  ",s.created=new Date,s.modified=new Date,r4(s,n,t);const l=t?.customFilename||`__${n.clientName.replace(/\s+/g,"_")}`;await Do(s,l)}catch(s){throw console.error("Error exporting client statement:",s),new Error("     ")}}async exportClientTasks(n,t){try{const s=new Oo.Workbook;s.creator="  ",s.lastModifiedBy="  ",s.created=new Date,s.modified=new Date,n4(s,n,t);const l=t?.customFilename||`_${n.client.name.replace(/\s+/g,"_")}`;await Do(s,l)}catch(s){throw console.error("Error exporting client tasks:",s),new Error("    ")}}async exportClientCredits(n,t){try{const s=new Oo.Workbook;s.creator="  ",s.lastModifiedBy="  ",s.created=new Date,s.modified=new Date,s4(s,n,t);const l=t?.customFilename||`_${n.client.name.replace(/\s+/g,"_")}`;await Do(s,l)}catch(s){throw console.error("Error exporting client credits:",s),new Error("    ")}}async exportClientComprehensiveReport(n,t,s,l){try{const i=new Oo.Workbook;i.creator="  ",i.lastModifiedBy="  ",i.created=new Date,i.modified=new Date,r4(i,n,l),n4(i,t,l),s&&s4(i,s,l);const o=l?.customFilename||`__${n.clientName.replace(/\s+/g,"_")}`;await Do(i,o)}catch(i){throw console.error("Error exporting comprehensive client report:",i),new Error("     ")}}}const Ji=new vK;var sy=new Map,dh=new WeakMap,a4=0,wK=void 0;function _K(e){return e?(dh.has(e)||(a4+=1,dh.set(e,a4.toString())),dh.get(e)):"0"}function jK(e){return Object.keys(e).sort().filter(n=>e[n]!==void 0).map(n=>`${n}_${n==="root"?_K(e.root):e[n]}`).toString()}function NK(e){const n=jK(e);let t=sy.get(n);if(!t){const s=new Map;let l;const i=new IntersectionObserver(o=>{o.forEach(d=>{var c;const a=d.isIntersecting&&l.some(u=>d.intersectionRatio>=u);e.trackVisibility&&typeof d.isVisible>"u"&&(d.isVisible=a),(c=s.get(d.target))==null||c.forEach(u=>{u(a,d)})})},e);l=i.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),t={id:n,observer:i,elements:s},sy.set(n,t)}return t}function CK(e,n,t={},s=wK){if(typeof window.IntersectionObserver>"u"&&s!==void 0){const c=e.getBoundingClientRect();return n(s,{isIntersecting:s,target:e,intersectionRatio:typeof t.threshold=="number"?t.threshold:0,time:0,boundingClientRect:c,intersectionRect:c,rootBounds:c}),()=>{}}const{id:l,observer:i,elements:o}=NK(t),d=o.get(e)||[];return o.has(e)||o.set(e,d),d.push(n),i.observe(e),function(){d.splice(d.indexOf(n),1),d.length===0&&(o.delete(e),i.unobserve(e)),o.size===0&&(i.disconnect(),sy.delete(l))}}function fo({threshold:e,delay:n,trackVisibility:t,rootMargin:s,root:l,triggerOnce:i,skip:o,initialInView:d,fallbackInView:c,onChange:a}={}){var u;const[h,f]=H.useState(null),m=H.useRef(a),[b,y]=H.useState({inView:!!d,entry:void 0});m.current=a,H.useEffect(()=>{if(o||!h)return;let _;return _=CK(h,(j,R)=>{y({inView:j,entry:R}),m.current&&m.current(j,R),R.isIntersecting&&i&&_&&(_(),_=void 0)},{root:l,rootMargin:s,threshold:e,trackVisibility:t,delay:n},c),()=>{_&&_()}},[Array.isArray(e)?e.toString():e,h,l,s,i,o,t,c,n]);const g=(u=b.entry)==null?void 0:u.target,w=H.useRef(void 0);!h&&g&&!i&&!o&&w.current!==g&&(w.current=g,y({inView:!!d,entry:void 0}));const x=[f,b.inView,b.entry];return x.ref=x[0],x.inView=x[1],x.entry=x[2],x}const SK=()=>{const{t:e}=qt(),n=et(R=>R.openModal),{showToast:t}=ir(),[s,l]=H.useState(""),[i,o]=H.useState(null);H.useEffect(()=>{qn("clients")},[]);const{data:d,isLoading:c,fetchNextPage:a,hasNextPage:u,isFetchingNextPage:h}=BI(s,i),f=H.useMemo(()=>d?.pages.flatMap(R=>R.clients)||[],[d]),{ref:m}=fo({threshold:1,onChange:R=>{R&&u&&!h&&a()}}),b=Et({mutationFn:Ji.exportAllClients,onSuccess:()=>{t({type:"success",title:"   "})},onError:R=>{t({type:"error",title:" ",message:R.message})}}),y=()=>{n("clientForm",{})},g=R=>{n("clientForm",{clientToEdit:R})},w=R=>{n("invoiceForm",{client_id:R.id,client:R})},x=R=>{n("taskForm",{client:R})},_=()=>{if(f.length>0){const R=f.map(I=>({...I,balance:I.total_outstanding||0})),M={total_clients:f.length,total_receivables:f.reduce((I,F)=>I+(F.total_outstanding||0),0),total_paid:f.reduce((I,F)=>I+(F.total_paid||0),0),net_balance:f.reduce((I,F)=>I+(F.total_outstanding||0),0)};b.mutate({clients:R,summary:M})}},j=()=>{t({type:"info",title:" ",message:"    ."})};return r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-3 py-2",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("h5",{className:"mb-0 text-primary font-bold text-xl",children:e("clients.title")}),r.jsxs(Ne,{onClick:y,size:"sm",className:"hover:scale-105 transition-transform",children:[r.jsx(rl,{size:16,className:"me-1"}),e("clients.addNew")]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("div",{className:"relative min-w-[200px]",children:[r.jsx("input",{type:"text",className:"w-full px-3 py-1.5 text-sm border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary",placeholder:"    ...",value:s,onChange:R=>l(R.target.value)}),s&&r.jsx("button",{type:"button",className:"absolute left-2 top-1/2 -translate-y-1/2 text-black hover:text-foreground transition-colors p-0 bg-transparent border-0 cursor-pointer",onClick:()=>l(""),title:" ",children:r.jsx(ln,{size:14})})]}),r.jsx("div",{className:"min-w-[150px]",children:r.jsx($y,{value:i,onChange:o,placeholder:" ",allowCreate:!1,className:"mb-0"})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(Ne,{variant:"outline-primary",size:"sm",onClick:_,isLoading:b.isPending,title:"  Excel",className:"hover:bg-primary/10 hover:text-primary transition-all",children:[r.jsx(Ry,{size:16,className:"me-1"}),"Excel"]}),r.jsxs(Ne,{variant:"outline-primary",size:"sm",onClick:j,title:"",className:"hover:bg-primary/10 hover:text-primary transition-all",children:[r.jsx(cD,{size:16,className:"me-1"}),""]})]})]})]}),r.jsx("div",{className:"rounded-lg border border-border bg-card shadow-sm",children:r.jsxs("div",{className:"p-0",children:[r.jsx(oC,{clients:f,isLoading:c&&!d,onEdit:g,onAddTask:x,onAddInvoice:w}),r.jsxs("div",{ref:m,className:"text-center p-4 border-t border-border",children:[u&&r.jsx(Ne,{onClick:()=>a(),isLoading:h,variant:"outline-primary",children:h?" ...":" "}),!u&&!c&&f.length>0&&r.jsx("p",{className:"text-black mb-0 text-sm",children:"   "})]})]})})]})},dC=De.memo(({rowData:e})=>e.client?r.jsx("span",{className:"hulool-cell-content",style:{fontWeight:600},children:r.jsx(xn,{to:`/clients/${e.client.id}?mode=tasks`,className:"no-underline text-black font-bold hover:text-primary transition-colors",onClick:n=>n.stopPropagation(),children:e.client.name})}):r.jsx("span",{className:"hulool-cell-content",style:{color:"#9ca3af"},children:"  "}));dC.displayName="ClientLinkCell";const uC=De.memo(({rowData:e})=>{if(!e.client?.phone)return r.jsx("span",{className:"hulool-cell-content",style:{color:"#9ca3af"},children:""});const n=e.client.phone,t=l=>{const i=l.replace(/\D/g,"");return i.startsWith("966")?i:i.startsWith("0")?`966${i.substring(1)}`:`966${i}`},s=l=>{l.stopPropagation();const i=t(n);window.open(`https://wa.me/${i}`,"_blank")};return r.jsxs("div",{className:"hulool-cell-content",style:{justifyContent:"center",gap:"4px"},children:[r.jsx("span",{style:{color:"#000000",fontSize:"0.875rem"},children:n}),r.jsx("button",{onClick:s,title:" ",className:"hulool-whatsapp-btn",children:r.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"#25D366",children:r.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})})})]})});uC.displayName="PhoneWhatsAppCell";const fC=De.memo(({rowData:e,columnData:n})=>{const t=n?.t||(l=>l),s=e.task_name||t(`type.${e.type}`);return r.jsx("div",{style:{fontWeight:500,color:"#000000"},children:s})});fC.displayName="ServiceCell";const hC=De.memo(({rowData:e,columnData:n})=>{const t=n?.t||(o=>o),s={Government:"#3b82f6",RealEstate:"#22c55e",Accounting:"#eab308",Other:"#6b7280"},l=t(`type.${e.type}`),i=l.startsWith("type.")?e.type:l;return r.jsx("div",{style:{display:"flex",justifyContent:"center"},children:r.jsx("span",{style:{backgroundColor:s[e.type]||"#6b7280",color:e.type==="Accounting"?"#000000":"#ffffff",padding:"4px 12px",borderRadius:"9999px",fontSize:"0.875rem",fontWeight:500,whiteSpace:"nowrap"},children:i})})});hC.displayName="TypeBadgeCell";const mC=De.memo(({rowData:e})=>{const n=e.notes;return r.jsx("div",{style:{color:"#000000",fontSize:"0.875rem",maxWidth:"200px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:n||""})});mC.displayName="NotesCell";const pC=De.memo(({rowData:e,columnData:n})=>{const t=n?.getEmployeeName||(()=>"");return r.jsx("div",{style:{fontSize:"0.875rem",fontWeight:500,color:"#4b5563"},children:t(e.assigned_to_id)})});pC.displayName="AssignedCell";const gC=De.memo(({rowData:e,columnData:n})=>{const t=n?.t||(d=>d),s={New:{bg:"rgba(234, 179, 8, 0.2)",text:"#a16207",border:"rgba(234, 179, 8, 0.3)"},Deferred:{bg:"rgba(239, 68, 68, 0.2)",text:"#dc2626",border:"rgba(239, 68, 68, 0.3)"},Completed:{bg:"rgba(34, 197, 94, 0.2)",text:"#16a34a",border:"rgba(34, 197, 94, 0.3)"},"Pending Review":{bg:"rgba(249, 115, 22, 0.2)",text:"#ea580c",border:"rgba(249, 115, 22, 0.3)"},Cancelled:{bg:"rgba(107, 114, 128, 0.2)",text:"#4b5563",border:"rgba(107, 114, 128, 0.3)"}},l=s[e.status]||s.Cancelled,i=t(`status.${e.status}`),o=i.startsWith("status.")?e.status:i;return r.jsx("div",{style:{display:"flex",justifyContent:"center"},children:r.jsx("span",{style:{backgroundColor:l.bg,color:l.text,border:`1px solid ${l.border}`,padding:"4px 12px",borderRadius:"9999px",fontSize:"0.875rem",fontWeight:600,whiteSpace:"nowrap"},children:o})})});gC.displayName="StatusBadgeCell";const bC=De.memo(({rowData:e,rowIndex:n,columnData:t})=>{const s=e,{onEdit:l,onComplete:i,onViewAmountDetails:o,onDelete:d,onShowRequirements:c,onAssign:a,handleDefer:u,handleResume:h,handleRestore:f,handleApproveTask:m,openDrawer:b,shouldShowCompleteButton:y,canDeleteTasks:g}=t||{};if(!t)return null;const w=[];return s.client?.google_drive_link&&w.push(eC(x=>x.client?.google_drive_link)),w.push({type:"message",onClick:()=>b?.("taskFollowUp",{taskId:s.id,taskName:s.task_name||void 0,clientName:s.client?.name||"  "}),title:"",variant:"outline-secondary"}),a&&(s.status==="New"||s.status==="Deferred")&&w.push(oK(a)),s.amount_details&&s.amount_details.length>0&&o&&w.push(cK(o)),s.status==="New"&&w.push({type:"defer",onClick:()=>u?.(s),title:"",className:"bg-yellow-400 hover:bg-yellow-500 border-yellow-400 text-black"}),s.status==="Deferred"&&w.push({type:"resume",onClick:()=>h?.(s),title:"",className:"bg-cyan-500 hover:bg-cyan-600 border-cyan-500 text-white"}),s.status!=="Completed"&&s.status!=="Pending Review"&&y?.(s)&&w.push({type:"complete",onClick:()=>i?.(s),title:"",className:"bg-green-600 hover:bg-green-700 border-green-600 text-white"}),s.assigned_to_id&&s.status!=="Completed"&&s.status!=="Cancelled"&&s.status!=="New"&&s.status!=="Deferred"&&w.push({type:"review",onClick:()=>m?.(s),title:"",className:"bg-orange-500 hover:bg-orange-600 border-orange-500 text-white"}),s.status==="Completed"&&w.push({type:"restore",onClick:()=>f?.(s),title:"",className:"bg-green-700 hover:bg-green-800 border-green-700 text-white"}),w.push(px(l)),c&&w.push(lK(c)),g&&w.push({type:"cancel",onClick:()=>d?.(s),title:"",variant:"danger",icon:r.jsx(ln,{size:16})}),r.jsx("div",{style:{display:"flex",justifyContent:"flex-start",alignItems:"center",height:"100%"},children:r.jsx(mx,{item:s,index:n,actions:w,compact:!0})})});bC.displayName="ActionsCell";const gx=({tasks:e,isLoading:n,onEdit:t,onComplete:s,onViewAmountDetails:l,onDelete:i,onShowRequirements:o,onAssign:d})=>{const{t:c}=qt(),a=Au(),u=Fm(),h=Lm(),{data:f}=wm(),{success:m,error:b}=ir(),{openDrawer:y}=al(),{openModal:g}=et(),{data:w=[]}=Uy(),x=T=>{if(!T)return"";const P=w.find(A=>A.user_id===T);return P?P.display_name:"Unknown Employee"},_=T=>T?w.some(P=>P.user_id===T):!1,j=T=>T.assigned_to_id&&_(T.assigned_to_id)?!1:T.assigned_to_id==null,R=T=>{g("approval",{task:T})},M=T=>{a.mutate({id:T.id},{onSuccess:()=>{m(c("tasks.deferSuccess"),c("tasks.deferSuccessMessage",{taskName:T.task_name||c(`type.${T.type}`)}))},onError:P=>{b(c("common.error"),P.message||c("tasks.deferError"))}})},I=T=>{u.mutate({id:T.id},{onSuccess:()=>{m(c("tasks.resumeSuccess"),c("tasks.resumeSuccessMessage",{taskName:T.task_name||c(`type.${T.type}`)}))},onError:P=>{b(c("common.error"),P.message||c("tasks.resumeError"))}})},F=T=>{h.mutate({id:T.id},{onSuccess:()=>{m(" ",`   "${T.task_name||c(`type.${T.type}`)}"   `)},onError:P=>{b(c("common.error"),P.message||"    ")}})},B=f?.tm_delete_any_task||!1,U=H.useMemo(()=>{let T=[...e].sort((P,A)=>{const N=P.tags?.some(O=>O.name==="")||!1,k=A.tags?.some(O=>O.name==="")||!1,S=new Date(P.created_at||P.start_date).getTime(),E=new Date(A.created_at||A.start_date).getTime();return N&&k||!N&&!k?E-S:N?-1:1});return T=T.sort((P,A)=>{const N=["New","Pending Review","Deferred","Completed","Cancelled"];return N.indexOf(P.status)-N.indexOf(A.status)}),T},[e]),Q=H.useMemo(()=>[{id:"client",key:"client.name",title:c("tasks.tableHeaderClient"),type:"custom",component:dC,grow:1},{id:"phone",key:"client.phone",title:c("tasks.tableHeaderClientPhone"),type:"custom",component:uC,grow:1},{id:"service",key:"task_name",title:c("tasks.tableHeaderService"),type:"custom",component:fC,grow:1},{id:"type",key:"type",title:c("tasks.tableHeaderType"),type:"custom",component:hC,width:100,grow:0},{id:"notes",key:"notes",title:c("tasks.tableHeaderNotes"),type:"custom",component:mC,grow:2},{id:"assigned",key:"assigned_to_id",title:"",type:"custom",component:pC,width:120,grow:0},{id:"status",key:"status",title:c("tasks.tableHeaderStatus"),type:"custom",component:gC,width:120,grow:0},{id:"actions",key:"id",title:c("tasks.tableHeaderActions"),type:"custom",component:bC,width:300,grow:0}],[c]),K=H.useMemo(()=>Q.map(T=>T.id==="service"||T.id==="type"||T.id==="status"?{...T,columnData:{t:c}}:T.id==="assigned"?{...T,columnData:{getEmployeeName:x}}:T.id==="actions"?{...T,columnData:{onEdit:t,onComplete:s,onViewAmountDetails:l,onDelete:i,onShowRequirements:o,onAssign:d,handleDefer:M,handleResume:I,handleRestore:F,handleApproveTask:R,openDrawer:y,isUserEmployee:_,shouldShowCompleteButton:j,canDeleteTasks:B}}:T),[Q,c,x,t,s,l,i,o,d,B]);return r.jsx(co,{data:U,columns:K,isLoading:n,emptyMessage:c("common.noResults"),typeField:"type",typeColors:ca,showId:!1,height:"auto",minHeight:400})},kK=({search:e,status:n,type:t,onSearchChange:s,onStatusChange:l,onTypeChange:i,onClearFilters:o})=>{const{t:d}=qt(),c=[{value:"",label:d("common.all")},{value:"New",label:d("status.New")},{value:"Deferred",label:d("status.Deferred")},{value:"Completed",label:d("status.Completed")},{value:"Late",label:d("status.Late")},{value:"Pending Review",label:d("status.Pending Review")}],a=[{value:"",label:d("common.all")},{value:"Government",label:d("type.Government")},{value:"RealEstate",label:d("type.RealEstate")},{value:"Accounting",label:d("type.Accounting")},{value:"Other",label:d("type.Other")}],u=e||n||t;return r.jsxs("div",{className:"task-filters",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-3 items-center",children:[r.jsx("div",{className:"md:col-span-4",children:r.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-input rounded-md bg-background text-black text-base focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-colors",placeholder:d("tasks.searchPlaceholder"),value:e,onChange:h=>s(h.target.value)})}),r.jsx("div",{className:"md:col-span-3",children:r.jsx("select",{className:"w-full px-3 py-2 border border-input rounded-md bg-background text-black text-base focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-colors",value:n,onChange:h=>l(h.target.value),children:c.map(h=>r.jsx("option",{value:h.value,children:h.label},h.value))})}),r.jsx("div",{className:"md:col-span-3",children:r.jsx("select",{className:"w-full px-3 py-2 border border-input rounded-md bg-background text-black text-base focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-colors",value:t,onChange:h=>i(h.target.value),children:a.map(h=>r.jsx("option",{value:h.value,children:h.label},h.value))})}),r.jsx("div",{className:"md:col-span-2",children:u&&r.jsx("button",{type:"button",className:"w-full px-4 py-2 border border-border rounded-md bg-background text-black text-base font-medium hover:bg-muted transition-colors",onClick:o,children:d("common.clearFilters")})})]}),u&&r.jsx("div",{className:"mt-3",children:r.jsxs("div",{className:"flex flex-wrap gap-2",children:[e&&r.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full bg-blue-500 text-white text-sm",children:[d("common.search"),": ",e,r.jsx("button",{type:"button",className:"ml-1 text-white hover:text-gray-200 transition-colors",style:{fontSize:"0.7em"},onClick:()=>s(""),"aria-label":d("common.remove"),children:""})]}),n&&r.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full bg-yellow-500 text-white text-sm",children:[d("common.status"),": ",c.find(h=>h.value===n)?.label,r.jsx("button",{type:"button",className:"ml-1 text-white hover:text-gray-200 transition-colors",style:{fontSize:"0.7em"},onClick:()=>l(""),"aria-label":d("common.remove"),children:""})]}),t&&r.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full bg-green-500 text-white text-sm",children:[d("common.type"),": ",a.find(h=>h.value===t)?.label,r.jsx("button",{type:"button",className:"ml-1 text-white hover:text-gray-200 transition-colors",style:{fontSize:"0.7em"},onClick:()=>i(""),"aria-label":d("common.remove"),children:""})]})]})})]})},EK=()=>{const{t:e}=qt(),n=et(L=>L.openModal),{openDrawer:t}=al(),s=bc(),{success:l,error:i}=ir(),[o,d]=vu(),{showToast:c}=ir(),[a,u]=H.useState(o.get("search")||""),[h,f]=H.useState(o.get("status")||""),[m,b]=H.useState(()=>o.get("type")||"");H.useEffect(()=>{u(o.get("search")||""),f(o.get("status")||""),b(o.get("type")||"")},[o]),H.useEffect(()=>{const L=new URLSearchParams;a&&L.set("search",a),h&&L.set("status",h),m&&L.set("type",m),L.toString()!==o.toString()&&d(L)},[h,m,a]),H.useEffect(()=>{qn("tasks")},[]);const y=H.useMemo(()=>h&&m?`${e("tasks.title")} - ${e(`status.${h}`)} - ${e(`type.${m}`)}`:h?`${e("tasks.title")} - ${e(`status.${h}`)}`:m?`${e("tasks.title")} - ${e(`type.${m}`)}`:e("tasks.title"),[h,m,e]),{data:g,isLoading:w,fetchNextPage:x,hasNextPage:_,isFetchingNextPage:j}=yF({status:h||void 0,type:m||void 0}),R=H.useMemo(()=>g?.pages.flatMap(L=>L.tasks)||[],[g]);H.useEffect(()=>{const L=o.get("taskId"),z=o.get("highlightMessage");if(L){const G=parseInt(L,10);if(!isNaN(G)){console.log("Notification link detected - Task ID:",G,"Highlight Message:",z),console.log("Available tasks:",R.length,"Loading:",w),t("taskFollowUp",{taskId:G,taskName:void 0,clientName:void 0,highlightMessage:z?parseInt(z,10):void 0});const Z=new URLSearchParams(o);Z.delete("taskId"),Z.delete("highlightMessage"),d(Z,{replace:!0})}}},[o,t,d]);const{ref:M}=fo({threshold:1,onChange:L=>{L&&_&&!j&&x()}}),I=Et({mutationFn:Ji.exportAllTasks,onSuccess:()=>{c({type:"success",title:"   "})},onError:L=>{c({type:"error",title:" ",message:L.message})}}),F=H.useMemo(()=>{if(!R.length)return[];if(!a.trim())return R;const L=a.toLowerCase().trim();return R.filter(z=>z.task_name?.toLowerCase().includes(L)||z.client.name.toLowerCase().includes(L)||z.client.phone.includes(L)||z.notes?.toLowerCase().includes(L)||z.type.toLowerCase().includes(L))},[R,a]),B=()=>n("taskForm",{}),U=L=>n("taskForm",{taskToEdit:L}),Q=L=>{n("taskCompletion",{task:L})},K=L=>{n("amountDetails",{task:L})},T=L=>{s.mutate({id:L.id,decisions:{task_action:"cancel"}},{onSuccess:z=>{if("success"in z&&z.success===!1&&z.code==="task_cancellation_conflict"){const G=z.data;n("taskCancellation",{taskId:L.id,analysisData:{task_id:G.task_id,prepaid_receivable:G.prepaid_receivable,main_receivable:G.main_receivable,total_funds_involved:G.total_funds_involved},onResolved:()=>{l("    ","       ")}});return}l(" ","   ")},onError:z=>{i("",z.message||"    ")}})},P=L=>{n("requirements",{task:L})},A=L=>{n("assignTask",{task:L})},N=L=>u(L),k=L=>f(L),S=L=>b(L),E=()=>{u(""),f(""),b("")},O=()=>{if(F.length>0){const L=F.map(G=>({...G,client_name:G.client.name,client_phone:G.client.phone,service_name:G.task_name||e(`type.${G.type}`),task_type:G.type,amount_paid:G.receivable?G.amount-G.receivable.amount:G.amount,amount_remaining:G.receivable?.amount||0,is_overdue:G.receivable?new Date(G.receivable.due_date||"")<new Date&&G.status!=="Completed":!1})),z={total_tasks:L.length,tasks_new:L.filter(G=>G.status==="New").length,tasks_in_progress:L.filter(G=>G.status==="Deferred").length,tasks_completed:L.filter(G=>G.status==="Completed").length,tasks_cancelled:L.filter(G=>G.status==="Cancelled").length,total_amount:L.reduce((G,Z)=>G+Z.amount,0),total_paid:L.reduce((G,Z)=>G+Z.amount_paid,0),total_remaining:L.reduce((G,Z)=>G+Z.amount_remaining,0),overdue_tasks:L.filter(G=>G.is_overdue).length};I.mutate({tasks:L,summary:z})}};return r.jsxs("div",{children:[r.jsxs("header",{className:"flex justify-between items-center mb-1 py-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h5",{className:"mb-0",style:{background:"linear-gradient(135deg, #d4af37 0%, #b8941f 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",fontWeight:"bold",minWidth:"fit-content",fontSize:"1.1rem"},children:y}),r.jsxs(Ne,{onClick:B,size:"sm",style:{minWidth:"fit-content"},children:[r.jsx(rl,{size:14,className:"ms-1"}),e("tasks.addNew")]})]}),r.jsxs(Ne,{variant:"outline-primary",size:"sm",onClick:O,isLoading:I.isPending,title:"  Excel",children:[r.jsx(Ry,{size:14,className:"me-1"}),"Excel"]})]}),r.jsxs("div",{className:"rounded-lg border border-border bg-card shadow-sm",children:[r.jsx("div",{className:"bg-white py-2 px-4 border-b border-border",children:r.jsx(kK,{search:a,status:h,type:m,onSearchChange:N,onStatusChange:k,onTypeChange:S,onClearFilters:E})}),r.jsxs("div",{className:"p-0",children:[r.jsx(gx,{tasks:F,isLoading:w&&!g,onEdit:U,onComplete:Q,onViewAmountDetails:K,onDelete:T,onShowRequirements:P,onAssign:A}),r.jsxs("div",{ref:M,className:"text-center p-4",children:[_&&r.jsx(Ne,{onClick:()=>x(),isLoading:j,variant:"outline-primary",children:j?" ...":" "}),!_&&!w&&R.length>0&&r.jsx("p",{className:"text-black mb-0",children:"   "})]})]})]})]})},el=({size:e=16,className:n=""})=>r.jsxs("svg",{width:e,height:e,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:n,children:[r.jsx("path",{d:"M28 16C28 22.6274 22.6274 28 16 28C9.37258 28 4 22.6274 4 16C4 9.37258 9.37258 4 16 4C22.6274 4 28 9.37258 28 16Z",fill:"url(#paint0_linear_87_7264)"}),r.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 30C23.732 30 30 23.732 30 16C30 8.26801 23.732 2 16 2C8.26801 2 2 8.26801 2 16C2 18.5109 2.661 20.8674 3.81847 22.905L2 30L9.31486 28.3038C11.3014 29.3854 13.5789 30 16 30ZM16 27.8462C22.5425 27.8462 27.8462 22.5425 27.8462 16C27.8462 9.45755 22.5425 4.15385 16 4.15385C9.45755 4.15385 4.15385 9.45755 4.15385 16C4.15385 18.5261 4.9445 20.8675 6.29184 22.7902L5.23077 26.7692L9.27993 25.7569C11.1894 27.0746 13.5046 27.8462 16 27.8462Z",fill:"white"}),r.jsx("path",{d:"M12.5 9.49989C12.1672 8.83131 11.6565 8.8905 11.1407 8.8905C10.2188 8.8905 8.78125 9.99478 8.78125 12.05C8.78125 13.7343 9.52345 15.578 12.0244 18.3361C14.438 20.9979 17.6094 22.3748 20.2422 22.3279C22.875 22.2811 23.4167 20.0154 23.4167 19.2503C23.4167 18.9112 23.2062 18.742 23.0613 18.696C22.1641 18.2654 20.5093 17.4631 20.1328 17.3124C19.7563 17.1617 19.5597 17.3656 19.4375 17.4765C19.0961 17.8018 18.4193 18.7608 18.1875 18.9765C17.9558 19.1922 17.6103 19.083 17.4665 19.0015C16.9374 18.7892 15.5029 18.1511 14.3595 17.0426C12.9453 15.6718 12.8623 15.2001 12.5959 14.7803C12.3828 14.4444 12.5392 14.2384 12.6172 14.1483C12.9219 13.7968 13.3426 13.254 13.5313 12.9843C13.7199 12.7145 13.5702 12.305 13.4803 12.05C13.0938 10.953 12.7663 10.0347 12.5 9.49989Z",fill:"white"}),r.jsx("defs",{children:r.jsxs("linearGradient",{id:"paint0_linear_87_7264",x1:"26.5",y1:"7",x2:"4",y2:"28",gradientUnits:"userSpaceOnUse",children:[r.jsx("stop",{stopColor:"#5BD066"}),r.jsx("stop",{offset:"1",stopColor:"#27B43E"})]})})]}),bx=e=>{let n=e.replace(/\D/g,"");return n.startsWith("0")?n="966"+n.substring(1):n.startsWith("966")||(n="966"+n),n},RK=async e=>{try{if(navigator.clipboard&&window.isSecureContext)return await navigator.clipboard.writeText(e),!0;{const n=document.createElement("textarea");return n.value=e,n.style.position="absolute",n.style.left="-999999px",document.body.prepend(n),n.select(),document.execCommand("copy"),n.remove(),!0}}catch(n){return console.error("Failed to copy to clipboard:",n),!1}},TK=async e=>{const{phone:n,message:t="",showConfirmation:s=!1,fallbackToClipboard:l=!0}=e,i=bx(n),o=encodeURIComponent(t),d=`https://web.whatsapp.com/send?phone=${i}&text=${o}`,c=`https://wa.me/${i}?text=${o}`,a=`whatsapp://send?phone=${i}&text=${o}`;let u=!0;if(s&&t){const m=`     :

"${t}"

${l?`         .

`:""}  `;u=window.confirm(m)}if(!u)return;if(t&&l&&await RK(t)&&console.log("Message copied to clipboard as fallback"),!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))try{const m=window.open(d,"_blank");setTimeout(()=>{m&&(m.closed||!m.location)&&(window.location.href=a,setTimeout(()=>{window.open(c,"_blank")},2e3))},1500)}catch{window.open(c,"_blank")}else window.open(c,"_blank")},AK=(e,n)=>`  ${e}       ${n}.  .`,ip=(e,n,t)=>{const s=AK(n,t);TK({phone:e,message:s,showConfirmation:!0,fallbackToClipboard:!0})},Bo=e=>{const n=Number(e)||0;return new Intl.NumberFormat("en-US",{style:"currency",currency:"SAR",minimumFractionDigits:2}).format(n)},yC=De.memo(({rowData:e,columnData:n,active:t})=>{const s=l=>{l.stopPropagation(),n?.onClientClick?.(e.client_id)};return r.jsx("span",{className:"hulool-cell-content",style:{fontWeight:t?800:600,color:"var(--color-primary, #3b82f6)",cursor:"pointer"},onClick:s,children:e.client_name||""})});yC.displayName="ClientNameCell";const xC=De.memo(({rowData:e,columnData:n,active:t})=>{const s=e.client_phone,l=i=>{i.stopPropagation(),n?.onWhatsApp?.(s)};return s?r.jsxs("div",{className:"hulool-cell-content",style:{justifyContent:"center",gap:"8px",fontWeight:t?700:400},children:[r.jsx("button",{onClick:l,title:" ",className:"hulool-whatsapp-btn",children:r.jsx(el,{size:14})}),r.jsx("span",{style:{color:"#000000"},children:s})]}):r.jsx("span",{className:"hulool-cell-content",style:{justifyContent:"center",color:"#9ca3af",fontWeight:t?700:400},children:""})});xC.displayName="PhoneCell";const vC=De.memo(({rowData:e,active:n})=>{const t=Number(e.total_amount)||0;return r.jsx("span",{className:"hulool-cell-content",style:{justifyContent:"center",color:"#000000",fontWeight:n?700:500},children:Bo(t)})});vC.displayName="TotalDebitCell";const wC=De.memo(({rowData:e,active:n})=>{const t=Number(e.paid_amount)||0;return r.jsx("span",{className:"hulool-cell-content",style:{justifyContent:"center",color:"#16a34a",fontWeight:n?700:500},children:Bo(t)})});wC.displayName="TotalCreditCell";const _C=De.memo(({rowData:e,active:n})=>{const t=Math.max(0,Number(e.remaining_amount)||0);return r.jsx("span",{className:"hulool-cell-content",style:{justifyContent:"center",fontWeight:n?800:700,color:"#dc2626"},children:Bo(t)})});_C.displayName="RemainingCell";const jC=De.memo(({rowData:e,columnData:n})=>{const{openModal:t,onPaymentReminder:s,onPayment:l}=n||{},i=Number(e.remaining_amount)>0,o=c=>{c.stopPropagation(),s?.(e.client_phone,e.client_name,Number(e.remaining_amount))},d=c=>{c.stopPropagation(),l?.(e.client_id)};return r.jsxs("div",{style:{display:"flex",gap:"4px",justifyContent:"center",alignItems:"center",height:"100%",pointerEvents:"auto"},onMouseDown:c=>c.stopPropagation(),onClick:c=>c.stopPropagation(),children:[r.jsx("button",{onClick:o,onMouseDown:c=>c.stopPropagation(),title:"    ",disabled:!i,style:{padding:"4px 8px",borderRadius:"6px",border:"1px solid #22c55e",backgroundColor:"transparent",color:"#22c55e",cursor:i?"pointer":"not-allowed",opacity:i?1:.5,display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(el,{size:14})}),r.jsxs("button",{onClick:d,onMouseDown:c=>c.stopPropagation(),disabled:!i,style:{padding:"4px 12px",borderRadius:"6px",border:"none",backgroundColor:i?"var(--color-primary, #3b82f6)":"#9ca3af",color:"#ffffff",cursor:i?"pointer":"not-allowed",display:"flex",alignItems:"center",gap:"4px",fontSize:"0.875rem",fontWeight:500},children:[r.jsx(gs,{size:14}),""]})]})});jC.displayName="ActionsCell";const MK=({clients:e,isLoading:n,totals:t,isTotalsLoading:s})=>{const l=kn(),i=et(m=>m.openModal),o=m=>{l(`/clients/${m}?mode=receivables`)},d=m=>{const b=bx(m);window.open(`https://wa.me/${b}`,"_blank")},c=(m,b,y)=>{const g=Bo(y);ip(m,b,g)},a=m=>{i("selectReceivableForPayment",{clientId:m,receivables:[]})},u=H.useMemo(()=>e.filter(m=>(Number(m.remaining_amount)||0)>0),[e]),h=H.useMemo(()=>t?{totalAmount:t.total_amount,paidAmount:t.total_paid,remainingAmount:t.total_unpaid}:{totalAmount:0,paidAmount:0,remainingAmount:0},[t]),f=H.useMemo(()=>[{id:"client_name",key:"client_name",title:"",type:"custom",component:yC,columnData:{onClientClick:o},grow:2},{id:"client_phone",key:"client_phone",title:" ",type:"custom",component:xC,columnData:{onWhatsApp:d},grow:1},{id:"total_amount",key:"total_amount",title:" ",type:"custom",component:vC,grow:1},{id:"paid_amount",key:"paid_amount",title:" ",type:"custom",component:wC,grow:1},{id:"remaining_amount",key:"remaining_amount",title:" ",type:"custom",component:_C,grow:1},{id:"actions",key:"client_id",title:"",type:"custom",component:jC,columnData:{openModal:i,onPaymentReminder:c,onPayment:a},width:200,grow:0}],[o,d,i,c,a]);return!e||e.length===0||u.length===0?r.jsx("div",{className:"text-center py-5",children:r.jsx("p",{className:"text-black",children:"    "})}):r.jsxs("div",{className:"clients-receivables-wrapper",dir:"rtl",children:[r.jsx(co,{data:u,columns:f,isLoading:n,emptyMessage:"    ",showId:!1,height:"auto",minHeight:400}),r.jsx("div",{className:"rounded-lg border border-border bg-card shadow-sm mt-2",children:r.jsx("div",{className:"p-2",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2 text-center",children:[r.jsxs("div",{className:"flex justify-between items-center p-2 bg-primary text-white rounded font-bold",children:[r.jsx("span",{className:"text-sm",children:""}),r.jsx("span",{})]}),r.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-100 rounded",children:[r.jsx("span",{className:"text-gray-600 text-sm",children:" :"}),r.jsx("span",{className:"font-bold text-black",children:s?r.jsx("div",{className:"inline-block w-4 h-4 border-2 border-primary border-t-transparent rounded-full animate-spin"}):Bo(h.totalAmount)})]}),r.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-100 rounded",children:[r.jsx("span",{className:"text-gray-600 text-sm",children:" :"}),r.jsx("span",{className:"font-bold text-green-600",children:s?r.jsx("div",{className:"inline-block w-4 h-4 border-2 border-green-600 border-t-transparent rounded-full animate-spin"}):Bo(h.paidAmount)})]}),r.jsxs("div",{className:"flex justify-between items-center p-2 bg-red-100 rounded",children:[r.jsx("span",{className:"text-gray-600 text-sm",children:" :"}),r.jsx("span",{className:"font-bold text-red-600",children:s?r.jsx("div",{className:"inline-block w-4 h-4 border-2 border-red-600 border-t-transparent rounded-full animate-spin"}):Bo(h.remainingAmount)})]})]})})})]})},OK=()=>{const{t:e}=qt(),n=et(R=>R.openModal),{hasViewAllReceivablesPermission:t,isLoading:s}=_c(),{showToast:l}=ir(),[i,o]=H.useState(""),d=ap(i,500),{data:c,isLoading:a,fetchNextPage:u,hasNextPage:h,isFetchingNextPage:f}=nL(t,d),{data:m,isLoading:b}=sL(t),y=H.useMemo(()=>c?.pages.flatMap(R=>R.clients)||[],[c]),{ref:g}=fo({threshold:1,onChange:R=>{R&&h&&!f&&u()}}),w=Et({mutationFn:R=>Ji.exportAllReceivables(R),onSuccess:()=>{l({type:"success",title:"   "})},onError:R=>{l({type:"error",title:" ",message:R.message})}});H.useEffect(()=>{qn("receivables")},[]);const x=()=>n("recordCreditModal",{}),_=()=>o(""),j=()=>{if(y.length>0&&m){const R=y.map(I=>({client_id:I.client_id,client_name:I.client_name,client_phone:I.client_phone,total_debit:I.total_amount,total_credit:I.paid_amount,net_receivables:I.remaining_amount})),M={total_debit:m.total_amount,total_credit:m.total_paid,net_receivables:m.total_unpaid,clients_with_debt:m.clients_with_debt,clients_with_credit:m.clients_with_credit,balanced_clients:m.balanced_clients};w.mutate({receivables:R,summary:M})}};return s?r.jsx("div",{className:"flex justify-center p-4",children:"Loading permissions..."}):t?r.jsxs("div",{children:[r.jsxs("header",{className:"flex justify-between items-center mb-1 py-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h5",{className:"mb-0 text-primary",style:{fontWeight:"bold",fontSize:"1.1rem"},children:e("receivables.title")}),r.jsxs(Ne,{onClick:x,variant:"outline-primary",size:"sm",children:[r.jsx(zr,{size:14,className:"me-1"}),"  "]}),r.jsxs(Ne,{onClick:()=>n("invoiceForm",{}),size:"sm",children:[r.jsx(rl,{size:14,className:"me-1"}),"  "]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("div",{className:"relative",style:{minWidth:"250px"},children:[r.jsx(ps,{size:14,className:"absolute text-black",style:{left:"8px",top:"50%",transform:"translateY(-50%)"}}),r.jsx("input",{type:"text",className:"w-full px-3 py-1.5 text-sm border border-input rounded-md bg-background text-black focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-colors",placeholder:"    ...",value:i,onChange:R=>o(R.target.value),style:{paddingLeft:"32px"}}),i&&r.jsx("button",{type:"button",className:"absolute text-black p-0 hover:text-foreground transition-colors",style:{right:"8px",top:"50%",transform:"translateY(-50%)"},onClick:_,title:" ",children:r.jsx(ln,{size:14})})]}),d&&c&&r.jsxs("small",{className:"text-black",style:{minWidth:"fit-content"},children:["(",c.pages[0]?.pagination?.total||0," )"]}),r.jsxs(Ne,{variant:"outline-primary",size:"sm",onClick:j,isLoading:w.isPending,children:[r.jsx(Ry,{size:14,className:"me-1"}),""]})]})]}),r.jsx("div",{className:"rounded-lg border border-border bg-card shadow-sm",children:r.jsx("div",{className:"p-0",children:d&&y.length===0&&!a?r.jsxs("div",{className:"text-center p-4",children:[r.jsx(ps,{size:32,className:"text-black mb-2"}),r.jsx("h6",{className:"text-black font-semibold mb-1",children:"  "}),r.jsxs("p",{className:"text-black mb-2",style:{fontSize:"0.875rem"},children:['       "',d,'"     ']}),r.jsx(Ne,{variant:"outline-primary",size:"sm",onClick:_,children:" "})]}):r.jsxs(r.Fragment,{children:[r.jsx(MK,{clients:y,isLoading:a&&!c,totals:m,isTotalsLoading:b}),r.jsxs("div",{ref:g,className:"text-center p-4",children:[h&&r.jsx(Ne,{onClick:()=>u(),isLoading:f,variant:"outline-primary",children:f?" ...":" "}),!h&&!a&&y.length>0&&r.jsx("p",{className:"text-black mb-0",children:d?"    ":"   "})]})]})})})]}):r.jsxs("div",{className:"rounded-lg border border-yellow-500 bg-yellow-500/10 p-4 text-center",children:[r.jsx("h4",{className:"text-lg font-bold text-black mb-2",children:"Access Denied"}),r.jsx("p",{className:"text-black",children:"You don't have permission to view receivables."})]})},op=()=>{const[e,n]=H.useState(!1),t=H.useRef(null);return H.useEffect(()=>{const s=new IntersectionObserver(([i])=>{n(!i.isIntersecting)},{root:null,rootMargin:"0px",threshold:1}),l=t.current;return l&&s.observe(l),()=>{l&&s.unobserve(l)}},[]),{sentinelRef:t,isSticky:e}},NC=({receivables:e,isLoading:n,filterType:t})=>{const s=kn(),l=et(w=>w.openModal),[i,o]=H.useState(new Set),{sentinelRef:d,isSticky:c}=op();if(n)return r.jsx("div",{className:"flex justify-center items-center p-5",children:r.jsx("div",{className:"w-10 h-10 border-4 border-primary border-t-transparent rounded-full animate-spin",role:"status",children:r.jsx("span",{className:"sr-only",children:"Loading..."})})});if(!e.length)return r.jsxs("div",{className:"text-center p-5 text-black",children:[r.jsx(Sn,{size:48,className:"mb-3 opacity-50"}),r.jsx("p",{className:"mb-0",children:t==="paid"?"   ":"    "})]});const a=[...e].sort((w,x)=>{const _=new Date(w.due_date||"").getTime();return new Date(x.due_date||"").getTime()-_}),u=w=>{const x=new Set(i);i.has(w)?x.delete(w):x.add(w),o(x)},h=w=>{const x={Accounting:"px-2.5 py-1 rounded-full bg-yellow-500 text-white font-semibold text-sm",RealEstate:"px-2.5 py-1 rounded-full bg-green-600 text-white font-semibold text-sm",Government:"px-2.5 py-1 rounded-full bg-primary text-white font-semibold text-sm",Other:"px-2.5 py-1 rounded-full bg-gray-500 text-white font-semibold text-sm"},_={Accounting:"",RealEstate:"",Government:"",Other:""};return r.jsx("span",{className:x[w]||x.Other,children:_[w]||_.Other})},f=w=>new Intl.NumberFormat("en-US",{style:"currency",currency:"SAR",minimumFractionDigits:2}).format(w),m=w=>{s(`/clients/${w}?mode=receivables`)},b=w=>{const x=w.startsWith("+")?w:`+966${w}`;window.open(`https://wa.me/${x}`,"_blank")},y=w=>{l("paymentForm",{receivable:w})},g=a.reduce((w,x)=>({totalDebit:w.totalDebit+x.amount,totalCredit:w.totalCredit+x.total_paid,totalNet:w.totalNet+x.remaining_amount}),{totalDebit:0,totalCredit:0,totalNet:0});return r.jsxs("div",{className:"w-full overflow-x-auto",dir:"rtl",children:[r.jsx("div",{ref:d}),r.jsxs(Zs,{children:[r.jsx(Fs,{className:c?"is-sticky":"",children:r.jsxs($r,{style:{backgroundColor:t==="paid"?"#22c55e":"#dc2626",color:"white"},children:[r.jsx(St,{className:"text-center text-white font-bold",style:{width:"5%"}}),r.jsx(St,{className:"text-center text-white font-bold",style:{width:"8%"},children:""}),r.jsx(St,{className:"text-center text-white font-bold",style:{width:"7%"},children:" "}),r.jsx(St,{className:"text-center text-white font-bold",style:{width:"20%"},children:""}),r.jsx(St,{className:"text-center text-white font-bold",style:{width:"10%"},children:""}),r.jsx(St,{className:"text-center text-white font-bold",style:{width:"12%"},children:""}),r.jsx(St,{className:"text-center text-white font-bold",style:{width:"12%"},children:""}),r.jsx(St,{className:"text-center text-white font-bold",style:{width:"12%"},children:""}),r.jsx(St,{className:"text-center text-white font-bold",style:{width:"10%"},children:" "}),r.jsx(St,{className:"text-center text-white font-bold",style:{width:"4%"},children:""})]})}),r.jsx(Js,{children:a.map(w=>{const x=i.has(w.id),_=w.payments&&w.payments.length>0;return r.jsxs(De.Fragment,{children:[r.jsxs($r,{className:"hover:bg-muted/30 transition-colors",children:[r.jsx(yt,{className:"text-center",children:_&&r.jsx("button",{className:"p-0 text-primary hover:text-primary/80 transition-colors",onClick:()=>u(w.id),children:x?r.jsx(mc,{size:16}):r.jsx(Gs,{size:16})})}),r.jsx(yt,{className:"text-right",children:r.jsx("div",{className:"flex items-center justify-between",style:{direction:"rtl"},children:r.jsx("div",{className:"font-bold text-primary cursor-pointer",onClick:()=>m(Number(w.client_id)),style:{cursor:"pointer"},children:w.client?.name})})}),r.jsx(yt,{children:r.jsxs("div",{className:"text-black text-sm flex justify-center items-center justify-end",children:[r.jsx("button",{className:"p-0 text-green-600 hover:text-green-700 transition-colors ml-1",onClick:()=>b(w.client?.phone||""),title:"WhatsApp",children:r.jsx(Ps,{size:12})}),r.jsx("span",{className:"text-black",children:w.client?.phone})]})}),r.jsx(yt,{className:"text-center",children:r.jsx("div",{className:"truncate",style:{maxWidth:"200px"},title:w.description,children:w.description})}),r.jsx(yt,{className:"text-center",children:h(w.type)}),r.jsx(yt,{className:"text-center font-bold text-red-600",children:f(w.amount)}),r.jsx(yt,{className:"text-center font-bold text-green-600",children:f(w.total_paid)}),r.jsx(yt,{className:"text-center font-bold text-primary",children:f(w.remaining_amount)}),r.jsx(yt,{className:"text-center",children:r.jsx("small",{className:new Date(w.due_date)<new Date?"text-red-600 font-bold":"text-black",children:Zr(w.due_date)})}),r.jsx(yt,{className:"text-center",children:w.remaining_amount>0&&r.jsxs(Ne,{variant:"primary",size:"sm",onClick:()=>y(w),children:[r.jsx(gs,{size:14,className:"me-1"}),""]})})]}),x&&_&&r.jsx($r,{children:r.jsx(yt,{colSpan:9,children:r.jsxs("div",{className:"bg-muted/30 p-3 rounded-lg",children:[r.jsx("h6",{className:"mb-3 text-primary font-semibold",children:" "}),r.jsx("div",{className:"w-full overflow-x-auto",children:r.jsxs("div",{className:"grid grid-cols-5 gap-2 divide-y divide-border",children:[r.jsxs("div",{className:"col-span-5 grid grid-cols-5 gap-2 bg-muted/50 p-2 rounded font-bold text-black text-sm",children:[r.jsx("div",{className:"text-center",children:""}),r.jsx("div",{className:"text-center",children:" "}),r.jsx("div",{className:"text-center",children:" "}),r.jsx("div",{className:"text-center",children:""}),r.jsx("div",{className:"text-center",children:""})]}),w.payments.map(j=>r.jsxs("div",{className:"col-span-5 grid grid-cols-5 gap-2 p-2 hover:bg-muted/20 transition-colors",children:[r.jsx("div",{className:"text-center font-bold text-green-600",children:f(j.amount)}),r.jsx("div",{className:"text-center text-black",children:j.payment_method?.name_ar||" "}),r.jsx("div",{className:"text-center text-black",children:Zr(j.paid_at)}),r.jsx("div",{className:"text-center text-black",children:j.note||"-"}),r.jsxs("div",{className:"text-center flex gap-1 justify-center",children:[r.jsx(Ne,{variant:"outline-primary",size:"sm",onClick:R=>{R.stopPropagation(),l("paymentEdit",{payment:j,receivable:w})},title:"",children:r.jsx(ui,{size:14})}),r.jsx(Ne,{variant:"danger",size:"sm",onClick:R=>{R.stopPropagation(),l("paymentDelete",{payment:j})},title:"",children:r.jsx(Is,{size:14})})]})]},j.id))]})})]})})})]},w.id)})}),r.jsx(Fs,{children:r.jsxs($r,{style:{backgroundColor:t==="paid"?"#22c55e":"#dc2626",color:"white"},children:[r.jsx(yt,{colSpan:4,className:"text-right text-white font-bold",children:""}),r.jsx(yt,{className:"text-center text-white font-bold",children:f(g.totalDebit)}),r.jsx(yt,{className:"text-center text-white font-bold",children:f(g.totalCredit)}),r.jsx(yt,{className:"text-center text-white font-bold",children:f(g.totalNet)}),r.jsx(yt,{colSpan:2})]})})]})]})},DK=()=>{const{hasViewPaidReceivablesPermission:e,isLoading:n}=_c(),{data:t,isLoading:s,fetchNextPage:l,hasNextPage:i,isFetchingNextPage:o}=f5("paid",e),d=H.useMemo(()=>t?.pages.flatMap(a=>a.receivables)||[],[t]),{ref:c}=fo({threshold:1,onChange:a=>{a&&i&&!o&&l()}});return H.useEffect(()=>{qn("receivables")},[]),n?r.jsx("div",{className:"flex justify-center p-4",children:"Loading permissions..."}):e?r.jsxs("div",{children:[r.jsx("header",{className:"flex justify-between items-center mb-3",children:r.jsx("h1",{style:{background:"linear-gradient(135deg, #22c55e 0%, #16a34a 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",fontWeight:"bold"},children:" "})}),r.jsx("div",{className:"rounded-lg border border-border bg-card shadow-sm",children:r.jsxs("div",{className:"p-0",children:[r.jsx(NC,{receivables:d,isLoading:s&&!t,filterType:"paid"}),r.jsxs("div",{ref:c,className:"text-center p-4",children:[i&&r.jsx(Ne,{onClick:()=>l(),isLoading:o,variant:"outline-primary",children:o?" ...":" "}),!i&&!s&&d.length>0&&r.jsx("p",{className:"text-black mb-0",children:"   "})]})]})})]}):r.jsxs("div",{className:"rounded-lg border border-yellow-500 bg-yellow-500/10 p-4 text-center",children:[r.jsx("h4",{className:"text-lg font-bold text-black mb-2",children:"Access Denied"}),r.jsx("p",{className:"text-black",children:"You don't have permission to view paid receivables."})]})},PK=()=>{const{hasViewOverdueReceivablesPermission:e,isLoading:n}=_c(),{data:t,isLoading:s,fetchNextPage:l,hasNextPage:i,isFetchingNextPage:o}=f5("overdue",e),d=H.useMemo(()=>t?.pages.flatMap(a=>a.receivables)||[],[t]),{ref:c}=fo({threshold:1,onChange:a=>{a&&i&&!o&&l()}});return H.useEffect(()=>{qn("receivables")},[]),n?r.jsx("div",{className:"flex justify-center p-4",children:"Loading permissions..."}):e?r.jsxs("div",{children:[r.jsx("header",{className:"flex justify-between items-center mb-3",children:r.jsx("h1",{style:{background:"linear-gradient(135deg, #f55a3f 0%, #dc2626 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",fontWeight:"bold"},children:" "})}),r.jsx("div",{className:"rounded-lg border border-border bg-card shadow-sm",children:r.jsxs("div",{className:"p-0",children:[r.jsx(NC,{receivables:d,isLoading:s&&!t,filterType:"overdue"}),r.jsxs("div",{ref:c,className:"text-center p-4",children:[i&&r.jsx(Ne,{onClick:()=>l(),isLoading:o,variant:"outline-primary",children:o?" ...":" "}),!i&&!s&&d.length>0&&r.jsx("p",{className:"text-black mb-0",children:"   "})]})]})})]}):r.jsxs("div",{className:"rounded-lg border border-yellow-500 bg-yellow-500/10 p-4 text-center",children:[r.jsx("h4",{className:"text-lg font-bold text-black mb-2",children:"Access Denied"}),r.jsx("p",{className:"text-black",children:"You don't have permission to view overdue receivables."})]})};var ay=["Enter"," "],IK=["ArrowDown","PageUp","Home"],CC=["ArrowUp","PageDown","End"],FK=[...IK,...CC],LK={ltr:[...ay,"ArrowRight"],rtl:[...ay,"ArrowLeft"]},zK={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Iu="Menu",[du,BK,qK]=Dy(Iu),[ol,SC]=Fa(Iu,[qK,np,Rm]),lp=np(),kC=Rm(),[$K,ll]=ol(Iu),[UK,Fu]=ol(Iu),EC=e=>{const{__scopeMenu:n,open:t=!1,children:s,dir:l,onOpenChange:i,modal:o=!0}=e,d=lp(n),[c,a]=H.useState(null),u=H.useRef(!1),h=pi(i),f=Em(l);return H.useEffect(()=>{const m=()=>{u.current=!0,document.addEventListener("pointerdown",b,{capture:!0,once:!0}),document.addEventListener("pointermove",b,{capture:!0,once:!0})},b=()=>u.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",b,{capture:!0}),document.removeEventListener("pointermove",b,{capture:!0})}},[]),r.jsx(P8,{...d,children:r.jsx($K,{scope:n,open:t,onOpenChange:h,content:c,onContentChange:a,children:r.jsx(UK,{scope:n,onClose:H.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:u,dir:f,modal:o,children:s})})})};EC.displayName=Iu;var HK="MenuAnchor",yx=H.forwardRef((e,n)=>{const{__scopeMenu:t,...s}=e,l=lp(t);return r.jsx(fx,{...l,...s,ref:n})});yx.displayName=HK;var xx="MenuPortal",[VK,RC]=ol(xx,{forceMount:void 0}),TC=e=>{const{__scopeMenu:n,forceMount:t,children:s,container:l}=e,i=ll(xx,n);return r.jsx(VK,{scope:n,forceMount:t,children:r.jsx(ra,{present:t||i.open,children:r.jsx(Qm,{asChild:!0,container:l,children:s})})})};TC.displayName=xx;var Xs="MenuContent",[KK,vx]=ol(Xs),AC=H.forwardRef((e,n)=>{const t=RC(Xs,e.__scopeMenu),{forceMount:s=t.forceMount,...l}=e,i=ll(Xs,e.__scopeMenu),o=Fu(Xs,e.__scopeMenu);return r.jsx(du.Provider,{scope:e.__scopeMenu,children:r.jsx(ra,{present:s||i.open,children:r.jsx(du.Slot,{scope:e.__scopeMenu,children:o.modal?r.jsx(WK,{...l,ref:n}):r.jsx(QK,{...l,ref:n})})})})}),WK=H.forwardRef((e,n)=>{const t=ll(Xs,e.__scopeMenu),s=H.useRef(null),l=pn(n,s);return H.useEffect(()=>{const i=s.current;if(i)return Jy(i)},[]),r.jsx(wx,{...e,ref:l,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:Yt(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),QK=H.forwardRef((e,n)=>{const t=ll(Xs,e.__scopeMenu);return r.jsx(wx,{...e,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),GK=sc("MenuContent.ScrollLock"),wx=H.forwardRef((e,n)=>{const{__scopeMenu:t,loop:s=!1,trapFocus:l,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:d,onEntryFocus:c,onEscapeKeyDown:a,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:f,onDismiss:m,disableOutsideScroll:b,...y}=e,g=ll(Xs,t),w=Fu(Xs,t),x=lp(t),_=kC(t),j=BK(t),[R,M]=H.useState(null),I=H.useRef(null),F=pn(n,I,g.onContentChange),B=H.useRef(0),U=H.useRef(""),Q=H.useRef(0),K=H.useRef(null),T=H.useRef("right"),P=H.useRef(0),A=b?Xm:H.Fragment,N=b?{as:GK,allowPinchZoom:!0}:void 0,k=E=>{const O=U.current+E,L=j().filter(J=>!J.disabled),z=document.activeElement,G=L.find(J=>J.ref.current===z)?.textValue,Z=L.map(J=>J.textValue),ee=oW(Z,O,G),W=L.find(J=>J.textValue===ee)?.ref.current;(function J($){U.current=$,window.clearTimeout(B.current),$!==""&&(B.current=window.setTimeout(()=>J(""),1e3))})(O),W&&setTimeout(()=>W.focus())};H.useEffect(()=>()=>window.clearTimeout(B.current),[]),Zy();const S=H.useCallback(E=>T.current===K.current?.side&&cW(E,K.current?.area),[]);return r.jsx(KK,{scope:t,searchRef:U,onItemEnter:H.useCallback(E=>{S(E)&&E.preventDefault()},[S]),onItemLeave:H.useCallback(E=>{S(E)||(I.current?.focus(),M(null))},[S]),onTriggerLeave:H.useCallback(E=>{S(E)&&E.preventDefault()},[S]),pointerGraceTimerRef:Q,onPointerGraceIntentChange:H.useCallback(E=>{K.current=E},[]),children:r.jsx(A,{...N,children:r.jsx(Wm,{asChild:!0,trapped:l,onMountAutoFocus:Yt(i,E=>{E.preventDefault(),I.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:r.jsx(Km,{asChild:!0,disableOutsidePointerEvents:d,onEscapeKeyDown:a,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:f,onDismiss:m,children:r.jsx(x6,{asChild:!0,..._,dir:w.dir,orientation:"vertical",loop:s,currentTabStopId:R,onCurrentTabStopIdChange:M,onEntryFocus:Yt(c,E=>{w.isUsingKeyboardRef.current||E.preventDefault()}),preventScrollOnEntryFocus:!0,children:r.jsx(I8,{role:"menu","aria-orientation":"vertical","data-state":WC(g.open),"data-radix-menu-content":"",dir:w.dir,...x,...y,ref:F,style:{outline:"none",...y.style},onKeyDown:Yt(y.onKeyDown,E=>{const L=E.target.closest("[data-radix-menu-content]")===E.currentTarget,z=E.ctrlKey||E.altKey||E.metaKey,G=E.key.length===1;L&&(E.key==="Tab"&&E.preventDefault(),!z&&G&&k(E.key));const Z=I.current;if(E.target!==Z||!FK.includes(E.key))return;E.preventDefault();const W=j().filter(J=>!J.disabled).map(J=>J.ref.current);CC.includes(E.key)&&W.reverse(),aW(W)}),onBlur:Yt(e.onBlur,E=>{E.currentTarget.contains(E.target)||(window.clearTimeout(B.current),U.current="")}),onPointerMove:Yt(e.onPointerMove,uu(E=>{const O=E.target,L=P.current!==E.clientX;if(E.currentTarget.contains(O)&&L){const z=E.clientX>P.current?"right":"left";T.current=z,P.current=E.clientX}}))})})})})})})});AC.displayName=Xs;var XK="MenuGroup",_x=H.forwardRef((e,n)=>{const{__scopeMenu:t,...s}=e;return r.jsx(gr.div,{role:"group",...s,ref:n})});_x.displayName=XK;var YK="MenuLabel",MC=H.forwardRef((e,n)=>{const{__scopeMenu:t,...s}=e;return r.jsx(gr.div,{...s,ref:n})});MC.displayName=YK;var Zh="MenuItem",i4="menu.itemSelect",cp=H.forwardRef((e,n)=>{const{disabled:t=!1,onSelect:s,...l}=e,i=H.useRef(null),o=Fu(Zh,e.__scopeMenu),d=vx(Zh,e.__scopeMenu),c=pn(n,i),a=H.useRef(!1),u=()=>{const h=i.current;if(!t&&h){const f=new CustomEvent(i4,{bubbles:!0,cancelable:!0});h.addEventListener(i4,m=>s?.(m),{once:!0}),h6(h,f),f.defaultPrevented?a.current=!1:o.onClose()}};return r.jsx(OC,{...l,ref:c,disabled:t,onClick:Yt(e.onClick,u),onPointerDown:h=>{e.onPointerDown?.(h),a.current=!0},onPointerUp:Yt(e.onPointerUp,h=>{a.current||h.currentTarget?.click()}),onKeyDown:Yt(e.onKeyDown,h=>{const f=d.searchRef.current!=="";t||f&&h.key===" "||ay.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});cp.displayName=Zh;var OC=H.forwardRef((e,n)=>{const{__scopeMenu:t,disabled:s=!1,textValue:l,...i}=e,o=vx(Zh,t),d=kC(t),c=H.useRef(null),a=pn(n,c),[u,h]=H.useState(!1),[f,m]=H.useState("");return H.useEffect(()=>{const b=c.current;b&&m((b.textContent??"").trim())},[i.children]),r.jsx(du.ItemSlot,{scope:t,disabled:s,textValue:l??f,children:r.jsx(v6,{asChild:!0,...d,focusable:!s,children:r.jsx(gr.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...i,ref:a,onPointerMove:Yt(e.onPointerMove,uu(b=>{s?o.onItemLeave(b):(o.onItemEnter(b),b.defaultPrevented||b.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Yt(e.onPointerLeave,uu(b=>o.onItemLeave(b))),onFocus:Yt(e.onFocus,()=>h(!0)),onBlur:Yt(e.onBlur,()=>h(!1))})})})}),ZK="MenuCheckboxItem",DC=H.forwardRef((e,n)=>{const{checked:t=!1,onCheckedChange:s,...l}=e;return r.jsx(zC,{scope:e.__scopeMenu,checked:t,children:r.jsx(cp,{role:"menuitemcheckbox","aria-checked":Jh(t)?"mixed":t,...l,ref:n,"data-state":Nx(t),onSelect:Yt(l.onSelect,()=>s?.(Jh(t)?!0:!t),{checkForDefaultPrevented:!1})})})});DC.displayName=ZK;var PC="MenuRadioGroup",[JK,eW]=ol(PC,{value:void 0,onValueChange:()=>{}}),IC=H.forwardRef((e,n)=>{const{value:t,onValueChange:s,...l}=e,i=pi(s);return r.jsx(JK,{scope:e.__scopeMenu,value:t,onValueChange:i,children:r.jsx(_x,{...l,ref:n})})});IC.displayName=PC;var FC="MenuRadioItem",LC=H.forwardRef((e,n)=>{const{value:t,...s}=e,l=eW(FC,e.__scopeMenu),i=t===l.value;return r.jsx(zC,{scope:e.__scopeMenu,checked:i,children:r.jsx(cp,{role:"menuitemradio","aria-checked":i,...s,ref:n,"data-state":Nx(i),onSelect:Yt(s.onSelect,()=>l.onValueChange?.(t),{checkForDefaultPrevented:!1})})})});LC.displayName=FC;var jx="MenuItemIndicator",[zC,tW]=ol(jx,{checked:!1}),BC=H.forwardRef((e,n)=>{const{__scopeMenu:t,forceMount:s,...l}=e,i=tW(jx,t);return r.jsx(ra,{present:s||Jh(i.checked)||i.checked===!0,children:r.jsx(gr.span,{...l,ref:n,"data-state":Nx(i.checked)})})});BC.displayName=jx;var rW="MenuSeparator",qC=H.forwardRef((e,n)=>{const{__scopeMenu:t,...s}=e;return r.jsx(gr.div,{role:"separator","aria-orientation":"horizontal",...s,ref:n})});qC.displayName=rW;var nW="MenuArrow",$C=H.forwardRef((e,n)=>{const{__scopeMenu:t,...s}=e,l=lp(t);return r.jsx(F8,{...l,...s,ref:n})});$C.displayName=nW;var sW="MenuSub",[PZ,UC]=ol(sW),Xd="MenuSubTrigger",HC=H.forwardRef((e,n)=>{const t=ll(Xd,e.__scopeMenu),s=Fu(Xd,e.__scopeMenu),l=UC(Xd,e.__scopeMenu),i=vx(Xd,e.__scopeMenu),o=H.useRef(null),{pointerGraceTimerRef:d,onPointerGraceIntentChange:c}=i,a={__scopeMenu:e.__scopeMenu},u=H.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return H.useEffect(()=>u,[u]),H.useEffect(()=>{const h=d.current;return()=>{window.clearTimeout(h),c(null)}},[d,c]),r.jsx(yx,{asChild:!0,...a,children:r.jsx(OC,{id:l.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":l.contentId,"data-state":WC(t.open),...e,ref:hi(n,l.onTriggerChange),onClick:h=>{e.onClick?.(h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:Yt(e.onPointerMove,uu(h=>{i.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!t.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{t.onOpenChange(!0),u()},100))})),onPointerLeave:Yt(e.onPointerLeave,uu(h=>{u();const f=t.content?.getBoundingClientRect();if(f){const m=t.content?.dataset.side,b=m==="right",y=b?-5:5,g=f[b?"left":"right"],w=f[b?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+y,y:h.clientY},{x:g,y:f.top},{x:w,y:f.top},{x:w,y:f.bottom},{x:g,y:f.bottom}],side:m}),window.clearTimeout(d.current),d.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Yt(e.onKeyDown,h=>{const f=i.searchRef.current!=="";e.disabled||f&&h.key===" "||LK[s.dir].includes(h.key)&&(t.onOpenChange(!0),t.content?.focus(),h.preventDefault())})})})});HC.displayName=Xd;var VC="MenuSubContent",KC=H.forwardRef((e,n)=>{const t=RC(Xs,e.__scopeMenu),{forceMount:s=t.forceMount,...l}=e,i=ll(Xs,e.__scopeMenu),o=Fu(Xs,e.__scopeMenu),d=UC(VC,e.__scopeMenu),c=H.useRef(null),a=pn(n,c);return r.jsx(du.Provider,{scope:e.__scopeMenu,children:r.jsx(ra,{present:s||i.open,children:r.jsx(du.Slot,{scope:e.__scopeMenu,children:r.jsx(wx,{id:d.contentId,"aria-labelledby":d.triggerId,...l,ref:a,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{o.isUsingKeyboardRef.current&&c.current?.focus(),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:Yt(e.onFocusOutside,u=>{u.target!==d.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Yt(e.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:Yt(e.onKeyDown,u=>{const h=u.currentTarget.contains(u.target),f=zK[o.dir].includes(u.key);h&&f&&(i.onOpenChange(!1),d.trigger?.focus(),u.preventDefault())})})})})})});KC.displayName=VC;function WC(e){return e?"open":"closed"}function Jh(e){return e==="indeterminate"}function Nx(e){return Jh(e)?"indeterminate":e?"checked":"unchecked"}function aW(e){const n=document.activeElement;for(const t of e)if(t===n||(t.focus(),document.activeElement!==n))return}function iW(e,n){return e.map((t,s)=>e[(n+s)%e.length])}function oW(e,n,t){const l=n.length>1&&Array.from(n).every(a=>a===n[0])?n[0]:n,i=t?e.indexOf(t):-1;let o=iW(e,Math.max(i,0));l.length===1&&(o=o.filter(a=>a!==t));const c=o.find(a=>a.toLowerCase().startsWith(l.toLowerCase()));return c!==t?c:void 0}function lW(e,n){const{x:t,y:s}=e;let l=!1;for(let i=0,o=n.length-1;i<n.length;o=i++){const d=n[i],c=n[o],a=d.x,u=d.y,h=c.x,f=c.y;u>s!=f>s&&t<(h-a)*(s-u)/(f-u)+a&&(l=!l)}return l}function cW(e,n){if(!n)return!1;const t={x:e.clientX,y:e.clientY};return lW(t,n)}function uu(e){return n=>n.pointerType==="mouse"?e(n):void 0}var dW=EC,uW=yx,fW=TC,hW=AC,mW=_x,pW=MC,gW=cp,bW=DC,yW=IC,xW=LC,vW=BC,wW=qC,_W=$C,jW=HC,NW=KC,dp="DropdownMenu",[CW,IZ]=Fa(dp,[SC]),ts=SC(),[SW,QC]=CW(dp),GC=e=>{const{__scopeDropdownMenu:n,children:t,dir:s,open:l,defaultOpen:i,onOpenChange:o,modal:d=!0}=e,c=ts(n),a=H.useRef(null),[u,h]=lo({prop:l,defaultProp:i??!1,onChange:o,caller:dp});return r.jsx(SW,{scope:n,triggerId:Vn(),triggerRef:a,contentId:Vn(),open:u,onOpenChange:h,onOpenToggle:H.useCallback(()=>h(f=>!f),[h]),modal:d,children:r.jsx(dW,{...c,open:u,onOpenChange:h,dir:s,modal:d,children:t})})};GC.displayName=dp;var XC="DropdownMenuTrigger",YC=H.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,disabled:s=!1,...l}=e,i=QC(XC,t),o=ts(t);return r.jsx(uW,{asChild:!0,...o,children:r.jsx(gr.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...l,ref:hi(n,i.triggerRef),onPointerDown:Yt(e.onPointerDown,d=>{!s&&d.button===0&&d.ctrlKey===!1&&(i.onOpenToggle(),i.open||d.preventDefault())}),onKeyDown:Yt(e.onKeyDown,d=>{s||(["Enter"," "].includes(d.key)&&i.onOpenToggle(),d.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(d.key)&&d.preventDefault())})})})});YC.displayName=XC;var kW="DropdownMenuPortal",ZC=e=>{const{__scopeDropdownMenu:n,...t}=e,s=ts(n);return r.jsx(fW,{...s,...t})};ZC.displayName=kW;var JC="DropdownMenuContent",eS=H.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...s}=e,l=QC(JC,t),i=ts(t),o=H.useRef(!1);return r.jsx(hW,{id:l.contentId,"aria-labelledby":l.triggerId,...i,...s,ref:n,onCloseAutoFocus:Yt(e.onCloseAutoFocus,d=>{o.current||l.triggerRef.current?.focus(),o.current=!1,d.preventDefault()}),onInteractOutside:Yt(e.onInteractOutside,d=>{const c=d.detail.originalEvent,a=c.button===0&&c.ctrlKey===!0,u=c.button===2||a;(!l.modal||u)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});eS.displayName=JC;var EW="DropdownMenuGroup",RW=H.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...s}=e,l=ts(t);return r.jsx(mW,{...l,...s,ref:n})});RW.displayName=EW;var TW="DropdownMenuLabel",tS=H.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...s}=e,l=ts(t);return r.jsx(pW,{...l,...s,ref:n})});tS.displayName=TW;var AW="DropdownMenuItem",rS=H.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...s}=e,l=ts(t);return r.jsx(gW,{...l,...s,ref:n})});rS.displayName=AW;var MW="DropdownMenuCheckboxItem",nS=H.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...s}=e,l=ts(t);return r.jsx(bW,{...l,...s,ref:n})});nS.displayName=MW;var OW="DropdownMenuRadioGroup",DW=H.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...s}=e,l=ts(t);return r.jsx(yW,{...l,...s,ref:n})});DW.displayName=OW;var PW="DropdownMenuRadioItem",sS=H.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...s}=e,l=ts(t);return r.jsx(xW,{...l,...s,ref:n})});sS.displayName=PW;var IW="DropdownMenuItemIndicator",aS=H.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...s}=e,l=ts(t);return r.jsx(vW,{...l,...s,ref:n})});aS.displayName=IW;var FW="DropdownMenuSeparator",iS=H.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...s}=e,l=ts(t);return r.jsx(wW,{...l,...s,ref:n})});iS.displayName=FW;var LW="DropdownMenuArrow",zW=H.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...s}=e,l=ts(t);return r.jsx(_W,{...l,...s,ref:n})});zW.displayName=LW;var BW="DropdownMenuSubTrigger",oS=H.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...s}=e,l=ts(t);return r.jsx(jW,{...l,...s,ref:n})});oS.displayName=BW;var qW="DropdownMenuSubContent",lS=H.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...s}=e,l=ts(t);return r.jsx(NW,{...l,...s,ref:n,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});lS.displayName=qW;var $W=GC,UW=YC,HW=ZC,cS=eS,dS=tS,uS=rS,fS=nS,hS=sS,mS=aS,pS=iS,gS=oS,bS=lS;const Ko=$W,Wo=UW,VW=H.forwardRef(({className:e,inset:n,children:t,...s},l)=>r.jsxs(gS,{ref:l,className:Lt("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",n&&"pl-8",e),...s,children:[t,r.jsx(Gs,{className:"ml-auto"})]}));VW.displayName=gS.displayName;const KW=H.forwardRef(({className:e,...n},t)=>r.jsx(bS,{ref:t,className:Lt("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...n}));KW.displayName=bS.displayName;const eo=H.forwardRef(({className:e,sideOffset:n=4,...t},s)=>r.jsx(HW,{children:r.jsx(cS,{ref:s,sideOffset:n,className:Lt("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border border-border/50 bg-popover p-1 text-popover-foreground shadow-lg","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),style:{direction:"rtl"},...t})}));eo.displayName=cS.displayName;const Tr=H.forwardRef(({className:e,inset:n,...t},s)=>r.jsx(uS,{ref:s,className:Lt("relative flex cursor-pointer select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0 justify-end text-right",n&&"pr-8",e),...t}));Tr.displayName=uS.displayName;const WW=H.forwardRef(({className:e,children:n,checked:t,...s},l)=>r.jsxs(fS,{ref:l,className:Lt("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:t,...s,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(mS,{children:r.jsx(ha,{className:"h-4 w-4"})})}),n]}));WW.displayName=fS.displayName;const QW=H.forwardRef(({className:e,children:n,...t},s)=>r.jsxs(hS,{ref:s,className:Lt("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(mS,{children:r.jsx(bO,{className:"h-2 w-2 fill-current"})})}),n]}));QW.displayName=hS.displayName;const GW=H.forwardRef(({className:e,inset:n,...t},s)=>r.jsx(dS,{ref:s,className:Lt("px-2 py-1.5 text-sm font-semibold",n&&"pl-8",e),...t}));GW.displayName=dS.displayName;const ec=H.forwardRef(({className:e,...n},t)=>r.jsx(pS,{ref:t,className:Lt("-mx-1 my-1 h-px bg-border/30",e),...n}));ec.displayName=pS.displayName;const XW=({clientId:e})=>{const{data:n,isLoading:t}=yc(e);if(t)return r.jsx("span",{className:"text-black text-sm",children:"Loading..."});const s=n?.balance||0;return r.jsxs("span",{className:"flex items-center text-black font-bold",children:[r.jsx(zr,{size:16,className:"me-1"}),s.toLocaleString("ar-SA",{style:"currency",currency:"SAR"})]})},yS=({client:e,mode:n,onAddTask:t,onAddInvoice:s,onAddCredit:l,onExportStatement:i,onExportTasks:o,onExportCredits:d,isExporting:c})=>{const{t:a}=qt();return r.jsx("div",{className:"rounded-lg border border-border bg-card shadow-sm mb-2",children:r.jsx("div",{className:"py-2 px-3",children:r.jsxs("div",{className:"flex justify-between items-center relative",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(Ne,{size:"sm",onClick:t,className:"hover:scale-105 transition-transform",children:[r.jsx(hn,{size:16,className:"me-1"})," ",a("clientProfile.addTask")]}),r.jsxs(Ko,{children:[r.jsx(Wo,{asChild:!0,children:r.jsxs("button",{className:"px-3 py-1.5 text-sm border border-primary text-primary rounded-md hover:bg-primary/10 transition-colors",children:[n==="general"&&a("clientProfile.viewModeGeneral"),n==="tasks"&&a("clientProfile.viewModeTasks"),n==="receivables"&&a("clientProfile.viewModeReceivables"),r.jsx("span",{className:"ms-1",children:""})]})}),r.jsxs(eo,{align:"start",className:"min-w-[180px]",children:[r.jsx(Tr,{asChild:!0,className:n==="general"?"bg-accent":"",children:r.jsx(xn,{to:`/clients/${e.id}?mode=general`,children:a("clientProfile.viewModeGeneral")})}),r.jsx(Tr,{asChild:!0,className:n==="tasks"?"bg-accent":"",children:r.jsx(xn,{to:`/clients/${e.id}?mode=tasks`,children:a("clientProfile.viewModeTasks")})}),r.jsx(Tr,{asChild:!0,className:n==="receivables"?"bg-accent":"",children:r.jsx(xn,{to:`/clients/${e.id}?mode=receivables`,children:a("clientProfile.viewModeReceivables")})})]})]}),r.jsxs(Ko,{children:[r.jsx(Wo,{asChild:!0,children:r.jsxs("button",{className:"px-3 py-1.5 text-sm border border-green-600 text-green-600 rounded-md hover:bg-green-50 transition-colors",children:[r.jsx(hn,{size:16,className:"me-1 inline"})," ",r.jsx("span",{className:"ms-1",children:""})]})}),r.jsxs(eo,{align:"start",className:"min-w-[180px]",children:[r.jsxs(Tr,{onClick:s,className:"text-end",children:[a("clientProfile.addInvoice"),r.jsx(hn,{size:14,className:"me-2"})]}),r.jsxs(Tr,{onClick:l,className:"text-end",children:[" ",r.jsx(hn,{size:14,className:"me-2"})]})]})]}),(n==="receivables"||n==="tasks")&&r.jsxs(Ko,{children:[r.jsx(Wo,{asChild:!0,children:r.jsxs("button",{className:"px-2 py-1 text-xs border border-gray-400 text-gray-600 rounded-md hover:bg-gray-50 transition-colors disabled:opacity-50",disabled:c,children:[r.jsx(SO,{size:14,className:"me-1"}),c?"...":"",r.jsx("span",{className:"ms-1",children:""})]})}),r.jsxs(eo,{align:"start",className:"min-w-[120px]",children:[n==="receivables"&&r.jsxs(r.Fragment,{children:[r.jsxs(Tr,{onClick:i,className:"text-end",children:[r.jsx("span",{className:"text-success me-2",children:""}),"   (Excel)"]}),r.jsxs(Tr,{onClick:d,className:"text-end",children:[r.jsx("span",{className:"text-info me-2",children:""}),"   (Excel)"]})]}),n==="tasks"&&r.jsxs(Tr,{onClick:o,className:"text-end",children:[r.jsx("span",{className:"text-primary me-2",children:""}),"   (Excel)"]})]})]})]}),r.jsxs("div",{className:"absolute left-1/2 -translate-x-1/2 flex items-center",children:[r.jsx("span",{className:"font-bold text-black me-3 text-base",children:e.name}),r.jsx("span",{className:"text-black me-2 text-sm",children:e.phone}),r.jsx("a",{href:`https://wa.me/966${e.phone.substring(1)}`,target:"_blank",rel:"noopener noreferrer",className:"text-green-600 hover:scale-110 transition-transform",children:r.jsx(el,{size:18})})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"text-end text-sm text-black",children:" "}),r.jsx(XW,{clientId:e.id})]})]})})})},Cx=e=>Number(e).toLocaleString("ar-SA",{style:"currency",currency:"SAR"}),xS=De.memo(({rowData:e})=>r.jsx("div",{style:{color:"#000000"},children:Zr(e.received_at)}));xS.displayName="DateCell";const vS=De.memo(({rowData:e})=>r.jsx("div",{style:{color:"#000000"},children:e.description}));vS.displayName="DescriptionCell";const wS=De.memo(({rowData:e})=>r.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[r.jsx(zr,{size:16,className:"me-1 text-green-600"}),r.jsx("span",{style:{color:"#16a34a",fontWeight:700},children:Cx(Number(e.amount))})]}));wS.displayName="AmountCell";const _S=De.memo(({rowData:e})=>r.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[r.jsx(zr,{size:16,className:"me-1 text-blue-500"}),r.jsx("span",{style:{color:"#3b82f6"},children:Cx(Number(e.allocated_amount))})]}));_S.displayName="AllocatedCell";const jS=De.memo(({rowData:e})=>r.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[r.jsx(zr,{size:16,className:"me-1",style:{color:"var(--color-primary)"}}),r.jsx("span",{style:{color:"var(--color-primary)",fontWeight:700},children:Cx(Number(e.remaining_amount))})]}));jS.displayName="RemainingCell";const NS=De.memo(({rowData:e,columnData:n})=>{const{onEdit:t,onDelete:s}=n||{},{t:l}=qt();return n?r.jsxs("div",{style:{display:"flex",gap:"4px"},children:[r.jsx("button",{className:"p-1.5 border border-red-600 text-red-600 rounded-md hover:bg-red-50 transition-colors",onClick:i=>{i.stopPropagation(),s?.(e)},title:l("common.delete"),children:r.jsx(Is,{size:16})}),r.jsx("button",{className:"p-1.5 border border-primary text-primary rounded-md hover:bg-primary/10 transition-colors",onClick:i=>{i.stopPropagation(),t?.(e)},title:l("common.edit"),children:r.jsx(ui,{size:16})})]}):null});NS.displayName="ActionsCell";const CS=({credits:e,isLoading:n,clientId:t})=>{const{t:s}=qt(),l=et(a=>a.openModal),i=a=>{l("creditEdit",{credit:a,clientId:t})},o=a=>{l("creditDelete",{credit:a,clientId:t})},d=H.useMemo(()=>[{id:"date",key:"received_at",title:s("common.date"),type:"custom",component:xS,grow:1},{id:"description",key:"description",title:s("common.description"),type:"custom",component:vS,grow:2},{id:"amount",key:"amount",title:s("common.amount"),type:"custom",component:wS,grow:1},{id:"allocated",key:"allocated_amount",title:s("clients.allocatedAmount"),type:"custom",component:_S,grow:1},{id:"remaining",key:"remaining_amount",title:s("clients.remainingAmount"),type:"custom",component:jS,grow:1},{id:"actions",key:"id",title:s("common.actions"),type:"custom",component:NS,width:100,grow:0}],[s]),c=H.useMemo(()=>d.map(a=>a.id==="actions"?{...a,columnData:{onEdit:i,onDelete:o}}:a),[d]);return!e||e.length===0?r.jsx("div",{className:"text-center py-4 text-black",children:s("clients.noCreditsFound")}):r.jsx(co,{data:e,columns:c,isLoading:n,emptyMessage:s("clients.noCreditsFound"),showId:!1})},YW=()=>{const{t:e}=qt(),{id:n}=xy(),[t]=vu(),s=et(O=>O.openModal),l=Number(n),i=t.get("mode")||"general",o=t.get("filter")||"all",{hasViewAllReceivablesPermission:d,hasViewAmountsPermission:c}=_c();H.useEffect(()=>{qn("clientProfile")},[]);const{data:a,isLoading:u}=Pm(l),{data:h,isLoading:f}=Im({client_id:l}),{data:m,isLoading:b}=yc(l),{data:y,isLoading:g}=zm(l,d),w=u||f||b||d&&g,{success:x,error:_}=ir(),j=bc(),R=Et({mutationFn:async O=>{await Ji.exportClientStatement(O,{includeSubTables:!0})},onSuccess:()=>{x(e("export.statementSuccess"))},onError:O=>{console.error("Export failed:",O),_(e("export.statementError"))}}),M=Et({mutationFn:async O=>{await Ji.exportClientTasks(O)},onSuccess:()=>{x(e("export.tasksSuccess"))},onError:O=>{console.error("Export failed:",O),_(e("export.tasksError"))}}),I=Et({mutationFn:async O=>{await Ji.exportClientCredits(O)},onSuccess:()=>{x(e("export.creditsSuccess"))},onError:O=>{console.error("Export failed:",O),_(e("export.creditsError"))}}),F=Nt(),B=()=>{a&&s("taskForm",{client:a})},U=()=>{a&&s("invoiceForm",{client_id:l,client:a})},Q=()=>{a&&s("recordCreditModal",{client:a})},K=O=>s("taskForm",{taskToEdit:O}),T=O=>{j.mutate({id:O.id,decisions:{task_action:"cancel"}},{onSuccess:L=>{if("success"in L&&L.success===!1&&L.code==="task_cancellation_conflict"){const z=L.data;s("taskCancellation",{taskId:O.id,analysisData:{task_id:z.task_id,prepaid_receivable:z.prepaid_receivable,main_receivable:z.main_receivable,total_funds_involved:z.total_funds_involved},onResolved:()=>{x("    ","       "),F.invalidateQueries({queryKey:["dashboard","clientsWithActiveTasks"]})}});return}x(" ","   "),F.invalidateQueries({queryKey:["dashboard","clientsWithActiveTasks"]})},onError:L=>{_("",L.message||"    ")}})},P=O=>s("requirements",{task:O}),A=O=>s("taskCompletion",{task:O}),N=()=>{if(!a||!y?.statementItems)return;const O=y.statementItems,L=O.reduce((ee,W)=>ee+W.debit,0),z=O.reduce((ee,W)=>ee+W.credit,0),G=O.length>0?O[O.length-1].balance:0,Z={client:a,clientName:a.name,clientPhone:a.phone||"",statementItems:O.map(ee=>({id:Number(ee.id),description:ee.description,debit:ee.debit,credit:ee.credit,date:ee.date,type:ee.type,transaction_type:ee.transaction_type,reference_id:ee.reference_id,details:ee.details})),totals:{totalDebit:L,totalCredit:z,balance:G},period:{from:new Date(Date.now()-365*24*60*60*1e3).toISOString().split("T")[0],to:new Date().toISOString().split("T")[0]}};R.mutate(Z)},k=()=>{if(!a||!h?.tasks)return;const O=h.tasks.map(q=>({...q,client_name:a.name,client_phone:a.phone||"",service_name:q.task_name||e(`type.${q.type}`),task_type:e(`type.${q.type}`),status_text:e(`status.${q.status}`),amount_text:q.amount.toLocaleString(),prepaid_amount_text:q.prepaid_amount.toLocaleString(),formatted_start_date:new Date(q.start_date).toLocaleDateString("ar-SA"),formatted_end_date:q.end_date?new Date(q.end_date).toLocaleDateString("ar-SA"):"",requirements_text:q.requirements.map(Y=>Y.requirement_text).join(" "),notes_text:q.notes||"",tags_text:q.tags.map(Y=>Y.name).join(" "),duration_days:q.end_date?Math.ceil((new Date(q.end_date).getTime()-new Date(q.start_date).getTime())/(1e3*60*60*24)):void 0,is_completed:q.status==="Completed",is_active:q.status==="New",is_cancelled:q.status==="Cancelled",has_receivable:!!q.receivable,has_prepaid:q.prepaid_amount>0,has_requirements:q.requirements.length>0,has_tags:q.tags.length>0,has_notes:!!q.notes,amount_paid:q.receivable?q.amount-q.receivable.amount:q.amount,amount_remaining:q.receivable?.amount||0,is_overdue:q.receivable?new Date(q.receivable.due_date||"")<new Date&&q.status!=="Completed":!1})),L=O.filter(q=>q.is_completed).length,z=O.filter(q=>!q.is_completed&&!q.is_cancelled).length,G=O.filter(q=>q.is_active).length,Z=O.filter(q=>q.is_cancelled).length,ee=O.reduce((q,Y)=>q+Y.amount,0),W=O.reduce((q,Y)=>q+Y.amount_paid,0),J=O.reduce((q,Y)=>q+Y.amount_remaining,0),$={client:a,tasks:O,summary:{total_tasks:O.length,completed_tasks:L,in_progress_tasks:z,new_tasks:G,cancelled_tasks:Z,total_amount:ee,total_paid:W,total_remaining:J,average_completion_days:0}};M.mutate($)},S=()=>{if(!a||!m?.credits)return;const O=m.credits.map(ee=>({id:ee.id,client_id:ee.client_id,credit_date:ee.received_at,amount_granted:ee.amount,amount_used:ee.allocated_amount,amount_available:ee.remaining_amount,due_date:ee.received_at,status:ee.remaining_amount>0?"active":"used",credit_type:"Manual Credit",notes:ee.description})),L=O.reduce((ee,W)=>ee+W.amount_granted,0),z=O.reduce((ee,W)=>ee+W.amount_used,0),G=O.reduce((ee,W)=>ee+W.amount_available,0),Z={client:a,credits:O,summary:{total_granted:L,total_used:z,total_available:G,active_credits:O.filter(ee=>ee.status==="active").length,expired_credits:0,utilization_rate:L>0?z/L*100:0}};I.mutate(Z)},E=O=>s("assignTask",{task:O});return w?r.jsx("div",{children:"Loading..."}):a?r.jsxs("div",{children:[r.jsx(yS,{client:a,mode:i,onAddTask:B,onAddInvoice:U,onAddCredit:Q,onExportStatement:N,onExportTasks:k,onExportCredits:S,isExporting:R.isPending||M.isPending||I.isPending}),(i==="general"||i==="tasks")&&r.jsxs("div",{className:"rounded-lg border border-border bg-card shadow-sm mb-3",children:[r.jsxs("div",{className:"flex justify-between items-center px-4 py-3 border-b border-border",children:[r.jsx("h5",{className:"text-primary font-bold text-lg mb-0",children:e("clientProfile.tasksSectionTitle")}),i==="tasks"&&h?.tasks&&h.tasks.length>0&&r.jsxs("button",{className:"px-3 py-1.5 text-sm border border-primary text-primary rounded-md hover:bg-primary/10 transition-colors disabled:opacity-50",onClick:k,disabled:M.isPending,title:e("export.exportTasks"," "),children:[r.jsx("i",{className:"fas fa-download me-1"}),M.isPending?e("common.exporting"," ..."):e("export.exportTasks"," ")]})]}),r.jsx("div",{className:"p-0",children:r.jsx(gx,{tasks:h?.tasks||[],isLoading:f,onEdit:K,onDelete:T,onShowRequirements:P,onComplete:A,onAssign:E})})]}),(i==="general"||i==="receivables")&&(d?r.jsxs("div",{className:"rounded-lg border border-border bg-card shadow-sm mb-3",children:[r.jsx("div",{className:"px-4 py-3 border-b border-border",children:r.jsx("h5",{className:"text-primary font-bold text-lg mb-0",children:" "})}),r.jsx("div",{className:"p-0",children:r.jsx(c$,{client:a,filter:o==="all"?"all":o==="unpaid"?"invoices":"all",hideAmounts:!c})})]}):r.jsxs("div",{className:"rounded-lg bg-yellow-50 border-2 border-yellow-400 p-4 text-center",children:[r.jsx("h5",{className:"text-yellow-800 font-bold text-lg mb-2",children:"Access Denied"}),r.jsx("p",{className:"text-black mb-0",children:"You don't have permission to view receivables for this client."})]})),(i==="general"||i==="receivables")&&r.jsxs("div",{className:"rounded-lg border border-border bg-card shadow-sm mb-3",children:[r.jsx("div",{className:"px-4 py-3 border-b border-border",children:r.jsx("h5",{className:"text-primary font-bold text-lg mb-0",children:e("clients.creditsHistory")})}),r.jsx("div",{className:"p-0",children:r.jsx(CS,{credits:m?.credits||[],isLoading:b,clientId:l})})]})]}):r.jsx("div",{children:"Client not found."})},ZW=async()=>{const{data:e}=await Xe.get("/clients/stats");if(!e.success)throw new Error(e.message||"Failed to fetch dashboard stats.");return e.data},JW=async(e="admin")=>{const{data:n}=await Xe.get("/dashboard/clients-with-active-tasks",{params:{taskType:e}});if(!n.success)throw new Error(n.message||"Failed to fetch dashboard client tasks.");return n.data},eQ=()=>or({queryKey:["dashboard","stats"],queryFn:ZW,staleTime:30*1e3,refetchInterval:20*1e3}),tQ=(e="admin")=>{const n=Nt(),t=H.useRef(void 0),s=or({queryKey:["dashboard","clientsWithActiveTasks",e],queryFn:()=>JW(e),staleTime:30*1e3,refetchInterval:20*1e3});return H.useEffect(()=>{s.data&&JSON.stringify(s.data)!==JSON.stringify(t.current)&&(n.invalidateQueries({queryKey:["receivables"]}),t.current=s.data)},[s.data,n]),s};function rQ(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return H.useMemo(()=>s=>{n.forEach(l=>l(s))},n)}const up=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Sc(e){const n=Object.prototype.toString.call(e);return n==="[object Window]"||n==="[object global]"}function Sx(e){return"nodeType"in e}function rs(e){var n,t;return e?Sc(e)?e:Sx(e)&&(n=(t=e.ownerDocument)==null?void 0:t.defaultView)!=null?n:window:window}function kx(e){const{Document:n}=rs(e);return e instanceof n}function Lu(e){return Sc(e)?!1:e instanceof rs(e).HTMLElement}function SS(e){return e instanceof rs(e).SVGElement}function kc(e){return e?Sc(e)?e.document:Sx(e)?kx(e)?e:Lu(e)||SS(e)?e.ownerDocument:document:document:document}const ba=up?H.useLayoutEffect:H.useEffect;function fp(e){const n=H.useRef(e);return ba(()=>{n.current=e}),H.useCallback(function(){for(var t=arguments.length,s=new Array(t),l=0;l<t;l++)s[l]=arguments[l];return n.current==null?void 0:n.current(...s)},[])}function nQ(){const e=H.useRef(null),n=H.useCallback((s,l)=>{e.current=setInterval(s,l)},[]),t=H.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[n,t]}function fu(e,n){n===void 0&&(n=[e]);const t=H.useRef(e);return ba(()=>{t.current!==e&&(t.current=e)},n),t}function zu(e,n){const t=H.useRef();return H.useMemo(()=>{const s=e(t.current);return t.current=s,s},[...n])}function em(e){const n=fp(e),t=H.useRef(null),s=H.useCallback(l=>{l!==t.current&&n?.(l,t.current),t.current=l},[]);return[t,s]}function tm(e){const n=H.useRef();return H.useEffect(()=>{n.current=e},[e]),n.current}let mb={};function Bu(e,n){return H.useMemo(()=>{if(n)return n;const t=mb[e]==null?0:mb[e]+1;return mb[e]=t,e+"-"+t},[e,n])}function kS(e){return function(n){for(var t=arguments.length,s=new Array(t>1?t-1:0),l=1;l<t;l++)s[l-1]=arguments[l];return s.reduce((i,o)=>{const d=Object.entries(o);for(const[c,a]of d){const u=i[c];u!=null&&(i[c]=u+e*a)}return i},{...n})}}const tc=kS(1),hu=kS(-1);function sQ(e){return"clientX"in e&&"clientY"in e}function hp(e){if(!e)return!1;const{KeyboardEvent:n}=rs(e.target);return n&&e instanceof n}function aQ(e){if(!e)return!1;const{TouchEvent:n}=rs(e.target);return n&&e instanceof n}function rm(e){if(aQ(e)){if(e.touches&&e.touches.length){const{clientX:n,clientY:t}=e.touches[0];return{x:n,y:t}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:n,clientY:t}=e.changedTouches[0];return{x:n,y:t}}}return sQ(e)?{x:e.clientX,y:e.clientY}:null}const yi=Object.freeze({Translate:{toString(e){if(!e)return;const{x:n,y:t}=e;return"translate3d("+(n?Math.round(n):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:n,scaleY:t}=e;return"scaleX("+n+") scaleY("+t+")"}},Transform:{toString(e){if(e)return[yi.Translate.toString(e),yi.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:n,duration:t,easing:s}=e;return n+" "+t+"ms "+s}}}),o4="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function iQ(e){return e.matches(o4)?e:e.querySelector(o4)}const oQ={display:"none"};function lQ(e){let{id:n,value:t}=e;return De.createElement("div",{id:n,style:oQ},t)}function cQ(e){let{id:n,announcement:t,ariaLiveType:s="assertive"}=e;const l={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return De.createElement("div",{id:n,style:l,role:"status","aria-live":s,"aria-atomic":!0},t)}function dQ(){const[e,n]=H.useState("");return{announce:H.useCallback(s=>{s!=null&&n(s)},[]),announcement:e}}const ES=H.createContext(null);function uQ(e){const n=H.useContext(ES);H.useEffect(()=>{if(!n)throw new Error("useDndMonitor must be used within a children of <DndContext>");return n(e)},[e,n])}function fQ(){const[e]=H.useState(()=>new Set),n=H.useCallback(s=>(e.add(s),()=>e.delete(s)),[e]);return[H.useCallback(s=>{let{type:l,event:i}=s;e.forEach(o=>{var d;return(d=o[l])==null?void 0:d.call(o,i)})},[e]),n]}const hQ={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},mQ={onDragStart(e){let{active:n}=e;return"Picked up draggable item "+n.id+"."},onDragOver(e){let{active:n,over:t}=e;return t?"Draggable item "+n.id+" was moved over droppable area "+t.id+".":"Draggable item "+n.id+" is no longer over a droppable area."},onDragEnd(e){let{active:n,over:t}=e;return t?"Draggable item "+n.id+" was dropped over droppable area "+t.id:"Draggable item "+n.id+" was dropped."},onDragCancel(e){let{active:n}=e;return"Dragging was cancelled. Draggable item "+n.id+" was dropped."}};function pQ(e){let{announcements:n=mQ,container:t,hiddenTextDescribedById:s,screenReaderInstructions:l=hQ}=e;const{announce:i,announcement:o}=dQ(),d=Bu("DndLiveRegion"),[c,a]=H.useState(!1);if(H.useEffect(()=>{a(!0)},[]),uQ(H.useMemo(()=>({onDragStart(h){let{active:f}=h;i(n.onDragStart({active:f}))},onDragMove(h){let{active:f,over:m}=h;n.onDragMove&&i(n.onDragMove({active:f,over:m}))},onDragOver(h){let{active:f,over:m}=h;i(n.onDragOver({active:f,over:m}))},onDragEnd(h){let{active:f,over:m}=h;i(n.onDragEnd({active:f,over:m}))},onDragCancel(h){let{active:f,over:m}=h;i(n.onDragCancel({active:f,over:m}))}}),[i,n])),!c)return null;const u=De.createElement(De.Fragment,null,De.createElement(lQ,{id:s,value:l.draggable}),De.createElement(cQ,{id:d,announcement:o}));return t?cs.createPortal(u,t):u}var _n;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(_n||(_n={}));function nm(){}function cc(e,n){return H.useMemo(()=>({sensor:e,options:n??{}}),[e,n])}function Ex(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return H.useMemo(()=>[...n].filter(s=>s!=null),[...n])}const ya=Object.freeze({x:0,y:0});function RS(e,n){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function gQ(e,n){const t=rm(e);if(!t)return"0 0";const s={x:(t.x-n.left)/n.width*100,y:(t.y-n.top)/n.height*100};return s.x+"% "+s.y+"%"}function TS(e,n){let{data:{value:t}}=e,{data:{value:s}}=n;return t-s}function bQ(e,n){let{data:{value:t}}=e,{data:{value:s}}=n;return s-t}function l4(e){let{left:n,top:t,height:s,width:l}=e;return[{x:n,y:t},{x:n+l,y:t},{x:n,y:t+s},{x:n+l,y:t+s}]}function AS(e,n){if(!e||e.length===0)return null;const[t]=e;return t[n]}function c4(e,n,t){return n===void 0&&(n=e.left),t===void 0&&(t=e.top),{x:n+e.width*.5,y:t+e.height*.5}}const Rx=e=>{let{collisionRect:n,droppableRects:t,droppableContainers:s}=e;const l=c4(n,n.left,n.top),i=[];for(const o of s){const{id:d}=o,c=t.get(d);if(c){const a=RS(c4(c),l);i.push({id:d,data:{droppableContainer:o,value:a}})}}return i.sort(TS)},yQ=e=>{let{collisionRect:n,droppableRects:t,droppableContainers:s}=e;const l=l4(n),i=[];for(const o of s){const{id:d}=o,c=t.get(d);if(c){const a=l4(c),u=l.reduce((f,m,b)=>f+RS(a[b],m),0),h=Number((u/4).toFixed(4));i.push({id:d,data:{droppableContainer:o,value:h}})}}return i.sort(TS)};function xQ(e,n){const t=Math.max(n.top,e.top),s=Math.max(n.left,e.left),l=Math.min(n.left+n.width,e.left+e.width),i=Math.min(n.top+n.height,e.top+e.height),o=l-s,d=i-t;if(s<l&&t<i){const c=n.width*n.height,a=e.width*e.height,u=o*d,h=u/(c+a-u);return Number(h.toFixed(4))}return 0}const vQ=e=>{let{collisionRect:n,droppableRects:t,droppableContainers:s}=e;const l=[];for(const i of s){const{id:o}=i,d=t.get(o);if(d){const c=xQ(d,n);c>0&&l.push({id:o,data:{droppableContainer:i,value:c}})}}return l.sort(bQ)};function wQ(e,n,t){return{...e,scaleX:n&&t?n.width/t.width:1,scaleY:n&&t?n.height/t.height:1}}function MS(e,n){return e&&n?{x:e.left-n.left,y:e.top-n.top}:ya}function _Q(e){return function(t){for(var s=arguments.length,l=new Array(s>1?s-1:0),i=1;i<s;i++)l[i-1]=arguments[i];return l.reduce((o,d)=>({...o,top:o.top+e*d.y,bottom:o.bottom+e*d.y,left:o.left+e*d.x,right:o.right+e*d.x}),{...t})}}const jQ=_Q(1);function OS(e){if(e.startsWith("matrix3d(")){const n=e.slice(9,-1).split(/, /);return{x:+n[12],y:+n[13],scaleX:+n[0],scaleY:+n[5]}}else if(e.startsWith("matrix(")){const n=e.slice(7,-1).split(/, /);return{x:+n[4],y:+n[5],scaleX:+n[0],scaleY:+n[3]}}return null}function NQ(e,n,t){const s=OS(n);if(!s)return e;const{scaleX:l,scaleY:i,x:o,y:d}=s,c=e.left-o-(1-l)*parseFloat(t),a=e.top-d-(1-i)*parseFloat(t.slice(t.indexOf(" ")+1)),u=l?e.width/l:e.width,h=i?e.height/i:e.height;return{width:u,height:h,top:a,right:c+u,bottom:a+h,left:c}}const CQ={ignoreTransform:!1};function Ec(e,n){n===void 0&&(n=CQ);let t=e.getBoundingClientRect();if(n.ignoreTransform){const{transform:a,transformOrigin:u}=rs(e).getComputedStyle(e);a&&(t=NQ(t,a,u))}const{top:s,left:l,width:i,height:o,bottom:d,right:c}=t;return{top:s,left:l,width:i,height:o,bottom:d,right:c}}function d4(e){return Ec(e,{ignoreTransform:!0})}function SQ(e){const n=e.innerWidth,t=e.innerHeight;return{top:0,left:0,right:n,bottom:t,width:n,height:t}}function kQ(e,n){return n===void 0&&(n=rs(e).getComputedStyle(e)),n.position==="fixed"}function EQ(e,n){n===void 0&&(n=rs(e).getComputedStyle(e));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(l=>{const i=n[l];return typeof i=="string"?t.test(i):!1})}function mp(e,n){const t=[];function s(l){if(n!=null&&t.length>=n||!l)return t;if(kx(l)&&l.scrollingElement!=null&&!t.includes(l.scrollingElement))return t.push(l.scrollingElement),t;if(!Lu(l)||SS(l)||t.includes(l))return t;const i=rs(e).getComputedStyle(l);return l!==e&&EQ(l,i)&&t.push(l),kQ(l,i)?t:s(l.parentNode)}return e?s(e):t}function DS(e){const[n]=mp(e,1);return n??null}function pb(e){return!up||!e?null:Sc(e)?e:Sx(e)?kx(e)||e===kc(e).scrollingElement?window:Lu(e)?e:null:null}function PS(e){return Sc(e)?e.scrollX:e.scrollLeft}function IS(e){return Sc(e)?e.scrollY:e.scrollTop}function iy(e){return{x:PS(e),y:IS(e)}}var An;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(An||(An={}));function FS(e){return!up||!e?!1:e===document.scrollingElement}function LS(e){const n={x:0,y:0},t=FS(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},s={x:e.scrollWidth-t.width,y:e.scrollHeight-t.height},l=e.scrollTop<=n.y,i=e.scrollLeft<=n.x,o=e.scrollTop>=s.y,d=e.scrollLeft>=s.x;return{isTop:l,isLeft:i,isBottom:o,isRight:d,maxScroll:s,minScroll:n}}const RQ={x:.2,y:.2};function TQ(e,n,t,s,l){let{top:i,left:o,right:d,bottom:c}=t;s===void 0&&(s=10),l===void 0&&(l=RQ);const{isTop:a,isBottom:u,isLeft:h,isRight:f}=LS(e),m={x:0,y:0},b={x:0,y:0},y={height:n.height*l.y,width:n.width*l.x};return!a&&i<=n.top+y.height?(m.y=An.Backward,b.y=s*Math.abs((n.top+y.height-i)/y.height)):!u&&c>=n.bottom-y.height&&(m.y=An.Forward,b.y=s*Math.abs((n.bottom-y.height-c)/y.height)),!f&&d>=n.right-y.width?(m.x=An.Forward,b.x=s*Math.abs((n.right-y.width-d)/y.width)):!h&&o<=n.left+y.width&&(m.x=An.Backward,b.x=s*Math.abs((n.left+y.width-o)/y.width)),{direction:m,speed:b}}function AQ(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:n,left:t,right:s,bottom:l}=e.getBoundingClientRect();return{top:n,left:t,right:s,bottom:l,width:e.clientWidth,height:e.clientHeight}}function zS(e){return e.reduce((n,t)=>tc(n,iy(t)),ya)}function MQ(e){return e.reduce((n,t)=>n+PS(t),0)}function OQ(e){return e.reduce((n,t)=>n+IS(t),0)}function BS(e,n){if(n===void 0&&(n=Ec),!e)return;const{top:t,left:s,bottom:l,right:i}=n(e);DS(e)&&(l<=0||i<=0||t>=window.innerHeight||s>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const DQ=[["x",["left","right"],MQ],["y",["top","bottom"],OQ]];class Tx{constructor(n,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=mp(t),l=zS(s);this.rect={...n},this.width=n.width,this.height=n.height;for(const[i,o,d]of DQ)for(const c of o)Object.defineProperty(this,c,{get:()=>{const a=d(s),u=l[i]-a;return this.rect[c]+u},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Zd{constructor(n){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(t=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...t)})},this.target=n}add(n,t,s){var l;(l=this.target)==null||l.addEventListener(n,t,s),this.listeners.push([n,t,s])}}function PQ(e){const{EventTarget:n}=rs(e);return e instanceof n?e:kc(e)}function gb(e,n){const t=Math.abs(e.x),s=Math.abs(e.y);return typeof n=="number"?Math.sqrt(t**2+s**2)>n:"x"in n&&"y"in n?t>n.x&&s>n.y:"x"in n?t>n.x:"y"in n?s>n.y:!1}var Ws;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Ws||(Ws={}));function u4(e){e.preventDefault()}function IQ(e){e.stopPropagation()}var Cr;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Cr||(Cr={}));const qS={start:[Cr.Space,Cr.Enter],cancel:[Cr.Esc],end:[Cr.Space,Cr.Enter,Cr.Tab]},FQ=(e,n)=>{let{currentCoordinates:t}=n;switch(e.code){case Cr.Right:return{...t,x:t.x+25};case Cr.Left:return{...t,x:t.x-25};case Cr.Down:return{...t,y:t.y+25};case Cr.Up:return{...t,y:t.y-25}}};class qu{constructor(n){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=n;const{event:{target:t}}=n;this.props=n,this.listeners=new Zd(kc(t)),this.windowListeners=new Zd(rs(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ws.Resize,this.handleCancel),this.windowListeners.add(Ws.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ws.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:n,onStart:t}=this.props,s=n.node.current;s&&BS(s),t(ya)}handleKeyDown(n){if(hp(n)){const{active:t,context:s,options:l}=this.props,{keyboardCodes:i=qS,coordinateGetter:o=FQ,scrollBehavior:d="smooth"}=l,{code:c}=n;if(i.end.includes(c)){this.handleEnd(n);return}if(i.cancel.includes(c)){this.handleCancel(n);return}const{collisionRect:a}=s.current,u=a?{x:a.left,y:a.top}:ya;this.referenceCoordinates||(this.referenceCoordinates=u);const h=o(n,{active:t,context:s.current,currentCoordinates:u});if(h){const f=hu(h,u),m={x:0,y:0},{scrollableAncestors:b}=s.current;for(const y of b){const g=n.code,{isTop:w,isRight:x,isLeft:_,isBottom:j,maxScroll:R,minScroll:M}=LS(y),I=AQ(y),F={x:Math.min(g===Cr.Right?I.right-I.width/2:I.right,Math.max(g===Cr.Right?I.left:I.left+I.width/2,h.x)),y:Math.min(g===Cr.Down?I.bottom-I.height/2:I.bottom,Math.max(g===Cr.Down?I.top:I.top+I.height/2,h.y))},B=g===Cr.Right&&!x||g===Cr.Left&&!_,U=g===Cr.Down&&!j||g===Cr.Up&&!w;if(B&&F.x!==h.x){const Q=y.scrollLeft+f.x,K=g===Cr.Right&&Q<=R.x||g===Cr.Left&&Q>=M.x;if(K&&!f.y){y.scrollTo({left:Q,behavior:d});return}K?m.x=y.scrollLeft-Q:m.x=g===Cr.Right?y.scrollLeft-R.x:y.scrollLeft-M.x,m.x&&y.scrollBy({left:-m.x,behavior:d});break}else if(U&&F.y!==h.y){const Q=y.scrollTop+f.y,K=g===Cr.Down&&Q<=R.y||g===Cr.Up&&Q>=M.y;if(K&&!f.x){y.scrollTo({top:Q,behavior:d});return}K?m.y=y.scrollTop-Q:m.y=g===Cr.Down?y.scrollTop-R.y:y.scrollTop-M.y,m.y&&y.scrollBy({top:-m.y,behavior:d});break}}this.handleMove(n,tc(hu(h,this.referenceCoordinates),m))}}}handleMove(n,t){const{onMove:s}=this.props;n.preventDefault(),s(t)}handleEnd(n){const{onEnd:t}=this.props;n.preventDefault(),this.detach(),t()}handleCancel(n){const{onCancel:t}=this.props;n.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}qu.activators=[{eventName:"onKeyDown",handler:(e,n,t)=>{let{keyboardCodes:s=qS,onActivation:l}=n,{active:i}=t;const{code:o}=e.nativeEvent;if(s.start.includes(o)){const d=i.activatorNode.current;return d&&e.target!==d?!1:(e.preventDefault(),l?.({event:e.nativeEvent}),!0)}return!1}}];function f4(e){return!!(e&&"distance"in e)}function h4(e){return!!(e&&"delay"in e)}class Ax{constructor(n,t,s){var l;s===void 0&&(s=PQ(n.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=n,this.events=t;const{event:i}=n,{target:o}=i;this.props=n,this.events=t,this.document=kc(o),this.documentListeners=new Zd(this.document),this.listeners=new Zd(s),this.windowListeners=new Zd(rs(o)),this.initialCoordinates=(l=rm(i))!=null?l:ya,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:n,props:{options:{activationConstraint:t,bypassActivationConstraint:s}}}=this;if(this.listeners.add(n.move.name,this.handleMove,{passive:!1}),this.listeners.add(n.end.name,this.handleEnd),n.cancel&&this.listeners.add(n.cancel.name,this.handleCancel),this.windowListeners.add(Ws.Resize,this.handleCancel),this.windowListeners.add(Ws.DragStart,u4),this.windowListeners.add(Ws.VisibilityChange,this.handleCancel),this.windowListeners.add(Ws.ContextMenu,u4),this.documentListeners.add(Ws.Keydown,this.handleKeydown),t){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(h4(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(f4(t)){this.handlePending(t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(n,t){const{active:s,onPending:l}=this.props;l(s,n,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:n}=this,{onStart:t}=this.props;n&&(this.activated=!0,this.documentListeners.add(Ws.Click,IQ,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ws.SelectionChange,this.removeTextSelection),t(n))}handleMove(n){var t;const{activated:s,initialCoordinates:l,props:i}=this,{onMove:o,options:{activationConstraint:d}}=i;if(!l)return;const c=(t=rm(n))!=null?t:ya,a=hu(l,c);if(!s&&d){if(f4(d)){if(d.tolerance!=null&&gb(a,d.tolerance))return this.handleCancel();if(gb(a,d.distance))return this.handleStart()}if(h4(d)&&gb(a,d.tolerance))return this.handleCancel();this.handlePending(d,a);return}n.cancelable&&n.preventDefault(),o(c)}handleEnd(){const{onAbort:n,onEnd:t}=this.props;this.detach(),this.activated||n(this.props.active),t()}handleCancel(){const{onAbort:n,onCancel:t}=this.props;this.detach(),this.activated||n(this.props.active),t()}handleKeydown(n){n.code===Cr.Esc&&this.handleCancel()}removeTextSelection(){var n;(n=this.document.getSelection())==null||n.removeAllRanges()}}const LQ={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class $u extends Ax{constructor(n){const{event:t}=n,s=kc(t.target);super(n,LQ,s)}}$u.activators=[{eventName:"onPointerDown",handler:(e,n)=>{let{nativeEvent:t}=e,{onActivation:s}=n;return!t.isPrimary||t.button!==0?!1:(s?.({event:t}),!0)}}];const zQ={move:{name:"mousemove"},end:{name:"mouseup"}};var oy;(function(e){e[e.RightClick=2]="RightClick"})(oy||(oy={}));class BQ extends Ax{constructor(n){super(n,zQ,kc(n.event.target))}}BQ.activators=[{eventName:"onMouseDown",handler:(e,n)=>{let{nativeEvent:t}=e,{onActivation:s}=n;return t.button===oy.RightClick?!1:(s?.({event:t}),!0)}}];const bb={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class qQ extends Ax{constructor(n){super(n,bb)}static setup(){return window.addEventListener(bb.move.name,n,{capture:!1,passive:!1}),function(){window.removeEventListener(bb.move.name,n)};function n(){}}}qQ.activators=[{eventName:"onTouchStart",handler:(e,n)=>{let{nativeEvent:t}=e,{onActivation:s}=n;const{touches:l}=t;return l.length>1?!1:(s?.({event:t}),!0)}}];var Jd;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Jd||(Jd={}));var sm;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(sm||(sm={}));function $Q(e){let{acceleration:n,activator:t=Jd.Pointer,canScroll:s,draggingRect:l,enabled:i,interval:o=5,order:d=sm.TreeOrder,pointerCoordinates:c,scrollableAncestors:a,scrollableAncestorRects:u,delta:h,threshold:f}=e;const m=HQ({delta:h,disabled:!i}),[b,y]=nQ(),g=H.useRef({x:0,y:0}),w=H.useRef({x:0,y:0}),x=H.useMemo(()=>{switch(t){case Jd.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Jd.DraggableRect:return l}},[t,l,c]),_=H.useRef(null),j=H.useCallback(()=>{const M=_.current;if(!M)return;const I=g.current.x*w.current.x,F=g.current.y*w.current.y;M.scrollBy(I,F)},[]),R=H.useMemo(()=>d===sm.TreeOrder?[...a].reverse():a,[d,a]);H.useEffect(()=>{if(!i||!a.length||!x){y();return}for(const M of R){if(s?.(M)===!1)continue;const I=a.indexOf(M),F=u[I];if(!F)continue;const{direction:B,speed:U}=TQ(M,F,x,n,f);for(const Q of["x","y"])m[Q][B[Q]]||(U[Q]=0,B[Q]=0);if(U.x>0||U.y>0){y(),_.current=M,b(j,o),g.current=U,w.current=B;return}}g.current={x:0,y:0},w.current={x:0,y:0},y()},[n,j,s,y,i,o,JSON.stringify(x),JSON.stringify(m),b,a,R,u,JSON.stringify(f)])}const UQ={x:{[An.Backward]:!1,[An.Forward]:!1},y:{[An.Backward]:!1,[An.Forward]:!1}};function HQ(e){let{delta:n,disabled:t}=e;const s=tm(n);return zu(l=>{if(t||!s||!l)return UQ;const i={x:Math.sign(n.x-s.x),y:Math.sign(n.y-s.y)};return{x:{[An.Backward]:l.x[An.Backward]||i.x===-1,[An.Forward]:l.x[An.Forward]||i.x===1},y:{[An.Backward]:l.y[An.Backward]||i.y===-1,[An.Forward]:l.y[An.Forward]||i.y===1}}},[t,n,s])}function VQ(e,n){const t=n!=null?e.get(n):void 0,s=t?t.node.current:null;return zu(l=>{var i;return n==null?null:(i=s??l)!=null?i:null},[s,n])}function KQ(e,n){return H.useMemo(()=>e.reduce((t,s)=>{const{sensor:l}=s,i=l.activators.map(o=>({eventName:o.eventName,handler:n(o.handler,s)}));return[...t,...i]},[]),[e,n])}var mu;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(mu||(mu={}));var ly;(function(e){e.Optimized="optimized"})(ly||(ly={}));const m4=new Map;function WQ(e,n){let{dragging:t,dependencies:s,config:l}=n;const[i,o]=H.useState(null),{frequency:d,measure:c,strategy:a}=l,u=H.useRef(e),h=g(),f=fu(h),m=H.useCallback(function(w){w===void 0&&(w=[]),!f.current&&o(x=>x===null?w:x.concat(w.filter(_=>!x.includes(_))))},[f]),b=H.useRef(null),y=zu(w=>{if(h&&!t)return m4;if(!w||w===m4||u.current!==e||i!=null){const x=new Map;for(let _ of e){if(!_)continue;if(i&&i.length>0&&!i.includes(_.id)&&_.rect.current){x.set(_.id,_.rect.current);continue}const j=_.node.current,R=j?new Tx(c(j),j):null;_.rect.current=R,R&&x.set(_.id,R)}return x}return w},[e,i,t,h,c]);return H.useEffect(()=>{u.current=e},[e]),H.useEffect(()=>{h||m()},[t,h]),H.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),H.useEffect(()=>{h||typeof d!="number"||b.current!==null||(b.current=setTimeout(()=>{m(),b.current=null},d))},[d,h,m,...s]),{droppableRects:y,measureDroppableContainers:m,measuringScheduled:i!=null};function g(){switch(a){case mu.Always:return!1;case mu.BeforeDragging:return t;default:return!t}}}function Mx(e,n){return zu(t=>e?t||(typeof n=="function"?n(e):e):null,[n,e])}function QQ(e,n){return Mx(e,n)}function GQ(e){let{callback:n,disabled:t}=e;const s=fp(n),l=H.useMemo(()=>{if(t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(s)},[s,t]);return H.useEffect(()=>()=>l?.disconnect(),[l]),l}function pp(e){let{callback:n,disabled:t}=e;const s=fp(n),l=H.useMemo(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(s)},[t]);return H.useEffect(()=>()=>l?.disconnect(),[l]),l}function XQ(e){return new Tx(Ec(e),e)}function p4(e,n,t){n===void 0&&(n=XQ);const[s,l]=H.useState(null);function i(){l(c=>{if(!e)return null;if(e.isConnected===!1){var a;return(a=c??t)!=null?a:null}const u=n(e);return JSON.stringify(c)===JSON.stringify(u)?c:u})}const o=GQ({callback(c){if(e)for(const a of c){const{type:u,target:h}=a;if(u==="childList"&&h instanceof HTMLElement&&h.contains(e)){i();break}}}}),d=pp({callback:i});return ba(()=>{i(),e?(d?.observe(e),o?.observe(document.body,{childList:!0,subtree:!0})):(d?.disconnect(),o?.disconnect())},[e]),s}function YQ(e){const n=Mx(e);return MS(e,n)}const g4=[];function ZQ(e){const n=H.useRef(e),t=zu(s=>e?s&&s!==g4&&e&&n.current&&e.parentNode===n.current.parentNode?s:mp(e):g4,[e]);return H.useEffect(()=>{n.current=e},[e]),t}function JQ(e){const[n,t]=H.useState(null),s=H.useRef(e),l=H.useCallback(i=>{const o=pb(i.target);o&&t(d=>d?(d.set(o,iy(o)),new Map(d)):null)},[]);return H.useEffect(()=>{const i=s.current;if(e!==i){o(i);const d=e.map(c=>{const a=pb(c);return a?(a.addEventListener("scroll",l,{passive:!0}),[a,iy(a)]):null}).filter(c=>c!=null);t(d.length?new Map(d):null),s.current=e}return()=>{o(e),o(i)};function o(d){d.forEach(c=>{const a=pb(c);a?.removeEventListener("scroll",l)})}},[l,e]),H.useMemo(()=>e.length?n?Array.from(n.values()).reduce((i,o)=>tc(i,o),ya):zS(e):ya,[e,n])}function b4(e,n){n===void 0&&(n=[]);const t=H.useRef(null);return H.useEffect(()=>{t.current=null},n),H.useEffect(()=>{const s=e!==ya;s&&!t.current&&(t.current=e),!s&&t.current&&(t.current=null)},[e]),t.current?hu(e,t.current):ya}function eG(e){H.useEffect(()=>{if(!up)return;const n=e.map(t=>{let{sensor:s}=t;return s.setup==null?void 0:s.setup()});return()=>{for(const t of n)t?.()}},e.map(n=>{let{sensor:t}=n;return t}))}function tG(e,n){return H.useMemo(()=>e.reduce((t,s)=>{let{eventName:l,handler:i}=s;return t[l]=o=>{i(o,n)},t},{}),[e,n])}function $S(e){return H.useMemo(()=>e?SQ(e):null,[e])}const y4=[];function rG(e,n){n===void 0&&(n=Ec);const[t]=e,s=$S(t?rs(t):null),[l,i]=H.useState(y4);function o(){i(()=>e.length?e.map(c=>FS(c)?s:new Tx(n(c),c)):y4)}const d=pp({callback:o});return ba(()=>{d?.disconnect(),o(),e.forEach(c=>d?.observe(c))},[e]),l}function US(e){if(!e)return null;if(e.children.length>1)return e;const n=e.children[0];return Lu(n)?n:e}function nG(e){let{measure:n}=e;const[t,s]=H.useState(null),l=H.useCallback(a=>{for(const{target:u}of a)if(Lu(u)){s(h=>{const f=n(u);return h?{...h,width:f.width,height:f.height}:f});break}},[n]),i=pp({callback:l}),o=H.useCallback(a=>{const u=US(a);i?.disconnect(),u&&i?.observe(u),s(u?n(u):null)},[n,i]),[d,c]=em(o);return H.useMemo(()=>({nodeRef:d,rect:t,setRef:c}),[t,d,c])}const sG=[{sensor:$u,options:{}},{sensor:qu,options:{}}],aG={current:{}},Sh={draggable:{measure:d4},droppable:{measure:d4,strategy:mu.WhileDragging,frequency:ly.Optimized},dragOverlay:{measure:Ec}};class eu extends Map{get(n){var t;return n!=null&&(t=super.get(n))!=null?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(n=>{let{disabled:t}=n;return!t})}getNodeFor(n){var t,s;return(t=(s=this.get(n))==null?void 0:s.node.current)!=null?t:void 0}}const iG={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new eu,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:nm},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Sh,measureDroppableContainers:nm,windowRect:null,measuringScheduled:!1},HS={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:nm,draggableNodes:new Map,over:null,measureDroppableContainers:nm},Uu=H.createContext(HS),VS=H.createContext(iG);function oG(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new eu}}}function lG(e,n){switch(n.type){case _n.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:n.initialCoordinates,active:n.active}};case _n.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:n.coordinates.x-e.draggable.initialCoordinates.x,y:n.coordinates.y-e.draggable.initialCoordinates.y}}};case _n.DragEnd:case _n.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case _n.RegisterDroppable:{const{element:t}=n,{id:s}=t,l=new eu(e.droppable.containers);return l.set(s,t),{...e,droppable:{...e.droppable,containers:l}}}case _n.SetDroppableDisabled:{const{id:t,key:s,disabled:l}=n,i=e.droppable.containers.get(t);if(!i||s!==i.key)return e;const o=new eu(e.droppable.containers);return o.set(t,{...i,disabled:l}),{...e,droppable:{...e.droppable,containers:o}}}case _n.UnregisterDroppable:{const{id:t,key:s}=n,l=e.droppable.containers.get(t);if(!l||s!==l.key)return e;const i=new eu(e.droppable.containers);return i.delete(t),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function cG(e){let{disabled:n}=e;const{active:t,activatorEvent:s,draggableNodes:l}=H.useContext(Uu),i=tm(s),o=tm(t?.id);return H.useEffect(()=>{if(!n&&!s&&i&&o!=null){if(!hp(i)||document.activeElement===i.target)return;const d=l.get(o);if(!d)return;const{activatorNode:c,node:a}=d;if(!c.current&&!a.current)return;requestAnimationFrame(()=>{for(const u of[c.current,a.current]){if(!u)continue;const h=iQ(u);if(h){h.focus();break}}})}},[s,n,l,o,i]),null}function KS(e,n){let{transform:t,...s}=n;return e!=null&&e.length?e.reduce((l,i)=>i({transform:l,...s}),t):t}function dG(e){return H.useMemo(()=>({draggable:{...Sh.draggable,...e?.draggable},droppable:{...Sh.droppable,...e?.droppable},dragOverlay:{...Sh.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function uG(e){let{activeNode:n,measure:t,initialRect:s,config:l=!0}=e;const i=H.useRef(!1),{x:o,y:d}=typeof l=="boolean"?{x:l,y:l}:l;ba(()=>{if(!o&&!d||!n){i.current=!1;return}if(i.current||!s)return;const a=n?.node.current;if(!a||a.isConnected===!1)return;const u=t(a),h=MS(u,s);if(o||(h.x=0),d||(h.y=0),i.current=!0,Math.abs(h.x)>0||Math.abs(h.y)>0){const f=DS(a);f&&f.scrollBy({top:h.y,left:h.x})}},[n,o,d,s,t])}const gp=H.createContext({...ya,scaleX:1,scaleY:1});var Qi;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Qi||(Qi={}));const Ox=H.memo(function(n){var t,s,l,i;let{id:o,accessibility:d,autoScroll:c=!0,children:a,sensors:u=sG,collisionDetection:h=vQ,measuring:f,modifiers:m,...b}=n;const y=H.useReducer(lG,void 0,oG),[g,w]=y,[x,_]=fQ(),[j,R]=H.useState(Qi.Uninitialized),M=j===Qi.Initialized,{draggable:{active:I,nodes:F,translate:B},droppable:{containers:U}}=g,Q=I!=null?F.get(I):null,K=H.useRef({initial:null,translated:null}),T=H.useMemo(()=>{var kt;return I!=null?{id:I,data:(kt=Q?.data)!=null?kt:aG,rect:K}:null},[I,Q]),P=H.useRef(null),[A,N]=H.useState(null),[k,S]=H.useState(null),E=fu(b,Object.values(b)),O=Bu("DndDescribedBy",o),L=H.useMemo(()=>U.getEnabled(),[U]),z=dG(f),{droppableRects:G,measureDroppableContainers:Z,measuringScheduled:ee}=WQ(L,{dragging:M,dependencies:[B.x,B.y],config:z.droppable}),W=VQ(F,I),J=H.useMemo(()=>k?rm(k):null,[k]),$=Xt(),q=QQ(W,z.draggable.measure);uG({activeNode:I!=null?F.get(I):null,config:$.layoutShiftCompensation,initialRect:q,measure:z.draggable.measure});const Y=p4(W,z.draggable.measure,q),se=p4(W?W.parentElement:null),oe=H.useRef({activatorEvent:null,active:null,activeNode:W,collisionRect:null,collisions:null,droppableRects:G,draggableNodes:F,draggingNode:null,draggingNodeRect:null,droppableContainers:U,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ae=U.getNodeFor((t=oe.current.over)==null?void 0:t.id),ce=nG({measure:z.dragOverlay.measure}),we=(s=ce.nodeRef.current)!=null?s:W,fe=M?(l=ce.rect)!=null?l:Y:null,re=!!(ce.nodeRef.current&&ce.rect),ge=YQ(re?null:Y),le=$S(we?rs(we):null),te=ZQ(M?ae??W:null),ie=rG(te),ue=KS(m,{transform:{x:B.x-ge.x,y:B.y-ge.y,scaleX:1,scaleY:1},activatorEvent:k,active:T,activeNodeRect:Y,containerNodeRect:se,draggingNodeRect:fe,over:oe.current.over,overlayNodeRect:ce.rect,scrollableAncestors:te,scrollableAncestorRects:ie,windowRect:le}),_e=J?tc(J,B):null,je=JQ(te),ke=b4(je),Le=b4(je,[Y]),Ue=tc(ue,ke),Qe=fe?jQ(fe,ue):null,Be=T&&Qe?h({active:T,collisionRect:Qe,droppableRects:G,droppableContainers:L,pointerCoordinates:_e}):null,ct=AS(Be,"id"),[ft,_t]=H.useState(null),ut=re?ue:tc(ue,Le),lt=wQ(ut,(i=ft?.rect)!=null?i:null,Y),ht=H.useRef(null),jt=H.useCallback((kt,Rt)=>{let{sensor:$t,options:Ht}=Rt;if(P.current==null)return;const xt=F.get(P.current);if(!xt)return;const Mt=kt.nativeEvent,be=new $t({active:P.current,activeNode:xt,event:Mt,options:Ht,context:oe,onAbort(Ee){if(!F.get(Ee))return;const{onDragAbort:Oe}=E.current,he={id:Ee};Oe?.(he),x({type:"onDragAbort",event:he})},onPending(Ee,qe,Oe,he){if(!F.get(Ee))return;const{onDragPending:Te}=E.current,Fe={id:Ee,constraint:qe,initialCoordinates:Oe,offset:he};Te?.(Fe),x({type:"onDragPending",event:Fe})},onStart(Ee){const qe=P.current;if(qe==null)return;const Oe=F.get(qe);if(!Oe)return;const{onDragStart:he}=E.current,ye={activatorEvent:Mt,active:{id:qe,data:Oe.data,rect:K}};cs.unstable_batchedUpdates(()=>{he?.(ye),R(Qi.Initializing),w({type:_n.DragStart,initialCoordinates:Ee,active:qe}),x({type:"onDragStart",event:ye}),N(ht.current),S(Mt)})},onMove(Ee){w({type:_n.DragMove,coordinates:Ee})},onEnd:xe(_n.DragEnd),onCancel:xe(_n.DragCancel)});ht.current=be;function xe(Ee){return async function(){const{active:Oe,collisions:he,over:ye,scrollAdjustedTranslate:Te}=oe.current;let Fe=null;if(Oe&&Te){const{cancelDrop:nt}=E.current;Fe={activatorEvent:Mt,active:Oe,collisions:he,delta:Te,over:ye},Ee===_n.DragEnd&&typeof nt=="function"&&await Promise.resolve(nt(Fe))&&(Ee=_n.DragCancel)}P.current=null,cs.unstable_batchedUpdates(()=>{w({type:Ee}),R(Qi.Uninitialized),_t(null),N(null),S(null),ht.current=null;const nt=Ee===_n.DragEnd?"onDragEnd":"onDragCancel";if(Fe){const me=E.current[nt];me?.(Fe),x({type:nt,event:Fe})}})}}},[F]),pt=H.useCallback((kt,Rt)=>($t,Ht)=>{const xt=$t.nativeEvent,Mt=F.get(Ht);if(P.current!==null||!Mt||xt.dndKit||xt.defaultPrevented)return;const be={active:Mt};kt($t,Rt.options,be)===!0&&(xt.dndKit={capturedBy:Rt.sensor},P.current=Ht,jt($t,Rt))},[F,jt]),Qt=KQ(u,pt);eG(u),ba(()=>{Y&&j===Qi.Initializing&&R(Qi.Initialized)},[Y,j]),H.useEffect(()=>{const{onDragMove:kt}=E.current,{active:Rt,activatorEvent:$t,collisions:Ht,over:xt}=oe.current;if(!Rt||!$t)return;const Mt={active:Rt,activatorEvent:$t,collisions:Ht,delta:{x:Ue.x,y:Ue.y},over:xt};cs.unstable_batchedUpdates(()=>{kt?.(Mt),x({type:"onDragMove",event:Mt})})},[Ue.x,Ue.y]),H.useEffect(()=>{const{active:kt,activatorEvent:Rt,collisions:$t,droppableContainers:Ht,scrollAdjustedTranslate:xt}=oe.current;if(!kt||P.current==null||!Rt||!xt)return;const{onDragOver:Mt}=E.current,be=Ht.get(ct),xe=be&&be.rect.current?{id:be.id,rect:be.rect.current,data:be.data,disabled:be.disabled}:null,Ee={active:kt,activatorEvent:Rt,collisions:$t,delta:{x:xt.x,y:xt.y},over:xe};cs.unstable_batchedUpdates(()=>{_t(xe),Mt?.(Ee),x({type:"onDragOver",event:Ee})})},[ct]),ba(()=>{oe.current={activatorEvent:k,active:T,activeNode:W,collisionRect:Qe,collisions:Be,droppableRects:G,draggableNodes:F,draggingNode:we,draggingNodeRect:fe,droppableContainers:U,over:ft,scrollableAncestors:te,scrollAdjustedTranslate:Ue},K.current={initial:fe,translated:Qe}},[T,W,Be,Qe,F,we,fe,G,U,ft,te,Ue]),$Q({...$,delta:B,draggingRect:Qe,pointerCoordinates:_e,scrollableAncestors:te,scrollableAncestorRects:ie});const sr=H.useMemo(()=>({active:T,activeNode:W,activeNodeRect:Y,activatorEvent:k,collisions:Be,containerNodeRect:se,dragOverlay:ce,draggableNodes:F,droppableContainers:U,droppableRects:G,over:ft,measureDroppableContainers:Z,scrollableAncestors:te,scrollableAncestorRects:ie,measuringConfiguration:z,measuringScheduled:ee,windowRect:le}),[T,W,Y,k,Be,se,ce,F,U,G,ft,Z,te,ie,z,ee,le]),Ot=H.useMemo(()=>({activatorEvent:k,activators:Qt,active:T,activeNodeRect:Y,ariaDescribedById:{draggable:O},dispatch:w,draggableNodes:F,over:ft,measureDroppableContainers:Z}),[k,Qt,T,Y,w,O,F,ft,Z]);return De.createElement(ES.Provider,{value:_},De.createElement(Uu.Provider,{value:Ot},De.createElement(VS.Provider,{value:sr},De.createElement(gp.Provider,{value:lt},a)),De.createElement(cG,{disabled:d?.restoreFocus===!1})),De.createElement(pQ,{...d,hiddenTextDescribedById:O}));function Xt(){const kt=A?.autoScrollEnabled===!1,Rt=typeof c=="object"?c.enabled===!1:c===!1,$t=M&&!kt&&!Rt;return typeof c=="object"?{...c,enabled:$t}:{enabled:$t}}}),fG=H.createContext(null),x4="button",hG="Draggable";function mG(e){let{id:n,data:t,disabled:s=!1,attributes:l}=e;const i=Bu(hG),{activators:o,activatorEvent:d,active:c,activeNodeRect:a,ariaDescribedById:u,draggableNodes:h,over:f}=H.useContext(Uu),{role:m=x4,roleDescription:b="draggable",tabIndex:y=0}=l??{},g=c?.id===n,w=H.useContext(g?gp:fG),[x,_]=em(),[j,R]=em(),M=tG(o,n),I=fu(t);ba(()=>(h.set(n,{id:n,key:i,node:x,activatorNode:j,data:I}),()=>{const B=h.get(n);B&&B.key===i&&h.delete(n)}),[h,n]);const F=H.useMemo(()=>({role:m,tabIndex:y,"aria-disabled":s,"aria-pressed":g&&m===x4?!0:void 0,"aria-roledescription":b,"aria-describedby":u.draggable}),[s,m,y,g,b,u.draggable]);return{active:c,activatorEvent:d,activeNodeRect:a,attributes:F,isDragging:g,listeners:s?void 0:M,node:x,over:f,setNodeRef:_,setActivatorNodeRef:R,transform:w}}function WS(){return H.useContext(VS)}const pG="Droppable",gG={timeout:25};function bG(e){let{data:n,disabled:t=!1,id:s,resizeObserverConfig:l}=e;const i=Bu(pG),{active:o,dispatch:d,over:c,measureDroppableContainers:a}=H.useContext(Uu),u=H.useRef({disabled:t}),h=H.useRef(!1),f=H.useRef(null),m=H.useRef(null),{disabled:b,updateMeasurementsFor:y,timeout:g}={...gG,...l},w=fu(y??s),x=H.useCallback(()=>{if(!h.current){h.current=!0;return}m.current!=null&&clearTimeout(m.current),m.current=setTimeout(()=>{a(Array.isArray(w.current)?w.current:[w.current]),m.current=null},g)},[g]),_=pp({callback:x,disabled:b||!o}),j=H.useCallback((F,B)=>{_&&(B&&(_.unobserve(B),h.current=!1),F&&_.observe(F))},[_]),[R,M]=em(j),I=fu(n);return H.useEffect(()=>{!_||!R.current||(_.disconnect(),h.current=!1,_.observe(R.current))},[R,_]),H.useEffect(()=>(d({type:_n.RegisterDroppable,element:{id:s,key:i,disabled:t,node:R,rect:f,data:I}}),()=>d({type:_n.UnregisterDroppable,key:i,id:s})),[s]),H.useEffect(()=>{t!==u.current.disabled&&(d({type:_n.SetDroppableDisabled,id:s,key:i,disabled:t}),u.current.disabled=t)},[s,i,t,d]),{active:o,rect:f,isOver:c?.id===s,node:R,over:c,setNodeRef:M}}function yG(e){let{animation:n,children:t}=e;const[s,l]=H.useState(null),[i,o]=H.useState(null),d=tm(t);return!t&&!s&&d&&l(d),ba(()=>{if(!i)return;const c=s?.key,a=s?.props.id;if(c==null||a==null){l(null);return}Promise.resolve(n(a,i)).then(()=>{l(null)})},[n,s,i]),De.createElement(De.Fragment,null,t,s?H.cloneElement(s,{ref:o}):null)}const xG={x:0,y:0,scaleX:1,scaleY:1};function vG(e){let{children:n}=e;return De.createElement(Uu.Provider,{value:HS},De.createElement(gp.Provider,{value:xG},n))}const wG={position:"fixed",touchAction:"none"},_G=e=>hp(e)?"transform 250ms ease":void 0,jG=H.forwardRef((e,n)=>{let{as:t,activatorEvent:s,adjustScale:l,children:i,className:o,rect:d,style:c,transform:a,transition:u=_G}=e;if(!d)return null;const h=l?a:{...a,scaleX:1,scaleY:1},f={...wG,width:d.width,height:d.height,top:d.top,left:d.left,transform:yi.Transform.toString(h),transformOrigin:l&&s?gQ(s,d):void 0,transition:typeof u=="function"?u(s):u,...c};return De.createElement(t,{className:o,style:f,ref:n},i)}),NG=e=>n=>{let{active:t,dragOverlay:s}=n;const l={},{styles:i,className:o}=e;if(i!=null&&i.active)for(const[d,c]of Object.entries(i.active))c!==void 0&&(l[d]=t.node.style.getPropertyValue(d),t.node.style.setProperty(d,c));if(i!=null&&i.dragOverlay)for(const[d,c]of Object.entries(i.dragOverlay))c!==void 0&&s.node.style.setProperty(d,c);return o!=null&&o.active&&t.node.classList.add(o.active),o!=null&&o.dragOverlay&&s.node.classList.add(o.dragOverlay),function(){for(const[c,a]of Object.entries(l))t.node.style.setProperty(c,a);o!=null&&o.active&&t.node.classList.remove(o.active)}},CG=e=>{let{transform:{initial:n,final:t}}=e;return[{transform:yi.Transform.toString(n)},{transform:yi.Transform.toString(t)}]},SG={duration:250,easing:"ease",keyframes:CG,sideEffects:NG({styles:{active:{opacity:"0"}}})};function kG(e){let{config:n,draggableNodes:t,droppableContainers:s,measuringConfiguration:l}=e;return fp((i,o)=>{if(n===null)return;const d=t.get(i);if(!d)return;const c=d.node.current;if(!c)return;const a=US(o);if(!a)return;const{transform:u}=rs(o).getComputedStyle(o),h=OS(u);if(!h)return;const f=typeof n=="function"?n:EG(n);return BS(c,l.draggable.measure),f({active:{id:i,data:d.data,node:c,rect:l.draggable.measure(c)},draggableNodes:t,dragOverlay:{node:o,rect:l.dragOverlay.measure(a)},droppableContainers:s,measuringConfiguration:l,transform:h})})}function EG(e){const{duration:n,easing:t,sideEffects:s,keyframes:l}={...SG,...e};return i=>{let{active:o,dragOverlay:d,transform:c,...a}=i;if(!n)return;const u={x:d.rect.left-o.rect.left,y:d.rect.top-o.rect.top},h={scaleX:c.scaleX!==1?o.rect.width*c.scaleX/d.rect.width:1,scaleY:c.scaleY!==1?o.rect.height*c.scaleY/d.rect.height:1},f={x:c.x-u.x,y:c.y-u.y,...h},m=l({...a,active:o,dragOverlay:d,transform:{initial:c,final:f}}),[b]=m,y=m[m.length-1];if(JSON.stringify(b)===JSON.stringify(y))return;const g=s?.({active:o,dragOverlay:d,...a}),w=d.node.animate(m,{duration:n,easing:t,fill:"forwards"});return new Promise(x=>{w.onfinish=()=>{g?.(),x()}})}}let v4=0;function RG(e){return H.useMemo(()=>{if(e!=null)return v4++,v4},[e])}const TG=De.memo(e=>{let{adjustScale:n=!1,children:t,dropAnimation:s,style:l,transition:i,modifiers:o,wrapperElement:d="div",className:c,zIndex:a=999}=e;const{activatorEvent:u,active:h,activeNodeRect:f,containerNodeRect:m,draggableNodes:b,droppableContainers:y,dragOverlay:g,over:w,measuringConfiguration:x,scrollableAncestors:_,scrollableAncestorRects:j,windowRect:R}=WS(),M=H.useContext(gp),I=RG(h?.id),F=KS(o,{activatorEvent:u,active:h,activeNodeRect:f,containerNodeRect:m,draggingNodeRect:g.rect,over:w,overlayNodeRect:g.rect,scrollableAncestors:_,scrollableAncestorRects:j,transform:M,windowRect:R}),B=Mx(f),U=kG({config:s,draggableNodes:b,droppableContainers:y,measuringConfiguration:x}),Q=B?g.setRef:void 0;return De.createElement(vG,null,De.createElement(yG,{animation:U},h&&I?De.createElement(jG,{key:I,id:h.id,ref:Q,as:d,activatorEvent:u,adjustScale:n,className:c,transition:i,rect:B,style:{zIndex:a,...l},transform:F},t):null))});function Hu(e,n,t){const s=e.slice();return s.splice(t<0?s.length+t:t,0,s.splice(n,1)[0]),s}function AG(e,n){return e.reduce((t,s,l)=>{const i=n.get(s);return i&&(t[l]=i),t},Array(e.length))}function uh(e){return e!==null&&e>=0}function MG(e,n){if(e===n)return!0;if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(e[t]!==n[t])return!1;return!0}function OG(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const QS=e=>{let{rects:n,activeIndex:t,overIndex:s,index:l}=e;const i=Hu(n,s,t),o=n[l],d=i[l];return!d||!o?null:{x:d.left-o.left,y:d.top-o.top,scaleX:d.width/o.width,scaleY:d.height/o.height}},fh={scaleX:1,scaleY:1},Dx=e=>{var n;let{activeIndex:t,activeNodeRect:s,index:l,rects:i,overIndex:o}=e;const d=(n=i[t])!=null?n:s;if(!d)return null;if(l===t){const a=i[o];return a?{x:0,y:t<o?a.top+a.height-(d.top+d.height):a.top-d.top,...fh}:null}const c=DG(i,l,t);return l>t&&l<=o?{x:0,y:-d.height-c,...fh}:l<t&&l>=o?{x:0,y:d.height+c,...fh}:{x:0,y:0,...fh}};function DG(e,n,t){const s=e[n],l=e[n-1],i=e[n+1];return s?t<n?l?s.top-(l.top+l.height):i?i.top-(s.top+s.height):0:i?i.top-(s.top+s.height):l?s.top-(l.top+l.height):0:0}const GS="Sortable",XS=De.createContext({activeIndex:-1,containerId:GS,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:QS,disabled:{draggable:!1,droppable:!1}});function Px(e){let{children:n,id:t,items:s,strategy:l=QS,disabled:i=!1}=e;const{active:o,dragOverlay:d,droppableRects:c,over:a,measureDroppableContainers:u}=WS(),h=Bu(GS,t),f=d.rect!==null,m=H.useMemo(()=>s.map(M=>typeof M=="object"&&"id"in M?M.id:M),[s]),b=o!=null,y=o?m.indexOf(o.id):-1,g=a?m.indexOf(a.id):-1,w=H.useRef(m),x=!MG(m,w.current),_=g!==-1&&y===-1||x,j=OG(i);ba(()=>{x&&b&&u(m)},[x,m,b,u]),H.useEffect(()=>{w.current=m},[m]);const R=H.useMemo(()=>({activeIndex:y,containerId:h,disabled:j,disableTransforms:_,items:m,overIndex:g,useDragOverlay:f,sortedRects:AG(m,c),strategy:l}),[y,h,j.draggable,j.droppable,_,m,g,c,f,l]);return De.createElement(XS.Provider,{value:R},n)}const PG=e=>{let{id:n,items:t,activeIndex:s,overIndex:l}=e;return Hu(t,s,l).indexOf(n)},IG=e=>{let{containerId:n,isSorting:t,wasDragging:s,index:l,items:i,newIndex:o,previousItems:d,previousContainerId:c,transition:a}=e;return!a||!s||d!==i&&l===o?!1:t?!0:o!==l&&n===c},FG={duration:200,easing:"ease"},YS="transform",LG=yi.Transition.toString({property:YS,duration:0,easing:"linear"}),zG={roleDescription:"sortable"};function BG(e){let{disabled:n,index:t,node:s,rect:l}=e;const[i,o]=H.useState(null),d=H.useRef(t);return ba(()=>{if(!n&&t!==d.current&&s.current){const c=l.current;if(c){const a=Ec(s.current,{ignoreTransform:!0}),u={x:c.left-a.left,y:c.top-a.top,scaleX:c.width/a.width,scaleY:c.height/a.height};(u.x||u.y)&&o(u)}}t!==d.current&&(d.current=t)},[n,t,s,l]),H.useEffect(()=>{i&&o(null)},[i]),i}function ZS(e){let{animateLayoutChanges:n=IG,attributes:t,disabled:s,data:l,getNewIndex:i=PG,id:o,strategy:d,resizeObserverConfig:c,transition:a=FG}=e;const{items:u,containerId:h,activeIndex:f,disabled:m,disableTransforms:b,sortedRects:y,overIndex:g,useDragOverlay:w,strategy:x}=H.useContext(XS),_=qG(s,m),j=u.indexOf(o),R=H.useMemo(()=>({sortable:{containerId:h,index:j,items:u},...l}),[h,l,j,u]),M=H.useMemo(()=>u.slice(u.indexOf(o)),[u,o]),{rect:I,node:F,isOver:B,setNodeRef:U}=bG({id:o,data:R,disabled:_.droppable,resizeObserverConfig:{updateMeasurementsFor:M,...c}}),{active:Q,activatorEvent:K,activeNodeRect:T,attributes:P,setNodeRef:A,listeners:N,isDragging:k,over:S,setActivatorNodeRef:E,transform:O}=mG({id:o,data:R,attributes:{...zG,...t},disabled:_.draggable}),L=rQ(U,A),z=!!Q,G=z&&!b&&uh(f)&&uh(g),Z=!w&&k,ee=Z&&G?O:null,J=G?ee??(d??x)({rects:y,activeNodeRect:T,activeIndex:f,overIndex:g,index:j}):null,$=uh(f)&&uh(g)?i({id:o,items:u,activeIndex:f,overIndex:g}):j,q=Q?.id,Y=H.useRef({activeId:q,items:u,newIndex:$,containerId:h}),se=u!==Y.current.items,oe=n({active:Q,containerId:h,isDragging:k,isSorting:z,id:o,index:j,items:u,newIndex:Y.current.newIndex,previousItems:Y.current.items,previousContainerId:Y.current.containerId,transition:a,wasDragging:Y.current.activeId!=null}),ae=BG({disabled:!oe,index:j,node:F,rect:I});return H.useEffect(()=>{z&&Y.current.newIndex!==$&&(Y.current.newIndex=$),h!==Y.current.containerId&&(Y.current.containerId=h),u!==Y.current.items&&(Y.current.items=u)},[z,$,h,u]),H.useEffect(()=>{if(q===Y.current.activeId)return;if(q!=null&&Y.current.activeId==null){Y.current.activeId=q;return}const we=setTimeout(()=>{Y.current.activeId=q},50);return()=>clearTimeout(we)},[q]),{active:Q,activeIndex:f,attributes:P,data:R,rect:I,index:j,newIndex:$,items:u,isOver:B,isSorting:z,isDragging:k,listeners:N,node:F,overIndex:g,over:S,setNodeRef:L,setActivatorNodeRef:E,setDroppableNodeRef:U,setDraggableNodeRef:A,transform:ae??J,transition:ce()};function ce(){if(ae||se&&Y.current.newIndex===j)return LG;if(!(Z&&!hp(K)||!a)&&(z||oe))return yi.Transition.toString({...a,property:YS})}}function qG(e,n){var t,s;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(t=e?.draggable)!=null?t:n.draggable,droppable:(s=e?.droppable)!=null?s:n.droppable}}function am(e){if(!e)return!1;const n=e.data.current;return!!(n&&"sortable"in n&&typeof n.sortable=="object"&&"containerId"in n.sortable&&"items"in n.sortable&&"index"in n.sortable)}const $G=[Cr.Down,Cr.Right,Cr.Up,Cr.Left],Ix=(e,n)=>{let{context:{active:t,collisionRect:s,droppableRects:l,droppableContainers:i,over:o,scrollableAncestors:d}}=n;if($G.includes(e.code)){if(e.preventDefault(),!t||!s)return;const c=[];i.getEnabled().forEach(h=>{if(!h||h!=null&&h.disabled)return;const f=l.get(h.id);if(f)switch(e.code){case Cr.Down:s.top<f.top&&c.push(h);break;case Cr.Up:s.top>f.top&&c.push(h);break;case Cr.Left:s.left>f.left&&c.push(h);break;case Cr.Right:s.left<f.left&&c.push(h);break}});const a=yQ({collisionRect:s,droppableRects:l,droppableContainers:c});let u=AS(a,"id");if(u===o?.id&&a.length>1&&(u=a[1].id),u!=null){const h=i.get(t.id),f=i.get(u),m=f?l.get(f.id):null,b=f?.node.current;if(b&&m&&h&&f){const g=mp(b).some((M,I)=>d[I]!==M),w=JS(h,f),x=UG(h,f),_=g||!w?{x:0,y:0}:{x:x?s.width-m.width:0,y:x?s.height-m.height:0},j={x:m.left,y:m.top};return _.x&&_.y?j:hu(j,_)}}}};function JS(e,n){return!am(e)||!am(n)?!1:e.data.current.sortable.containerId===n.data.current.sortable.containerId}function UG(e,n){return!am(e)||!am(n)||!JS(e,n)?!1:e.data.current.sortable.index<n.data.current.sortable.index}const HG=({stats:e,totalPaidAmount:n=0,isLoading:t})=>{const{hasViewAmountsPermission:s,hasViewPaidReceivablesPermission:l,hasViewOverdueReceivablesPermission:i}=_c(),o=[{to:"/tasks?status=New",icon:ms,label:" ",value:e.new_tasks,bgColor:"#FCE7D4",borderColor:"#ff4444",iconColor:"#c21818a8",textColor:"#c21818a8"},{to:"/tasks?status=Deferred",icon:hO,label:" ",bgColor:"#EECECF",value:e.deferred_tasks,borderColor:"#22c55e",iconColor:"#c21818a8",textColor:"#c21818a8"},{to:"/tasks?status=Pending Review",icon:ky,label:"  ",bgColor:"#FFF4E6",value:e.pending_review_tasks||0,borderColor:"#FF8C00",iconColor:"#FF8C00",textColor:"#FF8C00"},{to:"/tasks?status=Completed",icon:es,label:" ",value:e.completed_tasks,borderColor:"#22c55e",bgColor:"#E1EED2",iconColor:"#c21818a8",textColor:"#c21818a8"},{to:"/tasks?status=Late",icon:On,label:" ",value:e.late_tasks,bgColor:"#DA9E9E",borderColor:"#ffb5b5",iconColor:"#c21818a8",textColor:"#991b1b",isClickable:!0},{to:"/receivables/paid",icon:zr,label:" ",value:s?n:"***",bgColor:"#19AA41",borderColor:"#f0a500",iconColor:"#ffffff",textColor:"#ffffff",isClickable:l},{to:"/receivables/overdue",icon:zr,label:" ",value:s?e.total_unpaid_amount||0:"***",bgColor:"#F80000",borderColor:"#ffe4b5",iconColor:"#ffffff",textColor:"#ffffff",isClickable:i}];return t?r.jsx("div",{className:"flex gap-3 flex-wrap",children:[1,2,3,4,5,6,7].map(d=>r.jsx("div",{className:"rounded-lg shadow-md bg-muted/30 min-w-[140px] flex-1",children:r.jsx("div",{className:"p-2",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-5 h-5 rounded bg-muted-foreground/20 animate-pulse"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"h-2.5 w-12 bg-muted-foreground/20 rounded mb-1 animate-pulse"}),r.jsx("div",{className:"h-4 w-8 bg-muted-foreground/20 rounded animate-pulse"})]})]})})},d))}):r.jsx("div",{className:"flex gap-3 mb-4 flex-wrap",children:o.map(d=>{const c=r.jsx("div",{className:"rounded-lg shadow-md border-l-4 transition-all duration-200 min-w-[140px] flex-1",style:{backgroundColor:d.bgColor,borderLeftColor:d.borderColor},children:r.jsx("div",{className:"p-2",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"flex-shrink-0",children:d.icon===zr?r.jsx(zr,{size:20,style:{color:d.iconColor}}):r.jsx(d.icon,{size:20,strokeWidth:1.5,style:{color:d.iconColor}})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"mb-0 text-[0.7rem] font-semibold opacity-90 leading-tight",style:{color:d.textColor},children:d.label}),r.jsx("h6",{className:"mb-0 font-bold text-base leading-tight",style:{color:d.textColor},children:(d.label===" "||d.label===" ")&&typeof d.value=="number"?d.value.toLocaleString("ar-SA"):d.value})]})]})})});return d.isClickable===!1?c:r.jsx(xn,{to:d.to,className:"no-underline flex-1 min-w-[140px] transition-transform duration-200 hover:-translate-y-0.5",children:c},d.label)})})},VG=({stats:e,totalPaidAmount:n,isLoading:t})=>{const[s,l]=H.useState(!1);return r.jsxs("div",{style:{position:"fixed",bottom:0,left:0,right:0,zIndex:s?999:1e4,transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",transform:s?"translateY(calc(100% - 18px))":"translateY(0)",backgroundColor:"#fff",borderTop:"2px solid rgba(212, 175, 55, 0.1)",boxShadow:s?"0 -4px 12px rgba(0, 0, 0, 0.08)":"0 -8px 24px rgba(0, 0, 0, 0.12)",padding:s?"0":"0.25rem 1rem",borderRadius:s?"24px 24px 0 0":"0 0 24px 24px",overflow:s?"visible":"hidden"},children:[r.jsx("button",{onClick:()=>l(!s),className:"collapse-toggle-btn",style:{position:"absolute",top:s?-14:-28,left:"50%",transform:"translateX(-50%)",width:"48px",height:"48px",borderRadius:s?"24px 24px 0 0":"0 0 24px 24px",background:s?"linear-gradient(135deg, rgba(212, 175, 55, 0.95) 0%, rgba(212, 175, 55, 1) 100%)":"rgba(212, 175, 55, 0.4)",border:`2px solid ${s?"rgba(212, 175, 55, 1)":"rgba(212, 175, 55, 0.6)"}`,color:"#fff",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:s?"0 -4px 12px rgba(0, 0, 0, 0.15)":"0 4px 12px rgba(0, 0, 0, 0.1)",zIndex:1001,padding:0,outline:"none"},title:s?"  ":"  ",onMouseEnter:i=>{i.currentTarget.style.boxShadow=s?"0 -6px 16px rgba(0, 0, 0, 0.2)":"0 6px 16px rgba(0, 0, 0, 0.15)",i.currentTarget.style.transform="translateX(-50%) translateY(-2px)"},onMouseLeave:i=>{i.currentTarget.style.boxShadow=s?"0 -4px 12px rgba(0, 0, 0, 0.15)":"0 4px 12px rgba(0, 0, 0, 0.1)",i.currentTarget.style.transform="translateX(-50%)"},children:r.jsx(oO,{size:20,style:{transition:"transform 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:s?"rotate(0deg)":"rotate(180deg)"}})}),!s&&r.jsxs("div",{style:{animation:"slideUp 0.4s cubic-bezier(0.4, 0, 0.2, 1)",maxHeight:"200px",overflowY:"auto"},children:[r.jsx("style",{children:`
              @keyframes slideUp {
                from {
                  opacity: 0;
                  transform: translateY(20px);
                }
                to {
                  opacity: 1;
                  transform: translateY(0);
                }
              }

              @keyframes slideDown {
                from {
                  opacity: 1;
                  transform: translateY(0);
                }
                to {
                  opacity: 0;
                  transform: translateY(20px);
                }
              }

              .collapse-toggle-btn:hover {
                background: linear-gradient(135deg, rgba(212, 175, 55, 1) 0%, rgba(212, 175, 55, 0.95) 100%) !important;
              }

              .collapse-toggle-btn:active {
                transform: translateX(-50%) scale(0.95) !important;
              }
            `}),r.jsx(HG,{stats:e,totalPaidAmount:n,isLoading:t})]}),s&&r.jsx("div",{style:{height:"50px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",color:"rgba(212, 175, 55, 0.8)",fontWeight:500,cursor:"pointer",userSelect:"none"},onClick:()=>l(!1),children:"   "})]})},KG=({value:e,onChange:n})=>{const[t,s]=H.useState(!1),l=[{value:"employee",label:"Employee",descriptionArabic:""},{value:"admin",label:"Admin",descriptionArabic:""}],i=l.find(d=>d.value===e),o=d=>{n(d),s(!1)};return r.jsxs("div",{className:"absolute top-4 left-4 z-50",children:[r.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-white/95 border border-black/10 rounded-md cursor-pointer text-sm font-medium text-gray-800 transition-all duration-200 shadow-sm backdrop-blur-sm hover:bg-white hover:border-black/15 hover:shadow-md",onClick:()=>s(!t),children:[r.jsx("span",{className:"text-xs font-semibold tracking-wide",children:i?.descriptionArabic||""}),r.jsx(mc,{size:14,className:`transition-transform duration-200 ${t?"rotate-180":""}`})]}),t&&r.jsx("div",{className:"absolute top-[calc(100%+4px)] left-0 bg-white/98 border border-black/10 rounded-md min-w-[140px] shadow-lg overflow-hidden backdrop-blur-sm animate-[slideDown_0.15s_ease-out]",children:l.map(d=>r.jsxs("div",{className:`px-3 py-2.5 cursor-pointer text-xs text-gray-800 transition-all duration-150 flex justify-between items-center border-l-3 rtl ${e===d.value?"bg-blue-500/12 border-l-blue-500 font-semibold text-blue-500":"border-l-transparent hover:bg-blue-500/8 hover:border-l-blue-500/30"}`,onClick:()=>o(d.value),children:[r.jsx("span",{className:"font-medium",children:d.descriptionArabic}),e===d.value&&r.jsx("span",{className:"text-blue-500 font-bold text-sm",children:""})]},d.value))})]})},WG=e=>or({queryKey:["dashboard","admin","employee",e,"clientsWithActiveTasks"],queryFn:async()=>{const n=await Xe.get(`/dashboard/admin/employee/${e}/clients-with-active-tasks`);return n.data?.data||n.data||[]},enabled:!!e}),QG=(e,n={})=>or({queryKey:["tasks","admin","employee",e,n],queryFn:async()=>{const t=new URLSearchParams;n.page&&t.append("page",n.page.toString()),n.per_page&&t.append("per_page",n.per_page.toString()),n.status&&t.append("status",n.status),n.type&&t.append("type",n.type),n.date_from&&t.append("date_from",n.date_from),n.date_to&&t.append("date_to",n.date_to);const s=await Xe.get(`/tasks/employee/${e}?${t.toString()}`);return s.data?.data||s.data||{tasks:[],pagination:{}}},enabled:!!e}),Fx=()=>{const e=Nt();return Et({mutationFn:async n=>(await Xe.post(`/tasks/admin/${n}/submit-for-review`)).data,onSuccess:()=>{e.invalidateQueries({queryKey:["tasks"]}),e.invalidateQueries({queryKey:["dashboard"]}),e.invalidateQueries({queryKey:["employees"]})}})},Lx=({children:e,hoverScale:n=1.03,className:t="",dynamicWidth:s})=>{const[l,i]=H.useState(!1);return r.jsx("div",{className:`floating-card-container ${t}`,style:{position:"relative",zIndex:l?1e4:1,isolation:"isolate",overflow:"visible"},children:r.jsx("div",{onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),style:{transform:l?`scale(${n})  `:"scale(1) translateX(0)",transformOrigin:"center center",transition:"all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94)",boxShadow:l?"0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22)":"none",willChange:"transform, box-shadow",backfaceVisibility:"hidden",overflow:"visible",position:"relative",pointerEvents:"auto",width:l?s||"105%":"100%"},children:e})})},Po=(e,n)=>{const t=parseInt(e.slice(1,3),16),s=parseInt(e.slice(3,5),16),l=parseInt(e.slice(5,7),16);return`rgba(${t}, ${s}, ${l}, ${n})`},GG=e=>{const n=new Date(e),s=Math.abs(new Date().getTime()-n.getTime()),l=Math.ceil(s/(1e3*60*60*24));return l===0?"":l===1?"":l===2?"":l>2&&l<=10?`${l} `:`${l} `},XG=({clientData:e,containerType:n,alternatingColors:t,index:s,onAssign:l})=>{const[i,o]=H.useState(void 0),{attributes:d,listeners:c,setNodeRef:a,transform:u,transition:h,isDragging:f}=ZS({id:`${n}-${e.client.id}`}),m={transform:yi.Transform.toString(u),transition:h,opacity:f?.5:1};return r.jsxs("div",{ref:a,style:m,...d,children:[r.jsx("div",{...c,className:"cursor-grab px-2 py-1 bg-gray-200 border-b border-black/10 text-[10px] text-gray-600 text-center select-none",children:"   "}),r.jsx(Lx,{dynamicWidth:i,children:r.jsx(YG,{data:e,alternatingColors:t,index:s,onAssign:l,onWidthCalculated:o})})]})},YG=({data:e,alternatingColors:n,index:t,onWidthCalculated:s})=>{const{client:l,tasks:i}=e,{t:o}=qt(),d=et(S=>S.openModal),{openDrawer:c}=al(),{success:a,error:u}=ir(),h=Nt(),f=Au(),m=Fm(),b=bc(),y=nl(),g=Fx(),w=H.useRef(null),x=H.useRef([]),[_,j]=H.useState(!1);H.useEffect(()=>{if(_&&w.current&&x.current.length>0&&s){const S=w.current.offsetWidth;let E=0;if(x.current.forEach(O=>{O&&(E=Math.max(E,O.offsetWidth))}),E>S){const L=`${100+(E-S)/S*100}%`;s(L)}else s("100%")}},[_,s]);const R=(S,E,O,L,z)=>{S.mutate({id:E.id},{onSuccess:()=>{a(o(O),o(L,{taskName:E.task_name||o(`type.${E.type}`)})),h.invalidateQueries({queryKey:["dashboard","clientsWithActiveTasks"]})},onError:G=>{u(o("common.error"),G.message||o(z))}})},M=S=>R(f,S,"tasks.deferSuccess","tasks.deferSuccessMessage","tasks.deferError"),I=S=>R(m,S,"tasks.resumeSuccess","tasks.resumeSuccessMessage","tasks.resumeError"),F=S=>{g.mutate(S.id,{onSuccess:async E=>{a(" ",`   "${S.task_name||""}"  `),await h.invalidateQueries({queryKey:["dashboard","clientsWithActiveTasks"]}),await h.invalidateQueries({queryKey:["tasks"]}),await new Promise(L=>setTimeout(L,100));const O={...S,status:"Pending Review",id:E?.data?.id||S.id};d("approval",{task:O})},onError:E=>{u("",E.message||"     ")}})},B=S=>{b.mutate({id:S.id,decisions:{task_action:"cancel"}},{onSuccess:()=>{a(" ","   "),h.invalidateQueries({queryKey:["dashboard","clientsWithActiveTasks"]})},onError:E=>{u("",E.message||"    ")}})},U=S=>d("requirements",{task:S}),Q=S=>d("taskForm",{taskToEdit:S,client:S.client}),K=S=>{const E=S.tags?.some(G=>G.name===""),O=1,L=Array.isArray(S.tags)?S.tags.map(G=>typeof G=="object"?G.id.toString():G.toString()):[];let z;E?z=L.filter(G=>G!==O.toString()):z=[...L,O.toString()],y.mutate({id:S.id,taskData:{task_name:S.task_name||"",type:S.type,amount:S.amount,start_date:S.start_date,end_date:S.end_date||void 0,prepaid_amount:S.prepaid_amount,notes:S.notes||"",tags:z,requirements:S.requirements?.map(G=>({id:G.id,requirement_text:G.requirement_text,is_provided:G.is_provided}))||[]}},{onSuccess:()=>{a(E?"  ":" ",E?"     ":"    "),h.invalidateQueries({queryKey:["dashboard","clientsWithActiveTasks"]})},onError:G=>{u("",G.message||"     ")}})},T=i.some(S=>S.tags?.some(E=>E.name===""));let P,A,N,k;if(T)P=Po("#dc3545",.8),A=Po("#c82333",.6),N=Po("#ffebeb",.5),k=Po("#ffe6e6",.5);else{const S=t%2,E=n[S]||n[0];P=E==="#e3f2fd"?"#1976d2":E==="#bbdefb"?"#0d47a1":E==="#fff8e1"?"#f57f17":E==="#ffecb3"?"#ff8f00":E==="#e8f5e8"?"#2e7d32":E==="#c8e6c9"?"#1b5e20":E==="#f8f9fa"?"#495057":"#343a40",P=Po(P,.5),A=P,N=Po(n[1],.3),k=Po(n[1],1)}return r.jsxs("div",{ref:w,className:"h-full shadow-sm rounded-none overflow-visible relative transition-all duration-300 flex flex-col",style:{border:`3px solid ${A}`},onMouseEnter:()=>j(!0),onMouseLeave:()=>j(!1),children:[r.jsx("div",{className:"border-0 py-2 rounded-none",style:{backgroundColor:P},children:r.jsxs("div",{className:"flex justify-between items-center px-2",children:[r.jsx("div",{className:"flex items-center gap-2",children:r.jsx("span",{className:"text-sm",children:l.phone})}),r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx(xn,{to:`/clients/${l.id}`,className:"no-underline font-bold text-black text-[0.95em]",children:l.name}),T&&r.jsx(On,{size:12,className:"text-yellow-500"})]}),r.jsxs(Ko,{children:[r.jsx(Wo,{asChild:!0,children:r.jsx("button",{className:"p-1 rounded hover:bg-white/20 transition-all duration-200 cursor-pointer border-0 bg-transparent text-black",children:r.jsx(ou,{size:14})})}),r.jsx(eo,{align:"end",className:"text-right min-w-[150px]",style:{direction:"rtl"},children:r.jsxs(Tr,{onClick:()=>d("taskForm",{client:l}),className:"text-right cursor-pointer",children:[r.jsx(Vo,{size:14,className:"ml-2"})," "]})})]})]})}),r.jsx("div",{className:"p-0 relative overflow-visible flex flex-col",style:{backgroundColor:N},children:r.jsx("div",{className:"overflow-auto relative",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"sticky top-0 z-[2]",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-[0.8em] px-2 py-1.5 border-0",style:{backgroundColor:P},children:""}),r.jsx("th",{className:"text-[0.8em] px-2 py-1.5 border-0",style:{backgroundColor:P},children:""}),r.jsx("th",{className:"text-[0.8em] px-2 py-1.5 border-0",style:{backgroundColor:P},children:""}),r.jsx("th",{className:"text-[0.8em] px-2 py-1.5 border-0",style:{backgroundColor:P},children:""}),r.jsx("th",{className:"text-[0.8em] px-2 py-1.5 w-20 min-w-[80px] border-0",style:{backgroundColor:P},children:""})]})}),r.jsx("tbody",{className:"overflow-visible",children:i.map((S,E)=>{const O=S.tags?.some(G=>G.name===""),L=E%2===0?N:k,z=S.status==="Deferred";return r.jsxs("tr",{ref:G=>{x.current[E]=G},className:Lt("border-b border-black/5 relative transition-all duration-200",z&&"opacity-60"),style:{backgroundColor:L},children:[r.jsx("td",{className:"text-[0.82em] px-2 py-2 text-black border-0",style:{backgroundColor:L},children:r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"truncate max-w-[180px] inline-block",children:S.task_name||o(`type.${S.type}`)}),O&&r.jsx(On,{size:10,className:"text-red-500"})]})}),r.jsx("td",{className:"text-[0.77em] px-2 py-2 text-black border-0",style:{backgroundColor:L},children:r.jsx("span",{children:o(`type.${S.type}`)})}),r.jsx("td",{className:"text-[0.77em] px-2 py-2 text-black border-0 text-center",style:{backgroundColor:L},children:r.jsx(Er,{variant:S.status==="New"?"default":S.status==="Deferred"?"destructive":S.status==="Pending Review"?"secondary":S.status==="Completed"?"default":"outline",className:Lt("text-[0.7em]",S.status==="New"&&"bg-yellow-500 text-black hover:bg-yellow-500",S.status==="Pending Review"&&"bg-blue-400 text-black hover:bg-blue-400",S.status==="Completed"&&"bg-green-500 text-white hover:bg-green-500"),children:o(`status.${S.status}`)})}),r.jsx("td",{className:"text-[0.77em] px-2 py-2 text-black border-0 text-center",style:{backgroundColor:L},children:r.jsx("span",{className:"text-muted-foreground",children:GG(S.start_date)})}),r.jsx("td",{className:"px-2 py-2 static text-black border-0 min-w-[50px] whitespace-nowrap",style:{backgroundColor:L},children:r.jsxs(Ko,{children:[r.jsx(Wo,{asChild:!0,children:r.jsx("button",{className:"p-1 rounded border border-gray-300 bg-white hover:bg-gray-100 transition-all duration-200 cursor-pointer text-[10px] leading-none",children:r.jsx(ou,{size:12})})}),r.jsxs(eo,{align:"end",className:"text-right min-w-[200px] text-[0.85em]",style:{direction:"rtl"},children:[r.jsxs(Tr,{onClick:()=>{c("taskFollowUp",{taskId:S.id,taskName:S.task_name||void 0,clientName:S.client?.name||l.name})},className:"text-right cursor-pointer",children:[r.jsx(Ps,{size:14,className:"ml-2"})," "]}),S.requirements&&S.requirements.length>0&&r.jsxs(Tr,{onClick:()=>U(S),className:"text-right cursor-pointer",children:[r.jsx(My,{size:14,className:"ml-2"})," "]}),S.status==="New"&&r.jsxs(Tr,{onClick:()=>F(S),className:"text-right cursor-pointer",children:[r.jsx(km,{size:14,className:"ml-2"})," "]}),r.jsxs(Tr,{onClick:()=>Q(S),className:"text-right cursor-pointer",children:[r.jsx(Su,{size:14,className:"ml-2"})," "]}),r.jsx(ec,{}),S.status!=="Deferred"?r.jsxs(Tr,{onClick:()=>M(S),className:"text-right cursor-pointer",children:[r.jsx(ku,{size:14,className:"ml-2"})," "]}):r.jsxs(Tr,{onClick:()=>I(S),className:"text-right cursor-pointer",children:[r.jsx(Cm,{size:14,className:"ml-2"})," "]}),r.jsxs(Tr,{onClick:()=>K(S),className:"text-right cursor-pointer",children:[r.jsx(On,{size:14,className:"ml-2"}),S.tags?.some(G=>G.name==="")?"  ":"  "]}),r.jsx(ec,{}),r.jsxs(Tr,{onClick:()=>B(S),className:"text-right text-destructive cursor-pointer",children:[r.jsx(ln,{size:14,className:"ml-2"})," "]})]})]})})]},S.id)})})]})})})]})},ZG=({groupedByEmployee:e,onAssign:n,alternatingColors:t})=>{const[s,l]=H.useState(new Map);H.useMemo(()=>{const d=new Map;e.forEach(c=>{const a=[],u=new Set;Object.entries(c.grouped_clients).forEach(([h,f])=>{f.forEach(m=>{if(u.has(m.id))return;u.add(m.id);const b=m.client.id,y=a.find(g=>g.client.id===b);y?y.tasks.push(m):a.push({client:m.client,tasks:[m]})})}),a.length>0&&d.set(c.employee_id,a)}),l(d)},[e]);const i=Ex(cc($u,{activationConstraint:{distance:8}}),cc(qu,{coordinateGetter:Ix})),o=(d,c)=>{const{active:a,over:u}=d;if(!a||!u||a.id===u.id)return;const h=s.get(c);if(!h)return;const[f,m]=a.id.toString().split("-"),[b,y]=u.id.toString().split("-");if(f!=="employee"||b!=="employee")return;const g=h.findIndex(x=>x.client.id.toString()===m),w=h.findIndex(x=>x.client.id.toString()===y);if(g!==-1&&w!==-1&&g!==w){const x=Hu(h,g,w);l(new Map(s.set(c,x)))}};return!e||e.length===0?r.jsxs("div",{className:"py-12 text-center",children:[r.jsx("div",{className:"mb-3",children:r.jsx("i",{className:"fas fa-clipboard-list fa-3x text-gray-400"})}),r.jsx("p",{className:"text-muted-foreground mb-0",children:"   "})]}):r.jsx("div",{className:"flex flex-col gap-3 w-full overflow-visible relative z-[1]",children:Array.from(s.entries()).map(([d,c])=>{if(!e.find(h=>h.employee_id===d))return null;const u=t||["#e3f2fd","#bbdefb"];return r.jsx("div",{className:"flex flex-col gap-3 overflow-visible",children:r.jsx(Ox,{sensors:i,collisionDetection:Rx,onDragEnd:h=>o(h,d),children:r.jsx("div",{className:"flex flex-col gap-3 overflow-visible relative z-[1]",children:c.length===0?r.jsxs("div",{className:"py-12 text-center",children:[r.jsx("div",{className:"mb-3",children:r.jsx("i",{className:"fas fa-clipboard-list fa-3x text-gray-400"})}),r.jsx("p",{className:"text-muted-foreground mb-0",children:"   "})]}):r.jsx(Px,{items:c.map(h=>`employee-${h.client.id}`),strategy:Dx,children:c.map((h,f)=>r.jsx("div",{className:"overflow-visible relative flex-shrink-0",style:{zIndex:50-f},children:r.jsx(XG,{clientData:h,containerType:"employee",alternatingColors:u,index:f,onAssign:n})},`${d}-client-${h.client.id}`))})})})},d)})})},JG="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M16%2031C23.732%2031%2030%2024.732%2030%2017C30%209.26801%2023.732%203%2016%203C8.26801%203%202%209.26801%202%2017C2%2019.5109%202.661%2021.8674%203.81847%2023.905L2%2031L9.31486%2029.3038C11.3014%2030.3854%2013.5789%2031%2016%2031ZM16%2028.8462C22.5425%2028.8462%2027.8462%2023.5425%2027.8462%2017C27.8462%2010.4576%2022.5425%205.15385%2016%205.15385C9.45755%205.15385%204.15385%2010.4576%204.15385%2017C4.15385%2019.5261%204.9445%2021.8675%206.29184%2023.7902L5.23077%2027.7692L9.27993%2026.7569C11.1894%2028.0746%2013.5046%2028.8462%2016%2028.8462Z'%20fill='%23BFC8D0'/%3e%3cpath%20d='M28%2016C28%2022.6274%2022.6274%2028%2016%2028C13.4722%2028%2011.1269%2027.2184%209.19266%2025.8837L5.09091%2026.9091L6.16576%2022.8784C4.80092%2020.9307%204%2018.5589%204%2016C4%209.37258%209.37258%204%2016%204C22.6274%204%2028%209.37258%2028%2016Z'%20fill='url(%23paint0_linear_87_7264)'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M16%2030C23.732%2030%2030%2023.732%2030%2016C30%208.26801%2023.732%202%2016%202C8.26801%202%202%208.26801%202%2016C2%2018.5109%202.661%2020.8674%203.81847%2022.905L2%2030L9.31486%2028.3038C11.3014%2029.3854%2013.5789%2030%2016%2030ZM16%2027.8462C22.5425%2027.8462%2027.8462%2022.5425%2027.8462%2016C27.8462%209.45755%2022.5425%204.15385%2016%204.15385C9.45755%204.15385%204.15385%209.45755%204.15385%2016C4.15385%2018.5261%204.9445%2020.8675%206.29184%2022.7902L5.23077%2026.7692L9.27993%2025.7569C11.1894%2027.0746%2013.5046%2027.8462%2016%2027.8462Z'%20fill='white'/%3e%3cpath%20d='M12.5%209.49989C12.1672%208.83131%2011.6565%208.8905%2011.1407%208.8905C10.2188%208.8905%208.78125%209.99478%208.78125%2012.05C8.78125%2013.7343%209.52345%2015.578%2012.0244%2018.3361C14.438%2020.9979%2017.6094%2022.3748%2020.2422%2022.3279C22.875%2022.2811%2023.4167%2020.0154%2023.4167%2019.2503C23.4167%2018.9112%2023.2062%2018.742%2023.0613%2018.696C22.1641%2018.2654%2020.5093%2017.4631%2020.1328%2017.3124C19.7563%2017.1617%2019.5597%2017.3656%2019.4375%2017.4765C19.0961%2017.8018%2018.4193%2018.7608%2018.1875%2018.9765C17.9558%2019.1922%2017.6103%2019.083%2017.4665%2019.0015C16.9374%2018.7892%2015.5029%2018.1511%2014.3595%2017.0426C12.9453%2015.6718%2012.8623%2015.2001%2012.5959%2014.7803C12.3828%2014.4444%2012.5392%2014.2384%2012.6172%2014.1483C12.9219%2013.7968%2013.3426%2013.254%2013.5313%2012.9843C13.7199%2012.7145%2013.5702%2012.305%2013.4803%2012.05C13.0938%2010.953%2012.7663%2010.0347%2012.5%209.49989Z'%20fill='white'/%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_87_7264'%20x1='26.5'%20y1='7'%20x2='4'%20y2='28'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%235BD066'/%3e%3cstop%20offset='1'%20stop-color='%2327B43E'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e",eX="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%231f1f1f'%3e%3cpath%20d='m676-140-56-56%20123-124H640v-80h240v240h-80v-104L676-140Zm-456%2040q-17%200-34.5-10.5T160-135L60-310q-8-14-8-34.5t8-34.5l260-446q8-14%2025.5-24.5T380-860h200q17%200%2034.5%2010.5T640-825l182%20312q-23-6-47.5-8t-48.5%202L574-780H386L132-344l94%20164h316q11%2023%2025.5%2043t33.5%2037H220Zm70-180-29-51%20183-319h72l101%20176q-17%2013-31.5%2028.5T560-413l-80-139-110%20192h164q-7%2019-10.5%2039t-3.5%2041H290Z'/%3e%3c/svg%3e",tX=({onAddTask:e,onAddInvoice:n,onRecordCredit:t,role:s,context:l})=>{const i=s==="admin"&&l!=="admin-employee-profile",o=s==="admin"&&l!=="admin-employee-profile";return r.jsxs(Ko,{modal:!1,children:[r.jsx(Wo,{asChild:!0,children:r.jsx("button",{className:Lt("p-1.5 rounded hover:bg-white/20","transition-all duration-200 cursor-pointer","border-0 bg-transparent","focus:outline-none focus:ring-2 focus:ring-white/20"),children:r.jsx(ou,{size:16})})}),r.jsxs(eo,{align:"end",className:"min-w-[140px] text-[0.85em]",style:{direction:"rtl"},sideOffset:5,children:[e&&r.jsxs(Tr,{onClick:e,className:"cursor-pointer gap-2 justify-end",children:[r.jsx("span",{children:" "}),r.jsx(Vo,{size:14})]}),i&&n&&r.jsxs(Tr,{onClick:n,className:"cursor-pointer gap-2 justify-end",children:[r.jsx("span",{children:" "}),r.jsx(Vo,{size:14})]}),o&&t&&r.jsxs(Tr,{onClick:t,className:"cursor-pointer gap-2 justify-end",children:[r.jsx("span",{children:" "}),r.jsx(Vo,{size:14})]})]})]})},rX=({client:e,isUrgent:n,headerColor:t,role:s,context:l,actions:i})=>{const o=s==="employee"?`/employee/clients/${e.id}`:`/clients/${e.id}`,d=()=>{const u=`https://wa.me/+966${e.phone?.replace(/[^0-9]/g,"")||""}`;window.open(u,"_blank")},c=()=>{e.google_drive_link&&window.open(e.google_drive_link,"_blank")};return r.jsx("div",{className:"border-0 py-2 rounded-none",style:{backgroundColor:t},children:r.jsxs("div",{className:"flex justify-between items-center px-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:d,className:"p-1.5 rounded hover:bg-white/20 transition-all duration-200 cursor-pointer border-0 bg-transparent",title:"",children:r.jsx("img",{src:JG,alt:"WhatsApp",width:"18",height:"18"})}),r.jsx("span",{className:"text-sm",children:e.phone||""})]}),r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx(xn,{to:o,className:"no-underline font-bold text-black text-[0.95em] hover:opacity-80 transition-opacity",children:e.name}),n&&r.jsx(On,{size:14,className:"text-warning"}),r.jsx("button",{onClick:c,className:"p-1.5 rounded hover:bg-white/20 transition-all duration-200 cursor-pointer border-0 bg-transparent disabled:opacity-50 disabled:cursor-not-allowed",title:"Google Drive",disabled:!e.google_drive_link,children:r.jsx("img",{src:eX,alt:"Google Drive",width:"18",height:"18"})})]}),r.jsx(tX,{onAddTask:()=>i.onAddTask?.(e),onAddInvoice:()=>i.onAddInvoice?.(e),onRecordCredit:()=>i.onRecordCredit?.(e),role:s,context:l})]})})},nX=(e,n,t,s=!1)=>{const l=e.status==="New",i=e.status==="Deferred",o=e.status==="Completed",d=e.status==="Cancelled",c=e.status==="Pending Review",a=!0,u=!0,h=!0;if(n==="employee")return{canComplete:!1,canDefer:l,canResume:i,canCancel:!o&&!d,canRestore:!1,canSubmitForReview:!o&&!c,canAssign:!1,canToggleUrgent:!0,showRequirements:a,showFollowUp:u,showSubtasks:h};const f=t==="admin-employee-filter"||t==="admin-employee-profile";return{canComplete:f?!s&&!o:!o,canDefer:l,canResume:i,canCancel:!o&&!d,canRestore:o,canSubmitForReview:f&&l,canAssign:(t==="admin-dashboard"||t==="admin-employee-filter")&&(l||i),canToggleUrgent:!0,showRequirements:a,showFollowUp:u,showSubtasks:h}},sX=(e,n,t)=>n==="employee"?" ":e&&(t==="admin-employee-filter"||t==="admin-dashboard")?" ":"",aX=e=>e.assigned_to_id?"/ ":" ",iX=({task:e,role:n,context:t,actions:s,isEmployeeTask:l=!1})=>{const i=nX(e,n,t,l),o=e.tags?.some(d=>d.name==="");return r.jsxs(Ko,{modal:!1,children:[r.jsx(Wo,{asChild:!0,children:r.jsx("button",{className:Lt("p-1.5 rounded border border-gray-300 bg-white","hover:bg-gray-100 hover:border-gray-400","transition-all duration-200 cursor-pointer","focus:outline-none focus:ring-2 focus:ring-primary/20"),children:r.jsx(ou,{size:12})})}),r.jsxs(eo,{align:"end",className:"min-w-[160px] text-[0.85em]",style:{direction:"rtl"},sideOffset:5,children:[i.canRestore&&s.onRestore&&r.jsxs(Tr,{onClick:()=>s.onRestore?.(e),className:"cursor-pointer gap-2 justify-end",children:[r.jsx("span",{children:"  "}),r.jsx(Eu,{size:14})]}),i.canComplete&&s.onComplete&&r.jsxs(Tr,{onClick:()=>s.onComplete?.(e),className:"cursor-pointer gap-2 justify-end",disabled:l&&n==="admin",children:[r.jsx("span",{children:sX(l,n,t)}),r.jsx(ha,{size:14})]}),i.canSubmitForReview&&s.onSubmitForReview&&r.jsxs(Tr,{onClick:()=>s.onSubmitForReview?.(e),className:"cursor-pointer gap-2 justify-end",children:[r.jsx("span",{children:" "}),r.jsx(km,{size:14})]}),i.canDefer&&s.onDefer&&r.jsxs(Tr,{onClick:()=>s.onDefer?.(e),className:"cursor-pointer gap-2 justify-end",children:[r.jsx("span",{children:""}),r.jsx(ku,{size:14})]}),i.canResume&&s.onResume&&r.jsxs(Tr,{onClick:()=>s.onResume?.(e),className:"cursor-pointer gap-2 justify-end",children:[r.jsx("span",{children:""}),r.jsx(Cm,{size:14})]}),i.canCancel&&s.onCancel&&r.jsxs(Tr,{onClick:()=>s.onCancel?.(e),className:"cursor-pointer gap-2 justify-end text-destructive hover:text-destructive",children:[r.jsx("span",{children:" "}),r.jsx(ln,{size:14})]}),r.jsx(ec,{className:"bg-border/50"}),i.canToggleUrgent&&s.onToggleUrgent&&r.jsxs(Tr,{onClick:()=>s.onToggleUrgent?.(e),className:"cursor-pointer gap-2 justify-end",children:[r.jsx("span",{children:o?" ":" "}),r.jsx(On,{size:14})]}),r.jsx(ec,{className:"bg-border/50"}),i.showRequirements&&s.onShowRequirements&&r.jsxs(Tr,{onClick:()=>s.onShowRequirements?.(e),className:"cursor-pointer gap-2 justify-end",children:[r.jsx("span",{children:""}),r.jsx(My,{size:14})]}),i.showFollowUp&&s.onOpenFollowUp&&r.jsxs(Tr,{onClick:()=>s.onOpenFollowUp?.(e),className:"cursor-pointer gap-2 justify-end",children:[r.jsx("span",{children:""}),r.jsx(Ps,{size:14})]}),i.showSubtasks&&s.onViewSubtasks&&r.jsxs(Tr,{onClick:()=>s.onViewSubtasks?.(e),className:"cursor-pointer gap-2 justify-end",children:[r.jsx("span",{children:" "}),r.jsx(Su,{size:14})]}),i.canAssign&&s.onAssign&&r.jsxs(r.Fragment,{children:[r.jsx(ec,{className:"bg-border/50"}),r.jsxs(Tr,{onClick:()=>s.onAssign?.(e),className:"cursor-pointer gap-2 justify-end",children:[r.jsx("span",{children:aX(e)}),r.jsx(nc,{size:14})]})]})]})]})},oX=e=>{const n=new Date(e),s=Math.abs(new Date().getTime()-n.getTime()),l=Math.ceil(s/(1e3*60*60*24));return l===0?"":l===1?"":l===2?"":l>2&&l<=10?`${l} `:`${l} `},lX=e=>{const n=new Date(e),t=n.getDate(),s=n.getMonth()+1,l=n.getFullYear().toString().slice(-2);return`${t}/${s}/${l}`},cX=()=>r.jsxs("svg",{width:10,height:10,viewBox:"0 0 1124.14 1256.39",className:"mr-0.5 align-middle flex-shrink-0",children:[r.jsx("path",{d:"M699.62,1113.02h0c-20.06,44.48-33.32,92.75-38.4,143.37l424.51-90.24c20.06-44.47,33.31-92.75,38.4-143.37l-424.51,90.24Z",fill:"#f00"}),r.jsx("path",{d:"M1085.73,895.8c20.06-44.47,33.32-92.75,38.4-143.37l-330.68,70.33v-135.2l292.27-62.11c20.06-44.47,33.32-92.75,38.4-143.37l-330.68,70.27V66.13c-50.67,28.45-95.67,66.32-132.25,110.99v403.35l-132.25,28.11V0c-50.67,28.44-95.67,66.32-132.25,110.99v525.69l-295.91,62.88c-20.06,44.47-33.33,92.75-38.42,143.37l334.33-71.05v170.26l-358.3,76.14c-20.06,44.47-33.32,92.75-38.4,143.37l375.04-79.7c30.53-6.35,56.77-24.4,73.83-49.24l68.78-101.97v-.02c7.14-10.55,11.3-23.27,11.3-36.97v-149.98l132.25-28.11v270.4l424.53-90.28Z",fill:"#f00"})]}),dX=({task:e,index:n,role:t,context:s,backgroundColor:l,actions:i,showAmount:o=!0,showEmployeePrefix:d=!1,employeeName:c,rowRef:a,isEmployeeTask:u=!1})=>{const{t:h}=qt(),f=e.tags?.some(g=>g.name===""),m=e.status==="Deferred",b=d&&c?`${c}: ${e.task_name||h(`type.${e.type}`)}`:e.task_name||h(`type.${e.type}`),y=s==="admin-employee-filter"||s==="admin-employee-profile";return r.jsxs("tr",{ref:a,className:Lt("task-row transition-all duration-200 relative",m&&"opacity-60"),"data-task-id":e.id,style:{backgroundColor:l,border:u?"3px solid #000":"none"},children:[r.jsx("td",{className:"text-[0.82em] px-2 py-2 text-black border-0",style:{backgroundColor:l},children:r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"truncate max-w-[180px] inline-block",children:b}),f&&r.jsx(On,{size:10,className:"text-danger flex-shrink-0"})]})}),r.jsx("td",{className:"text-[0.77em] px-2 py-2 text-black border-0",style:{backgroundColor:l},children:lX(e.start_date)}),r.jsx("td",{className:"text-[0.77em] px-2 py-2 text-black border-0",style:{backgroundColor:l},children:oX(e.start_date)}),o&&r.jsx("td",{className:"text-[0.77em] px-2 py-2 text-black border-0 font-bold",style:{backgroundColor:l},children:r.jsxs("div",{className:"flex items-center text-danger",children:[r.jsx(cX,{}),Number(e.amount).toLocaleString()]})}),y&&r.jsx("td",{className:"text-[0.77em] px-2 py-2 text-black border-0 text-center",style:{backgroundColor:l},children:r.jsx(Er,{variant:e.status==="New"?"default":e.status==="Deferred"?"destructive":e.status==="Pending Review"?"secondary":e.status==="Completed"?"default":"outline",className:Lt("text-[0.7em]",e.status==="New"&&"bg-yellow-500 text-black hover:bg-yellow-500",e.status==="Pending Review"&&"bg-blue-400 text-black hover:bg-blue-400",e.status==="Completed"&&"bg-green-500 text-white hover:bg-green-500"),children:h(`status.${e.status}`)})}),r.jsx("td",{className:"px-2 py-2 static text-black border-0 min-w-[80px] whitespace-nowrap",style:{backgroundColor:l},children:r.jsxs("div",{className:"flex gap-1.5 justify-start items-center min-w-fit",children:[i.onOpenFollowUp&&r.jsx("button",{className:"p-1.5 rounded border border-gray-300 bg-white hover:bg-gray-100 hover:border-gray-400 transition-all duration-200 cursor-pointer",onClick:()=>i.onOpenFollowUp?.(e),title:"",children:r.jsx(Ps,{size:12})}),i.onViewSubtasks&&r.jsx("button",{onClick:()=>i.onViewSubtasks?.(e),className:"p-1.5 rounded border border-blue-300 bg-blue-50 text-blue-600 hover:bg-blue-100 hover:border-blue-400 transition-all duration-200 cursor-pointer",title:" ",children:r.jsx(Su,{size:12})}),r.jsx(iX,{task:e,role:t,context:s,actions:i,isEmployeeTask:u})]})})]})},qo=(e,n)=>{const t=e.startsWith("#")?e.slice(1):e,s=parseInt(t.slice(0,2),16),l=parseInt(t.slice(2,4),16),i=parseInt(t.slice(4,6),16);return`rgba(${s}, ${l}, ${i}, ${n})`},uX={headerColor:qo("#dc3545",.8),borderColor:qo("#c82333",.6),row1Color:qo("#ffebeb",.5),row2Color:qo("#ffe6e6",.5)},fX=e=>({"#e3f2fd":"#1976d2","#bbdefb":"#0d47a1","#fff8e1":"#f57f17","#ffecb3":"#ff8f00","#e8f5e8":"#2e7d32","#c8e6c9":"#1b5e20","#f8f9fa":"#495057","#e9ecef":"#343a40"})[e]||"#343a40",hX=(e,n,t)=>{if(t)return uX;const s=e%2,l=n[s]||n[0],i=fX(l),o=qo(i,.5);return{headerColor:o,borderColor:o,row1Color:qo(n[1]||n[0],.3),row2Color:qo(n[1]||n[0],1)}},mX=(e,n,t,s)=>n?"#ffcccc":e%2===0?t:s,pX=["#e3f2fd","#bbdefb"],zx=({data:e,role:n,context:t,index:s=0,alternatingColors:l=pX,taskActions:i={},clientActions:o={},onWidthCalculated:d,showAmount:c=!0,showEmployeePrefix:a=!1,compactMode:u=!1})=>{const{client:h,tasks:f}=e,m=H.useRef(null),b=H.useRef([]),[y,g]=H.useState(!1),w=f.some(B=>B.tags?.some(U=>U.name==="")),x=hX(s,l,w),{headerColor:_,borderColor:j,row1Color:R,row2Color:M}=x;H.useEffect(()=>{if(y&&m.current&&b.current.length>0&&d){const B=m.current.offsetWidth;let U=0;if(b.current.forEach(Q=>{Q&&(U=Math.max(U,Q.offsetWidth))}),U>B){const K=`${100+(U-B)/B*100}%`;d(K)}else d("100%")}},[y,d]);const I=t==="admin-employee-filter"||t==="admin-employee-profile",F=c&&t!=="employee-dashboard";return r.jsxs("div",{ref:m,className:Lt("h-full shadow-md rounded-none overflow-visible relative transition-all duration-300",u?"border-2":"border-4"),style:{borderColor:j},onMouseEnter:B=>{g(!0),B.currentTarget.style.transform="scale(1.02)",B.currentTarget.style.zIndex="10",B.currentTarget.style.boxShadow="0 8px 25px rgba(0,0,0,0.15)"},onMouseLeave:B=>{g(!1),B.currentTarget.style.transform="scale(1)",B.currentTarget.style.zIndex="1",B.currentTarget.style.boxShadow=""},children:[r.jsx(rX,{client:h,isUrgent:w,headerColor:_,role:n,context:t,actions:o}),r.jsx("div",{className:"p-0 relative overflow-visible",style:{backgroundColor:R},children:r.jsx("div",{className:"overflow-hidden relative",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"sticky top-0 z-[2]",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-[0.8em] px-2 py-1.5 border-0",style:{backgroundColor:_},children:""}),r.jsx("th",{className:"text-[0.8em] px-2 py-1.5 border-0",style:{backgroundColor:_},children:""}),r.jsx("th",{className:"text-[0.8em] px-2 py-1.5 border-0",style:{backgroundColor:_},children:""}),F&&r.jsx("th",{className:"text-[0.8em] px-2 py-1.5 border-0",style:{backgroundColor:_},children:""}),I&&r.jsx("th",{className:"text-[0.8em] px-2 py-1.5 border-0",style:{backgroundColor:_},children:""}),r.jsx("th",{className:"text-[0.8em] px-2 py-1.5 border-0 w-20 min-w-[80px]",style:{backgroundColor:_},children:""})]})}),r.jsx("tbody",{className:"overflow-hidden",children:f.map((B,U)=>{const Q=B.tags?.some(T=>T.name===""),K=mX(U,Q,R,M);return r.jsx(dX,{task:B,index:U,role:n,context:t,backgroundColor:K,actions:i,showAmount:F,showEmployeePrefix:a,rowRef:T=>{b.current[U]=T}},B.id)})})]})})})]})},ek=({data:e,role:n,context:t,sortableId:s,onAssign:l,showDragHandle:i=!0,...o})=>{const[d,c]=H.useState(void 0),{attributes:a,listeners:u,setNodeRef:h,transform:f,transition:m,isDragging:b}=ZS({id:s}),y={transform:yi.Transform.toString(f),transition:m,opacity:b?.5:1,zIndex:b?1e3:"auto"},{taskActions:g,clientActions:w}=Bx({role:n,context:t,client:e.client}),x=l?{...g,onAssign:l}:g;return r.jsxs("div",{ref:h,style:y,...a,className:"mb-3",children:[i&&r.jsx("div",{...u,className:Lt("cursor-grab p-1.5 border-b text-xs text-center","bg-gray-50 border-gray-200 text-gray-600","hover:bg-gray-100 active:cursor-grabbing","select-none"),children:"   "}),r.jsx(Lx,{dynamicWidth:d,children:r.jsx(zx,{data:e,role:n,context:t,taskActions:x,clientActions:w,onWidthCalculated:c,...o})})]})},gX=({title:e,icon:n,primaryColor:t,itemCount:s,moreLink:l,darkText:i=!1,children:o,className:d,minHeight:c="400px",emptyMessage:a="  ",isEmpty:u=!1})=>{const h=i?"text-gray-800":"text-white";return r.jsxs("div",{className:Lt("rounded-none border border-gray-300 flex flex-col overflow-visible relative",d),style:{minHeight:c},children:[r.jsx("div",{className:Lt("flex justify-center items-center py-2 border-b border-gray-300 flex-shrink-0",h),style:{backgroundColor:t},children:r.jsxs("div",{className:"flex justify-center items-center font-bold gap-2",children:[n&&r.jsx("span",{className:"text-black",children:n}),l?r.jsx(xn,{to:l,className:Lt("no-underline text-center",i?"text-gray-800":"text-black"),children:r.jsx("h6",{className:"mb-0 font-medium text-center",children:e})}):r.jsx("h6",{className:Lt("mb-0 font-medium text-center",i?"text-gray-800":"text-white"),children:e}),typeof s=="number"&&r.jsx(Er,{className:"bg-white text-primary rounded-full px-2 py-1 text-black",children:s})]})}),r.jsx("div",{className:Lt("p-0 flex-1 z-0 overflow-visible",u&&"min-h-[200px]"),children:u?r.jsxs("div",{className:"py-12 text-center",children:[r.jsx("div",{className:"mb-3",children:r.jsx("i",{className:"fas fa-clipboard-list fa-3x text-gray-400"})}),r.jsx("p",{className:"text-muted-foreground mb-0",children:a})]}):o}),l&&r.jsx("div",{className:"py-2 border-t border-gray-300 flex-shrink-0",style:{backgroundColor:t},children:r.jsx(xn,{to:l,className:Lt("block w-full text-center font-medium py-1.5 rounded border border-white/30 transition-colors",i?"text-gray-800":"text-white"),style:{backgroundColor:"transparent"},children:" "})})]})},bX=({data:e,index:n=0,alternatingColors:t,onAssign:s,onWidthCalculated:l})=>{const{taskActions:i,clientActions:o}=Bx({role:"admin",context:"admin-dashboard",client:e.client}),d=s?{...i,onAssign:s}:i;return r.jsx(zx,{data:e,role:"admin",context:"admin-dashboard",index:n,alternatingColors:t,taskActions:d,clientActions:o,onWidthCalculated:l,showAmount:!0,showEmployeePrefix:!0})},yX=({data:e,index:n=0,alternatingColors:t,context:s="admin-employee-filter",onAssign:l,onWidthCalculated:i})=>{const{taskActions:o,clientActions:d}=Bx({role:"admin",context:s,client:e.client}),c=l?{...o,onAssign:l}:o;return r.jsx(zx,{data:e,role:"admin",context:s,index:n,alternatingColors:t,taskActions:c,clientActions:d,onWidthCalculated:i,showAmount:!1,showEmployeePrefix:!1})},xX=(e={})=>{const{per_page:n=20,status:t,search:s,client_id:l}=e;return xa({queryKey:["employee","tasks","own","infinite",{per_page:n,status:t,search:s,client_id:l}],queryFn:async({pageParam:i})=>{const o=new URLSearchParams;o.append("page",i.toString()),o.append("per_page",n.toString()),t&&o.append("status",t),s&&o.append("search",s),l&&o.append("client_id",l.toString());const d=await Xe.get(`/tasks/employee/me?${o.toString()}`);if(!d.data.success)throw new Error(d.data.message||"Failed to fetch employee tasks");return d.data.data},initialPageParam:1,getNextPageParam:i=>{const{current_page:o,total_pages:d}=i.pagination;return o<d?o+1:void 0},staleTime:120*1e3,refetchInterval:300*1e3})},tk=()=>{const e=Nt();return Et({mutationFn:async n=>{const t=await Xe.post(`/tasks/${n}/submit-for-review`);if(!t.data.success)throw new Error(t.data.message||"Failed to submit task for review");return t.data.data},onSuccess:()=>{e.invalidateQueries({queryKey:["employee","tasks","own"]}),e.invalidateQueries({queryKey:["employee","dashboard"]}),e.invalidateQueries({queryKey:["dashboard"]}),e.invalidateQueries({queryKey:["tasks"]}),e.invalidateQueries({queryKey:["receivables"]})}})},Bx=({role:e,context:n,client:t})=>{const{t:s}=qt(),l=Nt(),{openModal:i}=et(),{openDrawer:o}=al(),{success:d,error:c}=ir(),a=Au(),u=Fm(),h=nl(),f=bc(),m=Lm(),b=l5(),y=tk(),g=Fx(),w=()=>n==="employee-dashboard"?["dashboard","employee","clientsWithActiveTasks"]:["dashboard","clientsWithActiveTasks"],x=(R,M,I,F,B)=>{R.mutate({id:M.id},{onSuccess:()=>{d(s(I),s(F,{taskName:M.task_name||s(`type.${M.type}`)})),l.invalidateQueries({queryKey:w()})},onError:U=>{c(s("common.error"),U.message||s(B))}})};return{taskActions:{onDefer:R=>x(a,R,"tasks.deferSuccess","tasks.deferSuccessMessage","tasks.deferError"),onResume:R=>x(u,R,"tasks.resumeSuccess","tasks.resumeSuccessMessage","tasks.resumeError"),onRestore:R=>{m.mutate({id:R.id},{onSuccess:()=>{d(" ",`   "${R.task_name||s(`type.${R.type}`)}"   `),l.invalidateQueries({queryKey:w()})},onError:M=>{c("",M.message||"    ")}})},onComplete:R=>{R.amount===0||!R.amount?b.mutate({id:R.id,payload:{is_paid:!1}},{onSuccess:()=>{d(" ",`   "${R.task_name||s(`type.${R.type}`)}" `),l.invalidateQueries({queryKey:w()}),l.invalidateQueries({queryKey:["tasks"]})},onError:M=>{c("",M.message||"    ")}}):i("taskCompletion",{task:R})},onCancel:R=>{f.mutate({id:R.id,decisions:{task_action:"cancel"}},{onSuccess:()=>{d(" ","   "),l.invalidateQueries({queryKey:w()})},onError:M=>{c("",M.message||"    ")}})},onSubmitForReview:R=>{(e==="admin"?g:y).mutate(R.id,{onSuccess:async I=>{if(d(" ",`   "${R.task_name||""}"  `),await l.invalidateQueries({queryKey:w()}),await l.invalidateQueries({queryKey:["tasks"]}),e==="admin"){const F={...R,status:"Pending Review",id:I?.data?.id||R.id};i("approval",{task:F})}},onError:I=>{c("",I.message||"     ")}})},onShowRequirements:R=>{i("requirements",{task:R})},onViewSubtasks:R=>{i("taskForm",{taskToEdit:R,client:R.client||t})},onOpenFollowUp:R=>{o("taskFollowUp",{taskId:R.id,taskName:R.task_name||void 0,clientName:t.name})},onToggleUrgent:R=>{const M=R.tags?.some(U=>U.name===""),I=1,F=Array.isArray(R.tags)?R.tags.map(U=>typeof U=="object"?U.id.toString():U.toString()):[],B=M?F.filter(U=>U!==I.toString()):[...F,I.toString()];h.mutate({id:R.id,taskData:{task_name:R.task_name||"",type:R.type,amount:R.amount,start_date:R.start_date,end_date:R.end_date||void 0,prepaid_amount:R.prepaid_amount,notes:R.notes||"",tags:B,requirements:R.requirements?.map(U=>({id:U.id,requirement_text:U.requirement_text,is_provided:U.is_provided}))||[]}},{onSuccess:()=>{d(M?"  ":" ",M?"     ":"    "),l.invalidateQueries({queryKey:w()})},onError:U=>{c("",U.message||"     ")}})},onAssign:e==="admin"?R=>{i("assignTask",{task:R})}:void 0},clientActions:{onAddTask:()=>{i("taskForm",{client:t})},onAddInvoice:e==="admin"?()=>{i("invoiceForm",{client_id:t.id,client:t})}:void 0,onRecordCredit:e==="admin"?()=>{i("recordCreditModal",{client:t})}:void 0}}},vX=()=>{const{t:e}=qt(),n=et(I=>I.openModal),{data:t,isLoading:s}=eQ(),[l,i]=H.useState(null),[o,d]=H.useState(null),[c,a]=H.useState(null),[u,h]=H.useState(null),[f,m]=H.useState("admin"),b=UI(),y=I=>{n("assignTask",{task:I})},{data:g,isLoading:w}=tQ(f);H.useEffect(()=>{qn("dashboard")},[]),H.useEffect(()=>{g&&(Array.isArray(g)?(d(g),i(null)):(i(g),d(null)))},[g]);const x=Ex(cc($u,{activationConstraint:{distance:8}}),cc(qu,{coordinateGetter:Ix})),_={Government:{icon:r.jsx(Sn,{size:20}),color:"#007bff",displayName:"",alternatingColors:["#e3f2fd","#bbdefb"]},Accounting:{icon:r.jsx(QM,{size:20}),color:"#ffc107",displayName:"",alternatingColors:["#fff8e1","#ffecb3"]},"Real Estate":{icon:r.jsx(Ay,{size:20}),color:"#28a745",displayName:"",alternatingColors:["#e8f5e8","#c8e6c9"]},Other:{icon:r.jsx(ro,{size:20}),color:"#6c757d",displayName:"",alternatingColors:["#f8f9fa","#e9ecef"]}},j=["Government","Accounting","Real Estate","Other"];function R(I){const{active:F}=I,[B,U]=F.id.toString().split("-"),Q=B;if(l&&Q&&U){const K=l[Q].find(T=>T.client.id.toString()===U);K&&(a(K),h(Q))}}function M(I){const{active:F,over:B}=I;if(!F||!B||F.id===B.id){a(null),h(null);return}if(!l||!u){a(null),h(null);return}const[U,Q]=F.id.toString().split("-"),[K,T]=B.id.toString().split("-");if(U!==K){a(null),h(null);return}const P=l[u],A=P.findIndex(k=>k.client.id.toString()===Q),N=P.findIndex(k=>k.client.id.toString()===T);if(A!==-1&&N!==-1&&A!==N){const k=Hu(P,A,N);i(O=>O?{...O,[u]:k}:null);const S=k.map(O=>{const L=O.client.id;return typeof L=="string"?parseInt(L,10):L}),E=u==="Real Estate"?"RealEstate":u;b.mutate({taskType:E,clientIds:S},{onSuccess:()=>{},onError:O=>{console.error("Failed to update sort order:",O)}})}a(null),h(null)}return r.jsxs("div",{className:"relative pb-[200px]",children:[r.jsx(KG,{value:f,onChange:m}),r.jsx(VG,{stats:t||{new_tasks:0,deferred_tasks:0,completed_tasks:0,late_tasks:0,late_receivables:0,total_unpaid_amount:0},totalPaidAmount:t?.total_paid_amount||0,isLoading:s}),w&&r.jsx("div",{className:"flex justify-center py-12",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}),r.jsxs(Ox,{sensors:x,collisionDetection:Rx,onDragStart:R,onDragEnd:M,children:[!w&&f==="admin"&&l&&r.jsx("div",{className:"min-h-[calc(100vh-200px)] overflow-visible relative z-[1]",children:r.jsx("div",{className:"overflow-visible relative z-[1]",children:r.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-0 overflow-visible relative z-[1]",children:j.map((I,F)=>{const B=l[I]||[],U=_[I];return r.jsx("div",{className:"p-2 overflow-visible relative",style:{zIndex:10-F},children:r.jsx(gX,{title:` ${U.displayName}`,icon:U.icon,primaryColor:U.color,itemCount:B.length,moreLink:`/tasks?type=${I}`,darkText:I==="Accounting",isEmpty:B.length===0,emptyMessage:e("common.noResults"),className:I==="Other"?"":"border-r-0",children:B.length>0&&r.jsx(Px,{items:B.map(Q=>`${I}-${Q.client.id}`),strategy:Dx,children:B.map(Q=>r.jsx(ek,{data:Q,role:"admin",context:"admin-dashboard",sortableId:`${I}-${Q.client.id}`,alternatingColors:U.alternatingColors,onAssign:y,showAmount:!0,showEmployeePrefix:!0},`${I}-${Q.client.id}`))})})},I)})})})}),!w&&f==="employee"&&o&&r.jsx("div",{className:"overflow-visible relative z-[1] flex flex-col",children:r.jsx("div",{className:"overflow-visible relative z-[1] flex",children:r.jsx("div",{className:"flex gap-3 overflow-visible relative z-[1] justify-start w-full m-0 p-0 flex-1 items-start",style:{perspective:"1000px"},children:o.map((I,F)=>{const B=F%Object.values(_).length,Q=Object.values(_)[B],K=Object.values(I.grouped_clients).reduce((P,A)=>P+A.length,0),T=()=>{const P=o.length;return P===1?"calc(60% - 0.72rem)":P===2?"calc(45% - 0.72rem)":P===3?"calc(30% - 0.72rem)":P===4?"calc(23% - 0.72rem)":"calc(20% - 0.72rem)"};return r.jsx("div",{className:"overflow-visible relative flex",style:{zIndex:10-F,flex:`0 0 ${T()}`,minWidth:0,perspective:"1000px"},children:r.jsxs("div",{className:"h-full shadow-sm rounded-none overflow-visible relative flex flex-col transition-all duration-300 w-full",style:{border:`3px solid ${Q.color}`},children:[r.jsx("div",{className:"flex justify-between items-center py-3 border-0 rounded-none flex-shrink-0",style:{backgroundColor:Q.color},children:r.jsxs("div",{className:"flex items-center gap-2 w-full justify-center",children:[r.jsx(xn,{to:`/employees/${I.employee_id}`,className:"no-underline",style:{color:"inherit"},title:"  ",children:r.jsxs("h6",{className:"mb-0 font-bold text-white",children:[" - ",I.employee_name]})}),r.jsx("span",{className:"bg-white rounded-full px-2 py-1 font-bold text-[0.85em]",style:{color:Q.color},children:K})]})}),r.jsx("div",{className:"p-0 overflow-visible bg-transparent z-0 min-h-0 flex flex-col",style:{isolation:"auto"},children:r.jsx(ZG,{groupedByEmployee:[I],onAssign:y,alternatingColors:Q.alternatingColors})})]})},`employee-${I.employee_id}`)})})})}),!w&&!l&&!o&&r.jsxs("div",{className:"py-12 text-center",children:[r.jsx("div",{className:"mb-3",children:r.jsx("i",{className:"fas fa-clipboard-list fa-3x text-gray-400"})}),r.jsx("p",{className:"text-muted-foreground mb-0",children:e("common.noResults")})]}),r.jsx(TG,{style:{transformOrigin:"top left",width:"auto"},children:c?r.jsx("div",{className:"w-[300px] opacity-90",style:{transform:"rotate(5deg)"},children:r.jsx(bX,{data:c,alternatingColors:["#fff","#f1f1f1"]})}):null})]})]})},wX=()=>{const{t:e}=qt(),{showToast:n}=ir(),[t,s]=H.useState(!1),[l,i]=H.useState({username:"",email:"",password:"",display_name:"",role:"subscriber"}),{data:o=[],isLoading:d}=Zj(),{data:c}=wm(),a=xM(),u=vM(),h=d5(),f=u5();console.log("Current capabilities:",c);const m=c?.tm_manage_users||!1,b=_=>_.employee_id!==null,y=async _=>{_.preventDefault();try{await a.mutateAsync(l),i({username:"",email:"",password:"",display_name:"",role:"subscriber"}),s(!1),n({type:"success",title:e("users.createSuccess")||"   "})}catch(j){n({type:"error",title:e("users.createError")||"   ",message:j.message||"   "})}},g=async(_,j,R)=>{try{await u.mutateAsync({userId:_,capabilities:{[j]:!R}}),n({type:"success",title:e("users.capabilityUpdateSuccess")||"   "})}catch(M){n({type:"error",title:e("users.capabilityUpdateError")||"   ",message:M.message||"   "})}},w=async _=>{try{await h.mutateAsync({user_id:_}),n({type:"success",title:"   ",message:"     "})}catch(j){n({type:"error",title:"   ",message:j.message||"   "})}},x=async _=>{try{await f.mutateAsync(_),n({type:"success",title:"    ",message:"       "})}catch(j){n({type:"error",title:"    ",message:j.message||"   "})}};return m?d?r.jsxs("div",{className:"text-center p-8",children:[r.jsx("div",{className:"w-8 h-8 border-4 border-border border-t-primary rounded-full animate-spin mx-auto mb-4"}),r.jsx("p",{className:"text-black",children:e("users.loading")||"  ..."})]}):r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("h3",{className:"flex items-center gap-2 text-xl font-semibold text-foreground m-0",children:[r.jsx(fi,{size:20}),e("users.title")||" "]}),r.jsxs("button",{onClick:()=>s(!t),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-primary-foreground rounded-md transition-all duration-200",style:{background:"linear-gradient(135deg, hsl(var(--primary)) 0%, hsl(var(--primary) / 0.9) 100%)"},children:[r.jsx(nc,{size:16}),e("users.createNew")||"  "]})]}),t&&r.jsxs("div",{className:"bg-card border border-border rounded-lg p-6 mb-8",children:[r.jsx("h4",{className:"m-0 mb-6 text-foreground text-lg font-semibold",children:e("users.createFormTitle")||"  "}),r.jsxs("form",{onSubmit:y,children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"username",className:"block mb-2 text-foreground font-medium text-sm",children:e("users.username")||" "}),r.jsx("input",{type:"text",id:"username",className:"base-input",value:l.username,onChange:_=>i(j=>({...j,username:_.target.value})),required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block mb-2 text-foreground font-medium text-sm",children:e("users.email")||" "}),r.jsx("input",{type:"email",id:"email",className:"base-input",value:l.email,onChange:_=>i(j=>({...j,email:_.target.value})),required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"display_name",className:"block mb-2 text-foreground font-medium text-sm",children:e("users.displayName")||" "}),r.jsx("input",{type:"text",id:"display_name",className:"base-input",value:l.display_name,onChange:_=>i(j=>({...j,display_name:_.target.value}))})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block mb-2 text-foreground font-medium text-sm",children:e("users.password")||" "}),r.jsx("input",{type:"password",id:"password",className:"base-input",value:l.password,onChange:_=>i(j=>({...j,password:_.target.value})),required:!0})]})]}),r.jsxs("div",{className:"flex gap-3 justify-end",children:[r.jsx("button",{type:"submit",disabled:a.isPending,className:"px-6 py-3 text-sm font-medium text-primary-foreground rounded-md transition-all duration-200 disabled:opacity-60 disabled:cursor-not-allowed",style:{background:"linear-gradient(135deg, hsl(var(--primary)) 0%, hsl(var(--primary) / 0.9) 100%)"},children:a.isPending?e("users.creating")||" ...":e("users.create")||""}),r.jsx("button",{type:"button",onClick:()=>s(!1),className:"px-6 py-3 bg-background text-foreground border border-border rounded-md text-sm transition-colors duration-200 hover:bg-card",children:e("common.cancel")||""})]})]})]}),r.jsx("div",{className:"grid gap-4",children:o.map(_=>r.jsxs("div",{className:"bg-card border border-border rounded-lg p-6 grid md:grid-cols-[1fr_auto] gap-8 items-start",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"m-0 mb-1 text-foreground text-lg font-semibold",children:_.display_name||_.username}),r.jsx("p",{className:"m-0 mb-3 text-black text-sm",children:_.email}),r.jsx("div",{className:"flex gap-2 flex-wrap",children:_.roles.map(j=>r.jsx("span",{className:"px-3 py-1 bg-primary/10 rounded text-xs font-medium capitalize",style:{color:"hsl(var(--primary))"},children:j},j))})]}),r.jsxs("div",{className:"min-w-[300px]",children:[r.jsx("h5",{className:"m-0 mb-4 text-foreground text-base font-semibold",children:e("users.capabilities")||""}),r.jsx("div",{className:"flex flex-col gap-3",children:[{key:"tm_manage_users",label:e("users.capability.manageUsers")||" "},{key:"tm_delete_any_task",label:e("users.capability.deleteAnyTask")||"  "},{key:"tm_delete_any_receivable",label:e("users.capability.deleteAnyReceivable")||"  "},{key:"tm_delete_any_payment",label:e("users.capability.deleteAnyPayment")||"  "},{key:"tm_view_receivables_amounts",label:e("users.capability.viewReceivablesAmounts")||"  "},{key:"tm_view_paid_receivables",label:e("users.capability.viewPaidReceivables")||"  "},{key:"tm_view_overdue_receivables",label:e("users.capability.viewOverdueReceivables")||"  "},{key:"tm_view_all_receivables",label:e("users.capability.viewAllReceivables")||"  "}].map(j=>r.jsxs("label",{className:"flex items-center gap-3 cursor-pointer text-sm text-foreground hover:text-primary transition-colors duration-200",children:[r.jsx("input",{type:"checkbox",className:"w-4 h-4 cursor-pointer accent-primary",checked:_.capabilities[j.key]||!1,onChange:()=>g(_.id,j.key,_.capabilities[j.key]||!1),disabled:u.isPending}),r.jsx("span",{children:j.label})]},j.key))})]}),r.jsxs("div",{className:"md:col-span-2 pt-4 border-t border-border",children:[r.jsx("h5",{className:"m-0 mb-3 text-foreground text-base font-semibold",children:" "}),b(_)?r.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-destructive text-destructive-foreground rounded-md text-sm font-medium transition-all duration-200 hover:bg-destructive/90 disabled:opacity-60 disabled:cursor-not-allowed",onClick:()=>x(_.id),disabled:f.isPending,children:[r.jsx(c6,{size:16}),f.isPending?" ...":" "]}):r.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-primary-foreground rounded-md transition-all duration-200 disabled:opacity-60 disabled:cursor-not-allowed",style:{background:"linear-gradient(135deg, hsl(var(--primary)) 0%, hsl(var(--primary) / 0.9) 100%)"},onClick:()=>w(_.id),disabled:h.isPending,children:[r.jsx(ro,{size:16}),h.isPending?" ...":" "]})]})]},_.id))})]}):r.jsxs("div",{className:"text-center p-12 bg-card border border-border rounded-lg",children:[r.jsx(xD,{className:"text-black mx-auto mb-4",size:48}),r.jsx("h3",{className:"text-foreground mb-2 text-lg font-semibold",children:e("users.noPermission")||"    "}),r.jsx("p",{className:"text-black",children:e("users.contactAdmin")||"     "})]})},_X=({onSubmit:e,isLoading:n})=>{const[t,s]=H.useState(""),[l,i]=H.useState(""),[o,d]=H.useState(""),c=async a=>{if(a.preventDefault(),t.length<4){d("Password must be at least 4 characters.");return}if(t!==l){d("Passwords do not match.");return}d("");try{await e(t),s(""),i("")}catch{d("Failed to update password. Please try again.")}};return r.jsxs("form",{onSubmit:c,className:"flex items-end gap-2 mt-2",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{className:"block text-sm font-medium text-black mb-1",children:"New Password"}),r.jsx("input",{type:"password",className:"w-full px-3 py-1.5 text-sm border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent disabled:bg-muted disabled:cursor-not-allowed",value:t,onChange:a=>s(a.target.value),placeholder:"Enter new password",disabled:n})]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{className:"block text-sm font-medium text-black mb-1",children:"Confirm Password"}),r.jsx("input",{type:"password",className:`w-full px-3 py-1.5 text-sm border rounded-md focus:outline-none focus:ring-2 disabled:bg-muted disabled:cursor-not-allowed ${o?"border-red-500 focus:ring-red-500":"focus:ring-primary focus:border-transparent"}`,value:l,onChange:a=>i(a.target.value),placeholder:"Confirm new password",disabled:n}),o&&r.jsx("div",{className:"text-red-600 text-sm mt-1",children:o})]}),r.jsx(Ne,{type:"submit",size:"sm",isLoading:n,children:"Set Password"})]})},jX=()=>{const{t:e}=qt(),{showToast:n}=ir(),[t,s]=H.useState(null),l=jM(),[i,o]=H.useState({dashboard:Wd("dashboard"),tasks:Wd("tasks"),clients:Wd("clients"),receivables:Wd("receivables"),clientProfile:Wd("clientProfile")}),d={dashboard:H.useRef(null),tasks:H.useRef(null),clients:H.useRef(null),receivables:H.useRef(null),clientProfile:H.useRef(null)},c=async m=>{const b=new FormData;b.append("file",m),b.append("type","background");const y="http://localhost:80/wordpress",g=localStorage.getItem("hulool-auth-storage");if(!g)throw new Error("Authentication not found");const{state:w}=JSON.parse(g);if(!w?.token)throw new Error("Authentication token not found");const x=await fetch(`${y}/wp-json/hulool/v1/media/upload`,{method:"POST",headers:{Authorization:`Basic ${w.token}`},body:b});if(!x.ok){const j=await x.json();throw new Error(j.message||"Upload failed")}const _=await x.json();return _.source_url||_.url},a=async(m,b)=>{if(!b.type.startsWith("image/")){n({type:"error",title:e("settings.uploadError")||"  ",message:"   "});return}s(m);try{const y=await c(b),g={...i,[m]:y};o(g),nK(m,y),n({type:"success",title:e("settings.uploadSuccess")||"   "})}catch(y){console.error("Upload error:",y),n({type:"error",title:e("settings.uploadError")||"  ",message:"    "})}finally{s(null)}},u=m=>{const b={...i,[m]:""};o(b),sK(m),n({type:"success",title:e("settings.removeSuccess")||"   "})},h=[{key:"dashboard",label:e("settings.dashboardBackground")||"  "},{key:"tasks",label:e("settings.tasksBackground")||"  "},{key:"clients",label:e("settings.clientsBackground")||"  "},{key:"receivables",label:e("settings.receivablesBackground")||"  "},{key:"clientProfile",label:e("settings.clientProfileBackground")||"  "}],f=async m=>{await l.mutateAsync({new_password:m}),n({type:"success",title:"Password Updated"})};return r.jsxs("div",{className:"min-h-screen p-6",children:[r.jsx("div",{className:"mb-6",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Fh,{className:"text-primary",size:28}),r.jsx("h1",{className:"text-3xl font-bold text-black",children:e("settings.title")||""})]})}),r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"rounded-lg border bg-card p-6",children:r.jsx(wX,{})}),r.jsxs("div",{className:"rounded-lg border bg-card p-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-black mb-4 flex items-center gap-2",children:"Password Management"}),r.jsxs("div",{className:"mb-4",children:[r.jsx("h3",{className:"h5",children:"Change My Password"}),r.jsx("p",{className:"text-muted small",children:"Update your short password for logging into this application."}),r.jsx(_X,{onSubmit:f,isLoading:l.isPending})]})]}),r.jsxs("div",{className:"rounded-lg border bg-card p-6",children:[r.jsxs("h2",{className:"text-xl font-semibold text-black mb-4 flex items-center gap-2",children:[r.jsx(p_,{size:20}),e("settings.pageBackgrounds")||" "]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h.map(m=>r.jsxs("div",{className:"rounded-lg border bg-background overflow-hidden",children:[r.jsx("div",{className:"bg-primary p-3",children:r.jsx("h3",{className:"text-base font-semibold text-white",children:m.label})}),r.jsxs("div",{className:"p-4 space-y-3",children:[i[m.key]?r.jsxs("div",{className:"relative group",children:[r.jsx("img",{src:i[m.key],alt:m.label,className:"w-full h-40 object-cover rounded-md"}),r.jsx("div",{className:"absolute top-2 right-2",children:r.jsx("button",{onClick:()=>u(m.key),className:"bg-red-600 hover:bg-red-700 text-white rounded-full p-1.5 transition-colors shadow-md",title:e("settings.removeImage")||" ",children:r.jsx(ln,{size:16})})})]}):r.jsxs("div",{className:"flex flex-col items-center justify-center h-40 bg-muted rounded-md",children:[r.jsx(p_,{size:32,className:"text-black mb-2"}),r.jsx("p",{className:"text-sm text-black",children:"   "})]}),r.jsxs("div",{children:[r.jsx("input",{type:"file",ref:d[m.key],onChange:b=>{const y=b.target.files?.[0];y&&a(m.key,y)},accept:"image/*",className:"hidden"}),r.jsxs("button",{onClick:()=>d[m.key].current?.click(),disabled:t===m.key,className:"w-full bg-primary hover:bg-primary/90 disabled:bg-primary/50 text-white px-4 py-2 rounded-md transition-colors flex items-center justify-center gap-2",children:[r.jsx(km,{size:16}),t===m.key?e("settings.uploadInProgress")||" ...":e("settings.uploadImage")||" "]})]})]})]},m.key))})]})]})]})},NX=({task:e,index:n=0})=>{const{t}=qt(),s=et(g=>g.openModal),{success:l,error:i}=ir(),o=Nt(),d=Au(),c=g=>`https://wa.me/+966${g}`,a=()=>{s("taskCompletion",{task:e})},u=()=>{d.mutate({id:e.id},{onSuccess:()=>{l(t("tasks.deferSuccess"),t("tasks.deferSuccessMessage",{taskName:e.task_name||t(`type.${e.type}`)})),o.invalidateQueries({queryKey:["dashboard"]}),o.invalidateQueries({queryKey:["tasks"]}),o.invalidateQueries({queryKey:["tags"]})},onError:g=>{i(t("common.error"),g.message||t("tasks.deferError"))}})},h=()=>{s("requirements",{task:e})},f=e.tags?.some(g=>g.name===""&&g.is_system),m=n%2===0?"#f8fafc":"#ffffff",b=f?"#f87171":"#e2e8f0",y=f?"2px":"1px";return e.client?r.jsxs("div",{className:"tag-task-card",style:{backgroundColor:m,border:`${y} solid ${b}`,borderRadius:"8px",fontSize:"13px",transition:"all 0.2s ease",margin:"8px 0"},children:[r.jsx("div",{className:"task-header p-2 border-b",style:{borderColor:"#e5e7eb"},children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{className:"client-info flex-1",children:[r.jsx("h6",{className:"client-name mb-1 font-semibold",style:{fontSize:"14px",color:"#374151"},children:e.client.name}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsx("span",{style:{fontSize:"11px",color:"#6b7280"},children:e.client.phone})})]}),r.jsxs("div",{className:"client-actions flex gap-1",children:[r.jsx(xn,{to:`/clients/${e.client.id}`,className:"p-1 rounded hover:bg-blue-50 transition-colors",style:{fontSize:"10px",backgroundColor:"#f0f9ff",color:"#3b82f6",border:"1px solid #e0f2fe"},title:" ",children:r.jsx(ma,{size:12})}),e.client.phone&&r.jsx("a",{href:c(e.client.phone),target:"_blank",rel:"noopener noreferrer",className:"p-1 rounded hover:bg-green-50 transition-colors",style:{fontSize:"10px",backgroundColor:"#f0f9ff",color:"#25D366",border:"1px solid #e0f2fe"},title:"",children:r.jsx(o6,{size:12})})]})]})}),r.jsxs("div",{className:"task-body p-2 border-b",style:{borderColor:"#e5e7eb"},children:[r.jsx("h6",{className:"task-title mb-1 font-medium",style:{fontSize:"13px",color:"#374151"},children:e.task_name||t(`type.${e.type}`)}),r.jsxs("div",{className:"task-meta flex items-center gap-2 mb-1",children:[r.jsx("span",{style:{fontSize:"11px",color:"#6b7280"},children:Zr(e.start_date)}),r.jsxs("span",{style:{fontSize:"11px",color:"#6b7280"},children:[e.amount," ."]}),f&&r.jsx("span",{className:"px-2 py-0.5 rounded bg-red-600 text-white text-xs",children:""})]}),e.notes&&r.jsx("p",{className:"task-notes mb-0 p-1 rounded",style:{backgroundColor:"#f9fafb",border:"1px solid #f3f4f6",fontSize:"11px",lineHeight:"1.3",color:"#4b5563"},children:e.notes})]}),r.jsx("div",{className:"task-footer p-2",children:r.jsxs("div",{className:"flex gap-1",children:[r.jsxs("button",{onClick:a,className:"flex-1 flex items-center justify-center gap-1 rounded hover:bg-green-100 transition-colors",style:{fontSize:"11px",padding:"6px 8px",backgroundColor:"#f0fdf7",color:"#22c55e",border:"1px solid #d1fae5"},title:" ",children:[r.jsx(ha,{size:12}),r.jsx("span",{children:""})]}),r.jsxs("button",{onClick:u,className:"flex-1 flex items-center justify-center gap-1 rounded hover:bg-gray-100 transition-colors",style:{fontSize:"11px",padding:"6px 8px",backgroundColor:"#fafafa",color:"#71717a",border:"1px solid #e4e4e7"},title:" ",children:[r.jsx(ku,{size:12}),r.jsx("span",{children:""})]}),r.jsx("button",{onClick:h,className:"rounded hover:bg-yellow-100 transition-colors",style:{fontSize:"11px",padding:"6px 8px",backgroundColor:"#fffbeb",color:"#f59e0b",border:"1px solid #fde68a"},title:"",children:r.jsx(My,{size:12})})]})})]}):(console.warn("Task missing client data:",e),null)},w4=({tagCollection:e,isLoading:n=!1})=>{const{tag:t,tasks:s}=e||{},l=et(o=>o.openModal),i=()=>{t?.id&&l("taskSelection",{tagId:t.id})};return n?r.jsx("div",{children:r.jsx("div",{className:"rounded-lg border border-border bg-card shadow-sm h-full",children:r.jsx("div",{className:"flex justify-center items-center py-3",children:r.jsx("div",{className:"loading-spinner"})})})}):!t||!t.name?r.jsx("div",{children:r.jsxs("div",{className:"rounded-lg border border-border bg-card shadow-sm h-full",children:[r.jsx("div",{className:"bg-gray-500 text-white py-2 rounded-t-lg",children:r.jsx("div",{className:"flex justify-center items-center",children:r.jsx("span",{className:"text-black",children:"  "})})}),r.jsx("div",{className:"flex items-center justify-center p-4",children:r.jsx("p",{className:"text-black mb-0",children:"    "})})]})}):r.jsx("div",{children:r.jsxs("div",{className:"rounded-lg border border-border bg-card shadow-sm h-full",children:[r.jsxs("div",{className:"text-white py-2 rounded-t-lg",style:{backgroundColor:t.color},children:[r.jsxs("div",{className:"flex justify-between items-center mb-2 px-3",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(g_,{size:16,className:"mr-2",style:{color:"#fff"}}),r.jsx(xn,{to:`/tasks?tag=${t.id}`,className:"text-white no-underline",children:r.jsx("h6",{className:"mb-0 font-medium",style:{fontSize:"14px"},children:t.name})})]}),r.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-semibold",style:{backgroundColor:"rgba(255, 255, 255, 0.2)",color:"#fff"},children:s?.length||0})]}),r.jsx("div",{className:"flex justify-center",children:r.jsxs("button",{onClick:i,className:"text-white border border-white text-xs px-2 py-1 rounded hover:bg-white/20 transition-colors",style:{backgroundColor:"rgba(255, 255, 255, 0.1)"},title:"       ",children:[r.jsx(hn,{size:12,className:"inline mr-1"})," "]})})]}),r.jsx("div",{className:"p-0",style:{minHeight:"200px",maxHeight:"600px",overflowY:"auto"},children:s&&s.length>0?r.jsx("div",{className:"p-2",children:s.map((o,d)=>r.jsx(NX,{task:o,index:d},o.id))}):r.jsxs("div",{className:"empty-state py-4 text-center",children:[r.jsx("div",{className:"empty-icon mb-2",children:r.jsx(g_,{size:32,style:{color:"#9ca3af"}})}),r.jsx("p",{className:"empty-description text-black mb-0",style:{fontSize:"12px"},children:"    "})]})}),r.jsx("div",{className:"py-2 px-2 border-t border-border",children:r.jsx(xn,{to:`/tasks?tag=${t.id}`,className:"block w-full text-center py-2 rounded font-medium text-xs",style:{backgroundColor:t.color,color:"#fff"},children:"  "})})]})})},CX=({tagCollections:e,isLoading:n=!1})=>n?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[1,2,3,4].map(t=>r.jsx(w4,{tagCollection:{tag:{id:t,name:"",color:"#ccc",is_system:!1,created_at:"",updated_at:""},tasks:[]},isLoading:!0},t))}):!e||e.length===0?r.jsxs("div",{className:"text-center py-5",children:[r.jsx("div",{className:"empty-icon mb-3",children:r.jsx("i",{className:"fas fa-tags fa-4x text-gray-400"})}),r.jsx("h5",{className:"text-black mb-2 font-semibold",children:"   "}),r.jsx("p",{className:"text-black",children:"        "})]}):r.jsx("div",{className:"tag-columns-view",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:e.map(t=>r.jsx(w4,{tagCollection:t,isLoading:n},t?.tag?.id||Math.random()))})}),SX=async(e="New")=>{const{data:n}=await Xe.get("/tags/with-tasks",{params:{status:e}});if(!n.success)throw new Error(n.message||"Failed to fetch tag collections");return n.data||[]},kX=(e="New")=>or({queryKey:["tasks-by-tags",e],queryFn:()=>SX(e),staleTime:300*1e3,gcTime:600*1e3,refetchOnWindowFocus:!1,refetchOnReconnect:!1,retry:2,retryDelay:n=>Math.min(1e3*2**n,3e4)}),EX=()=>{const e=et(o=>o.openModal),{data:n=[],isLoading:t,error:s}=kX(),l=()=>e("tagManagement",{}),i=()=>e("tagForm",{});return H.useEffect(()=>{qn("tags")},[]),s?r.jsxs("div",{className:"tags-page",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold mb-1",children:""}),r.jsx("p",{className:"text-black",children:"    "})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(Ne,{onClick:i,variant:"outline-primary",className:"flex items-center",children:[r.jsx(hn,{size:16,className:"me-2"})," "]}),r.jsxs(Ne,{onClick:l,className:"flex items-center",children:[r.jsx(Fh,{size:16,className:"me-2"})," "]})]})]}),r.jsx("div",{className:"text-center py-5",children:r.jsxs("div",{className:"rounded-lg border border-red-500 bg-red-500/10 p-4",role:"alert",children:[r.jsx("h5",{className:"text-lg font-bold text-black mb-2",children:"   "}),r.jsx("p",{className:"mb-0 text-black",children:"     .     ."}),r.jsx("hr",{className:"my-2 border-red-300"}),r.jsx("small",{className:"text-black",children:s instanceof Error?s.message:"Unknown error"})]})})]}):r.jsxs("div",{className:"tags-page",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold mb-1",children:""}),r.jsx("p",{className:"text-black",children:"    "})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(Ne,{onClick:i,variant:"outline-primary",className:"flex items-center",children:[r.jsx(hn,{size:16,className:"me-2"})," "]}),r.jsxs(Ne,{onClick:l,className:"flex items-center",children:[r.jsx(Fh,{size:16,className:"me-2"})," "]})]})]}),r.jsx(CX,{tagCollections:n,isLoading:t})]})},RX=()=>{const e=kn(),{success:n,error:t}=ir(),[s,l]=H.useState(""),[i,o]=H.useState(!1),{data:d=[],isLoading:c,refetch:a}=Zj(),{data:u}=wm(),h=d5(),f=u5(),m=u?.tm_manage_users||u?.manage_options||!1,b=d.filter(x=>{if(!s)return!0;const _=s.toLowerCase();return x.display_name?.toLowerCase().includes(_)||x.email?.toLowerCase().includes(_)||x.username?.toLowerCase().includes(_)}),y=x=>x.employee_id!==null,g=async x=>{if(!m){t("You do not have permission to manage employees");return}o(!0);try{y(x)?(await f.mutateAsync(x.id),n(`${x.display_name} has been removed as an employee`)):(await h.mutateAsync({user_id:x.id,commission_rate:20}),n(`${x.display_name} has been added as an employee`)),await a()}catch(_){t(_.message||"Failed to update employee status")}finally{o(!1)}},w=x=>{y(x)&&e(`/employees/${x.employee_id}`)};return c?r.jsx("div",{className:"p-4 text-center",children:"Loading users..."}):m?r.jsxs("div",{className:"p-6",children:[r.jsx("header",{className:"flex justify-between items-center mb-6",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(fi,{className:"text-primary",size:24}),r.jsx("h1",{className:"text-2xl font-bold text-black",children:" "})]})}),r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("div",{className:"w-full md:w-1/2",children:r.jsx("input",{type:"text",className:"w-full px-3 py-2 text-sm border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"  ...",value:s,onChange:x=>l(x.target.value)})}),r.jsxs("small",{className:"text-black",children:[b.filter(y).length,"   ",b.length," "]})]}),r.jsx("div",{className:"rounded-lg border bg-card overflow-hidden",children:r.jsxs("div",{className:"overflow-x-auto",children:[r.jsxs(Zs,{children:[r.jsx(Fs,{children:r.jsxs($r,{children:[r.jsx(St,{className:"text-black",children:""}),r.jsx(St,{className:"text-black",children:""}),r.jsx(St,{className:"text-black",children:""}),r.jsx(St,{className:"text-center text-black",children:" "}),r.jsx(St,{className:"text-center text-black",children:" "}),r.jsx(St,{className:"text-right text-black",children:""})]})}),r.jsx(Js,{children:b.map(x=>r.jsxs($r,{children:[r.jsx(yt,{children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-primary text-white rounded-full flex items-center justify-center",children:r.jsx(fi,{size:16})})}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-black",children:x.display_name}),r.jsxs("small",{className:"text-black",children:["@",x.username]})]})]})}),r.jsx(yt,{children:r.jsx("span",{className:"text-black",children:x.email})}),r.jsx(yt,{children:r.jsx("span",{className:"px-2.5 py-1 rounded-full bg-gray-500 text-white text-xs",children:x.roles?.[0]||"subscriber"})}),r.jsx(yt,{className:"text-center",children:y(x)?r.jsxs("span",{className:"px-2.5 py-1 rounded-full bg-green-600 text-white text-xs inline-flex items-center gap-1",children:[r.jsx(ro,{size:12}),"Employee"]}):r.jsx("span",{className:"px-2.5 py-1 rounded-full bg-gray-200 text-black text-xs",children:"User"})}),r.jsx(yt,{className:"text-center",children:y(x)?r.jsxs("span",{className:"text-black",children:[x.commission_rate||20,"%"]}):r.jsx("span",{className:"text-black",children:""})}),r.jsx(yt,{className:"text-right",children:r.jsxs("div",{className:"inline-flex gap-2",children:[y(x)&&r.jsx(Ne,{variant:"outline-primary",size:"sm",onClick:()=>w(x),title:"View Employee Profile",children:r.jsx(Su,{size:14})}),r.jsx(Ne,{variant:y(x)?"outline-danger":"outline-success",size:"sm",isLoading:i,onClick:()=>g(x),title:y(x)?"Remove Employee Status":"Make Employee",children:y(x)?r.jsxs(r.Fragment,{children:[r.jsx(c6,{size:14,className:"mr-1"}),"Remove"]}):r.jsxs(r.Fragment,{children:[r.jsx(nc,{size:14,className:"mr-1"}),"Add"]})})]})})]},x.id))})]}),b.length===0&&r.jsx("div",{className:"p-4 text-center text-black",children:s?"No users found matching your search.":"No users available."})]})})]}):r.jsxs("div",{className:"rounded-lg border border-yellow-500 bg-yellow-500/10 p-6 text-center",children:[r.jsx("h4",{className:"text-lg font-semibold text-black mb-2",children:"Access Denied"}),r.jsx("p",{className:"text-black",children:"You don't have permission to manage employees."})]})},TX=({employeeId:e,page:n,perPage:t,onPageChange:s})=>{const{success:l,error:i}=ir(),{openModal:o}=et(),[d,c]=H.useState("confirmed"),{data:a}=c5(e),{data:u,isLoading:h,refetch:f}=RF(e,{page:n,per_page:t}),m=TF(),b=u?.data?.confirmed_transactions||[],y=u?.data?.pending_commissions||[],g=u?.pagination||{},w=u?.data?.summary||{},x=M=>{("related_object_id"in M?M.related_object_id:M.related_task_id)?o("editTaskExpense",{task:{},transaction:M}):a&&o("editEmployeePayout",{employee:{...a,id:e},transaction:M})},_=async M=>{if("related_object_id"in M?M.related_object_id:M.related_task_id){i("Cannot delete commission transactions. These are managed through task approval.");return}if(confirm("Are you sure you want to delete this payout transaction? This action cannot be undone.")){if(!a){i("Employee data not loaded");return}try{await m.mutateAsync({employeeTableId:e,employeeUserId:a.user_id,transactionId:parseInt(M.id,10)}),l("Transaction deleted successfully"),await f()}catch(F){i(F.message||"Failed to delete transaction")}}},j=M=>parseFloat(M.debit||"0")>0?r.jsx(zh,{size:16,className:"text-success"}):r.jsx(Lh,{size:16,className:"text-danger"}),R=M=>{const F={EMPLOYEE_COMMISSION:{label:"",className:"bg-green-100 text-green-800"},EMPLOYEE_PAYOUT:{label:"",className:"bg-red-100 text-red-800"},EMPLOYEE_EXPENSE:{label:"",className:"bg-orange-100 text-orange-800"},EMPLOYEE_BORROW:{label:"",className:"bg-blue-100 text-blue-800"}}[M]||{label:M,className:"bg-gray-100 text-gray-800"};return r.jsx("span",{className:`inline-flex items-center px-2 py-0.5 text-xs font-medium rounded ${F.className}`,children:F.label})};return h?r.jsx("div",{className:"p-4 text-center",children:"Loading transactions..."}):r.jsxs("div",{children:[r.jsxs("div",{className:"flex border-b mb-4",children:[r.jsx("button",{className:`px-4 py-2 font-medium text-sm border-b-2 transition-colors ${d==="confirmed"?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>c("confirmed"),children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(es,{size:16}),r.jsx("span",{children:" "}),r.jsx("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-0.5 rounded-full",children:b.length})]})}),r.jsx("button",{className:`px-4 py-2 font-medium text-sm border-b-2 transition-colors ${d==="pending"?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>c("pending"),children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ms,{size:16}),r.jsx("span",{children:" "}),y.length>0&&r.jsx("span",{className:"bg-amber-100 text-amber-800 text-xs px-2 py-0.5 rounded-full",children:y.length})]})})]}),d==="confirmed"&&r.jsxs("div",{className:"overflow-x-auto",children:[r.jsxs(Zs,{children:[r.jsx(Fs,{children:r.jsxs($r,{children:[r.jsx(St,{className:"text-black",children:""}),r.jsx(St,{className:"text-black",children:""}),r.jsx(St,{className:"text-black",children:""}),r.jsx(St,{className:"text-black",children:"/"}),r.jsx(St,{className:"text-right text-black",children:""}),r.jsx(St,{className:"text-right text-black",children:""}),r.jsx(St,{className:"text-right text-black",children:""})]})}),r.jsx(Js,{children:b.map(M=>{const I=parseFloat(M.debit||"0"),F=parseFloat(M.credit||"0"),B=I>0?I:F,U=I>0;return r.jsxs($r,{children:[r.jsx(yt,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[j(M),r.jsx("div",{className:"font-medium text-black",children:Uz(M.transaction_date)})]})}),r.jsx(yt,{children:r.jsx("div",{className:"font-medium text-black",children:M.description})}),r.jsx(yt,{children:R(M.transaction_type)}),r.jsx(yt,{children:M.task_name?r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-black",children:M.task_name}),M.client_name&&r.jsx("small",{className:"text-gray-500",children:M.client_name})]}):r.jsx("span",{className:"text-gray-400",children:""})}),r.jsx(yt,{className:"text-right",children:r.jsxs("div",{className:`font-medium ${U?"text-green-600":"text-red-600"}`,children:[U?"+":"-",us(B)," ",r.jsx("span",{className:"text-xs",children:"."})]})}),r.jsx(yt,{className:"text-right",children:r.jsx("span",{className:"text-black",children:M.balance?us(parseFloat(M.balance)):""})}),r.jsx(yt,{className:"text-right",children:!M.related_object_id&&r.jsxs("div",{className:"inline-flex gap-2",children:[r.jsx(Ne,{variant:"outline-primary",size:"sm",onClick:()=>x(M),title:"Edit",children:r.jsx(Sm,{size:12})}),r.jsx(Ne,{variant:"outline-danger",size:"sm",onClick:()=>_(M),title:"Delete",isLoading:m.isPending,children:r.jsx(Is,{size:12})})]})})]},M.id)})})]}),b.length===0&&r.jsxs("div",{className:"p-8 text-center text-gray-500",children:[r.jsx(es,{size:48,className:"mx-auto mb-4 text-gray-300"}),r.jsx("p",{children:"     "})]})]}),d==="pending"&&r.jsxs("div",{className:"overflow-x-auto",children:[r.jsxs(Zs,{children:[r.jsx(Fs,{children:r.jsxs($r,{children:[r.jsx(St,{className:"text-black",children:""}),r.jsx(St,{className:"text-black",children:""}),r.jsx(St,{className:"text-right text-black",children:" "}),r.jsx(St,{className:"text-black",children:" "}),r.jsx(St,{className:"text-black",children:" "}),r.jsx(St,{className:"text-black",children:" "})]})}),r.jsx(Js,{children:y.map(M=>{const I=M.invoice_payment_progress||0,F=M.invoice_status||"unknown";return r.jsxs($r,{children:[r.jsx(yt,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ms,{size:16,className:"text-amber-500"}),r.jsx("div",{className:"font-medium text-black",children:M.task_name||` #${M.task_id}`})]})}),r.jsx(yt,{children:r.jsx("span",{className:"text-black",children:M.client_name||""})}),r.jsx(yt,{className:"text-right",children:r.jsxs("div",{className:"font-medium text-amber-600",children:[us(parseFloat(M.expected_amount))," ",r.jsx("span",{className:"text-xs",children:"."})]})}),r.jsx(yt,{children:r.jsx("span",{className:`inline-flex items-center px-2 py-0.5 text-xs font-medium rounded ${F==="paid"?"bg-green-100 text-green-800":F==="partially_paid"?"bg-blue-100 text-blue-800":F==="pending"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:F==="paid"?"":F==="partially_paid"?" ":F==="pending"?" ":F})}),r.jsx(yt,{children:r.jsx("div",{className:"w-24",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:`h-2 rounded-full ${I>=100?"bg-green-500":I>50?"bg-blue-500":I>0?"bg-yellow-500":"bg-gray-300"}`,style:{width:`${Math.min(I,100)}%`}})}),r.jsxs("span",{className:"text-xs text-gray-500",children:[I.toFixed(0),"%"]})]})})}),r.jsx(yt,{children:r.jsxs("span",{className:`text-sm ${(M.days_pending||0)>30?"text-red-600 font-medium":(M.days_pending||0)>14?"text-orange-600":"text-gray-600"}`,children:[M.days_pending||0," "]})})]},M.id)})})]}),y.length===0&&r.jsxs("div",{className:"p-8 text-center text-gray-500",children:[r.jsx(ms,{size:48,className:"mx-auto mb-4 text-gray-300"}),r.jsx("p",{children:"   "}),r.jsx("p",{className:"text-sm mt-1",children:"      "})]}),y.length>0&&r.jsx("div",{className:"p-4 bg-amber-50 border-t border-amber-200",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("span",{className:"text-amber-800 font-medium",children:["  : ",y.length," "]}),r.jsxs("span",{className:"text-amber-800 font-bold",children:[us(w.total_pending||0)," ."]})]})})]}),g.total>t&&d==="confirmed"&&r.jsxs("div",{className:"p-4 flex justify-between items-center border-t",children:[r.jsxs("div",{className:"text-black text-sm",children:["Showing ",(n-1)*t+1," to ",Math.min(n*t,g.total)," of ",g.total," transactions"]}),r.jsxs("div",{className:"inline-flex gap-2",children:[r.jsx(Ne,{variant:"outline-secondary",size:"sm",disabled:n<=1,onClick:()=>s(n-1),children:"Previous"}),r.jsx(Ne,{variant:"outline-secondary",size:"sm",disabled:n>=Math.ceil(g.total/t),onClick:()=>s(n+1),children:"Next"})]})]})]})},AX=({employeeId:e,page:n,perPage:t,onPageChange:s})=>{const{openModal:l}=et(),{data:i,isLoading:o}=MF(e,{page:n,per_page:t}),d=i?.data?.tasks||[],c=i?.data?.pagination||{},a=y=>{l("taskForm",{taskToEdit:y})},u=y=>{l("taskCompletion",{task:y})},h=y=>{l("amountDetails",{task:y})},f=y=>{confirm(`Are you sure you want to delete the task "${y.task_name}"?`)&&console.log("Delete task:",y)},m=y=>{l("requirements",{task:y})},b=y=>{l("assignTask",{task:y})};return o?r.jsx("div",{className:"p-4 text-center",children:"Loading tasks..."}):r.jsxs("div",{children:[r.jsx(gx,{tasks:d,isLoading:o,onEdit:a,onComplete:u,onViewAmountDetails:h,onDelete:f,onShowRequirements:m,onAssign:b}),c.total>t&&r.jsxs("div",{className:"p-4 flex justify-between items-center border-t",children:[r.jsxs("div",{className:"text-black text-sm",children:["Showing ",(n-1)*t+1," to ",Math.min(n*t,c.total)," of ",c.total," tasks"]}),r.jsxs("div",{className:"inline-flex gap-2",children:[r.jsx("button",{className:"px-3 py-1.5 text-sm border rounded-md hover:bg-muted disabled:opacity-50 disabled:cursor-not-allowed transition-colors",disabled:n<=1,onClick:()=>s(n-1),children:"Previous"}),r.jsx("button",{className:"px-3 py-1.5 text-sm border rounded-md hover:bg-muted disabled:opacity-50 disabled:cursor-not-allowed transition-colors",disabled:n>=Math.ceil(c.total/t),onClick:()=>s(n+1),children:"Next"})]})]})]})},rk=De.memo(({rowData:e,focus:n})=>r.jsx("div",{style:{fontWeight:700,fontSize:n?"1.05em":"1em"},children:r.jsx(xn,{to:`/clients/${e.id}`,className:"no-underline text-black font-bold hover:text-primary transition-colors",onClick:t=>t.stopPropagation(),children:e.name})}));rk.displayName="ClientNameCell";const nk=De.memo(({rowData:e})=>{const n=s=>{const l=s.replace(/\D/g,"");return l.startsWith("966")?l:l.startsWith("0")?`966${l.substring(1)}`:`966${l}`},t=s=>{s.stopPropagation();const l=n(e.phone);window.open(`https://wa.me/${l}`,"_blank")};return r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx("span",{style:{color:"#000000"},children:e.phone}),r.jsx("button",{onClick:t,title:"  ",style:{padding:"4px",borderRadius:"4px",border:"none",backgroundColor:"transparent",cursor:"pointer",display:"flex",alignItems:"center"},onMouseEnter:s=>s.currentTarget.style.backgroundColor="#dcfce7",onMouseLeave:s=>s.currentTarget.style.backgroundColor="transparent",children:r.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"#25D366",children:r.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})})})]})});nk.displayName="PhoneCell";const sk=De.memo(({rowData:e})=>{const n=t=>{if(!t)return"#6b7280";const s=["#3b82f6","#22c55e","#0ea5e9","#eab308","#ef4444","#8b5cf6"],l=t.split("").reduce((i,o)=>(i=(i<<5)-i+o.charCodeAt(0),i&i),0);return s[Math.abs(l)%s.length]};return e.region_name?r.jsx("span",{style:{backgroundColor:n(e.region_name),color:"#ffffff",padding:"4px 10px",borderRadius:"9999px",fontSize:"0.75rem"},children:e.region_name}):r.jsx("span",{style:{color:"#000000"},children:""})});sk.displayName="RegionCell";const ak=De.memo(({rowData:e})=>{const n=e.notes,t=n?n.length>50?`${n.substring(0,50)}...`:n:"";return r.jsx("span",{style:{color:"#000000",fontSize:"0.875rem"},children:t})});ak.displayName="NotesCell";const ik=De.memo(({rowData:e})=>{const n=Number(e.total_debit||e.total_receivables||0);return r.jsx("div",{style:{textAlign:"center",fontWeight:600,color:"#000000"},children:n.toFixed(2)})});ik.displayName="DebitCell";const ok=De.memo(({rowData:e})=>{const n=Number(e.total_credit||e.total_paid||0);return r.jsx("div",{style:{textAlign:"center",fontWeight:600,color:"#16a34a"},children:n.toFixed(2)})});ok.displayName="CreditCell";const lk=De.memo(({rowData:e})=>{const n=Number(e.total_outstanding||0),t=n>0?"#dc2626":"#000000";return r.jsx("div",{style:{textAlign:"center",fontWeight:600,color:t},children:n.toFixed(2)})});lk.displayName="OutstandingCell";const ck=De.memo(({rowData:e,rowIndex:n,columnData:t})=>{const{onEdit:s,onAddTask:l,onAddInvoice:i}=t||{};if(!t)return null;const o=[J8(i),Z8(l),px(s),{type:"googleDrive",onClick:()=>{e.google_drive_link&&window.open(e.google_drive_link,"_blank")},hidden:!e.google_drive_link,title:" "}];return r.jsx("div",{style:{display:"flex",justifyContent:"flex-start",alignItems:"center",height:"100%"},children:r.jsx(mx,{item:e,index:n,actions:o,compact:!0})})});ck.displayName="ActionsCell";const MX=({employeeId:e,page:n,perPage:t})=>{const{openModal:s}=et(),{data:l,isLoading:i}=OF(e,{page:n,per_page:t}),o=l?.data?.clients||[],d=m=>({id:m.id,name:m.name,phone:m.phone,region_id:m.region_id,region_name:m.region_name,google_drive_link:m.google_drive_link,notes:m.notes,created_at:m.created_at,updated_at:m.updated_at,total_outstanding:m.total_outstanding,tasks_count:{}}),c=m=>{s("clientForm",{clientToEdit:d(m)})},a=m=>{s("taskForm",{client:d(m)})},u=m=>{const b=d(m);s("invoiceForm",{client_id:b.id,client:b})},h=H.useMemo(()=>[{id:"name",key:"name",title:"",type:"custom",component:rk,grow:1},{id:"phone",key:"phone",title:"",type:"custom",component:nk,grow:1},{id:"region",key:"region_name",title:"",type:"custom",component:sk,grow:0},{id:"notes",key:"notes",title:"",type:"custom",component:ak,grow:2},{id:"debit",key:"total_debit",title:"",type:"custom",component:ik,grow:0},{id:"credit",key:"total_credit",title:"",type:"custom",component:ok,grow:0},{id:"outstanding",key:"total_outstanding",title:"",type:"custom",component:lk,grow:0},{id:"actions",key:"id",title:"",type:"custom",component:ck,width:160,grow:0}],[]),f=H.useMemo(()=>h.map(m=>m.id==="actions"?{...m,columnData:{onEdit:c,onAddTask:a,onAddInvoice:u}}:m),[h]);return o.length===0&&!i?r.jsx("div",{className:"p-4 text-center text-black",children:"    ."}):r.jsx(co,{data:o,columns:f,isLoading:i,emptyMessage:"    ",showId:!1})},OX=({employeeId:e,page:n,perPage:t})=>{const s=kn(),{openModal:l}=et(),{sentinelRef:i,isSticky:o}=op(),{data:d,isLoading:c}=DF(e,{page:n,per_page:t}),{data:a,isLoading:u}=PF(e),h=d?.data?.clients||[],f=j=>{l("selectReceivableForPayment",{clientId:j,receivables:[]})},m=j=>{s(`/clients/${j}?mode=receivables`)},b=j=>{const R=bx(j);window.open(`https://wa.me/${R}`,"_blank")},y=(j,R,M)=>{const I=g(M);ip(j,R,I)},g=j=>{const R=Number(j)||0;return new Intl.NumberFormat("en-US",{style:"currency",currency:"SAR",minimumFractionDigits:2}).format(R)};if(c)return r.jsx("div",{className:"flex justify-center items-center",style:{minHeight:"200px"},children:r.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin",role:"status",children:r.jsx("span",{className:"sr-only",children:" ..."})})});const w=h.filter(j=>(Number(j.total_outstanding)||0)>0);if(!h||h.length===0||w.length===0)return r.jsx("div",{className:"text-center py-5",children:r.jsx("p",{className:"text-black",children:"      "})});const x=a?.data?{totalAmount:a.data.total_amount,paidAmount:a.data.total_paid,remainingAmount:a.data.total_unpaid}:{totalAmount:0,paidAmount:0,remainingAmount:0},_=[...w].sort((j,R)=>parseInt(R.id)-parseInt(j.id));return r.jsxs("div",{className:"overflow-x-auto",dir:"rtl",children:[r.jsx("div",{ref:i}),r.jsxs(Zs,{children:[r.jsx(Fs,{className:o?"sticky top-0 z-10":"",style:{backgroundColor:"var(--color-primary)"},children:r.jsxs($r,{children:[r.jsx(St,{className:"text-right text-white font-bold",style:{width:"18%",padding:"12px 8px"},children:""}),r.jsx(St,{className:"text-center text-white font-bold",style:{width:"12%",padding:"12px 8px"},children:" "}),r.jsx(St,{className:"text-center text-white font-bold",style:{width:"20%",padding:"12px 8px"},children:" "}),r.jsx(St,{className:"text-center text-white font-bold",style:{width:"20%",padding:"12px 8px"},children:" "}),r.jsx(St,{className:"text-center text-white font-bold",style:{width:"20%",padding:"12px 8px"},children:" "}),r.jsx(St,{className:"text-center text-white font-bold",style:{width:"15%",padding:"12px 8px"},children:""})]})}),r.jsx(Js,{children:_.map(j=>r.jsxs($r,{children:[r.jsx(yt,{className:"text-right",style:{padding:"12px 8px"},children:r.jsx("div",{className:"font-bold text-primary cursor-pointer hover:underline",onClick:()=>m(parseInt(j.id)),style:{cursor:"pointer"},children:j.name})}),r.jsx(yt,{className:"text-center",style:{padding:"12px 8px"},children:r.jsxs("div",{className:"text-sm flex items-center justify-center gap-1",children:[r.jsx("button",{className:"text-green-600 hover:text-green-700 transition-colors p-0 border-0 bg-transparent",onClick:()=>b(j.phone),title:"WhatsApp",style:{fontSize:"12px"},children:r.jsx(el,{size:12})}),r.jsx("span",{className:"text-black",children:j.phone})]})}),r.jsx(yt,{className:"text-center font-bold text-black",style:{padding:"12px 8px"},children:g(Number(j.total_receivables)||0)}),r.jsx(yt,{className:"text-center font-bold text-green-600",style:{padding:"12px 8px"},children:g(Number(j.total_paid)||0)}),r.jsx(yt,{className:"text-center font-bold text-red-600",style:{padding:"12px 8px"},children:g(Math.max(0,Number(j.total_outstanding)||0))}),r.jsx(yt,{className:"text-center",style:{padding:"12px 8px"},children:r.jsxs("div",{className:"flex gap-2 justify-center",children:[r.jsx(Ne,{variant:"outline-primary",size:"sm",onClick:()=>l("clientReceivablesEdit",{clientId:parseInt(j.id)}),title:" ",children:r.jsx(ui,{size:14})}),r.jsx(Ne,{variant:"outline-success",size:"sm",onClick:()=>y(j.phone,j.name,Number(j.total_outstanding)),disabled:Number(j.total_outstanding)<=0,title:"    ",children:r.jsx(el,{size:14})}),r.jsxs(Ne,{variant:"primary",size:"sm",onClick:()=>f(parseInt(j.id)),disabled:Number(j.total_outstanding)<=0,children:[r.jsx(gs,{size:14,className:"mr-1"}),""]})]})})]},j.id))}),r.jsx(TN,{style:{backgroundColor:"var(--color-primary)"},children:r.jsxs($r,{children:[r.jsx(yt,{className:"text-start text-white font-bold",style:{padding:"12px 8px"},children:""}),r.jsx(yt,{className:"text-start text-white",style:{padding:"12px 8px"}}),r.jsx(yt,{className:"text-center text-white font-bold",style:{padding:"12px 8px"},children:u?r.jsx("div",{className:"inline-block w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin",role:"status",children:r.jsx("span",{className:"sr-only",children:" ..."})}):g(x.totalAmount)}),r.jsx(yt,{className:"text-center text-white font-bold",style:{padding:"12px 8px"},children:u?r.jsx("div",{className:"inline-block w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin",role:"status",children:r.jsx("span",{className:"sr-only",children:" ..."})}):g(x.paidAmount)}),r.jsx(yt,{className:"text-center text-white font-bold",style:{padding:"12px 8px"},children:u?r.jsx("div",{className:"inline-block w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin",role:"status",children:r.jsx("span",{className:"sr-only",children:" ..."})}):g(x.remainingAmount)}),r.jsx(yt,{className:"text-white",style:{padding:"12px 8px"}})]})})]})]})},DX=({employeeId:e})=>{const{data:n=[],isLoading:t,error:s}=WG(e),[l,i]=H.useState({}),o=["#e3f2fd","#bbdefb","#fff8e1","#ffecb3","#e8f5e8","#c8e6c9","#f8f9fa","#e9ecef"],d=H.useCallback((c,a)=>{i(u=>u[c]===a?u:{...u,[c]:a})},[]);return t?r.jsx("div",{className:"p-4 text-center",children:r.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary mx-auto"})}):s?r.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",role:"alert",children:["Error loading clients: ",s.message]}):!n||n.length===0?r.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"     "}):r.jsx("div",{className:"flex flex-col gap-3 p-3",children:n.map((c,a)=>r.jsx(Lx,{dynamicWidth:l[c.client.id],children:r.jsx(yX,{data:c,index:a,alternatingColors:o,onWidthCalculated:u=>d(c.client.id,u)})},c.client.id))})},PX=({employeeId:e})=>{const{t:n}=qt(),t=Au(),s=Fm(),l=Lm(),i=Fx(),o=Nt(),{success:d,error:c}=ir(),{openDrawer:a}=al(),{openModal:u}=et(),{sentinelRef:h,isSticky:f}=op(),[m,b]=H.useState(1),[y,g]=H.useState([]),[w,x]=H.useState(""),[_,j]=H.useState(""),[R,M]=H.useState(""),[I,F]=H.useState([]),[B,U]=H.useState(""),[Q,K]=H.useState(""),[T,P]=H.useState(""),[A,N]=H.useState(!1),k={page:m,per_page:20,...y.length>0&&{status:y.join(",")},...w&&{type:w},..._&&{date_from:_},...R&&{date_to:R}},{data:S,isLoading:E}=QG(e,k),O=S?.tasks||[],L=S?.pagination?.total||0,z=Math.ceil(L/20),G=le=>{F(te=>te.includes(le)?te.filter(ie=>ie!==le):[...te,le])},Z=le=>{U(le)},ee=le=>{K(le.target.value)},W=le=>{P(le.target.value)},J=()=>{F([...y]),U(w),K(_),P(R),N(!0)},$=()=>{g([...I]),x(B),j(Q),M(T),b(1),N(!1)},q=()=>{F([]),U(""),K(""),P(""),g([]),x(""),j(""),M(""),b(1),N(!1)},Y=le=>{t.mutate({id:le.id},{onSuccess:()=>{d(n("tasks.deferSuccess"),n("tasks.deferSuccessMessage",{taskName:le.task_name||n(`type.${le.type}`)}))},onError:te=>{c(n("common.error"),te.message||n("tasks.deferError"))}})},se=le=>{s.mutate({id:le.id},{onSuccess:()=>{d(n("tasks.resumeSuccess"),n("tasks.resumeSuccessMessage",{taskName:le.task_name||n(`type.${le.type}`)}))},onError:te=>{c(n("common.error"),te.message||n("tasks.resumeError"))}})},oe=le=>{l.mutate({id:le.id},{onSuccess:()=>{d(" ",`   "${le.task_name||n(`type.${le.type}`)}"   `)},onError:te=>{c(n("common.error"),te.message||"    ")}})},ae=le=>{i.mutate(le.id,{onSuccess:async te=>{d(" ",`   "${le.task_name||""}"  `),await o.invalidateQueries({queryKey:["tasks"]}),await o.invalidateQueries({queryKey:["dashboard"]}),await new Promise(ue=>setTimeout(ue,100));const ie={...le,status:"Pending Review",id:te?.data?.id||le.id};u("approval",{task:ie})},onError:te=>{c("",te.message||"     ")}})},ce=le=>{u("approval",{task:le})},we=le=>{switch(le){case"Government":return"bg-blue-50/50 hover:bg-blue-100/50";case"RealEstate":return"bg-green-50/50 hover:bg-green-100/50";case"Accounting":return"bg-yellow-50/50 hover:bg-yellow-100/50";default:return"bg-gray-50/50 hover:bg-gray-100/50"}},fe=le=>{const te=le.replace(/\D/g,"");return`https://wa.me/${te.startsWith("0")?`966${te.substring(1)}`:`966${te}`}`};if(E)return r.jsxs("div",{className:"p-4 text-center",children:[r.jsx("div",{className:"w-10 h-10 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto"}),r.jsx("span",{className:"text-black mt-2 block",children:"  ..."})]});let re=[...O].sort((le,te)=>{const ie=le.tags?.some(ke=>ke.name==="")||!1,ue=te.tags?.some(ke=>ke.name==="")||!1,_e=new Date(le.created_at||le.start_date).getTime(),je=new Date(te.created_at||te.start_date).getTime();return ie&&ue||!ie&&!ue?je-_e:ie?-1:1});re=re.sort((le,te)=>{const ie=["New","Pending Review","Deferred","Completed","Cancelled"];return ie.indexOf(le.status)-ie.indexOf(te.status)});const ge=y.length+(w?1:0)+(_||R?1:0);return r.jsxs("div",{className:"w-full",children:[r.jsxs("div",{className:"p-3 bg-gray-50 border-b flex justify-between items-center",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(Ne,{variant:"outline-secondary",size:"sm",onClick:J,children:[r.jsx(Ty,{size:16,className:"ml-1"})," ",ge>0&&r.jsx(Er,{className:"bg-primary text-white mr-2",children:ge})]}),ge>0&&r.jsx(Ne,{variant:"outline-danger",size:"sm",onClick:q,children:" "})]}),r.jsxs("small",{className:"text-muted-foreground",children:[" ",re.length,"   ",L," ",ge>0&&" ()"]})]}),A&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center",onClick:()=>N(!1),children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl mx-4",onClick:le=>le.stopPropagation(),children:[r.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[r.jsx("h5",{className:"font-semibold text-lg",children:" "}),r.jsx("button",{className:"p-1 hover:bg-gray-100 rounded",onClick:()=>N(!1),children:r.jsx(ln,{size:20})})]}),r.jsxs("div",{className:"p-4",children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block font-bold mb-2",children:""}),r.jsx("div",{className:"flex flex-wrap gap-2",children:["New","Pending Review","Deferred","Completed","Cancelled"].map(le=>r.jsx(H.Fragment,{children:r.jsxs("label",{className:Lt("px-3 py-1.5 rounded border cursor-pointer transition-colors",I.includes(le)?"bg-primary text-white border-primary":"bg-white border-gray-300 hover:bg-gray-50"),children:[r.jsx("input",{type:"checkbox",className:"sr-only",checked:I.includes(le),onChange:()=>G(le)}),n(`status.${le}`)]})},le))})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block font-bold mb-2",children:""}),r.jsxs("select",{value:B,onChange:le=>Z(le.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary/50",children:[r.jsx("option",{value:"",children:" "}),r.jsx("option",{value:"Government",children:""}),r.jsx("option",{value:"RealEstate",children:""}),r.jsx("option",{value:"Accounting",children:""}),r.jsx("option",{value:"Other",children:""})]})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block font-bold mb-2",children:" "}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-muted-foreground mb-1",children:" "}),r.jsx(Kt,{type:"date",value:Q,onChange:ee})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-muted-foreground mb-1",children:" "}),r.jsx(Kt,{type:"date",value:T,onChange:W})]})]})]})]}),r.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t",children:[r.jsx(Ne,{variant:"outline-secondary",onClick:()=>N(!1),children:""}),r.jsx(Ne,{variant:"outline-danger",onClick:q,children:" "}),r.jsx(Ne,{variant:"primary",onClick:$,children:" "})]})]})}),r.jsxs("div",{className:"overflow-x-auto text-lg",children:[r.jsx("div",{ref:h}),r.jsxs("table",{className:Lt("w-full text-sm",f&&"sticky-header"),children:[r.jsx("thead",{className:"bg-gray-100",children:r.jsxs("tr",{children:[r.jsxs("th",{className:"text-right text-black font-bold px-4 py-3",children:["",n("tasks.tableHeaderClient")]}),r.jsxs("th",{className:"text-right text-black font-bold px-4 py-3",children:["",n("tasks.tableHeaderClientPhone")]}),r.jsxs("th",{className:"text-right text-black font-bold px-4 py-3",children:["",n("tasks.tableHeaderService")]}),r.jsxs("th",{className:"text-right text-black font-bold px-4 py-3",children:["",n("tasks.tableHeaderType")]}),r.jsxs("th",{className:"text-right text-black font-bold px-4 py-3",children:["",n("tasks.tableHeaderNotes")]}),r.jsxs("th",{className:"text-right text-black font-bold px-4 py-3",children:["",n("tasks.tableHeaderStatus")]}),r.jsx("th",{className:"text-left text-black font-bold px-4 py-3",children:n("tasks.tableHeaderActions")})]})}),r.jsx("tbody",{children:re.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:7,className:"text-center text-muted-foreground py-8",children:"  "})}):re.map(le=>{const te=le.tags?.some(ue=>ue.name===""),ie=we(le.type);return r.jsxs("tr",{className:Lt(ie,"border-b transition-colors",te&&"border-2 border-red-500"),children:[r.jsx("td",{className:"px-4 py-3",children:r.jsx("div",{className:"flex justify-between items-center",children:r.jsx("div",{children:le.client?r.jsx(xn,{to:`/clients/${le.client.id}`,className:"font-medium text-black no-underline hover:underline",children:le.client.name}):r.jsx("span",{className:"text-muted-foreground",children:""})})})}),r.jsx("td",{className:"px-4 py-3 text-center",children:r.jsx("div",{className:"flex items-center justify-center gap-1",children:le.client?r.jsxs(r.Fragment,{children:[r.jsx("a",{href:fe(le.client.phone),target:"_blank",rel:"noopener noreferrer",className:"text-green-600",title:" ",children:r.jsx(el,{})}),r.jsx("span",{className:"text-sm text-muted-foreground",children:le.client.phone})]}):r.jsx("span",{className:"text-muted-foreground",children:""})})}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("div",{className:"font-medium text-black",children:le.task_name||n(`type.${le.type}`)})}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("span",{className:"font-medium text-black",children:n(`type.${le.type}`)})}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("div",{className:"text-sm text-black truncate max-w-[200px]",children:le.notes||""})}),r.jsx("td",{className:"px-4 py-3",children:r.jsx(Er,{variant:le.status==="New"?"default":le.status==="Deferred"?"destructive":le.status==="Pending Review"?"secondary":le.status==="Completed"?"default":"outline",className:Lt(le.status==="New"&&"bg-yellow-500 text-black hover:bg-yellow-500",le.status==="Pending Review"&&"bg-blue-400 text-black hover:bg-blue-400",le.status==="Completed"&&"bg-green-500 text-white hover:bg-green-500"),children:n(`status.${le.status}`)})}),r.jsx("td",{className:"px-4 py-3 text-left",children:r.jsxs("div",{className:"flex justify-start gap-1 flex-wrap",children:[le.client?.google_drive_link&&r.jsx(Ne,{variant:"outline-secondary",size:"sm",onClick:()=>window.open(le.client.google_drive_link,"_blank"),title:" Google Drive",children:r.jsx(Ih,{size:18})}),r.jsx(Ne,{variant:"outline-secondary",size:"sm",onClick:()=>a("taskFollowUp",{taskId:le.id,taskName:le.task_name||void 0,clientName:le.client?.name||"  "}),title:"  ",children:r.jsx(Ps,{size:18})}),le.status==="New"&&r.jsx(Ne,{variant:"primary",size:"sm",onClick:()=>ae(le),title:"  ",children:r.jsx(km,{size:18})}),le.status==="Pending Review"&&r.jsx(Ne,{variant:"outline-success",size:"sm",onClick:()=>ce(le),title:"  ",children:r.jsx(ky,{size:18})}),le.status!=="Deferred"&&le.status!=="Completed"?r.jsx(Ne,{variant:"outline-secondary",size:"sm",onClick:()=>Y(le),title:" ",children:r.jsx(ku,{size:18})}):le.status==="Deferred"?r.jsx(Ne,{variant:"outline-primary",size:"sm",onClick:()=>se(le),title:" ",children:r.jsx(Cm,{size:18})}):null,le.status==="Completed"&&r.jsx(Ne,{variant:"outline-primary",size:"sm",onClick:()=>oe(le),title:" ",children:r.jsx(Eu,{size:18})})]})})]},le.id)})})]})]}),z>1&&r.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2",children:[r.jsx(Ne,{variant:"outline-secondary",size:"sm",onClick:()=>b(le=>Math.max(1,le-1)),disabled:m===1,children:""}),r.jsxs("span",{className:"text-sm text-gray-600",children:[" ",m,"  ",z]}),r.jsx(Ne,{variant:"outline-secondary",size:"sm",onClick:()=>b(le=>Math.min(z,le+1)),disabled:m===z,children:""})]})]})},IX=({summary:e,pendingCount:n})=>{if(!e)return null;const t=e.total_paid_out??e.total_expenses??0;return r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(zh,{size:20,className:"text-green-600"}),r.jsx("span",{className:"text-sm text-green-700 font-medium",children:" "})]}),r.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[us(e.total_earned)," ",r.jsx("span",{className:"text-sm",children:"."})]})]}),r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Lh,{size:20,className:"text-red-600"}),r.jsx("span",{className:"text-sm text-red-700 font-medium",children:" "})]}),r.jsxs("p",{className:"text-2xl font-bold text-red-600",children:[us(t)," ",r.jsx("span",{className:"text-sm",children:"."})]})]}),r.jsxs("div",{className:`${e.balance_due>0?"bg-blue-50 border-blue-200":"bg-gray-50 border-gray-200"} border rounded-lg p-4`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Kn,{size:20,className:e.balance_due>0?"text-blue-600":"text-gray-600"}),r.jsx("span",{className:`text-sm font-medium ${e.balance_due>0?"text-blue-700":"text-gray-700"}`,children:" "})]}),r.jsxs("p",{className:`text-2xl font-bold ${e.balance_due>0?"text-blue-600":"text-gray-600"}`,children:[us(e.balance_due)," ",r.jsx("span",{className:"text-sm",children:"."})]})]}),r.jsxs("div",{className:`${n>0?"bg-amber-50 border-amber-200":"bg-gray-50 border-gray-200"} border rounded-lg p-4`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(ms,{size:20,className:n>0?"text-amber-600":"text-gray-600"}),r.jsx("span",{className:`text-sm font-medium ${n>0?"text-amber-700":"text-gray-700"}`,children:" "})]}),r.jsxs("p",{className:`text-2xl font-bold ${n>0?"text-amber-600":"text-gray-600"}`,children:[n," ",r.jsx("span",{className:"text-sm",children:""})]})]})]})},FX=({employee:e,onAddPayout:n,onAddBorrow:t,activeMode:s,onModeChange:l,modeOptions:i})=>r.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-6",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 bg-primary text-white rounded-full flex items-center justify-center",children:r.jsx(ma,{size:24})}),r.jsx("div",{children:r.jsx("h1",{className:"text-2xl font-bold text-black",children:e.display_name})})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("select",{className:"px-3 py-1.5 text-sm border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",style:{width:"auto"},value:s,onChange:o=>l(o.target.value),children:i.map(({key:o,label:d})=>r.jsx("option",{value:o,children:d},o))}),r.jsxs(Ne,{variant:"outline-primary",size:"sm",onClick:t,children:[r.jsx(PO,{size:16,className:"mr-1"})," "]}),r.jsxs(Ne,{variant:"primary",size:"sm",onClick:n,children:[r.jsx(Kn,{size:16,className:"mr-1"}),""]})]})]}),LX=()=>{const{id:e}=xy(),{openModal:n}=et(),[t,s]=H.useState("dashboard"),[l,i]=H.useState(1),o=20,d=parseInt(e||"0",10),{data:c,isLoading:a,error:u}=c5(d),{data:h}=LF(d,{page:1,per_page:100}),f=h?.data?.pending_commissions?.length||(h?.data?.transactions||[]).filter(w=>w.is_pending||w.direction==="CREDIT"&&(parseFloat(w.amount||"0")===0||w.transaction_name?.startsWith("Pending:"))).length,m=()=>{c&&n("employeePayout",{employee:{...c,id:d},onSuccess:()=>{window.location.reload()}})},b=()=>{c&&n("employeeBorrow",{employee:{...c,id:d},onSuccess:()=>{window.location.reload()}})},y=w=>{s(w),i(1)};if(a)return r.jsx("div",{className:"p-4 text-center",children:"Loading employee..."});if(u||!c)return r.jsxs("div",{className:"rounded-lg border border-red-500 bg-red-500/10 p-6 text-center",children:[r.jsx("h4",{className:"text-lg font-semibold text-black mb-2",children:"Employee Not Found"}),r.jsx("p",{className:"text-black",children:"The requested employee could not be found."})]});const g=[{key:"dashboard",label:" ",icon:n6},{key:"transactions",label:"",icon:PM},{key:"tasks",label:"",icon:Sn},{key:"clients",label:"",icon:fi},{key:"receivables",label:"",icon:gs}];return r.jsxs("div",{className:"p-6",children:[r.jsx(FX,{employee:c,onAddPayout:m,onAddBorrow:b,activeMode:t,onModeChange:y,modeOptions:g}),r.jsx(IX,{summary:h?.data?.summary,pendingCount:f}),t==="dashboard"&&r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-4",children:[r.jsx("div",{className:"lg:col-span-4",children:r.jsxs(Nn,{className:"shadow-sm",children:[r.jsx(ac,{className:"bg-primary text-white rounded-t-lg py-3",children:r.jsx("h6",{className:"mb-0 font-medium",children:"   "})}),r.jsx(Cn,{className:"p-0 max-h-[calc(100vh-200px)] overflow-y-auto",children:r.jsx(DX,{employeeId:d})})]})}),r.jsx("div",{className:"lg:col-span-8",children:r.jsxs(Nn,{className:"shadow-sm",children:[r.jsx(ac,{className:"bg-primary text-white rounded-t-lg py-3",children:r.jsx("h6",{className:"mb-0 font-medium",children:"  "})}),r.jsx(Cn,{className:"p-0",children:r.jsx(PX,{employeeId:d})})]})})]}),t!=="dashboard"&&r.jsxs("div",{className:"rounded-lg border bg-card overflow-hidden",children:[t==="transactions"&&r.jsx(TX,{employeeId:d,page:l,perPage:o,onPageChange:i}),t==="tasks"&&r.jsx(AX,{employeeId:d,page:l,perPage:o,onPageChange:i}),t==="clients"&&r.jsx(MX,{employeeId:d,page:l,perPage:o}),t==="receivables"&&r.jsx(OX,{employeeId:d,page:l,perPage:o})]})]})},zX=qy("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Vu=H.forwardRef(({className:e,variant:n,...t},s)=>r.jsx("div",{ref:s,role:"alert",className:Lt(zX({variant:n}),e),...t}));Vu.displayName="Alert";const bp=H.forwardRef(({className:e,...n},t)=>r.jsx("h5",{ref:t,className:Lt("mb-1 font-medium leading-none tracking-tight",e),...n}));bp.displayName="AlertTitle";const Ku=H.forwardRef(({className:e,...n},t)=>r.jsx("div",{ref:t,className:Lt("text-sm [&_p]:leading-relaxed",e),...n}));Ku.displayName="AlertDescription";const BX=()=>{const[e,n]=H.useState(""),[t,s]=H.useState(""),[l,i]=H.useState(void 0),[o,d]=H.useState(1),[c]=H.useState(50),a=ap(e,500),u=et(j=>j.openModal),{data:h,isLoading:f,error:m}=BV({type:t||void 0,search:a||void 0,page:o,per_page:c});H.useEffect(()=>{d(1)},[a,t]);const b=j=>{switch(j){case"employee":return r.jsx(fi,{size:16,className:"text-blue-500"});case"client":return r.jsx(ro,{size:16,className:"text-green-500"});case"company":return r.jsx(Cu,{size:16,className:"text-purple-500"});default:return null}},y=j=>{switch(j){case"employee":return"";case"client":return"";case"company":return"";default:return j}},g=()=>{u("manualTransaction",{preselectedAccount:l})},w=j=>{i(l?.id===j.id&&l?.type===j.type?void 0:j)},x=()=>n(""),_=[{value:"",label:""},{value:"employee",label:""},{value:"client",label:""},{value:"company",label:""}];return m?r.jsx("div",{className:"w-full p-4",children:r.jsxs(Vu,{variant:"destructive",children:[r.jsx(Mn,{className:"h-4 w-4"}),r.jsx(bp,{children:"   "}),r.jsx(Ku,{children:m instanceof Error?m.message:"    "})]})}):r.jsxs("div",{className:"w-full p-4",children:[r.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-3 mb-4",children:[r.jsx("h1",{className:"text-lg font-bold text-black",children:"  "}),r.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(fi,{size:14,className:"text-blue-500"}),r.jsx("span",{className:"text-gray-600",children:" :"}),r.jsx("span",{className:"font-bold text-blue-600",children:f?"...":new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}).format(h?.summary.total_employee_balance||0)}),r.jsx("span",{className:"text-gray-500 text-xs",children:" "})]}),r.jsx("div",{className:"w-px h-4 bg-gray-300"}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(ro,{size:14,className:"text-green-500"}),r.jsx("span",{className:"text-gray-600",children:" :"}),r.jsx("span",{className:"font-bold text-green-600",children:f?"...":new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}).format(h?.summary.total_client_balance||0)}),r.jsx("span",{className:"text-gray-500 text-xs",children:"  "})]}),r.jsx("div",{className:"w-px h-4 bg-gray-300"}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(ms,{size:14,className:"text-orange-500"}),r.jsx("span",{className:"text-gray-600",children:" :"}),r.jsx("span",{className:"font-bold text-orange-600",children:f?"...":new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}).format(h?.summary.pending_commissions||0)}),r.jsx("span",{className:"text-gray-500 text-xs",children:"  "})]})]}),r.jsxs(Ne,{onClick:g,variant:"primary",size:"sm",children:[r.jsx(hn,{size:14,className:"me-1"})," "]})]}),r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsxs("div",{className:"relative flex-1",style:{maxWidth:"300px"},children:[r.jsx(ps,{size:14,className:"absolute text-black/50",style:{left:"10px",top:"50%",transform:"translateY(-50%)"}}),r.jsx("input",{type:"text",className:"w-full px-3 py-2 text-sm border border-input rounded-md bg-background text-black focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"  ...",value:e,onChange:j=>n(j.target.value),style:{paddingLeft:"32px"}}),e&&r.jsx("button",{type:"button",className:"absolute text-black/50 p-0 hover:text-foreground",style:{right:"10px",top:"50%",transform:"translateY(-50%)"},onClick:x,children:r.jsx(ln,{size:14})})]}),r.jsx("div",{className:"inline-flex rounded-md shadow-sm",role:"group",children:_.map(j=>r.jsx(Ne,{variant:t===j.value?"primary":"outline-primary",size:"sm",onClick:()=>s(j.value),className:"first:rounded-l-none last:rounded-r-none",children:j.label},j.value))}),h&&r.jsxs("span",{className:"text-sm text-black/50",children:[" ",o,"  ",h.pagination?.pages||1," | ",h.pagination?.total||0," "]})]}),r.jsx(Nn,{children:r.jsx(Cn,{className:"p-0",children:f?r.jsx("div",{className:"flex justify-center items-center py-12",children:r.jsx(xi,{children:r.jsx("span",{className:"sr-only",children:" ..."})})}):h?.accounts.length?r.jsxs(Zs,{className:"border-collapse border border-gray-300",children:[r.jsx(Fs,{children:r.jsxs($r,{children:[r.jsx(St,{className:"text-start border border-gray-300 text-base px-3 py-2 w-[50px]"}),r.jsx(St,{className:"text-start border border-gray-300 text-base px-3 py-2",children:""}),r.jsx(St,{className:"text-start border border-gray-300 text-base px-3 py-2",children:""}),r.jsx(St,{className:"text-start border border-gray-300 text-base px-3 py-2",children:""}),r.jsx(St,{className:"text-start border border-gray-300 text-base px-3 py-2 w-[50px]"})]})}),r.jsx(Js,{children:h.accounts.map(j=>r.jsxs(r.Fragment,{children:[r.jsxs($r,{className:"cursor-pointer hover:bg-muted/80",onClick:()=>w(j),children:[r.jsx(yt,{className:"border border-gray-300 text-start text-base px-3 py-2",children:b(j.type)}),r.jsx(yt,{className:"border border-gray-300 text-start text-base px-3 py-2 font-medium",children:y(j.type)}),r.jsx(yt,{className:"border border-gray-300 text-start text-base px-3 py-2",children:r.jsxs("div",{children:[r.jsx("span",{className:"font-medium text-black",children:j.name}),j.email&&r.jsx("span",{className:"block text-xs text-black/50",children:j.email})]})}),r.jsx(yt,{className:"border border-gray-300 text-start text-base px-3 py-2",children:r.jsx("span",{className:`font-medium ${j.balance>=0?"text-green-600":"text-red-600"}`,children:new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}).format(j.balance)})}),r.jsx(yt,{className:"border border-gray-300 text-start text-base px-3 py-2",children:r.jsx(Gs,{size:16,className:`text-black/30 transition-transform ${l?.id===j.id&&l?.type===j.type?"rotate-90":""}`})})]},`${j.type}-${j.id}`),l?.id===j.id&&l?.type===j.type&&r.jsx($r,{className:"bg-muted/30",children:r.jsx(yt,{colSpan:5,className:"border border-gray-300 p-4",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("h4",{className:"font-semibold text-black",children:j.name}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-black/50",children:" :"}),r.jsx("span",{className:"font-medium mr-2",children:new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}).format(j.balance)})]}),j.pending_amount>0&&r.jsxs("div",{children:[r.jsx("span",{className:"text-black/50",children:" :"}),r.jsx("span",{className:"font-medium text-orange-600 mr-2",children:new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}).format(j.pending_amount)})]})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(Ne,{variant:"outline-primary",size:"sm",onClick:R=>{R.stopPropagation(),u("manualTransaction",{preselectedAccount:j})},children:[r.jsx(hn,{size:14,className:"me-1"})," "]}),r.jsx(Ne,{variant:"outline-primary",size:"sm",onClick:R=>{R.stopPropagation(),u("manualTransaction",{preselectedAccount:j})},children:" "}),r.jsx(Ne,{variant:"primary",size:"sm",onClick:R=>{R.stopPropagation(),j.type==="employee"?window.location.href=`/employees/${j.id}`:j.type==="client"?window.location.href=`/clients/${j.id}`:j.type==="company"&&(window.location.href=`/company/${j.id}`)},children:" "})]})]})})})]}))})]}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx(ps,{size:40,className:"text-black/20 mx-auto mb-3"}),r.jsx("p",{className:"text-black/50",children:"  "}),e&&r.jsx(Ne,{variant:"outline-primary",size:"sm",onClick:x,className:"mt-2",children:" "})]})})}),h&&h.pagination&&h.pagination.pages>1&&r.jsxs("div",{className:"flex justify-between items-center mt-4 p-4 border border-border rounded-lg bg-card",children:[r.jsxs("div",{className:"text-sm text-black/50",children:[" ",(o-1)*c+1,"  ",Math.min(o*c,h.pagination.total),"  ",h.pagination.total]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Ne,{variant:"outline-primary",size:"sm",disabled:o===1||f,onClick:()=>d(Math.max(1,o-1)),children:""}),r.jsx("div",{className:"flex items-center gap-2",children:Array.from({length:h.pagination.pages}).map((j,R)=>{const M=R+1;return r.jsx(Ne,{variant:M===o?"primary":"outline-primary",size:"sm",onClick:()=>d(M),disabled:f,className:"min-w-[40px]",children:M},M)})}),r.jsx(Ne,{variant:"outline-primary",size:"sm",disabled:o===(h.pagination?.pages||1)||f,onClick:()=>d(Math.min(h.pagination?.pages||1,o+1)),children:""})]})]})]})},qX=()=>{const[e,n]=H.useState(""),[t,s]=H.useState(""),[l,i]=H.useState("table"),o=ap(e,500),d=et(I=>I.openModal),{data:c,isLoading:a}=$V(),{data:u,isLoading:h,fetchNextPage:f,hasNextPage:m,isFetchingNextPage:b}=n$({search:o||void 0,status:t||void 0}),y=H.useMemo(()=>u?.pages.flatMap(I=>I.invoices)||[],[u]),{ref:g}=fo({threshold:1,onChange:I=>{I&&m&&!b&&f()}});H.useEffect(()=>{qn("financial-center")},[]);const w=I=>new Intl.NumberFormat("ar-SA",{minimumFractionDigits:0,maximumFractionDigits:2}).format(I),x=(I,F,B)=>{const U=F>=B,Q=F>0&&F<B;return U?r.jsx(Er,{className:"bg-green-100 text-green-700",children:""}):Q?r.jsx(Er,{className:"bg-yellow-100 text-yellow-700",children:""}):I==="cancelled"?r.jsx(Er,{className:"bg-gray-100 text-gray-700",children:""}):r.jsx(Er,{className:"bg-orange-100 text-orange-700",children:""})},_=()=>n(""),j=()=>{d("createInvoice",{})},R=H.useMemo(()=>{const I={pending:[],partial:[],paid:[],overdue:[]};return y.forEach(F=>{const B=Number(F.paid_amount)>=Number(F.amount),U=Number(F.paid_amount)>0&&Number(F.paid_amount)<Number(F.amount),Q=new Date(F.due_date)<new Date&&!B;B?I.paid.push(F):Q?I.overdue.push(F):U?I.partial.push(F):I.pending.push(F)}),I},[y]),M=[{value:"",label:""},{value:"pending",label:""},{value:"paid",label:""},{value:"cancelled",label:""}];return r.jsxs("div",{className:"w-full p-4",children:[r.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-2 mb-4 text-xs",children:[r.jsx("h1",{className:"text-lg font-bold text-black",children:" "}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(es,{size:14,className:"text-green-500"}),r.jsx("span",{className:"text-gray-600",children:":"}),r.jsx("span",{className:"font-bold text-green-600",children:a?"...":new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}).format(c?.current?.amount||0)}),r.jsxs("span",{className:"text-gray-500",children:["(",a?"-":c?.current?.count||0,")"]})]}),r.jsx("div",{className:"w-px h-4 bg-gray-300"}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(ms,{size:14,className:"text-yellow-500"}),r.jsx("span",{className:"text-gray-600",children:"30 :"}),r.jsx("span",{className:"font-bold text-yellow-600",children:a?"...":new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}).format(c?.["30_days"]?.amount||0)}),r.jsxs("span",{className:"text-gray-500",children:["(",a?"-":c?.["30_days"]?.count||0,")"]})]}),r.jsx("div",{className:"w-px h-4 bg-gray-300"}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Mn,{size:14,className:"text-orange-500"}),r.jsx("span",{className:"text-gray-600",children:"60 :"}),r.jsx("span",{className:"font-bold text-orange-600",children:a?"...":new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}).format(c?.["60_days"]?.amount||0)}),r.jsxs("span",{className:"text-gray-500",children:["(",a?"-":c?.["60_days"]?.count||0,")"]})]}),r.jsx("div",{className:"w-px h-4 bg-gray-300"}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Mn,{size:14,className:"text-red-500"}),r.jsx("span",{className:"text-gray-600",children:"+90:"}),r.jsx("span",{className:"font-bold text-red-600",children:a?"...":new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}).format(c?.["90_plus"]?.amount||0)}),r.jsxs("span",{className:"text-gray-500",children:["(",a?"-":c?.["90_plus"]?.count||0,")"]})]})]}),r.jsxs(Ne,{onClick:j,variant:"primary",size:"sm",children:[r.jsx(hn,{size:14,className:"me-1"})," "]})]}),r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsxs("div",{className:"relative flex-1",style:{maxWidth:"300px"},children:[r.jsx(ps,{size:14,className:"absolute text-black/50",style:{left:"10px",top:"50%",transform:"translateY(-50%)"}}),r.jsx("input",{type:"text",className:"w-full px-3 py-2 text-sm border border-input rounded-md bg-background text-black focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"  ...",value:e,onChange:I=>n(I.target.value),style:{paddingLeft:"32px"}}),e&&r.jsx("button",{type:"button",className:"absolute text-black/50 p-0 hover:text-foreground",style:{right:"10px",top:"50%",transform:"translateY(-50%)"},onClick:_,children:r.jsx(ln,{size:14})})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ty,{size:14,className:"text-black/50"}),r.jsx("select",{value:t,onChange:I=>s(I.target.value),className:"px-3 py-2 text-sm border border-input rounded-md bg-background",children:M.map(I=>r.jsx("option",{value:I.value,children:I.label},I.value))})]}),r.jsxs("div",{className:"inline-flex rounded-md shadow-sm border border-input",children:[r.jsx("button",{onClick:()=>i("table"),className:`p-2 ${l==="table"?"bg-primary text-white":"bg-background text-black/70"}`,title:" ",children:r.jsx(QO,{size:16})}),r.jsx("button",{onClick:()=>i("kanban"),className:`p-2 ${l==="kanban"?"bg-primary text-white":"bg-background text-black/70"}`,title:" ",children:r.jsx(VO,{size:16})})]})]}),h&&y.length===0?r.jsx("div",{className:"flex justify-center items-center py-12",children:r.jsx(xi,{children:r.jsx("span",{className:"sr-only",children:" ..."})})}):l==="table"?r.jsx(Nn,{children:r.jsx(Cn,{className:"p-0",children:y.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Sn,{size:40,className:"text-black/20 mx-auto mb-3"}),r.jsx("p",{className:"text-black/50",children:"  "})]}):r.jsxs(r.Fragment,{children:[r.jsxs(Zs,{className:"border-collapse border border-gray-300",children:[r.jsx(Fs,{children:r.jsxs($r,{children:[r.jsx(St,{className:"text-start border border-gray-300 text-base px-3 py-2",children:"#"}),r.jsx(St,{className:"text-start border border-gray-300 text-base px-3 py-2",children:""}),r.jsx(St,{className:"text-start border border-gray-300 text-base px-3 py-2",children:""}),r.jsx(St,{className:"text-start border border-gray-300 text-base px-3 py-2",children:""}),r.jsx(St,{className:"text-start border border-gray-300 text-base px-3 py-2",children:""}),r.jsx(St,{className:"text-start border border-gray-300 text-base px-3 py-2",children:" "}),r.jsx(St,{className:"text-start border border-gray-300 text-base px-3 py-2",children:""}),r.jsx(St,{className:"text-start border border-gray-300 text-base px-3 py-2",children:""})]})}),r.jsx(Js,{children:y.map(I=>r.jsxs($r,{children:[r.jsx(yt,{className:"border border-gray-300 text-start text-base px-3 py-2 font-mono",children:I.id}),r.jsx(yt,{className:"border border-gray-300 text-start text-base px-3 py-2",children:r.jsx("span",{className:"font-medium text-black",children:I.client?.name||` #${I.client_id}`})}),r.jsx(yt,{className:"border border-gray-300 text-start text-base px-3 py-2",children:r.jsx("span",{className:"text-sm text-black/70",children:I.task?.task_name||I.description||"-"})}),r.jsx(yt,{className:"border border-gray-300 text-start text-base px-3 py-2",children:r.jsx("span",{className:"font-medium",children:new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}).format(Number(I.amount))})}),r.jsx(yt,{className:"border border-gray-300 text-start text-base px-3 py-2",children:r.jsx("span",{className:Number(I.paid_amount)>=Number(I.amount)?"text-green-600 font-medium":"text-black/70",children:new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}).format(Number(I.paid_amount))})}),r.jsx(yt,{className:"border border-gray-300 text-start text-base px-3 py-2",children:r.jsx("span",{children:new Date(I.due_date).toLocaleDateString("en-CA")})}),r.jsx(yt,{className:"border border-gray-300 text-start text-base px-3 py-2",children:x(I.status,Number(I.paid_amount),Number(I.amount))}),r.jsx(yt,{className:"border border-gray-300 text-start text-base px-3 py-2",children:r.jsxs("div",{className:"flex gap-1",children:[r.jsx(Ne,{variant:"outline-primary",size:"sm",onClick:()=>d("invoiceDetails",{invoiceId:I.id}),title:"",children:r.jsx(Sn,{size:12})}),Number(I.remaining_amount||Number(I.amount)-Number(I.paid_amount))>0&&r.jsx(Ne,{variant:"outline-primary",size:"sm",onClick:()=>d("recordPayment",{invoiceId:I.id,amountDue:Number(I.remaining_amount||Number(I.amount)-Number(I.paid_amount)),clientName:I.client?.name}),title:" ",children:r.jsx(Kn,{size:12})})]})})]},I.id))})]}),r.jsx("div",{ref:g,className:"text-center p-4",children:m&&r.jsx(Ne,{onClick:()=>f(),isLoading:b,variant:"outline-primary",children:b?" ...":" "})})]})})}):r.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[r.jsxs("div",{className:"bg-muted/30 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("h3",{className:"font-semibold text-black flex items-center gap-2",children:[r.jsx(ms,{size:16,className:"text-orange-500"}),""]}),r.jsx(Er,{variant:"secondary",children:R.pending.length})]}),r.jsx("div",{className:"space-y-2",children:R.pending.slice(0,10).map(I=>r.jsx(Nn,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>d("invoiceDetails",{invoiceId:I.id}),children:r.jsxs(Cn,{className:"p-3",children:[r.jsxs("div",{className:"text-xs text-black/50 mb-1",children:["#",I.id]}),r.jsx("div",{className:"font-medium text-sm text-black mb-1 truncate",children:I.client?.name||` #${I.client_id}`}),r.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[r.jsx("span",{className:"font-bold",children:w(Number(I.amount))}),r.jsx(zr,{size:10})]})]})},I.id))})]}),r.jsxs("div",{className:"bg-muted/30 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("h3",{className:"font-semibold text-black flex items-center gap-2",children:[r.jsx(Kn,{size:16,className:"text-yellow-500"}),""]}),r.jsx(Er,{variant:"secondary",children:R.partial.length})]}),r.jsx("div",{className:"space-y-2",children:R.partial.slice(0,10).map(I=>r.jsx(Nn,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>d("invoiceDetails",{invoiceId:I.id}),children:r.jsxs(Cn,{className:"p-3",children:[r.jsxs("div",{className:"text-xs text-black/50 mb-1",children:["#",I.id]}),r.jsx("div",{className:"font-medium text-sm text-black mb-1 truncate",children:I.client?.name||` #${I.client_id}`}),r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsxs("span",{className:"text-yellow-600",children:[Math.round(Number(I.paid_amount)/Number(I.amount)*100),"%"]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("span",{children:w(Number(I.amount))}),r.jsx(zr,{size:10})]})]})]})},I.id))})]}),r.jsxs("div",{className:"bg-muted/30 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("h3",{className:"font-semibold text-black flex items-center gap-2",children:[r.jsx(es,{size:16,className:"text-green-500"}),""]}),r.jsx(Er,{variant:"secondary",children:R.paid.length})]}),r.jsx("div",{className:"space-y-2",children:R.paid.slice(0,10).map(I=>r.jsx(Nn,{className:"cursor-pointer hover:shadow-md transition-shadow bg-green-50/50",onClick:()=>d("invoiceDetails",{invoiceId:I.id}),children:r.jsxs(Cn,{className:"p-3",children:[r.jsxs("div",{className:"text-xs text-black/50 mb-1",children:["#",I.id]}),r.jsx("div",{className:"font-medium text-sm text-black mb-1 truncate",children:I.client?.name||` #${I.client_id}`}),r.jsxs("div",{className:"flex items-center gap-1 text-sm text-green-600",children:[r.jsx(es,{size:12}),r.jsx("span",{children:" "})]})]})},I.id))})]}),r.jsxs("div",{className:"bg-red-50/50 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("h3",{className:"font-semibold text-black flex items-center gap-2",children:[r.jsx(Mn,{size:16,className:"text-red-500"}),""]}),r.jsx(Er,{className:"bg-red-100 text-red-700",children:R.overdue.length})]}),r.jsx("div",{className:"space-y-2",children:R.overdue.slice(0,10).map(I=>r.jsx(Nn,{className:"cursor-pointer hover:shadow-md transition-shadow border-red-200",onClick:()=>d("invoiceDetails",{invoiceId:I.id}),children:r.jsxs(Cn,{className:"p-3",children:[r.jsxs("div",{className:"text-xs text-black/50 mb-1",children:["#",I.id]}),r.jsx("div",{className:"font-medium text-sm text-black mb-1 truncate",children:I.client?.name||` #${I.client_id}`}),r.jsxs("div",{className:"flex items-center gap-1 text-sm text-red-600",children:[r.jsx(Ph,{size:12}),r.jsxs("span",{children:[" ",I.due_date]})]})]})},I.id))})]})]})]})},$X=()=>{const{openModal:e}=et(),[n,t]=H.useState("all"),[s,l]=H.useState(1),i=50,o=1,{data:d,isLoading:c,error:a}=or({queryKey:["accounts","company",o,"history",s,i],queryFn:async()=>{const y=await Xe.get(`/accounts/company/${o}/history`,{params:{page:s,per_page:i}});return console.log("=== API Response Debug ==="),console.log("Full response:",y),console.log("Response data:",y.data),console.log("Balance:",y.data?.balance),console.log("Total debits:",y.data?.total_debits),console.log("Total credits:",y.data?.total_credits),console.log("Total:",y.data?.total),console.log("========================="),y.data?.data||y.data},enabled:!0,staleTime:30*1e3});H.useEffect(()=>{qn("financial-center")},[]);const u={totalDebits:parseFloat(d?.total_debits||"0")||0,totalCredits:parseFloat(d?.total_credits||"0")||0,transactionCount:parseInt(d?.total||"0",10)||0},h=parseFloat(d?.balance||"0")||0,f=d?.transactions?.filter(y=>n==="debits"?(y.debit||0)>0:n==="credits"?(y.credit||0)>0:!0)||[],m=()=>{e("manualTransaction",{preselectedAccount:{id:o,type:"company",name:" ",balance:h,email:"",last_activity:null,pending_count:0,pending_amount:0}})},b=y=>({INVOICE_GENERATED:"",PAYMENT_RECEIVED:" ",COMMISSION_EARNED:"",SALARY_PAID:"",TRANSFER_IN:" ",TRANSFER_OUT:" ",MANUAL_ADJUSTMENT:" ",CREDIT_ALLOCATED:" ",EXPENSE:"",INCOME:"",INITIAL_BALANCE:" "})[y]||y;return a?r.jsx("div",{className:"p-6",children:r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-red-800",children:"    "})}):r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-2 mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-10 h-10 bg-purple-600 text-white rounded-full flex items-center justify-center",children:r.jsx(Cu,{size:20})}),r.jsx("h1",{className:"text-lg font-bold text-black",children:" "})]}),r.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"text-gray-600",children:" :"}),r.jsxs("span",{className:`font-bold ${h<0?"text-red-600":h>0?"text-green-600":"text-gray-600"}`,children:[us(h)," ."]}),h<0&&r.jsx("span",{className:"text-red-600",children:"()"})]}),r.jsx("div",{className:"w-px h-4 bg-gray-300"}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"text-gray-600",children:" :"}),r.jsxs("span",{className:"font-bold text-green-600",children:[us(u.totalDebits)," ."]})]}),r.jsx("div",{className:"w-px h-4 bg-gray-300"}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"text-gray-600",children:" :"}),r.jsxs("span",{className:"font-bold text-blue-600",children:[us(u.totalCredits)," ."]})]}),r.jsx("div",{className:"w-px h-4 bg-gray-300"}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"text-gray-600",children:" :"}),r.jsxs("span",{className:"font-bold text-purple-600",children:[u.transactionCount," "]})]})]}),r.jsxs(Ne,{variant:"primary",size:"sm",onClick:m,children:[r.jsx(Kn,{size:14,className:"mr-1"})," "]})]}),r.jsxs("div",{className:"flex gap-2 mb-4",children:[r.jsxs("button",{onClick:()=>t("all"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${n==="all"?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["  (",d?.transactions?.length||0,")"]}),r.jsxs("button",{onClick:()=>t("debits"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${n==="debits"?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[" (",d?.transactions?.filter(y=>(y.debit||0)>0).length||0,")"]}),r.jsxs("button",{onClick:()=>t("credits"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${n==="credits"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[" (",d?.transactions?.filter(y=>(y.credit||0)>0).length||0,")"]})]}),r.jsxs(Nn,{children:[r.jsx(ac,{children:r.jsx("h2",{className:"text-lg font-semibold",children:" "})}),r.jsxs(Cn,{children:[c?r.jsx("div",{className:"flex justify-center items-center py-12",children:r.jsx(xi,{size:"lg"})}):f.length===0?r.jsx("div",{className:"text-center py-12 text-gray-500",children:"  "}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Zs,{className:"border-collapse border border-gray-300",children:[r.jsx(Fs,{children:r.jsxs($r,{children:[r.jsx(St,{className:"text-start border border-gray-300 text-base px-3 py-2",children:""}),r.jsx(St,{className:"text-start border border-gray-300 text-base px-3 py-2",children:""}),r.jsx(St,{className:"text-start border border-gray-300 text-base px-3 py-2",children:""}),r.jsx(St,{className:"text-start border border-gray-300 text-base px-3 py-2",children:""}),r.jsx(St,{className:"text-start border border-gray-300 text-base px-3 py-2",children:""}),r.jsx(St,{className:"text-start border border-gray-300 text-base px-3 py-2",children:""}),r.jsx(St,{className:"text-start border border-gray-300 text-base px-3 py-2",children:" "})]})}),r.jsx(Js,{children:f.map(y=>r.jsxs($r,{children:[r.jsx(yt,{className:"border border-gray-300 text-start text-base px-3 py-2",children:r.jsx("span",{className:"font-medium",children:new Date(y.transaction_date||y.created_at).toLocaleDateString("en-CA")})}),r.jsx(yt,{className:"border border-gray-300 text-start text-base px-3 py-2",children:r.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:b(y.transaction_type)})}),r.jsx(yt,{className:"border border-gray-300 text-start text-base px-3 py-2",children:r.jsx("div",{className:"max-w-xs",children:r.jsx("p",{className:"truncate",children:y.description})})}),r.jsx(yt,{className:"border border-gray-300 text-start text-base px-3 py-2",children:y.debit&&parseFloat(y.debit)>0?r.jsxs("span",{className:"text-green-600 font-semibold",children:["+",new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}).format(parseFloat(y.debit))]}):r.jsx("span",{className:"text-gray-400",children:"-"})}),r.jsx(yt,{className:"border border-gray-300 text-start text-base px-3 py-2",children:y.credit&&parseFloat(y.credit)>0?r.jsxs("span",{className:"text-blue-600 font-semibold",children:["-",new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}).format(parseFloat(y.credit))]}):r.jsx("span",{className:"text-gray-400",children:"-"})}),r.jsx(yt,{className:"border border-gray-300 text-start text-base px-3 py-2",children:r.jsx("span",{className:`font-semibold ${parseFloat(y.balance_after||y.balance||0)<0?"text-red-600":parseFloat(y.balance_after||y.balance||0)>0?"text-green-600":"text-gray-600"}`,children:new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}).format(parseFloat(y.balance_after||y.balance||0))})}),r.jsx(yt,{className:"border border-gray-300 text-start text-base px-3 py-2",children:y.related_transaction_id?r.jsxs("button",{onClick:()=>e("journalEntryDetails",{transactionId:y.id,accountType:"company",accountId:o}),className:"inline-flex items-center px-2 py-1 rounded-md text-xs bg-purple-100 text-purple-700 hover:bg-purple-200 transition-colors cursor-pointer",children:[" #",y.related_transaction_id]}):r.jsx("span",{className:"text-gray-400 text-xs",children:"-"})})]},y.id))})]})}),d&&d.total_pages>1&&r.jsxs("div",{className:"flex justify-between items-center mt-4 pt-4 border-t",children:[r.jsxs("div",{className:"text-sm text-gray-600",children:[" ",s,"  ",d.total_pages]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Ne,{variant:"outline-primary",size:"sm",disabled:s===1,onClick:()=>l(y=>Math.max(1,y-1)),children:""}),r.jsx(Ne,{variant:"outline-primary",size:"sm",disabled:s===d.total_pages,onClick:()=>l(y=>Math.min(d.total_pages,y+1)),children:""})]})]})]})]})]})},UX=()=>or({queryKey:["employee","dashboard"],queryFn:async()=>{const e=await Xe.get("/employees/me/dashboard");if(!e.data.success)throw new Error(e.data.message||"Failed to fetch employee dashboard data");return e.data.data},staleTime:60*1e3,refetchInterval:20*1e3}),HX=async({clientIds:e})=>{const{data:n}=await Xe.post("/clients/employee/sort-order",{client_ids:e});return n},VX=()=>{const e=Nt();return Et({mutationFn:HX,onSuccess:()=>{e.invalidateQueries({queryKey:["employee","dashboard"]})}})},KX=({clients:e})=>{const n=["#e3f2fd","#bbdefb"];return r.jsx("div",{className:"employee-client-column",style:{position:"relative",overflow:"visible",isolation:"isolate"},children:r.jsx("div",{className:"clients-list",style:{position:"relative",overflow:"visible"},children:e.length>0?r.jsx(Px,{items:e.map(t=>`employee-${t.client.id}`),strategy:Dx,children:e.map(t=>r.jsx(ek,{data:t,role:"employee",context:"employee-dashboard",sortableId:`employee-${t.client.id}`,alternatingColors:n,showAmount:!0},`employee-${t.client.id}`))}):r.jsx("div",{className:"text-center py-4 text-black",children:r.jsx("small",{children:"   "})})})})},WX=({tasks:e})=>{const n=kn(),t=VX(),[s,l]=H.useState([]);H.useMemo(()=>{const d=new Map;e.forEach(a=>{const u=a.client.id;d.has(u)||d.set(u,{client:a.client,tasks:[]}),d.get(u).tasks.push(a)});const c=Array.from(d.values());l(c)},[e]);const i=Ex(cc($u,{activationConstraint:{distance:8}}),cc(qu,{coordinateGetter:Ix})),o=d=>{const{active:c,over:a}=d;if(!c||!a||c.id===a.id)return;const[u,h]=c.id.toString().split("-"),[f,m]=a.id.toString().split("-");if(u!=="employee"||f!=="employee")return;const b=s.findIndex(g=>g.client.id.toString()===h),y=s.findIndex(g=>g.client.id.toString()===m);if(b!==-1&&y!==-1&&b!==y){const g=Hu(s,b,y);l(g);const w=g.map(x=>{const _=x.client.id;return typeof _=="string"?parseInt(_):_});t.mutate({clientIds:w},{onSuccess:()=>{console.log("Employee sort order updated successfully")},onError:x=>{console.error("Failed to update employee sort order:",x);const _=new Map;e.forEach(j=>{const R=j.client.id;_.has(R)||_.set(R,{client:j.client,tasks:[]}),_.get(R).tasks.push(j)}),l(Array.from(_.values()))}})}};return r.jsxs("div",{className:"rounded-lg border border-border bg-card shadow-sm h-full",style:{overflow:"visible",position:"relative",display:"flex",flexDirection:"column",zIndex:1},children:[r.jsx("div",{className:"px-4 py-2 border-b border-border",style:{backgroundColor:"#007bff",color:"#fff",flexShrink:0},children:r.jsx("div",{className:"flex justify-center items-center",children:r.jsx("h6",{className:"mb-0 font-bold text-white text-base",children:"  "})})}),r.jsx("div",{className:"p-0",style:{flex:1,position:"relative",overflow:"visible"},children:r.jsx(Ox,{onDragEnd:o,sensors:i,collisionDetection:Rx,children:r.jsx(KX,{clients:s})})}),r.jsx("div",{className:"px-4 py-2 bg-muted/30 border-t border-border text-center",style:{flexShrink:0},children:r.jsxs("button",{onClick:()=>n("/employee/tasks"),className:"text-primary p-0 flex items-center justify-center gap-1 w-full hover:text-primary/80 transition-colors text-sm",children:[r.jsx(Ey,{size:16}),r.jsx("span",{children:"  "})]})})]})},QX=()=>{const e=kn(),{openModal:n}=et(),t=Lm(),{success:s,error:l}=ir(),{data:i,isLoading:o}=or({queryKey:["invoices","employee-dashboard","unpaid-partial"],queryFn:async()=>(await Xe.get("/invoices/employee/me/dashboard",{params:{per_page:20,payment_status:["pending","partially_paid"]}})).data,staleTime:60*1e3,refetchInterval:2e4}),d=(i?.invoices||[]).map(m=>({id:m.id,client_id:m.client_id,client_name:m.client?.name||m.client_name||"",client_phone:m.client?.phone||m.client_phone||"",task_id:m.task_id,task_name:m.task?.task_name||m.task_name||"",description:m.description,amount:Number(m.amount),paid_amount:Number(m.paid_amount),remaining_amount:Number(m.remaining_amount),status:m.status})),c=(m,b,y)=>{const g=u(y);ip(m,b,g)},a=async m=>{if(!m.task_id){l("  ","     -     ");return}try{await t.mutateAsync({id:m.task_id}),s(" ","   ")}catch(b){console.error("Restore task error:",b),l("  ","   ")}},u=m=>{const b=Number(m)||0;return new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}).format(b)},h=()=>{e("/employee/financials")};if(o)return r.jsxs("div",{className:"rounded-lg border border-border bg-card shadow-sm h-full",style:{overflow:"visible",position:"relative",display:"flex",flexDirection:"column"},children:[r.jsx("div",{className:"px-4 py-2 border-b border-border",style:{backgroundColor:"var(--color-primary)",color:"var(--color-white)",flexShrink:0},children:r.jsx("h6",{className:"mb-0 font-bold text-base",children:" "})}),r.jsx("div",{className:"flex-1 flex justify-center items-center",children:r.jsx("div",{className:"spinner-border text-primary",role:"status",children:r.jsx("span",{className:"visually-hidden",children:" ..."})})})]});const f=d.filter(m=>m.remaining_amount>0);return r.jsxs("div",{className:"rounded-lg border border-border bg-card shadow-sm h-full",style:{overflow:"visible",position:"relative",display:"flex",flexDirection:"column",zIndex:1},children:[r.jsx("div",{className:"px-4 py-2 border-b border-border",style:{backgroundColor:"#ffc107",color:"#fff",flexShrink:0},children:r.jsx("div",{className:"flex justify-center items-center",children:r.jsx("h6",{className:"mb-0 text-white font-bold text-base",children:"  "})})}),r.jsx("div",{className:"p-0",style:{flex:1,overflow:"visible",position:"relative"},children:f.length===0?r.jsx("div",{className:"flex justify-center items-center h-full",children:r.jsx("div",{className:"text-center",children:r.jsx("p",{className:"text-black mb-0 text-sm",children:"  "})})}):r.jsx("div",{className:"w-full overflow-x-auto h-full",style:{overflow:"visible",position:"relative",zIndex:10},children:r.jsxs("table",{className:"w-full text-sm mb-0",style:{position:"relative",zIndex:10},children:[r.jsx("thead",{style:{position:"sticky",top:0,backgroundColor:"var(--color-gray-50)"},children:r.jsxs("tr",{children:[r.jsx("th",{style:{fontSize:"0.75rem",padding:"8px",borderBottom:"2px solid var(--color-gray-100)",textAlign:"start"},children:""}),r.jsx("th",{style:{fontSize:"0.75rem",padding:"8px",borderBottom:"2px solid var(--color-gray-100)",textAlign:"center"},children:""}),r.jsx("th",{style:{fontSize:"0.75rem",padding:"8px",borderBottom:"2px solid var(--color-gray-100)",textAlign:"center"},children:""}),r.jsx("th",{style:{fontSize:"0.75rem",padding:"8px",borderBottom:"2px solid var(--color-gray-100)",textAlign:"end",minWidth:"80px"},children:""})]})}),r.jsx("tbody",{children:f.map((m,b)=>r.jsxs("tr",{className:"hover:bg-muted/50 transition-colors cursor-pointer",children:[r.jsx("td",{style:{fontSize:"0.75rem",padding:"6px",textAlign:"start",borderBottom:"1px solid var(--color-gray-100)",backgroundColor:b%2===0?"#fff8e1":"#ffecb3"},children:r.jsx("span",{className:"font-bold text-black",style:{maxWidth:"100px",display:"inline-block",cursor:"pointer"},title:m.client_name,children:m.client_name})}),r.jsx("td",{style:{fontSize:"0.8rem",padding:"6px",textAlign:"start",borderBottom:"1px solid var(--color-gray-100)",backgroundColor:b%2===0?"#fff8e1":"#ffecb3"},className:"font-semibold",children:r.jsx("span",{children:m.description||m.task_name})}),r.jsx("td",{style:{fontSize:"0.75rem",padding:"6px",textAlign:"center",borderBottom:"1px solid var(--color-gray-100)",backgroundColor:b%2===0?"#fff8e1":"#ffecb3"},children:r.jsxs("span",{className:"font-bold text-red-600",children:[u(m.remaining_amount)," ."]})}),r.jsx("td",{style:{padding:"6px",textAlign:"end",borderBottom:"1px solid var(--color-gray-100)",minWidth:"80px",backgroundColor:b%2===0?"#fff8e1":"#ffecb3"},children:r.jsxs("div",{className:"flex justify-center gap-1",children:[r.jsx("button",{className:"px-1.5 py-1 text-xs border border-blue-500 text-blue-500 rounded hover:bg-blue-500 hover:text-white transition-colors",onClick:()=>n("editReceivable",{receivable:{id:m.id,client_id:m.client_id,description:m.description,amount:m.amount,remaining_amount:m.remaining_amount,client_name:m.client_name,client_phone:m.client_phone,task_id:m.task_id}}),title:" ",children:r.jsx(ui,{size:10})}),r.jsx("button",{className:"px-1.5 py-1 text-xs border border-green-600 text-green-600 rounded hover:bg-green-600 hover:text-white transition-colors",onClick:()=>c(m.client_phone,m.client_name,m.remaining_amount),disabled:m.remaining_amount<=0,title:"    ",children:r.jsx(el,{size:10})}),m.task_id&&r.jsx("button",{className:"px-1.5 py-1 text-xs border border-yellow-600 text-yellow-600 rounded hover:bg-yellow-600 hover:text-white transition-colors",onClick:()=>a({task_id:m.task_id}),disabled:t.isPending,title:"    ",children:r.jsx(Eu,{size:10})})]})})]},m.id))})]})})}),r.jsx("div",{className:"px-4 py-2 bg-muted/30 border-t border-border",style:{flexShrink:0},children:r.jsx("div",{className:"flex justify-center items-center",children:r.jsxs("button",{onClick:h,className:"text-primary p-0 flex items-center gap-1 hover:text-primary/80 transition-colors text-sm",children:[r.jsx(Ey,{size:16}),r.jsx("span",{children:" "})]})})})]})},GX=({transactions:e,financialSummary:n})=>{const t=kn(),s=d=>{if(!d)return"0";const c=Number(d)||0;return new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}).format(c)},l=d=>d.is_pending||d.direction==="CREDIT"&&(parseFloat(d.amount||"0")===0||d.transaction_name?.startsWith("Pending:")),i=()=>{t("/employee/financials")},o=e.filter(d=>l(d)).length;return r.jsxs("div",{className:"rounded-lg border border-border bg-card shadow-sm h-full",style:{overflow:"visible",position:"relative",display:"flex",flexDirection:"column",zIndex:1},children:[r.jsx("div",{className:"px-4 py-2 border-b border-border",style:{backgroundColor:"#28a745",color:"#fff",flexShrink:0},children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h6",{className:"mb-0 font-bold text-white text-base",children:" "}),o>0&&r.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 text-xs font-medium bg-amber-100 text-amber-800 rounded",children:[r.jsx(ms,{size:12,className:"mr-1"}),o," "]})]})}),r.jsx("div",{className:"p-0",style:{flex:1,overflow:"visible",position:"relative"},children:e.length===0?r.jsx("div",{className:"flex justify-center items-center h-full",children:r.jsx("div",{className:"text-center",children:r.jsx("p",{className:"text-black mb-0 text-sm",children:"   "})})}):r.jsx("div",{className:"w-full overflow-x-auto h-full",style:{overflow:"visible",position:"relative",zIndex:10},children:r.jsxs("table",{className:"w-full text-sm mb-0",style:{position:"relative",zIndex:10},children:[r.jsx("thead",{style:{position:"sticky",top:0,zIndex:1,backgroundColor:"var(--color-gray-50)"},children:r.jsxs("tr",{children:[r.jsx("th",{style:{fontSize:"0.75rem",padding:"8px",borderBottom:"2px solid var(--color-gray-100)",textAlign:"start"},children:"/"}),r.jsx("th",{style:{fontSize:"0.75rem",padding:"8px",borderBottom:"2px solid var(--color-gray-100)",textAlign:"center"},children:""}),r.jsx("th",{style:{fontSize:"0.75rem",padding:"8px",borderBottom:"2px solid var(--color-gray-100)",textAlign:"center"},children:""}),r.jsx("th",{style:{fontSize:"0.75rem",padding:"8px",borderBottom:"2px solid var(--color-gray-100)",textAlign:"center"},children:""})]})}),r.jsxs("tbody",{children:[e.map((d,c)=>{const a=l(d);return r.jsxs("tr",{className:"hover:bg-muted/50 transition-colors",style:{cursor:d.related_task_id?"pointer":"default"},children:[r.jsx("td",{style:{fontSize:"0.8rem",padding:"6px",textAlign:"start",borderBottom:"1px solid var(--color-gray-100)",backgroundColor:a?"#fef3c7":c%2===0?"#e8f5e8":"#c8e6c9",fontWeight:"700"},children:r.jsxs("div",{className:"text-start",children:[a&&r.jsx(ms,{size:12,className:"inline mr-1 text-amber-600"}),d.transaction_name&&r.jsx("span",{className:"font-semibold",children:d.transaction_name}),(d.client_name||d.task_name)&&r.jsxs("span",{className:"text-xs text-gray-600",children:[" ","(",d.client_name?d.client_name:"",d.client_name&&d.task_name?" - ":"",d.task_name?d.task_name:"",")"]}),d.notes&&d.notes.trim()&&r.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:d.notes})]})}),r.jsx("td",{style:{fontSize:"0.75rem",padding:"6px",textAlign:"center",borderBottom:"1px solid var(--color-gray-100)",backgroundColor:a?"#fef3c7":c%2===0?"#e8f5e8":"#c8e6c9"},children:a?r.jsx("span",{className:"text-amber-600 font-medium text-xs",children:" "}):r.jsx("span",{className:"text-green-600",children:d.direction==="CREDIT"&&d.amount?r.jsxs(r.Fragment,{children:[s(d.amount)," ."]}):r.jsx("span",{className:"text-black",children:"_"})})}),r.jsx("td",{style:{fontSize:"0.75rem",padding:"6px",textAlign:"center",borderBottom:"1px solid var(--color-gray-100)",backgroundColor:a?"#fef3c7":c%2===0?"#e8f5e8":"#c8e6c9"},children:r.jsx("span",{className:"text-red-600",children:d.direction==="DEBIT"&&d.amount?r.jsxs(r.Fragment,{children:[s(d.amount)," ."]}):r.jsx("span",{className:"text-black",children:"_"})})}),r.jsx("td",{style:{fontSize:"0.75rem",padding:"6px",textAlign:"center",borderBottom:"1px solid var(--color-gray-100)",backgroundColor:a?"#fef3c7":c%2===0?"#e8f5e8":"#c8e6c9"},children:r.jsx("span",{style:{fontSize:"10px"},children:Zr(d.transaction_date).replace(/\/20/,"/")})})]},d.id)}),r.jsxs("tr",{style:{backgroundColor:"var(--color-gray-50)",borderTop:"2px solid var(--color-gray-200)",fontWeight:"bold"},children:[r.jsx("td",{style:{fontSize:"0.75rem",padding:"8px",textAlign:"center",fontWeight:"bold",backgroundColor:"var(--color-gray-50)"},children:""}),r.jsx("td",{style:{fontSize:"0.75rem",padding:"8px",textAlign:"center",fontWeight:"bold",backgroundColor:"var(--color-gray-50)"},children:r.jsxs("span",{className:"text-green-600",children:[s(n.total_earned.toString())," ."]})}),r.jsx("td",{style:{fontSize:"0.75rem",padding:"8px",textAlign:"center",fontWeight:"bold",backgroundColor:"var(--color-gray-50)"},children:r.jsxs("span",{className:"text-red-600",children:[s(n.total_paid_out.toString())," ."]})}),r.jsx("td",{style:{fontSize:"0.75rem",padding:"8px",textAlign:"center",fontWeight:"bold",backgroundColor:"var(--color-gray-50)"},children:r.jsxs("span",{className:n.balance_due>0?"text-red-600":"text-black",children:[s(n.balance_due.toString())," ."]})})]})]})]})})}),r.jsx("div",{className:"px-4 py-2 bg-muted/30 border-t border-border text-center",style:{flexShrink:0},children:r.jsxs("button",{onClick:i,className:"text-primary p-0 flex items-center justify-center gap-1 w-full hover:text-primary/80 transition-colors text-sm",children:[r.jsx(Ey,{size:16}),r.jsx("span",{children:"  "})]})})]})},XX=()=>{const e=Dn(c=>c.user),{data:n,isLoading:t,error:s}=UX(),l=et(c=>c.openModal);if(H.useEffect(()=>{qn("employee-dashboard")},[]),t)return r.jsx("div",{className:"w-full p-2",children:r.jsx("div",{className:"flex justify-center items-center",style:{minHeight:"50vh"},children:r.jsx(xi,{children:r.jsx("span",{className:"sr-only",children:" ..."})})})});if(s)return r.jsx("div",{className:"w-full p-2",children:r.jsxs(Vu,{variant:"destructive",children:[r.jsx(bp,{children:"   "}),r.jsx(Ku,{children:s.message||"      "})]})});const i=()=>l("taskForm",{}),o=()=>l("manualReceivable",{}),d=()=>l("recordCreditModal",{});return r.jsxs("div",{className:"w-full p-2",style:{height:"100vh",overflow:"visible"},children:[r.jsx("div",{className:"mt-2 mb-2",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:i,className:"px-3 py-1.5 text-xs border border-primary text-primary rounded-md hover:bg-primary hover:text-white transition-colors",children:[r.jsx(Sn,{size:14,className:"inline me-1"})," "]}),r.jsxs("button",{onClick:o,className:"px-3 py-1.5 text-xs border border-border text-black rounded-md hover:bg-accent hover:text-accent-foreground transition-colors",children:[r.jsx(Vo,{size:14,className:"inline me-1"})," "]}),r.jsxs("button",{onClick:d,className:"px-3 py-1.5 text-xs border border-green-600 text-green-600 rounded-md hover:bg-green-600 hover:text-white transition-colors",children:[r.jsx(gs,{size:14,className:"inline me-1"})," "]})]}),r.jsx("div",{className:"flex-grow flex justify-center",children:r.jsxs("h1",{className:"text-xl font-bold mb-0 text-center text-black",children:[" ",e?.display_name]})}),r.jsx("div",{style:{width:"1px",visibility:"hidden"}})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",style:{height:"calc(100vh - 120px)",overflow:"visible",position:"relative"},children:[r.jsx("div",{className:"mb-2",style:{height:"100%",overflow:"visible",position:"relative",zIndex:10},children:n?.recent_tasks&&r.jsx(WX,{tasks:n.recent_tasks})}),r.jsx("div",{className:"mb-2",style:{height:"100%",overflow:"visible"},children:r.jsx(QX,{})}),r.jsx("div",{className:"mb-2",style:{height:"100%",overflow:"visible"},children:n?.recent_transactions&&n?.financial_summary&&r.jsx(GX,{transactions:n.recent_transactions,financialSummary:n.financial_summary})})]})]})},dk=({searchTerm:e,statusFilter:n,clientId:t,highlightTaskId:s,getTypeRowStyle:l,getStatusBadgeStyle:i})=>{const o=kn(),{openModal:d}=et(),{success:c,error:a}=ir(),u=()=>{o("/employee/tasks")},{data:h,isLoading:f,error:m,fetchNextPage:b,hasNextPage:y,isFetchingNextPage:g}=xX({search:e,status:n,client_id:t,per_page:20}),w=tk(),x=bc(),_=H.useMemo(()=>h?.pages.flatMap(T=>T.tasks)||[],[h]),j=H.useMemo(()=>[..._].sort((T,P)=>{let A=["New","Deferred","Pending Review","Completed","Cancelled"];return A.indexOf(T.status)-A.indexOf(P.status)}),[_]),{ref:R}=fo({threshold:1,onChange:T=>{T&&y&&!g&&b()}}),M=T=>{d("taskForm",{taskToEdit:T})},I=T=>{w.mutate(T.id,{onSuccess:()=>{c(" ",`   "${T.task_name||""}"  `)},onError:P=>{a("",P.message||"     ")}})},F=T=>{d("amountDetails",{task:T})},B=T=>{confirm(`      "${T.task_name}"`)&&x.mutate({id:T.id,decisions:{task_action:"cancel"}},{onSuccess:()=>{c(" ","   ")},onError:P=>{a("",P.message||"    ")}})},U=T=>{d("requirements",{task:T})},Q=T=>{const A={New:{color:"primary",text:""},"Pending Review":{color:"info",text:" "},Completed:{color:"success",text:""},Deferred:{color:"secondary",text:""},Cancelled:{color:"danger",text:""}}[T]||{color:"secondary",text:T};return r.jsx("span",{className:`badge bg-${A.color} text-white`,style:{fontSize:"0.75rem"},children:A.text})},K=T=>({New:"","In Progress":" ","Pending Review":" ",Completed:"",Deferred:"",Cancelled:""})[T]||T;return f?r.jsx("div",{className:"flex justify-center items-center p-5",children:r.jsx("div",{className:"spinner-border text-primary",role:"status",children:r.jsx("span",{className:"visually-hidden",children:" ..."})})}):m?r.jsx("div",{className:"rounded-lg border border-destructive bg-destructive/10 p-4",role:"alert",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Mn,{size:20,className:"text-destructive"}),r.jsx("span",{className:"text-destructive",children:"   .    ."})]})}):_.length===0?r.jsxs("div",{className:"text-center p-5",children:[r.jsx(Sn,{size:48,className:"text-black mb-3"}),r.jsx("h5",{className:"text-black font-bold",children:"  "}),r.jsx("p",{className:"text-black text-sm",children:"         ."})]}):r.jsxs("div",{className:"rounded-lg border-0 bg-card shadow-sm",children:[r.jsx("div",{className:"p-0",children:r.jsx("div",{className:"w-full overflow-x-auto",children:r.jsxs("table",{className:"w-full mb-0",children:[r.jsx("thead",{style:{backgroundColor:"var(--color-gray-50)"},children:r.jsxs("tr",{children:[r.jsx("th",{style:{padding:"8px",fontSize:"var(--font-size-sm)",fontWeight:"bold"},children:" "}),r.jsx("th",{style:{padding:"8px",fontSize:"var(--font-size-sm)",fontWeight:"bold"},children:""}),r.jsx("th",{style:{padding:"8px",fontSize:"var(--font-size-sm)",fontWeight:"bold"},children:""}),r.jsx("th",{style:{padding:"8px",fontSize:"var(--font-size-sm)",fontWeight:"bold"},children:""}),r.jsx("th",{style:{padding:"8px",fontSize:"var(--font-size-sm)",fontWeight:"bold"},children:""}),r.jsx("th",{style:{padding:"8px",fontSize:"var(--font-size-sm)",fontWeight:"bold"},children:" "}),r.jsx("th",{style:{padding:"8px",fontSize:"var(--font-size-sm)",fontWeight:"bold"},children:" "}),r.jsx("th",{style:{padding:"8px",fontSize:"var(--font-size-sm)",fontWeight:"bold",textAlign:"center"},children:""})]})}),r.jsx("tbody",{children:j.map(T=>{const P=s&&T.id.toString()===s;return r.jsxs("tr",{className:"hover:bg-muted/50 transition-colors",style:{backgroundColor:P?"rgba(255, 193, 7, 0.1)":l?l(T.type).backgroundColor:"transparent",border:P?"2px solid rgba(255, 193, 7, 0.3)":"none",position:"relative"},children:[P&&r.jsx("td",{colSpan:8,className:"p-0",style:{position:"absolute",top:0,left:0,right:0,zIndex:10},children:r.jsx("div",{className:"w-full text-center py-1 cursor-pointer",style:{backgroundColor:"rgba(255, 193, 7, 0.1)",fontSize:"0.8em"},onClick:u,title:"  ",children:r.jsx("small",{className:"text-black font-bold",children:"      -   "})})}),[r.jsx("td",{style:{backgroundColor:l?l(T.type).backgroundColor:"transparent",padding:"8px",fontSize:"var(--font-size-sm)"},children:r.jsx("span",{className:"font-bold text-black",children:T.task_name||"  "})},"name"),r.jsx("td",{style:{backgroundColor:l?l(T.type).backgroundColor:"transparent",padding:"8px",fontSize:"var(--font-size-sm)"},children:T.notes?r.jsx("div",{className:"text-black text-xs",children:T.notes.length>40?`${T.notes.substring(0,40)}...`:T.notes}):r.jsx("span",{className:"text-black",children:""})},"notes"),r.jsx("td",{style:{backgroundColor:l?l(T.type).backgroundColor:"transparent",padding:"8px",fontSize:"var(--font-size-sm)"},children:r.jsxs("div",{className:"flex items-center gap-2",children:[T.client?.id?r.jsx(xn,{to:`/employee/clients/${T.client.id}`,className:"font-medium no-underline text-black hover:text-primary transition-colors",children:T.client.name}):r.jsx("span",{className:"font-medium",children:T.client?.name||" "}),r.jsx("span",{className:"text-black text-xs",children:T.client?.phone}),T.client?.phone&&r.jsx("a",{href:`https://wa.me/${T.client.phone.replace(/[^\d]/g,"")}`,target:"_blank",rel:"noopener noreferrer",className:"p-0 hover:scale-110 transition-transform",title:"  ",children:r.jsx(a6,{size:12,className:"text-green-600"})})]})},"client"),r.jsx("td",{style:{backgroundColor:l?l(T.type).backgroundColor:"transparent",padding:"8px",fontSize:"var(--font-size-sm)"},children:r.jsx("span",{className:"px-2.5 py-1 bg-primary text-white rounded-full text-xs font-medium",children:T.type})},"type"),r.jsx("td",{style:{backgroundColor:l?l(T.type).backgroundColor:"transparent",padding:"8px",fontSize:"var(--font-size-sm)"},children:i?r.jsx("span",{className:"inline-block px-2 py-1 rounded-xl text-xs font-medium",style:{...i(T.status)},children:K(T.status)}):Q(T.status)},"status"),r.jsx("td",{style:{backgroundColor:l?l(T.type).backgroundColor:"transparent",padding:"8px",fontSize:"var(--font-size-sm)"},children:r.jsxs("div",{className:"flex items-center text-black",children:[r.jsx(Ph,{size:14,className:"me-1"}),Zr(T.start_date)]})},"start"),r.jsx("td",{style:{backgroundColor:l?l(T.type).backgroundColor:"transparent",padding:"8px",fontSize:"var(--font-size-sm)"},children:r.jsxs("div",{className:"flex items-center text-black",children:[r.jsx(Ph,{size:14,className:"me-1"}),Zr(T.end_date)]})},"end"),r.jsx("td",{style:{backgroundColor:l?l(T.type).backgroundColor:"transparent",padding:"8px",fontSize:"var(--font-size-sm)"},children:r.jsxs("div",{className:"flex justify-center gap-1",children:[r.jsx("button",{onClick:()=>F(T),className:"px-1.5 py-0.5 text-xs border border-blue-500 text-blue-500 rounded hover:bg-blue-500 hover:text-white transition-colors",title:"  ",children:r.jsx(Su,{size:12})}),r.jsx("button",{onClick:()=>M(T),className:"px-1.5 py-0.5 text-xs border border-primary text-primary rounded hover:bg-primary hover:text-white transition-colors",title:" ",children:r.jsx(i6,{size:12})}),["New","Deferred"].includes(T.status)&&r.jsx("button",{onClick:()=>I(T),className:"px-1.5 py-0.5 text-xs border border-green-600 text-green-600 rounded hover:bg-green-600 hover:text-white transition-colors",title:" ",disabled:w.isPending,children:r.jsx(es,{size:12})}),T.requirements&&T.requirements.length>0&&r.jsx("button",{onClick:()=>U(T),className:"px-1.5 py-0.5 text-xs border border-yellow-600 text-yellow-600 rounded hover:bg-yellow-600 hover:text-white transition-colors",title:" ",children:r.jsx(Sn,{size:12})}),r.jsx("button",{onClick:()=>B(T),className:"px-1.5 py-0.5 text-xs border border-red-600 text-red-600 rounded hover:bg-red-600 hover:text-white transition-colors",title:" ",children:r.jsx(ln,{size:12})})]})},"actions")]]},T.id)})})]})})}),(y||g)&&r.jsx("div",{ref:R,className:"text-center p-3",children:g?r.jsx("div",{className:"spinner-border spinner-border-sm text-primary",role:"status",children:r.jsx("span",{className:"visually-hidden",children:"  ..."})}):r.jsxs("div",{className:"text-black text-sm",children:[" ",_.length," "]})}),!y&&_.length>0&&r.jsx("div",{className:"px-4 py-3 bg-muted/30 border-t border-border text-center",children:r.jsxs("small",{className:"text-black",children:["    (",_.length," )"]})})]})},YX=()=>{const[e,n]=H.useState(""),[t,s]=H.useState(""),[l]=vu(),i=l.get("highlight");H.useEffect(()=>{qn("employee-tasks")},[]);const o=u=>{switch(u){case"Government":return{backgroundColor:"rgba(74, 162, 255, 0.01)"};case"RealEstate":return{backgroundColor:"rgba(90, 175, 110, 0.1)"};case"Accounting":return{backgroundColor:"rgba(248, 220, 61, 0.1)"};default:return{backgroundColor:"rgba(206, 208, 209, 0.1)"}}},d=u=>{switch(u){case"New":return{backgroundColor:"rgba(255, 215, 0, 0.2)",color:"#B8860B",border:"1px dashed rgba(255, 215, 0, 0.3)"};case"In Progress":return{backgroundColor:"rgba(23, 162, 184, 0.2)",color:"#17A2B8",border:"1px dashed rgba(23, 162, 184, 0.3)"};case"Deferred":return{backgroundColor:"rgba(220, 53, 69, 0.2)",color:"#DC3545",border:"1px dashed rgba(220, 53, 69, 0.3)"};case"Completed":return{backgroundColor:"rgba(40, 167, 69, 0.2)",color:"#28A745",border:"1px dashed rgba(40, 167, 69, 0.3)"};default:return{backgroundColor:"rgba(108, 117, 125, 0.2)",color:"#6C757D",border:"1px dashed rgba(108, 117, 125, 0.3)"}}},c=u=>{n(u.target.value)},a=u=>{s(u.target.value)};return r.jsxs("div",{className:"w-full p-3",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[r.jsx("div",{children:r.jsx("h1",{className:"text-xl font-bold mb-1 text-black",children:""})}),r.jsx("div",{children:r.jsxs("div",{className:"flex items-center border border-border rounded-md overflow-hidden",children:[r.jsx("span",{className:"px-3 py-2 bg-muted border-r border-border",children:r.jsx(ps,{size:16,className:"text-black"})}),r.jsx("input",{type:"text",className:"flex-1 px-3 py-2 text-sm border-0 focus:outline-none focus:ring-0",placeholder:"  ...",value:e,onChange:c,style:{backgroundColor:"transparent"}})]})}),r.jsx("div",{children:r.jsxs("div",{className:"flex items-center border border-border rounded-md overflow-hidden",children:[r.jsx("span",{className:"px-3 py-2 bg-muted border-r border-border",children:r.jsx(Ty,{size:16,className:"text-black"})}),r.jsxs("select",{className:"flex-1 px-3 py-2 text-sm border-0 focus:outline-none focus:ring-0",value:t,onChange:a,style:{backgroundColor:"transparent"},children:[r.jsx("option",{value:"",children:" "}),r.jsx("option",{value:"New",children:""}),r.jsx("option",{value:"In Progress",children:" "}),r.jsx("option",{value:"Pending Review",children:" "}),r.jsx("option",{value:"Completed",children:""}),r.jsx("option",{value:"Deferred",children:""}),r.jsx("option",{value:"Cancelled",children:""})]})]})})]}),r.jsx("div",{children:r.jsx(dk,{searchTerm:e,statusFilter:t,highlightTaskId:i||void 0,getTypeRowStyle:o,getStatusBadgeStyle:d})})]})},ZX=(e={})=>{const{per_page:n=20,search:t}=e;return xa({queryKey:["employee","clients","infinite",{per_page:n,search:t}],queryFn:async({pageParam:s})=>{const l=new URLSearchParams;l.append("page",s.toString()),l.append("per_page",n.toString()),t&&l.append("search",t);const i=await Xe.get(`/clients/employee/all?${l.toString()}`);if(!i.data.success)throw new Error(i.data.message||"Failed to fetch employee clients");return i.data.data},initialPageParam:1,getNextPageParam:s=>{const{current_page:l,total_pages:i}=s.pagination;return l<i?l+1:void 0},staleTime:120*1e3,refetchInterval:300*1e3})},JX=()=>{const[e,n]=H.useState(""),{openModal:t}=et();H.useEffect(()=>{qn("employee-clients")},[]);const{data:s,isLoading:l,error:i,fetchNextPage:o,hasNextPage:d,isFetchingNextPage:c}=ZX({search:e,per_page:20}),a=H.useMemo(()=>s?.pages.flatMap(y=>y.clients)||[],[s]),{ref:u}=fo({threshold:1,onChange:y=>{y&&d&&!c&&o()}}),h=y=>{n(y.target.value)},f=y=>{t("clientForm",{clientToEdit:y})},m=y=>{t("taskForm",{client:y})},b=y=>{t("invoiceForm",{client_id:y.id,client:y})};return i?r.jsx("div",{className:"w-full p-3",children:r.jsx("div",{className:"rounded-lg border border-destructive bg-destructive/10 p-4",role:"alert",children:r.jsx("span",{className:"text-destructive",children:"   .    ."})})}):r.jsxs("div",{className:"w-full p-3",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl font-bold mb-1 text-black",children:""}),r.jsx("p",{className:"text-black mb-0 text-sm",children:"  "})]}),r.jsx("div",{children:r.jsxs("div",{className:"flex items-center border border-border rounded-md overflow-hidden",children:[r.jsx("span",{className:"px-3 py-2 bg-muted border-r border-border",children:r.jsx(ps,{size:16,className:"text-black"})}),r.jsx("input",{type:"text",className:"flex-1 px-3 py-2 text-sm border-0 focus:outline-none focus:ring-0",placeholder:"  ...",value:e,onChange:h,style:{backgroundColor:"transparent"}})]})})]}),r.jsx("div",{children:r.jsx("div",{className:"rounded-lg border-0 bg-card shadow-sm",children:r.jsxs("div",{className:"p-0",children:[r.jsx(oC,{clients:a,isLoading:l,onEdit:f,onAddTask:m,onAddInvoice:b,linkBasePath:"/employee/clients"}),(d||c)&&r.jsx("div",{ref:u,className:"text-center p-3",children:c?r.jsx("div",{className:"spinner-border spinner-border-sm text-primary",role:"status",children:r.jsx("span",{className:"visually-hidden",children:"  ..."})}):r.jsxs("div",{className:"text-black text-sm",children:[" ",a.length," "]})}),!d&&a.length>0&&r.jsx("div",{className:"text-center p-3 border-t border-border",children:r.jsxs("small",{className:"text-black",children:["    (",a.length," )"]})}),!l&&a.length===0&&r.jsxs("div",{className:"text-center p-5",children:[r.jsx("h5",{className:"text-black mb-2 font-bold",children:"  "}),r.jsx("p",{className:"text-black text-sm",children:e?"    .":"     ."})]})]})})})]})},_4=e=>{const n=e.transaction_name?.startsWith("Pending:")||e.direction==="CREDIT"&&(parseFloat(e.amount)||0)===0;return{id:String(e.id),employee_user_id:e.employee_user_id?String(e.employee_user_id):void 0,transaction_name:e.transaction_name||e.description||"",direction:e.direction||(parseFloat(e.debit||0)>0?"CREDIT":"DEBIT"),amount:e.amount||e.debit||e.credit||"0",related_task_id:e.related_task_id?String(e.related_task_id):null,task_amount:e.task_amount?String(e.task_amount):null,notes:e.notes||"",transaction_date:e.transaction_date||e.created_at||"",created_at:e.created_at,task_name:e.task_name||null,client_id:e.client_id?String(e.client_id):void 0,client_name:e.client_name||null,balance:e.balance?String(e.balance):null,is_pending:n,source:e.source||"legacy",transaction_type:e.transaction_type||void 0}},eY=()=>or({queryKey:["employee","transactions","me"],queryFn:async()=>{const n=(await Xe.get("/employees/me/transactions")).data;return{success:n.success,data:{pending_commissions:(n.data?.pending_commissions||[]).map(_4),transactions:(n.data?.transactions||[]).map(_4),summary:n.data?.summary,source:n.data?.source}}},staleTime:30*1e3,refetchInterval:60*1e3}),tY=e=>({id:String(e.id),client_id:String(e.client_id),task_id:e.task_id?String(e.task_id):"",created_by:e.created_by?String(e.created_by):null,type:e.type,description:e.description,amount:String(e.amount),amount_details:"",notes:e.notes||"",due_date:e.due_date,created_at:e.created_at,updated_at:e.updated_at,client_name:e.client?.name||e.client_name||"",client_phone:e.client?.phone||e.client_phone||"",task_name:e.task?.task_name||e.task_name||"",task_type:e.task?.type||e.task_type||"",task_assigned_to_id:null,task_created_by:"",total_paid:e.paid_amount,total_allocated:0,remaining_amount:e.remaining_amount,payments:e.payments||[],credit_allocations:[],payment_status:e.is_fully_paid?"paid":e.is_partially_paid?"partial":"unpaid",employee_relationship:[],receivables_details:[]}),rY=e=>xa({queryKey:["employee","invoices","dashboard","infinite",e],queryFn:async({pageParam:n=1})=>{const t={page:n,per_page:20};e?.payment_status&&(Array.isArray(e.payment_status),t.payment_status=e.payment_status),e?.client_id&&(t.client_id=e.client_id),e?.search&&(t.search=e.search);const s=await Xe.get("/invoices/employee/me/dashboard",{params:t});return{success:!0,data:{receivables:(s.data.invoices||[]).map(tY),pagination:{total:s.data.pagination?.total||0,per_page:s.data.pagination?.per_page||20,current_page:s.data.pagination?.current_page||n,total_pages:s.data.pagination?.total_pages||1,has_next:s.data.pagination?.has_next||!1,has_prev:s.data.pagination?.has_prev||!1}}}},initialPageParam:1,getNextPageParam:n=>{const{pagination:t}=n.data;return t.has_next?t.current_page+1:void 0},staleTime:60*1e3}),nY=()=>{const[e,n]=H.useState("summary"),[t]=vu(),s=t.get("highlight"),{data:l,isLoading:i,error:o}=eY(),{data:d,isLoading:c}=zV(),a=l?.data?.transactions||[],u=d?.items||[],h=H.useMemo(()=>{let x=0,_=0;return a.forEach(j=>{const R=parseFloat(j.amount)||0;j.direction==="CREDIT"?x+=R:j.direction==="DEBIT"&&(_+=R)}),{totalEarned:x,totalPaidOut:_}},[a]),f=H.useMemo(()=>u.reduce((x,_)=>x+Number(_.expected_amount),0),[u]),m=H.useMemo(()=>a.length===0?0:Number(a[0]?.balance)||0,[a]);H.useEffect(()=>{qn("employee-financials")},[]);const b=x=>x.related_entity==="task"?"  ":"  ",y=[{key:"summary",label:""},{key:"pending",label:"",count:u.length},{key:"history",label:""}],g=i||c,w=o;return g&&e==="summary"?r.jsx("div",{className:"w-full p-4",children:r.jsx("div",{className:"flex justify-center items-center",style:{minHeight:"50vh"},children:r.jsx(xi,{children:r.jsx("span",{className:"sr-only",children:" ..."})})})}):w?r.jsx("div",{className:"w-full p-4",children:r.jsxs(Vu,{variant:"destructive",children:[r.jsx(Mn,{className:"h-4 w-4"}),r.jsx(bp,{children:"   "}),r.jsx(Ku,{children:"     "})]})}):r.jsxs("div",{className:"w-full p-4",children:[r.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-2 mb-4 text-xs",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-lg font-bold text-black m-0",children:""}),r.jsx("p",{className:"text-xs text-black/70 m-0",children:"  "})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"text-gray-600",children:" :"}),r.jsx("span",{className:"font-bold text-primary",children:new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}).format(m)}),f>0&&r.jsxs("span",{className:"text-gray-500",children:["+ ",new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}).format(f),"  = ",new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}).format(m+f)," "]})]}),r.jsx("div",{className:"w-px h-4 bg-gray-300"}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"text-gray-600",children:" :"}),r.jsx("span",{className:"font-bold text-green-600",children:new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}).format(h.totalEarned)})]}),r.jsx("div",{className:"w-px h-4 bg-gray-300"}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"text-gray-600",children:" :"}),r.jsx("span",{className:"font-bold text-red-600",children:new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}).format(h.totalPaidOut)})]}),u.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-px h-4 bg-gray-300"}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"text-gray-600",children:":"}),r.jsx("span",{className:"font-bold text-orange-600",children:u.length})]})]})]})]}),r.jsx("div",{className:"flex items-center gap-2 mb-4 border-b border-border",children:y.map(x=>r.jsxs("button",{onClick:()=>n(x.key),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${e===x.key?"border-primary text-primary":"border-transparent text-black/70 hover:text-black"}`,children:[x.label,x.count!==void 0&&x.count>0&&r.jsx(Er,{className:"mr-2 bg-orange-100 text-orange-600",children:x.count})]},x.key))}),e==="summary"&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.length>0&&r.jsxs(Nn,{children:[r.jsx(ac,{className:"pb-2",children:r.jsxs(Gb,{className:"text-sm font-medium flex items-center gap-2",children:[r.jsx(ms,{size:16,className:"text-orange-500"})," "]})}),r.jsx(Cn,{children:r.jsxs("div",{className:"space-y-3",children:[u.slice(0,3).map(x=>r.jsxs("div",{className:"py-2 border-b border-border last:border-0",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Sn,{size:14,className:"text-black/50"}),r.jsx("span",{className:"text-sm",children:x.related_name||`${x.item_type==="commission"?"":""} #${x.related_id}`})]}),r.jsx("span",{className:"font-medium text-orange-600",children:new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}).format(Number(x.expected_amount))})]}),x.notes&&r.jsx("p",{className:"text-xs text-gray-600 bg-gray-50 p-1.5 rounded border border-gray-200 ml-6",children:x.notes})]},x.id)),u.length>3&&r.jsxs("button",{onClick:()=>n("pending"),className:"w-full text-center text-sm text-primary hover:underline py-2",children:["  (",u.length,")",r.jsx(Gs,{size:14,className:"inline mr-1"})]})]})})]}),r.jsxs(Nn,{className:u.length===0?"md:col-span-2":"",children:[r.jsx(ac,{className:"pb-2",children:r.jsxs(Gb,{className:"text-sm font-medium flex items-center gap-2",children:[r.jsx(d6,{size:16,className:"text-green-500"})," "]})}),r.jsx(Cn,{children:a.length===0?r.jsx("p",{className:"text-center text-black/50 py-4",children:"  "}):r.jsxs("div",{className:"space-y-2",children:[a.slice(0,5).map(x=>r.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border last:border-0",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium text-black",children:x.transaction_name}),r.jsx("span",{className:"block text-xs text-black/50",children:new Date(x.transaction_date||x.created_at||"").toLocaleDateString("en-CA")})]}),r.jsxs("span",{className:`font-medium ${x.direction==="CREDIT"?"text-green-600":"text-red-600"}`,children:[x.direction==="CREDIT"?"+":"-",new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}).format(parseFloat(x.amount))]})]},x.id)),a.length>5&&r.jsxs("button",{onClick:()=>n("history"),className:"w-full text-center text-sm text-primary hover:underline py-2",children:["  ",r.jsx(Gs,{size:14,className:"inline mr-1"})]})]})})]})]}),e==="pending"&&r.jsx("div",{children:u.length===0?r.jsx(Nn,{children:r.jsxs(Cn,{className:"py-12 text-center",children:[r.jsx(es,{size:48,className:"text-green-500/50 mx-auto mb-3"}),r.jsx("h3",{className:"text-lg font-semibold text-black mb-1",children:"   "}),r.jsx("p",{className:"text-black/50",children:"   "})]})}):r.jsx("div",{className:"space-y-3",children:u.map(x=>r.jsx(Nn,{children:r.jsx(Cn,{className:"p-4",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[r.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:r.jsx(ms,{size:20,className:"text-orange-500"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-medium text-black",children:x.item_type==="commission"?"":""}),r.jsx("p",{className:"text-sm text-black/70",children:x.related_name||` #${x.related_id}`}),x.notes&&r.jsx("p",{className:"text-xs text-gray-600 mt-1 bg-gray-50 p-2 rounded border border-gray-200",children:x.notes}),r.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[r.jsx(Er,{className:"bg-orange-100 text-orange-600 text-xs",children:b(x)}),r.jsx("span",{className:"text-xs text-black/50",children:new Date(x.created_at).toLocaleDateString("en-CA")})]})]})]}),r.jsxs("div",{className:"text-left",children:[r.jsx("span",{className:"text-xl font-bold text-orange-600",children:new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}).format(Number(x.expected_amount))}),r.jsx("p",{className:"text-xs text-black/50",children:""})]})]})})},x.id))})}),e==="history"&&r.jsx(Nn,{children:r.jsx(Cn,{className:"p-0",children:a.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Sn,{size:40,className:"text-black/20 mx-auto mb-3"}),r.jsx("p",{className:"text-black/50",children:"  "})]}):r.jsxs(Zs,{className:"border-collapse border border-gray-300",children:[r.jsx(Fs,{children:r.jsxs($r,{children:[r.jsx(St,{className:"text-start border border-gray-300 text-base px-3 py-2",children:""}),r.jsx(St,{className:"text-start border border-gray-300 text-base px-3 py-2",children:""}),r.jsx(St,{className:"text-start border border-gray-300 text-base px-3 py-2",children:""}),r.jsx(St,{className:"text-start border border-gray-300 text-base px-3 py-2",children:""})]})}),r.jsx(Js,{children:a.map(x=>r.jsxs($r,{className:s===String(x.id)?"bg-yellow-50":"",children:[r.jsx(yt,{className:"border border-gray-300 text-start text-base px-3 py-2",children:r.jsx("span",{children:new Date(x.transaction_date||x.created_at||"").toLocaleDateString("en-CA")})}),r.jsx(yt,{className:"border border-gray-300 text-start text-base px-3 py-2",children:r.jsxs("div",{children:[r.jsx("span",{className:"font-medium text-black",children:x.transaction_name}),x.notes&&r.jsx("p",{className:"text-xs text-gray-600 mt-1 bg-gray-50 p-2 rounded border border-gray-200",children:x.notes})]})}),r.jsx(yt,{className:"border border-gray-300 text-start text-base px-3 py-2",children:r.jsxs("span",{className:`font-medium ${x.direction==="CREDIT"?"text-green-600":"text-red-600"}`,children:[x.direction==="CREDIT"?"+":"-",new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}).format(parseFloat(x.amount))]})}),r.jsx(yt,{className:"border border-gray-300 text-start text-base px-3 py-2",children:r.jsx("span",{className:"font-medium",children:new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}).format(parseFloat(x.balance||"0"))})})]},x.id))})]})})})]})},$o=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"SAR",minimumFractionDigits:2}).format(e),sY=e=>{const n={Accounting:{bg:"#fef9c3",text:"#a16207",label:""},RealEstate:{bg:"#dcfce7",text:"#15803d",label:""},Government:{bg:"#dbeafe",text:"#1d4ed8",label:""},Other:{bg:"#e5e7eb",text:"#4b5563",label:""}};return n[e]||n.Other},uk=De.memo(({rowData:e})=>r.jsxs("div",{children:[r.jsx("div",{style:{fontWeight:600,color:"#000000"},children:e.client_name}),r.jsx("div",{style:{fontSize:"0.875rem",color:"#666666"},children:e.client_phone})]}));uk.displayName="ClientNameCell";const fk=De.memo(({rowData:e})=>r.jsxs("div",{children:[r.jsx("div",{style:{fontWeight:500,color:"#000000"},children:e.description||e.task_name||""}),e.task_name&&r.jsxs("div",{style:{fontSize:"0.875rem",color:"#666666"},children:[": ",e.task_name]})]}));fk.displayName="DescriptionCell";const hk=De.memo(({rowData:e,columnData:n})=>r.jsx("div",{style:{textAlign:"center",fontWeight:600,color:"#000000"},children:n?.hideAmounts?"***":$o(Number(e.amount))}));hk.displayName="DebitCell";const mk=De.memo(({rowData:e,columnData:n})=>{const t=e.total_paid+e.total_allocated;return r.jsx("div",{style:{textAlign:"center",fontWeight:600,color:"#16a34a"},children:n?.hideAmounts?"***":$o(t)})});mk.displayName="CreditCell";const pk=De.memo(({rowData:e,columnData:n})=>{const t=e.remaining_amount>0?"#dc2626":"#16a34a";return r.jsx("div",{style:{textAlign:"center",fontWeight:700,color:t},children:n?.hideAmounts?"***":$o(e.remaining_amount)})});pk.displayName="DueCell";const gk=De.memo(({rowData:e})=>r.jsx("div",{style:{textAlign:"center",fontSize:"0.875rem",color:"#000000"},children:Zr(e.due_date)}));gk.displayName="DateCell";const bk=De.memo(({rowData:e})=>{const n=sY(e.type);return r.jsx("div",{style:{display:"flex",justifyContent:"center"},children:r.jsx("span",{style:{backgroundColor:n.bg,color:n.text,padding:"4px 10px",borderRadius:"9999px",fontSize:"0.875rem",fontWeight:600},children:n.label})})});bk.displayName="TypeBadgeCell";const yk=De.memo(({rowData:e,columnData:n})=>{const{openModal:t,handleWhatsAppReminder:s}=n||{};if(!n)return null;const l=!e.task_id,i=e.remaining_amount<=0&&Number(e.amount)>0,o=e.remaining_amount>0,d=()=>({id:e.receivables_details?.[0]?.id||e.id,client_id:Number(e.client_id),task_id:e.task_id?Number(e.task_id):null,reference_receivable_id:null,prepaid_receivable_id:null,created_by:Number(e.client_id),type:e.type,description:e.description,amount:Number(e.amount),original_amount:null,amount_details:[],adjustment_reason:null,notes:e.notes||"",due_date:e.due_date,created_at:e.created_at,updated_at:e.updated_at,client_name:e.client_name,client_phone:e.client_phone,task_name:e.task_name,task_type:e.task_type,total_paid:e.total_paid,remaining_amount:e.remaining_amount,payments:e.payments||[],allocations:[],client:{id:Number(e.client_id),name:e.client_name,phone:e.client_phone}});return r.jsxs("div",{style:{display:"flex",gap:"4px",justifyContent:"flex-start",alignItems:"center",height:"100%",pointerEvents:"auto",flexWrap:"wrap"},onMouseDown:c=>c.stopPropagation(),onClick:c=>c.stopPropagation(),children:[l&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:c=>{c.stopPropagation(),c.preventDefault(),t?.("editReceivable",{receivable:d()})},onMouseDown:c=>c.stopPropagation(),style:{display:"flex",alignItems:"center",gap:"2px",padding:"4px 8px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.75rem",pointerEvents:"auto"},title:"",children:r.jsx(ui,{size:12})}),r.jsx("button",{onClick:c=>{c.stopPropagation(),c.preventDefault(),t?.("deleteReceivable",{receivable:d()})},onMouseDown:c=>c.stopPropagation(),style:{display:"flex",alignItems:"center",gap:"2px",padding:"4px 8px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.75rem",pointerEvents:"auto"},title:"",children:r.jsx(Is,{size:12})})]}),o&&r.jsxs("button",{onClick:c=>{c.stopPropagation(),c.preventDefault(),s?.(e.client_phone,e.client_name,e.remaining_amount)},onMouseDown:c=>c.stopPropagation(),style:{display:"flex",alignItems:"center",gap:"2px",padding:"4px 8px",backgroundColor:"#25D366",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.75rem",pointerEvents:"auto"},title:" ",children:[r.jsx(Ps,{size:12})," "]}),i&&r.jsx("span",{style:{padding:"4px 8px",backgroundColor:"#22c55e",color:"white",borderRadius:"4px",fontSize:"0.75rem",fontWeight:600},children:""})]})});yk.displayName="ActionsCell";const aY=({receivables:e,isLoading:n,filter:t="all",hideAmounts:s=!1})=>{const l=et(u=>u.openModal),i=H.useMemo(()=>e.filter(u=>{switch(t){case"unpaid":return u.remaining_amount>0;case"paid":return u.remaining_amount<=0&&Number(u.amount)>0;default:return!0}}),[e,t]),o=H.useMemo(()=>[...i].sort((u,h)=>new Date(h.created_at).getTime()-new Date(u.created_at).getTime()),[i]),d=H.useMemo(()=>{const u=i.reduce((m,b)=>m+Number(b.amount),0),h=i.reduce((m,b)=>m+b.total_paid+b.total_allocated,0),f=i.reduce((m,b)=>m+b.remaining_amount,0);return{totalDebit:u,totalCredit:h,totalDue:f}},[i]),c=(u,h,f)=>{const m=$o(f);ip(u,h,m)},a=H.useMemo(()=>[{id:"client",key:"client_name",title:"",type:"custom",component:uk,grow:1},{id:"description",key:"description",title:"",type:"custom",component:fk,grow:2},{id:"debit",key:"amount",title:"",type:"custom",component:hk,columnData:{hideAmounts:s},grow:1},{id:"credit",key:"total_paid",title:"",type:"custom",component:mk,columnData:{hideAmounts:s},grow:1},{id:"due",key:"remaining_amount",title:"",type:"custom",component:pk,columnData:{hideAmounts:s},grow:1},{id:"dueDate",key:"due_date",title:" ",type:"custom",component:gk,grow:1},{id:"type",key:"type",title:"",type:"custom",component:bk,grow:1},{id:"actions",key:"id",title:"",type:"custom",component:yk,columnData:{openModal:l,handleWhatsAppReminder:c},width:160,grow:0}],[s,l]);return n?r.jsx("div",{className:"flex justify-center items-center p-5",children:r.jsx("div",{className:"spinner-border text-primary",role:"status",children:r.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):e.length?r.jsxs("div",{className:"employee-receivables-table-wrapper",children:[r.jsx(co,{data:o,columns:a,isLoading:n,emptyMessage:"  ",showId:!1}),r.jsx("div",{className:"rounded-lg border border-border bg-card shadow-sm mt-2",children:r.jsx("div",{className:"p-2",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 text-center",children:[r.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-100 rounded",children:[r.jsx("span",{className:"text-gray-600 text-sm",children:" :"}),r.jsx("span",{className:"font-bold text-red-600",children:s?"***":$o(d.totalDebit)})]}),r.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-100 rounded",children:[r.jsx("span",{className:"text-gray-600 text-sm",children:" :"}),r.jsx("span",{className:"font-bold text-green-600",children:s?"***":$o(d.totalCredit)})]}),r.jsxs("div",{className:"flex justify-between items-center p-2 bg-primary text-white rounded",children:[r.jsx("span",{className:"text-sm",children:" :"}),r.jsx("span",{className:"font-bold",children:s?"***":$o(d.totalDue)})]})]})})})]}):r.jsxs("div",{className:"text-center p-5 text-black",children:[r.jsx(Sn,{size:48,className:"mb-3 opacity-50"}),r.jsx("p",{className:"mb-0",children:"  "})]})},iY=()=>{const{t:e}=qt(),{id:n}=xy(),[t]=vu(),s=et(F=>F.openModal),l=Number(n),i=t.get("mode")||"general",o=t.get("filter")||"all",{hasViewAmountsPermission:d}=_c();H.useEffect(()=>{qn("clientProfile")},[]);const{data:c,isLoading:a}=Pm(l),{data:u,isLoading:h}=yc(l),{data:f,isLoading:m}=rY({client_id:l.toString()}),b=a||h||m,{success:y,error:g}=ir(),w=Et({mutationFn:async F=>{await Ji.exportClientStatement(F,{includeSubTables:!0})},onSuccess:()=>{y(e("export.statementSuccess"))},onError:F=>{console.error("Export failed:",F),g(e("export.statementError"))}}),x=Et({mutationFn:async F=>{await Ji.exportClientCredits(F)},onSuccess:()=>{y(e("export.creditsSuccess"))},onError:F=>{console.error("Export failed:",F),g(e("export.creditsError"))}}),_=()=>{c&&s("taskForm",{client:c})},j=()=>{c&&s("invoiceForm",{client_id:c.id,client:c})},R=()=>{c&&s("recordCreditModal",{client:c})},M=()=>{if(!c||!f?.pages)return;const B=f.pages.flatMap(T=>T.data.receivables).map(T=>({id:parseInt(T.id),client_id:T.client_id,type:"receivable",description:T.description||T.task_name||"",debit:Number(T.amount),credit:T.total_paid+T.total_allocated,date:T.created_at,due_date:T.due_date,task_id:T.task_id||null,task_name:T.task_name||null,task_type:T.task_type||null,notes:T.notes||""})),U=B.reduce((T,P)=>T+P.debit,0),Q=B.reduce((T,P)=>T+P.credit,0),K={client:c,clientName:c.name,clientPhone:c.phone||"",statementItems:B,totals:{totalDebit:U,totalCredit:Q,balance:U-Q},period:{from:new Date().toISOString().split("T")[0],to:new Date().toISOString().split("T")[0]}};w.mutate(K)},I=()=>{if(!c||!u?.credits)return;const F=u.credits.map(T=>({id:T.id,client_id:T.client_id,credit_date:T.received_at,amount_granted:T.amount,amount_used:T.allocated_amount,amount_available:T.remaining_amount,due_date:T.received_at,status:T.remaining_amount>0?"active":"used",credit_type:"Manual Credit",notes:T.description})),B=F.reduce((T,P)=>T+P.amount_granted,0),U=F.reduce((T,P)=>T+P.amount_used,0),Q=F.reduce((T,P)=>T+P.amount_available,0),K={client:c,credits:F,summary:{total_granted:B,total_used:U,total_available:Q,active_credits:F.filter(T=>T.status==="active").length,expired_credits:0,utilization_rate:B>0?U/B*100:0}};x.mutate(K)};return b?r.jsx("div",{children:"Loading..."}):c?r.jsxs("div",{children:[r.jsx(yS,{client:c,mode:i,onAddTask:_,onAddInvoice:j,onAddCredit:R,onExportStatement:M,onExportTasks:()=>{},onExportCredits:I,isExporting:w.isPending||x.isPending}),(i==="general"||i==="tasks")&&r.jsxs("div",{className:"rounded-lg border border-border bg-card shadow-sm mb-3",children:[r.jsx("div",{className:"px-4 py-3 border-b border-border flex justify-between items-center",children:r.jsx("h5",{className:"mb-0 text-lg font-bold text-primary",children:"   "})}),r.jsx("div",{className:"p-0",children:r.jsx(dk,{clientId:l,searchTerm:"",statusFilter:""})})]}),(i==="general"||i==="receivables")&&r.jsxs("div",{className:"rounded-lg border border-border bg-card shadow-sm mb-3",children:[r.jsx("div",{className:"px-4 py-3 border-b border-border",children:r.jsx("h5",{className:"mb-0 text-lg font-bold text-primary",children:"  "})}),r.jsx("div",{className:"p-0",children:r.jsx(aY,{receivables:f?.pages?.flatMap(F=>F.data.receivables)||[],isLoading:m,filter:o,hideAmounts:!d})})]}),(i==="general"||i==="receivables")&&r.jsxs("div",{className:"rounded-lg border border-border bg-card shadow-sm mb-3",children:[r.jsx("div",{className:"px-4 py-3 border-b border-border",children:r.jsx("h5",{className:"mb-0 text-lg font-bold text-primary",children:e("clients.creditsHistory")})}),r.jsx("div",{className:"p-0",children:r.jsx(CS,{credits:u?.credits||[],isLoading:h,clientId:l})})]})]}):r.jsx("div",{children:"Client not found."})},oY=()=>xa({queryKey:["employee-notifications"],queryFn:async({pageParam:e=1})=>(await Xe.get(`/notifications?page=${e}&per_page=20`)).data,getNextPageParam:e=>{if(e.data.pagination.has_more)return e.data.pagination.current_page+1},initialPageParam:1}),lY=()=>{const e=Nt();return Et({mutationFn:async n=>(await Xe.patch(`/employees/me/notifications/${n}/read`)).data,onSuccess:()=>{e.invalidateQueries({queryKey:["employee-notifications"]})}})},cY=()=>{const e=Nt();return Et({mutationFn:async()=>(await Xe.patch("/employees/me/notifications/read-all")).data,onSuccess:()=>{e.invalidateQueries({queryKey:["employee-notifications"]})}})},dY=({notifications:e,totalCount:n,isLoading:t})=>{const s=cY(),l=e.filter(o=>!o.is_read).length,i=async()=>{if(l!==0)try{await s.mutateAsync()}catch(o){console.error("Failed to mark all notifications as read:",o)}};return r.jsx(Nn,{className:"border-0 shadow-sm mb-4",children:r.jsx(Cn,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[l>0?r.jsx(VM,{size:24,className:"text-yellow-600"}):r.jsx(rc,{size:24,className:"text-black"}),r.jsx("h4",{className:"mb-0 font-bold",children:""})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(Er,{variant:l>0?"secondary":"default",className:"px-3 py-2",children:[n," "]}),l>0&&r.jsxs(Er,{variant:"destructive",className:"px-3 py-2",children:[l,"  "]})]})]}),r.jsx("p",{className:"text-black mb-0 mt-2",children:"      "})]}),r.jsx("div",{className:"flex-shrink-0",children:l>0&&r.jsxs(Ne,{variant:"outline-primary",onClick:i,disabled:s.isPending||t,className:"flex items-center gap-2",children:[r.jsx(t6,{size:16}),s.isPending?" ...":"  "]})})]})})})},uY=({notifications:e})=>{const n=e.filter(o=>["TaskAssigned","TaskUnassigned","TaskReassigned","TaskApproved"].includes(o.event_type)),t=e.filter(o=>o.event_type==="NewMessage"),s=e.filter(o=>o.event_type==="CommissionEarned"),l=e.filter(o=>!o.is_read),i=[{title:" ",count:n.length,unread:n.filter(o=>!o.is_read).length,icon:es,color:"primary",bgColor:"rgba(13, 110, 253, 0.1)"},{title:" ",count:t.length,unread:t.filter(o=>!o.is_read).length,icon:Ps,color:"blue-500",bgColor:"rgba(13, 202, 240, 0.1)"},{title:" ",count:s.length,unread:s.filter(o=>!o.is_read).length,icon:Kn,color:"green-600",bgColor:"rgba(25, 135, 84, 0.1)"},{title:" ",count:l.length,unread:l.length,icon:rc,color:"yellow-600",bgColor:"rgba(255, 193, 7, 0.1)"}];return r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-4",children:i.map((o,d)=>{const c=o.icon;return r.jsx("div",{children:r.jsx(Nn,{className:"border-0 shadow-sm h-full",style:{backgroundColor:o.bgColor},children:r.jsxs(Cn,{className:"text-center",children:[r.jsx("div",{className:"flex items-center justify-center mb-2",children:r.jsx(c,{size:24,className:`text-${o.color}`})}),r.jsx("h5",{className:"mb-1 font-bold",children:o.count}),r.jsx("p",{className:"text-muted-foreground mb-1 text-sm",children:o.title}),o.unread>0&&r.jsx("div",{className:"mt-2",children:r.jsxs("span",{className:`inline-block px-2.5 py-1 bg-${o.color} text-white rounded text-xs`,children:[o.unread," "]})})]})})},d)})})},fY=({notifications:e,isLoading:n})=>{const{sentinelRef:t,isSticky:s}=op(),l=kn(),i=lY(),{openDrawer:o}=al();if(n)return r.jsx("div",{className:"flex justify-center items-center p-5",children:r.jsx("div",{className:"spinner-border text-primary",role:"status",children:r.jsx("span",{className:"visually-hidden",children:" ..."})})});if(!e.length)return r.jsxs("div",{className:"text-center p-5 text-muted-foreground",children:[r.jsx(rc,{size:48,className:"mb-3 opacity-50"}),r.jsx("p",{className:"mb-0",children:"  "})]});const d=u=>{switch(u){case"TaskAssigned":return r.jsx(MD,{size:16,className:"text-primary"});case"TaskUnassigned":return r.jsx(LD,{size:16,className:"text-danger"});case"TaskReassigned":return r.jsx(Eu,{size:16,className:"text-warning"});case"TaskApproved":return r.jsx(es,{size:16,className:"text-success"});case"NewMessage":return r.jsx(Ps,{size:16,className:"text-info"});case"CommissionEarned":return r.jsx(Kn,{size:16,className:"text-success"});default:return r.jsx(rc,{size:16,className:"text-muted"})}},c=u=>{switch(u){case"TaskAssigned":return r.jsx(Er,{variant:"default",children:" "});case"TaskUnassigned":return r.jsx(Er,{variant:"destructive",children:" "});case"TaskReassigned":return r.jsx(Er,{variant:"secondary",children:" "});case"TaskApproved":return r.jsx(Er,{variant:"default",children:"  "});case"NewMessage":return r.jsx(Er,{variant:"secondary",children:" "});case"CommissionEarned":return r.jsx(Er,{variant:"default",children:" "});default:return r.jsx(Er,{variant:"outline",children:u})}},a=async u=>{if(!u.is_read)try{await i.mutateAsync(u.id)}catch(h){console.error("Failed to mark notification as read:",h)}switch(u.event_type){case"TaskAssigned":case"TaskUnassigned":case"TaskReassigned":case"TaskApproved":l(`/employee/tasks?highlight=${u.task_id}`);break;case"NewMessage":o("taskFollowUp",{taskId:u.task_id,taskName:u.task_name,clientName:u.client_name,highlightMessage:u.event_id||void 0}),l("/employee/tasks");break;case"CommissionEarned":u.event_id?l(`/employee/financials?mode=Employee&highlight=${u.event_id}`):l("/employee/financials?mode=Employee");break;default:l("/employee/tasks");break}};return r.jsxs("div",{className:"w-full overflow-x-auto",dir:"rtl",children:[r.jsx("div",{ref:t}),r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:`bg-blue-500 text-white ${s?"is-sticky":""}`,children:r.jsxs("tr",{className:"font-bold",children:[r.jsx("th",{scope:"col",className:"text-center py-3 px-2",style:{width:"5%"},children:""}),r.jsx("th",{scope:"col",className:"text-center py-3 px-2",style:{width:"50%"},children:""}),r.jsx("th",{scope:"col",className:"text-center py-3 px-2",style:{width:"15%"},children:" "}),r.jsx("th",{scope:"col",className:"text-center py-3 px-2",style:{width:"15%"},children:""}),r.jsx("th",{scope:"col",className:"text-center py-3 px-2",style:{width:"10%"},children:""}),r.jsx("th",{scope:"col",className:"text-center py-3 px-2",style:{width:"5%"},children:""})]})}),r.jsx("tbody",{children:e.map(u=>r.jsxs("tr",{className:`${u.is_read?"":"bg-yellow-100/50"} cursor-pointer hover:bg-muted/50 transition-colors`,style:{cursor:"pointer"},onClick:()=>a(u),children:[r.jsx("td",{className:"text-center py-3 px-2",children:r.jsxs("div",{className:"flex flex-col items-center gap-1",children:[d(u.event_type),c(u.event_type)]})}),r.jsx("td",{className:"py-3 px-2",children:r.jsx("div",{className:"flex items-start gap-2",children:r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"mb-1 font-medium",style:{lineHeight:"1.4"},children:u.content}),!u.is_read&&r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("div",{className:"bg-primary rounded-full",style:{width:"6px",height:"6px"}}),r.jsx("small",{className:"text-primary font-bold",children:""})]})]})})}),r.jsx("td",{className:"text-center py-3 px-2",children:r.jsx("span",{className:"font-medium",children:u.task_name||""})}),r.jsx("td",{className:"text-center py-3 px-2",children:r.jsx("span",{className:"text-muted-foreground",children:u.client_name||""})}),r.jsx("td",{className:"text-center py-3 px-2",children:r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("span",{className:"text-muted-foreground text-sm",children:Zr(u.created_at)}),u.read_at&&r.jsxs("span",{className:"text-green-600 text-sm",children:[": ",Zr(u.read_at)]})]})}),r.jsx("td",{className:"text-center py-3 px-2",children:u.is_read?r.jsx(Er,{variant:"default",className:"text-sm",children:""}):r.jsx(Er,{variant:"secondary",className:"text-sm",children:" "})})]},u.id))})]})]})},hY=()=>{const{data:e,isLoading:n,isError:t,error:s,fetchNextPage:l,hasNextPage:i,isFetchingNextPage:o,refetch:d}=oY();H.useEffect(()=>{qn("employee-notifications")},[]);const c=e?.pages.flatMap(u=>u.data.notifications)||[],a=e?.pages[0]?.data.pagination.total_items||0;return H.useEffect(()=>{const u=()=>{i&&!o&&window.innerHeight+window.scrollY>=document.body.offsetHeight-1e3&&l()};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[i,o,l]),t?r.jsx("div",{className:"w-full p-4",children:r.jsx("div",{className:"w-full",children:r.jsxs("div",{className:"rounded-lg border border-destructive bg-destructive/10 p-4 text-center",children:[r.jsx("h5",{children:"   "}),r.jsx("p",{className:"mb-3",children:s?.message||"   "}),r.jsxs("button",{className:"px-4 py-2 border border-destructive text-destructive rounded hover:bg-destructive hover:text-white transition-colors",onClick:()=>d(),children:[r.jsx(l6,{size:16,className:"me-2"})," "]})]})})}):r.jsxs("div",{className:"w-full p-4",dir:"rtl",children:[r.jsx(dY,{notifications:c,totalCount:a,isLoading:n}),r.jsx(uY,{notifications:c}),r.jsx("div",{className:"w-full",children:r.jsx("div",{className:"rounded-lg border-0 bg-card shadow-sm",children:r.jsxs("div",{className:"p-0",children:[r.jsx(fY,{notifications:c,isLoading:n}),o&&r.jsx("div",{className:"text-center p-4",children:r.jsx("div",{className:"spinner-border text-primary",role:"status",children:r.jsx("span",{className:"visually-hidden",children:"  ..."})})}),i&&!o&&r.jsx("div",{className:"text-center p-4",children:r.jsx("button",{className:"px-4 py-2 border border-primary text-primary rounded hover:bg-primary hover:text-white transition-colors",onClick:()=>l(),children:"   "})}),!i&&c.length>0&&r.jsx("div",{className:"text-center p-4 text-black",children:r.jsx("small",{children:"   "})})]})})})]})},mY=({isOpen:e,onClose:n,pendingItem:t})=>{const[s,l]=H.useState(t.expected_amount.toString()),[i,o]=H.useState(""),d=Nt(),{showToast:c}=ir(),a=Et({mutationFn:async m=>(await Xe.put(`/pending-items/${t.id}/expected-amount`,{expected_amount:m})).data,onSuccess:m=>{c({type:"success",title:"    ",message:` : ${parseFloat(s).toFixed(2)} .`}),d.invalidateQueries({queryKey:["pending-items"]}),d.invalidateQueries({queryKey:["pending-commissions"]}),n()},onError:m=>{const b=m.response?.data?.message||"   ";c({type:"error",title:"",message:b}),o(b)}}),u=m=>{m.preventDefault(),o("");const b=parseFloat(s);if(isNaN(b)){o("   ");return}if(b<=0){o("      ");return}a.mutate(b)},h=m=>{const b=m.target.value;(b===""||/^\d*\.?\d*$/.test(b))&&(l(b),o(""))},f=()=>{a.isPending||(l(t.expected_amount.toString()),o(""),n())};return r.jsxs(Zt,{isOpen:e,onClose:f,title:"  ",children:[t.task?.task_name&&r.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:[": ",t.task.task_name]}),r.jsxs("form",{onSubmit:u,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"expected_amount",className:"block text-sm font-medium text-gray-700",children:"  (.)"}),r.jsxs("div",{className:"relative",children:[r.jsx(Kt,{id:"expected_amount",type:"text",inputMode:"decimal",value:s,onChange:h,placeholder:"0.00",className:"text-right",disabled:a.isPending,autoFocus:!0}),r.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"."})]}),i&&r.jsxs("div",{className:"flex items-center gap-2 text-red-600 text-sm",children:[r.jsx(Mn,{className:"h-4 w-4"}),r.jsx("span",{children:i})]}),s&&!i&&r.jsxs("p",{className:"text-xs text-gray-500",children:[": ",parseFloat(s||"0").toFixed(2)," ."]})]}),r.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[r.jsx(Ne,{type:"button",variant:"secondary",onClick:f,disabled:a.isPending,children:""}),r.jsxs(Ne,{type:"submit",disabled:a.isPending||!!i||!s,children:[a.isPending&&r.jsx(no,{className:"ml-2 h-4 w-4 animate-spin"}),""]})]})]})]})},pY=()=>{kn(),Nt();const{showToast:e}=ir(),n=et(j=>j.openModal),[t,s]=H.useState(null),[l,i]=H.useState(!1),{data:o,fetchNextPage:d,hasNextPage:c,isFetchingNextPage:a,isLoading:u,error:h}=xa({queryKey:["pending-commissions"],queryFn:async({pageParam:j=1})=>(await Xe.get("/pending-items",{params:{status:"pending",type:"commission",page:j,per_page:20}})).data,getNextPageParam:j=>{const{current_page:R,total_pages:M}=j.pagination;return R<M?R+1:void 0},initialPageParam:1}),f=j=>new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}).format(j),m=j=>{switch(j){case"paid":return"default";case"partially_paid":return"secondary";case"overdue":return"destructive";default:return"outline"}},b=j=>{switch(j){case"paid":return"";case"partially_paid":return" ";case"pending":return"";case"overdue":return"";case"cancelled":return"";default:return j}},y=j=>{if(!j.invoice){e({type:"error",title:"",message:"     "});return}const R=j.invoice,M=Number(R.remaining_amount??Number(R.amount||0)-Number(R.paid_amount||0));n("recordPayment",{invoiceId:R.id,amountDue:M,clientName:j.client?.name})},g=j=>{s(j),i(!0)},w=j=>{if(!j.client?.phone){e({type:"error",title:"",message:"    "});return}const R=j.client.phone.replace(/[^0-9]/g,""),M=j.task?.task_name||"",I=j.invoice?.amount||0,F=j.invoice?.paid_amount||0,B=I-F,U=`  ${j.client.name},

   : ${M}

 : ${f(B)} .

     .

 `,Q=`https://wa.me/${R}?text=${encodeURIComponent(U)}`;window.open(Q,"_blank"),e({type:"success",title:"",message:"  "})},x=o?.pages.flatMap(j=>j.items)||[],_=o?.pages[0]?.pagination.total||0;return u?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx(xi,{size:"lg"})}):h?r.jsx("div",{className:"container mx-auto p-6",children:r.jsxs(Vu,{variant:"destructive",children:[r.jsx(Mn,{className:"h-4 w-4"}),r.jsxs(Ku,{children:["    : ",h.message]})]})}):r.jsxs("div",{className:"container mx-auto p-6",dir:"rtl",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:" "}),r.jsxs("p",{className:"text-gray-600 mt-2",children:["  : ",_," "]})]}),x.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Mn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"   "})]}):r.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[r.jsxs(Zs,{className:"border-collapse border border-gray-300",children:[r.jsx(Fs,{children:r.jsxs($r,{children:[r.jsx(St,{className:"text-right border border-gray-300 text-base px-3 py-2",children:""}),r.jsx(St,{className:"text-right border border-gray-300 text-base px-3 py-2",children:""}),r.jsx(St,{className:"text-right border border-gray-300 text-base px-3 py-2",children:" "}),r.jsx(St,{className:"text-right border border-gray-300 text-base px-3 py-2",children:" "}),r.jsx(St,{className:"text-right border border-gray-300 text-base px-3 py-2",children:" "}),r.jsx(St,{className:"text-right border border-gray-300 text-base px-3 py-2",children:" "}),r.jsx(St,{className:"text-right border border-gray-300 text-base px-3 py-2",children:""})]})}),r.jsx(Js,{children:x.map(j=>r.jsxs($r,{children:[r.jsx(yt,{className:"border border-gray-300 text-right text-base px-3 py-2 font-medium",children:j.task?.task_name||"-"}),r.jsx(yt,{className:"border border-gray-300 text-right text-base px-3 py-2",children:r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:j.client?.name||"-"}),j.client?.phone&&r.jsx("div",{className:"text-base text-black/50",children:j.client.phone})]})}),r.jsx(yt,{className:"border border-gray-300 text-right text-base px-3 py-2",children:j.invoice?r.jsxs("div",{children:[r.jsxs("div",{className:"font-semibold",children:[f(j.invoice.amount)," ."]}),r.jsxs("div",{className:"text-base text-black/50",children:[": ",f(j.invoice.paid_amount)," ."]})]}):"-"}),r.jsx(yt,{className:"border border-gray-300 text-right text-base px-3 py-2",children:j.invoice?r.jsx(Er,{variant:m(j.invoice.status),children:b(j.invoice.status)}):"-"}),r.jsx(yt,{className:"border border-gray-300 text-right text-base px-3 py-2",children:r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs("span",{className:"font-bold text-green-600",children:[f(j.expected_amount)," ."]})})}),r.jsx(yt,{className:"border border-gray-300 text-right text-base px-3 py-2",children:r.jsxs(Er,{variant:j.days_pending>7?"destructive":"outline",children:[j.days_pending," "]})}),r.jsx(yt,{className:"border border-gray-300 text-right text-base px-3 py-2",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ne,{size:"sm",variant:"outline-info",onClick:()=>y(j),disabled:!j.invoice,title:" ",children:r.jsx(Kn,{className:"h-4 w-4"})}),r.jsx(Ne,{size:"sm",variant:"outline-info",onClick:()=>g(j),title:"  ",children:r.jsx(i6,{className:"h-4 w-4"})}),r.jsx(Ne,{size:"sm",variant:"outline-success",onClick:()=>w(j),disabled:!j.client?.phone,title:"  ",children:r.jsx(a6,{className:"h-4 w-4"})})]})})]},j.id))})]}),c&&r.jsx("div",{className:"p-4 text-center border-t",children:r.jsx(Ne,{variant:"outline-info",onClick:()=>d(),disabled:a,children:a?r.jsxs(r.Fragment,{children:[r.jsx(no,{className:"ml-2 h-4 w-4 animate-spin"})," ..."]}):" "})})]}),t&&r.jsx(mY,{isOpen:l,onClose:()=>{i(!1),s(null)},pendingItem:t})]})},gY=[{path:"/login",element:r.jsx(CM,{})},{path:"/",element:r.jsx(SM,{}),children:[{index:!0,element:r.jsx(EM,{})},{path:"dashboard",element:r.jsx(ei,{}),children:[{element:r.jsx(oi,{}),children:[{index:!0,element:r.jsx(vX,{})}]}]},{path:"clients",element:r.jsx(ei,{}),children:[{element:r.jsx(oi,{}),children:[{index:!0,element:r.jsx(SK,{})},{path:":id",element:r.jsx(YW,{})}]}]},{path:"tasks",element:r.jsx(ei,{}),children:[{element:r.jsx(oi,{}),children:[{index:!0,element:r.jsx(EK,{})}]}]},{path:"tags",element:r.jsx(ei,{}),children:[{element:r.jsx(oi,{}),children:[{index:!0,element:r.jsx(EX,{})}]}]},{path:"employees",element:r.jsx(ei,{}),children:[{element:r.jsx(oi,{}),children:[{index:!0,element:r.jsx(RX,{})},{path:":id",element:r.jsx(LX,{})}]}]},{path:"company",element:r.jsx(ei,{}),children:[{element:r.jsx(oi,{}),children:[{path:":id",element:r.jsx($X,{})}]}]},{path:"settings",element:r.jsx(ei,{}),children:[{element:r.jsx(oi,{}),children:[{index:!0,element:r.jsx(jX,{})}]}]},{path:"receivables",element:r.jsx(ei,{}),children:[{element:r.jsx(oi,{}),children:[{index:!0,element:r.jsx(OK,{})},{path:"paid",element:r.jsx(DK,{})},{path:"overdue",element:r.jsx(PK,{})}]}]},{path:"financial-center",element:r.jsx(ei,{}),children:[{element:r.jsx(oi,{}),children:[{index:!0,element:r.jsx(di,{to:"accounts",replace:!0})},{path:"accounts",element:r.jsx(BX,{})},{path:"pending",element:r.jsx(pY,{})},{path:"invoices",element:r.jsx(qX,{})}]}]},{path:"employee",element:r.jsx(kM,{}),children:[{element:r.jsx(eK,{}),children:[{index:!0,element:r.jsx(di,{to:"dashboard",replace:!0})},{path:"dashboard",element:r.jsx(XX,{})},{path:"tasks",element:r.jsx(YX,{})},{path:"clients",element:r.jsx(JX,{})},{path:"clients/:id",element:r.jsx(iY,{})},{path:"financials",element:r.jsx(nY,{})},{path:"notifications",element:r.jsx(hY,{})}]}]}]}],bY=iT(gY),yY=1800*1e3,xY=1500*1e3,vY=()=>{const{token:e,setNonce:n,status:t,lastNonceRefresh:s}=Dn(),l=H.useRef(null),i=H.useRef(!1),o=H.useCallback(async()=>{if(!(!e||t!=="authenticated"||i.current))try{i.current=!0,console.log("Refreshing nonce...");const a=await yM(e);n(a.nonce),console.log("Nonce refreshed successfully")}catch(a){console.error("Failed to refresh nonce:",a)}finally{i.current=!1}},[e,t,n]),d=H.useCallback(()=>s?Date.now()-s>=xY:!0,[s]);return H.useEffect(()=>(t==="authenticated"&&e?(d()&&o(),l.current=setInterval(o,yY),console.log("Nonce refresh interval started (30 minutes)")):l.current&&(clearInterval(l.current),l.current=null,console.log("Nonce refresh interval cleared")),()=>{l.current&&(clearInterval(l.current),l.current=null)}),[t,e,o,d]),{manualRefresh:H.useCallback(()=>{o()},[o])}},wY=new G9({defaultOptions:{queries:{staleTime:60*1e3,refetchOnWindowFocus:!1,refetchOnMount:!0},mutations:{}}});function _Y(){return vY(),H.useEffect(()=>{rK(),JD()},[]),r.jsx(eE,{client:wY,children:r.jsx(uI,{children:r.jsx(yT,{router:bY})})})}const tr=e=>typeof e=="string",Qd=()=>{let e,n;const t=new Promise((s,l)=>{e=s,n=l});return t.resolve=e,t.reject=n,t},j4=e=>e==null?"":""+e,jY=(e,n,t)=>{e.forEach(s=>{n[s]&&(t[s]=n[s])})},NY=/###/g,N4=e=>e&&e.indexOf("###")>-1?e.replace(NY,"."):e,C4=e=>!e||tr(e),tu=(e,n,t)=>{const s=tr(n)?n.split("."):n;let l=0;for(;l<s.length-1;){if(C4(e))return{};const i=N4(s[l]);!e[i]&&t&&(e[i]=new t),Object.prototype.hasOwnProperty.call(e,i)?e=e[i]:e={},++l}return C4(e)?{}:{obj:e,k:N4(s[l])}},S4=(e,n,t)=>{const{obj:s,k:l}=tu(e,n,Object);if(s!==void 0||n.length===1){s[l]=t;return}let i=n[n.length-1],o=n.slice(0,n.length-1),d=tu(e,o,Object);for(;d.obj===void 0&&o.length;)i=`${o[o.length-1]}.${i}`,o=o.slice(0,o.length-1),d=tu(e,o,Object),d?.obj&&typeof d.obj[`${d.k}.${i}`]<"u"&&(d.obj=void 0);d.obj[`${d.k}.${i}`]=t},CY=(e,n,t,s)=>{const{obj:l,k:i}=tu(e,n,Object);l[i]=l[i]||[],l[i].push(t)},im=(e,n)=>{const{obj:t,k:s}=tu(e,n);if(t&&Object.prototype.hasOwnProperty.call(t,s))return t[s]},SY=(e,n,t)=>{const s=im(e,t);return s!==void 0?s:im(n,t)},xk=(e,n,t)=>{for(const s in n)s!=="__proto__"&&s!=="constructor"&&(s in e?tr(e[s])||e[s]instanceof String||tr(n[s])||n[s]instanceof String?t&&(e[s]=n[s]):xk(e[s],n[s],t):e[s]=n[s]);return e},$l=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var kY={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const EY=e=>tr(e)?e.replace(/[&<>"'\/]/g,n=>kY[n]):e;class RY{constructor(n){this.capacity=n,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(n){const t=this.regExpMap.get(n);if(t!==void 0)return t;const s=new RegExp(n);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(n,s),this.regExpQueue.push(n),s}}const TY=[" ",",","?","!",";"],AY=new RY(20),MY=(e,n,t)=>{n=n||"",t=t||"";const s=TY.filter(o=>n.indexOf(o)<0&&t.indexOf(o)<0);if(s.length===0)return!0;const l=AY.getRegExp(`(${s.map(o=>o==="?"?"\\?":o).join("|")})`);let i=!l.test(e);if(!i){const o=e.indexOf(t);o>0&&!l.test(e.substring(0,o))&&(i=!0)}return i},cy=(e,n,t=".")=>{if(!e)return;if(e[n])return Object.prototype.hasOwnProperty.call(e,n)?e[n]:void 0;const s=n.split(t);let l=e;for(let i=0;i<s.length;){if(!l||typeof l!="object")return;let o,d="";for(let c=i;c<s.length;++c)if(c!==i&&(d+=t),d+=s[c],o=l[d],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&c<s.length-1)continue;i+=c-i+1;break}l=o}return l},pu=e=>e?.replace("_","-"),OY={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,n){console?.[e]?.apply?.(console,n)}};class om{constructor(n,t={}){this.init(n,t)}init(n,t={}){this.prefix=t.prefix||"i18next:",this.logger=n||OY,this.options=t,this.debug=t.debug}log(...n){return this.forward(n,"log","",!0)}warn(...n){return this.forward(n,"warn","",!0)}error(...n){return this.forward(n,"error","")}deprecate(...n){return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(n,t,s,l){return l&&!this.debug?null:(tr(n[0])&&(n[0]=`${s}${this.prefix} ${n[0]}`),this.logger[t](n))}create(n){return new om(this.logger,{prefix:`${this.prefix}:${n}:`,...this.options})}clone(n){return n=n||this.options,n.prefix=n.prefix||this.prefix,new om(this.logger,n)}}var Oa=new om;class yp{constructor(){this.observers={}}on(n,t){return n.split(" ").forEach(s=>{this.observers[s]||(this.observers[s]=new Map);const l=this.observers[s].get(t)||0;this.observers[s].set(t,l+1)}),this}off(n,t){if(this.observers[n]){if(!t){delete this.observers[n];return}this.observers[n].delete(t)}}emit(n,...t){this.observers[n]&&Array.from(this.observers[n].entries()).forEach(([l,i])=>{for(let o=0;o<i;o++)l(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([l,i])=>{for(let o=0;o<i;o++)l.apply(l,[n,...t])})}}class k4 extends yp{constructor(n,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=n||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(n){this.options.ns.indexOf(n)<0&&this.options.ns.push(n)}removeNamespaces(n){const t=this.options.ns.indexOf(n);t>-1&&this.options.ns.splice(t,1)}getResource(n,t,s,l={}){const i=l.keySeparator!==void 0?l.keySeparator:this.options.keySeparator,o=l.ignoreJSONStructure!==void 0?l.ignoreJSONStructure:this.options.ignoreJSONStructure;let d;n.indexOf(".")>-1?d=n.split("."):(d=[n,t],s&&(Array.isArray(s)?d.push(...s):tr(s)&&i?d.push(...s.split(i)):d.push(s)));const c=im(this.data,d);return!c&&!t&&!s&&n.indexOf(".")>-1&&(n=d[0],t=d[1],s=d.slice(2).join(".")),c||!o||!tr(s)?c:cy(this.data?.[n]?.[t],s,i)}addResource(n,t,s,l,i={silent:!1}){const o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let d=[n,t];s&&(d=d.concat(o?s.split(o):s)),n.indexOf(".")>-1&&(d=n.split("."),l=t,t=d[1]),this.addNamespaces(t),S4(this.data,d,l),i.silent||this.emit("added",n,t,s,l)}addResources(n,t,s,l={silent:!1}){for(const i in s)(tr(s[i])||Array.isArray(s[i]))&&this.addResource(n,t,i,s[i],{silent:!0});l.silent||this.emit("added",n,t,s)}addResourceBundle(n,t,s,l,i,o={silent:!1,skipCopy:!1}){let d=[n,t];n.indexOf(".")>-1&&(d=n.split("."),l=s,s=t,t=d[1]),this.addNamespaces(t);let c=im(this.data,d)||{};o.skipCopy||(s=JSON.parse(JSON.stringify(s))),l?xk(c,s,i):c={...c,...s},S4(this.data,d,c),o.silent||this.emit("added",n,t,s)}removeResourceBundle(n,t){this.hasResourceBundle(n,t)&&delete this.data[n][t],this.removeNamespaces(t),this.emit("removed",n,t)}hasResourceBundle(n,t){return this.getResource(n,t)!==void 0}getResourceBundle(n,t){return t||(t=this.options.defaultNS),this.getResource(n,t)}getDataByLanguage(n){return this.data[n]}hasLanguageSomeTranslations(n){const t=this.getDataByLanguage(n);return!!(t&&Object.keys(t)||[]).find(l=>t[l]&&Object.keys(t[l]).length>0)}toJSON(){return this.data}}var vk={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,n,t,s,l){return e.forEach(i=>{n=this.processors[i]?.process(n,t,s,l)??n}),n}};const E4={},R4=e=>!tr(e)&&typeof e!="boolean"&&typeof e!="number";class lm extends yp{constructor(n,t={}){super(),jY(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],n,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Oa.create("translator")}changeLanguage(n){n&&(this.language=n)}exists(n,t={interpolation:{}}){const s={...t};return n==null?!1:this.resolve(n,s)?.res!==void 0}extractFromKey(n,t){let s=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;s===void 0&&(s=":");const l=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let i=t.ns||this.options.defaultNS||[];const o=s&&n.indexOf(s)>-1,d=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!MY(n,s,l);if(o&&!d){const c=n.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:n,namespaces:tr(i)?[i]:i};const a=n.split(s);(s!==l||s===l&&this.options.ns.indexOf(a[0])>-1)&&(i=a.shift()),n=a.join(l)}return{key:n,namespaces:tr(i)?[i]:i}}translate(n,t,s){let l=typeof t=="object"?{...t}:t;if(typeof l!="object"&&this.options.overloadTranslationOptionHandler&&(l=this.options.overloadTranslationOptionHandler(arguments)),typeof options=="object"&&(l={...l}),l||(l={}),n==null)return"";Array.isArray(n)||(n=[String(n)]);const i=l.returnDetails!==void 0?l.returnDetails:this.options.returnDetails,o=l.keySeparator!==void 0?l.keySeparator:this.options.keySeparator,{key:d,namespaces:c}=this.extractFromKey(n[n.length-1],l),a=c[c.length-1];let u=l.nsSeparator!==void 0?l.nsSeparator:this.options.nsSeparator;u===void 0&&(u=":");const h=l.lng||this.language,f=l.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(h?.toLowerCase()==="cimode")return f?i?{res:`${a}${u}${d}`,usedKey:d,exactUsedKey:d,usedLng:h,usedNS:a,usedParams:this.getUsedParamsDetails(l)}:`${a}${u}${d}`:i?{res:d,usedKey:d,exactUsedKey:d,usedLng:h,usedNS:a,usedParams:this.getUsedParamsDetails(l)}:d;const m=this.resolve(n,l);let b=m?.res;const y=m?.usedKey||d,g=m?.exactUsedKey||d,w=["[object Number]","[object Function]","[object RegExp]"],x=l.joinArrays!==void 0?l.joinArrays:this.options.joinArrays,_=!this.i18nFormat||this.i18nFormat.handleAsObject,j=l.count!==void 0&&!tr(l.count),R=lm.hasDefaultValue(l),M=j?this.pluralResolver.getSuffix(h,l.count,l):"",I=l.ordinal&&j?this.pluralResolver.getSuffix(h,l.count,{ordinal:!1}):"",F=j&&!l.ordinal&&l.count===0,B=F&&l[`defaultValue${this.options.pluralSeparator}zero`]||l[`defaultValue${M}`]||l[`defaultValue${I}`]||l.defaultValue;let U=b;_&&!b&&R&&(U=B);const Q=R4(U),K=Object.prototype.toString.apply(U);if(_&&U&&Q&&w.indexOf(K)<0&&!(tr(x)&&Array.isArray(U))){if(!l.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const T=this.options.returnedObjectHandler?this.options.returnedObjectHandler(y,U,{...l,ns:c}):`key '${d} (${this.language})' returned an object instead of string.`;return i?(m.res=T,m.usedParams=this.getUsedParamsDetails(l),m):T}if(o){const T=Array.isArray(U),P=T?[]:{},A=T?g:y;for(const N in U)if(Object.prototype.hasOwnProperty.call(U,N)){const k=`${A}${o}${N}`;R&&!b?P[N]=this.translate(k,{...l,defaultValue:R4(B)?B[N]:void 0,joinArrays:!1,ns:c}):P[N]=this.translate(k,{...l,joinArrays:!1,ns:c}),P[N]===k&&(P[N]=U[N])}b=P}}else if(_&&tr(x)&&Array.isArray(b))b=b.join(x),b&&(b=this.extendTranslation(b,n,l,s));else{let T=!1,P=!1;!this.isValidLookup(b)&&R&&(T=!0,b=B),this.isValidLookup(b)||(P=!0,b=d);const N=(l.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&P?void 0:b,k=R&&B!==b&&this.options.updateMissing;if(P||T||k){if(this.logger.log(k?"updateKey":"missingKey",h,a,d,k?B:b),o){const L=this.resolve(d,{...l,keySeparator:!1});L&&L.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let S=[];const E=this.languageUtils.getFallbackCodes(this.options.fallbackLng,l.lng||this.language);if(this.options.saveMissingTo==="fallback"&&E&&E[0])for(let L=0;L<E.length;L++)S.push(E[L]);else this.options.saveMissingTo==="all"?S=this.languageUtils.toResolveHierarchy(l.lng||this.language):S.push(l.lng||this.language);const O=(L,z,G)=>{const Z=R&&G!==b?G:N;this.options.missingKeyHandler?this.options.missingKeyHandler(L,a,z,Z,k,l):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(L,a,z,Z,k,l),this.emit("missingKey",L,a,z,b)};this.options.saveMissing&&(this.options.saveMissingPlurals&&j?S.forEach(L=>{const z=this.pluralResolver.getSuffixes(L,l);F&&l[`defaultValue${this.options.pluralSeparator}zero`]&&z.indexOf(`${this.options.pluralSeparator}zero`)<0&&z.push(`${this.options.pluralSeparator}zero`),z.forEach(G=>{O([L],d+G,l[`defaultValue${G}`]||B)})}):O(S,d,B))}b=this.extendTranslation(b,n,l,m,s),P&&b===d&&this.options.appendNamespaceToMissingKey&&(b=`${a}${u}${d}`),(P||T)&&this.options.parseMissingKeyHandler&&(b=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${a}${u}${d}`:d,T?b:void 0,l))}return i?(m.res=b,m.usedParams=this.getUsedParamsDetails(l),m):b}extendTranslation(n,t,s,l,i){if(this.i18nFormat?.parse)n=this.i18nFormat.parse(n,{...this.options.interpolation.defaultVariables,...s},s.lng||this.language||l.usedLng,l.usedNS,l.usedKey,{resolved:l});else if(!s.skipInterpolation){s.interpolation&&this.interpolator.init({...s,interpolation:{...this.options.interpolation,...s.interpolation}});const c=tr(n)&&(s?.interpolation?.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let a;if(c){const h=n.match(this.interpolator.nestingRegexp);a=h&&h.length}let u=s.replace&&!tr(s.replace)?s.replace:s;if(this.options.interpolation.defaultVariables&&(u={...this.options.interpolation.defaultVariables,...u}),n=this.interpolator.interpolate(n,u,s.lng||this.language||l.usedLng,s),c){const h=n.match(this.interpolator.nestingRegexp),f=h&&h.length;a<f&&(s.nest=!1)}!s.lng&&l&&l.res&&(s.lng=this.language||l.usedLng),s.nest!==!1&&(n=this.interpolator.nest(n,(...h)=>i?.[0]===h[0]&&!s.context?(this.logger.warn(`It seems you are nesting recursively key: ${h[0]} in key: ${t[0]}`),null):this.translate(...h,t),s)),s.interpolation&&this.interpolator.reset()}const o=s.postProcess||this.options.postProcess,d=tr(o)?[o]:o;return n!=null&&d?.length&&s.applyPostProcessor!==!1&&(n=vk.handle(d,n,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...l,usedParams:this.getUsedParamsDetails(s)},...s}:s,this)),n}resolve(n,t={}){let s,l,i,o,d;return tr(n)&&(n=[n]),n.forEach(c=>{if(this.isValidLookup(s))return;const a=this.extractFromKey(c,t),u=a.key;l=u;let h=a.namespaces;this.options.fallbackNS&&(h=h.concat(this.options.fallbackNS));const f=t.count!==void 0&&!tr(t.count),m=f&&!t.ordinal&&t.count===0,b=t.context!==void 0&&(tr(t.context)||typeof t.context=="number")&&t.context!=="",y=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);h.forEach(g=>{this.isValidLookup(s)||(d=g,!E4[`${y[0]}-${g}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(d)&&(E4[`${y[0]}-${g}`]=!0,this.logger.warn(`key "${l}" for languages "${y.join(", ")}" won't get resolved as namespace "${d}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),y.forEach(w=>{if(this.isValidLookup(s))return;o=w;const x=[u];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(x,u,w,g,t);else{let j;f&&(j=this.pluralResolver.getSuffix(w,t.count,t));const R=`${this.options.pluralSeparator}zero`,M=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(f&&(x.push(u+j),t.ordinal&&j.indexOf(M)===0&&x.push(u+j.replace(M,this.options.pluralSeparator)),m&&x.push(u+R)),b){const I=`${u}${this.options.contextSeparator}${t.context}`;x.push(I),f&&(x.push(I+j),t.ordinal&&j.indexOf(M)===0&&x.push(I+j.replace(M,this.options.pluralSeparator)),m&&x.push(I+R))}}let _;for(;_=x.pop();)this.isValidLookup(s)||(i=_,s=this.getResource(w,g,_,t))}))})}),{res:s,usedKey:l,exactUsedKey:i,usedLng:o,usedNS:d}}isValidLookup(n){return n!==void 0&&!(!this.options.returnNull&&n===null)&&!(!this.options.returnEmptyString&&n==="")}getResource(n,t,s,l={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(n,t,s,l):this.resourceStore.getResource(n,t,s,l)}getUsedParamsDetails(n={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],s=n.replace&&!tr(n.replace);let l=s?n.replace:n;if(s&&typeof n.count<"u"&&(l.count=n.count),this.options.interpolation.defaultVariables&&(l={...this.options.interpolation.defaultVariables,...l}),!s){l={...l};for(const i of t)delete l[i]}return l}static hasDefaultValue(n){const t="defaultValue";for(const s in n)if(Object.prototype.hasOwnProperty.call(n,s)&&t===s.substring(0,t.length)&&n[s]!==void 0)return!0;return!1}}class T4{constructor(n){this.options=n,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Oa.create("languageUtils")}getScriptPartFromCode(n){if(n=pu(n),!n||n.indexOf("-")<0)return null;const t=n.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(n){if(n=pu(n),!n||n.indexOf("-")<0)return n;const t=n.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(n){if(tr(n)&&n.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(n)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?n.toLowerCase():n)}return this.options.cleanCode||this.options.lowerCaseLng?n.toLowerCase():n}isSupportedCode(n){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(n=this.getLanguagePartFromCode(n)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(n)>-1}getBestMatchFromCodes(n){if(!n)return null;let t;return n.forEach(s=>{if(t)return;const l=this.formatLanguageCode(s);(!this.options.supportedLngs||this.isSupportedCode(l))&&(t=l)}),!t&&this.options.supportedLngs&&n.forEach(s=>{if(t)return;const l=this.getScriptPartFromCode(s);if(this.isSupportedCode(l))return t=l;const i=this.getLanguagePartFromCode(s);if(this.isSupportedCode(i))return t=i;t=this.options.supportedLngs.find(o=>{if(o===i)return o;if(!(o.indexOf("-")<0&&i.indexOf("-")<0)&&(o.indexOf("-")>0&&i.indexOf("-")<0&&o.substring(0,o.indexOf("-"))===i||o.indexOf(i)===0&&i.length>1))return o})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(n,t){if(!n)return[];if(typeof n=="function"&&(n=n(t)),tr(n)&&(n=[n]),Array.isArray(n))return n;if(!t)return n.default||[];let s=n[t];return s||(s=n[this.getScriptPartFromCode(t)]),s||(s=n[this.formatLanguageCode(t)]),s||(s=n[this.getLanguagePartFromCode(t)]),s||(s=n.default),s||[]}toResolveHierarchy(n,t){const s=this.getFallbackCodes((t===!1?[]:t)||this.options.fallbackLng||[],n),l=[],i=o=>{o&&(this.isSupportedCode(o)?l.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return tr(n)&&(n.indexOf("-")>-1||n.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(n)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(n)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(n))):tr(n)&&i(this.formatLanguageCode(n)),s.forEach(o=>{l.indexOf(o)<0&&i(this.formatLanguageCode(o))}),l}}const A4={zero:0,one:1,two:2,few:3,many:4,other:5},M4={select:e=>e===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class DY{constructor(n,t={}){this.languageUtils=n,this.options=t,this.logger=Oa.create("pluralResolver"),this.pluralRulesCache={}}addRule(n,t){this.rules[n]=t}clearCache(){this.pluralRulesCache={}}getRule(n,t={}){const s=pu(n==="dev"?"en":n),l=t.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:s,type:l});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let o;try{o=new Intl.PluralRules(s,{type:l})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),M4;if(!n.match(/-|_/))return M4;const c=this.languageUtils.getLanguagePartFromCode(n);o=this.getRule(c,t)}return this.pluralRulesCache[i]=o,o}needsPlural(n,t={}){let s=this.getRule(n,t);return s||(s=this.getRule("dev",t)),s?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(n,t,s={}){return this.getSuffixes(n,s).map(l=>`${t}${l}`)}getSuffixes(n,t={}){let s=this.getRule(n,t);return s||(s=this.getRule("dev",t)),s?s.resolvedOptions().pluralCategories.sort((l,i)=>A4[l]-A4[i]).map(l=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${l}`):[]}getSuffix(n,t,s={}){const l=this.getRule(n,s);return l?`${this.options.prepend}${s.ordinal?`ordinal${this.options.prepend}`:""}${l.select(t)}`:(this.logger.warn(`no plural rule found for: ${n}`),this.getSuffix("dev",t,s))}}const O4=(e,n,t,s=".",l=!0)=>{let i=SY(e,n,t);return!i&&l&&tr(t)&&(i=cy(e,t,s),i===void 0&&(i=cy(n,t,s))),i},yb=e=>e.replace(/\$/g,"$$$$");class PY{constructor(n={}){this.logger=Oa.create("interpolator"),this.options=n,this.format=n?.interpolation?.format||(t=>t),this.init(n)}init(n={}){n.interpolation||(n.interpolation={escapeValue:!0});const{escape:t,escapeValue:s,useRawValueToEscape:l,prefix:i,prefixEscaped:o,suffix:d,suffixEscaped:c,formatSeparator:a,unescapeSuffix:u,unescapePrefix:h,nestingPrefix:f,nestingPrefixEscaped:m,nestingSuffix:b,nestingSuffixEscaped:y,nestingOptionsSeparator:g,maxReplaces:w,alwaysFormat:x}=n.interpolation;this.escape=t!==void 0?t:EY,this.escapeValue=s!==void 0?s:!0,this.useRawValueToEscape=l!==void 0?l:!1,this.prefix=i?$l(i):o||"{{",this.suffix=d?$l(d):c||"}}",this.formatSeparator=a||",",this.unescapePrefix=u?"":h||"-",this.unescapeSuffix=this.unescapePrefix?"":u||"",this.nestingPrefix=f?$l(f):m||$l("$t("),this.nestingSuffix=b?$l(b):y||$l(")"),this.nestingOptionsSeparator=g||",",this.maxReplaces=w||1e3,this.alwaysFormat=x!==void 0?x:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const n=(t,s)=>t?.source===s?(t.lastIndex=0,t):new RegExp(s,"g");this.regexp=n(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=n(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=n(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(n,t,s,l){let i,o,d;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},a=m=>{if(m.indexOf(this.formatSeparator)<0){const w=O4(t,c,m,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(w,void 0,s,{...l,...t,interpolationkey:m}):w}const b=m.split(this.formatSeparator),y=b.shift().trim(),g=b.join(this.formatSeparator).trim();return this.format(O4(t,c,y,this.options.keySeparator,this.options.ignoreJSONStructure),g,s,{...l,...t,interpolationkey:y})};this.resetRegExp();const u=l?.missingInterpolationHandler||this.options.missingInterpolationHandler,h=l?.interpolation?.skipOnVariables!==void 0?l.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:m=>yb(m)},{regex:this.regexp,safeValue:m=>this.escapeValue?yb(this.escape(m)):yb(m)}].forEach(m=>{for(d=0;i=m.regex.exec(n);){const b=i[1].trim();if(o=a(b),o===void 0)if(typeof u=="function"){const g=u(n,i,l);o=tr(g)?g:""}else if(l&&Object.prototype.hasOwnProperty.call(l,b))o="";else if(h){o=i[0];continue}else this.logger.warn(`missed to pass in variable ${b} for interpolating ${n}`),o="";else!tr(o)&&!this.useRawValueToEscape&&(o=j4(o));const y=m.safeValue(o);if(n=n.replace(i[0],y),h?(m.regex.lastIndex+=o.length,m.regex.lastIndex-=i[0].length):m.regex.lastIndex=0,d++,d>=this.maxReplaces)break}}),n}nest(n,t,s={}){let l,i,o;const d=(c,a)=>{const u=this.nestingOptionsSeparator;if(c.indexOf(u)<0)return c;const h=c.split(new RegExp(`${u}[ ]*{`));let f=`{${h[1]}`;c=h[0],f=this.interpolate(f,o);const m=f.match(/'/g),b=f.match(/"/g);((m?.length??0)%2===0&&!b||b.length%2!==0)&&(f=f.replace(/'/g,'"'));try{o=JSON.parse(f),a&&(o={...a,...o})}catch(y){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,y),`${c}${u}${f}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,c};for(;l=this.nestingRegexp.exec(n);){let c=[];o={...s},o=o.replace&&!tr(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;const a=/{.*}/.test(l[1])?l[1].lastIndexOf("}")+1:l[1].indexOf(this.formatSeparator);if(a!==-1&&(c=l[1].slice(a).split(this.formatSeparator).map(u=>u.trim()).filter(Boolean),l[1]=l[1].slice(0,a)),i=t(d.call(this,l[1].trim(),o),o),i&&l[0]===n&&!tr(i))return i;tr(i)||(i=j4(i)),i||(this.logger.warn(`missed to resolve ${l[1]} for nesting ${n}`),i=""),c.length&&(i=c.reduce((u,h)=>this.format(u,h,s.lng,{...s,interpolationkey:l[1].trim()}),i.trim())),n=n.replace(l[0],i),this.regexp.lastIndex=0}return n}}const IY=e=>{let n=e.toLowerCase().trim();const t={};if(e.indexOf("(")>-1){const s=e.split("(");n=s[0].toLowerCase().trim();const l=s[1].substring(0,s[1].length-1);n==="currency"&&l.indexOf(":")<0?t.currency||(t.currency=l.trim()):n==="relativetime"&&l.indexOf(":")<0?t.range||(t.range=l.trim()):l.split(";").forEach(o=>{if(o){const[d,...c]=o.split(":"),a=c.join(":").trim().replace(/^'+|'+$/g,""),u=d.trim();t[u]||(t[u]=a),a==="false"&&(t[u]=!1),a==="true"&&(t[u]=!0),isNaN(a)||(t[u]=parseInt(a,10))}})}return{formatName:n,formatOptions:t}},D4=e=>{const n={};return(t,s,l)=>{let i=l;l&&l.interpolationkey&&l.formatParams&&l.formatParams[l.interpolationkey]&&l[l.interpolationkey]&&(i={...i,[l.interpolationkey]:void 0});const o=s+JSON.stringify(i);let d=n[o];return d||(d=e(pu(s),l),n[o]=d),d(t)}},FY=e=>(n,t,s)=>e(pu(t),s)(n);class LY{constructor(n={}){this.logger=Oa.create("formatter"),this.options=n,this.init(n)}init(n,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const s=t.cacheInBuiltFormats?D4:FY;this.formats={number:s((l,i)=>{const o=new Intl.NumberFormat(l,{...i});return d=>o.format(d)}),currency:s((l,i)=>{const o=new Intl.NumberFormat(l,{...i,style:"currency"});return d=>o.format(d)}),datetime:s((l,i)=>{const o=new Intl.DateTimeFormat(l,{...i});return d=>o.format(d)}),relativetime:s((l,i)=>{const o=new Intl.RelativeTimeFormat(l,{...i});return d=>o.format(d,i.range||"day")}),list:s((l,i)=>{const o=new Intl.ListFormat(l,{...i});return d=>o.format(d)})}}add(n,t){this.formats[n.toLowerCase().trim()]=t}addCached(n,t){this.formats[n.toLowerCase().trim()]=D4(t)}format(n,t,s,l={}){const i=t.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(d=>d.indexOf(")")>-1)){const d=i.findIndex(c=>c.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,d)].join(this.formatSeparator)}return i.reduce((d,c)=>{const{formatName:a,formatOptions:u}=IY(c);if(this.formats[a]){let h=d;try{const f=l?.formatParams?.[l.interpolationkey]||{},m=f.locale||f.lng||l.locale||l.lng||s;h=this.formats[a](d,m,{...u,...l,...f})}catch(f){this.logger.warn(f)}return h}else this.logger.warn(`there was no format function for ${a}`);return d},n)}}const zY=(e,n)=>{e.pending[n]!==void 0&&(delete e.pending[n],e.pendingCount--)};class BY extends yp{constructor(n,t,s,l={}){super(),this.backend=n,this.store=t,this.services=s,this.languageUtils=s.languageUtils,this.options=l,this.logger=Oa.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=l.maxParallelReads||10,this.readingCalls=0,this.maxRetries=l.maxRetries>=0?l.maxRetries:5,this.retryTimeout=l.retryTimeout>=1?l.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(s,l.backend,l)}queueLoad(n,t,s,l){const i={},o={},d={},c={};return n.forEach(a=>{let u=!0;t.forEach(h=>{const f=`${a}|${h}`;!s.reload&&this.store.hasResourceBundle(a,h)?this.state[f]=2:this.state[f]<0||(this.state[f]===1?o[f]===void 0&&(o[f]=!0):(this.state[f]=1,u=!1,o[f]===void 0&&(o[f]=!0),i[f]===void 0&&(i[f]=!0),c[h]===void 0&&(c[h]=!0)))}),u||(d[a]=!0)}),(Object.keys(i).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:l}),{toLoad:Object.keys(i),pending:Object.keys(o),toLoadLanguages:Object.keys(d),toLoadNamespaces:Object.keys(c)}}loaded(n,t,s){const l=n.split("|"),i=l[0],o=l[1];t&&this.emit("failedLoading",i,o,t),!t&&s&&this.store.addResourceBundle(i,o,s,void 0,void 0,{skipCopy:!0}),this.state[n]=t?-1:2,t&&s&&(this.state[n]=0);const d={};this.queue.forEach(c=>{CY(c.loaded,[i],o),zY(c,n),t&&c.errors.push(t),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(a=>{d[a]||(d[a]={});const u=c.loaded[a];u.length&&u.forEach(h=>{d[a][h]===void 0&&(d[a][h]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",d),this.queue=this.queue.filter(c=>!c.done)}read(n,t,s,l=0,i=this.retryTimeout,o){if(!n.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:n,ns:t,fcName:s,tried:l,wait:i,callback:o});return}this.readingCalls++;const d=(a,u)=>{if(this.readingCalls--,this.waitingReads.length>0){const h=this.waitingReads.shift();this.read(h.lng,h.ns,h.fcName,h.tried,h.wait,h.callback)}if(a&&u&&l<this.maxRetries){setTimeout(()=>{this.read.call(this,n,t,s,l+1,i*2,o)},i);return}o(a,u)},c=this.backend[s].bind(this.backend);if(c.length===2){try{const a=c(n,t);a&&typeof a.then=="function"?a.then(u=>d(null,u)).catch(d):d(null,a)}catch(a){d(a)}return}return c(n,t,d)}prepareLoading(n,t,s={},l){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),l&&l();tr(n)&&(n=this.languageUtils.toResolveHierarchy(n)),tr(t)&&(t=[t]);const i=this.queueLoad(n,t,s,l);if(!i.toLoad.length)return i.pending.length||l(),null;i.toLoad.forEach(o=>{this.loadOne(o)})}load(n,t,s){this.prepareLoading(n,t,{},s)}reload(n,t,s){this.prepareLoading(n,t,{reload:!0},s)}loadOne(n,t=""){const s=n.split("|"),l=s[0],i=s[1];this.read(l,i,"read",void 0,void 0,(o,d)=>{o&&this.logger.warn(`${t}loading namespace ${i} for language ${l} failed`,o),!o&&d&&this.logger.log(`${t}loaded namespace ${i} for language ${l}`,d),this.loaded(n,o,d)})}saveMissing(n,t,s,l,i,o={},d=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${s}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(s==null||s==="")){if(this.backend?.create){const c={...o,isUpdate:i},a=this.backend.create.bind(this.backend);if(a.length<6)try{let u;a.length===5?u=a(n,t,s,l,c):u=a(n,t,s,l),u&&typeof u.then=="function"?u.then(h=>d(null,h)).catch(d):d(null,u)}catch(u){d(u)}else a(n,t,s,l,d,c)}!n||!n[0]||this.store.addResource(n[0],t,s,l)}}}const P4=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let n={};if(typeof e[1]=="object"&&(n=e[1]),tr(e[1])&&(n.defaultValue=e[1]),tr(e[2])&&(n.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const t=e[3]||e[2];Object.keys(t).forEach(s=>{n[s]=t[s]})}return n},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),I4=e=>(tr(e.ns)&&(e.ns=[e.ns]),tr(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),tr(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs?.indexOf?.("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),typeof e.initImmediate=="boolean"&&(e.initAsync=e.initImmediate),e),hh=()=>{},qY=e=>{Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(t=>{typeof e[t]=="function"&&(e[t]=e[t].bind(e))})};class gu extends yp{constructor(n={},t){if(super(),this.options=I4(n),this.services={},this.logger=Oa,this.modules={external:[]},qY(this),t&&!this.isInitialized&&!n.isClone){if(!this.options.initAsync)return this.init(n,t),this;setTimeout(()=>{this.init(n,t)},0)}}init(n={},t){this.isInitializing=!0,typeof n=="function"&&(t=n,n={}),n.defaultNS==null&&n.ns&&(tr(n.ns)?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const s=P4();this.options={...s,...this.options,...I4(n)},this.options.interpolation={...s.interpolation,...this.options.interpolation},n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);const l=a=>a?typeof a=="function"?new a:a:null;if(!this.options.isClone){this.modules.logger?Oa.init(l(this.modules.logger),this.options):Oa.init(null,this.options);let a;this.modules.formatter?a=this.modules.formatter:a=LY;const u=new T4(this.options);this.store=new k4(this.options.resources,this.options);const h=this.services;h.logger=Oa,h.resourceStore=this.store,h.languageUtils=u,h.pluralResolver=new DY(u,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==s.interpolation.format&&this.logger.warn("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),a&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(h.formatter=l(a),h.formatter.init&&h.formatter.init(h,this.options),this.options.interpolation.format=h.formatter.format.bind(h.formatter)),h.interpolator=new PY(this.options),h.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},h.backendConnector=new BY(l(this.modules.backend),h.resourceStore,h,this.options),h.backendConnector.on("*",(m,...b)=>{this.emit(m,...b)}),this.modules.languageDetector&&(h.languageDetector=l(this.modules.languageDetector),h.languageDetector.init&&h.languageDetector.init(h,this.options.detection,this.options)),this.modules.i18nFormat&&(h.i18nFormat=l(this.modules.i18nFormat),h.i18nFormat.init&&h.i18nFormat.init(this)),this.translator=new lm(this.services,this.options),this.translator.on("*",(m,...b)=>{this.emit(m,...b)}),this.modules.external.forEach(m=>{m.init&&m.init(this)})}if(this.format=this.options.interpolation.format,t||(t=hh),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const a=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);a.length>0&&a[0]!=="dev"&&(this.options.lng=a[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(a=>{this[a]=(...u)=>this.store[a](...u)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(a=>{this[a]=(...u)=>(this.store[a](...u),this)});const d=Qd(),c=()=>{const a=(u,h)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),d.resolve(h),t(u,h)};if(this.languages&&!this.isInitialized)return a(null,this.t.bind(this));this.changeLanguage(this.options.lng,a)};return this.options.resources||!this.options.initAsync?c():setTimeout(c,0),d}loadResources(n,t=hh){let s=t;const l=tr(n)?n:this.language;if(typeof n=="function"&&(s=n),!this.options.resources||this.options.partialBundledLanguages){if(l?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return s();const i=[],o=d=>{if(!d||d==="cimode")return;this.services.languageUtils.toResolveHierarchy(d).forEach(a=>{a!=="cimode"&&i.indexOf(a)<0&&i.push(a)})};l?o(l):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(c=>o(c)),this.options.preload?.forEach?.(d=>o(d)),this.services.backendConnector.load(i,this.options.ns,d=>{!d&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),s(d)})}else s(null)}reloadResources(n,t,s){const l=Qd();return typeof n=="function"&&(s=n,n=void 0),typeof t=="function"&&(s=t,t=void 0),n||(n=this.languages),t||(t=this.options.ns),s||(s=hh),this.services.backendConnector.reload(n,t,i=>{l.resolve(),s(i)}),l}use(n){if(!n)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!n.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return n.type==="backend"&&(this.modules.backend=n),(n.type==="logger"||n.log&&n.warn&&n.error)&&(this.modules.logger=n),n.type==="languageDetector"&&(this.modules.languageDetector=n),n.type==="i18nFormat"&&(this.modules.i18nFormat=n),n.type==="postProcessor"&&vk.addPostProcessor(n),n.type==="formatter"&&(this.modules.formatter=n),n.type==="3rdParty"&&this.modules.external.push(n),this}setResolvedLanguage(n){if(!(!n||!this.languages)&&!(["cimode","dev"].indexOf(n)>-1)){for(let t=0;t<this.languages.length;t++){const s=this.languages[t];if(!(["cimode","dev"].indexOf(s)>-1)&&this.store.hasLanguageSomeTranslations(s)){this.resolvedLanguage=s;break}}!this.resolvedLanguage&&this.languages.indexOf(n)<0&&this.store.hasLanguageSomeTranslations(n)&&(this.resolvedLanguage=n,this.languages.unshift(n))}}changeLanguage(n,t){this.isLanguageChangingTo=n;const s=Qd();this.emit("languageChanging",n);const l=d=>{this.language=d,this.languages=this.services.languageUtils.toResolveHierarchy(d),this.resolvedLanguage=void 0,this.setResolvedLanguage(d)},i=(d,c)=>{c?this.isLanguageChangingTo===n&&(l(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,s.resolve((...a)=>this.t(...a)),t&&t(d,(...a)=>this.t(...a))},o=d=>{!n&&!d&&this.services.languageDetector&&(d=[]);const c=tr(d)?d:d&&d[0],a=this.store.hasLanguageSomeTranslations(c)?c:this.services.languageUtils.getBestMatchFromCodes(tr(d)?[d]:d);a&&(this.language||l(a),this.translator.language||this.translator.changeLanguage(a),this.services.languageDetector?.cacheUserLanguage?.(a)),this.loadResources(a,u=>{i(u,a)})};return!n&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!n&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(n),s}getFixedT(n,t,s){const l=(i,o,...d)=>{let c;typeof o!="object"?c=this.options.overloadTranslationOptionHandler([i,o].concat(d)):c={...o},c.lng=c.lng||l.lng,c.lngs=c.lngs||l.lngs,c.ns=c.ns||l.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||s||l.keyPrefix);const a=this.options.keySeparator||".";let u;return c.keyPrefix&&Array.isArray(i)?u=i.map(h=>`${c.keyPrefix}${a}${h}`):u=c.keyPrefix?`${c.keyPrefix}${a}${i}`:i,this.t(u,c)};return tr(n)?l.lng=n:l.lngs=n,l.ns=t,l.keyPrefix=s,l}t(...n){return this.translator?.translate(...n)}exists(...n){return this.translator?.exists(...n)}setDefaultNamespace(n){this.options.defaultNS=n}hasLoadedNamespace(n,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const s=t.lng||this.resolvedLanguage||this.languages[0],l=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(s.toLowerCase()==="cimode")return!0;const o=(d,c)=>{const a=this.services.backendConnector.state[`${d}|${c}`];return a===-1||a===0||a===2};if(t.precheck){const d=t.precheck(this,o);if(d!==void 0)return d}return!!(this.hasResourceBundle(s,n)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(s,n)&&(!l||o(i,n)))}loadNamespaces(n,t){const s=Qd();return this.options.ns?(tr(n)&&(n=[n]),n.forEach(l=>{this.options.ns.indexOf(l)<0&&this.options.ns.push(l)}),this.loadResources(l=>{s.resolve(),t&&t(l)}),s):(t&&t(),Promise.resolve())}loadLanguages(n,t){const s=Qd();tr(n)&&(n=[n]);const l=this.options.preload||[],i=n.filter(o=>l.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return i.length?(this.options.preload=l.concat(i),this.loadResources(o=>{s.resolve(),t&&t(o)}),s):(t&&t(),Promise.resolve())}dir(n){if(n||(n=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!n)return"rtl";try{const l=new Intl.Locale(n);if(l&&l.getTextInfo){const i=l.getTextInfo();if(i&&i.direction)return i.direction}}catch{}const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],s=this.services?.languageUtils||new T4(P4());return n.toLowerCase().indexOf("-latn")>1?"ltr":t.indexOf(s.getLanguagePartFromCode(n))>-1||n.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(n={},t){return new gu(n,t)}cloneInstance(n={},t=hh){const s=n.forkResourceStore;s&&delete n.forkResourceStore;const l={...this.options,...n,isClone:!0},i=new gu(l);if((n.debug!==void 0||n.prefix!==void 0)&&(i.logger=i.logger.clone(n)),["store","services","language"].forEach(d=>{i[d]=this[d]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},s){const d=Object.keys(this.store.data).reduce((c,a)=>(c[a]={...this.store.data[a]},c[a]=Object.keys(c[a]).reduce((u,h)=>(u[h]={...c[a][h]},u),c[a]),c),{});i.store=new k4(d,l),i.services.resourceStore=i.store}return i.translator=new lm(i.services,l),i.translator.on("*",(d,...c)=>{i.emit(d,...c)}),i.init(l,t),i.translator.options=l,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Qn=gu.createInstance();Qn.createInstance=gu.createInstance;Qn.createInstance;Qn.dir;Qn.init;Qn.loadResources;Qn.reloadResources;Qn.use;Qn.changeLanguage;Qn.getFixedT;Qn.t;Qn.exists;Qn.setDefaultNamespace;Qn.hasLoadedNamespace;Qn.loadNamespaces;Qn.loadLanguages;const $Y={title:" ",subtitle:"      ",usernameLabel:" ",passwordLabel:" ",buttonText:"",authenticatingText:" ...",errorInvalid:"      .",errorNetwork:"   .    ."},UY={title:"",addNew:"  ",editClient:"  ",searchPlaceholder:"    ...",tableHeaderName:" ",tableHeaderPhone:" ",tableHeaderType:" ",tableHeaderActions:"",formNameLabel:" ",formPhoneLabel:" ",formTypeLabel:" ",formDriveLabel:" Google Drive",formNotesLabel:"",tableHeaderNotes:"",deleteConfirmTitle:" ",deleteConfirmMessage:"             .",noOutstanding:"     .",filterByType:" ",allTypes:" ",types:{government:"",realEstate:"",accounting:"",other:""},tableHeaderDueAmount:"",viewReceivables:" ",creditsHistory:" ",noCreditsFound:"     .",allocatedAmount:" ",remainingAmount:" ",deleteCredit:" ",deleteCreditConfirm:"      '{description}'  {amount}",warning:"",creditHasAllocations:"     .     .",resolution:"",paymentMethod:" ",convertToPayment:"  ",selectPaymentMethod:"  ",processing:" ...",resolve:" ",creditConflict:"   ",creditConflictMessage:"  ({newAmount})     ({allocated}).       {deficit}.",allocationAdjustments:" ",newAmount:" ",totalReduction:" ",tableHeaderRegion:"",formRegionLabel:"",selectRegion:" ",formNotesPlaceholder:"  ..."},HY={title:" ",addNew:"  ",editTask:" ",searchPlaceholder:"  ...",markComplete:" ",markDeferred:" ",requirementsTitle:" : ",deleteConfirmMessage:"        ",deleteSuccess:"  ",deleteSuccessMessage:"    ",deleteError:"    ",completeSuccess:"  ",completeSuccessMessage:"    ",completeError:"    ",deferSuccess:"  ",deferSuccessMessage:"    ",deferError:"    ",resumeSuccess:"  ",resumeSuccessMessage:"    ",resumeError:"    ",tableHeaderClient:"",tableHeaderService:" ",tableHeaderClientPhone:" ",tableHeaderType:"",tableHeaderNotes:"",tableHeaderStatus:"",tableHeaderActions:"",formClientLabel:"",formTaskNameLabel:"  ()",formTypeLabel:" ",formAmountLabel:"",formDateLabel:"  ",formNotesLabel:"",formRequirementsLabel:" ",selectClient:" ",selectClientDescription:"        .",selectTaskType:"  ",selectTaskTypeDescription:"    .",addRequirement:" ",noRequirements:"   .",addFirstRequirement:"       ",requirementPlaceholder:" ",conflictResolved:"   ",prepaidConflictDetected:"      ",taskAmountConflictDetected:"     ",cancellationAnalysis:"  ",concurrentModificationDetected:"   ",conflictDetected:"  ",concurrentModificationExplanation:"          ",someoneElseModifiedTask:"     ",taskDataComparison:"  ",yourChanges:"",currentData:" ",expectedUpdateTime:"  ",actualUpdateTime:"  ",currentValues:" ",chooseResolution:"  ",useCurrentData:"  ",useCurrentDataDescription:"     ",overwriteChanges:"  ",overwriteChangesDescription:"     ",cancelUpdate:" ",cancelUpdateDescription:"    ",usingCurrentData:"   ",overwritingChanges:"   ",resolvePrepaidConflict:"    ",resolveAmountConflict:"   ",currentPrepaidAmount:"   ",newPrepaidAmount:"   ",totalPaidOnPrepaid:"   ",taskAmount:" ",identifiedConflicts:" ",paymentDecisions:" ",allocationDecisions:" ",chooseAction:" ",keepPayment:" ",deletePayment:" ",convertToCredit:"  ",reduceTo:" ",keepAllocation:" ",returnToCredit:"  ",deleteAllocation:" ",prepaidReceivableDecision:"   ",eliminatePrepaidReceivable:"   ",adjustToNewAmount:"   ",resolveConflict:" ",currentTaskAmount:"  ",newTaskAmount:"  ",currentMainReceivableAmount:"   ",calculatedNewMainAmount:"   ",totalPaidOnMain:"   ",overpaymentSurplus:"  ",conflictExplanation:" ",mainReceivableOverpaymentMessage:"         ",mainReceivablePaymentDecisions:"   ",mainReceivableAllocationDecisions:"   ",willCreateOverpayment:"  ",amountConflictResolved:"   ",prepaidConflictResolved:"     ",taskId:" ",totalFundsInvolved:"  ",prepaidReceivable:"  ",mainReceivable:" ",amount:"",totalPaid:" ",balance:"",chooseTaskAction:"  ",cancelTask:" ",cancelTaskDescription:"       ",deleteTask:" ",deleteTaskDescription:"    ",prepaidReceivableDecisions:"   ",mainReceivableDecisions:"  ",taskCancelled:"  ",taskDeleted:"  ",createSuccessTitle:"    !",viewAllTasks:"  ",addNewTask:"  ",close:"",taskHistory:" ",paymentHistory:"  ",completeTask:" :",complete:"",completeAndPay:"  ",completeWithPaymentSuccessMessage:"      .",wasPaid:" ",approvalSuccess:"  ",submitSuccess:"   ",submitSuccessMessage:"     .",submitForReviewModal:{title:"  ",taskWillBeSubmitted:"   '{taskName}'    .",askAboutPayment:"   ",paymentReceived:"  ",noPaymentReceived:"    ",paymentAmount:" ",fullPayment:" ",partialPayment:" ",paymentMethod:" ",paymentDate:" ",paymentNotes:"  ()",submitWithoutPayment:"  ",submitWithPayment:"   ",submittingTask:"  ...",submittingWithPayment:"    ...",submitError:"   ",paymentError:"    "}},VY={New:"",Deferred:"",Completed:"",Late:"",Cancelled:"","Pending Review":" "},KY={Government:"",RealEstate:"",Accounting:"",Other:""},WY={logout:" ",save:"",saving:" ...",cancel:"",close:"",edit:"",delete:"",confirm:"",noResults:"   .",requirements:"",actions:"",all:"",clearFilters:" ",search:"",status:"",type:"",remove:"",select:"",required:"  ",back:"",error:"",noDescription:"  ",loading:" ...",processing:" ...",deleting:" ...",keep:"",reduce:"",selectPaymentMethod:"  ",amount:"",description:"",date:"",continue:""},QY={required:"  ",email:"   ",min:"     {{min}}",max:"     {{max}}",minLength:"     {{min}} ",maxLength:"     {{max}} ",numeric:"   ",positive:"    ",date:"  ",minAmount:"      0.01",positiveAmount:"      "},GY={title:" ",addNewManual:"  ",clientReceivablesTitle:"  : ",summaryTotal:" ",summaryPaid:" ",summaryRemaining:" ",summary:"",totals:"",tableHeaderClient:"",tableHeaderDescription:"",tableHeaderTotal:" ",tableHeaderPaid:"",tableHeaderRemaining:"",tableHeaderDueDate:" ",tableHeaderSource:"",tableHeaderActions:"",sourceTask:"",sourceManual:"",edit:"",delete:"",editReceivable:" ",deleteReceivable:" ",deleteReceivableConfirmation:"      ",deleteReceivableWithPayments:"       .    .",deleteReceivableWithAllocations:"     .     .",resolveConflict:" ",receivableDetails:" ",client:"",task:"",cannotDeleteWithPayments:"         .       .",keepPayment:" ",deletePayment:" ",reducePayment:" ",keepAllocation:" ",deleteAllocation:" ",returnToCredit:"  ",overpaymentDetected:"   ",overpaymentMessage:"  ({new_amount})     ({total_paid}). : {surplus} ",paymentDecisions:" ",allocationDecisions:" ",convertToCredit:"  ",refund:"",tiedToTaskNotice:"          ",unallocate:" ",keep:"",notes:"",notesPlaceholder:"    ...",settlePayment:"",noClientsWithReceivables:"     .",noClientsFound:"    .",editReceivables:" ",selectType:"  ",selectClient:" ",selectedType:"  ",selectedClient:" ",type:{Government:"",RealEstate:"",Accounting:"",Other:""},chooseType:"  ",dueDate:" ",dueDateRequired:"   ."},XY={settleTitle:"  : ",historyTitle:"  : ",amountLabel:" ",methodLabel:" ",dateLabel:" ",notesLabel:" ()",selectMethod:"  ",tableHeaderAmount:"",tableHeaderMethod:"",tableHeaderDate:"",tableHeaderNotes:"",noPayments:"     .",fullPayment:" ",amountRequired:"   .",methodRequired:"   .",dateRequired:"   .",invalidAmount:"   .",payNow:" ",paymentRequired:" ",paymentRequiredMessage:"     .       .",editPayment:" "},YY={pageTitle:" : ",viewProfile:" ",addTask:" ",addReceivable:" ",viewModeGeneral:" ",viewModeTasks:"",viewModeReceivables:"",summaryTotalTasks:" ",summaryNewTasks:" ",summaryTotalReceivables:" ",summaryRemaining:" ",totalTasksValue:"  ",tasksSectionTitle:" ",receivablesSectionTitle:" "},ZY={placeholder:"  ...",modalTitle:" ",noResults:"    ."},JY={title:" ",searchPlaceholder:"     ...",addTask:" ",addManualReceivable:" ",totalClients:" ",viewMore:" ",Government:"",RealEstate:"",Accounting:"",Other:""},eZ={title:"",pageBackgrounds:" ",dashboardBackground:"  ",tasksBackground:"  ",clientsBackground:"  ",receivablesBackground:"  ",clientProfileBackground:"  ",uploadImage:" ",removeImage:" ",uploadInProgress:"  ...",uploadSuccess:"   ",uploadError:"    ",removeSuccess:"   ",removeError:"    ",saveSuccess:"   ",saveError:"    "},tZ={title:" ",createNew:"  ",createFormTitle:"  ",username:" ",email:" ",displayName:" ",password:" ",create:"",creating:" ...",createSuccess:"   ",createError:"   ",capabilities:"",capability:{manageUsers:" ",deleteAnyTask:"  ",deleteAnyReceivable:"  ",deleteAnyPayment:"  ",viewReceivablesAmounts:"      ",viewPaidReceivables:"  ",viewOverdueReceivables:"  ",viewAllReceivables:"  "},capabilityUpdateSuccess:"   ",capabilityUpdateError:"   ",noPermission:"    ",contactAdmin:"     ",loading:"  ..."},rZ={title:" ",addNew:"  ",creditHistory:" ",amount:"",allocatedAmount:" ",remainingAmount:" ",description:"",date:"",actions:"",noCredits:"   ",addCredit:" ",editCredit:" ",deleteCredit:" ",deleteCreditConfirmation:"      ",creditDetails:" ",totalCredits:" ",creditReductionConflict:"   ",creditDeletionConflict:"   ",cannotReduceBelowAllocated:"        ",cannotDeleteWithAllocations:"     ",resolveConflict:" ",allocatedTo:" ",allocationAmount:" ",currentAmount:" ",newAmount:" ",deficit:"",totalReduction:" ",keepAllocation:" ",reduceAllocation:" ",removeAllocation:" ",allocationAdjustments:" ",deletionConflictMessage:"   ",reductionConflictMessage:"   ",selectPaymentMethodForConversion:"   ",cannotIncreaseAmount:"        .",insufficientReduction:"         .",deleteAllocation:" ",convertToPayment:"  ",allocationResolutions:" "},nZ={title:" ",amount:"",description:"",currentAllocation:" ",availableCredit:" ",enterDescription:" ",editAllocation:" ",deleteAllocation:" ",deleteAllocationConfirmation:"      ",allocationDetails:" ",noAllocations:"  ",allocatedToTask:" ",insufficientCredit:"   ",deleteWarning:"     .     .",confirmDeleteMessage:"        .",noDescription:"  ",date:""},sZ={cash:"",bankTransfer:" ",check:"",creditCard:" "},aZ={dashboard:{title:"  ",welcomeMessage:" {name}",recentTasks:" ",recentReceivables:" ",recentTransactions:"  ",assignedTasks:"  ",pendingReview:" ",completedThisMonth:"  ",pendingCommission:" "},tasks:{title:"  ",submitForReview:" ",addMessage:" ",assignedToMe:" ",pendingMyReview:" ",myCompleted:"  ",submitSuccess:"    ",submitSuccessMessage:"   {{taskName}}  ",submitError:"     "},clients:{title:" ",activeClients:" ",completedClients:" ",myTasksFor:" "},financials:{title:" ",commissionDashboard:" ",pendingCommissions:" ",transactionHistory:" ",financialSummary:" ",totalEarned:" ",totalPaidOut:" ",balanceDue:" ",lastPayout:" ",earnedThisMonth:"  ",averageMonthly:" "},notifications:{title:"",taskAssigned:"   ",taskUnassigned:"   ",taskReassigned:"   ",taskApproved:"  ",taskRejected:"  ",commissionEarned:"   ",payoutReceived:"  ",newMessage:"   "}},iZ={employeeManagement:{title:" ",viewEmployee:" ",recordPayout:" ",employeeStats:" ",totalCommission:" ",pendingPayout:" ",lastActivity:" ",payoutAmount:" ",payoutType:" ",payoutNotes:" "}},oZ={COMMISSION:"",SALARY:"",PAYOUT:"",BONUS:""},lZ={CREDIT:"",DEBIT:""},cZ={login:$Y,clients:UY,tasks:HY,status:VY,type:KY,common:WY,validation:QY,receivables:GY,payments:XY,clientProfile:YY,globalSearch:ZY,dashboard:JY,settings:eZ,users:tZ,credits:rZ,allocations:nZ,paymentMethods:sZ,employee:aZ,admin:iZ,commissionTypes:oZ,transactionDirections:lZ},dZ={ar:{translation:cZ}};Qn.use(TT).init({resources:dZ,lng:"ar",fallbackLng:"ar",interpolation:{escapeValue:!1}});M9.createRoot(document.getElementById("root")).render(r.jsx(De.StrictMode,{children:r.jsx(_Y,{})}));
